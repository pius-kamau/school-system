import{__esmMin}from"./rolldown-runtime1.js";import{$$7 as $$5,A$11 as A$4,A$20 as A$21,A$9 as A$6,B$10 as B$3,B$6 as B$2,Be as Be$5,C$10 as C$3,C$11 as C$2,C$15 as C$11,C$17 as C$9,C$22 as C$24,C$9 as C$6,D$10 as D$1,D$13 as D$3,D$15 as D$16,D$9 as D$2,E$12 as E$7,E$13 as E$11,E$6,E$7 as E$5,Ee,F$11 as F$14,F$12 as F$9,F$14 as F$20,F$17 as F$23,F$7 as F$8,G$10 as G$13,G$16 as G$15,G$3 as G$2,G$5 as G$1,G$8 as G$3,G$9,H$3 as H$2,H$7 as H$3,I$12 as I$7,I$14 as I$18,I$16 as I$23,I$17 as I$24,I$6,I$8 as I,J$2 as J$4,K$4 as K$1,K$7 as K$12,L$14 as L$3,L$9 as L$2,M$11 as M$6,M$13 as M$5,M$16 as M$19,N$10 as N$1,N$12 as N$2,N$18 as N$4,N$8 as N$3,O$5 as O$7,O$6,O$7 as O$4,P$13 as P$5,P$15,P$7 as P$4,Q$3 as Q$5,Q$4 as Q$3,Q$5 as Q$2,Q$6 as Q,R$11 as R$6,R$14 as R$20,R$7 as R$4,S$3,S$9 as S$5,T$4 as T$12,T$5 as T$8,U$12 as U$4,U$15,U$17 as U$16,U$6 as U$3,Ue as Ue$5,V$2 as V$4,W$11 as W,W$6 as W$3,X$4 as X$1,X$7 as X$3,Y$8 as Y$3,Yt as Yt$2,_$8 as _$2,a$1 as a$7,b$10 as b$2,b$15 as b$6,b$19 as b$13,b$8 as b$3,be as be$3,c$3 as c$14,ct$1 as ct,d$4 as d$6,d$8 as d$7,e$4 as e$14,et as et$7,f$10 as f$11,f$4 as f$10,f$7 as f$2,g$11 as g$8,g$6 as g$7,g$9 as g$3,h$3 as h,h$7 as h$2,i$2 as i$7,i$5 as i$8,init_chunk_24SRNUKF,init_chunk_2I46TDZX,init_chunk_2THJGZAY,init_chunk_3GZYEUEN,init_chunk_3MPI6JF3,init_chunk_3SZW2M2C,init_chunk_3YG3LPCT,init_chunk_3YYCR3MK,init_chunk_4EGCKAGP,init_chunk_5E4GWM3G,init_chunk_5FHYZOC2,init_chunk_5KY23Z44,init_chunk_5LJVRLAE,init_chunk_5T6A5SAI,init_chunk_5UOTY7JD,init_chunk_6A6JPUN3,init_chunk_7A6Q5FWY,init_chunk_7HANRWMF,init_chunk_7IJT4CKC,init_chunk_A3AZZFHH,init_chunk_AH3WKWOQ,init_chunk_ANM5TKZG,init_chunk_BO2OQIFE,init_chunk_BPPQKANW,init_chunk_CE7AJTHZ,init_chunk_CJCFO44T,init_chunk_CW2AAW52,init_chunk_D2BDKS6Z,init_chunk_D7BRHWJ2,init_chunk_DF65H2AH,init_chunk_DK6TV7BJ,init_chunk_DONNYC6R,init_chunk_EBLPXPDW,init_chunk_FGTDP4PK,init_chunk_FNPH6SE2,init_chunk_FX53TGUQ,init_chunk_GJHJXTKQ,init_chunk_H5U7RGZ6,init_chunk_HWHYDDXK,init_chunk_ISFIS6QF,init_chunk_J2PMOX3K,init_chunk_JABG3MKS,init_chunk_KF6DUMC5,init_chunk_LC3UDGST,init_chunk_LPCGVIKH,init_chunk_LPSWCYLN,init_chunk_MEJ73EXY,init_chunk_MNJJ4VZE,init_chunk_N3BFPGRL,init_chunk_NCNFF4P5,init_chunk_O3MISVPC,init_chunk_OA7HPKNQ,init_chunk_OSKJKMSY,init_chunk_OSRTBKFF,init_chunk_OUX4NQEB,init_chunk_P2RONZT5,init_chunk_PMJ2S2EI,init_chunk_PQ2OBNL3,init_chunk_QDRLTX4E,init_chunk_RJ4N5IZZ,init_chunk_RJMDCZGC,init_chunk_SAOD5MO2,init_chunk_SNEMIYZ2,init_chunk_SPVJCDA2,init_chunk_SRA6Z3UN,init_chunk_SSOR7XBL,init_chunk_SWGX3SS4,init_chunk_TEKYJVJJ,init_chunk_U7GN3J7X,init_chunk_UPJFNX3J,init_chunk_UPNTE63Z,init_chunk_VPZEFXR4,init_chunk_VTBRH4GX,init_chunk_VUBOXDJE,init_chunk_WG4K4XWQ,init_chunk_WHRLA65U,init_chunk_WQUFW7WE,init_chunk_X22WVVH2,init_chunk_XMJWUKT6,init_chunk_XVTRENJA,init_chunk_YBQOMA2F,init_chunk_YJRKFXN6,init_chunk_Z5B5U2O3,init_chunk_ZUBFAM6I,init_chunk_ZXGHULUR,j$10 as j$5,j$11 as j$2,j$3 as j$6,j$4 as j$7,j$5 as j,j$9 as j$16,k$12 as k$8,k$16 as k$25,k$6,l$2 as l$13,l$7 as l$14,m$10 as m$13,m$5 as m$12,n as n$13,n$2,o$1 as o$17,p$3 as p$9,p$4 as p$1,p$9 as p$10,q$10 as q$3,q$13 as q$8,q$14,q$15,q$6 as q$2,r$2 as r$13,rt as rt$4,s$5 as s$6,t$2 as t$17,te$3,te$8 as te$15,u$11 as u$37,u$4 as u$9,u$7 as u$11,v$13 as v$14,v$14 as v$8,v$6,v$7 as v$3,v$8 as v$5,w$16 as w$9,w$9 as w$7,x$10 as x$8,x$11 as x$7,x$13 as x$3,x$16 as x$9,y$13 as y$6,y$7 as y$4,z$6,z$7 as z$5}from"./common1.js";import{At$1 as At$6,Be as Be$4,C$4 as C$20,Ct$2,D$1 as D$5,Fe as Fe$2,G$1 as G$6,K$2 as K$5,Le$2 as Le$5,M$3 as M$8,Ne$3,Oe$1 as Oe$4,Pe$3 as Pe$1,Q$5 as Q$18,S$2 as S$20,Ut$1 as Ut,Ve$1 as Ve$3,Zt as Zt$3,ae$3 as ae$6,bt$1 as bt$4,ce$2 as ce$5,ee$2 as ee$5,et$2 as et$1,i$3 as i$20,init_chunk_2AG46AOQ,init_chunk_2P37CFB2,init_chunk_44FG3VOC,init_chunk_5EXEWERK,init_chunk_5OQ2WZRS,init_chunk_AK5BRWLB,init_chunk_G2PXXA5T,init_chunk_H3NGRIAC,init_chunk_HY2ETRRZ,init_chunk_I5Z534O3,init_chunk_KCW4KPLN,init_chunk_KSZF4ZCA,init_chunk_LPY2KINP,init_chunk_MUW5CQ54,init_chunk_NNUEHMLD,init_chunk_P7SIX23R,init_chunk_PHTLDMNZ,init_chunk_QL7KUB4R,init_chunk_RLK27ZUA,init_chunk_RX7XESY6,init_chunk_RZWMLPGX,init_chunk_Z6Z7IV6F,init_chunk_ZKF43KCS,j$3 as j$8,j$6 as j$9,je$1 as je,ke$2,oe$1 as oe$8,p$3 as p$20,r as r$24,re as re$3,re$2 as re$5,te$1 as te$6,te$3 as te$11,u$2 as u$28,wt as wt$3}from"./common2.js";import{$e$1 as $e$3,$i,As as As$3,Bt$1 as Bt$7,Ct$1 as Ct$4,Es as Es$3,Gi,Hi as Hi$2,Is as Is$1,It$1 as It$4,Li as Li$1,Lr as Lr$1,Ls as Ls$2,M as M$22,N as N$11,Os as Os$3,P as P$19,Q as Q$17,Qs$1 as Qs$4,Rr,Rs as Rs$1,Ss as Ss$1,Ve$1 as Ve$4,Vi$1 as Vi,Ws as Ws$1,Xo as Xo$2,Xr as Xr$2,Y$1 as Y$8,Z as Z$12,Zs as Zs$1,Zu,at$1 as at$12,bs,cs,dm,ds,dv,em,fs as fs$1,gs,gt$1 as gt$2,hs as hs$3,init_chunk_6AWFRWLM,init_chunk_YUQ2TNMQ,is,j as j$23,le$1 as le$5,ls as ls$2,oe as oe$13,oi as oi$1,os,ps as ps$2,q as q$20,qe$2 as qe$6,ss$1 as ss$2,ts as ts$2,tt$1 as tt$3,ue as ue$11,ve as ve$9,vs as vs$2,we$1 as we$4,ws as ws$2,x as x$27,xs$1 as xs$2,ys$1,z as z$18,zs as zs$3,zt as zt$2}from"./common3.js";import{$$8 as $$1,$$9 as $$6,A$19 as A$7,A$22 as A$8,A$32 as A$20,B$11 as B,B$14 as B$8,B$18 as B$12,B$20,B$9 as B$1,C$15 as C$7,C$17 as C$4,C$18 as C,C$19 as C$8,C$29 as C$15,D$15 as D$7,D$16 as D,E$23 as E$9,E$24 as E$2,F$11 as F$7,F$13 as F$4,F$17 as F,G$4 as G,I$18 as I$9,I$21 as I$2,I$24 as I$12,L$11 as L,M$16 as M$2,M$18 as M$3,M$24 as M$4,N$10 as N$6,N$13 as N,N$9 as N$7,O$14 as O$5,O$15 as O$2,O$16 as O$1,O$19 as O$12,O$23 as O$3,O$24 as O$9,P$11 as P$3,P$15 as P$9,P$16 as P$1,Q$5 as Q$4,Q$6 as Q$1,R$10 as R$13,R$4 as R$5,S$20 as S$9,S$21 as S$6,S$22 as S$4,S$36 as S$16,S$38 as S$19,S$40 as S$1,T$17 as T$6,T$24 as T$10,T$25 as T$15,T$26 as T$5,T$28 as T$22,U$8,U$9 as U$2,V$5 as V$3,Z$1 as Z$2,a$19 as a$15,a$27 as a,b$21 as b$5,b$22 as b$8,b$24 as b$1,b$25 as b$4,b$36 as b$12,b$39 as b$17,c$22 as c$7,c$25 as c$12,c$29 as c$1,c$38 as c$21,c$44 as c$29,d$21 as d$4,d$29 as d,d$41 as d$24,e$9 as e$6,f$21 as f$5,f$24 as f$4,f$36 as f$25,f$38 as f$19,g$17 as g$11,g$21 as g$5,g$22 as g$2,g$28 as g,g$31 as g$13,g$34 as g$14,h$21 as h$5,hr as hr$3,i$15 as i$10,i$19 as i$6,i$33 as i$26,i$34 as i$24,i$36 as i$1,init_chunk_27M7YZJX,init_chunk_2C4YCMLM,init_chunk_2C6CLRYT,init_chunk_2CLC5CJ5,init_chunk_2HAPJZUO,init_chunk_2TN2ZJTG,init_chunk_2ZKFK4FQ,init_chunk_35AE62MD,init_chunk_3YCVWEHI,init_chunk_3Z26LBNJ,init_chunk_43IG4HST,init_chunk_44KJRQGI,init_chunk_4BTAM75I,init_chunk_4C5TX24U,init_chunk_4ENKDM22,init_chunk_4H4TBDKS,init_chunk_4JSYWQHS,init_chunk_4JXL5NLU,init_chunk_4LL63MBX,init_chunk_4NXHYDB4,init_chunk_4XG3JNKM,init_chunk_4ZFO6GGY,init_chunk_54VMXGIT,init_chunk_56WV7NKT,init_chunk_572VH4PN,init_chunk_5JBSCDKG,init_chunk_5LCBLNMU,init_chunk_5QTBUJIR,init_chunk_5ZLO54JR,init_chunk_64MGOCJ7,init_chunk_6BK7BDKR,init_chunk_6HRTMVN3,init_chunk_6KXDX2WB,init_chunk_6OJH5HUH,init_chunk_72XMGHUU,init_chunk_73MIKFUP,init_chunk_7MHCG3V5,init_chunk_7O3UVUQI,init_chunk_7P2TUDQX,init_chunk_7QSRUV5A,init_chunk_7VBQI6QO,init_chunk_AASDVGPT,init_chunk_AMIRFDYS,init_chunk_ASUB5NX4,init_chunk_ASWS2XZO,init_chunk_ATW6KFNQ,init_chunk_BBHS4A4U,init_chunk_BSXI46ZJ,init_chunk_BTTKJ224,init_chunk_C5XDFTY3,init_chunk_CSZBT7I2,init_chunk_CT73AALH,init_chunk_CXZTQK5T,init_chunk_D3BWUJNO,init_chunk_DCQBWQPQ,init_chunk_DHDUNJVF,init_chunk_DHVHUA7X,init_chunk_DKECJVTO,init_chunk_DLQIMJEC,init_chunk_DPCK54JR,init_chunk_DSUSWBJU,init_chunk_E26JV7S6,init_chunk_EBP2RB3E,init_chunk_EF4MUJAL,init_chunk_EGYA3AK6,init_chunk_EQ73RKXI,init_chunk_EQJPMMDN,init_chunk_ES2UF5CP,init_chunk_EW22LB3X,init_chunk_F2E6JG5K,init_chunk_F5YPYGEI,init_chunk_F7Z3UE26,init_chunk_FB6BYVSD,init_chunk_FGURSX7C,init_chunk_FIDKMGV2,init_chunk_GC3IGJJP,init_chunk_GMC7YYHZ,init_chunk_GXPRUVKY,init_chunk_H7ZUHCCL,init_chunk_HEMUXET2,init_chunk_HMKKQD5U,init_chunk_HPT547N5,init_chunk_HPWO54VS,init_chunk_HRMQAK5M,init_chunk_HW5M5EJ3,init_chunk_IGGDPCOA,init_chunk_IGR6AOYR,init_chunk_IMSGYTIS,init_chunk_IN7E6US2,init_chunk_IWDKHN53,init_chunk_JIB5HD2R,init_chunk_JOR7Y6ZH,init_chunk_JRKCOKQ4,init_chunk_JT4XTBDH,init_chunk_JUXW6X56,init_chunk_JW5CDN72,init_chunk_K3WIYCV6,init_chunk_KDV2XVKH,init_chunk_KDVMWK7Z,init_chunk_KGLVHAPC,init_chunk_KLDBPTAV,init_chunk_KOCP3ID3,init_chunk_KOH2LN7P,init_chunk_KQ5MJH4P,init_chunk_KVPIOCNH,init_chunk_KZR3RKTP,init_chunk_L2B2Z47Y,init_chunk_LFMXPICJ,init_chunk_LQKPCXK7,init_chunk_LWB7QD34,init_chunk_LXYSDGOZ,init_chunk_M3CXGYSO,init_chunk_M4ZNANRB,init_chunk_MDK4IUVT,init_chunk_MELMYAJL,init_chunk_MJCSWIBV,init_chunk_MLQED6TU,init_chunk_NJDYDYYO,init_chunk_NNJWVAO4,init_chunk_NX6HMH2N,init_chunk_PNYP5U3X,init_chunk_Q5WGP7EG,init_chunk_QAQTCRJA,init_chunk_QBWGEOKR,init_chunk_QCVS34YT,init_chunk_QF4MVXKL,init_chunk_QHU2GVXI,init_chunk_QJA5THH5,init_chunk_QNCMYMLJ,init_chunk_QRDDGA4K,init_chunk_RJ5WD4C3,init_chunk_RKBMNU42,init_chunk_RKR6FMF6,init_chunk_RS5TSI22,init_chunk_RVGFP37O,init_chunk_RWCLB5ZJ,init_chunk_S4K3RMR5,init_chunk_S5O7EDQH,init_chunk_SCJRO5IS,init_chunk_SCVSPAPO,init_chunk_SJEB5A53,init_chunk_SPWALZFX,init_chunk_SRAH72RX,init_chunk_SSKZ4UWS,init_chunk_SVLPAL5V,init_chunk_SWG7XZRC,init_chunk_TK56FUVY,init_chunk_TQQJXNHJ,init_chunk_TU4ODZ2G,init_chunk_TYTJ5WNQ,init_chunk_U4ALET4H,init_chunk_U4QG7EDX,init_chunk_U6ASKBBR,init_chunk_U7Z6NJY4,init_chunk_UDODREM6,init_chunk_UHNK5WAH,init_chunk_UJ7MCFG4,init_chunk_UTNRXYWW,init_chunk_VCPB72ZH,init_chunk_VXB24VUM,init_chunk_VXRNYANT,init_chunk_W466RFSE,init_chunk_WCABV24O,init_chunk_WJQRPWQK,init_chunk_X7R2YLJ6,init_chunk_XGBHKKWI,init_chunk_XUMIRDBZ,init_chunk_YIAG7DPN,init_chunk_YJB4SS5Y,init_chunk_YTNSLBJG,init_chunk_YTYJFA7T,init_chunk_Z5PI4OFY,init_chunk_Z722GYNE,init_chunk_ZJTSMHSQ,init_chunk_ZPRH744P,init_chunk_ZQE7BA7H,init_chunk_ZTEST4BC,init_chunk_ZZLLTIDJ,j$14 as j$10,j$17 as j$4,k$14 as k$7,k$15 as k$9,k$21 as k$12,k$22 as k$5,l$17,l$19 as l$10,l$20 as l$2,l$32 as l$11,l$34 as l$19,m$23 as m$10,m$24 as m$5,m$31 as m$11,n$17 as n$18,n$20 as n$10,n$28 as n,n$45 as n$5,o$11 as o$18,p$30 as p$4,p$33 as p$3,p$47 as p$28,s$15 as s$7,s$22 as s$17,s$27 as s$24,u$20 as u$22,u$21 as u$20,u$23 as u$6,u$24 as u$3,u$26 as u$10,u$27 as u$12,u$30 as u,u$38 as u$36,v$20 as v$7,v$21 as v$4,v$22 as v$2,v$24 as v$9,v$25 as v$1,w$12 as w$5,w$14 as w$1,w$18 as w,x$18 as x$10,x$22 as x$4,x$26 as x$1,x$36 as x$25,y$18 as y$5,y$20 as y$1,z$7 as z$3,z$8 as z,z$9 as z$15}from"./common4.js";import{$T,$p,AT,BA,BC,BD,BE,BT,Bp,C as C$23,CD,Cr as Cr$3,DD,De$1 as De$3,Eg,FC,Fg,Fm,GD,Gg,HD,HT,He as He$4,IN,JC,JT,Jc as Jc$1,Jl,KC,Kc as Kc$3,Lg,MD,ME,Mi as Mi$1,NE,NT,OA,Og,Om as Om$1,PA,Pg,QA,QC,SE,ST,Si as Si$1,T as T$23,Tm,UC,V as V$16,VC,VN,VT,XC,XT,Xp,YC,YD,YT,Yc as Yc$1,ZC,_$1 as _$14,_E,aN,al as al$1,at as at$11,br,ce as ce$8,cu as cu$2,dg,fN,fg as fg$1,fh,fy,gT,ge as ge$10,hD,hf,hg,init_chunk_OH6JC3QU,jA as jA$1,jC,jI,jp,k as k$27,kA as kA$1,kE,km,ko as ko$2,lu as lu$1,mr as mr$3,oe as oe$12,og,oh,ol,oo as oo$2,pN,pg,qC,qD,qT,qg,ql,rN,re as re$9,tl,tv,ty as ty$1,vv,xE as xE$1,xf,yg,zC,zn as zn$1}from"./common5.js";import{$$3 as $$2,A$14 as A$3,A$17 as A$5,A$19 as A$10,A$20 as A,A$24 as A$18,B$14 as B$9,B$15 as B$11,B$17 as B$14,B$9 as B$6,C$15 as C$10,C$17 as C$1,C$24 as C$22,D$20 as D$11,D$23 as D$12,E$11 as E$8,E$12 as E$3,F$16 as F$19,F$18 as F$22,F$8 as F$10,F$9 as F$5,G$2 as G$7,I$10 as I$8,I$11 as I$3,I$12 as I$1,I$16 as I$11,J$10 as J$3,J$7 as J$8,J$8 as J$2,K$3 as K,K$4 as K$13,K$5 as K$10,L$14 as L$7,L$18 as L$12,L$8 as L$6,L$9 as L$1,M$10 as M$7,M$11 as M$1,M$12 as M,N$12 as N$17,O$10 as O,O$9 as O$8,P$5 as P$7,P$6,P$7 as P,R$10 as R$12,R$16 as R$15,R$7 as R$9,R$8 as R$1,S$13 as S$7,T$11 as T$3,T$12 as T$2,T$13 as T,T$17,U$6 as U$1,U$9 as U$10,V$6 as V$1,W$4 as W$1,a$4 as a$14,ae,b$6 as b$9,c$14 as c$30,c$5 as c$17,c$7 as c$6,c$8 as c,d$10 as d$9,d$11 as d$10,d$18 as d$23,ee,et as et$2,f$10 as f$12,f$13 as f$15,f$15 as f$20,f$17 as f$28,f$18 as f$31,g$10 as g$9,h$20 as h$14,i$8 as i$13,init_chunk_26RD64NZ,init_chunk_2K6E7TVW,init_chunk_2NIE7DGK,init_chunk_2TKDU5UL,init_chunk_3G5RWRU6,init_chunk_3N4CASC2,init_chunk_3VWFKKTE,init_chunk_45EG57BE,init_chunk_4OV7BD46,init_chunk_4R3TRM5Y,init_chunk_4VQ6F3DE,init_chunk_52ANXW4F,init_chunk_5CMJOLUY,init_chunk_6GDA4ORM,init_chunk_6P4NHFOM,init_chunk_6T6OIPK7,init_chunk_73OPKABQ,init_chunk_7IBVYJVT,init_chunk_7TWM5WXY,init_chunk_7WWZ2JH6,init_chunk_AGX7UXIL,init_chunk_AMEBXQ2T,init_chunk_AWNVOENH,init_chunk_BJMXJFNV,init_chunk_BTOIODAJ,init_chunk_BXPMI6PL,init_chunk_C2P6DO2P,init_chunk_CAPZNU4C,init_chunk_CYPGBSHM,init_chunk_D2JVZWJY,init_chunk_D6OBTJER,init_chunk_D7DSERB6,init_chunk_DMRPX4KX,init_chunk_DOACKACE,init_chunk_DX4MIMBT,init_chunk_E473VFU3,init_chunk_EAULFZLW,init_chunk_EBLBISL2,init_chunk_EN2KTIPR,init_chunk_FFU4FLUP,init_chunk_FL43D7GE,init_chunk_G5VBTBVT,init_chunk_GYOBVN7B,init_chunk_HP5YAQSD,init_chunk_I7VA2QZN,init_chunk_IKGXPYBA,init_chunk_IPDBOLGC,init_chunk_J6J2E2TN,init_chunk_JD52CDRU,init_chunk_JFRIW46L,init_chunk_JUNZZTDR,init_chunk_K7FPMRRN,init_chunk_KFG2KCFW,init_chunk_KPEAXVVQ,init_chunk_KU6HOPT6,init_chunk_LD35L75T,init_chunk_LO75U72T,init_chunk_LWNLWGPJ,init_chunk_M3MT5UJO,init_chunk_M44OX2TM,init_chunk_MDPC6ARV,init_chunk_MORO5J4V,init_chunk_MVCVHWPZ,init_chunk_NYMJ6D3A,init_chunk_ORWI6C7C,init_chunk_P4PD6ZSF,init_chunk_PPYHVRM2,init_chunk_PTYNVLL2,init_chunk_QCUHP6TR,init_chunk_QKXTMWNS,init_chunk_QOUWN2S7,init_chunk_QPQEKQQK,init_chunk_QWTBZGNP,init_chunk_QXJPGP67,init_chunk_R36OVBVY,init_chunk_RCPKOZPS,init_chunk_RHIM4YAO,init_chunk_RSOGWXUC,init_chunk_RTN5Y2MY,init_chunk_RUOOHTGC,init_chunk_RX2IT33R,init_chunk_S26Z2U2T,init_chunk_SHPSEPM3,init_chunk_TACGRXKU,init_chunk_TEZK55QE,init_chunk_TXLMLGS4,init_chunk_UADGEKVG,init_chunk_UUS7GQXT,init_chunk_V27VDWY3,init_chunk_VX3SAUZW,init_chunk_VXXMYUTV,init_chunk_W6CJLQ7F,init_chunk_W7IDWRP4,init_chunk_WRKOQF42,init_chunk_WZBFNSHE,init_chunk_XIHVMJLG,init_chunk_XIJAFODG,init_chunk_XOHDTI5N,init_chunk_Y2SCIU6M,init_chunk_YABWRMNR,init_chunk_YBZTUL35,init_chunk_YIJBKTP5,init_chunk_YKEZJMKQ,init_chunk_YOBJAFMK,init_chunk_YV4KWNVW,init_chunk_YZWLYZGX,init_chunk_Z5A2GO7L,init_chunk_ZB5K4Q5D,init_chunk_ZCMXS5HG,init_chunk_ZGDPKF5N,init_chunk_ZI257CVE,init_chunk_ZZY2CRH6,j$10 as j$19,j$5 as j$13,k$14 as k$3,k$15 as k$2,k$20 as k$15,l$5 as l$16,l$6 as l$7,m$16 as m$31,m$7 as m$16,m$8 as m$1,mt as mt$1,n$14 as n$44,n$15 as n$45,n$6 as n$19,n$9 as n$23,o$10 as o$29,o$3,o$4 as o$24,p$13 as p$15,p$14 as p$11,p$15 as p,p$20 as p$27,q$11 as q$1,r$10 as r$7,r$7 as r$17,r$9 as r$21,rt,s$3 as s$13,s$5 as s$16,t$4 as t$8,u$15 as u$32,u$4 as u$21,u$5 as u$18,v$11 as v$10,w$15 as w$6,w$19 as w$13,w$24 as w$22,w$27 as w$23,x$11,x$13 as x$6,x$15 as x$2,x$18 as x$5,x$21 as x$19,x$23 as x,y$15 as y$11,y$9 as y$8,z$6 as z$4}from"./common6.js";import{$a,Ee as Ee$2,Ir,Jt$2 as Jt$3,Le as Le$9,Qt$4 as Qt$3,Ti as Ti$2,Ue$1 as Ue$6,Us,Yt$1 as Yt$3,a$1 as a$26,dt,init_chunk_3X5WC7DA,init_chunk_4CSPZNUT,init_chunk_4LLUVYMU,init_chunk_742OTHVN,init_chunk_FPJAYOZY,init_chunk_IURAS4BN,init_chunk_LD3OPMMH,init_chunk_NX67GN3J,init_chunk_T3UHELTX,init_chunk_XO6PDRBV,it$1,j as j$22,me as me$3,mt as mt$4,nn,on,ot as ot$5,pt,q$1 as q$19,qe$1 as qe$5,rn,sn$1 as sn}from"./common7.js";import{A$16 as A$19,B$3 as B$7,B$5 as B$18,B$8 as B$19,C$18 as C$16,C$20 as C$21,E$20 as E$1,E$21 as E,E$33 as E$15,F$2 as F$3,F$3 as F$2,F$4 as F$6,F$5 as F$1,F$7 as F$21,I$11 as I$10,I$15 as I$14,I$17 as I$22,I$18 as I$21,L$9 as L$11,M$12,M$9 as M$14,N$5 as N$16,P$10 as P$16,P$4 as P$2,P$9 as P$17,R$6 as R$3,R$7 as R$2,S$11 as S$2,S$15 as S,S$9 as S$11,T$17 as T$9,T$18 as T$7,T$20 as T$14,T$21 as T$1,T$24 as T$11,U,W as W$2,_$14 as _,_$17 as _$5,_$19 as _$13,a$106 as a$18,a$110 as a$6,a$111 as a$5,a$112 as a$9,a$122 as a$27,a$127 as a$20,a$133 as a$24,a$137 as a$25,a$64 as a$10,a$73 as a$3,a$78 as a$4,a$80 as a$8,a$91 as a$2,a$92 as a$1,a$95 as a$13,a$96 as a$12,a$98 as a$11,b$15 as b,b$27 as b$10,b$28 as b$15,c$106 as c$23,c$109 as c$22,c$110 as c$28,c$124 as c$35,c$125 as c$33,c$127 as c$34,c$128 as c$31,c$58 as c$16,c$60 as c$18,c$64 as c$10,c$65 as c$9,c$66 as c$8,c$67 as c$4,c$70 as c$11,c$71 as c$3,c$72 as c$2,c$73 as c$5,c$79 as c$24,c$94 as c$25,c$96 as c$15,d$45 as d$8,d$47 as d$5,d$50 as d$3,d$51 as d$2,d$52 as d$1,d$56 as d$12,d$69 as d$13,d$83 as d$22,d$84 as d$19,e$49 as e$9,e$51 as e$4,e$52 as e$3,e$53 as e$1,e$55 as e,e$56 as e$16,e$64 as e$2,e$70 as e$11,e$78 as e$5,e$79 as e$7,e$80 as e$8,e$83 as e$10,e$85 as e$12,e$90 as e$13,e$91 as e$15,e$96 as e$18,f$38 as f$9,f$40 as f$8,f$41 as f$7,f$45 as f$3,f$52 as f$1,f$53 as f,f$54 as f$13,f$56 as f$16,f$62 as f$23,f$63 as f$24,f$71 as f$32,g$20 as g$6,g$23 as g$4,g$24 as g$1,h$30 as h$4,i$42 as i$11,i$43 as i$15,i$46 as i$4,i$47 as i$2,i$48 as i$5,i$53 as i,i$71 as i$12,i$82 as i$19,i$91 as i$22,i$94 as i$23,i$97 as i$25,init_chunk_22QDIKPS,init_chunk_22XYGCJN,init_chunk_26GUEDXE,init_chunk_26MEO5R6,init_chunk_27JHJO32,init_chunk_2E3NZTWD,init_chunk_2ESQX6AE,init_chunk_2FTVEPC5,init_chunk_2IEPNTHG,init_chunk_2K475J7X,init_chunk_2LD7UGWB,init_chunk_2P5J76AD,init_chunk_2RASJTR6,init_chunk_2ROZ5VHY,init_chunk_2S7DVFMT,init_chunk_2U4N4VVC,init_chunk_2USFPV22,init_chunk_2WMBWE4A,init_chunk_2WSZTAJQ,init_chunk_2XUJX3BL,init_chunk_2Y4IZSXB,init_chunk_342USNU7,init_chunk_345DKYPN,init_chunk_35BZ5QQX,init_chunk_35HVG5RK,init_chunk_3AKOTGJ2,init_chunk_3CCW6RTS,init_chunk_3DXE6P6X,init_chunk_3E6LZKN4,init_chunk_3F6YY7WC,init_chunk_3FY6AAVN,init_chunk_3GMVUIQ2,init_chunk_3IZTKVT2,init_chunk_3KHJAJTF,init_chunk_3NZ5SE2N,init_chunk_3TAAWHMD,init_chunk_3TDMQHLT,init_chunk_3TE4AL4Y,init_chunk_3VEK4ZTJ,init_chunk_3X4X5GQ5,init_chunk_42JFQOYK,init_chunk_456354UE,init_chunk_4AEO2AVH,init_chunk_4AMMAJJX,init_chunk_4BEIH33K,init_chunk_4DHZ57JL,init_chunk_4GE36HWE,init_chunk_4ICHMYUQ,init_chunk_4MLO4QQQ,init_chunk_4MND4D7W,init_chunk_4QOXXXKD,init_chunk_4SJ56CQ7,init_chunk_4VVPFSRR,init_chunk_4YGCBWOQ,init_chunk_55GR3CTX,init_chunk_55MVDEZA,init_chunk_5AGY6SKG,init_chunk_5AHTPI6D,init_chunk_5BUC7JXJ,init_chunk_5ED4SEKT,init_chunk_5EF5WLTR,init_chunk_5GHC3Y64,init_chunk_5H2KVSX3,init_chunk_5I4YJSMV,init_chunk_5JWDKE2T,init_chunk_5KEQTMKL,init_chunk_5KHKSHXW,init_chunk_5NVHWBLQ,init_chunk_5Q7QGDPZ,init_chunk_5R5WUML7,init_chunk_5TRTU6WF,init_chunk_5V6YOMUA,init_chunk_5WXCG2CY,init_chunk_5WYMXTWS,init_chunk_5XIGGBWG,init_chunk_6236DX3W,init_chunk_63QZK6YD,init_chunk_66PQEJKB,init_chunk_66VCHJTZ,init_chunk_6A6XPM6O,init_chunk_6AGUKP3B,init_chunk_6BIDSCBO,init_chunk_6D2KJVDG,init_chunk_6DDHAS6F,init_chunk_6DJCWTRJ,init_chunk_6DXI4IJQ,init_chunk_6FKZDWPJ,init_chunk_6FVUPDR4,init_chunk_6G7QKLTK,init_chunk_6K4CVQDU,init_chunk_6MW54TTX,init_chunk_6P6QCLEN,init_chunk_6QDIKEXJ,init_chunk_6RCKJAXW,init_chunk_6RDJS63F,init_chunk_6TA3YMMH,init_chunk_6X56RLUX,init_chunk_6XG47YUH,init_chunk_6ZNU2KGL,init_chunk_72FTP3TU,init_chunk_72UR3VX3,init_chunk_77NFKQGT,init_chunk_7AESSIHX,init_chunk_7BG4ID5K,init_chunk_7DEFT7TH,init_chunk_7E4RPC7F,init_chunk_7EO6JZE6,init_chunk_7FD32THW,init_chunk_7GIIM5WD,init_chunk_7J6VZIK2,init_chunk_7KOZZ3JQ,init_chunk_7MCXST47,init_chunk_7NNZE7VE,init_chunk_7Q4QUTW7,init_chunk_7T5M7MDD,init_chunk_7TJKIKA5,init_chunk_7V7XJXYS,init_chunk_7VOFJWIM,init_chunk_7WMFVCDK,init_chunk_A4KYEZO7,init_chunk_A54FS33J,init_chunk_A5AMLAMN,init_chunk_A6C3CJAL,init_chunk_ABUIJZSL,init_chunk_ACEXO4F3,init_chunk_ACXH67VK,init_chunk_ACZAVYPP,init_chunk_AFGEJHUZ,init_chunk_AFGIXINT,init_chunk_AFIBYHNJ,init_chunk_AI5AGN47,init_chunk_AIYIXAL4,init_chunk_AJAXZWGB,init_chunk_ALG674GG,init_chunk_AM5CGUAE,init_chunk_AOI7CZHM,init_chunk_ASZYWPHV,init_chunk_ATKILZ4A,init_chunk_AUJKHP2P,init_chunk_AYIQKKQN,init_chunk_AZ5L2OLW,init_chunk_AZ7ZFAMP,init_chunk_B53ODZCO,init_chunk_BCXEX6HU,init_chunk_BGBSY46S,init_chunk_BHWOIQPB,init_chunk_BJMJWJKZ,init_chunk_BN4FR4XP,init_chunk_BQHGLOSZ,init_chunk_BSQLKKPT,init_chunk_BWEL2QFB,init_chunk_BXATQYZZ,init_chunk_BXLTK4KK,init_chunk_BYW7M3JI,init_chunk_BZZIVHCZ,init_chunk_C6GKTI2J,init_chunk_C6J7FWG3,init_chunk_C7DJ7ZUT,init_chunk_C7GHIZK6,init_chunk_CAL44HKN,init_chunk_CAMMEM3L,init_chunk_CD6BXJH4,init_chunk_CGPDZMQG,init_chunk_CHFNWNLP,init_chunk_CJWI5PNY,init_chunk_CMQEOMN7,init_chunk_CPAEXGVU,init_chunk_CSIUVN6E,init_chunk_CTKLVH4W,init_chunk_CTLM6VFG,init_chunk_CTOSVATH,init_chunk_CXWOR2EE,init_chunk_CZTJCIFC,init_chunk_D3A3OTDV,init_chunk_D4ZJFUAH,init_chunk_D66QWYXA,init_chunk_D6KNJFOX,init_chunk_DBYKMXYD,init_chunk_DBYL4S7L,init_chunk_DD2MWGWV,init_chunk_DE6BJ7J2,init_chunk_DEWLIIGL,init_chunk_DFC65VMV,init_chunk_DGOQTFVW,init_chunk_DI4RYWI2,init_chunk_DJ4UL6HB,init_chunk_DJQUJSL3,init_chunk_DNVUH6UR,init_chunk_DODLY3LU,init_chunk_DSJPKFWL,init_chunk_DTKK4UIQ,init_chunk_DTRCSCDI,init_chunk_DXFJXJOV,init_chunk_E3CLHXVA,init_chunk_E44CUPSK,init_chunk_E5WQXQQX,init_chunk_E6IIPJB4,init_chunk_E7A3ZNIO,init_chunk_EB36OZU4,init_chunk_EDZFKDYT,init_chunk_EJESKHIT,init_chunk_ELVEJ42V,init_chunk_EN7RMMI7,init_chunk_EO5IH4ME,init_chunk_EPJXWKMM,init_chunk_EQ6NXTKP,init_chunk_EQUVXRCG,init_chunk_ESMMMQ24,init_chunk_ESMNUDT2,init_chunk_ETF7SHKB,init_chunk_ETMBEXOE,init_chunk_EWYVQPZK,init_chunk_F2SHUGTJ,init_chunk_F5SMZ5RF,init_chunk_F6V3PHRP,init_chunk_FAG4C2AG,init_chunk_FBTZXYBQ,init_chunk_FERWDOAD,init_chunk_FHET5ADS,init_chunk_FJ7PXLWN,init_chunk_FMLSMREI,init_chunk_FNB2N3LB,init_chunk_FSEXL3Q6,init_chunk_FV3RL75Y,init_chunk_FXQRI5UB,init_chunk_FZFHHBQU,init_chunk_FZNKH3NT,init_chunk_G2SDJOQJ,init_chunk_G4HWGCLT,init_chunk_G6MWNWZJ,init_chunk_G73G74MJ,init_chunk_G7XLULYR,init_chunk_GAXJVXAV,init_chunk_GEHHVVPS,init_chunk_GF5YRE5Q,init_chunk_GHX25U4X,init_chunk_GIGOKR72,init_chunk_GNWFLEEI,init_chunk_GOAYARXA,init_chunk_GQAWAFX5,init_chunk_GRSXVX26,init_chunk_GTDNXJ33,init_chunk_GV7WX3OU,init_chunk_GZRQ5U25,init_chunk_H2H6TQXI,init_chunk_H2STOOWE,init_chunk_H3BL6WZC,init_chunk_H3UOGGIP,init_chunk_H55464Z7,init_chunk_H5QQURM3,init_chunk_H6HICY6C,init_chunk_HC6TEKGO,init_chunk_HEUWOYII,init_chunk_HGEYXQNH,init_chunk_HGTWKD72,init_chunk_HGW6XRJ2,init_chunk_HJI4UQAM,init_chunk_HM3UQH5M,init_chunk_HQJ73OOY,init_chunk_HS5S4AQQ,init_chunk_HS72KILA,init_chunk_HS7J5TEM,init_chunk_HSDHS2RS,init_chunk_HSQTB5Q7,init_chunk_HUNTI6OO,init_chunk_HXVIZTL7,init_chunk_I26OEY4X,init_chunk_I4YQPKLK,init_chunk_I6UTE6SD,init_chunk_I6WPMW6I,init_chunk_IA6QB7CK,init_chunk_IAWFQDRP,init_chunk_IB3WND4P,init_chunk_IEHBFF3M,init_chunk_IEL3ONU5,init_chunk_IEQ6TOOI,init_chunk_IN6OFQMK,init_chunk_IO2G2NRM,init_chunk_IPOBEEX3,init_chunk_IQFQU3ON,init_chunk_IUPIZIGZ,init_chunk_IZXOYL35,init_chunk_J3Y5EZRN,init_chunk_J44EDCGI,init_chunk_J6DRQW23,init_chunk_J6WGJTYG,init_chunk_JC5M7IO6,init_chunk_JCLRQCCF,init_chunk_JFFTUK2Q,init_chunk_JJQIONPF,init_chunk_JKT425JB,init_chunk_JMMN4FPE,init_chunk_JOSFSE7S,init_chunk_JVYDMBKJ,init_chunk_JY7S4RLR,init_chunk_JYVTRWC5,init_chunk_JYZXFLEK,init_chunk_K3DRVV6Q,init_chunk_K4UH3HHY,init_chunk_K7UBOSE2,init_chunk_KIP5JWYU,init_chunk_KK6MGEZ2,init_chunk_KKM5D4ZH,init_chunk_KQ2U6JR7,init_chunk_KQOPH5JT,init_chunk_KQSSGK34,init_chunk_KRBWRIUA,init_chunk_KSL72JRC,init_chunk_KUSPLU3M,init_chunk_KVKVSE54,init_chunk_KZXKTX5O,init_chunk_L4FVJ2SR,init_chunk_L6637PEL,init_chunk_L6HTPEJ7,init_chunk_L73HJHEU,init_chunk_LCD22NZJ,init_chunk_LDAWA2NV,init_chunk_LE5DQF6M,init_chunk_LHHQLCF4,init_chunk_LKFCOP6T,init_chunk_LLK4QMNB,init_chunk_LMNOWYQY,init_chunk_LMZSZYRO,init_chunk_LNBP5WET,init_chunk_LRF6746Z,init_chunk_LUKGKVGG,init_chunk_LVU5I4QB,init_chunk_LWA5UHGM,init_chunk_M52OSWPN,init_chunk_M5OKQKTH,init_chunk_M6GZZG7K,init_chunk_M6QPC5NP,init_chunk_MATUXFHD,init_chunk_MCHJVVFT,init_chunk_METFJNNW,init_chunk_MFVTSQTM,init_chunk_MIY64KNP,init_chunk_MMUVDGGH,init_chunk_MNPSNBDG,init_chunk_MPLGVJS7,init_chunk_MQ65FATA,init_chunk_MQDUJX7I,init_chunk_MQVTR3AF,init_chunk_MRPXEF6A,init_chunk_MSAX4I6O,init_chunk_MULHNYHP,init_chunk_MV44IULF,init_chunk_MV4HWFKV,init_chunk_MZBRJFVU,init_chunk_MZC5FI2L,init_chunk_N4KKIHU6,init_chunk_N4Q66NYB,init_chunk_N4XVPDF4,init_chunk_NAIZ4J7T,init_chunk_NGP5VHNR,init_chunk_NM2PAV4N,init_chunk_NO3QDQH6,init_chunk_NPGLSXOA,init_chunk_NQ4PBGGL,init_chunk_NRJBIJHU,init_chunk_NU6EKGRJ,init_chunk_NYCJ5W6U,init_chunk_NZ4YBVLV,init_chunk_NZAQMP66,init_chunk_O2VTHQMX,init_chunk_O37UCX57,init_chunk_O3DMQPBG,init_chunk_O4RIJVHB,init_chunk_O6UHEPTI,init_chunk_OAOU4QMU,init_chunk_ODOCJQ5F,init_chunk_OEGD73JW,init_chunk_OFKHWFYY,init_chunk_OI5PRX4Z,init_chunk_OKPXB6ZM,init_chunk_OSRUURNL,init_chunk_OWTGK7HE,init_chunk_OYS3PCQN,init_chunk_OZLMANDP,init_chunk_OZS2GHCT,init_chunk_P3KELYZA,init_chunk_P3N2IDFO,init_chunk_P45O4LBO,init_chunk_P5CFJQBZ,init_chunk_P5IXZRLD,init_chunk_P7AX6236,init_chunk_PBGU6R25,init_chunk_PDAIY3K3,init_chunk_PFFMD7C5,init_chunk_PFJ2HH6M,init_chunk_PJQ53WM4,init_chunk_PLGGSX5K,init_chunk_PMLRCZHH,init_chunk_PNQZSBOM,init_chunk_PRFVW5HN,init_chunk_PRGTPZ2H,init_chunk_PRNSVG25,init_chunk_PVNBLCOE,init_chunk_PVQSDRCN,init_chunk_PXYW74BB,init_chunk_PZXNU3KR,init_chunk_QBPQ6NNC,init_chunk_QCKT4DQC,init_chunk_QG2YM64Y,init_chunk_QGQCGXEY,init_chunk_QHV373YC,init_chunk_QKCKEXSK,init_chunk_QKQ26YO6,init_chunk_QR442M54,init_chunk_QS2VZ7BS,init_chunk_QSKEJN5H,init_chunk_QSWHKWIX,init_chunk_QT263FLP,init_chunk_QU4KW4CC,init_chunk_R2JBAC76,init_chunk_R3N2DXOF,init_chunk_R45NF4AY,init_chunk_R4N5F5HV,init_chunk_R5IH4AR7,init_chunk_RB5S7242,init_chunk_RDC6TFEZ,init_chunk_RFR7IPQQ,init_chunk_RGHGYV3D,init_chunk_RJRPIYRD,init_chunk_RKFES4AY,init_chunk_RLVXVCUW,init_chunk_RNIYY5IM,init_chunk_RQNOCW4L,init_chunk_RRLZKMRN,init_chunk_RRVLQ6GA,init_chunk_RTKQZAN3,init_chunk_RV7KNZZR,init_chunk_RYYJBUFD,init_chunk_S67WJARE,init_chunk_S67WQKNL,init_chunk_S7BHBHYQ,init_chunk_SBQWP5L3,init_chunk_SC6D6ZCZ,init_chunk_SEROBDOA,init_chunk_SETWYOJC,init_chunk_SFZSW7BO,init_chunk_SGCNCY66,init_chunk_SHV4BRVZ,init_chunk_SLTGWFCA,init_chunk_SMIVPXBH,init_chunk_SO33TMJW,init_chunk_SPFGCKQS,init_chunk_SPHGP6P4,init_chunk_SPPMZYJT,init_chunk_SQ2XYNLG,init_chunk_SSMOPCOP,init_chunk_SSXFAZWT,init_chunk_SVJM4RHI,init_chunk_SYOGBZEE,init_chunk_SYWBQ7P5,init_chunk_SZWCUL54,init_chunk_T3DOBT4P,init_chunk_T3LVENLZ,init_chunk_T4MAJ763,init_chunk_T5CIKHHO,init_chunk_T5LSRYBM,init_chunk_T5WOJ4W5,init_chunk_T7ZJ7F2H,init_chunk_TFSG7C6A,init_chunk_TGLORDHS,init_chunk_TLJPAJSO,init_chunk_TOQJGOHA,init_chunk_TOUX6JHL,init_chunk_TQTS4Z34,init_chunk_TURIJ7YG,init_chunk_TXEYYEAF,init_chunk_TXMEYB3F,init_chunk_TZE6RLQ3,init_chunk_U2O2OAWW,init_chunk_U3IIHVIU,init_chunk_U6QISNPJ,init_chunk_UAT3L6QW,init_chunk_UETE77GO,init_chunk_UHMR4FDK,init_chunk_UHYJ6OAV,init_chunk_UJGQOQQY,init_chunk_UJPRVUKC,init_chunk_UJRW4QF2,init_chunk_UMCD4X4F,init_chunk_UNMOHDD3,init_chunk_UPFUC3UY,init_chunk_USMMG65A,init_chunk_UST55PDK,init_chunk_UUVBFWL3,init_chunk_UYJG34ME,init_chunk_UYM3JTV2,init_chunk_UZI7NJJY,init_chunk_V3JZVKDG,init_chunk_VE7QISLR,init_chunk_VEEC4VYQ,init_chunk_VELFUUM4,init_chunk_VIU25DTV,init_chunk_VJAC2YML,init_chunk_VKJIRQ5A,init_chunk_VL3EL6VX,init_chunk_VL7FPG4Z,init_chunk_VPGECYYB,init_chunk_VPMJGXHQ,init_chunk_VQJUJ76U,init_chunk_VRZFRU5E,init_chunk_VSA5FMMB,init_chunk_VT56I6IL,init_chunk_VVKCKFPH,init_chunk_VXSQ4ABE,init_chunk_VYOW3UM4,init_chunk_VYTDD4ZH,init_chunk_VYW5RLTF,init_chunk_W5QUWOEQ,init_chunk_W7HHZI3V,init_chunk_W7ZYLIIG,init_chunk_WAKBWYJT,init_chunk_WASC46AA,init_chunk_WDWYRRED,init_chunk_WEOSME6L,init_chunk_WF5G4JVF,init_chunk_WGKYYUPG,init_chunk_WHKTZCWS,init_chunk_WIOTMDCU,init_chunk_WL2C3REA,init_chunk_WMQZBRDI,init_chunk_WNZZNBN6,init_chunk_WO2ILKNB,init_chunk_WT2BZZOB,init_chunk_WTQN77GO,init_chunk_WU2PKKVO,init_chunk_WUCNMC7P,init_chunk_WWZ3HPDJ,init_chunk_XAIUELKS,init_chunk_XD337MM7,init_chunk_XGFXH4XH,init_chunk_XGSJYVNR,init_chunk_XHONBACF,init_chunk_XI6H22W5,init_chunk_XLJGABNH,init_chunk_XN3GVKL7,init_chunk_XOK2L335,init_chunk_XP2PB7NZ,init_chunk_XRKUB7CW,init_chunk_XSDXOKLO,init_chunk_XV3SZ5QM,init_chunk_XWMCW3VL,init_chunk_XYJ6AOE7,init_chunk_Y2QPCMHA,init_chunk_YA3B72AI,init_chunk_YBOBJARS,init_chunk_YH47UO4D,init_chunk_YL7LY26G,init_chunk_YLTNJU23,init_chunk_YMFQCSPS,init_chunk_YMQZBYUA,init_chunk_YPHK4I4N,init_chunk_YWWWFLXT,init_chunk_YXRMFJYV,init_chunk_YYSAES3W,init_chunk_YZJXCLNT,init_chunk_Z7KY7THX,init_chunk_ZAKAVV55,init_chunk_ZBOAJ5JJ,init_chunk_ZDI2POF3,init_chunk_ZE6R7ILQ,init_chunk_ZN2DLBU6,init_chunk_ZPMLSRTD,init_chunk_ZPQTGOYD,init_chunk_ZVLVJY5R,init_chunk_ZYK23T47,init_chunk_ZYXF27NJ,j$7 as j$1,k$6 as k$4,k$7 as k,k$8 as k$11,k$9 as k$21,l$43 as l$9,l$45 as l$6,l$46 as l$5,l$47 as l$4,l$48 as l$3,l$53 as l$1,l$54 as l,l$58 as l$12,l$65 as l$15,l$79 as l$22,l$88 as l$25,m$32 as m$15,m$36 as m$9,m$37 as m$8,m$38 as m$7,m$39 as m$6,m$40 as m$4,m$41 as m$3,m$44 as m$2,m$48 as m,m$55 as m$14,m$62 as m$23,m$64 as m$21,m$72 as m$30,n$100 as n$21,n$102 as n$24,n$105 as n$25,n$113 as n$33,n$119 as n$9,n$120 as n$16,n$135 as n$38,n$136 as n$35,n$137 as n$34,n$139 as n$30,n$140 as n$29,n$142 as n$31,n$143 as n$27,n$144 as n$43,n$145 as n$28,n$146 as n$26,n$150 as n$36,n$155 as n$42,n$156 as n$40,n$70 as n$32,n$75 as n$15,n$76 as n$14,n$81 as n$11,n$83 as n$12,n$84 as n$7,n$85 as n$6,n$87 as n$4,n$89 as n$3,n$90 as n$17,n$94 as n$8,n$97 as n$22,n$98 as n$1,o$105 as o$26,o$114 as o$14,o$131 as o$28,o$67 as o$25,o$68 as o$23,o$69 as o$22,o$71 as o$21,o$72 as o$20,o$74 as o$16,o$75 as o$15,o$76 as o$13,o$77 as o$12,o$79 as o$11,o$80 as o$19,o$81 as o$10,o$82 as o$9,o$84 as o$7,o$85 as o$6,o$91 as o$5,o$92 as o$4,o$93 as o$1,o$94 as o,o$97 as o$2,p$63 as p$14,p$64 as p$13,p$65 as p$12,p$67 as p$7,p$69 as p$6,p$71 as p$5,p$76 as p$2,p$79 as p$8,p$90 as p$18,p$93 as p$22,p$97 as p$19,q as q$16,r$103 as r$26,r$105 as r$25,r$107 as r$19,r$112 as r$33,r$54 as r$18,r$56 as r$16,r$57 as r$15,r$58 as r$11,r$62 as r$9,r$64 as r$8,r$65 as r$4,r$68 as r$10,r$69 as r$12,r$70 as r$2,r$72 as r$1,r$73 as r$3,r$76 as r,r$78 as r$20,r$84 as r$23,r$85 as r$22,r$88 as r$29,r$90 as r$6,r$91 as r$14,r$98 as r$5,r$99 as r$27,s$101 as s$22,s$102 as s$20,s$103 as s$19,s$105 as s$18,s$106 as s$14,s$109 as s$23,s$116 as s$5,s$52 as s$12,s$54 as s$11,s$55 as s$10,s$56 as s$9,s$57 as s$8,s$61 as s$4,s$72 as s$2,s$73 as s$1,s$74 as s,t$49 as t$12,t$50 as t$11,t$52 as t$9,t$54 as t$6,t$56 as t$19,t$61 as t$13,t$66 as t$10,t$69 as t$2,t$70 as t$1,t$71 as t$5,t$72 as t$4,t$73 as t$7,t$87 as t$16,t$88 as t$15,t$89 as t$14,t$93 as t$18,t$94 as t$20,u$48 as u$16,u$49 as u$15,u$50 as u$7,u$56 as u$5,u$57 as u$4,u$59 as u$2,u$60 as u$1,u$67 as u$13,u$68 as u$8,u$69 as u$17,u$71 as u$19,u$76 as u$14,u$80 as u$24,u$86 as u$26,u$89 as u$30,u$90 as u$31,u$92 as u$33,u$97 as u$35,v$10 as v$13,x$22 as x$17,x$24 as x$14,x$27 as x$20,x$9 as x$13,y$14 as y$7,y$16 as y$3,y$17 as y$2,y$18 as y,y$25 as y$17,z as z$17}from"./common8.js";import{$$9 as $$8,A$12 as A$2,A$13 as A$1,A$19 as A$16,At as At$5,B$10 as B$13,B$12 as B$16,B$14 as B$21,C$12 as C$19,C$9 as C$14,D$12 as D$10,D$15 as D$14,D$16 as D$15,D$7 as D$8,E$13 as E$12,E$15 as E$14,Et,F$5 as F$12,G$12 as G$14,G$9 as G$12,H$10 as H$5,He as He$2,It as It$2,J$5 as J$1,J$8 as J$12,K$7 as K$11,K$9 as K$15,L$12 as L$9,L$6 as L$4,Lt as Lt$1,M$11 as M$13,N$17 as N$13,O$9 as O$13,P$13 as P$11,P$16 as P$13,Q$11 as Q$14,Q$9 as Q$12,R$10 as R$18,R$11 as R$17,R$9 as R$14,Re$1 as Re,S$7 as S$13,S$8 as S$15,T$8 as T$16,T$9 as T$19,Tt as Tt$2,U$10 as U$5,U$11 as U$12,U$13 as U$14,V$10 as V$9,V$12,W$10 as W$6,W$14 as W$15,X$7 as X$9,X$8 as X$11,Z$6 as Z,Z$7,Z$8 as Z$9,_$11 as _$7,_$13 as _$8,_$14 as _$9,_$16 as _$11,_$9 as _$1,a$3 as a$17,a$5 as a$21,at as at$8,b$10 as b$11,bt as bt$3,c$11 as c$36,ct$1 as ct$3,d$12 as d$18,d$9 as d$14,de$5 as de$10,dt$1 as dt$3,et$5 as et$3,et$6 as et$5,f$10 as f$27,f$11 as f$30,f$8 as f$22,g$11 as g$15,g$13 as g$17,h$10,h$9 as h$12,ht$2,ie$3,init_chunk_2TKSOSRY,init_chunk_34VTQ24L,init_chunk_44VUQYXW,init_chunk_4PSTW3N6,init_chunk_4VAIGVKD,init_chunk_4YYHOD3T,init_chunk_5KL7G6KI,init_chunk_6ZWXAYNY,init_chunk_ACOBBVBA,init_chunk_AOQIOFZ3,init_chunk_AR3GDZXE,init_chunk_AS7GHBTN,init_chunk_AUSNRDFT,init_chunk_AV2U3K6O,init_chunk_CF2O3YR5,init_chunk_DUC5RAZN,init_chunk_E3YHYJ7M,init_chunk_EL62J62W,init_chunk_GBQACLXU,init_chunk_GF6DBRGK,init_chunk_GK7J3SXA,init_chunk_GX2OGTWM,init_chunk_H4MN5W5F,init_chunk_IBPUTVKM,init_chunk_IL56MUSI,init_chunk_KD7YDNSJ,init_chunk_MQHOQO6A,init_chunk_N7MM3HUT,init_chunk_NDIPCL2A,init_chunk_NJTX3IDK,init_chunk_NLUDHCIX,init_chunk_O2SZ5CQF,init_chunk_OG3IKRPM,init_chunk_PFWPGAZ6,init_chunk_QOXJVRQR,init_chunk_QQ4BDXQH,init_chunk_R272XGUQ,init_chunk_RLEJPADI,init_chunk_RQTHRBRJ,init_chunk_TAQRHH47,init_chunk_TCQRVZIW,init_chunk_VFUGVHO6,init_chunk_VQ2T5BB3,init_chunk_W2LZLYJB,init_chunk_WKJU3U3U,init_chunk_YCVQPPGP,init_chunk_YNGVU5G4,init_chunk_ZPWYMIBL,init_chunk_ZVYP3SBH,init_chunk_ZXLMWX7A,it as it$4,it$1 as it$5,j$19 as j$15,k$11 as k$13,k$12 as k$16,k$16 as k$24,l$3 as l$20,l$5 as l$23,le$3 as le,m$7 as m$22,m$9 as m$25,n$4 as n$39,nt$1 as nt$3,o$2 as o$8,o$5 as o$30,oe$5 as oe$6,ot$1 as ot$3,pe$3 as pe$2,pt$1 as pt$2,q$11 as q,q$12 as q$10,q$16 as q$9,q$9 as q$6,r$4 as r$28,r$5 as r$31,st,st$1 as st$10,st$2 as st$8,t,te$2 as te$9,tt$1 as tt$2,u$3 as u$27,v$8 as v$17,w$11 as w$16,w$13 as w$19,w$14 as w$24,x$11 as x$21,x$9 as x$18,xt as xt$1,y$10 as y$14,y$13 as y$18,y$8 as y$12,z$11,z$6 as z$2,z$7 as z$1,ze$1 as ze$2}from"./common9.js";import{Ae,B$2 as B$4,B$5 as B$10,C$1 as C$5,Ce$1 as Ce,D as D$4,De$2 as De,E as E$10,It,J$4 as J$7,Je$1 as Je$4,K$4 as K$2,K$6 as K$7,Ke$1,Le$3 as Le$1,Le$4,Le$5 as Le$2,M$3 as M$11,Oe as Oe$2,Pe,Q as Q$10,Se as Se$3,U$1 as U$6,Ue$1,V$4 as V$6,W$1 as W$5,W$3 as W$8,Y$3 as Y$5,Ye$2 as Ye,Ye$3 as Ye$2,Z$4 as Z$3,a$3 as a$19,a$4 as a$29,ce$2 as ce$4,ce$3 as ce$2,de$3,f$1 as f$17,ft$2 as ft,g as g$12,ge$2 as ge$1,ge$3 as ge$6,h as h$7,he$1 as he$3,he$2 as he$1,i as i$18,ie$2 as ie,init_chunk_262FZW6T,init_chunk_33ETUROJ,init_chunk_3JTXLA2C,init_chunk_4PLE5LMQ,init_chunk_5SK6KTFI,init_chunk_5XVCKR22,init_chunk_7BSGO4MG,init_chunk_APG5MJMQ,init_chunk_C43HTVRN,init_chunk_DVJLJHKX,init_chunk_ETM3OHTF,init_chunk_HLM7TNGI,init_chunk_HQ23SRJU,init_chunk_HWWKYUV2,init_chunk_JFP6POO6,init_chunk_KDZDP3T6,init_chunk_LP3T73IJ,init_chunk_N23AERUN,init_chunk_NBAPQGHD,init_chunk_NHG6OVVK,init_chunk_PZRJETMO,init_chunk_QVVVOHY7,init_chunk_S7ODPXSP,init_chunk_TBALFSIE,init_chunk_W4IKE6WB,init_chunk_WM4PZEVS,init_chunk_WP3JG3CA,init_chunk_Y4EVC7PB,init_chunk_ZLKRFUEK,init_chunk_ZLZESCB4,it as it$2,j$1 as j$3,j$3 as j$21,k$3 as k$14,le$2,n as n$20,ne$1 as ne$2,ns,nt$1 as nt$2,pe$3 as pe$1,q$3 as q$7,s$1 as s$15,se$3 as se$2,ue$4 as ue$2,v$2 as v,ve$1 as ve$2,w$1 as w$10,w$2 as w$25,we$1 as we,xr,ye$5 as ye$2,z$2 as z$7,z$3 as z$9}from"./common10.js";import{A$1 as A$17,B$3 as B$15,C$2 as C$12,C$4 as C$17,D$2 as D$13,E$2 as E$13,F$1 as F$16,F$3 as F$17,H$3 as H$6,I$3 as I$16,J$5,J$8 as J$13,K$7 as K$14,L$5 as L$10,Le$1 as Le$8,M$2 as M$16,M$3 as M$15,N$4 as N$14,N$6 as N$12,O$5 as O$14,P$6 as P$12,Q$3 as Q$7,Q$4 as Q$15,Q$5 as Q$13,R$2 as R$7,R$4 as R$16,S$2 as S$17,Se$2 as Se$10,T$2 as T$13,T$3 as T$4,T$5 as T$18,U$7,U$8 as U$13,V$4 as V$11,Ve$1 as Ve,W$8 as W$17,X$2 as X$10,Y$5 as Y$6,Z$6 as Z$8,a$4 as a$23,b$5 as b$7,c$4 as c$13,c$7 as c$27,d$5 as d$16,ee$1 as ee$2,ee$4 as ee$8,ee$5 as ee$6,et,f$5 as f$26,fe as fe$1,g$6 as g$16,ge as ge$9,h$4 as h$9,hr,i$3 as i$9,i$4 as i$21,ie$5,init_chunk_3IQZKDPQ,init_chunk_3LRXLKKO,init_chunk_4Z2MZHXP,init_chunk_5ACJ7CLE,init_chunk_5DUMABNF,init_chunk_5MHLJFAM,init_chunk_5RAIWTKC,init_chunk_74Y3TQEE,init_chunk_AD3RX73I,init_chunk_AJHKRVHL,init_chunk_BM7522YF,init_chunk_BVPMVEN4,init_chunk_BZLFTFIX,init_chunk_DDI2Q77L,init_chunk_ECGDXEBV,init_chunk_EYEMIHOG,init_chunk_G55NUQPT,init_chunk_GYIGCPHR,init_chunk_HXRASESW,init_chunk_IC3VL6RI,init_chunk_JDS3PI27,init_chunk_KYTA5AN4,init_chunk_LAH3IOQ2,init_chunk_LKCRK4FM,init_chunk_MC3E7F7S,init_chunk_MITZBOEJ,init_chunk_NCTW5BX4,init_chunk_OL7BP54H,init_chunk_OT7YQBQU,init_chunk_PCARPHZ3,init_chunk_QJHGHZW6,init_chunk_R4WHFJ4B,init_chunk_RG43USMS,init_chunk_RZAT3AKA,init_chunk_SN467VYT,init_chunk_SPUXTX46,init_chunk_T56TXYXX,init_chunk_U3G3FNRQ,init_chunk_UQ4QH522,init_chunk_V3ND2NRH,init_chunk_VEN77NA6,init_chunk_W4CC4ZGC,init_chunk_XJLRIQK5,init_chunk_YB6MTVKF,init_chunk_YTCDZSGI,init_chunk_Z6QHLU7K,init_chunk_ZIW2MNBU,init_chunk_ZJWNEXB6,j$7 as j$17,j$9 as j$20,k$3 as k$1,k$5 as k$19,k$6 as k$18,ke$1,l$4 as l$21,m$6 as m$24,n$2 as n$37,o$2 as o$27,oe as oe$10,p$7 as p$23,p$8 as p$26,q$8 as q$12,q$9 as q$17,r$4 as r$30,re$2,re$3 as re$1,s$6 as s$21,se$2 as se$1,se$4,te$1 as te,te$4 as te$13,tr as tr$1,u$5 as u$29,v$2 as v$19,v$3 as v$18,w$6 as w$4,w$7 as w$3,w$8 as w$17,y$6 as y$13,z$4 as z$12,z$6 as z$16}from"./common11.js";import{A$2 as A$13,At$5 as At$2,B$4 as B$5,Ct$3 as Ct,Dt$1 as Dt,G$1 as G$4,G$7 as G$8,H$10 as H$9,Jt$2 as Jt,L$7 as L$5,Le$1 as Le$3,Mt$1 as Mt,N$7 as N$8,Nt,O$4 as O$11,P$4 as P$10,R$1 as R,U$7 as U$18,V$6 as V$5,W$3 as W$7,We$1,Y$6 as Y$4,Y$8 as Y$7,Ze$1 as Ze,at$2 as at,at$5 as at$3,b$5 as b$18,be$2 as be$1,be$4 as be$2,bt$2 as bt,ce$1 as ce,d$4 as d$25,de$5 as de$1,de$6 as de,f$6,ge as ge$3,he$1 as he,he$3 as he$2,i$2 as i$3,init_chunk_2DYRUEXM,init_chunk_2PCRUZKH,init_chunk_36FEP36U,init_chunk_4UJVOEZZ,init_chunk_A6JCA3BQ,init_chunk_ACL7MKVX,init_chunk_B7DCZBHN,init_chunk_CBH5EF6E,init_chunk_CFMHD35E,init_chunk_COKS5NRA,init_chunk_CQZSZCIE,init_chunk_DM7QGBU5,init_chunk_EIUPIMK3,init_chunk_EZKN7GE5,init_chunk_FWFYPZTY,init_chunk_GRVQX4YB,init_chunk_H7WEGWDP,init_chunk_I7O6DKBK,init_chunk_IE2PF6QF,init_chunk_J32C2Y5L,init_chunk_KF3RFKRX,init_chunk_L6GQM66W,init_chunk_MQCOIHAS,init_chunk_MS64DTHW,init_chunk_OCSXDCZG,init_chunk_RPYM2Y32,init_chunk_SDW2YVHW,init_chunk_UE3L25ST,init_chunk_UZX2Y23P,init_chunk_V5SOBSWK,init_chunk_WAFN7K32,init_chunk_WXMYLHBN,init_chunk_XBXQJ4GL,init_chunk_XORVRBLA,init_chunk_Y7FXR2C3,init_chunk_YYESZLLI,it$1 as it,je$2 as je$1,k$8 as k$26,k$9 as k$23,m$2 as m$19,m$5 as m$17,me$2 as me,nt$2 as nt$1,o$4 as o$31,oe$1,oe$3 as oe,ot$2,p$5 as p$17,pe$2 as pe$4,rt$3 as rt$1,s$1 as s$3,se$1 as se,t$1 as t$3,te$1 as te$2,te$4 as te$10,te$6 as te$4,ue,v$5 as v$12,wt$1 as wt,x$6 as x$26,xt$1 as xt,ye as ye$3,yt$2 as yt,ze$1}from"./common12.js";import{Ge$3 as Ge,W$3 as W$9,We$1 as We,i$2 as i$14,init_chunk_3JNZKAWX,init_chunk_A5RWVW6L,init_chunk_ARTK3WFN,init_chunk_GKWZIUEB,init_chunk_IUYYRHNF,init_chunk_JDHBZ6MX,init_chunk_KLBCLUVT,init_chunk_KPKJQDB4,init_chunk_KPPJJXYA,init_chunk_OI52CPV5,init_chunk_PFRX7IW7,init_chunk_SA7BLIFV,init_chunk_VZD7NVSW,init_chunk_X6ZTLYCQ,oe$2 as oe$3,w as w$2}from"./common13.js";import{Ft,H as H$8,Vn as Vn$1,Wn,Xt$1 as Xt,Yn,gi as gi$1,hn,init_chunk_HFIA5NER,init_chunk_ZJ6ZXA2D,jn,q as q$18,qn,ue as ue$10,yt as yt$2,zn}from"./common14.js";import{L0,init_chunk_RRILRRCT}from"./common15.js";import{$$5 as $$3,A$6 as A$15,Ae$1,Be,Fe$2 as Fe$1,G$7 as G$5,H$7 as H,I$5,I$6 as I$4,Ie$2,J$5 as J,J$7 as J$11,Q$10 as Q$9,S$4 as S$12,Te$1,V$10 as V,W$6 as W$4,X$10 as X$2,X$9 as X,Y$1,Z$6 as Z$1,a$3 as a$16,a$4 as a$22,a$5 as a$28,ae$2 as ae$1,ae$3 as ae$8,at$1 as at$10,b$5 as b$16,bt as bt$1,c$2 as c$19,c$4 as c$32,ct$2 as ct$5,d$5 as d$15,de$4,e$2 as e$17,ee$2 as ee$1,ge$7 as ge$5,i$2 as i$16,init_chunk_2VQXPST3,init_chunk_4PTSSLXS,init_chunk_5Q3ZIKGV,init_chunk_5YVTLEYY,init_chunk_6DDQZHCY,init_chunk_7JF7EGYV,init_chunk_A76L7RFC,init_chunk_AZPZV6X7,init_chunk_BPKFOE4A,init_chunk_BTS4R3BH,init_chunk_CKDA6KXW,init_chunk_EAT3PWXW,init_chunk_FCFHSZWY,init_chunk_GJQO7UEW,init_chunk_IWAULXVX,init_chunk_K3DBGPGZ,init_chunk_KDXRVIPR,init_chunk_KURLOCN2,init_chunk_L7BAU7P4,init_chunk_LEBTZNLM,init_chunk_MEIVNTA4,init_chunk_MOCG3PWT,init_chunk_N3U4W3B3,init_chunk_O2GJYKIU,init_chunk_OE6PYBYM,init_chunk_OLZCAKLO,init_chunk_PFUN7GO6,init_chunk_PKLJMSRU,init_chunk_QGEELZGO,init_chunk_QR6JA6G7,init_chunk_QSBB4QFL,init_chunk_QUYXRF3F,init_chunk_SCAACWUK,init_chunk_SFCBR4KI,init_chunk_V5EIEMXY,init_chunk_VWIGD4R6,init_chunk_WJ7JHKSS,init_chunk_WL5ER3K7,init_chunk_WVNG6S2S,init_chunk_YG7PVAVZ,init_chunk_ZDHXZUOV,l$2 as l$18,le$1,m$6 as m$18,m$9 as m$29,me$1,me$3 as me$8,ne$3 as ne,nt$2 as nt,oe$4 as oe$2,q$3 as q$4,r$1 as r$32,re$2 as re,te$3 as te$1,te$4 as te$12,ve$1 as ve$4,ve$3 as ve$8,x$7 as x$15,xe$2 as xe$1,y$3 as y$10}from"./common16.js";import{Ni as Ni$1,fA,fc,init_chunk_IE7EWK64,lA,lc}from"./common17.js";import{$a$1,$t as $t$2,An,Dc,Fl,Ge$1 as Ge$4,Gr,Gr$1 as Gr$2,Hl,Hr as Hr$2,Iu,Kc as Kc$2,Ke$1 as Ke$2,Kr as Kr$1,Lc,O as O$17,Os as Os$1,P$1 as P$18,Pl,Q as Q$16,Qr,Qt as Qt$2,Ru,Ta$1,Tc,Tu,Va$2 as Va,Xc as Xc$1,Xr,Xr$1,Z as Z$6,Zt as Zt$1,_ as _$12,al$1 as al,ao,ar as ar$3,ba$1 as ba,cr as cr$1,cu as cu$1,er$1 as er$3,g as g$18,h$1 as h$13,ht as ht$3,init_chunk_JTB4R22M,init_chunk_MGEBTVBB,init_chunk_OWQP6VSR,init_chunk_UAUUAKYT,it$1 as it$3,jc as jc$1,jr,me as me$5,ml$1,pr$1 as pr$2,qe as qe$3,qr,rs as rs$1,tr$1 as tr$3,u as u$34,uu as uu$1,vn$1,x$1 as x$24,xe$1 as xe$5,zc}from"./common18.js";import{Bt as Bt$6,Rt as Rt$2,init_chunk_FUF2XOBT,np,v as v$21,w as w$21}from"./common19.js";import{Ao as Ao$2,De as De$2,Do,Ht as Ht$1,K$1 as K$17,M as M$21,Qe as Qe$2,Qt$1 as Qt,Se$2 as Se$7,T$1 as T$21,X$2 as X$14,Xe$1,Ze$3 as Ze$1,b as b$14,de$1 as de$5,de$2 as de$9,et as et$4,ft as ft$2,ge as ge$7,gn,init_chunk_4NLGLXM3,init_chunk_IP2USH2G,init_chunk_KIYRLFYY,init_chunk_LCPFOFRR,init_chunk_LDQCWE5R,init_chunk_QQFX6JU2,init_chunk_RCUIBUMR,init_chunk_TGZB3HEQ,init_chunk_ZMDKCXOF,m as m$27,sr,ve$1 as ve$7,we as we$2,wt$1 as wt$4,x as x$23,zi}from"./common20.js";import{Pt$1 as Pt,Vo$1 as Vo,ar$1,init_chunk_IKZYU66O,init_chunk_SSQCA4RH,init_chunk_XI3MNGF5,init_chunk_YG64XT3O,nt$3 as nt$4}from"./common21.js";import{$$1 as $$9,At,Bt as Bt$2,Ee$4 as Ee$3,F as F$18,H$1 as H$7,I$1 as I$19,Js$1 as Js,Ke as Ke$3,Le$2 as Le$7,Lt,M as M$18,N$1 as N$15,O$2 as O$15,Oe$1 as Oe$5,R$1 as R$19,Re$1 as Re$4,T$1 as T$20,Te$1 as Te$2,Te$3 as Te$6,U$2 as U$17,V as V$14,W as W$12,Xe as Xe$3,Z$3 as Z$11,_$2 as _$10,_e$1 as _e$2,ae$1 as ae$7,at$1,be$2 as be$6,de$3 as de$2,ee$1 as ee$9,es,f as f$29,he$4 as he$5,init_chunk_33UJWRIJ,init_chunk_5RGKLLTW,init_chunk_6SB6MYUI,init_chunk_7QQQ2VDX,init_chunk_A2L2C2AX,init_chunk_CDGC2DSY,init_chunk_D3UIGXPV,init_chunk_HGCVBYPY,init_chunk_L4VKTPCI,init_chunk_QJ6YQOYU,init_chunk_UJHR4ODB,init_chunk_WIRZ72AY,init_chunk_WOQF7ASS,init_chunk_X7GETOBP,init_chunk_Z6AT3IZ2,it$1 as it$6,je as je$2,ke$4,l as l$24,li,m$1 as m$26,me as me$7,mt,n as n$41,ot as ot$4,p$3 as p$25,qe as qe$4,se$1 as se$5,st as st$9,ta,te$1 as te$14,ue$2 as ue$9,ut$2 as ut,v$1 as v$20,w as w$20,we$3 as we$1,wr as wr$1,xe$1 as xe$4,y as y$16,y$1 as y$15,ye$1 as ye$4,z as z$13}from"./common22.js";import{$$1 as $$7,Be as Be$2,Be$3 as Be$7,Bt as Bt$1,Bt$2 as Bt$5,Ce as Ce$2,Ce$1,Ce$6 as Ce$4,D$3 as D$9,E$1 as E$4,Ee$5 as Ee$4,Et$3 as Et$2,F as F$11,Fe$2 as Fe$3,Fe$3 as Fe,He$1,Ie$1,Ie$7 as Ie$4,It$2 as It$3,J$4 as J$10,K$4 as K$6,Kt$1 as Kt,Le$6,M$2 as M$9,Me$4 as Me$2,Ne$3 as Ne$2,P as P$8,Pe$5 as Pe$2,Re$3,S$1 as S$8,S$2 as S$14,Se$1,Se$6 as Se$8,Te$1 as Te,Te$7,Te$8 as Te$5,Tt$2 as Tt$3,V$9 as V$15,X$9 as X$13,Xe$2,_e$4 as _e$1,_r,ae$1 as ae$3,at as at$6,be$8 as be$5,ce as ce$3,ce$2 as ce$6,ce$6 as ce$7,de as de$6,de$5 as de$8,f$2 as f$21,fe as fe$2,fe$6 as fe$3,g$3 as g$10,ge$2 as ge,he$5 as he$6,ie$1 as ie$2,ie$6,init_chunk_2M435SKO,init_chunk_3I6IL6EL,init_chunk_3TI46X7E,init_chunk_3UFNUG62,init_chunk_6CTKAQBL,init_chunk_6GZM34SG,init_chunk_7HXAPEUP,init_chunk_AS3JIYA2,init_chunk_BQ3J5YGZ,init_chunk_CR2DDQCM,init_chunk_E4ELGNEN,init_chunk_GAEATFUF,init_chunk_GGSXP2UF,init_chunk_JBBFIZX7,init_chunk_LHYLVLN2,init_chunk_MYSLSPSJ,init_chunk_NEHZXZ5N,init_chunk_SLDJLS3W,init_chunk_THGKNHGB,init_chunk_U6NJ3HW3,init_chunk_UFFVXUGM,init_chunk_XAXBO7TJ,init_chunk_XEP6IYZ4,init_chunk_XHBSXBYT,k$3 as k$17,l$1 as l$8,le$2 as le$3,le$6 as le$4,li as li$2,ls,m$1 as m$20,m$3 as m$28,me$10 as me$6,me$3 as me$2,ne$3,ne$7 as ne$4,ne$8 as ne$5,oe$7 as oe$11,p as p$16,pe,pe$6,q$1 as q$5,re$8,st$1 as st$6,ue$1 as ue$4,ue$2 as ue$1,ue$5 as ue$3,ue$7 as ue$8,v$2 as v$11,v$4 as v$15,ve$1,ve$6,we$5 as we$3,x$1 as x$12,x$6 as x$16,xe,xe$7 as xe$3,xo,ye as ye$1,z$1 as z$10}from"./common23.js";import{Be$2 as Be$8,Fi,Gt$3 as Gt$1,Je,Nt as Nt$1,P$1 as P$14,Ue$1 as Ue$2,Yt,h as h$1,he$1 as he$4,init_chunk_3BIX4D7Y,init_chunk_GJBWBEFI,init_chunk_H6NPQBSV,init_chunk_JHDEJ7QA,init_chunk_K65HDRCK,init_chunk_NI3FL6YS,init_chunk_RKEQKQLF,init_chunk_U2RFAULR,init_chunk_W7BXXZ5U,init_chunk_XCNHWPMY,init_chunk_YU5EUHIP,init_chunk_ZMONI7LM,io,k$2 as k$22,qe$1 as qe,st$1,zt$1}from"./common24.js";import{$e$1 as $e$2,Ce$1 as Ce$5,Ct as Ct$3,Et$1 as Et$3,Jo as Jo$2,Ks as Ks$1,M as M$20,Pt$1 as Pt$3,Se as Se$9,St as St$2,V as V$13,X as X$12,Yo$1,Zo as Zo$1,hr as hr$2,init_chunk_5GDLRJBY,j as j$18,mt as mt$3,ri as ri$2,vt as vt$1,x as x$22,z as z$14}from"./common25.js";import{Es as Es$2,Gs as Gs$2,Hi as Hi$1,I as I$20,Ls as Ls$1,O as O$16,Us as Us$2,d$1 as d$21,init_chunk_BD4NVYWE,ne as ne$6,to as to$2,zs as zs$2}from"./common26.js";import{$o,$t as $t$1,Ao,F as F$13,Fe as Fe$4,He as He$3,Ho,Ht,Ie$1 as Ie$3,Je$1,Lo,M as M$10,Mo$1 as Mo,N as N$9,O as O$10,Oo,Pn,Po as Po$1,Qo as Qo$1,R as R$11,Re$1,Rn,S as S$10,To,U as U$9,Uo,Vt as Vt$1,Wo,Zt,_ as _$4,_o,ae as ae$4,at as at$4,ct as ct$1,d as d$11,de$1 as de$7,er as er$2,f as f$18,h as h$6,init_chunk_2WWDF2EP,init_chunk_CU274KUE,init_chunk_J4YA6GZG,init_chunk_MJEOCM2T,init_chunk_N2M7RTLF,j as j$11,je$1 as je$3,jo,ko,kt,mr as mr$2,qt,rt as rt$2,u as u$23,wo,y as y$9,zo}from"./common27.js";import{$u,AI,AJ,Ad,Ae as Ae$5,B as B$17,BJ,Bt as Bt$4,Bu,CU,Cd,Cr as Cr$2,Cx,DO,DR,Dd as Dd$1,FI,Fb,Fd,Fo as Fo$2,Gd$1 as Gd,Gu,HK,Hd,Hr as Hr$1,IO,Ic,Id,JS,Ju,KI,KJ,KR,KS,Kt as Kt$2,L9,Me as Me$1,Mr,Mu,NI,Ni,OJ,Oc,Pd,QS,Qn,RO,Rc as Rc$1,Rl,SJ,TI,Ud,Ux,V9,Vd$1 as Vd,XS,ZS,_$,_b as _b$1,_c as _c$1,_d,bO,bd,be as be$4,bx,d as d$20,dF,da,et as et$6,fF,fn,g9,gF,ge as ge$8,hJ,hl,il,init_chunk_FH75ARBM,jA,jS,kJ,ka,kb,ke as ke$3,kw,lF,mF,ml,nl,o0,oO,pF,qK,qd,qs,re as re$7,s5,sz,t0,t7,ti as ti$1,un,vd,wa,wo as wo$2,xd,yJ,zJ,zS}from"./common28.js";import{$e as $e$1,$o as $o$1,Ae as Ae$4,Fo as Fo$1,Ho as Ho$1,I$1 as I$17,J as J$14,Js as Js$3,K as K$16,Lo as Lo$2,Nt as Nt$3,Ot,Qs as Qs$3,Se as Se$6,Ve as Ve$1,Vt as Vt$2,We as We$2,Xo as Xo$1,Z as Z$10,h$1 as h$11,init_chunk_332F4YSC,init_chunk_CQZ7X5ZN,init_chunk_FXYYYK5G,init_chunk_IJBRRVTQ,init_chunk_OI5D4BGE,init_chunk_PY4RM2DK,init_chunk_Y7PITYYD,jt$1 as jt$2,k$1 as k$20,me as me$4,p as p$24,q$2 as q$13,ss as ss$1}from"./common29.js";import{F$1 as F$15,It$1,Vn,W$2 as W$13,init_chunk_7EWVPPRJ,init_chunk_LSTIPTFG,init_chunk_RWNXFSCE,init_chunk_RZFEFFKI,uo}from"./common30.js";import{Cr,Cs,D as D$6,Ns as Ns$1,R$1 as R$10,Vs,Xe,_r as _r$1,ae as ae$2,fs,hs,ii as ii$1,init_chunk_C5NR4QAC,init_chunk_F23IDYOX,init_chunk_NDHIVANN,init_chunk_U3FIRBU2,ma,mi as mi$1,ns as ns$1,pe as pe$3,se as se$3,st$1 as st$4,st$2 as st$3,ve as ve$5,vs,w as w$12}from"./common31.js";import{A as A$14,At as At$4,C as C$13,Io as Io$1,Ro,X as X$8,Zt as Zt$2,go,init_chunk_2L5ZTHLM,init_chunk_MYNRNW52,p as p$21,wo as wo$1,zo as zo$1}from"./common32.js";import{Ao as Ao$1,Gr as Gr$1,Je as Je$5,Jo,Kr as Kr$2,Oo$1,Po,Qc,Sr as Sr$1,V as V$7,Xc,Ys as Ys$1,Zs,at as at$7,fo,ho,hs as hs$2,init_chunk_27UKCLLJ,init_chunk_D56MYMA3,init_chunk_GEX6YGGZ,init_chunk_GIDHMHEZ,init_chunk_NEZ7IFJE,jc,jo as jo$1,kr$1 as kr,qc,ss,ts as ts$1,wr as wr$2,xo as xo$1,xs}from"./common33.js";import{$e$2 as $e,A as A$12,C as C$18,G as G$10,Ge$1,Ge$2 as Ge$3,Gs as Gs$1,H as H$4,Je as Je$3,Je$1 as Je$2,Lo as Lo$1,Ls,M as M$17,No,Po$1 as Po$2,S as S$18,Ue$3,Ve$1 as Ve$2,Vs as Vs$2,Ye$1,Z as Z$5,at$1 as at$9,ct as ct$4,d as d$17,ee$1 as ee$7,ft as ft$3,gt,init_chunk_3IC5G5L3,init_chunk_3O74YUZW,init_chunk_5NHRCTOS,init_chunk_HKM3URAS,init_chunk_J2JUYTRP,init_chunk_JQTLC6XH,init_chunk_RTYJBZD2,init_chunk_X5FNAWJO,ko as ko$1,pe as pe$5,qe as qe$1,re as re$6,rt$1 as rt$3,w as w$11,w$2 as w$18,wr,ws as ws$1,xt$2}from"./common34.js";import{As,H$1,He,Ie$2 as Ie,Le$2 as Le,Ne,Oe as Oe$1,Qe$1 as Qe,U$3 as U$11,Ue,V$3 as V$10,W$1 as W$11,X$2 as X$5,Y$1 as Y$2,Y$2 as Y,_e$1 as _e,be$2 as be,ee$1 as ee$3,ie$1,init_chunk_2AZS4T25,init_chunk_3NKCH3CH,init_chunk_7KHLQDJ3,init_chunk_BBMAWOQ6,init_chunk_CCOMGHIY,init_chunk_D2OVXLQW,init_chunk_DFKDK2AH,init_chunk_IJ4PRWCS,init_chunk_KTBQVFMS,init_chunk_N3VBW4LJ,init_chunk_NDNWTY62,init_chunk_O4APS4QY,init_chunk_RQSNHR5N,init_chunk_VIACF325,j$2 as j$12,ke$3 as ke,ne$1,q as q$11,te$1 as te$8,w$4 as w$8,w$6 as w$14,ye$3 as ye}from"./common35.js";import{A as A$11,Be$4 as Be$1,Be$5 as Be$3,De$3 as De$1,Ee$2 as Ee$1,Es,Me$6 as Me,N as N$10,Oe$2 as Oe$3,Q as Q$8,Qe$1,Qs,Te$2 as Te$3,Ue as Ue$4,W as W$10,X$1 as X$4,_ as _$6,ae$3 as ae$5,c$2 as c$20,er as er$1,f as f$14,init_chunk_2CEAVPF4,init_chunk_2S5X5WSH,init_chunk_4QU3WEDM,init_chunk_6HNCEOCZ,init_chunk_DVA577KS,init_chunk_GF2U2YDN,init_chunk_GOMSCAEP,init_chunk_IF7EMKQR,init_chunk_MS76NODV,init_chunk_QY242NLB,init_chunk_SPSKVY4A,init_chunk_XD444R5V,oe as oe$4,re$1 as re$4,te as te$5,te$2 as te$7,w$1 as w$15,ze$2 as ze}from"./common36.js";import{Ae as Ae$3,Ar,Br as Br$1,Gt,Jt as Jt$2,Kt$1,Li,Ln as Ln$1,Lr,Mn,Nt as Nt$2,Oe$1 as Oe,Oi,Q as Q$11,Re as Re$2,Rn as Rn$1,St$1,Ti,Tt,Ur as Ur$1,Vr,fe$2 as fe,fi,ft as ft$1,hi,init_chunk_C7BR2QVI,init_chunk_DOL4AIBY,init_chunk_FLQEKE6Y,init_chunk_OSD5LSNB,init_chunk_WEYRVEFO,init_chunk_XPOWJT6P,init_chunk_YO6RUNLM,kt as kt$1,no$1 as no,pt as pt$1,qt$1,ri,rs,v$1 as v$16,ve,vi}from"./common37.js";import{Eo$1 as Eo,I as I$13,h as h$8,init_chunk_27ZGBOZO,init_chunk_7GPZBDSL,init_chunk_VJ6K7447}from"./common38.js";import{Di,Js as Js$1,init_chunk_6XZ2ATYJ,init_chunk_E2NLYKXN,lr as lr$1,ze$1 as ze$3,zr}from"./common39.js";import{$$3 as $,K$3 as K$9,Ke,Pt$1 as Pt$2,Rt$1,Se,Se$1 as Se$4,V$5 as V$2,W$3 as W$14,X$3 as X$7,at as at$2,init_chunk_6ZC7G4W6,init_chunk_7M2WGB7J,init_chunk_KO3EUFNZ,init_chunk_L53RB37L,init_chunk_LHW5BJJT,init_chunk_LQFJW75X,init_chunk_MADIVYH4,init_chunk_NZH7SYY6,init_chunk_PZTCVRYY,init_chunk_RNGWHP7S,init_chunk_SHJ2TL2M,init_chunk_UJQAVLJE,jt as jt$1,lr,pr,st$2 as st$7,u$2 as u$25,wt$4 as wt$1,wt$5,z$5 as z$8,zt$1 as zt}from"./common40.js";import{$s as $s$2,Ao as Ao$3,As as As$2,Ci as Ci$1,Cs as Cs$1,Do as Do$1,Ds,Fe as Fe$5,Fo,Ge$1 as Ge$2,Go,Gs,I as I$15,Is,Jo as Jo$1,Mo as Mo$1,Ms,No as No$1,Ns as Ns$2,Oo as Oo$2,Os as Os$2,Pc,Ps,Qi,Qo as Qo$2,Qs as Qs$2,Rs,Se as Se$5,So,Ss,To as To$1,Uo as Uo$1,Us$1,Vo as Vo$1,Vs as Vs$1,W as W$16,Wi,Wo as Wo$1,Xo,Xs as Xs$1,Yi,Yo,Ys as Ys$2,Zo,_s,ao as ao$1,c as c$26,co,cr as cr$2,dr as dr$1,eo,hi as hi$2,ho as ho$1,hr as hr$1,ie as ie$4,ii$1 as ii$2,init_chunk_Y6XIJDQE,io as io$1,ir,js as js$1,ks,mr as mr$1,ni$1,no as no$1,nr as nr$3,oe as oe$9,oi,oo as oo$1,or as or$1,pr as pr$1,qo,ri as ri$1,ro,rr as rr$1,si as si$1,so,sr as sr$1,ti,to as to$1,tr as tr$2,uo as uo$3,vo$1,vs as vs$1,ws,xi as xi$2,xo as xo$2,xs as xs$1,ze$1 as ze$4,zo as zo$2,zs as zs$1}from"./common41.js";import{$b,$r,AP,Br,Bt$1 as Bt$3,D7,DA,G as G$11,Hr,PP,RA,Sr,Ui as Ui$1,Ur,V2,Xi,_b,aP,c9,cP,dP,eP,f3,fg,gt as gt$1,i3,iP,init_chunk_TY3TPDZK,ji as ji$1,kA,l2,l3,lP,mP,nr$1 as nr$2,o2,o3,oP,qi,r3,rP,tP,ty,vl,wP,x8,xi as xi$1,yr,zi as zi$2}from"./common42.js";import{AO,Af$1 as Af,Ag,Am,Ce as Ce$3,Cf,Cg,Cr as Cr$1,Dd,Dh,Ef,Ei as Ei$1,Hi,Ib,If,Ig,Im,Io,Ir as Ir$1,Jc,K as K$8,Kc as Kc$1,L as L$8,Ph,Rc,Ri,Sf$1 as Sf,Sl,Tf,Uc,Yc,_c,_f,_g,ad,am,ar as ar$2,bf,bi,cd,cf,cu,dh,dr,ed,fp,fu,gl,hi as hi$1,hu,id,init_chunk_NYCRBZVE,ji,kf,l0,ms,nr as nr$1,od,oe as oe$7,ps as ps$1,qe as qe$2,rd,sd,td,ue as ue$6,ul,up,vf,vo,wO,wf,wg,wm,xh,yf,yo,zi as zi$1}from"./common43.js";import{As as As$1,At as At$3,Bs,Ci,Es as Es$1,J as J$9,K as K$3,Kc,Pi,Pt as Pt$1,Qt as Qt$1,X as X$6,ge as ge$4,hs as hs$1,init_chunk_ESBXPUWU,init_chunk_F6XZEC6K,j as j$14,jt,lo,ls as ls$1,ns as ns$2,oe as oe$5,ts,uo as uo$2,xe as xe$2,ys,zs}from"./common44.js";import{$t,Te as Te$4,Tt$1,init_chunk_5VA36X3M,init_chunk_CRDCU2YJ,init_chunk_IJGGAYH2,init_chunk_MV2OR3MM,init_chunk_TELZBU23,ue as ue$7}from"./common45.js";import{$s as $s$1,Aa as Aa$1,Ca,Ct as Ct$1,Hs$1,J as J$6,Jt as Jt$1,Ns,Q as Q$6,Ta,V as V$8,Wt$1 as Wt,ga,ht,init_chunk_3XJR5MLX,init_chunk_CT25OK3L,init_chunk_R36FQPRD,ot$2 as ot$1,ps,ta as ta$1,tt as tt$1,tt$1 as tt,zr as zr$1}from"./common46.js";import{init_chunk_43ADMI6R,ln}from"./common47.js";import{Ac,Ai,Be as Be$6,Rt,ce as ce$1,ht as ht$1,init_chunk_F6I5JCQY,init_chunk_HHXIJPAQ,init_chunk_RH4FWQNN,js,ni}from"./common48.js";import{$ as $$4,$s,A as A$9,Ae$1 as Ae$2,At$1,Bt,Co,Ei,Et$1,Hs,Js as Js$2,K as K$4,Ko,Kr,Ks,Ln,Mi$1 as Mi,N as N$5,Ne as Ne$1,Os,Qo,Qs as Qs$1,R as R$8,Se as Se$2,Si$1 as Si,Su,Ti as Ti$1,Ui$2 as Ui,Un,Vt,Ws,Xs,Ys,Z as Z$4,_ as _$3,_t,an,at as at$5,cn,cr,ct as ct$2,dn,dt as dt$2,ee as ee$4,ei,en,er,ge$1 as ge$2,gi,h as h$3,i as i$17,ii,init_chunk_6PUX42YE,init_chunk_F6KRYMJV,init_chunk_IAPCEUOG,init_chunk_TL7D6LH4,k as k$10,li as li$1,mi,mr,mt as mt$2,nr,oo,or,pi$1 as pi,rr,si,st as st$5,tn,to$1 as to,tr,uo as uo$1,ut as ut$1,uu,ve as ve$3,vn,vt$1 as vt,vu,wt$1 as wt$2,xi,yi,yt$1}from"./common49.js";import{Jr,Ki,St,Yt$1,bt as bt$2,dt as dt$1,init_chunk_FSUJB66E,init_chunk_RAFUKUV4,init_chunk_UFLOBGWK,ot$1 as ot,st as st$2,ue as ue$5}from"./common50.js";import{init_chunk_Q23EQG4E}from"./common51.js";import{ar,init_chunk_KWNMQEEQ}from"./common52.js";import{Aa,Hm,KIe,OE,Om,RE,ZTe,init_chunk_MBUUNCST,wD,xE}from"./common53.js";import{init_chunk_DX42IWO5}from"./common54.js";import{init_chunk_KG2YWESQ}from"./common55.js";import{init_chunk_7MQ654HN,init_chunk_E56XT5MT}from"./common56.js";import{init_chunk_FXGDI762,pp,zu}from"./common57.js";import{init_chunk_UCII7UGI}from"./common58.js";import{init_chunk_V3Y77IQB,lu}from"./common59.js";import{init_chunk_3JBNJVCU}from"./common60.js";function lQ(){Y$8.onUnhandledError??=t$21=>{lA(t$21,{feature:`unknown`,rxjs:!0});};}function dQ(){Yt$3(t$21=>{lA(new Error(t$21),{feature:`unknown`});});}function pQ(t$21){let i$27=document.createElement(`div`);i$27.style.cssText=`
    position: absolute;
    top: -9999px;
    visibility: hidden;
    overflow: scroll;
    width: 100px;
    border: none;
  `,document.body.appendChild(i$27),i$27.offsetWidth>i$27.clientWidth&&t$21.addClass(document.body,`cu-scrollbar`),i$27.remove();}function uQ(t$21){let i$27=C$23(kb),e$19=f$30.byNamespace(`fe-platform`);localStorage[fle]&&(window.$test={navigate:r$34=>{e$19.log(`[TEST RUNNER NAVIGATE] ${r$34}`),t$21.navigateByUrl(r$34);},getAllSplitFlags:()=>I$24(null,null,function*(){return e$19.log(`[TEST RUNNER GET ALL SPLIT FLAGS]`),i$27.getAllTreatmentsWithConfig();})});}function gle(t$21,i$27){}function Sle(t$21,i$27){if(t$21&1){let e$19=YD();tl(0),Kc$3(1,`dialog`,2)(2,`div`,3),Fg(`click`,function(){cu$2(e$19);return lu$1(BC().close());}),Jc$1(),Kc$3(3,`div`,4),hg(4,null,0),Jc$1()(),Si$1();}if(t$21&2){let e$19=i$27.$implicit;vv(),qg(`display`,e$19.modalOptions?``:`none`)(`--max-width`,e$19.modalOptions==null?null:e$19.modalOptions.maxWidth)(`--max-height`,e$19.modalOptions==null?null:e$19.modalOptions.maxHeight);}}function MQ(t$21){return I$24(this,null,function*(){let i$27=q$9(t$21);i$27!==o$29.toLowerCase()&&i$27!==L$12.toLowerCase()?yield wle(`../../../../../node_modules/moment/locale/${i$27}.js`).then(()=>{XA.default.locale(i$27);}):XA.default.locale(i$27);});}function Ob(t$21){return Math.round(t$21*10)/10;}function ZA(t$21,i$27){return Ob(t$21)<=Ob(i$27)+.1;}function RQ(t$21,i$27,e$19,r$34,o$32=2,s$25=[]){let n$46=t$21.filter(P$20=>P$20.width>0),a$30={},c$37=e$19,m$32=0,l$26=0,g$19=!1,f$33=P$20=>{a$30[P$20.id]=!0,l$26>0&&(m$32+=o$32),m$32+=P$20.width,l$26++,P$20.id===i$27&&(g$19=!0);},h$15=[];for(let P$20 of n$46)s$25.includes(P$20.id)&&h$15.push(P$20);let I$25=!1;if(h$15.length>0){let P$20=0,B$22=0;for(let v$22 of h$15)B$22>0&&(P$20+=o$32),P$20+=v$22.width,B$22++;let G$16=n$46.filter(v$22=>!s$25.includes(v$22.id));for(let v$22 of G$16)B$22>0&&(P$20+=o$32),P$20+=v$22.width,B$22++;I$25=!ZA(P$20,e$19);}else{let P$20=0,B$22=0;for(let G$16 of n$46){let x$28=P$20+(B$22>0?o$32:0)+G$16.width;if(ZA(x$28,e$19))P$20=x$28,B$22++;else{I$25=!0;break;}}}c$37=I$25?e$19-r$34:e$19;let A$22=0,R$21=0;for(let P$20 of h$15)R$21>0&&(A$22+=o$32),A$22+=P$20.width,R$21++;let w$26=c$37-A$22,E$16=!1;for(let P$20 of n$46){if(E$16&&!s$25.includes(P$20.id)){a$30[P$20.id]=!1;continue;}if(s$25.includes(P$20.id))f$33(P$20);else{let G$16=(l$26>0?o$32:0)+P$20.width;ZA(G$16,w$26)?(f$33(P$20),w$26-=G$16):(a$30[P$20.id]=!1,E$16=!0);}}return{visibilityMap:a$30,hiddenItemsCount:n$46.length-l$26,activeItemVisible:g$19};}function FQ(t$21){return t$21?.nativeElement?Ob(n$6(t$21.nativeElement)):0;}function xQ(t$21,i$27,e$19){let r$34={};return t$21.forEach((o$32,s$25)=>{let n$46=i$27[s$25];if(!n$46||!o$32?.nativeElement)return;let a$30=o$32.nativeElement,c$37=a$30.style.display===`none`,m$32=e$19[n$46.id],l$26;c$37&&m$32>0?l$26=m$32:l$26=Ob(n$6(a$30)),l$26>0&&(r$34[n$46.id]=l$26);}),r$34;}function PQ(){return hD(()=>{C$23(OQ).init();});}function jQ(t$21){return function(e$19,r$34){return $le([...Ple(e$19,r$34),r$34],t$21);};}function Ple(t$21,i$27){return t$21.filter(e$19=>e$19.id!==i$27.id);}function $le(t$21,i$27){return t$21.length>i$27?t$21.slice(t$21.length-i$27,t$21.length):t$21;}function LQ(t$21,i$27){let e$19=new URL(t$21,i$27);return{routerLink:e$19.pathname,queryParams:jle(e$19.searchParams)};}function jle(t$21){let i$27={};for(let[e$19,r$34]of t$21.entries())i$27[e$19]=r$34;return i$27;}function DQ(t$21){return t$21.slice(1);}function NQ(t$21,i$27){return t$21.slice(0,i$27);}function WQ(t$21){let i$27=`question`;if(!t$21)return i$27;return Lle[t$21]||(a$26.includes(t$21)?t$21:i$27);}function HQ(t$21){if(t$21.hierarchyEntityType===`project`)return`space`;return WQ(t$21.viewType??t$21.locationType);}function Nle(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`div`)(1,`button`,5)(2,`a`,6),Fg(`click`,function(){let o$32=cu$2(e$19).$implicit;return lu$1(BC(2).onClickHistoryItem(o$32.routerLink));}),fg$1(3,`cu3-icon`,7),YT(4,`cuGetIconFromLocationOrViewType`),Kc$3(5,`span`,8),NT(6),Jc$1()()()();}if(t$21&2){let e$19=i$27.$implicit;vv(),og(`data-test`,AT(`apps-menu-items__item-`,e$19.title)),vv(),dg(`routerLink`,e$19.routerLink)(`queryParams`,e$19.queryParams),vv(),dg(`name`,JT(4,6,e$19)),vv(3),ol(` `,e$19.title,` `);}}function Ble(t$21,i$27){if(t$21&1&&(Kc$3(0,`div`),Bp(1,Nle,7,8,`div`,4),Jc$1()),t$21&2){let e$19=BC();vv(),dg(`ngForOf`,e$19.history)(`ngForTrackBy`,e$19.itemId);}}function Vle(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-navigation-controls-arrows`,2),Fg(`navForward`,function(){cu$2(e$19);return lu$1(BC().navForward.emit());})(`navBackward`,function(){cu$2(e$19);return lu$1(BC().navBackward.emit());}),Jc$1();}if(t$21&2)dg(`isLayoutV4`,BC().isLayoutV4);}function Ule(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-navigation-controls-view`,1),YT(1,`async`),Fg(`navBackward`,function(){cu$2(e$19);return lu$1(BC().router.goBack());})(`navForward`,function(){cu$2(e$19);return lu$1(BC().router.goForward());})(`openMenu`,function(){cu$2(e$19);return lu$1(BC().onOpenMenu());})(`clickHistoryItem`,function(o$32){cu$2(e$19);return lu$1(BC().onClickHistoryItem(o$32));}),Jc$1();}if(t$21&2){let e$19=BC();dg(`history`,JT(1,2,e$19.history$))(`isLayoutV4`,e$19.isLayoutV4);}}function zle(t$21,i$27){if(t$21&1&&fg$1(0,`div`,3),t$21&2)dg(`Component`,BC().Icon);}function Kle(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`button`,11),Fg(`cuPress`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).togglePin(o$32));}),fg$1(1,`cu3-icon`,12),Jc$1();}if(t$21&2){let e$19=BC().$implicit;dg(`disabled`,e$19.required)(`ngClass`,BT(3,qle,e$19.pinned||e$19.required)),vv(),dg(`name`,e$19.pinned||e$19.required?`pinned`:`pin`);}}function Qle(t$21,i$27){if(t$21&1&&fg$1(0,`cu3-icon`,12),t$21&2){let e$19=BC().$implicit;qg(`color`,e$19.iconColor),dg(`name`,e$19.icon);}}function Jle(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`div`,8),Bp(1,Kle,2,5,`button`,9),Kc$3(2,`button`,3),Fg(`cuPress`,function(){let o$32=cu$2(e$19).$implicit;return lu$1(BC(2).clickApp(o$32));}),Kc$3(3,`span`,4),Bp(4,Qle,1,3,`cu3-icon`,10),Jc$1(),Kc$3(5,`span`,6),NT(6),Jc$1()()();}if(t$21&2){let e$19=i$27.$implicit;Gg(`soon`,e$19.soon),og(`data-test`,AT(`apps-menu-item-`,e$19.title)),dg(`cuTooltip`,e$19.tooltipInDropdownMenu),vv(),dg(`ngIf`,!e$19.alwaysVisible),vv(),og(`data-test`,AT(`apps-menu-items__item-`,e$19.title)),vv(2),dg(`ngIf`,e$19.icon),vv(2),oh(e$19.title);}}function Yle(t$21,i$27){if(t$21&1){let e$19=YD();tl(0),Kc$3(1,`div`,2)(2,`button`,3),Fg(`cuPress`,function(){cu$2(e$19);return lu$1(BC().openProfile());}),Kc$3(3,`span`,4),fg$1(4,`cu-avatar`,5),Jc$1(),Kc$3(5,`span`,6),FC(6,0),Jc$1()(),Bp(7,Jle,7,10,`div`,7),Jc$1(),Si$1();}if(t$21&2){let e$19=i$27.$implicit,r$34=BC();vv(4),dg(`user`,e$19.user)(`showGuestTooltip`,!1)(`showGuestDot`,!1)(`displayProfileCard`,!1)(`modifier`,`cu-avatar_20`),vv(3),dg(`ngForOf`,e$19.apps)(`ngForTrackBy`,r$34.trackById);}}function ede(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`div`,4)(1,`cu-apps-menu-items`,5),Fg(`appOpened`,function(){cu$2(e$19);return lu$1(BC().closeMenu());}),Jc$1()();}}function tde(t$21,i$27){if(t$21&1&&(tl(0),Kc$3(1,`a`,1),fg$1(2,`img`,2),Jc$1(),Si$1()),t$21&2){let e$19=i$27.$implicit,r$34=BC();vv(),dg(`routerLink`,e$19.homePath),vv(),dg(`src`,r$34.clickupSymbolColorImage,hf);}}function ode(t$21,i$27){if(t$21&1){let e$19=YD();tl(0),Kc$3(1,`button`,1),Fg(`cuPress`,function(){cu$2(e$19);return lu$1(BC().goBack());}),fg$1(2,`cu3-icon`,2),Jc$1(),Kc$3(3,`button`,3),Fg(`cuPress`,function(){cu$2(e$19);return lu$1(BC().goForward());}),fg$1(4,`cu3-icon`,4),Jc$1(),Si$1();}if(t$21&2){let e$19=i$27.$implicit,r$34=BC();vv(),dg(`size`,r$34.isLayoutV4?`small`:r$34.isLayoutV39?`compact`:`medium`)(`variant`,r$34.isLayoutV39?`default`:`onColor`)(`colorMode`,r$34.isLayoutV39?`legacy`:`dark`)(`disabled`,!e$19.canGoBack)(`tooltipHotkey`,HT(10,rde)),vv(2),dg(`size`,r$34.isLayoutV4?`small`:r$34.isLayoutV39?`compact`:`medium`)(`variant`,r$34.isLayoutV39?`default`:`onColor`)(`colorMode`,r$34.isLayoutV39?`legacy`:`dark`)(`disabled`,!e$19.canGoForward)(`tooltipHotkey`,HT(11,ide));}}function dde(t$21,i$27){if(t$21&1&&NT(0),t$21&2)ol(` `,BC(2).dropdownTitle(),` `);}function pde(t$21,i$27){if(t$21&1&&(Kc$3(0,`button`,1),qC(1,1,null,dde,1,1),fg$1(3,`cu3-icon`,2),Jc$1()),t$21&2){BC();let e$19=XC(3);dg(`size`,`compact`)(`buttonType`,`secondary`)(`cu3MenuTriggerFor`,e$19)(`menuPosition`,BT(5,mde,HT(4,cde)));}}function ude(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu3-menu-item`,5),Fg(`click`,function(){let o$32=cu$2(e$19).$implicit;return lu$1(BC(2).selectHiddenItem(o$32));}),NT(1),Jc$1();}if(t$21&2){let e$19=i$27.$implicit;dg(`iconName`,e$19.icon),vv(),ol(` `,e$19.title,` `);}}function fde(t$21,i$27){if(t$21&1&&(Kc$3(0,`cu3-menu`,3),qD(1,ude,2,2,`cu3-menu-item`,4,lde),Jc$1()),t$21&2){let e$19=BC();vv(),GD(e$19.hiddenItems());}}function yde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`div`)(1,`cu-recording-setup`,3),Fg(`closeDialog`,function(){cu$2(e$19);return lu$1(BC().close());}),Jc$1()();}if(t$21&2)gT(BC().dropdownClass);}function Sde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-clip-controls`,2),ko$2(`cu-animations__loading-enter`),Fg(`animationend`,function(){cu$2(e$19);return lu$1(BC().onLoadingAnimationDone());}),Jc$1();}if(t$21&2){let e$19=BC();dg(`onGAB`,!0)(`isLayoutV39`,e$19.isLayoutV39)(`isLayoutV4`,e$19.isLayoutV4);}}function bde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`button`,6),Fg(`cuPress`,function(){cu$2(e$19);return lu$1(BC(2).clickItem.emit());}),fg$1(1,`cu3-icon`,7),Jc$1();}if(t$21&2){let e$19=BC(2);gT(AT(`app-`,e$19.item.id,` record-button`)),Gg(`active`,e$19.item.active),dg(`size`,`small`)(`cuTooltip`,e$19.item.tooltipInActionBar)(`tooltipHotkey`,e$19.item.tooltipHotkeyInActionBar??null),og(`aria-label`,e$19.item.tooltipInActionBar),vv(),dg(`name`,e$19.item.icon);}}function Cde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`button`,8),Fg(`cuPress`,function(){cu$2(e$19);return lu$1(BC(2).clickItem.emit());}),fg$1(1,`cu3-icon`,7),Jc$1();}if(t$21&2){let e$19=BC(2);gT(AT(`app-`,e$19.item.id,` record-button`)),Gg(`active`,e$19.item.active),dg(`size`,e$19.isLayoutV39?`compact`:`medium`)(`variant`,e$19.isLayoutV39?`default`:`onColor`)(`colorMode`,e$19.isLayoutV39?`legacy`:`dark`)(`cuTooltip`,e$19.item.tooltipInActionBar)(`tooltipHotkey`,e$19.item.tooltipHotkeyInActionBar??null),og(`aria-label`,e$19.item.tooltipInActionBar),vv(),dg(`name`,e$19.item.icon);}}function _de(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-recording-setup-dropdown`,3),YT(1,`async`),Fg(`dropdownClose`,function(){cu$2(e$19);return lu$1(BC().recorderClosed());})(`mouseenter`,function(){cu$2(e$19);return lu$1(BC().refreshStorageUsage());}),HD(2,bde,2,10,`button`,4)(3,Cde,2,12,`button`,5),Jc$1();}if(t$21&2){let e$19=BC();dg(`cuDropdownOpenedClass`,`clip-button-dropdown_opened`)(`autoOpen`,JT(1,4,e$19.autoOpen$))(`isLayoutV4`,e$19.isLayoutV4),vv(2),BD(e$19.isLayoutV4?2:3);}}function Tde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`div`,2)(1,`button`,3),Fg(`cuPress`,function(){cu$2(e$19);return lu$1(BC(2).clickItem.emit());}),Kc$3(2,`span`,4),NT(3),YT(4,`timeTrackerDuration`),Jc$1()(),Kc$3(5,`cu-time-tracker-timer-toggle-v3`,5),Fg(`timerStarted`,function(){cu$2(e$19);return lu$1(BC(2).toggleTimer());})(`timerStopped`,function(){cu$2(e$19);return lu$1(BC(2).toggleTimer());}),Jc$1()();}if(t$21&2){let e$19=BC().$implicit,r$34=BC();vv(),dg(`size`,r$34.isLayoutV39||r$34.isLayoutV4?`compact`:`medium`)(`variant`,r$34.isLayoutV39?`default`:`onColor`)(`colorMode`,r$34.isLayoutV39?`legacy`:`dark`),vv(),dg(`tooltipDisabled`,e$19.isTimeTrackerOpen),vv(),ol(` `,e$19.duration?XT(4,6,e$19.duration,!0):`0:00:00`,` `),vv(2),dg(`isTimerRunning`,!!e$19.duration);}}function Ide(t$21,i$27){if(t$21&1&&(tl(0),Bp(1,Tde,6,9,`div`,1),Si$1()),t$21&2){let e$19=i$27.$implicit,r$34=BC();vv(),dg(`ngIf`,e$19.timeTrackingActive)(`ngIfElse`,r$34.defaultButtonTemplate);}}function Ede(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-time-tracking-button`,9),Fg(`clickItem`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));})(`triggered`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));})(`sizeChanged`,function(){cu$2(e$19),BC(2);let o$32=XC(1);return lu$1(BC().onTimeTrackingSizeChanged(o$32));}),Jc$1();}if(t$21&2){let e$19=BC().$implicit,r$34=XC(5),o$32=BC(2);dg(`id`,e$19.id)(`title`,e$19.tooltipInActionBar)(`tooltip`,e$19.tooltipInActionBar)(`icon`,e$19.icon)(`item`,e$19)(`defaultButtonTemplate`,r$34)(`isLayoutV39`,o$32.isLayoutV39)(`isLayoutV4`,o$32.isLayoutV4);}}function Ade(t$21,i$27){t$21&1&&fg$1(0,`span`,7);}function wde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-clip-button`,10),Fg(`clickItem`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));})(`triggered`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));})(`toggleActive`,function(o$32){cu$2(e$19),BC(2);let s$25=XC(1);return lu$1(BC().onClipSizeChanged(o$32,s$25));}),Jc$1();}if(t$21&2){let e$19=BC().$implicit,r$34=XC(5),o$32=BC(2);dg(`id`,e$19.id)(`title`,e$19.tooltipInActionBar)(`tooltip`,e$19.tooltipInActionBar)(`icon`,e$19.icon)(`item`,e$19)(`defaultButtonTemplate`,r$34)(`isLayoutV39`,o$32.isLayoutV39)(`isLayoutV4`,o$32.isLayoutV4);}}function Mde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`button`,11),Fg(`cuPress`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));})(`triggered`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));}),fg$1(1,`cu3-icon`,12),Jc$1();}if(t$21&2){let e$19=BC().$implicit;gT(AT(`button app-`,e$19.id,` cu-pinned-items-no-drag`)),Gg(`selected`,e$19.active),dg(`id`,e$19.id)(`title`,e$19.tooltipInActionBar)(`tooltip`,e$19.tooltipInActionBar)(`icon`,e$19.icon)(`size`,`small`)(`cuTooltip`,e$19.tooltipInActionBar)(`tooltipHotkey`,e$19.tooltipHotkeyInActionBar??null),og(`aria-label`,e$19.tooltipInActionBar),vv(),gT(AT(``,e$19.icon,`-icon`)),dg(`name`,e$19.icon);}}function Rde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`button`,13),Fg(`cuPress`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));}),fg$1(1,`cu3-icon`,12),Jc$1();}if(t$21&2){let e$19=BC().$implicit;gT(AT(`button app-`,e$19.id,` cu-pinned-items-no-drag`)),Gg(`selected`,e$19.active),dg(`size`,`small`)(`cuTooltip`,e$19.tooltipInActionBar)(`tooltipHotkey`,e$19.tooltipHotkeyInActionBar??null),og(`aria-label`,e$19.tooltipInActionBar),vv(),gT(AT(``,e$19.icon,`-icon`)),dg(`name`,e$19.icon);}}function Fde(t$21,i$27){if(t$21&1&&(HD(0,Ede,1,8,`cu-time-tracking-button`,6)(1,Ade,1,0,`span`,7)(2,wde,1,8,`cu-clip-button`,6)(3,Mde,2,17,`button`,8),Bp(4,Rde,2,13,`ng-template`,null,1,rN)),t$21&2){let e$19,r$34=i$27.$implicit;BD((e$19=r$34.id)===`time_tracking`?0:e$19===`calendar`?1:e$19===`clip`?2:3);}}function xde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-overflow-items-container`,null,0)(2,`cu-syncup-global-action-bar`,3),Fg(`sizeChange`,function(o$32){cu$2(e$19);let s$25=XC(1);return lu$1(BC().onSyncUpSizeChange(o$32,s$25));}),Jc$1(),qD(3,Fde,6,1,null,null,oJ),YT(5,`async`),Kc$3(6,`div`,4),fg$1(7,`cu3-icon`,5),Jc$1()();}if(t$21&2){let e$19=BC();vv(2),dg(`isTimerActive`,e$19.isTimerActive)(`isClipActive`,e$19.isClipActive)(`id`,`syncup-global-action-bar`),vv(),GD(JT(5,3,e$19.apps$));}}function Ode(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-time-tracking-button`,16),Fg(`clickItem`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));}),Jc$1();}if(t$21&2){let e$19=BC().$implicit,r$34=XC(5),o$32=BC(2);dg(`item`,e$19)(`defaultButtonTemplate`,r$34)(`isLayoutV39`,o$32.isLayoutV39)(`isLayoutV4`,o$32.isLayoutV4);}}function Pde(t$21,i$27){t$21&1&&fg$1(0,`span`,7);}function $de(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-clip-button`,16),Fg(`clickItem`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));}),Jc$1();}if(t$21&2){let e$19=BC().$implicit,r$34=XC(5),o$32=BC(2);dg(`item`,e$19)(`defaultButtonTemplate`,r$34)(`isLayoutV39`,o$32.isLayoutV39)(`isLayoutV4`,o$32.isLayoutV4);}}function jde(t$21,i$27){}function Lde(t$21,i$27){if(t$21&1&&Bp(0,jde,0,0,`ng-template`,15),t$21&2){BC();dg(`ngTemplateOutlet`,XC(5));}}function Dde(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`button`,17),Fg(`cuPress`,function(){cu$2(e$19);let o$32=BC().$implicit;return lu$1(BC(2).clickApp(o$32));}),fg$1(1,`cu3-icon`,12),Jc$1();}if(t$21&2){let e$19=BC().$implicit,r$34=BC(2);gT(AT(` app-`,e$19.id)),Gg(`selected`,e$19.active),dg(`size`,r$34.isLayoutV39?`compact`:`medium`)(`variant`,r$34.isLayoutV39?`default`:`onColor`)(`colorMode`,r$34.isLayoutV39?`legacy`:`dark`)(`cuTooltip`,e$19.tooltipInActionBar)(`tooltipHotkey`,e$19.tooltipHotkeyInActionBar??null),og(`aria-label`,e$19.tooltipInActionBar),vv(),gT(AT(``,e$19.icon,`-icon`)),dg(`name`,e$19.icon);}}function Nde(t$21,i$27){if(t$21&1&&(HD(0,Ode,1,4,`cu-time-tracking-button`,14)(1,Pde,1,0,`span`,7)(2,$de,1,4,`cu-clip-button`,14)(3,Lde,1,1,null,15),Bp(4,Dde,2,15,`ng-template`,null,2,rN)),t$21&2){let e$19,r$34=i$27.$implicit;BD((e$19=r$34.id)===`time_tracking`?0:e$19===`calendar`?1:e$19===`clip`?2:3);}}function Bde(t$21,i$27){if(t$21&1&&(qD(0,Nde,6,1,null,null,oJ),YT(2,`async`)),t$21&2)GD(JT(2,0,BC().apps$));}function Yde(t$21,i$27){t$21&1&&hg(0);}function Xde(t$21,i$27){if(t$21&1&&(Kc$3(0,`div`,2),Bp(1,Yde,1,0,`ng-container`,3),Jc$1()),t$21&2){BC();let e$19=XC(3);vv(),dg(`ngTemplateOutlet`,e$19);}}function Zde(t$21,i$27){t$21&1&&hg(0);}function epe(t$21,i$27){if(t$21&1&&Bp(0,Zde,1,0,`ng-container`,3),t$21&2){BC();dg(`ngTemplateOutlet`,XC(3));}}function tpe(t$21,i$27){if(t$21&1&&(Kc$3(0,`div`,8),NT(1),YT(2,`async`),Jc$1()),t$21&2){let e$19=BC(3);vv(),oh(JT(2,1,e$19.hotkeyLabel$));}}function rpe(t$21,i$27){t$21&1&&fg$1(0,`div`,9);}function ipe(t$21,i$27){t$21&1&&fg$1(0,`cu3-icon`,11),t$21&2&&dg(`name`,`aiPrimary`);}function ope(t$21,i$27){t$21&1&&fg$1(0,`cu3-icon`,12),t$21&2&&dg(`name`,`aiDefault`);}function spe(t$21,i$27){t$21&1&&fg$1(0,`cu-search-modal-toggle-lottie`,15,1);}function npe(t$21,i$27){t$21&1&&fg$1(0,`i`,16);}function ape(t$21,i$27){if(t$21&1&&(HD(0,spe,2,0,`cu-search-modal-toggle-lottie`,15),YT(1,`async`),Yc$1(2,npe,1,0,`i`,16)),t$21&2)BD(JT(1,1,BC(4).prefersReducedMotion$)===!1?0:2);}function cpe(t$21,i$27){if(t$21&1&&NT(0),t$21&2)ol(` `,BC(4).aiLabel,` `);}function mpe(t$21,i$27){if(t$21&1&&(Kc$3(0,`span`,13),NT(1),Jc$1()),t$21&2){let e$19=BC(4);vv(),ol(` `,e$19.askAiLabel,` `);}}function lpe(t$21,i$27){t$21&1&&fg$1(0,`div`,14);}function dpe(t$21,i$27){if(t$21&1){let e$19=YD();HD(0,rpe,1,0,`div`,9),fh(1),YT(2,`async`),Kc$3(3,`button`,10),Fg(`cuPress`,function(){cu$2(e$19);return lu$1(BC(3).openAi());})(`mouseenter`,function(){cu$2(e$19);return lu$1(BC(3).openAiToggleLottie(!0));})(`mouseleave`,function(){cu$2(e$19);return lu$1(BC(3).openAiToggleLottie(!1));}),HD(4,ipe,1,1,`cu3-icon`,11),HD(5,ope,1,1,`cu3-icon`,12),HD(6,ape,3,3),HD(7,cpe,1,1),HD(8,mpe,2,1,`span`,13),Jc$1(),HD(9,lpe,1,0,`div`,14);}if(t$21&2){let e$19=BC(3);BD(!e$19.isLayoutV39&&!e$19.isLayoutV4?0:-1);let r$34=JT(2,13,e$19.aiWaitingForSidebarReady$)??!0;vv(3),dg(`ngClass`,$T(15,Jde,e$19.isLayoutV39,e$19.isLayoutV4))(`cuTooltip`,e$19.aiShortcutLabel)(`tooltipHotkey`,e$19.aiShortcut)(`tooltipPlacement`,HT(18,pJ))(`tooltipDisabled`,r$34)(`disabled`,r$34),vv(),BD(!e$19.isLayoutV39&&!e$19.isLayoutV4?4:-1),vv(),BD(e$19.isLayoutV4?-1:5),vv(),BD(e$19.isLayoutV4?6:-1),vv(),BD(!e$19.isLayoutV39&&!e$19.isLayoutV4?7:-1),vv(),BD(e$19.isLayoutV4?8:-1),vv(),BD(e$19.isLayoutV4?9:-1);}}function ppe(t$21,i$27){if(t$21&1){let e$19=YD();tl(0),Kc$3(1,`button`,5),YT(2,`async`),Fg(`cuPress`,function(){cu$2(e$19);return lu$1(BC(2).openSearchModal());}),fg$1(3,`cu3-icon`,6),Kc$3(4,`span`,7),NT(5),Jc$1(),HD(6,tpe,3,3,`div`,8),Jc$1(),HD(7,dpe,10,19),YT(8,`async`),Si$1();}if(t$21&2){let e$19=i$27.$implicit,r$34=BC(2);vv(),dg(`ngClass`,qT(12,Qde,e$19&&!r$34.isLayoutV4,e$19&&r$34.isLayoutV4,r$34.isLayoutV39,r$34.isLayoutV4))(`cuTooltip`,r$34.tooltip)(`tooltipHotkey`,JT(2,8,r$34.hotkey$))(`tooltipPlacement`,HT(17,pJ)),vv(2),dg(`name`,r$34.isLayoutV4?`popSearch`:`search`),vv(2),oh(r$34.searchText),vv(),BD(r$34.isLayoutV4?6:-1),vv(),BD(e$19&&JT(8,10,r$34.isAiFullPageActive$)===!1?7:-1);}}function upe(t$21,i$27){if(t$21&1&&Bp(0,ppe,9,18,`ng-container`,4),t$21&2)dg(`rxLet`,BC().showAiButton$)(`rxLetStrategy`,`native`);}function gpe(t$21,i$27){if(t$21&1&&(fg$1(0,`cu-online-avatar`,0),YT(1,`cuUserAvatar`)),t$21&2){let e$19=BC();dg(`avatar`,JT(1,3,i$27))(`size`,e$19.isLayoutV4ia()?24:e$19.isLayoutV4()?28:20)(`online`,!0);}}function Spe(t$21,i$27){t$21&1&&fg$1(0,`cu-workspace-picker`);}function bpe(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`button`,1),Fg(`menuOpened`,function(){cu$2(e$19);return lu$1(BC().pickerMenuOpen());}),fg$1(1,`cu3-avatar`,2),YT(2,`cuWorkspaceAvatar`),Kc$3(3,`span`,3),NT(4),Jc$1(),fg$1(5,`cu3-icon`,4),Jc$1(),Bp(6,Spe,1,0,`ng-template`,null,0,rN);}if(t$21&2){let e$19=i$27;dg(`cu3MenuTriggerFor`,XC(7))(`menuPosition`,BT(9,vpe,HT(8,ype))),vv(),dg(`avatar`,JT(2,6,e$19))(`size`,18),vv(3),oh(e$19.name),vv(),dg(`name`,`chevronDown`);}}function SJ$1(t$21,i$27){if(!t$21||!i$27)return;let e$19=s$23(),r$34=t$21.color||t$21.avatar?.color,o$32=i$27.color,s$25={userAvatar:{url:t$21.profilePicture,initials:t$21.initials,backgroundColor:r$34,textColor:yJ$1(r$34)},teamAvatar:{url:i$27.avatar,initials:Tpe(i$27.name),backgroundColor:o$32,textColor:yJ$1(o$32)},teamName:i$27.name};e$19.set(kpe,s$25);}function Tpe(t$21){return!t$21||t$21.length===0?``:t$21.charAt(0).toUpperCase();}function yJ$1(t$21){return t$21?(0,vJ.default)(t$21).isDark()?`#ffffff`:`#000000`:`#ffffff`;}function bJ(t$21){return I$24(this,null,function*(){return Xc(Ipe,t$21,Epe);});}function Epe(t$21){let i$27=t$21.icon||t$21.id;return{id:t$21.id,icon:Qc(i$27)??``,title:t$21.title};}function Mpe(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-brand-logo`,14),ko$2(`cu-animations__loading-enter`),Fg(`cuPress`,function(){cu$2(e$19);return lu$1(BC(2).clickedOnHomeLogo());}),Jc$1();}if(t$21&2)dg(`isLayoutV39`,BC().isLayoutV39);}function Rpe(t$21,i$27){t$21&1&&fg$1(0,`cu-workspace-picker-toggle`);}function Fpe(t$21,i$27){if(t$21&1&&fg$1(0,`cu-calendar-global-action-bar`,8),t$21&2)dg(`isLayoutV4`,BC().isLayoutV4);}function xpe(t$21,i$27){}function Ope(t$21,i$27){if(t$21&1&&Bp(0,xpe,0,0,`ng-template`,6),t$21&2){BC();dg(`ngTemplateOutlet`,XC(27));}}function Ppe(t$21,i$27){t$21&1&&fg$1(0,`cu-who-am-i-bug`);}function $pe(t$21,i$27){t$21&1&&fg$1(0,`div`,7);}function jpe(t$21,i$27){}function Lpe(t$21,i$27){if(t$21&1&&Bp(0,jpe,0,0,`ng-template`,6),t$21&2){BC();dg(`ngTemplateOutlet`,XC(27));}}function Dpe(t$21,i$27){if(t$21&1&&fg$1(0,`cu-quick-create-modal-toggle`,10),t$21&2)dg(`isLayoutV39`,BC().isLayoutV39);}function Npe(t$21,i$27){t$21&1&&fg$1(0,`cu-upgrade-toggle`);}function Bpe(t$21,i$27){t$21&1&&fg$1(0,`cu-quick-create-modal-toggle`);}function Vpe(t$21,i$27){t$21&1&&fg$1(0,`div`,12);}function Upe(t$21,i$27){if(t$21&1&&(Kc$3(0,`cu-overflow-items`,13),fg$1(1,`cu-pinned-items`,15),Jc$1()),t$21&2){let e$19=BC();vv(),dg(`isLayoutV39`,e$19.isLayoutV39)(`isLayoutV4`,e$19.isLayoutV4);}}function Wpe(t$21,i$27){if(t$21&1&&fg$1(0,`cu-syncup-global-action-bar`)(1,`cu-pinned-items`,16)(2,`cu-apps-menu`,10),t$21&2){let e$19=BC();vv(),dg(`isLayoutV39`,e$19.isLayoutV39)(`isLayoutV4`,e$19.isLayoutV4),vv(),dg(`isLayoutV39`,e$19.isLayoutV39);}}function Hpe(t$21,i$27){if(t$21&1&&fg$1(0,`cu-user-main-settings-menu`,17),t$21&2){let e$19=BC();dg(`isLayoutV39`,e$19.isLayoutV39)(`isLayoutV4`,e$19.isLayoutV4)(`isLayoutV4ia`,e$19.isLayoutV4ia);}}function Gpe(t$21,i$27){if(t$21&1&&fg$1(0,`cu-user-main-settings-placeholder`,17),t$21&2){let e$19=BC();dg(`isLayoutV39`,e$19.isLayoutV39)(`isLayoutV4`,e$19.isLayoutV4)(`isLayoutV4ia`,e$19.isLayoutV4ia);}}function zpe(t$21,i$27){if(t$21&1&&fg$1(0,`cu-desktop-navigation`,16),t$21&2){let e$19=BC();dg(`isLayoutV39`,e$19.isLayoutV39)(`isLayoutV4`,e$19.isLayoutV4);}}function qpe(t$21,i$27){if(t$21&1&&(Kc$3(0,`div`,2)(1,`div`,3)(2,`div`,4),HD(3,Mpe,1,1,`cu-brand-logo`,5),HD(4,Rpe,1,0,`cu-workspace-picker-toggle`),$p(5,Fpe,1,1),DD(6,5,Ape),YT(8,`async`),HD(9,Ope,1,1,null,6),HD(10,Ppe,1,0,`cu-who-am-i-bug`),HD(11,$pe,1,0,`div`,7),HD(12,Lpe,1,1,null,6),fg$1(13,`cu-navigation-controls`,8),Jc$1(),fg$1(14,`cu-search-modal-toggle`,9),HD(15,Dpe,1,1,`cu-quick-create-modal-toggle`,10),Kc$3(16,`div`,11),HD(17,Npe,1,0,`cu-upgrade-toggle`),HD(18,Bpe,1,0,`cu-quick-create-modal-toggle`),HD(19,Vpe,1,0,`div`,12),HD(20,Upe,2,2,`cu-overflow-items`,13)(21,Wpe,3,3),$p(22,Hpe,1,3)(23,Gpe,1,3),DD(24,22,wpe,null,23),MD(),Jc$1()(),Bp(26,zpe,1,2,`ng-template`,null,0,rN),Jc$1()),t$21&2){let e$19=i$27,r$34=BC();Gg(`sidebar-collapsed`,e$19.isSidebarCollapsed)(`v3_9`,e$19.isLayoutV39)(`v4`,e$19.isLayoutV4)(`v4_ia`,e$19.isLayoutV4ia),vv(3),BD(e$19.showLogo&&!e$19.isLayoutV4?3:-1),vv(),BD(e$19.isLayoutV4?4:-1),vv(2),CD(JT(8,24,r$34.idle$)),vv(3),BD(e$19.showDesktopNavigation&&!e$19.isLayoutV4?9:-1),vv(),BD(e$19.showWhoAmI?10:-1),vv(),BD(e$19.isLayoutV4?-1:11),vv(),BD(e$19.showDesktopNavigation&&e$19.isLayoutV4?12:-1),vv(),dg(`isLayoutV4`,e$19.isLayoutV4),vv(),dg(`cuPendoId`,`search-button`)(`isLayoutV39`,e$19.isLayoutV39)(`isLayoutV4`,e$19.isLayoutV4),vv(),BD(e$19.isLayoutV39&&!e$19.isLayoutV4?15:-1),vv(2),BD(e$19.showUpgradeButton&&!e$19.isLayoutV4?17:-1),vv(),BD(e$19.isLayoutV39?-1:18),vv(),BD(e$19.isLayoutV39?-1:19),vv(),BD(e$19.isLayoutV4?20:21);}}function Gb(t$21){return`${t$21.id}-${t$21.ovmType}`;}function _o$1(t$21,i$27){return typeof i$27!=`object`||vi$1(i$27).forEach(function(e$19){t$21[e$19]=i$27[e$19];}),t$21;}function Xo$3(t$21,i$27){return Kpe.call(t$21,i$27);}function $p$1(t$21,i$27){typeof i$27==`function`&&(i$27=i$27(jf(t$21))),(typeof Reflect>`u`?vi$1:Reflect.ownKeys)(i$27).forEach(e$19=>{$a$2(t$21,e$19,i$27[e$19]);});}function $a$2(t$21,i$27,e$19,r$34){OJ$1(t$21,i$27,_o$1(e$19&&Xo$3(e$19,`get`)&&typeof e$19.get==`function`?{get:e$19.get,set:e$19.set,configurable:!0}:{value:e$19,configurable:!0,writable:!0},r$34));}function xp(t$21){return{from:function(i$27){return t$21.prototype=Object.create(i$27.prototype),$a$2(t$21.prototype,`constructor`,t$21),{extend:$p$1.bind(null,t$21.prototype)};}};}function L0$1(t$21,i$27){let e$19;return Qpe(t$21,i$27)||(e$19=jf(t$21))&&L0$1(e$19,i$27);}function nC(t$21,i$27,e$19){return Jpe.call(t$21,i$27,e$19);}function PJ(t$21,i$27){return i$27(t$21);}function Mf(t$21){if(!t$21)throw new Error(`Assertion Failed`);}function $J(t$21){Cr$4.setImmediate?setImmediate(t$21):setTimeout(t$21,0);}function jJ(t$21,i$27){return t$21.reduce((e$19,r$34,o$32)=>{var s$25=i$27(r$34,o$32);return s$25&&(e$19[s$25[0]]=s$25[1]),e$19;},{});}function ja(t$21,i$27){if(Xo$3(t$21,i$27))return t$21[i$27];if(!i$27)return t$21;if(typeof i$27!=`string`){for(var e$19=[],r$34=0,o$32=i$27.length;r$34<o$32;++r$34){var s$25=ja(t$21,i$27[r$34]);e$19.push(s$25);}return e$19;}var n$46=i$27.indexOf(`.`);if(n$46!==-1){var a$30=t$21[i$27.substr(0,n$46)];return a$30===void 0?void 0:ja(a$30,i$27.substr(n$46+1));}}function pn(t$21,i$27,e$19){if(t$21&&i$27!==void 0&&(!(`isFrozen`in Object)||!Object.isFrozen(t$21)))if(typeof i$27!=`string`&&`length`in i$27){Mf(typeof e$19!=`string`&&`length`in e$19);for(var r$34=0,o$32=i$27.length;r$34<o$32;++r$34)pn(t$21,i$27[r$34],e$19[r$34]);}else{var s$25=i$27.indexOf(`.`);if(s$25!==-1){var n$46=i$27.substr(0,s$25),a$30=i$27.substr(s$25+1);if(a$30===``)e$19===void 0?oo$3(t$21)&&!isNaN(parseInt(n$46))?t$21.splice(n$46,1):delete t$21[n$46]:t$21[n$46]=e$19;else{var c$37=t$21[n$46];c$37&&Xo$3(t$21,n$46)||(c$37=t$21[n$46]={}),pn(c$37,a$30,e$19);}}else e$19===void 0?oo$3(t$21)&&!isNaN(parseInt(i$27))?t$21.splice(i$27,1):delete t$21[i$27]:t$21[i$27]=e$19;}}function LJ(t$21){var i$27={};for(var e$19 in t$21)Xo$3(t$21,e$19)&&(i$27[e$19]=t$21[e$19]);return i$27;}function DJ(t$21){return Ype.apply([],t$21);}function Uf(t$21){Hc=typeof WeakMap<`u`&&new WeakMap();let i$27=c0(t$21);return Hc=null,i$27;}function c0(t$21){if(!t$21||typeof t$21!=`object`)return t$21;let i$27=Hc&&Hc.get(t$21);if(i$27)return i$27;if(oo$3(t$21)){i$27=[],Hc&&Hc.set(t$21,i$27);for(var e$19=0,r$34=t$21.length;e$19<r$34;++e$19)i$27.push(c0(t$21[e$19]));}else if(Xpe.indexOf(t$21.constructor)>=0)i$27=t$21;else{let s$25=jf(t$21);for(var o$32 in i$27=s$25===Object.prototype?{}:Object.create(s$25),Hc&&Hc.set(t$21,i$27),t$21)Xo$3(t$21,o$32)&&(i$27[o$32]=c0(t$21[o$32]));}return i$27;}function m0(t$21){return Zpe.call(t$21).slice(8,-1);}function Oa(t$21){var i$27,e$19,r$34,o$32;if(arguments.length===1){if(oo$3(t$21))return t$21.slice();if(this===Fp&&typeof t$21==`string`)return[t$21];if(o$32=eue(t$21)){for(e$19=[];!(r$34=o$32.next()).done;)e$19.push(r$34.value);return e$19;}if(t$21==null)return[t$21];if(typeof(i$27=t$21.length)==`number`){for(e$19=new Array(i$27);i$27--;)e$19[i$27]=t$21[i$27];return e$19;}return[t$21];}for(i$27=arguments.length,e$19=new Array(i$27);i$27--;)e$19[i$27]=arguments[i$27];return e$19;}function BJ$1(t$21,i$27){ta$2=t$21,VJ=i$27;}function yl(){if(tue)try{throw yl.arguments,new Error();}catch(t$21){return t$21;}return new Error();}function d0(t$21,i$27){var e$19=t$21.stack;return e$19?(i$27=i$27||0,e$19.indexOf(t$21.name)===0&&(i$27+=(t$21.name+t$21.message).split(`
`).length),e$19.split(`
`).slice(i$27).filter(VJ).map(r$34=>`
`+r$34).join(``)):``;}function Op(t$21,i$27){this._e=yl(),this.name=t$21,this.message=i$27;}function WJ(t$21,i$27){return t$21+`. Errors: `+Object.keys(i$27).map(e$19=>i$27[e$19].toString()).filter((e$19,r$34,o$32)=>o$32.indexOf(e$19)===r$34).join(`
`);}function aC(t$21,i$27,e$19,r$34){this._e=yl(),this.failures=i$27,this.failedKeys=r$34,this.successCount=e$19,this.message=WJ(t$21,i$27);}function Ff(t$21,i$27){this._e=yl(),this.name=`BulkError`,this.failures=Object.keys(i$27).map(e$19=>i$27[e$19]),this.failuresByPos=i$27,this.message=WJ(t$21,i$27);}function mr$4(){}function Lf(t$21){return t$21;}function oue(t$21,i$27){return t$21==null||t$21===Lf?i$27:function(e$19){return i$27(t$21(e$19));};}function hl$1(t$21,i$27){return function(){t$21.apply(this,arguments),i$27.apply(this,arguments);};}function sue(t$21,i$27){return t$21===mr$4?i$27:function(){var e$19=t$21.apply(this,arguments);e$19!==void 0&&(arguments[0]=e$19);var r$34=this.onsuccess,o$32=this.onerror;this.onsuccess=null,this.onerror=null;var s$25=i$27.apply(this,arguments);return r$34&&(this.onsuccess=this.onsuccess?hl$1(r$34,this.onsuccess):r$34),o$32&&(this.onerror=this.onerror?hl$1(o$32,this.onerror):o$32),s$25!==void 0?s$25:e$19;};}function nue(t$21,i$27){return t$21===mr$4?i$27:function(){t$21.apply(this,arguments);var e$19=this.onsuccess,r$34=this.onerror;this.onsuccess=this.onerror=null,i$27.apply(this,arguments),e$19&&(this.onsuccess=this.onsuccess?hl$1(e$19,this.onsuccess):e$19),r$34&&(this.onerror=this.onerror?hl$1(r$34,this.onerror):r$34);};}function aue(t$21,i$27){return t$21===mr$4?i$27:function(e$19){var r$34=t$21.apply(this,arguments);_o$1(e$19,r$34);var o$32=this.onsuccess,s$25=this.onerror;this.onsuccess=null,this.onerror=null;var n$46=i$27.apply(this,arguments);return o$32&&(this.onsuccess=this.onsuccess?hl$1(o$32,this.onsuccess):o$32),s$25&&(this.onerror=this.onerror?hl$1(s$25,this.onerror):s$25),r$34===void 0?n$46===void 0?void 0:n$46:_o$1(r$34,n$46);};}function cue(t$21,i$27){return t$21===mr$4?i$27:function(){return i$27.apply(this,arguments)!==!1&&t$21.apply(this,arguments);};}function V0(t$21,i$27){return t$21===mr$4?i$27:function(){var e$19=t$21.apply(this,arguments);if(e$19&&typeof e$19.then==`function`){for(var r$34=this,o$32=arguments.length,s$25=new Array(o$32);o$32--;)s$25[o$32]=arguments[o$32];return e$19.then(function(){return i$27.apply(r$34,s$25);});}return i$27.apply(this,arguments);};}function Be$9(t$21){if(typeof this!=`object`)throw new TypeError(`Promises must be constructed via new`);this._listeners=[],this.onuncatched=mr$4,this._lib=!1;var i$27=this._PSD=rt$5;if(ta$2&&(this._stackHolder=yl(),this._prev=null,this._numPrev=0),typeof t$21!=`function`){if(t$21!==Df)throw new TypeError(`Not a function`);this._state=arguments[1],this._value=arguments[2],this._state===!1&&S0(this,this._value);return;}this._state=null,this._value=null,++i$27.ref,zJ$1(this,t$21);}function GJ(t$21,i$27,e$19,r$34,o$32){this.onFulfilled=typeof t$21==`function`?t$21:null,this.onRejected=typeof i$27==`function`?i$27:null,this.resolve=e$19,this.reject=r$34,this.psd=o$32;}function zJ$1(t$21,i$27){try{i$27(e$19=>{if(t$21._state===null){if(e$19===t$21)throw new TypeError(`A promise cannot be resolved with itself.`);var r$34=t$21._lib&&Wf();e$19&&typeof e$19.then==`function`?zJ$1(t$21,(o$32,s$25)=>{e$19 instanceof Be$9?e$19._then(o$32,s$25):e$19.then(o$32,s$25);}):(t$21._state=!0,t$21._value=e$19,qJ(t$21)),r$34&&Hf();}},S0.bind(null,t$21));}catch(e$19){S0(t$21,e$19);}}function S0(t$21,i$27){if(tC.push(i$27),t$21._state===null){var e$19=t$21._lib&&Wf();i$27=y0(i$27),t$21._state=!1,t$21._value=i$27,ta$2&&i$27!==null&&typeof i$27==`object`&&!i$27._promise&&function(r$34,o$32,s$25){try{r$34.apply(null,s$25);}catch(n$46){o$32&&o$32(n$46);}}(()=>{var r$34=L0$1(i$27,`stack`);i$27._promise=t$21,$a$2(i$27,`stack`,{get:()=>f0?r$34&&(r$34.get?r$34.get.apply(i$27):r$34.value):t$21.stack});}),function(r$34){ul$1.some(o$32=>o$32._value===r$34._value)||ul$1.push(r$34);}(t$21),qJ(t$21),e$19&&Hf();}}function qJ(t$21){var i$27=t$21._listeners;t$21._listeners=[];for(var e$19=0,r$34=i$27.length;e$19<r$34;++e$19)W0(t$21,i$27[e$19]);var o$32=t$21._PSD;--o$32.ref||o$32.finalize(),fl===0&&(++fl,xf$1(()=>{--fl==0&&H0();},[]));}function W0(t$21,i$27){if(t$21._state!==null){var e$19=t$21._state?i$27.onFulfilled:i$27.onRejected;if(e$19===null)return(t$21._state?i$27.resolve:i$27.reject)(t$21._value);++i$27.psd.ref,++fl,xf$1(lue,[e$19,t$21,i$27]);}else t$21._listeners.push(i$27);}function lue(t$21,i$27,e$19){try{g0=i$27;var r$34,o$32=i$27._value;i$27._state?r$34=t$21(o$32):(tC.length&&(tC=[]),r$34=t$21(o$32),tC.indexOf(o$32)===-1&&function(s$25){for(var n$46=ul$1.length;n$46;)if(ul$1[--n$46]._value===s$25._value)return void ul$1.splice(n$46,1);}(i$27)),e$19.resolve(r$34);}catch(s$25){e$19.reject(s$25);}finally{g0=null,--fl==0&&H0(),--e$19.psd.ref||e$19.psd.finalize();}}function KJ$1(t$21,i$27,e$19){if(i$27.length===e$19)return i$27;var r$34=``;if(t$21._state===!1){var o$32,s$25,n$46=t$21._value;n$46!=null?(o$32=n$46.name||`Error`,s$25=n$46.message||n$46,r$34=d0(n$46,0)):(o$32=n$46,s$25=``),i$27.push(o$32+(s$25?`: `+s$25:``)+r$34);}return ta$2&&((r$34=d0(t$21._stackHolder,2))&&i$27.indexOf(r$34)===-1&&i$27.push(r$34),t$21._prev&&KJ$1(t$21._prev,i$27,e$19)),i$27;}function QJ(t$21,i$27){var e$19=i$27?i$27._numPrev+1:0;e$19<100&&(t$21._prev=i$27,t$21._numPrev=e$19);}function zb(){Wf()&&Hf();}function Wf(){var t$21=h0;return h0=!1,mC=!1,t$21;}function Hf(){var t$21,i$27,e$19;do for(;Rf.length>0;)for(t$21=Rf,Rf=[],e$19=t$21.length,i$27=0;i$27<e$19;++i$27){var r$34=t$21[i$27];r$34[0].apply(null,r$34[1]);}while(Rf.length>0);h0=!0,mC=!0;}function H0(){var t$21=ul$1;ul$1=[],t$21.forEach(r$34=>{r$34._PSD.onunhandled.call(null,r$34._value,r$34);});for(var i$27=rC.slice(0),e$19=i$27.length;e$19;)i$27[--e$19]();}function qb(t$21){return new Be$9(Df,!1,t$21);}function xr$1(t$21,i$27){var e$19=rt$5;return function(){var r$34=Wf(),o$32=rt$5;try{return zc$1(e$19,!0),t$21.apply(this,arguments);}catch(s$25){i$27&&i$27(s$25);}finally{zc$1(o$32,!1),r$34&&Hf();}};}function Gc(t$21,i$27,e$19,r$34){var o$32=rt$5,s$25=Object.create(o$32);s$25.parent=o$32,s$25.ref=0,s$25.global=!1,s$25.id=++pue;var n$46=Pp.env;s$25.env=U0?{Promise:Be$9,PromiseProp:{value:Be$9,configurable:!0,writable:!0},all:Be$9.all,race:Be$9.race,allSettled:Be$9.allSettled,any:Be$9.any,resolve:Be$9.resolve,reject:Be$9.reject,nthen:TJ(n$46.nthen,s$25),gthen:TJ(n$46.gthen,s$25)}:{},i$27&&_o$1(s$25,i$27),++o$32.ref,s$25.finalize=function(){--this.parent.ref||this.parent.finalize();};var a$30=Dp(s$25,t$21,e$19,r$34);return s$25.ref===0&&s$25.finalize(),a$30;}function Lp(){return io$2.id||(io$2.id=++due),++io$2.awaits,io$2.echoes+=100,io$2.id;}function La(){return!!io$2.awaits&&(--io$2.awaits==0&&(io$2.id=0),io$2.echoes=100*io$2.awaits,!0);}function Kb(t$21){return io$2.echoes&&t$21&&t$21.constructor===eC?(Lp(),t$21.then(i$27=>(La(),i$27),i$27=>(La(),ki(i$27)))):t$21;}function uue(t$21){++lC,io$2.echoes&&--io$2.echoes!=0||(io$2.echoes=io$2.id=0),iC.push(rt$5),zc$1(t$21,!0);}function fue(){var t$21=iC[iC.length-1];iC.pop(),zc$1(t$21,!1);}function zc$1(t$21,i$27){var e$19=rt$5;if((i$27?!io$2.echoes||i0++&&t$21===rt$5:!i0||--i0&&t$21===rt$5)||YJ(i$27?uue.bind(null,t$21):fue),t$21!==rt$5&&(rt$5=t$21,e$19===Pp&&(Pp.env=JJ()),U0)){var r$34=Pp.env.Promise,o$32=t$21.env;cC.then=o$32.nthen,r$34.prototype.then=o$32.gthen,(e$19.global||t$21.global)&&(Object.defineProperty(Cr$4,`Promise`,o$32.PromiseProp),r$34.all=o$32.all,r$34.race=o$32.race,r$34.resolve=o$32.resolve,r$34.reject=o$32.reject,o$32.allSettled&&(r$34.allSettled=o$32.allSettled),o$32.any&&(r$34.any=o$32.any));}}function JJ(){var t$21=Cr$4.Promise;return U0?{Promise:t$21,PromiseProp:Object.getOwnPropertyDescriptor(Cr$4,`Promise`),all:t$21.all,race:t$21.race,allSettled:t$21.allSettled,any:t$21.any,resolve:t$21.resolve,reject:t$21.reject,nthen:cC.then,gthen:t$21.prototype.then}:{};}function Dp(t$21,i$27,e$19,r$34,o$32){var s$25=rt$5;try{return zc$1(t$21,!0),i$27(e$19,r$34,o$32);}finally{zc$1(s$25,!1);}}function YJ(t$21){HJ.call(p0,t$21);}function dC(t$21,i$27,e$19,r$34){return typeof t$21!=`function`?t$21:function(){var o$32=rt$5;e$19&&Lp(),zc$1(i$27,!0);try{return t$21.apply(this,arguments);}finally{zc$1(o$32,!1),r$34&&YJ(La);}};}function TJ(t$21,i$27){return function(e$19,r$34){return t$21.call(this,dC(e$19,i$27),dC(r$34,i$27));};}function IJ(t$21,i$27){var e$19;try{e$19=i$27.onuncatched(t$21);}catch{}if(e$19!==!1)try{var r$34,o$32={promise:i$27,reason:t$21};if(Cr$4.document&&document.createEvent?((r$34=document.createEvent(`Event`)).initEvent(`unhandledrejection`,!0,!0),_o$1(r$34,o$32)):Cr$4.CustomEvent&&_o$1(r$34=new CustomEvent(`unhandledrejection`,{detail:o$32}),o$32),r$34&&Cr$4.dispatchEvent&&(dispatchEvent(r$34),!Cr$4.PromiseRejectionEvent&&Cr$4.onunhandledrejection))try{Cr$4.onunhandledrejection(r$34);}catch{}ta$2&&r$34&&!r$34.defaultPrevented&&console.warn(`Unhandled rejection: ${t$21.stack||t$21}`);}catch{}}function b0(t$21,i$27,e$19,r$34){if(t$21.idbdb&&(t$21._state.openComplete||rt$5.letThrough||t$21._vip)){var o$32=t$21._createTransaction(i$27,e$19,t$21._dbSchema);try{o$32.create(),t$21._state.PR1398_maxLoop=3;}catch(s$25){return s$25.name===B0.InvalidState&&t$21.isOpen()&&--t$21._state.PR1398_maxLoop>0?(console.warn(`Dexie: Need to reopen db`),t$21._close(),t$21.open().then(()=>b0(t$21,i$27,e$19,r$34))):ki(s$25);}return o$32._promise(i$27,(s$25,n$46)=>Gc(()=>(rt$5.trans=o$32,r$34(s$25,n$46,o$32)))).then(s$25=>o$32._completion.then(()=>s$25));}if(t$21._state.openComplete)return ki(new ut$2.DatabaseClosed(t$21._state.dbOpenError));if(!t$21._state.isBeingOpened){if(!t$21._options.autoOpen)return ki(new ut$2.DatabaseClosed());t$21.open().catch(mr$4);}return t$21._state.dbReadyPromise.then(()=>b0(t$21,i$27,e$19,r$34));}function gl$1(t$21,i$27){return t$21?i$27?function(){return t$21.apply(this,arguments)&&i$27.apply(this,arguments);}:t$21:i$27;}function Qb(t$21){return typeof t$21!=`string`||/\./.test(t$21)?i$27=>i$27:i$27=>(i$27[t$21]===void 0&&t$21 in i$27&&delete(i$27=Uf(i$27))[t$21],i$27);}function Pf(t$21){var i$27={},e$19=function(a$30,c$37){if(c$37){for(var m$32=arguments.length,l$26=new Array(m$32-1);--m$32;)l$26[m$32-1]=arguments[m$32];return i$27[a$30].subscribe.apply(null,l$26),t$21;}if(typeof a$30==`string`)return i$27[a$30];};e$19.addEventType=s$25;for(var r$34=1,o$32=arguments.length;r$34<o$32;++r$34)s$25(arguments[r$34]);return e$19;function s$25(a$30,c$37,m$32){if(typeof a$30==`object`)return n$46(a$30);c$37||(c$37=cue),m$32||(m$32=mr$4);var l$26={subscribers:[],fire:m$32,subscribe:function(g$19){l$26.subscribers.indexOf(g$19)===-1&&(l$26.subscribers.push(g$19),l$26.fire=c$37(l$26.fire,g$19));},unsubscribe:function(g$19){l$26.subscribers=l$26.subscribers.filter(function(f$33){return f$33!==g$19;}),l$26.fire=l$26.subscribers.reduce(c$37,m$32);}};return i$27[a$30]=e$19[a$30]=l$26,l$26;}function n$46(a$30){vi$1(a$30).forEach(function(c$37){var m$32=a$30[c$37];if(oo$3(m$32))s$25(c$37,a$30[c$37][0],a$30[c$37][1]);else{if(m$32!==`asap`)throw new ut$2.InvalidArgument(`Invalid event config`);var l$26=s$25(c$37,Lf,function(){for(var g$19=arguments.length,f$33=new Array(g$19);g$19--;)f$33[g$19]=arguments[g$19];l$26.subscribers.forEach(function(h$15){$J(function(){h$15.apply(null,f$33);});});});}});}}function wf$1(t$21,i$27){return xp(i$27).from({prototype:t$21}),i$27;}function Mp(t$21,i$27){return!(t$21.filter||t$21.algorithm||t$21.or)&&(i$27?t$21.justLimit:!t$21.replayFilter);}function o0$1(t$21,i$27){t$21.filter=gl$1(t$21.filter,i$27);}function s0(t$21,i$27,e$19){var r$34=t$21.replayFilter;t$21.replayFilter=r$34?()=>gl$1(r$34(),i$27()):i$27,t$21.justLimit=e$19&&!r$34;}function oC(t$21,i$27){if(t$21.isPrimKey)return i$27.primaryKey;let e$19=i$27.getIndexByKeyPath(t$21.index);if(!e$19)throw new ut$2.Schema(`KeyPath `+t$21.index+` on object store `+i$27.name+` is not indexed`);return e$19;}function EJ(t$21,i$27,e$19){let r$34=oC(t$21,i$27.schema);return i$27.openCursor({trans:e$19,values:!t$21.keysOnly,reverse:t$21.dir===`prev`,unique:!!t$21.unique,query:{index:r$34,range:t$21.range}});}function Jb(t$21,i$27,e$19,r$34){let o$32=t$21.replayFilter?gl$1(t$21.filter,t$21.replayFilter()):t$21.filter;if(t$21.or){let s$25={},n$46=(a$30,c$37,m$32)=>{if(!o$32||o$32(c$37,m$32,f$33=>c$37.stop(f$33),f$33=>c$37.fail(f$33))){var l$26=c$37.primaryKey,g$19=``+l$26;g$19===`[object ArrayBuffer]`&&(g$19=``+new Uint8Array(l$26)),Xo$3(s$25,g$19)||(s$25[g$19]=!0,i$27(a$30,c$37,m$32));}};return Promise.all([t$21.or._iterate(n$46,e$19),AJ$1(EJ(t$21,r$34,e$19),t$21.algorithm,n$46,!t$21.keysOnly&&t$21.valueMapper)]);}return AJ$1(EJ(t$21,r$34,e$19),gl$1(t$21.algorithm,o$32),i$27,!t$21.keysOnly&&t$21.valueMapper);}function AJ$1(t$21,i$27,e$19,r$34){var o$32=xr$1(r$34?(s$25,n$46,a$30)=>e$19(r$34(s$25),n$46,a$30):e$19);return t$21.then(s$25=>{if(s$25)return s$25.start(()=>{var n$46=()=>s$25.continue();i$27&&!i$27(s$25,a$30=>n$46=a$30,a$30=>{s$25.stop(a$30),n$46=mr$4;},a$30=>{s$25.fail(a$30),n$46=mr$4;})||o$32(s$25.value,s$25,a$30=>n$46=a$30),n$46();});});}function Co$1(t$21,i$27){try{let e$19=wJ(t$21),r$34=wJ(i$27);if(e$19!==r$34)return e$19===`Array`?1:r$34===`Array`?-1:e$19===`binary`?1:r$34===`binary`?-1:e$19===`string`?1:r$34===`string`?-1:e$19===`Date`?1:r$34!==`Date`?NaN:-1;switch(e$19){case`number`:case`Date`:case`string`:return t$21>i$27?1:t$21<i$27?-1:0;case`binary`:return function(o$32,s$25){let n$46=o$32.length,a$30=s$25.length,c$37=n$46<a$30?n$46:a$30;for(let m$32=0;m$32<c$37;++m$32)if(o$32[m$32]!==s$25[m$32])return o$32[m$32]<s$25[m$32]?-1:1;return n$46===a$30?0:n$46<a$30?-1:1;}(MJ(t$21),MJ(i$27));case`Array`:return function(o$32,s$25){let n$46=o$32.length,a$30=s$25.length,c$37=n$46<a$30?n$46:a$30;for(let m$32=0;m$32<c$37;++m$32){let l$26=Co$1(o$32[m$32],s$25[m$32]);if(l$26!==0)return l$26;}return n$46===a$30?0:n$46<a$30?-1:1;}(t$21,i$27);}}catch{}return NaN;}function wJ(t$21){let i$27=typeof t$21;if(i$27!==`object`)return i$27;if(ArrayBuffer.isView(t$21))return`binary`;let e$19=m0(t$21);return e$19===`ArrayBuffer`?`binary`:e$19;}function MJ(t$21){return t$21 instanceof Uint8Array?t$21:ArrayBuffer.isView(t$21)?new Uint8Array(t$21.buffer,t$21.byteOffset,t$21.byteLength):new Uint8Array(t$21);}function yue(t$21,i$27){return t$21<i$27?-1:t$21===i$27?0:1;}function vue(t$21,i$27){return t$21>i$27?-1:t$21===i$27?0:1;}function Yo$2(t$21,i$27,e$19){var r$34=t$21 instanceof pC?new t$21.Collection(t$21):t$21;return r$34._ctx.error=e$19?new e$19(i$27):new TypeError(i$27),r$34;}function Rp(t$21){return new t$21.Collection(t$21,()=>e9(``)).limit(0);}function Sue(t$21,i$27,e$19,r$34,o$32,s$25){for(var n$46=Math.min(t$21.length,r$34.length),a$30=-1,c$37=0;c$37<n$46;++c$37){var m$32=i$27[c$37];if(m$32!==r$34[c$37])return o$32(t$21[c$37],e$19[c$37])<0?t$21.substr(0,c$37)+e$19[c$37]+e$19.substr(c$37+1):o$32(t$21[c$37],r$34[c$37])<0?t$21.substr(0,c$37)+r$34[c$37]+e$19.substr(c$37+1):a$30>=0?t$21.substr(0,a$30)+i$27[a$30]+e$19.substr(a$30+1):null;o$32(t$21[c$37],m$32)<0&&(a$30=c$37);}return n$46<r$34.length&&s$25===`next`?t$21+e$19.substr(t$21.length):n$46<t$21.length&&s$25===`prev`?t$21.substr(0,e$19.length):a$30<0?null:t$21.substr(0,a$30)+r$34[a$30]+e$19.substr(a$30+1);}function Yb(t$21,i$27,e$19,r$34){var o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19=e$19.length;if(!e$19.every(A$22=>typeof A$22==`string`))return Yo$2(t$21,`String expected.`);function f$33(A$22){o$32=function(w$26){return w$26===`next`?E$16=>E$16.toUpperCase():E$16=>E$16.toLowerCase();}(A$22),s$25=function(w$26){return w$26===`next`?E$16=>E$16.toLowerCase():E$16=>E$16.toUpperCase();}(A$22),n$46=A$22===`next`?yue:vue;var R$21=e$19.map(function(w$26){return{lower:s$25(w$26),upper:o$32(w$26)};}).sort(function(w$26,E$16){return n$46(w$26.lower,E$16.lower);});a$30=R$21.map(function(w$26){return w$26.upper;}),c$37=R$21.map(function(w$26){return w$26.lower;}),m$32=A$22,l$26=A$22===`next`?``:r$34;}f$33(`next`);var h$15=new t$21.Collection(t$21,()=>Wc(a$30[0],c$37[g$19-1]+r$34));h$15._ondirectionchange=function(A$22){f$33(A$22);};var I$25=0;return h$15._addAlgorithm(function(A$22,R$21,w$26){var E$16=A$22.key;if(typeof E$16!=`string`)return!1;var P$20=s$25(E$16);if(i$27(P$20,c$37,I$25))return!0;for(var B$22=null,G$16=I$25;G$16<g$19;++G$16){var v$22=Sue(E$16,P$20,a$30[G$16],c$37[G$16],n$46,m$32);v$22===null&&B$22===null?I$25=G$16+1:(B$22===null||n$46(B$22,v$22)>0)&&(B$22=v$22);}return R$21(B$22!==null?function(){A$22.continue(B$22+l$26);}:w$26),!1;}),h$15;}function Wc(t$21,i$27,e$19,r$34){return{type:2,lower:t$21,upper:i$27,lowerOpen:e$19,upperOpen:r$34};}function e9(t$21){return{type:1,lower:t$21,upper:t$21};}function ea(t$21){return xr$1(function(i$27){return Nf(i$27),t$21(i$27.target.error),!1;});}function Nf(t$21){t$21.stopPropagation&&t$21.stopPropagation(),t$21.preventDefault&&t$21.preventDefault();}function T0(t$21,i$27,e$19,r$34,o$32,s$25,n$46){return{name:t$21,keyPath:i$27,unique:e$19,multi:r$34,auto:o$32,compound:s$25,src:(e$19&&!n$46?`&`:``)+(r$34?`*`:``)+(o$32?`++`:``)+t9(i$27)};}function t9(t$21){return typeof t$21==`string`?t$21:t$21?`[`+[].join.call(t$21,`+`)+`]`:``;}function r9(t$21,i$27,e$19){return{name:t$21,primKey:i$27,indexes:e$19,mappedClass:null,idxByName:jJ(e$19,r$34=>[r$34.name,r$34])};}function I0(t$21){return t$21==null?()=>{}:typeof t$21==`string`?function(i$27){return i$27.split(`.`).length===1?e$19=>e$19[i$27]:e$19=>ja(e$19,i$27);}(t$21):i$27=>ja(i$27,t$21);}function RJ(t$21){return[].slice.call(t$21);}function $f(t$21){return t$21==null?`:id`:typeof t$21==`string`?t$21:`[${t$21.join(`+`)}]`;}function Cue(t$21,i$27,e$19){function r$34(c$37){if(c$37.type===3)return null;if(c$37.type===4)throw new Error(`Cannot convert never type to IDBKeyRange`);let{lower:m$32,upper:l$26,lowerOpen:g$19,upperOpen:f$33}=c$37;return m$32===void 0?l$26===void 0?null:i$27.upperBound(l$26,!!f$33):l$26===void 0?i$27.lowerBound(m$32,!!g$19):i$27.bound(m$32,l$26,!!g$19,!!f$33);}let{schema:o$32,hasGetAll:s$25}=function(c$37,m$32){let l$26=RJ(c$37.objectStoreNames);return{schema:{name:c$37.name,tables:l$26.map(g$19=>m$32.objectStore(g$19)).map(g$19=>{let{keyPath:f$33,autoIncrement:h$15}=g$19,I$25=oo$3(f$33),A$22=f$33==null,R$21={},w$26={name:g$19.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A$22,compound:I$25,keyPath:f$33,autoIncrement:h$15,unique:!0,extractKey:I0(f$33)},indexes:RJ(g$19.indexNames).map(E$16=>g$19.index(E$16)).map(E$16=>{let{name:P$20,unique:B$22,multiEntry:G$16,keyPath:v$22}=E$16,x$28={name:P$20,compound:oo$3(v$22),keyPath:v$22,unique:B$22,multiEntry:G$16,extractKey:I0(v$22)};return R$21[$f(v$22)]=x$28,x$28;}),getIndexByKeyPath:E$16=>R$21[$f(E$16)]};return R$21[`:id`]=w$26.primaryKey,f$33!=null&&(R$21[$f(f$33)]=w$26.primaryKey),w$26;})},hasGetAll:l$26.length>0&&`getAll`in m$32.objectStore(l$26[0])&&!(typeof navigator<`u`&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)};}(t$21,e$19),n$46=o$32.tables.map(c$37=>function(m$32){let l$26=m$32.name;return{name:l$26,schema:m$32,mutate:function({trans:g$19,type:f$33,keys:h$15,values:I$25,range:A$22}){return new Promise((R$21,w$26)=>{R$21=xr$1(R$21);let E$16=g$19.objectStore(l$26),P$20=E$16.keyPath==null,B$22=f$33===`put`||f$33===`add`;if(!B$22&&f$33!==`delete`&&f$33!==`deleteRange`)throw new Error(`Invalid operation type: `+f$33);let{length:G$16}=h$15||I$25||{length:1};if(h$15&&I$25&&h$15.length!==I$25.length)throw new Error(`Given keys array must have same length as given values array.`);if(G$16===0)return R$21({numFailures:0,failures:{},results:[],lastResult:void 0});let v$22,x$28=[],U$19=[],H$10=0,te$16=ke$5=>{++H$10,Nf(ke$5);};if(f$33===`deleteRange`){if(A$22.type===4)return R$21({numFailures:H$10,failures:U$19,results:[],lastResult:void 0});A$22.type===3?x$28.push(v$22=E$16.clear()):x$28.push(v$22=E$16.delete(r$34(A$22)));}else{let[ke$5,Qe$3]=B$22?P$20?[I$25,h$15]:[I$25,null]:[h$15,null];if(B$22)for(let Ct$5=0;Ct$5<G$16;++Ct$5)x$28.push(v$22=Qe$3&&Qe$3[Ct$5]!==void 0?E$16[f$33](ke$5[Ct$5],Qe$3[Ct$5]):E$16[f$33](ke$5[Ct$5])),v$22.onerror=te$16;else for(let Ct$5=0;Ct$5<G$16;++Ct$5)x$28.push(v$22=E$16[f$33](ke$5[Ct$5])),v$22.onerror=te$16;}let ye$5=ke$5=>{let Qe$3=ke$5.target.result;x$28.forEach((Ct$5,Zt$4)=>Ct$5.error!=null&&(U$19[Zt$4]=Ct$5.error)),R$21({numFailures:H$10,failures:U$19,results:f$33===`delete`?h$15:x$28.map(Ct$5=>Ct$5.result),lastResult:Qe$3});};v$22.onerror=ke$5=>{te$16(ke$5),ye$5(ke$5);},v$22.onsuccess=ye$5;});},getMany:({trans:g$19,keys:f$33})=>new Promise((h$15,I$25)=>{h$15=xr$1(h$15);let A$22=g$19.objectStore(l$26),R$21=f$33.length,w$26=new Array(R$21),E$16,P$20=0,B$22=0,G$16=x$28=>{let U$19=x$28.target;w$26[U$19._pos]=U$19.result,++B$22===P$20&&h$15(w$26);},v$22=ea(I$25);for(let x$28=0;x$28<R$21;++x$28)f$33[x$28]!=null&&(E$16=A$22.get(f$33[x$28]),E$16._pos=x$28,E$16.onsuccess=G$16,E$16.onerror=v$22,++P$20);P$20===0&&h$15(w$26);}),get:({trans:g$19,key:f$33})=>new Promise((h$15,I$25)=>{h$15=xr$1(h$15);let A$22=g$19.objectStore(l$26).get(f$33);A$22.onsuccess=R$21=>h$15(R$21.target.result),A$22.onerror=ea(I$25);}),query:function(g$19){return f$33=>new Promise((h$15,I$25)=>{h$15=xr$1(h$15);let{trans:A$22,values:R$21,limit:w$26,query:E$16}=f$33,P$20=w$26===Infinity?void 0:w$26,{index:B$22,range:G$16}=E$16,v$22=A$22.objectStore(l$26),x$28=B$22.isPrimaryKey?v$22:v$22.index(B$22.name),U$19=r$34(G$16);if(w$26===0)return h$15({result:[]});if(g$19){let H$10=R$21?x$28.getAll(U$19,P$20):x$28.getAllKeys(U$19,P$20);H$10.onsuccess=te$16=>h$15({result:te$16.target.result}),H$10.onerror=ea(I$25);}else{let H$10=0,te$16=R$21||!(`openKeyCursor`in x$28)?x$28.openCursor(U$19):x$28.openKeyCursor(U$19),ye$5=[];te$16.onsuccess=ke$5=>{let Qe$3=te$16.result;return Qe$3?(ye$5.push(R$21?Qe$3.value:Qe$3.primaryKey),++H$10===w$26?h$15({result:ye$5}):void Qe$3.continue()):h$15({result:ye$5});},te$16.onerror=ea(I$25);}});}(s$25),openCursor:function({trans:g$19,values:f$33,query:h$15,reverse:I$25,unique:A$22}){return new Promise((R$21,w$26)=>{R$21=xr$1(R$21);let{index:E$16,range:P$20}=h$15,B$22=g$19.objectStore(l$26),G$16=E$16.isPrimaryKey?B$22:B$22.index(E$16.name),v$22=I$25?A$22?`prevunique`:`prev`:A$22?`nextunique`:`next`,x$28=f$33||!(`openKeyCursor`in G$16)?G$16.openCursor(r$34(P$20),v$22):G$16.openKeyCursor(r$34(P$20),v$22);x$28.onerror=ea(w$26),x$28.onsuccess=xr$1(U$19=>{let H$10=x$28.result;if(!H$10)return void R$21(null);H$10.___id=++bue,H$10.done=!1;let te$16=H$10.continue.bind(H$10),ye$5=H$10.continuePrimaryKey;ye$5&&(ye$5=ye$5.bind(H$10));let ke$5=H$10.advance.bind(H$10),Qe$3=()=>{throw new Error(`Cursor not stopped`);};H$10.trans=g$19,H$10.stop=H$10.continue=H$10.continuePrimaryKey=H$10.advance=()=>{throw new Error(`Cursor not started`);},H$10.fail=xr$1(w$26),H$10.next=function(){let Ct$5=1;return this.start(()=>Ct$5--?this.continue():this.stop()).then(()=>this);},H$10.start=Ct$5=>{let Zt$4=new Promise((Fe$6,He$5)=>{Fe$6=xr$1(Fe$6),x$28.onerror=ea(He$5),H$10.fail=He$5,H$10.stop=St$3=>{H$10.stop=H$10.continue=H$10.continuePrimaryKey=H$10.advance=Qe$3,Fe$6(St$3);};}),Ae$6=()=>{if(x$28.result)try{Ct$5();}catch(Fe$6){H$10.fail(Fe$6);}else H$10.done=!0,H$10.start=()=>{throw new Error(`Cursor behind last entry`);},H$10.stop();};return x$28.onsuccess=xr$1(Fe$6=>{x$28.onsuccess=Ae$6,Ae$6();}),H$10.continue=te$16,H$10.continuePrimaryKey=ye$5,H$10.advance=ke$5,Ae$6(),Zt$4;},R$21(H$10);},w$26);});},count({query:g$19,trans:f$33}){let{index:h$15,range:I$25}=g$19;return new Promise((A$22,R$21)=>{let w$26=f$33.objectStore(l$26),E$16=h$15.isPrimaryKey?w$26:w$26.index(h$15.name),P$20=r$34(I$25),B$22=P$20?E$16.count(P$20):E$16.count();B$22.onsuccess=xr$1(G$16=>A$22(G$16.target.result)),B$22.onerror=ea(R$21);});}};}(c$37)),a$30={};return n$46.forEach(c$37=>a$30[c$37.name]=c$37),{stack:`dbcore`,transaction:t$21.transaction.bind(t$21),table(c$37){if(!a$30[c$37])throw new Error(`Table '${c$37}' not found`);return a$30[c$37];},MIN_KEY:-Infinity,MAX_KEY:Bf(i$27),schema:o$32};}function E0({_novip:t$21},i$27){let e$19=i$27.db;t$21.core=function(o$32,s$25,{IDBKeyRange:n$46,indexedDB:a$30},c$37){return{dbcore:function(l$26,g$19){return g$19.reduce((f$33,{create:h$15})=>({...f$33,...h$15(f$33)}),l$26);}(Cue(s$25,n$46,c$37),o$32.dbcore)};}(t$21._middlewares,e$19,t$21._deps,i$27).dbcore,t$21.tables.forEach(o$32=>{let s$25=o$32.name;t$21.core.schema.tables.some(n$46=>n$46.name===s$25)&&(o$32.core=t$21.core.table(s$25),t$21[s$25]instanceof t$21.Table&&(t$21[s$25].core=o$32.core));});}function uC({_novip:t$21},i$27,e$19,r$34){e$19.forEach(o$32=>{let s$25=r$34[o$32];i$27.forEach(n$46=>{let a$30=L0$1(n$46,o$32);(!a$30||`value`in a$30&&a$30.value===void 0)&&(n$46===t$21.Transaction.prototype||n$46 instanceof t$21.Transaction?$a$2(n$46,o$32,{get(){return this.table(o$32);},set(c$37){OJ$1(this,o$32,{value:c$37,writable:!0,configurable:!0,enumerable:!0});}}):n$46[o$32]=new t$21.Table(o$32,s$25));});});}function A0({_novip:t$21},i$27){i$27.forEach(e$19=>{for(let r$34 in e$19)e$19[r$34]instanceof t$21.Table&&delete e$19[r$34];});}function _ue(t$21,i$27){return t$21._cfg.version-i$27._cfg.version;}function kue(t$21,i$27,e$19,r$34){let o$32=t$21._dbSchema,s$25=t$21._createTransaction(`readwrite`,t$21._storeNames,o$32);s$25.create(e$19),s$25._completion.catch(r$34);let n$46=s$25._reject.bind(s$25),a$30=rt$5.transless||rt$5;Gc(()=>{rt$5.trans=s$25,rt$5.transless=a$30,i$27===0?(vi$1(o$32).forEach(c$37=>{a0(e$19,c$37,o$32[c$37].primKey,o$32[c$37].indexes);}),E0(t$21,e$19),Be$9.follow(()=>t$21.on.populate.fire(s$25)).catch(n$46)):function({_novip:c$37},m$32,l$26,g$19){let f$33=[],h$15=c$37._versions,I$25=c$37._dbSchema=M0(c$37,c$37.idbdb,g$19),A$22=!1;function R$21(){return f$33.length?Be$9.resolve(f$33.shift()(l$26.idbtrans)).then(R$21):Be$9.resolve();}return h$15.filter(w$26=>w$26._cfg.version>=m$32).forEach(w$26=>{f$33.push(()=>{let E$16=I$25,P$20=w$26._cfg.dbschema;R0(c$37,E$16,g$19),R0(c$37,P$20,g$19),I$25=c$37._dbSchema=P$20;let B$22=i9(E$16,P$20);B$22.add.forEach(v$22=>{a0(g$19,v$22[0],v$22[1].primKey,v$22[1].indexes);}),B$22.change.forEach(v$22=>{if(v$22.recreate)throw new ut$2.Upgrade(`Not yet support for changing primary key`);{let x$28=g$19.objectStore(v$22.name);v$22.add.forEach(U$19=>w0(x$28,U$19)),v$22.change.forEach(U$19=>{x$28.deleteIndex(U$19.name),w0(x$28,U$19);}),v$22.del.forEach(U$19=>x$28.deleteIndex(U$19));}});let G$16=w$26._cfg.contentUpgrade;if(G$16&&w$26._cfg.version>m$32){E0(c$37,g$19),l$26._memoizedTables={},A$22=!0;let v$22=LJ(P$20);B$22.del.forEach(te$16=>{v$22[te$16]=E$16[te$16];}),A0(c$37,[c$37.Transaction.prototype]),uC(c$37,[c$37.Transaction.prototype],vi$1(v$22),v$22),l$26.schema=v$22;let x$28=D0(G$16),U$19;x$28&&Lp();let H$10=Be$9.follow(()=>{if(U$19=G$16(l$26),U$19&&x$28){var te$16=La.bind(null,null);U$19.then(te$16,te$16);}});return U$19&&typeof U$19.then==`function`?Be$9.resolve(U$19):H$10.then(()=>U$19);}}),f$33.push(E$16=>{(!A$22||!hue)&&function(P$20,B$22){[].slice.call(B$22.db.objectStoreNames).forEach(G$16=>P$20[G$16]==null&&B$22.db.deleteObjectStore(G$16));}(w$26._cfg.dbschema,E$16),A0(c$37,[c$37.Transaction.prototype]),uC(c$37,[c$37.Transaction.prototype],c$37._storeNames,c$37._dbSchema),l$26.schema=c$37._dbSchema;});}),R$21().then(()=>{var w$26,E$16=g$19;vi$1(w$26=I$25).forEach(P$20=>{E$16.db.objectStoreNames.contains(P$20)||a0(E$16,P$20,w$26[P$20].primKey,w$26[P$20].indexes);});});}(t$21,i$27,s$25,e$19).catch(n$46);});}function i9(t$21,i$27){let e$19={del:[],add:[],change:[]},r$34;for(r$34 in t$21)i$27[r$34]||e$19.del.push(r$34);for(r$34 in i$27){let o$32=t$21[r$34],s$25=i$27[r$34];if(o$32){let n$46={name:r$34,def:s$25,recreate:!1,del:[],add:[],change:[]};if(``+(o$32.primKey.keyPath||``)!=``+(s$25.primKey.keyPath||``)||o$32.primKey.auto!==s$25.primKey.auto&&!hC)n$46.recreate=!0,e$19.change.push(n$46);else{let a$30=o$32.idxByName,c$37=s$25.idxByName,m$32;for(m$32 in a$30)c$37[m$32]||n$46.del.push(m$32);for(m$32 in c$37){let l$26=a$30[m$32],g$19=c$37[m$32];l$26?l$26.src!==g$19.src&&n$46.change.push(g$19):n$46.add.push(g$19);}(n$46.del.length>0||n$46.add.length>0||n$46.change.length>0)&&e$19.change.push(n$46);}}else e$19.add.push([r$34,s$25]);}return e$19;}function a0(t$21,i$27,e$19,r$34){let o$32=t$21.db.createObjectStore(i$27,e$19.keyPath?{keyPath:e$19.keyPath,autoIncrement:e$19.auto}:{autoIncrement:e$19.auto});return r$34.forEach(s$25=>w0(o$32,s$25)),o$32;}function w0(t$21,i$27){t$21.createIndex(i$27.name,i$27.keyPath,{unique:i$27.unique,multiEntry:i$27.multi});}function M0(t$21,i$27,e$19){let r$34={};return nC(i$27.objectStoreNames,0).forEach(o$32=>{let s$25=e$19.objectStore(o$32),n$46=s$25.keyPath,a$30=T0(t9(n$46),n$46||``,!1,!1,!!s$25.autoIncrement,n$46&&typeof n$46!=`string`,!0),c$37=[];for(let l$26=0;l$26<s$25.indexNames.length;++l$26){let g$19=s$25.index(s$25.indexNames[l$26]);n$46=g$19.keyPath;var m$32=T0(g$19.name,n$46,!!g$19.unique,!!g$19.multiEntry,!1,n$46&&typeof n$46!=`string`,!1);c$37.push(m$32);}r$34[o$32]=r9(o$32,a$30,c$37);}),r$34;}function R0({_novip:t$21},i$27,e$19){let r$34=e$19.db.objectStoreNames;for(let o$32=0;o$32<r$34.length;++o$32){let s$25=r$34[o$32],n$46=e$19.objectStore(s$25);t$21._hasGetAll=`getAll`in n$46;for(let a$30=0;a$30<n$46.indexNames.length;++a$30){let c$37=n$46.indexNames[a$30],m$32=n$46.index(c$37).keyPath,l$26=typeof m$32==`string`?m$32:`[`+nC(m$32).join(`+`)+`]`;if(i$27[s$25]){let g$19=i$27[s$25].idxByName[l$26];g$19&&(g$19.name=c$37,delete i$27[s$25].idxByName[l$26],i$27[s$25].idxByName[c$37]=g$19);}}}typeof navigator<`u`&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Cr$4.WorkerGlobalScope&&Cr$4 instanceof Cr$4.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t$21._hasGetAll=!1);}function G0(t$21,i$27){let e$19=t$21._dbNamesDB;return e$19||(e$19=t$21._dbNamesDB=new jp$1(`__dbnames`,{addons:[],indexedDB:t$21,IDBKeyRange:i$27}),e$19.version(1).stores({dbnames:`name`})),e$19.table(`dbnames`);}function z0(t$21){return t$21&&typeof t$21.databases==`function`;}function x0(t$21){return Gc(function(){return rt$5.letThrough=!0,t$21();});}function Tue(){var t$21;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(i$27){var e$19=function(){return indexedDB.databases().finally(i$27);};t$21=setInterval(e$19,100),e$19();}).finally(function(){return clearInterval(t$21);}):Promise.resolve();}function Iue(t$21){let i$27=t$21._state,{indexedDB:e$19}=t$21._deps;if(i$27.isBeingOpened||t$21.idbdb)return i$27.dbReadyPromise.then(()=>i$27.dbOpenError?ki(i$27.dbOpenError):t$21);ta$2&&(i$27.openCanceller._stackHolder=yl()),i$27.isBeingOpened=!0,i$27.dbOpenError=null,i$27.openComplete=!1;let r$34=i$27.openCanceller;function o$32(){if(i$27.openCanceller!==r$34)throw new ut$2.DatabaseClosed(`db.open() was cancelled`);}let s$25=i$27.dbReadyResolve,n$46=null,a$30=!1;return Be$9.race([r$34,(typeof navigator>`u`?Be$9.resolve():Tue()).then(()=>new Be$9((c$37,m$32)=>{if(o$32(),!e$19)throw new ut$2.MissingAPI();let l$26=t$21.name,g$19=i$27.autoSchema?e$19.open(l$26):e$19.open(l$26,Math.round(10*t$21.verno));if(!g$19)throw new ut$2.MissingAPI();g$19.onerror=ea(m$32),g$19.onblocked=xr$1(t$21._fireOnBlocked),g$19.onupgradeneeded=xr$1(f$33=>{if(n$46=g$19.transaction,i$27.autoSchema&&!t$21._options.allowEmptyDB){g$19.onerror=Nf,n$46.abort(),g$19.result.close();let I$25=e$19.deleteDatabase(l$26);I$25.onsuccess=I$25.onerror=xr$1(()=>{m$32(new ut$2.NoSuchDatabase(`Database ${l$26} doesnt exist`));});}else{n$46.onerror=ea(m$32);var h$15=f$33.oldVersion>Math.pow(2,62)?0:f$33.oldVersion;a$30=h$15<1,t$21._novip.idbdb=g$19.result,kue(t$21,h$15/10,n$46,m$32);}},m$32),g$19.onsuccess=xr$1(()=>{n$46=null;let f$33=t$21._novip.idbdb=g$19.result,h$15=nC(f$33.objectStoreNames);if(h$15.length>0)try{let A$22=f$33.transaction((I$25=h$15).length===1?I$25[0]:I$25,`readonly`);i$27.autoSchema?function({_novip:R$21},w$26,E$16){R$21.verno=w$26.version/10;let P$20=R$21._dbSchema=M0(0,w$26,E$16);R$21._storeNames=nC(w$26.objectStoreNames,0),uC(R$21,[R$21._allTables],vi$1(P$20),P$20);}(t$21,f$33,A$22):(R0(t$21,t$21._dbSchema,A$22),function(R$21,w$26){let E$16=i9(M0(0,R$21.idbdb,w$26),R$21._dbSchema);return!(E$16.add.length||E$16.change.some(P$20=>P$20.add.length||P$20.change.length));}(t$21,A$22)||console.warn(`Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.`)),E0(t$21,A$22);}catch{}var I$25;Of.push(t$21),f$33.onversionchange=xr$1(A$22=>{i$27.vcFired=!0,t$21.on(`versionchange`).fire(A$22);}),f$33.onclose=xr$1(A$22=>{t$21.on(`close`).fire(A$22);}),a$30&&function({indexedDB:A$22,IDBKeyRange:R$21},w$26){!z0(A$22)&&w$26!==`__dbnames`&&G0(A$22,R$21).put({name:w$26}).catch(mr$4);}(t$21._deps,l$26),c$37();},m$32);}))]).then(()=>(o$32(),i$27.onReadyBeingFired=[],Be$9.resolve(x0(()=>t$21.on.ready.fire(t$21.vip))).then(function c$37(){if(i$27.onReadyBeingFired.length>0){let m$32=i$27.onReadyBeingFired.reduce(V0,mr$4);return i$27.onReadyBeingFired=[],Be$9.resolve(x0(()=>m$32(t$21.vip))).then(c$37);}}))).finally(()=>{i$27.onReadyBeingFired=null,i$27.isBeingOpened=!1;}).then(()=>t$21).catch(c$37=>{i$27.dbOpenError=c$37;try{n$46&&n$46.abort();}catch{}return r$34===i$27.openCanceller&&t$21._close(),ki(c$37);}).finally(()=>{i$27.openComplete=!0,s$25();});}function O0(t$21){var i$27=s$25=>t$21.next(s$25),e$19=o$32(i$27),r$34=o$32(s$25=>t$21.throw(s$25));function o$32(s$25){return n$46=>{var a$30=s$25(n$46),c$37=a$30.value;return a$30.done?c$37:c$37&&typeof c$37.then==`function`?c$37.then(e$19,r$34):oo$3(c$37)?Promise.all(c$37).then(e$19,r$34):e$19(c$37);};}return o$32(i$27)();}function Eue(t$21,i$27,e$19){var r$34=arguments.length;if(r$34<2)throw new ut$2.InvalidArgument(`Too few arguments`);for(var o$32=new Array(r$34-1);--r$34;)o$32[r$34-1]=arguments[r$34];e$19=o$32.pop();return[t$21,DJ(o$32),e$19];}function o9(t$21,i$27,e$19,r$34,o$32){return Be$9.resolve().then(()=>{let s$25=rt$5.transless||rt$5,n$46=t$21._createTransaction(i$27,e$19,t$21._dbSchema,r$34),a$30={trans:n$46,transless:s$25};if(r$34)n$46.idbtrans=r$34.idbtrans;else try{n$46.create(),t$21._state.PR1398_maxLoop=3;}catch(g$19){return g$19.name===B0.InvalidState&&t$21.isOpen()&&--t$21._state.PR1398_maxLoop>0?(console.warn(`Dexie: Need to reopen db`),t$21._close(),t$21.open().then(()=>o9(t$21,i$27,e$19,null,o$32))):ki(g$19);}let c$37=D0(o$32),m$32;c$37&&Lp();let l$26=Be$9.follow(()=>{if(m$32=o$32.call(n$46,n$46),m$32)if(c$37){var g$19=La.bind(null,null);m$32.then(g$19,g$19);}else typeof m$32.next==`function`&&typeof m$32.throw==`function`&&(m$32=O0(m$32));},a$30);return(m$32&&typeof m$32.then==`function`?Be$9.resolve(m$32).then(g$19=>n$46.active?g$19:ki(new ut$2.PrematureCommit(`Transaction committed too early. See http://bit.ly/2kdckMn`))):l$26.then(()=>m$32)).then(g$19=>(r$34&&n$46._resolve(),n$46._completion.then(()=>g$19))).catch(g$19=>(n$46._reject(g$19),ki(g$19)));});}function Xb(t$21,i$27,e$19){let r$34=oo$3(t$21)?t$21.slice():[t$21];for(let o$32=0;o$32<e$19;++o$32)r$34.push(i$27);return r$34;}function q0(t$21,i$27,e$19,r$34){return e$19=e$19||{},r$34=r$34||``,vi$1(t$21).forEach(o$32=>{if(Xo$3(i$27,o$32)){var s$25=t$21[o$32],n$46=i$27[o$32];if(typeof s$25==`object`&&typeof n$46==`object`&&s$25&&n$46){let a$30=m0(s$25);a$30!==m0(n$46)?e$19[r$34+o$32]=i$27[o$32]:a$30===`Object`?q0(s$25,n$46,e$19,r$34+o$32+`.`):s$25!==n$46&&(e$19[r$34+o$32]=i$27[o$32]);}else s$25!==n$46&&(e$19[r$34+o$32]=i$27[o$32]);}else e$19[r$34+o$32]=void 0;}),vi$1(i$27).forEach(o$32=>{Xo$3(t$21,o$32)||(e$19[r$34+o$32]=i$27[o$32]);}),e$19;}function s9(t$21,i$27,e$19){try{if(!i$27||i$27.keys.length<t$21.length)return null;let r$34=[];for(let o$32=0,s$25=0;o$32<i$27.keys.length&&s$25<t$21.length;++o$32)Co$1(i$27.keys[o$32],t$21[s$25])===0&&(r$34.push(e$19?Uf(i$27.values[o$32]):i$27.values[o$32]),++s$25);return r$34.length===t$21.length?r$34:null;}catch{return null;}}function K0(t$21){return!(`from`in t$21);}function Vf(t$21,i$27,e$19){let r$34=Co$1(i$27,e$19);if(isNaN(r$34))return;if(r$34>0)throw RangeError();if(K0(t$21))return _o$1(t$21,{from:i$27,to:e$19,d:1});let o$32=t$21.l,s$25=t$21.r;if(Co$1(e$19,t$21.from)<0)return o$32?Vf(o$32,i$27,e$19):t$21.l={from:i$27,to:e$19,d:1,l:null,r:null},FJ(t$21);if(Co$1(i$27,t$21.to)>0)return s$25?Vf(s$25,i$27,e$19):t$21.r={from:i$27,to:e$19,d:1,l:null,r:null},FJ(t$21);Co$1(i$27,t$21.from)<0&&(t$21.from=i$27,t$21.l=null,t$21.d=s$25?s$25.d+1:1),Co$1(e$19,t$21.to)>0&&(t$21.to=e$19,t$21.r=null,t$21.d=t$21.l?t$21.l.d+1:1);let n$46=!t$21.r;o$32&&!t$21.l&&fC(t$21,o$32),s$25&&n$46&&fC(t$21,s$25);}function fC(t$21,i$27){K0(i$27)||function e$19(r$34,{from:o$32,to:s$25,l:n$46,r:a$30}){Vf(r$34,o$32,s$25),n$46&&e$19(r$34,n$46),a$30&&e$19(r$34,a$30);}(t$21,i$27);}function Rue(t$21,i$27){let e$19=P0(i$27),r$34=e$19.next();if(r$34.done)return!1;let o$32=r$34.value,s$25=P0(t$21),n$46=s$25.next(o$32.from),a$30=n$46.value;for(;!r$34.done&&!n$46.done;){if(Co$1(a$30.from,o$32.to)<=0&&Co$1(a$30.to,o$32.from)>=0)return!0;Co$1(o$32.from,a$30.from)<0?o$32=(r$34=e$19.next(a$30.from)).value:a$30=(n$46=s$25.next(o$32.from)).value;}return!1;}function P0(t$21){let i$27=K0(t$21)?null:{s:0,n:t$21};return{next(e$19){let r$34=arguments.length>0;for(;i$27;)switch(i$27.s){case 0:if(i$27.s=1,r$34)for(;i$27.n.l&&Co$1(e$19,i$27.n.from)<0;)i$27={up:i$27,n:i$27.n.l,s:1};else for(;i$27.n.l;)i$27={up:i$27,n:i$27.n.l,s:1};case 1:if(i$27.s=2,!r$34||Co$1(e$19,i$27.n.to)<=0)return{value:i$27.n,done:!1};case 2:if(i$27.n.r){i$27.s=3,i$27={up:i$27,n:i$27.n.r,s:0};continue;}case 3:i$27=i$27.up;}return{done:!0};}};}function FJ(t$21){var i$27,e$19;let r$34=(((i$27=t$21.r)===null||i$27===void 0?void 0:i$27.d)||0)-(((e$19=t$21.l)===null||e$19===void 0?void 0:e$19.d)||0),o$32=r$34>1?`r`:r$34<-1?`l`:``;if(o$32){let s$25=o$32===`r`?`l`:`r`,n$46={...t$21},a$30=t$21[o$32];t$21.from=a$30.from,t$21.to=a$30.to,t$21[o$32]=a$30[o$32],n$46[o$32]=a$30[s$25],t$21[s$25]=n$46,n$46.d=xJ(n$46);}t$21.d=xJ(t$21);}function xJ({r:t$21,l:i$27}){return(t$21?i$27?Math.max(t$21.d,i$27.d):t$21.d:i$27?i$27.d:0)+1;}function n9(t$21,i$27){return vi$1(i$27).forEach(e$19=>{fC(t$21[e$19]||(t$21[e$19]=new xa()),i$27[e$19]);}),t$21;}function Oue(t$21){return new $0(i$27=>{let e$19=D0(t$21),r$34=!1,o$32={},s$25={},n$46={get closed(){return r$34;},unsubscribe:()=>{r$34=!0,qc$1.storagemutated.unsubscribe(l$26);}};i$27.start&&i$27.start(n$46);let a$30=!1,c$37=!1;function m$32(){return vi$1(s$25).some(f$33=>o$32[f$33]&&Rue(o$32[f$33],s$25[f$33]));}let l$26=f$33=>{n9(o$32,f$33),m$32()&&g$19();},g$19=()=>{if(a$30||r$34)return;o$32={};let f$33={},h$15=function(I$25){e$19&&Lp();let A$22=()=>Gc(t$21,{subscr:I$25,trans:null}),R$21=rt$5.trans?Dp(rt$5.transless,A$22):A$22();return e$19&&R$21.then(La,La),R$21;}(f$33);c$37||(qc$1(`storagemutated`,l$26),c$37=!0),a$30=!0,Promise.resolve(h$15).then(I$25=>{a$30=!1,r$34||(m$32()?g$19():(o$32={},s$25=f$33,i$27.next&&i$27.next(I$25)));},I$25=>{a$30=!1,i$27.error&&i$27.error(I$25),n$46.unsubscribe();});};return g$19(),n$46;});}function sC(t$21){let i$27=Pa;try{Pa=!0,qc$1.storagemutated.fire(t$21);}finally{Pa=i$27;}}function Bue(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`div`,3),Fg(`onMouseUp`,function(o$32){cu$2(e$19);return lu$1(BC().onMouseUp(o$32));}),Kc$3(1,`button`,4,0),fg$1(3,`cu3-icon`,5),Jc$1(),Kc$3(4,`button`,6),Fg(`click`,function(){cu$2(e$19);return lu$1(BC().triggerChatBot());}),Og(5,1),fg$1(6,`cu3-icon`,7),Pg(),Jc$1(),Kc$3(7,`button`,8),Fg(`click`,function(){cu$2(e$19);return lu$1(BC().removeTrigger());}),fg$1(8,`cu3-icon`,5),Jc$1()();}if(t$21&2){let e$19=XC(2);dg(`ngStyle`,BT(10,Nue,BC().initialPosition))(`moveHandle`,e$19)(`disableHorizontalMove`,!0)(`shouldSetBoundaries`,!0),vv(3),dg(`name`,`moveHandle`),vv(),dg(`buttonType`,`primary`),vv(2),dg(`name`,`chatV4`),vv(),dg(`size`,`small`)(`buttonType`,`secondary`),vv(),dg(`name`,`closeSmall`);}}function R9(t$21,i$27){return t$21+(Math.floor(Math.random()*i$27)+1e3);}function F9(t$21,i$27,e$19){let r$34=null,o$32=()=>{t$21(),r$34=F$21(o$32,R9(i$27,e$19));};return r$34=F$21(o$32,R9(i$27,e$19)),()=>{r$34!==null&&(P$16(r$34),r$34=null);};}function x9(t$21,i$27){`requestIdleCallback`in window?window.requestIdleCallback(t$21,{timeout:i$27}):t$21(void 0);}function O9(t$21){`requestAnimationFrame`in window?I$22(e$19=>{t$21(e$19);}):t$21(performance.now());}function j9(t$21,i$27,e$19,r$34){return I$24(this,null,function*(){return window.todesktop.appMenu.add(t$21,i$27,e$19,r$34);});}function L9$1(){return I$24(this,null,function*(){return window.todesktop.appMenu.refresh();});}function D9(t$21,i$27){try{let e$19=new URL(t$21),r$34=new URL(i$27);return e$19.origin===r$34.origin&&r$34.pathname.startsWith(e$19.pathname);}catch{return!1;}}function Xue(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-global-actions-bar`,4),Fg(`clickedHome`,function(){cu$2(e$19),BC();let o$32=XC(9);return lu$1(o$32==null?null:o$32.closeTaskFromHomeRedirect());}),Jc$1();}}function Zue(t$21,i$27){t$21&1&&hg(0);}function efe(t$21,i$27){if(t$21&1&&(tl(0),Bp(1,Zue,1,0,`ng-container`,5),Si$1()),t$21&2){let e$19=i$27.ngIf;vv(),dg(`ngComponentOutlet`,e$19);}}function tfe(t$21,i$27){t$21&1&&hg(0);}function rfe(t$21,i$27){if(t$21&1&&(tl(0),Bp(1,tfe,1,0,`ng-container`,5),Si$1()),t$21&2){let e$19=i$27.ngIf;vv(),dg(`ngComponentOutlet`,e$19);}}function ife(t$21,i$27){t$21&1&&hg(0);}function ofe(t$21,i$27){if(t$21&1&&(tl(0),Bp(1,ife,1,0,`ng-container`,5),Si$1()),t$21&2){let e$19=i$27.ngIf;vv(),dg(`ngComponentOutlet`,e$19);}}function sfe(t$21,i$27){t$21&1&&fg$1(0,`cu-activity-monitor-display-deferred`);}function nfe(t$21,i$27){t$21&1&&fg$1(0,`cu-app-view-services-initializer`);}function W9(t$21){C$23(x$22).events.pipe(oe$13(e$19=>e$19 instanceof M$20),fs$1(1e3),gs(t$21)).subscribe(()=>{Array.isArray(window?.dataLayer)&&window.dataLayer.push({event:`page_view_settled`,isFirstPageSettledEvent:!1});});}function J0(){try{return JSON.parse(sessionStorage.getItem(`resourceLoadReport`));}catch{return{};}}function G9(t$21){return t$21.mainBundleReady.startTime-t$21.slowestBundle.responseEnd-t$21.indexReady.startTime;}function z9(t$21){let i$27=afe(t$21),e$19=new Map(),r$34=0,o$32=performance.getEntriesByType(`mark`);for(let s$25=0;s$25<o$32.length&&(i$27[o$32[s$25].name]&&(e$19.set(o$32[s$25].name,o$32[s$25]),r$34++),!(r$34>=t$21.length));s$25++);return e$19;}function afe(t$21){let i$27={};for(let e$19=0;e$19<t$21.length;e$19++)i$27[t$21[e$19]]=!0;return i$27;}function q9(){let t$21=null,i$27=performance.getEntriesByType(`resource`);for(let e$19=0;e$19<i$27.length;e$19++){let r$34=i$27[e$19];r$34.initiatorType===`script`&&(t$21?t$21.responseEnd<r$34.responseEnd&&(t$21=r$34):t$21=r$34);}return t$21||void 0;}function K9(t$21){return t$21.name.includes(`main`)||t$21.name.includes(`scripts`)||t$21.name.includes(`polyfill`)||t$21.name.includes(`styles`);}function Q9(t$21){return t$21 instanceof PerformanceResourceTiming;}function J9(t$21){return!!t$21.mainBundleReady&&!!t$21.indexReady&&!!t$21.slowestBundle;}function dfe(t$21,i$27){t$21&1&&hg(0);}function pfe(t$21,i$27){t$21&1&&Bp(0,dfe,1,0,`ng-container`,0),t$21&2&&dg(`ngComponentOutlet`,i$27);}function ufe(t$21,i$27){t$21&1&&fg$1(0,`cu-not-found`);}function ffe(t$21,i$27){t$21&1&&($p(0,ufe,1,0),DD(1,0,lfe),MD());}function hfe(t$21,i$27){t$21&1&&fg$1(0,`cu-app-view`);}function Z9(){return!!(window?.navigator?.userAgent?.toLowerCase().includes(`electron`)&&(navigator.userAgent.includes(`ClickUpDesktop/`)||window.IS_CLICKUP_ELECTRON_APP));}function oY(t$21){return new T$23(3e3,!1);}function vfe(){return new T$23(3100,!1);}function Sfe(){return new T$23(3101,!1);}function bfe(t$21){return new T$23(3001,!1);}function Cfe(t$21){return new T$23(3003,!1);}function _fe(t$21){return new T$23(3004,!1);}function nY(t$21,i$27){return new T$23(3005,!1);}function aY(){return new T$23(3006,!1);}function cY(){return new T$23(3007,!1);}function mY(t$21,i$27){return new T$23(3008,!1);}function lY(t$21){return new T$23(3002,!1);}function dY(t$21,i$27,e$19,r$34,o$32){return new T$23(3010,!1);}function pY(){return new T$23(3011,!1);}function uY(){return new T$23(3012,!1);}function fY(){return new T$23(3200,!1);}function hY(){return new T$23(3202,!1);}function gY(){return new T$23(3013,!1);}function yY(t$21){return new T$23(3014,!1);}function vY(t$21){return new T$23(3015,!1);}function SY(t$21){return new T$23(3016,!1);}function bY(t$21,i$27){return new T$23(3404,!1);}function kfe(t$21){return new T$23(3502,!1);}function CY(t$21){return new T$23(3503,!1);}function _Y(){return new T$23(3300,!1);}function kY(t$21){return new T$23(3504,!1);}function TY(t$21){return new T$23(3301,!1);}function IY(t$21,i$27){return new T$23(3302,!1);}function EY(t$21){return new T$23(3303,!1);}function AY(t$21,i$27){return new T$23(3400,!1);}function wY(t$21){return new T$23(3401,!1);}function MY(t$21){return new T$23(3402,!1);}function RY(t$21,i$27){return new T$23(3505,!1);}function Ba(t$21){switch(t$21.length){case 0:return new a$16();case 1:return t$21[0];default:return new l$18(t$21);}}function tw(t$21,i$27,e$19=new Map(),r$34=new Map()){let o$32=[],s$25=[],n$46=-1,a$30=null;if(i$27.forEach(c$37=>{let m$32=c$37.get(`offset`),l$26=m$32==n$46,g$19=l$26&&a$30||new Map();c$37.forEach((f$33,h$15)=>{let I$25=h$15,A$22=f$33;if(h$15!==`offset`)switch(I$25=t$21.normalizePropertyName(I$25,o$32),A$22){case S$12:A$22=e$19.get(h$15);break;case c$19:A$22=r$34.get(h$15);break;default:A$22=t$21.normalizeStyleValue(h$15,I$25,A$22,o$32);break;}g$19.set(I$25,A$22);}),l$26||s$25.push(g$19),a$30=g$19,n$46=m$32;}),o$32.length)throw kfe(o$32);return s$25;}function SC(t$21,i$27,e$19,r$34){switch(i$27){case`start`:t$21.onStart(()=>r$34(e$19&&X0(e$19,`start`,t$21)));break;case`done`:t$21.onDone(()=>r$34(e$19&&X0(e$19,`done`,t$21)));break;case`destroy`:t$21.onDestroy(()=>r$34(e$19&&X0(e$19,`destroy`,t$21)));break;}}function X0(t$21,i$27,e$19){let r$34=e$19.totalTime,o$32=!!e$19.disabled,s$25=bC(t$21.element,t$21.triggerName,t$21.fromState,t$21.toState,i$27||t$21.phaseName,r$34??t$21.totalTime,o$32),n$46=t$21._data;return n$46!=null&&(s$25._data=n$46),s$25;}function bC(t$21,i$27,e$19,r$34,o$32=``,s$25=0,n$46){return{element:t$21,triggerName:i$27,fromState:e$19,toState:r$34,phaseName:o$32,totalTime:s$25,disabled:!!n$46};}function No$2(t$21,i$27,e$19){let r$34=t$21.get(i$27);return r$34||t$21.set(i$27,r$34=e$19),r$34;}function rw(t$21){let i$27=t$21.indexOf(`:`);return[t$21.substring(1,i$27),t$21.slice(i$27+1)];}function CC(t$21){let i$27=t$21.parentNode||t$21.host||null;return i$27===Tfe?null:i$27;}function Ife(t$21){return t$21.substring(1,6)==`ebkit`;}function FY(t$21){vl$1||(vl$1=Efe()||{},sY=vl$1.style?`WebkitAppearance`in vl$1.style:!1);let i$27=!0;return vl$1.style&&!Ife(t$21)&&(i$27=t$21 in vl$1.style,!i$27&&sY&&(i$27=`Webkit`+t$21.charAt(0).toUpperCase()+t$21.slice(1)in vl$1.style)),i$27;}function Efe(){return typeof document<`u`?document.body:null;}function iw(t$21,i$27){for(;i$27;){if(i$27===t$21)return!0;i$27=CC(i$27);}return!1;}function ow(t$21,i$27,e$19){if(e$19)return Array.from(t$21.querySelectorAll(i$27));let r$34=t$21.querySelector(i$27);return r$34?[r$34]:[];}function ra(t$21){if(typeof t$21==`number`)return t$21;let i$27=t$21.match(/^(-?[\.\d]+)(m?s)/);return!i$27||i$27.length<2?0:Z0(parseFloat(i$27[1]),i$27[2]);}function Z0(t$21,i$27){switch(i$27){case`s`:return t$21*Afe;default:return t$21;}}function qf(t$21,i$27,e$19){return t$21.hasOwnProperty(`duration`)?t$21:Rfe(t$21,i$27,e$19);}function Rfe(t$21,i$27,e$19){let r$34,o$32=0,s$25=``;if(typeof t$21==`string`){let n$46=t$21.match(Mfe);if(n$46===null)return i$27.push(oY(t$21)),{duration:0,delay:0,easing:``};r$34=Z0(parseFloat(n$46[1]),n$46[2]);let a$30=n$46[3];a$30!=null&&(o$32=Z0(parseFloat(a$30),n$46[4]));let c$37=n$46[5];c$37&&(s$25=c$37);}else r$34=t$21;if(!e$19){let n$46=!1,a$30=i$27.length;r$34<0&&(i$27.push(vfe()),n$46=!0),o$32<0&&(i$27.push(Sfe()),n$46=!0),n$46&&i$27.splice(a$30,0,oY(t$21));}return{duration:r$34,delay:o$32,easing:s$25};}function xY(t$21){return t$21.length?t$21[0]instanceof Map?t$21:t$21.map(i$27=>new Map(Object.entries(i$27))):[];}function un$1(t$21,i$27,e$19){i$27.forEach((r$34,o$32)=>{let s$25=TC(o$32);e$19&&!e$19.has(o$32)&&e$19.set(o$32,t$21.style[s$25]),t$21.style[s$25]=r$34;});}function Kc$4(t$21,i$27){i$27.forEach((e$19,r$34)=>{let o$32=TC(r$34);t$21.style[o$32]=``;});}function Vp(t$21){return Array.isArray(t$21)?t$21.length==1?t$21[0]:y$10(t$21):t$21;}function OY(t$21,i$27,e$19){let r$34=i$27.params||{},o$32=cw(t$21);o$32.length&&o$32.forEach(s$25=>{r$34.hasOwnProperty(s$25)||e$19.push(bfe(s$25));});}function cw(t$21){let i$27=[];if(typeof t$21==`string`){let e$19;for(;e$19=ew.exec(t$21);)i$27.push(e$19[1]);ew.lastIndex=0;}return i$27;}function Up(t$21,i$27,e$19){let r$34=`${t$21}`,o$32=r$34.replace(ew,(s$25,n$46)=>{let a$30=i$27[n$46];return a$30??(e$19.push(Cfe(n$46)),a$30=``),a$30.toString();});return o$32==r$34?t$21:o$32;}function TC(t$21){return t$21.replace(Ffe,(...i$27)=>i$27[1].toUpperCase());}function PY(t$21,i$27){return t$21===0||i$27===0;}function $Y(t$21,i$27,e$19){if(e$19.size&&i$27.length){let r$34=i$27[0],o$32=[];if(e$19.forEach((s$25,n$46)=>{r$34.has(n$46)||o$32.push(n$46),r$34.set(n$46,s$25);}),o$32.length)for(let s$25=1;s$25<i$27.length;s$25++){let n$46=i$27[s$25];o$32.forEach(a$30=>n$46.set(a$30,IC(t$21,a$30)));}}return i$27;}function Bo(t$21,i$27,e$19){switch(i$27.type){case i$16.Trigger:return t$21.visitTrigger(i$27,e$19);case i$16.State:return t$21.visitState(i$27,e$19);case i$16.Transition:return t$21.visitTransition(i$27,e$19);case i$16.Sequence:return t$21.visitSequence(i$27,e$19);case i$16.Group:return t$21.visitGroup(i$27,e$19);case i$16.Animate:return t$21.visitAnimate(i$27,e$19);case i$16.Keyframes:return t$21.visitKeyframes(i$27,e$19);case i$16.Style:return t$21.visitStyle(i$27,e$19);case i$16.Reference:return t$21.visitReference(i$27,e$19);case i$16.AnimateChild:return t$21.visitAnimateChild(i$27,e$19);case i$16.AnimateRef:return t$21.visitAnimateRef(i$27,e$19);case i$16.Query:return t$21.visitQuery(i$27,e$19);case i$16.Stagger:return t$21.visitStagger(i$27,e$19);default:throw _fe(i$27.type);}}function IC(t$21,i$27){return window.getComputedStyle(t$21)[i$27];}function Ofe(t$21,i$27){let e$19=[];return typeof t$21==`string`?t$21.split(/\s*,\s*/).forEach(r$34=>Pfe(r$34,e$19,i$27)):e$19.push(t$21),e$19;}function Pfe(t$21,i$27,e$19){if(t$21[0]==`:`){let c$37=$fe(t$21,e$19);if(typeof c$37==`function`){i$27.push(c$37);return;}t$21=c$37;}let r$34=t$21.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r$34==null||r$34.length<4)return e$19.push(vY(t$21)),i$27;let o$32=r$34[1],s$25=r$34[2],n$46=r$34[3];i$27.push(jY(o$32,n$46));let a$30=o$32==FC$1&&n$46==FC$1;s$25[0]==`<`&&!a$30&&i$27.push(jY(n$46,o$32));}function $fe(t$21,i$27){switch(t$21){case`:enter`:return`void => *`;case`:leave`:return`* => void`;case`:increment`:return(e$19,r$34)=>parseFloat(r$34)>parseFloat(e$19);case`:decrement`:return(e$19,r$34)=>parseFloat(r$34)<parseFloat(e$19);default:return i$27.push(SY(t$21)),`* => *`;}}function jY(t$21,i$27){let e$19=EC.has(t$21)||AC.has(t$21),r$34=EC.has(i$27)||AC.has(i$27);return(o$32,s$25)=>{let n$46=t$21==FC$1||t$21==o$32,a$30=i$27==FC$1||i$27==s$25;return!n$46&&e$19&&typeof o$32==`boolean`&&(n$46=o$32?EC.has(t$21):AC.has(t$21)),!a$30&&r$34&&typeof s$25==`boolean`&&(a$30=s$25?EC.has(i$27):AC.has(i$27)),n$46&&a$30;};}function qY(t$21,i$27,e$19,r$34){return new fw(t$21).build(i$27,e$19,r$34);}function Lfe(t$21){let i$27=!!t$21.split(/\s*,\s*/).find(e$19=>e$19==zY);return i$27&&(t$21=t$21.replace(jfe,``)),t$21=t$21.replace(/@\*/g,zf).replace(/@\w+/g,e$19=>zf+`-`+e$19.slice(1)).replace(/:animating/g,kC),[t$21,i$27];}function Dfe(t$21){return t$21?{...t$21}:null;}function Nfe(t$21){if(typeof t$21==`string`)return null;let i$27=null;if(Array.isArray(t$21))t$21.forEach(e$19=>{if(e$19 instanceof Map&&e$19.has(`offset`)){let r$34=e$19;i$27=parseFloat(r$34.get(`offset`)),r$34.delete(`offset`);}});else if(t$21 instanceof Map&&t$21.has(`offset`)){let e$19=t$21;i$27=parseFloat(e$19.get(`offset`)),e$19.delete(`offset`);}return i$27;}function Bfe(t$21,i$27){if(t$21.hasOwnProperty(`duration`))return t$21;if(typeof t$21==`number`){let s$25=qf(t$21,i$27).duration;return mw(s$25,0,``);}let e$19=t$21;if(e$19.split(/\s+/).some(s$25=>s$25.charAt(0)==`{`&&s$25.charAt(1)==`{`)){let s$25=mw(0,0,``);return s$25.dynamic=!0,s$25.strValue=e$19,s$25;}let o$32=qf(e$19,i$27);return mw(o$32.duration,o$32.delay,o$32.easing);}function Sl$1(t$21){return t$21?(t$21={...t$21},t$21.params&&(t$21.params=Dfe(t$21.params))):t$21={},t$21;}function mw(t$21,i$27,e$19){return{duration:t$21,delay:i$27,easing:e$19};}function Ew(t$21,i$27,e$19,r$34,o$32,s$25,n$46=null,a$30=!1){return{type:1,element:t$21,keyframes:i$27,preStyleProps:e$19,postStyleProps:r$34,duration:o$32,delay:s$25,totalTime:o$32+s$25,easing:n$46,subTimeline:a$30};}function KY(t$21,i$27,e$19,r$34,o$32,s$25=new Map(),n$46=new Map(),a$30,c$37,m$32=[]){return new gw().buildKeyframes(t$21,i$27,e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32);}function DY(t$21,i$27=3){let e$19=Math.pow(10,i$27-1);return Math.round(t$21*e$19)/e$19;}function zfe(t$21,i$27){let e$19=new Map(),r$34;return t$21.forEach(o$32=>{if(o$32===`*`){r$34??=i$27.keys();for(let s$25 of r$34)e$19.set(s$25,c$19);}else for(let[s$25,n$46]of o$32)e$19.set(s$25,n$46);}),e$19;}function NY(t$21,i$27,e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19,f$33){return{type:0,element:t$21,triggerName:i$27,isRemovalTransition:o$32,fromState:e$19,fromStyles:s$25,toState:r$34,toStyles:n$46,timelines:a$30,queriedElements:c$37,preStyleProps:m$32,postStyleProps:l$26,totalTime:g$19,errors:f$33};}function qfe(t$21,i$27,e$19,r$34,o$32){return t$21.some(s$25=>s$25(i$27,e$19,r$34,o$32));}function QY(t$21,i$27){let e$19={...i$27};return Object.entries(t$21).forEach(([r$34,o$32])=>{o$32!=null&&(e$19[r$34]=o$32);}),e$19;}function Kfe(t$21,i$27,e$19){return new bw(t$21,i$27,e$19);}function Qfe(t$21,i$27,e$19){let r$34=[(n$46,a$30)=>!0],o$32={type:i$16.Sequence,steps:[],options:null};return new PC(t$21,{type:i$16.Transition,animation:o$32,matchers:r$34,options:null,queryCount:0,depCount:0},i$27);}function BY(t$21,i$27,e$19){t$21.has(i$27)?t$21.has(e$19)||t$21.set(e$19,t$21.get(i$27)):t$21.has(e$19)&&t$21.set(i$27,t$21.get(e$19));}function ihe(t$21,i$27,e$19){let r$34=t$21.get(i$27);if(r$34){if(r$34.length){let o$32=r$34.indexOf(e$19);r$34.splice(o$32,1);}r$34.length==0&&t$21.delete(i$27);}return r$34;}function ohe(t$21){return t$21??null;}function wC(t$21){return t$21&&t$21.nodeType===1;}function she(t$21){return t$21==`start`||t$21==`done`;}function UY(t$21,i$27){let e$19=t$21.style.display;return t$21.style.display=i$27??`none`,e$19;}function WY(t$21,i$27,e$19,r$34,o$32){let s$25=[];e$19.forEach(c$37=>s$25.push(UY(c$37)));let n$46=[];r$34.forEach((c$37,m$32)=>{let l$26=new Map();c$37.forEach(g$19=>{let f$33=i$27.computeStyle(m$32,g$19,o$32);l$26.set(g$19,f$33),(!f$33||f$33.length==0)&&(m$32[fn$1]=rhe,n$46.push(m$32));}),t$21.set(m$32,l$26);});let a$30=0;return e$19.forEach(c$37=>UY(c$37,s$25[a$30++])),n$46;}function HY(t$21,i$27){let e$19=new Map();if(t$21.forEach(a$30=>e$19.set(a$30,[])),i$27.length==0)return e$19;let r$34=1,o$32=new Set(i$27),s$25=new Map();function n$46(a$30){if(!a$30)return r$34;let c$37=s$25.get(a$30);if(c$37)return c$37;let m$32=a$30.parentNode;return e$19.has(m$32)?c$37=m$32:o$32.has(m$32)?c$37=r$34:c$37=n$46(m$32),s$25.set(a$30,c$37),c$37;}return i$27.forEach(a$30=>{let c$37=n$46(a$30);c$37!==r$34&&e$19.get(c$37).push(a$30);}),e$19;}function Rs$2(t$21,i$27){t$21.classList?.add(i$27);}function Wp(t$21,i$27){t$21.classList?.remove(i$27);}function nhe(t$21,i$27,e$19){Ba(e$19).onDone(()=>t$21.processLeaveNode(i$27));}function ahe(t$21){let i$27=[];return YY(t$21,i$27),i$27;}function YY(t$21,i$27){for(let e$19=0;e$19<t$21.length;e$19++){let r$34=t$21[e$19];r$34 instanceof l$18?YY(r$34.players,i$27):i$27.push(r$34);}}function che(t$21,i$27){let e$19=Object.keys(t$21),r$34=Object.keys(i$27);if(e$19.length!=r$34.length)return!1;for(let o$32=0;o$32<e$19.length;o$32++){let s$25=e$19[o$32];if(!i$27.hasOwnProperty(s$25)||t$21[s$25]!==i$27[s$25])return!1;}return!0;}function GY(t$21,i$27,e$19){let r$34=e$19.get(t$21);if(!r$34)return!1;let o$32=i$27.get(t$21);return o$32?r$34.forEach(s$25=>o$32.add(s$25)):i$27.set(t$21,r$34),e$19.delete(t$21),!0;}function mhe(t$21,i$27){let e$19=null,r$34=null;return Array.isArray(i$27)&&i$27.length?(e$19=uw(i$27[0]),i$27.length>1&&(r$34=uw(i$27[i$27.length-1]))):i$27 instanceof Map&&(e$19=uw(i$27)),e$19||r$34?new lhe(t$21,e$19,r$34):null;}function uw(t$21){let i$27=null;return t$21.forEach((e$19,r$34)=>{dhe(r$34)&&(i$27=i$27||new Map(),i$27.set(r$34,e$19));}),i$27;}function dhe(t$21){return t$21===`display`||t$21===`position`;}function phe(t$21){switch(t$21){case`body`:return document.body;case`document`:return document;case`window`:return window;default:return t$21;}}function uhe(t$21){let i$27=t$21.indexOf(`.`);return[t$21.substring(0,i$27),t$21.slice(i$27+1)];}function ghe(){return new RC();}function yhe(t$21,i$27,e$19){return new DC(t$21,i$27,e$19);}function e6(){return ce$8(`NgEagerAnimations`),[...She];}function t6(){return[...vhe];}function s6(){return hD(()=>{let t$21=C$23(o6);C$23(Qn).getTreatmentWithConfig({name:O$16.FePlatformPreCacheCurrentVersion}).pipe(Ve$4(1),oe$13(e$19=>e$19.treatment===d$20.ON),q$20(e$19=>JSON.parse(e$19.config??`{}`))).subscribe(e$19=>{t$21.preloadCurrentVersion(e$19);});});}function d6(){return hD(()=>{C$23(l6).initListeners();});}function Che(){return{id:s$23().get(Us$2,e$19=>e$19)||``,email:``};}function _he(t$21){let i$27=t$21.selectSignal(b$17);return fN(()=>i$27()??Che());}function h6(){return{provide:r$2,deps:[q$19],useFactory:_he};}function khe(t$21){return t$21.select(Pl);}function g6(){return{provide:r$9,deps:[q$19],useFactory:khe};}function y6(){return{provide:he$3,useValue:Ihe};}function Ihe(t$21){return t$21.pipe(Xo$2(i$27=>(lA(i$27,{feature:`unknown`,ngrxEffects:!0}),qe$6(The({error:i$27})))));}function _6(){return hD(()=>{let t$21=C$23(C6),i$27=C$23(at$11);t$21.initialize().pipe(F$22(i$27)).subscribe();});}function T6(t$21,i$27){E6(`\u23F3 ${i$27}ms`,t$21);}function I6(t$21){E6(` Blocked`,t$21);}function E6(t$21,i$27){let e$19=new URL(i$27).pathname;console.log(`%c[ChaosMonkey]%c ${t$21}:`,`color: red; font-weight: bold;`,`color: inherit;`,e$19);}function w6(){return{provide:we$2,useClass:A6,multi:!0};}function M6(){return hD(()=>{let t$21=C$23(q$19),e$19=C$23(Tm).defaultView;if(!e$19){f$30.warn(`platform`,`Window is not available, NgRx devtools will not be initialized`);return;}e$19.logNgrxState=r$34=>{x$1(t$21,r$34);};});}function R6(t$21){return{provide:VC$1,useValue:t$21};}function Ahe(t$21){return{tokenGetter(){return t$21.getJWT();},allowedDomains:[`localhost:9004`,`localhost:3333`,`localhost:3434`,`localhost:3335`,`localhost:3336`,`localhost:3339`,`localhost:3342`,`localhost:3450`,`localhost:3451`,`localhost:3490`,`localhost:7331`,`localhost:3011`,`localhost:2929`,`localhost:2930`,`localhost:4040`,`localhost:4042`,`localhost:4201`,`localhost:7333`,`localhost:3346`,`localhost:3340`,`localhost:4242`,/^(?!.*gantt).*\.(clickup|clickup-qa|clickup-eu|clickup-eudev|clickup-staging|clickup-stg)\.(com|co)/],disallowedRoutes:[/.+\/v1\/refresh_token$/,/.+\/v1\/recover$/,/.+\/v1\/recover2$/,/.+\/v1\/pw$/,/.+\/v1\/login$/,/.+\/v1\/tokenLogin$/,/.+\/v1\/2fa\/phone$/,/.+\/v1\/2fa\/phone_no_password$/,/.+\/v1\/2fa\/fallback_phone$/,/.+\/v1\/2fa\/totp$/,/.+\/v1\/recover\/2fa$/,/.+\/v1\/2fa($|\?.+$)/,/.+\/assets\/favicons\/favicon-16x16\.png$/,/.+\/v1\/user\/delete$/,/.+\/workspace-v3\/core\/whitelabel$/,/.+\/v3-user\/core\/users\/email\/start$/,/.+\/v3-user\/core\/users\/email\/finish$/,/.+\/v3-user\/core\/users\/email\/resend-email-code$/,/.+\/vibeup\/apps\/.+$/]};}function x6(){return zn$1([{provide:w$14,useExisting:U$11,multi:!0},{provide:w$14,useExisting:bt,multi:!0},{provide:w$14,useExisting:R,multi:!0},{provide:w$14,useExisting:We,multi:!0},{provide:w$14,useExisting:nt,multi:!0},{provide:w$14,useExisting:et,multi:!0},{provide:w$14,useExisting:k$1,multi:!0},{provide:w$14,useExisting:z$2,multi:!0},{provide:w$14,useExisting:x$2,multi:!0}]);}function Mhe(){return hD(()=>{C$23(j6).initialize();});}function Fhe(){return hD(()=>{C$23(L6).initialize();});}function N6(t$21){return t$21 instanceof Se$9||t$21 instanceof j$18||t$21 instanceof M$20;}function B6(t$21){return typeof t$21==`object`&&t$21!==null&&`viewType`in t$21;}function $he(t$21,i$27){if(t$21&1){let e$19=YD();Kc$3(0,`cu-comment-attachment`,1),Fg(`onAttachmentPreview`,function(o$32){cu$2(e$19);return lu$1(BC().attachmentPreviewed(o$32));})(`imageLoaded`,function(){cu$2(e$19);return lu$1(BC().onImageLoaded());}),Jc$1();}if(t$21&2){let e$19=BC();dg(`attachment`,e$19.parsedAttachment)(`attributes`,e$19.parsedAttributes)(`taskId`,e$19.taskId||``)(`allowPreview`,e$19.allowPreview===`true`)(`noMargin`,e$19.noMargin===`true`)(`wrapperWidth`,e$19.width)(`wrapperInline`,e$19.wrapperInline===`true`);}}function jhe(){return m$30?`/`:`${window.location.origin}/`;}function Lhe(t$21,i$27,e$19={}){return e$19.useHash||m$30?new hn(t$21,i$27):new z6(t$21,i$27);}function i8(t$21,i$27){let e$19=t$21.user?.default_team;return!i$27?.length||i$27.some(r$34=>r$34.id===e$19)?e$19??null:i$27?.[0]?.id??null;}function a8(t$21,i$27){return Object.keys(t$21).reduce((r$34,o$32)=>(r$34[o$32]=i$27[o$32],r$34),{});}function Pw(t$21,i$27,e$19,r$34){return j$23([V$9({isPaymentMethodsLoading:e$19}),st$9({teamId:t$21,changes:i$27}),...(r$34?[X$9(r$34)]:[])]);}function Whe(t$21){return t$21?.ECODE===f8.PAY_001?j$23([V$9({isPaymentMethodsLoading:!1}),new _d({ECODE:t$21.ECODE,err:"Declined: Your bank didn't accept this transaction. Please contact your bank for more information."})]):j$23([V$9({isPaymentMethodsLoading:!1}),new _d(t$21)]);}function h8(t$21=zhe,i$27){switch(i$27.type){case y$12:return{...t$21,invoicesState:`loading`};case f$22:{let{downgrading:e$19}=i$27.payload;return{...t$21,downgrading:e$19};}case g$15:{let e$19=t$21.invoices.map(r$34=>({...r$34,fetching:!1,fetched:!1,url:null,safeUrl:null}));return{...t$21,invoices:e$19,lastInvoice:null};}case m$22:{let{name:e$19}=i$27.payload,r$34=t$21.checkoutPlan;return e$19===`professional`||e$19===O$17.Unlimited?r$34={...t$21.professionalPlan}:e$19===`business`||e$19===O$17.Business?r$34={...t$21.businessPlan}:e$19===`enterprise`||e$19===O$17.Enterprise?r$34={...t$21.enterprisePlan}:(e$19===`businessplus`||e$19===O$17.BusinessPlus)&&(r$34={...t$21.businessPlusPlan}),{...t$21,checkoutPlan:r$34,checkoutPlanName:e$19};}case G$12:{let e$19=i$27.payload;return{...t$21,invoicesState:`fetched`,invoices:e$19};}case M$13.type:{let{team:e$19,dontUpdatePlansExist:r$34,plans:o$32,addonPrices:s$25}=i$27,n$46=r$34?t$21.freeForeverPlan?{...t$21.freeForeverPlan}:{...o$32[O$17.FreeForever]}:{...o$32[O$17.FreeForever]},a$30=r$34?t$21.professionalPlan?{...t$21.professionalPlan}:{...o$32[O$17.Unlimited]}:{...o$32[O$17.Unlimited]},c$37=r$34?t$21.businessPlan?{...t$21.businessPlan}:{...o$32[O$17.Business]}:{...o$32[O$17.Business]},m$32=r$34?t$21.enterprisePlan?{...t$21.enterprisePlan}:{...o$32[O$17.Enterprise]}:{...o$32[O$17.Enterprise]},l$26=r$34?t$21.businessPlusPlan?{...t$21.businessPlusPlan}:{...o$32[O$17.BusinessPlus]}:{...o$32[O$17.BusinessPlus]},g$19=e$19.storage_used_bytes??0;g$19=g$19/Hhe;let f$33=e$19.plan_tier===O$17.FreeForever?n$7(e$19.plan_info?.storage):`100MB`;g$19>0&&g$19<10?g$19=parseFloat(g$19.toFixed(2)):g$19=Math.round(g$19);let h$15=e$19.billing_info?.storage_override,I$25=h$15?h$15*Ghe:100,A$22=g$19>I$25;return{...t$21,team:e$19,freeForeverPlan:n$46,professionalPlan:a$30,businessPlan:c$37,enterprisePlan:m$32,businessPlusPlan:l$26,storage:g$19,totalStorage:f$33,overLimit:A$22,...(s$25?{checkoutAddonPrices:s$25}:{})};}case E$12:{let{interval:e$19}=i$27.payload;return e$19=e$19||(t$21.interval===`monthly`?`yearly`:`monthly`),{...t$21,interval:e$19};}case A$16:{let e$19=i$27.payload;return{...t$21,showPromoCodeInput:e$19};}case xt$1.type:return{...t$21,promoCodeResolvingState:i$27.state};case _$8:return{...t$21,promoCodeState:`loading`,codeRemoved:!1,promoCode:null,promoCodes:{},promoCodeErrorCode:null};case O$13:{let e$19=i$27.payload.valid?`fetched`:`erred`,r$34=i$27.payload.valid?i$27.payload?.promo:null,o$32=!i$27.payload.valid&&i$27.payload.valid_err?.ECODE?i$27.payload.valid_err.ECODE:null;return{...t$21,promoCodeState:e$19,promoCode:r$34,promoCodes:i$27.payload.promoCodes?i$27.payload.promoCodes:t$21.promoCodes,promoCodeErrorCode:o$32};}case U$12:return{...t$21,promoCodeState:`erred`,promoCode:null,promoCodeErrorCode:null,promoCodes:{}};case w$16.type:return{...t$21,promoCodeState:`notFetched`};case S$15:return{...t$21,invoicesState:`notFetched`};case C$14:{let{invoiceId:e$19}=i$27.payload,r$34=[...t$21.invoices],o$32=r$34.findIndex(s$25=>s$25.id===e$19);return o$32!==-1&&(r$34[o$32]={...r$34[o$32],fetching:!0}),{...t$21,invoices:r$34};}case P$11:{let e$19=t$21.lastInvoice,{invoiceId:r$34,url:o$32,safeUrl:s$25}=i$27.payload,n$46=[...t$21.invoices],a$30=n$46.findIndex(c$37=>c$37.id===r$34);return a$30!==-1&&(n$46[a$30]={...n$46[a$30],fetching:!1,fetched:!0,url:o$32,safeUrl:s$25},a$30===0&&(e$19={id:r$34,url:s$25})),{...t$21,lastInvoice:e$19,invoices:n$46};}case H$5.type:return{...t$21,useNewLimits:!0};case z$11.type:case Z$7.type:case J$12.type:return{...t$21,isPaymentMethodsLoading:!0};case V$9.type:return{...t$21,isPaymentMethodsLoading:i$27.isPaymentMethodsLoading};case j$15.type:return{...t$21,shouldRefreshTeam:{cause:i$27.cause,shouldRefreshTeam:i$27.shouldRefreshTeam}};case tt$2.type:return{...t$21,billingPlansTrigger:void 0};case et$3.type:return{...t$21,billingPlansTrigger:i$27.trigger};case st$8.type:{let e$19={...i$27.quotaState};return e$19.data&&!e$19.data.taxRate&&(e$19.data.taxRate=0),{...t$21,quota:{...t$21.quota,...e$19}};}case v$17.type:return{...t$21,billingSettingsState:{...t$21.billingSettingsState,updatingTeam:{cause:void 0,isLoading:!1},paymentMethodsRetrieved:!0}};case k$16.type:return{...t$21,billingSettingsState:{...t$21.billingSettingsState,updatingTeam:{cause:i$27.options?.cause,isLoading:!0}}};case Q$12.type:return{...t$21,billingSettingsState:{...t$21.billingSettingsState,standaloneCheckoutAddonId:i$27.addonId}};case W$15.type:return{...t$21,codeRemoved:i$27.codeRemoved};default:return t$21;}}function w8(t$21,i$27){return{id:t$21,items:i$27.map(Qhe)};}function Qhe(t$21){return{id:t$21.id,url:t$21.dynamic_manifest_url||t$21.url,extension:t$21.extension};}function gn$1(t$21,i$27,e$19){return{...t$21,[i$27]:{...k$23(t$21,[i$27]),...e$19}};}function hn$1(t$21,i$27,e$19,r$34){return gn$1(t$21,i$27,{loading:{...k$23(t$21,[i$27,`loading`]),[e$19]:r$34}});}function Fs(t$21,i$27,e$19){let r$34=k$23(t$21,[i$27,`comments`]);return r$34?gn$1(t$21,i$27,{comments:e$19(r$34)}):t$21;}function P8(t$21,i$27,e$19){let r$34=[...t$21];return(t$21.some(s$25=>+s$25.date<+i$27.date)||e$19)&&(r$34=x$17([...r$34,i$27],s$25=>+s$25.date)),u$35(r$34,`id`);}function $8(t$21,i$27,e$19){return t$21.map(r$34=>r$34.id===i$27?{...r$34,removed:e$19}:r$34);}function $w(t$21,i$27,e$19,r$34=``){let o$32=[],s$25=[...(k$23(t$21,[i$27,`comments`])||[])],n$46=r$34?s$25.findIndex(a$30=>a$30.id===r$34):-1;return r$34&&s$25.length&&n$46>=0?o$32=[...s$25.slice(0,n$46),$e$1(e$19),...s$25.slice(n$46+1)]:o$32=[...s$25,$e$1(e$19)],gn$1(hn$1(t$21,i$27,`create`,!1),i$27,{comments:o$32});}function jw(t$21,i$27,e$19){return Object.keys(t$21).filter(r$34=>r$34.split(`_`)[1]===i$27||!/^\d+$/.test(r$34)&&t$21[r$34].comments?.some(o$32=>o$32.id===e$19));}function L8(t$21=j8,i$27){switch(i$27.type){case c$26.LoadCommentsStart:if(t$21[i$27.payload.type]?.[i$27.payload.parent]&&i$27.payload.type!==a$27.DocComment&&i$27.payload.type!==a$27.Comment&&i$27.payload.type!==a$27.DocViewComment&&i$27.payload.type!==a$27.Attachment){let o$32=E$15(t$21);return delete o$32[i$27.payload.type][i$27.payload.parent],hn$1(o$32,i$27.payload.key,`initial`,!0);}return gn$1(hn$1(t$21,i$27.payload.key,`initial`,!0),i$27.payload.key,{allCommentsLoaded:!1});case c$26.LoadCommentsSuccess:return hn$1(gn$1(t$21,i$27.payload.key,{comments:Us([...i$27.payload.comments].map($e$1)),allCommentsLoaded:i$27.payload.last_page||i$27.payload.comments.length===0}),i$27.payload.key,`initial`,!1);case c$26.LoadCommentsError:return hn$1(t$21,i$27.payload.key,`initial`,!1);case c$26.LoadMoreCommentsStart:return hn$1(t$21,i$27.payload.key,`paging`,!0);case c$26.LoadMoreCommentsCancel:return hn$1(t$21,i$27.payload.key,`paging`,!1);case c$26.LoadMoreCommentsSuccess:return gn$1(hn$1(t$21,i$27.payload.key,`paging`,!1),i$27.payload.key,{comments:[...Us([...i$27.payload.comments].map($e$1)),...k$23(t$21,[i$27.payload.key,`comments`])],allCommentsLoaded:i$27.payload.last_page||i$27.payload.comments.length===0});case c$26.LoadMoreCommentsError:return hn$1(t$21,i$27.payload.key,`paging`,!1);case c$26.CreateCommentStart:{let o$32=i$27.payload.comment;return i$27.payload.isPending?$w(t$21,i$27.payload.key,o$32):hn$1(t$21,i$27.payload.key,`create`,!0);}case c$26.CreateCommentSuccess:{let o$32=`${i$27.payload.type}_${i$27.payload.parent}`,s$25=$w(t$21,i$27.payload.key,i$27.payload.comment,i$27.payload.pendingId);return o$32!==i$27.payload.key?$w(s$25,o$32,i$27.payload.comment):s$25;}case c$26.CreateCommentFromWebsocket:{let o$32=k$23(t$21,[i$27.payload.key,`comments`]);return o$32?gn$1(t$21,i$27.payload.key,{comments:P8(o$32,$e$1(i$27.payload.comment),!0),newActivityCommentId:k$23(t$21,[i$27.payload.key,`newActivityCommentId`])||i$27.payload.comment.id}):t$21;}case c$26.CreateCommentError:return hn$1(t$21,i$27.payload.key,`create`,!1);case c$26.DeleteCommentStart:case c$26.DeleteCommentError:return jw(t$21,i$27.payload.parent,i$27.payload.commentId).reduce((s$25,n$46)=>Fs(s$25,n$46,a$30=>a$30.map(c$37=>c$37.id===i$27.payload.commentId?{...c$37,removed:i$27.type===c$26.DeleteCommentStart}:c$37)),t$21);case c$26.DeleteCommentSuccess:case c$26.DeleteCommentFromWebsocket:return jw(t$21,i$27.payload.parent,i$27.payload.commentId).reduce((s$25,n$46)=>Fs(s$25,n$46,a$30=>a$30.filter(c$37=>c$37.id!==i$27.payload.commentId&&(!c$37.removed||i$27.type!==c$26.DeleteCommentFromWebsocket))),t$21);case c$26.UndoDeleteCommentStart:return jw(t$21,i$27.payload.parent,i$27.payload.commentId).reduce((s$25,n$46)=>Fs(s$25,n$46,a$30=>$8(a$30,i$27.payload.commentId,!1)),t$21);case c$26.UndoDeleteCommentError:return Fs(t$21,i$27.payload.key,o$32=>$8(o$32,i$27.payload.commentId,!0));case c$26.UndoDeleteCommentFromWebsocket:return Fs(t$21,i$27.payload.key,o$32=>P8(o$32,i$27.payload.comment,!0));case c$26.UpdateCommentData:case c$26.UpdateCommentStart:case c$26.UpdateCommentFromWebsocket:return Fs(t$21,i$27.payload.key,o$32=>i$27.payload.removeResolved&&i$27.payload.comment.resolved?o$32.filter(s$25=>s$25.id!==i$27.payload.comment.id):o$32.map(s$25=>s$25.id===i$27.payload.comment.id?$e$1(i$27.payload.comment):s$25));case c$26.LoadCommentLinksAndMentionsSuccess:return gn$1(t$21,i$27.payload.key,{links:i$27.payload.links,taskMentions:i$27.payload.taskMentions});case c$26.ClearNewActivityId:return gn$1(t$21,i$27.payload.key,{newActivityCommentId:null});case c$26.AddUserViewing:case c$26.AddUserTyping:{let o$32=i$27.type===c$26.AddUserViewing?`viewing`:`typing`,s$25=k$23(t$21,[i$27.payload.key,`users`],{viewing:[],typing:[]});return gn$1(t$21,i$27.payload.key,{users:{...s$25,[o$32]:u$35([...s$25[o$32],i$27.payload.user],`id`)}});}case c$26.RemoveUserViewing:case c$26.RemoveUserTyping:{let o$32=i$27.type===c$26.RemoveUserViewing?`viewing`:`typing`,s$25=k$23(t$21,[i$27.payload.key,`users`],{viewing:[],typing:[]}),n$46=i$27.payload.user!==void 0?i$27.payload.user.id:null;return gn$1(t$21,i$27.payload.key,{users:{...s$25,[o$32]:s$25[o$32].filter(a$30=>a$30.id!==n$46)}});}case c$26.UpdateCommentAttachment:return Fs(t$21,i$27.payload.key,o$32=>o$32.map(s$25=>s$25.id===i$27.payload.commentId?{...s$25,comment:s$25.comment.map(n$46=>n$46.type===`attachment`&&n$46.attachment.id===i$27.payload.attachment.id?{...n$46,attachment:Te$7(i$27.payload.attachment)}:n$46)}:s$25));case c$26.AddCommentReaction:case c$26.RemoveCommentReaction:return Fs(t$21,i$27.payload.key,o$32=>o$32.map(s$25=>s$25.id===i$27.payload.comment.id?{...s$25,reactions:i$27.payload.comment.reactions}:s$25));case c$26.AddThreadFollowers:return Fs(t$21,i$27.payload.key,o$32=>o$32.map(s$25=>s$25.id===i$27.payload.commentId?{...s$25,thread_followers:[...(s$25.thread_followers||[]),...i$27.payload.followers]}:s$25));case c$26.DeleteThreadFollowers:return Fs(t$21,i$27.payload.key,o$32=>o$32.map(s$25=>s$25.id===i$27.payload.commentId?{...s$25,thread_followers:s$25.thread_followers?.filter(n$46=>!i$27.payload.followers.some(a$30=>a$30.id===n$46.id))}:s$25));case c$26.EditCommentAttachmentSuccess:let e$19,r$34;return Object.entries(t$21).forEach(([o$32,{comments:s$25}])=>{s$25.forEach(n$46=>{n$46.comment.some(a$30=>a$30.type===`attachment`&&a$30.attachment.id===i$27.payload.attachment.id)&&(e$19=o$32,r$34=n$46.id);});}),e$19?Fs(t$21,e$19,o$32=>o$32.map(s$25=>s$25.id===r$34?{...s$25,comment:s$25.comment.map(n$46=>n$46.type===`attachment`&&n$46.attachment.id===i$27.payload.attachment.id?{...n$46,attachment:Te$7(i$27.payload.attachment)}:n$46)}:s$25)):t$21;default:return Yhe(t$21,i$27);}}function D8(t$21,i$27,e$19){if(i$27.length===0)return t$21;if(t$21.length===0)return i$27;let r$34=new Map();i$27.forEach(n$46=>{r$34.set(n$46.id,n$46);});let o$32=[],s$25=new Set();for(let n$46 of t$21){let a$30=r$34.get(n$46.id);if(a$30){let c$37=Xhe(n$46,a$30,e$19);o$32.push(c$37);}else o$32.push(n$46);s$25.add(n$46.id);}for(let n$46 of i$27)s$25.has(n$46.id)||o$32.push(n$46);return o$32.sort((n$46,a$30)=>{return new Date(n$46.date).getTime()-new Date(a$30.date).getTime();}),o$32;}function Xhe(t$21,i$27,e$19){let r$34=st$4(t$21),o$32=st$4(i$27);return!r$34||!o$32?t$21:e$19(r$34,ns$1(i$27))?i$27:t$21;}function Lw(t$21,i$27){let e$19=i$27.map(r$34=>r$34.id);return e$19.push(t$21),n$23.deleteBulkCommentsOptimistically({commentIds:e$19});}function e_(t$21,i$27){let e$19=t$21.root_parent_id??i$27?.root_parent_id??t$21.parent;return{...t$21,root_parent_id:e$19,userid:t$21.userid??t$21.user?.id};}function B8(t$21){return t$21.map(i$27=>e_(i$27));}function Dw(t$21,i$27){return{createCommentDto:JSON.parse(t$21.create_comment_dto),dateToSendAt:t$21.date_to_send_at,entityId:t$21.entity_id,entityType:t$21.entity_type,id:t$21.id,workspaceId:i$27};}function Nw(t$21){return G$10({paginationPrefix:t$21.paginationPrefix,parentId:t$21.filters.parent?.id,parentType:t$21.filters.parent?.type});}function Q8(t$21,i$27){return t$21.map(e$19=>{let r$34=i$27[e$19.id],o$32=(r$34?.creating?.size??0)-(r$34?.deleting?.size??0);return o$32===0?e$19:{...e$19,threaded_replies:Math.max(0,(e$19.threaded_replies??0)+o$32)};});}function Y8(t$21,i$27,e$19,r$34){let o$32=s$25=>({id:s$25,changes:{reactions:e$19}});return r$34?Ue$3.updateMany([o$32(i$27),o$32(r$34)],t$21):Ue$3.updateOne(o$32(i$27),t$21);}function rge(t$21,i$27){let e$19=t$21.entities[i$27.commentId],r$34=Z8(e$19),s$25=[...(e$19?.reactions??[]),{user:{id:i$27.userId,email:``},userid:i$27.userId,reaction:i$27.reaction}];return Y8(X8(t$21,i$27),i$27.commentId,s$25,r$34);}function ige(t$21,i$27){let e$19=t$21.entities[i$27.commentId],r$34=Z8(e$19),s$25=(e$19?.reactions??[]).filter(n$46=>!R$3(n$46,i$27.reaction,i$27.userId));return Y8(X8(t$21,i$27,!0),i$27.commentId,s$25,r$34);}function X8(t$21,i$27,e$19=!1){if(e$19&&t$21.lastReaction&&t$21.lastReaction.commentId===i$27.commentId&&U$16(t$21.lastReaction.userId,i$27.userId)&&t$21.lastReaction.reaction===i$27.reaction)return{...t$21,lastReaction:null};if(e$19||U$16(i$27.userId,i$27.myUserId))return t$21;let r$34=t$21.entities[i$27.commentId];return U$16(r$34?.userid,i$27.myUserId)?{...t$21,lastReaction:i$27}:t$21;}function Z8(t$21){return t$21?.comment_type_data?.stub_comment_id;}function Vw({pendingRepliesByParent:t$21,parentId:i$27,commentId:e$19,type:r$34}){let o$32=t$21[i$27],s$25=o$32?.[r$34];return s$25?s$25.has(e$19)?t$21:{...t$21,[i$27]:{...o$32,[r$34]:new Set([...s$25,e$19])}}:{...t$21,[i$27]:{...o$32,[r$34]:new Set([e$19])}};}function Xf({pendingRepliesByParent:t$21,parentId:i$27,commentId:e$19,type:r$34}){let o$32=t$21[i$27],s$25=o$32?.[r$34];if(!s$25||!s$25.has(e$19))return t$21;let n$46=new Set(s$25);return n$46.delete(e$19),{...t$21,[i$27]:{...o$32,[r$34]:n$46}};}function Hw(t$21){let i$27=t$4(t$21),e$19=Jc$2(i$27),r$34=Se(i$27);return e$19?.object_id||r$34?.object_id;}function a7(t$21,i$27){return i$27&&(t$21.name===t$17.ChatCommentCreated||t$21.name===t$17.CommentCreated);}function c7({event:t$21,isFromCurrentUser:i$27,isInActiveThread:e$19,commentId:r$34,useSearchNewMessages:o$32}){let n$46=o$5(t$4(t$21))?.object_id,a$30=Hw(t$21);return a7(t$21,o$32)?cge({isFromCurrentUser:i$27,isInActiveThread:e$19,roomId:a$30,parentCommentId:n$46}):age({isFromCurrentUser:i$27,isInActiveThread:e$19,commentId:r$34,parentCommentId:n$46,event:t$21});}function age({isFromCurrentUser:t$21,isInActiveThread:i$27,commentId:e$19,parentCommentId:r$34,event:o$32}){let s$25=[e$19];return r$34&&(s$25=i$27?[e$19,r$34]:[r$34]),[n$23.getComment({commentIds:s$25,updateLastCommentDateAddedByUser:t$21,event:o$32})];}function cge({isFromCurrentUser:t$21,isInActiveThread:i$27,roomId:e$19,parentCommentId:r$34}){if(!e$19)return[];if(r$34){let o$32=[n$23.getComment({commentIds:[r$34],updateLastCommentDateAddedByUser:t$21})];return i$27&&o$32.push(n$23.searchNewMessagesForParents({parents:[{id:r$34,type:a$27.Comment}]})),o$32;}return[n$23.searchNewMessagesForParents({parents:[{id:e$19,type:a$27.ConversationView}]})];}function l7(t$21){return t$4(t$21).some(e$19=>mge(e$19)||lge(e$19));}function mge(t$21){return t$21.type===`comment-parent`&&t$21.object_type===et$6.PAGE;}function lge(t$21){return t$21.type===`thread-parent`&&t$21.object_type===et$6.PAGE;}function d7({event:t$21,shouldAlwaysFetch:i$27,activeRoomsIds:e$19,activeThreadIds:r$34,roomSearchNewMessagesEnabled:o$32,currentUserId:s$25}){let n$46=t$5(t$21),a$30=o_(t$21,e$19),c$37=i_(t$21,r$34),m$32=m7(t$21,s$25),l$26=l7(t$21);return a$30||c$37?c7({commentId:n$46,event:t$21,isFromCurrentUser:m$32,isInActiveThread:c$37,useSearchNewMessages:o$32}):i$27||l$26?[n$23.getComment({commentIds:[n$46],updateLastCommentDateAddedByUser:m$32})]:[];}function s_(t$21){let i$27=t$4(t$21),e$19=i$27.find(s$25=>s$25.type===`comment-parent`),r$34=i$27.find(s$25=>s$25.type===`thread-parent`);if(!e$19)return null;let o$32=Yc(e$19.object_type);if(r$34){let s$25=Yc(r$34.object_type);return{parent:{id:e$19.object_id,type:o$32},root_parent:{id:r$34.object_id,type:s$25}};}return{parent:{id:e$19.object_id,type:o$32},root_parent:{id:e$19.object_id,type:o$32}};}function dge(t$21){return H$1(t$21).find(e$19=>e$19.field===`comment`)?.after;}function pge(t$21){let i$27=u$31(()=>JSON.parse(dge(t$21)??``));if(!(!i$27||e$4(i$27)))return i$27;}function uge(t$21){return H$1(t$21).find(e$19=>e$19.field===`date_created`)?.after?.toString();}function p7(t$21){try{let i$27=t$5(t$21),e$19=pge(t$21),o$32=Yc$2(t$4(t$21)),s$25=s_(t$21),n$46=uge(t$21);return!e$19||!s$25||!o$32?null:{comment:e$19,id:i$27,userid:o$32.object_id,parent:s$25.parent.id,type:s$25.parent.type,root_parent_id:s$25.root_parent.id,root_parent_type:s$25.root_parent.type,date:n$46??t$21.date_created.toString(),reactions:[],user:{id:o$32.object_id,email:``}};}catch{return null;}}function u7(t$21){let i$27=p7(t$21);return i$27?[n$23.createCommentOptimistically({comment:i$27,event:t$21})]:[];}function a_(t$21,i$27){return(t$21??[]).map(e$19=>!e$19.customField||!i$27[e$19.customField.id]?e$19:{...e$19,state:_$5.Visible});}function E7(t$21){let i$27=t$21?.taskCustomType;if(i$27)return[{object_id:i$27,object_type:Cr.CustomTypeObject}];}function A7(t$21,i$27,e$19,r$34){let o$32=[];for(let n$46 of i$27){let a$30=e$19[n$46];if(!a$30)continue;let m$32=a$30[B$5(r$34.type)]?.find(l$26=>l$26.id===r$34.id);m$32&&(m$32.applied_objects?o$32.push(...m$32.applied_objects):o$32.push(Bt$1));}let s$25=u$35([...o$32,...(t$21??[Bt$1])],n$46=>`${n$46?.object_id}-${n$46?.object_type}`);return s$25.length===1&&s$25[0].object_id===Bt$1.object_id&&s$25[0].object_type===Bt$1.object_type?null:s$25;}function m_(t$21){return t$21.map(i$27=>({type:`default`,key:M7+i$27,label:"Adding field...",spinner:!0,position:`alignedWithSidebar`}));}function l_(t$21,i$27){return Object.keys(t$21).filter(r$34=>t$21[r$34]).map(r$34=>{let o$32=i$27.find(s$25=>s$25.id===r$34)?.name;return{type:`default`,key:M7+r$34,label:o$32?"Added field \""+o$32+"\"":"Added field",icon:`circleCheckFilledColor`,iconClass:`success`,position:`alignedWithSidebar`};});}function $7({dataViewEntities:t$21,dataViewIdMap:i$27,mergedFieldIds:e$19,newFieldId:r$34}){let s$25=u$37(Object.values(i$27.subcategory||{}).flat(),t$21);if(!s$25?.length)return;let n$46=[];for(let a$30=0;a$30<s$25.length;a$30++){let c$37=s$25[a$30];if(!c$37?.columns?.fields?.length)continue;let m$32=vge({fields:c$37.columns.fields,newFieldId:r$34,mergedFieldIds:e$19});m$32?.length&&n$46.push({id:c$37.id,changes:{columns:{fields:m$32}}});}if(n$46.length)return n$46;}function vge({fields:t$21,newFieldId:i$27,mergedFieldIds:e$19}){let r$34=!1,o$32=!1,s$25=[];for(let n$46=0;n$46<t$21.length;n$46++){let a$30=t$21[n$46],c$37=a$30.field.replace(`cf_`,``);if(!e$19.includes(c$37)){s$25.push(a$30);continue;}r$34=!0,o$32||(s$25.push({...a$30,field:`cf_${i$27}`}),o$32=!0);}return r$34?s$25:void 0;}function N7(t$21,i$27){if(!i$27)return;let{updatedTasks:e$19,failedTasks:r$34}=i$27;if(e$19>0&&r$34===0)return new je$3("{updatedTasks} {updatedTasks, plural, =1 {task was} other {tasks were}} updated <span style=\"color: var(--cu-content-success)\">successfully</span>.",t$21,void 0,{ignoreTag:!0}).format({updatedTasks:e$19}).toString();if(e$19===0&&r$34>0)return new je$3("All {failedTasks, number} {failedTasks, plural, =1 {task} other {tasks}} <span style=\"color: var(--cu-content-danger)\">failed to update</span>. You may need more context in each task to provide relevant responses.",t$21,void 0,{ignoreTag:!0}).format({failedTasks:r$34}).toString();if(e$19>0&&r$34>0)return new je$3("{updatedTasks, number} {updatedTasks, plural, =1 {task was} other {tasks were}} updated <span style=\"color: var(--cu-content-success)\">successfully</span>. {failedTasks, number} {failedTasks, plural, =1 {task} other {tasks}} <span style=\"color: var(--cu-content-danger)\">failed to update</span>.",t$21,void 0,{ignoreTag:!0}).format({updatedTasks:e$19,failedTasks:r$34}).toString();}function p_(t$21,i$27){if(i$27){let r$34=new je$3("Unable to update with <span style=\"color: #7A28E2\">Brain</span>",t$21,void 0,{ignoreTag:!0});return String(r$34.format({}));}let e$19=new je$3("Field was updated by <span style=\"color: #7A28E2\">Brain</span>",t$21,void 0,{ignoreTag:!0});return String(e$19.format({}));}function B7(t$21,i$27){let e$19="Generating field values...",r$34=i$27?i$27.replace(/^./,i$27[0].toUpperCase()):``;return{key:u_,label:r$34?"Generating "+r$34+" values...":e$19,type:`default`,buttonText:t$21?"Stop":void 0,buttonHotkey:t$21?`Esc`:void 0,buttonAction:t$21,timeout:999999,spinner:!0};}function V7({hasUndoValues:t$21,hasGenerateMoreButton:i$27=!1,onUndo:e$19,onGenerateMore:r$34}){let o$32=[],s$25=c$30();if(t$21){let n$46={name:"Undo",buttonSize:m$23.small,buttonType:i$27?t$16.outline:t$16.primary,buttonHotkey:s$25?`Z`:`Ctrl+Z`,callback:e$19};o$32.push(n$46);}if(i$27){let n$46={name:"Generate more",buttonSize:m$23.small,buttonType:t$16.primary,buttonTooltip:"Generate values for the next set of tasks in this list.",callback:r$34};o$32.push(n$46);}return o$32;}function U7({fieldId:t$21,customField:i$27,previousValuesMap:e$19,isTaskProperty:r$34,tasks:o$32}){let s$25=[];for(let[n$46,a$30]of Object.entries(e$19)){if(!r$34&&i$27){s$25.push(t$9({field:i$27,taskId:n$46,value:a$30?.value??``,valueOptions:a$30?.value_options,valueRichtext:a$30?.value_richtext,via:`ai-generate`}));continue;}if(!r$34)continue;let c$37=o$32.find(m$32=>m$32.id===n$46);c$37&&s$25.push(new x$21([{...c$37,[Sge[t$21]]:a$30.value}]));}return s$25;}function W7(t$21,i$27,e$19){return i$27.type!==a$24.LongText?{value:t$21,valueRichtext:void 0}:e$19?{value:pp(JSON.parse(t$21??``)),valueRichtext:t$21}:{value:t$21,valueRichtext:JSON.stringify(zu(t$21??``))};}function f_(t$21,i$27){return t$21.reduce((e$19,r$34)=>{let o$32=r$34.customFieldValues?.find(c$37=>c$37.field_id===i$27),s$25=o$32?o$32.value:r$34.customFields?.find(c$37=>c$37.id===i$27)?.value,n$46=o$32?o$32.value_richtext:r$34.customFields?.find(c$37=>c$37.id===i$27)?.value_richtext,a$30=o$32?o$32.value_options:r$34.customFields?.find(c$37=>c$37.id===i$27)?.value_options;return e$19[r$34.id]={value:s$25,value_richtext:n$46,value_options:a$30},e$19;},{});}function Xc$2({error:t$21,action:i$27,contentAssistantQuotaRunOutLoader:e$19,toastService:r$34,historyIds:o$32,previousValuesMap:s$25}){let{fieldId:n$46,taskIds:a$30,via:c$37}=i$27,m$32=[Jo$1({fieldId:n$46,taskIds:a$30})];return(t$21?.error||t$21)?.ECODE===`AI_001`?e$19.showQuotaRunOutModal(c$37):r$34.displayErrorToast({fieldId:n$46,historyIds:o$32,previousValuesMap:s$25,errors:{},taskIds:a$30}),j$23(m$32);}function G7(t$21,i$27,e$19,r$34){return t$21.type===zo$2.type&&t$21.isTaskProperty?qo({fieldId:t$21.fieldId,taskId:e$19,value:r$34}):r$34||H7.includes(i$27?.type_config?.ai?.source)?qo({fieldId:t$21.fieldId,taskId:e$19,value:r$34}):Xo({taskId:e$19,jobId:t$21.fieldId,value:"Not enough information to generate"});}function Gp({action:t$21,event:{data:i$27},historyIds:e$19,previousValuesMap:r$34,errors:o$32,field:s$25}){let n$46=t$21.fieldId,a$30=[];t$21.type===Yo.type?a$30=[]:a$30=t$21.taskIds;let{status:c$37,taskId:m$32,content:l$26}=i$27;return c$37===`finished`&&!m$32?Go({fieldId:n$46,taskIds:a$30,historyIds:e$19,previousValuesMap:r$34,errors:o$32,isTaskProperty:t$21.isTaskProperty}):m$32?c$37===`inProgress`?G7(t$21,s$25,m$32,l$26):c$37===`error`?Xo({taskId:m$32,jobId:n$46,value:i$27.error}):Zo({taskId:m$32,jobId:n$46,isTaskProperty:t$21.type===zo$2.type&&t$21.isTaskProperty}):{type:`noop`};}function eh(t$21){return t$7(a$24.Dropdown,t$21)&&typeof t$21.value==`number`?t$21.type_config.options[t$21.value]?.id:t$21.value;}function q7(t$21,i$27){return t$21?.executionBatchId?i$27.every(e$19=>e$19?.isCompleted):!0;}function K7(t$21){return t$21.length?t$21.reduce((i$27,e$19)=>(i$27.updatedTasks+=e$19?.updatedTasks||0,i$27.failedTasks+=e$19?.failedTasks||0,e$19?.historyIds&&Object.entries(e$19.historyIds).forEach(([r$34,o$32])=>{i$27.historyIds[r$34]||(i$27.historyIds[r$34]=[]),i$27.historyIds[r$34]=[...i$27.historyIds[r$34],...o$32];}),e$19?.previousValuesMap&&(i$27.previousValuesMap={...i$27.previousValuesMap,...e$19.previousValuesMap}),i$27),{updatedTasks:0,failedTasks:0,historyIds:{},previousValuesMap:{}}):{updatedTasks:0,failedTasks:0,historyIds:{},previousValuesMap:{}};}function h_(t$21){return t$21.status===`processing`||t$21.status===`pending`;}function em$1(t$21,i$27,e$19){let r$34=w$22();return i$27.map(o$32=>({id:o$32.id,fieldId:t$21,taskIds:o$32.details.tasks.map(s$25=>s$25.taskId),groupId:e$19,executionBatchId:r$34}));}function Q7(t$21,i$27){return(`payload`in i$27?i$27.payload?.hist_item??[]:[]).filter(o$32=>o$32.field.startsWith(`cf_`)).map(o$32=>o$32.field.replace(`cf_`,``)).map(o$32=>nr$3({fieldId:o$32,taskId:t$21}));}function y_(t$21){if(!t$21.length)throw new Error(g_);}function v_(t$21){return t$21.reduce((i$27,e$19)=>i$27+e$19.taskIds.length,0);}function th(t$21,i$27){return(t$21?.error||t$21)?.ECODE===`AI_001`?(i$27.showQuotaRunOutModal(),qe$6()):qe$6(new _d({err:t$21?.message||g_,sendAnalytics:!0,originalError:t$21,userFacing:!0,forceShow:!0}));}function Z7(t$21){return t$21.reduce((i$27,e$19)=>(e$19.message!==void 0&&!e$19.kind&&(e$19.type===`error`||e$19.type===`info`)?i$27.errorInfoEvents.push(e$19):e$19.type===`progress_info`&&e$19.kind===`value_calculated`?i$27.valueCalculatedEvents.push(e$19):e$19.type===`progress_info`&&e$19.kind===`job_completed`&&i$27.jobCompletedEvents.push(e$19),i$27),{errorInfoEvents:[],valueCalculatedEvents:[],jobCompletedEvents:[]});}function S_(t$21,i$27){return t$21.reduce((e$19,r$34)=>{switch(i$27){case`priority`:e$19[r$34.id]={value:r$34.priority};break;case`assignee`:e$19[r$34.id]={value:r$34.assignees};break;case`type`:e$19[r$34.id]={value:r$34.type};break;default:}return e$19;},{});}function rX(t$21){let{task_property:{data:i$27}}=t$21.data;return{taskPropertyId:i$27.task_property_id,propertyType:i$27.property_type,config:i$27.config.ai.opts,parentId:i$27.parents[0].parent_id,parentType:i$27.parents[0].parent_type};}function iX(t$21,i$27,e$19){let{task_properties:r$34}=t$21?.data??{task_properties:[]};return r$34.map(o$32=>{let{data:{task_property_id:s$25,property_type:n$46,config:a$30}}=o$32;return{taskPropertyId:s$25,propertyType:n$46,config:a$30.ai.opts,parentId:Number(i$27),parentType:o$12(e$19)};});}function oX(t$21,i$27,e$19,{users:r$34}){switch(i$27){case`priority`:return{...t$21,priority:T$15[e$19]};case`assignee`:try{let s$25=JSON.parse(e$19).assignees.map(n$46=>r$34?.find(a$30=>`${a$30.id}`==`${n$46}`)).filter(n$46=>!!n$46);return{...t$21,assignees:s$25};}catch{return t$21;}default:return t$21;}}function vX(t$21,i$27){if(!i$27?.frequency?.listViewOpen)return!1;let{visits:e$19,apiCalls:r$34}=t$21,o$32=Date.now(),{every:s$25,throttle:n$46}=i$27.frequency.listViewOpen;if(e$19.length<s$25)return!1;if(n$46){let{limit:a$30,interval:c$37}=n$46,m$32=c$37*60*1e3;if(r$34.filter(g$19=>o$32-g$19.calledAt<=m$32).length>=a$30)return!1;}return!0;}function bX(t$21){return t$21.type===a$24.Dropdown||t$21.type===a$24.Labels;}function CX(t$21){return t$21.map(i$27=>{if(`label`in i$27)return i$27.label;if(`name`in i$27)return i$27.name;}).filter(i$27=>i$27!==void 0);}function Cge(t$21){return t$21.type_config!==void 0&&`options`in t$21.type_config;}function _X({field:t$21,updates:i$27,task:e$19,addNewOptionToTask:r$34}){if(!r$34||!e$19||!bX(t$21)||!Cge(i$27))return;let o$32=CX(t$21.type_config.options);return CX(i$27.type_config.options).find(n$46=>!o$32.includes(n$46));}function _ge(t$21){return t$21[t$21.length-1].id;}function kX(t$21,i$27){let{options:e$19}=i$27.type_config,r$34=_X(t$21);return e$19.find(s$25=>s$25.name===r$34||`label`in s$25&&s$25.label===r$34)?.id??_ge(e$19);}function TX(t$21){return{newFieldId:t$21.version_change?.object_id,oldFieldIds:kge(t$21.version_event_data),messageType:t$21.name};}function kge(t$21){return t$21.relationships?.filter(i$27=>i$27.type===`custom-field-replaced`).map(i$27=>i$27.object_id)??[];}function IX(t$21){return{fieldId:t$21.version_change?.object_id,messageType:t$21.name};}function zp(t$21){let[i$27,e$19]=t$21.split(`_`),r$34;switch(Number(i$27)){case C$21.TEAM:r$34=`team`;break;case C$21.PROJECT:r$34=`project`;break;case C$21.CATEGORY:r$34=`category`;break;case C$21.SUBCATEGORY:r$34=`subcategory`;break;default:return;}return{id:e$19,type:r$34};}function EX(t$21){let i$27=t$21.version_event_data?.changes?.find?.(r$34=>!!r$34.after)?.after||``,e$19=t$21.version_event_data?.changes?.find?.(r$34=>!!r$34.before)?.before||``;return{fieldId:t$21.version_change?.object_id,entity:zp(i$27),movedFromEntity:zp(e$19)};}function AX(t$21){let i$27=t$21.version_event_data?.changes?.find?.(r$34=>!!r$34.before)?.before||``,e$19=t$21.version_event_data?.changes?.find?.(r$34=>!!r$34.after)?.after||``;return{fieldId:t$21.version_change?.object_id,entity:zp(i$27),movedToEntity:zp(e$19)};}function wX(t$21){return{fieldId:t$21.version_change?.object_id,messageType:t$21.name};}function Kw(t$21,i$27){let e$19={};if(!t$21||t$21.type===`team`)return qe$6(e$19);switch(t$21.type){case`project`:return Tge(t$21.id,i$27);case`category`:return Ige(t$21.id,i$27);case`subcategory`:return qe$6({subcategory:[t$21.id]});default:}return qe$6(e$19);}function RX({action:t$21,dataViewEntities:i$27,dataViewIdGroup:e$19,newEntities:r$34,oldEntities:o$32}){if(!e$19)return[];let s$25=`cf_${t$21.fieldId}`,n$46=[];return Object.entries(e$19).forEach(([a$30,c$37])=>{if(t$21.entity?.type===`team`&&r$34.includes(a$30)||t$21.entity?.type!==`team`&&!o$32.includes(a$30)||r$34.includes(a$30))return;u$37(c$37,i$27).forEach(l$26=>{let g$19=Ege(l$26,s$25);g$19&&n$46.push(g$19);});}),n$46;}function Ege(t$21,i$27){let e$19=t$21.columns?.fields;if(!(!e$19?.length||!e$19.some(o$32=>o$32.field===i$27)))return{id:t$21.id,changes:{columns:{fields:e$19.filter(o$32=>o$32.field!==i$27)}}};}function FX({data:t$21,dataViewIdMap:i$27,dataViewEntities:e$19}){let{action:r$34}=t$21;if(r$34.movedToEntity?.type===`team`)return;let o$32=[`project`,`category`,`subcategory`],s$25=[];for(let n$46 of o$32)s$25.push(...RX({action:t$21.action,dataViewEntities:e$19,dataViewIdGroup:i$27[n$46],newEntities:t$21.newEntities[n$46]??[],oldEntities:t$21.oldEntities[n$46]??[]}));return r$34.entity?.type===`team`&&s$25.push(...RX({action:t$21.action,dataViewEntities:e$19,dataViewIdGroup:i$27.team,newEntities:[r$34.entity.id],oldEntities:[]})),s$25.length?s$25:void 0;}function xX(t$21){if(!_g(t$21))return null;let i$27=t$21.meta?.authorization_failures;if(!i$27?.length)return null;let e$19=i$27.filter(r$34=>r$34.code===ue$6.Deleted&&r$34.object_id).map(r$34=>r$34.object_id);return e$19.length?new Set(e$19):null;}function Age(t$21,i$27){return!t$21&&!i$27?null:t$21===null&&i$27?[...i$27,Bt$1]:i$27===null&&t$21?[...t$21,Bt$1]:[...(t$21||[]),...(i$27||[])];}function PX(t$21,i$27,e$19){if(!t$21)return i$27;let o$32=n$40([...(t$21.teams??[]),...(t$21.categories??[]),...(t$21.projects??[]),...(t$21.subcategories??[])],`id`),s$25=n$40(i$27,`id`);return Array.from(new Set([...Object.keys(o$32),...Object.keys(s$25)])).map(n$46=>{let a$30=s$25[n$46],c$37=o$32[n$46],m$32=c$37?c$37.applied_objects??null:void 0;return{...(a$30??{...c$37,type:c$37.entity}),applied_objects:Age(m$32,e$19)};});}function $X(t$21,i$27,e$19,r$34=!1){return e$19?.length?i$27.type===`team`?(e$19&&r$34&&(t$21={...t$21,applied_objects:e$19.filter(o$32=>o$32.object_type===Cr.CustomTypeObject)}),{...t$21,teams:[{id:i$27.id,name:i$27.name,entity:`team`,applied_objects:e$19}]}):i$27.type===`project`?{...t$21,projects:[{id:i$27.id,name:i$27.name,project_access:!0,applied_objects:e$19,entity:`project`}]}:i$27.type===`category`?{...t$21,categories:[{id:i$27.id,name:i$27.name,category_access:!0,applied_objects:e$19,entity:`category`}]}:i$27.type===`subcategory`?{...t$21,subcategories:[{id:i$27.id,name:i$27.name,subcategory_access:!0,applied_objects:e$19,entity:`subcategory`}]}:t$21:t$21;}function jX(t$21,i$27,e$19){let o$32=e$19[t$5(t$21)];if(!o$32||!i$27)return!1;let s$25=wge(o$32,i$27.grouping),n$46=Mge(o$32,i$27.filter),a$30=Rge(o$32,i$27.columns?.fields);return s$25||n$46||a$30;}function wge(t$21,i$27){return!t$21||!i$27?.field?!1:Qw(i$27.field)===t$21.id;}function Mge(t$21,i$27){return!t$21||!i$27?!1:(i$27.filters??[]).some(e$19=>Qw(e$19?.field)===t$21.id);}function Qw(t$21){return t$21?.startsWith(`cf_`)?t$21.replace(`cf_`,``):t$21;}function Rge(t$21,i$27){return t$21?.type!==a$24.Formula||!i$27?!1:i$27.some(({calculation:e$19,field:r$34})=>e$19?.func?Qw(r$34)===t$21.id:!1);}function LX(t$21,i$27,e$19){if(!t$21)return t$21;let r$34=i$27.filter(c$37=>c$37.type===`team`),o$32=i$27.filter(c$37=>c$37.type===`project`),s$25=i$27.filter(c$37=>c$37.type===`category`),n$46=i$27.filter(c$37=>c$37.type===`subcategory`),a$30={...t$21,teams:[],projects:[],categories:[],subcategories:[]};return`locations`in a$30&&delete a$30.locations,r$34.length>0&&(a$30.teams=r$34.map(c$37=>({id:c$37.id,name:c$37.name,entity:`team`,applied_objects:e$19}))),o$32.length>0&&(a$30.projects=o$32.map(c$37=>({id:c$37.id,name:c$37.name,project_access:!0,applied_objects:e$19,entity:`project`}))),s$25.length>0&&(a$30.categories=s$25.map(c$37=>({id:c$37.id,name:c$37.name,category_access:!0,applied_objects:e$19,entity:`category`}))),n$46.length>0&&(a$30.subcategories=n$46.map(c$37=>({id:c$37.id,name:c$37.name,subcategory_access:!0,applied_objects:e$19,entity:`subcategory`}))),a$30;}function UX(t$21){return Object.values(Object.fromEntries(t$21.map(({field:i$27,histItem:e$19})=>[i$27.id,{...i$27,value:i$27.type===a$24.Dropdown&&e$19&&`after`in e$19?e$19.after:i$27.value}])));}function WX(t$21,i$27,e$19){return t$21.map(r$34=>{let o$32=R$10[r$34.field.type],s$25=r$34.field,n$46=i$27[r$34.taskId];if(!n$46)return null;return J$14(Fge({task:n$46,groupedCfs:e$19,data:r$34,customFields:UX(e$19[r$34.taskId]??[]),updatedField:s$25,typeConfig:o$32}));}).filter(e$15);}function Fge({task:t$21,groupedCfs:i$27,data:e$19,customFields:r$34,updatedField:o$32,typeConfig:s$25}){return{...t$21,history:DX(i$27[e$19.taskId]??[],t$21.history),customFields:BX(t$21,r$34),customFieldValues:t$21.customFieldValues?NX(t$21,r$34):void 0,fields:t$21.fields?VX(t$21,r$34):void 0,relationships:t$21.relationships&&s$25?.isRelationshipField?{...t$21.relationships,sections:t$21.relationships.sections.map(n$46=>n$46.custom_field?.id===o$32.id&&!e$19.relatedTaskId?{...n$46,custom_field:{...n$46.custom_field,value:o$32.value}}:n$46)}:t$21.relationships};}function HX(t$21,i$27){return t$21.map(e$19=>{let r$34=R$10[e$19.field.type],o$32=e$19.field,s$25=i$27[e$19.taskId];if(!s$25)return null;return J$14({...s$25,relationships:s$25.relationships&&r$34?.isRelationshipField?xge({relationships:s$25.relationships,data:e$19,taskId:s$25.id,updatedField:o$32}):s$25.relationships});}).filter(e$15);}function xge({relationships:t$21,data:i$27,updatedField:e$19,taskId:r$34}){return t$21&&{...t$21,sections:Oge({relationships:t$21,data:i$27,updatedField:e$19,taskId:r$34})};}function Oge({relationships:t$21,data:i$27,updatedField:e$19,taskId:r$34}){return t$21.sections.map(o$32=>{if(i$27.taskId===r$34&&e$19.type===a$24.Tasks&&o$32.relationship===`backlinks`){if(i$27.histItem.after?.includes(i$27.taskId))return{...o$32,items:[...o$32.items.filter(s$25=>s$25.id!==i$27.relatedTaskId),{id:i$27.relatedTaskId,type:`task`,field:{id:e$19.id,name:e$19.name}}]};if(i$27.histItem.before?.includes(i$27.taskId))return{...o$32,items:o$32.items.filter(s$25=>s$25.id!==i$27.relatedTaskId)};}return o$32;});}function Jw(t$21){return[...(t$21.teams||[]).map(i$27=>({id:i$27.id,name:i$27.name,type:`team`})),...(t$21.projects||[]).map(i$27=>({id:i$27.id,name:i$27.name,type:`project`})),...(t$21.categories||[]).map(i$27=>({id:i$27.id,name:i$27.name,type:`category`})),...(t$21.subcategories||[]).map(i$27=>({id:i$27.id,name:i$27.name,type:`subcategory`}))];}function qX(t$21,i$27){return e$19=>$ge(t$21,i$27,e$19)?{...e$19,[i$27]:[...(e$19[i$27]??[]),{id:t$21.entity.id,name:t$21.entity.name,[`${t$21.entity.type}_access`]:t$21.entity.access}]}:e$19;}function __(t$21,i$27,e$19){return t$21?.map(r$34=>{let o$32=i$27?.find(s$25=>s$25.id===r$34.parent_id);return{id:r$34.parent_id,name:o$32?.name??r$34?.name??r$34.parent_id,applied_objects:r$34.applied_objects,...e$19(o$32??r$34)};})??[];}function KX(t$21,i$27){if(!t$21)return i$27;let e$19=i$27;if(i$27.locations){let{locations:r$34}=i$27,o$32={...i$27};r$34&&(o$32.subcategories=__(r$34.subcategories,t$21.subcategories,({subcategory_access:s$25=!0})=>({subcategory_access:s$25,entity:`subcategory`})),o$32.categories=__(r$34.categories,t$21.categories,({category_access:s$25=!0})=>({category_access:s$25,entity:`category`})),o$32.projects=__(r$34.projects,t$21.projects,({project_access:s$25=!0})=>({project_access:s$25,entity:`project`})),o$32.teams=__(r$34.teams,t$21.teams,()=>({entity:`team`}))),e$19=o$32;}return{...t$21,...e$19};}function Dge(t$21,i$27){return t$21.some(e$19=>e$19.object_type===Cr.CustomTypeObject&&e$19.object_id===i$27);}function Nge(t$21,i$27){return t$21.filter(e$19=>e$19.object_type!==Cr.CustomTypeObject||e$19.object_id!==i$27);}function Bge(t$21=C$23(Le$4),i$27=C$23(B$8),e$19=C$23(q$19)){return t$21.pipe(Ye$2(r$4.createDashboardViewWithTemplate),Mu(()=>e$19.select(l$5)),Z$12(([r$34,o$32])=>{let s$25={...to$2,parent:{id:r$34.parentId,type:r$34.parentType}};return i$27.createView(s$25,!0).pipe(ps$2(500),Z$12(n$46=>j$23([r$4.dashboardTemplateApplied({dashboardId:o$28(n$46?.originalPayload?.view_dashboard?.id),template:r$34.template,options:{location:[o$28(o$32)]}})])));}));}function hZ({status:t$21,responses:i$27}){return t$21===K$8.PendingInvite||t$21===K$8.Denied&&i$27?.[0]?.previous_status===K$8.PendingInvite;}function T_(t$21,i$27){let e$19=Hge(t$21,i$27.userid);if(e$19)return at$7(e$19);if(i$27.user&&!hZ(i$27))return at$7({user:{username:i$27.user.name,email:i$27.user.email_address,color:i$27.user.avatar?.color,id:String(i$27.user.id),initials:i$27.user.initials},role:i$27.role??N$16.USER,permission_level:i$27.permission_level??x$25.READ});return at$7(Jo({userId:String(i$27.userid),email:i$27.user?.email_address??i$27.email}));}function Hge(t$21,i$27){return t$21.find(e$19=>Number(e$19.user.id)===i$27);}function gZ(t$21){let{action:i$27,member:e$19,objectId:r$34,objectType:o$32,updatedRequestAccessData:s$25}=t$21,n$46=[],a$30=Im(s$25.status)&&s$25.actions&&Am(s$25.actions);return(!Im(s$25.status)||a$30)&&n$46.push(bf({accessRequests:Ha.fromProcessRequestResponse(s$25,e$19)})),l0(i$27,s$25.status)&&n$46.push(If({objectId:r$34,objectType:o$32,member:e$19,action:i$27})),n$46;}function SZ(t$21,i$27,e$19){let r$34={...e$19};return t$21&&(r$34[t$21]=r$34[t$21]?.filter(o$32=>!wm.includes(o$32.status))||[]),i$27.reduce((o$32,s$25)=>{let n$46=s$25.object.object_id,a$30=[...(o$32[n$46]||[])],c$37=a$30.findIndex(m$32=>m$32.id===s$25.id);return c$37===-1?a$30.push(s$25):a$30[c$37]=s$25,{...o$32,[n$46]:a$30};},r$34);}function _Z(t$21,i$27){return t$21?.payload?.users_to_notify.includes(i$27);}function $Z(t$21){return t$21.items.map(({ent:i$27})=>{if(i$27.type===PZ.default.CLICKUP_DOCUMENT_PAGE){let e$19=i$27.url.split(`/`);return e$19[e$19.length-2]||``;}return i$27.url.split(`/`).pop()||``;});}function jZ(t$21){let i$27=t$21.split(`/`);return i$27[i$27.length-2]||``;}function LZ(t$21){return t$21.split(`/`).pop()||``;}function DZ(t$21,i$27){let e$19=null;try{e$19=JSON.parse(t$21?.data||``);}catch(o$32){lA(o$32,{feature:`unknown`});}let r$34=i$10(e$19);return{id:r$34.id,type:`task`,recent:r$34,name:t$21.title,teamId:i$27,custom_id:e$19?.custom_id_number,link:e$19?.custom_id_number?[`/`,`t`,i$27,e$19?.custom_id_number?.toString()]:[`/`,`t`,r$34.id],icon:`cu2-check-2`,noStrokeIcon:!0};}function NZ(t$21,i$27){let e$19=`cu2-view-1`,r$34=t$21.name;return t$21.sprint&&(e$19=`sprint`),{type:`subcategory`,...t$21,teamId:i$27,name:r$34,link:[`/`,i$27,`v`,`li`,t$21.id],icon:e$19};}function BZ(t$21,i$27,e$19){let r$34=null;try{r$34=JSON.parse(t$21?.data||``);}catch(o$32){lA(o$32,{feature:`unknown`});}return{id:e$19,type:`view`,name:t$21.title||"Untitled",teamId:i$27,icon:`cu2-view-`+o$31.Doc,link:j$19({value:{id:e$19,viewType:o$31.Doc,archived:r$34?.archived,defaultStandardView:!1,parent:{type:r$34?.parent_view_type,id:Zge(r$34?.parent_view_id)??r$34?.parent_obj_id}},teamId:i$27})};}function Zge(t$21){return t$21?.replace(`view:`,``);}function VZ({subcategories:t$21,searchResults:i$27,teamId:e$19}){return i$27.items.map(({ent:r$34})=>{if(r$34.type===w_.default.CLICKUP_LIST){let o$32=t$21?.find(s$25=>s$25.id===LZ(r$34.url));return o$32?NZ(o$32,e$19):null;}if(r$34.type===w_.default.CLICKUP_TASK)return DZ(r$34,e$19);if(r$34.type===w_.default.CLICKUP_DOCUMENT_PAGE)return BZ(r$34,e$19,jZ(r$34.url));return null;}).filter(Boolean);}function x_(t$21,i$27){return t$21.flatMap(e$19=>rye(e$19,i$27));}function rye(t$21,i$27){let e$19=t$21.statuses.map(o$32=>o$32.id).filter(o$32=>!!o$32),r$34=iye(t$21.category,i$27);return[{type:`subcategory`,id:t$21.subcategory.id,overrideStatuses:!!t$21.subcategory.override_statuses,parentId:x$6({type:`category`,id:t$21.category.id}),statuses:t$21.subcategory.override_statuses?e$19:void 0},{type:`category`,id:t$21.category.id,overrideStatuses:!!t$21.category.override_statuses,parentId:x$6(r$34.length?{type:`category`,id:r$34[0].id}:{type:`project`,id:t$21.project.id}),statuses:t$21.category.override_statuses&&!t$21.subcategory.override_statuses?e$19:void 0},...r$34,{type:`project`,id:t$21.project.id,overrideStatuses:!t$21.subcategory.override_statuses&&!t$21.category.override_statuses,statuses:!t$21.subcategory.override_statuses&&!t$21.category.override_statuses?e$19:void 0}];}function iye(t$21,i$27){let e$19=[],r$34=i$27[t$21.id];if(!r$34)return e$19;let o$32=HZ(r$34,i$27);for(;o$32;)e$19.push({type:`category`,id:o$32.id,overrideStatuses:!!o$32.override_statuses,parentId:x$6({type:o$32.parent_type===rM.ParentType.Category?`category`:`project`,id:o$32.id}),statuses:o$32.override_statuses?o$32.statuses?.map(s$25=>s$25.id).filter(s$25=>!!s$25):void 0}),r$34=o$32,o$32=HZ(r$34,i$27);return e$19;}function HZ(t$21,i$27){return t$21.parent_id&&t$21.parent_type===rM.ParentType.Category?i$27[t$21.parent_id]:void 0;}function O_(t$21){return k$21(t$21.flatMap(i$27=>i$27.statuses??[]),`id`).filter(i$27=>!!i$27.id);}function P_(t$21){let i$27=new Set(),e$19=[];return t$21.forEach(r$34=>{oye(r$34)&&(i$27.has(r$34.subcategory.id)||(i$27.add(r$34.subcategory.id),e$19.push(sye(r$34))));}),e$19;}function oye(t$21){return!!(t$21.subcategory&&t$21.category&&t$21.project&&t$21.statuses&&`override_statuses`in t$21.subcategory&&`override_statuses`in t$21.category);}function sye(t$21){return{statuses:t$21.statuses??[],subcategory:P$17(t$21.subcategory,[`id`,`override_statuses`]),category:P$17(t$21.category,[`id`,`override_statuses`]),project:P$17(t$21.project,[`id`])};}function Qp(t$21){return t$21?.map(i$27=>i$27.id).filter(i$27=>!!i$27)??[];}function $_(t$21,i$27){return t$21.filter(e$19=>!!e$19.statuses).map(e$19=>aye(e$19,i$27));}function aye(t$21,i$27){return{type:`subcategory`,id:t$21.id,parentId:cye(t$21,i$27),overrideStatuses:!!t$21.override_statuses,statuses:Qp(t$21.statuses)};}function cye(t$21,i$27){let e$19=t$21.hiddenCategory||t$21.category_hidden,r$34=typeof t$21.category==`string`?t$21.category:i$27;return e$19&&t$21.project_id?x$6({type:`project`,id:t$21.project_id}):x$6({type:`category`,id:r$34});}function QZ(t$21,i$27){let e$19=[];return t$21.forEach(r$34=>{r$34.statuses&&e$19.push(mye(r$34,i$27)),r$34.subcategories?.length&&e$19.push(...$_(r$34.subcategories,r$34.id));}),e$19;}function mye(t$21,i$27){let e$19=x$6(t$21.parent_type!==KZ.ParentType.Category||!t$21.parent_id?{type:`project`,id:i$27}:{type:`category`,id:t$21.parent_id});return{type:`category`,id:t$21.id,parentId:e$19,overrideStatuses:!!t$21.override_statuses,statuses:Qp(t$21.statuses)};}function lye(t$21){return t$21.statuses??[];}function j_(t$21){return t$21.flatMap(lye);}function JZ(t$21){return t$21.filter(i$27=>!!i$27.statuses).map(dye);}function dye(t$21){return{type:`project`,id:t$21.id,overrideStatuses:!0,statuses:Qp(t$21.statuses)};}function YZ(t$21,i$27){return Hi$2(t$21.pipe(Ye$2(ae$7),Is$1(e$19=>i$27?.log(`syncCategoryStatuses setCategoryList`,!!e$19.fromAPI,e$19)),oe$13(({fromAPI:e$19})=>!!e$19),q$20(({data:e$19,projectId:r$34})=>[{categories:e$19,projectId:r$34}])),t$21.pipe(Ye$2(he$5),Is$1(e$19=>i$27?.log(`syncCategoryStatuses setMultipleCategoriesList`,!!e$19.fromAPI,e$19)),oe$13(({fromAPI:e$19})=>!!e$19),q$20(({payload:e$19})=>e$19.map(({projectId:r$34,data:o$32})=>({categories:o$32,projectId:r$34})))),t$21.pipe(Ye$2(ee$9),Is$1(e$19=>i$27?.log(`syncCategoryStatuses setCategory`,!!e$19.fromAPI,e$19)),oe$13(({fromAPI:e$19,payload:r$34})=>!!e$19&&!!r$34.project_id),q$20(({payload:e$19})=>[{categories:[e$19],projectId:e$19.project_id??``}])));}function XZ(t$21,i$27){return Hi$2(t$21.pipe(Ye$2(me$7),Is$1(e$19=>i$27?.log(`syncProjectStatuses setProjectList`,!!e$19.fromAPI,e$19)),oe$13(({fromAPI:e$19})=>!!e$19),q$20(({projects:e$19})=>e$19)),t$21.pipe(Ye$2(Ee$3),Is$1(e$19=>i$27?.log(`syncProjectStatuses setProject`,!!e$19.fromAPI,e$19)),oe$13(({fromAPI:e$19})=>!!e$19),q$20(({project:e$19})=>[e$19])));}function ZZ(t$21,i$27){return t$21.pipe(Ye$2(Re$4),Is$1(e$19=>i$27?.log(`syncSubcategoryStatuses setSubcategory`,!!e$19.fromAPI,e$19)),oe$13(({fromAPI:e$19})=>!!e$19),q$20(({subcategory:e$19,categoryId:r$34})=>({subcategories:[e$19],categoryId:r$34})));}function eee(t$21,i$27){return t$21.pipe(Ye$2(f$27),Is$1(e$19=>i$27?.log(`syncTaskStatuses AddTasksCache`,!!e$19.options?.fromAPI,e$19)),oe$13(({options:e$19})=>!!e$19?.fromAPI),q$20(({tasks:e$19})=>e$19));}function see(t$21,i$27){return!t$21.length||!i$27?t$21:t$21.map(e$19=>{if(!e$19.assignees?.length)return e$19;let r$34=e$19.assignees.map(o$32=>{if(!v$21(o$32.id))return o$32;let s$25=i$27[o$32.id.toString()];return s$25?.profilePicture?{...o$32,profilePicture:s$25.profilePicture,isUserBackedAgent:s$25.isUserBackedAgent??!0}:o$32;});return{...e$19,assignees:r$34};});}function nee(t$21){let i$27=t$21.map(e$19=>e$19.fields).filter(e$19=>!!e$19).flat().filter(e$19=>e$19.type===q$13.Attachment).flatMap(e$19=>e$19.value).filter(e$19=>typeof e$19==`string`);return[...new Set(i$27)];}function cee({tasks:t$21,listsById:i$27}){let e$19=[];return t$21.forEach(r$34=>{let o$32=fye({task:r$34,listsById:i$27});o$32&&e$19.push(o$32);}),e$19;}function uye(t$21){return!!t$21.subcategory_id;}function fye({task:t$21,listsById:i$27}){let e$19={};if(uye(t$21)){let r$34=hye(t$21,i$27);r$34&&(e$19.subcategory=r$34),e$19.subcategory&&e$19.subcategory.id!==t$21.subcategory_id&&(e$19.subcategory_id=e$19.subcategory?.id);}if(t$21.lists&&(e$19.other_subcategories=aee(t$21.lists,i$27)),t$21.parent_task?.lists&&(e$19.parent_task={...t$21.parent_task,other_subcategories:aee(t$21.parent_task.lists,i$27)}),Object.keys(e$19).length!==0)return{id:t$21.id,changes:e$19};}function hye(t$21,i$27){let e$19=t$21.subcategory_id;if(t$21.custom_type===de$9.SHADOW_LIST_TASK){let o$32=t$21.lists?.find(s$25=>s$25.type===e$8.ShadowedList);o$32&&(e$19=o$32.list_id);}return i$27[e$19];}function aee(t$21,i$27){return t$21.filter(e$19=>e$19.type!==e$8.Home).map(e$19=>i$27[e$19.list_id]).filter(e$19=>!!e$19);}function mee({tasks:t$21,attachmentsById:i$27}){return t$21.map(e$19=>{if(!e$19.customFieldValues)return e$19;let r$34=e$19.customFieldValues.map(o$32=>{if(o$32.type===q$13.Attachment){let s$25=o$32.value;return{...o$32,value:s$25.map(n$46=>i$27[n$46]??n$46)};}return o$32;});return{id:e$19.id,customFieldValues:r$34};});}function D_(t$21){return gye.reduce((i$27,e$19)=>{let r$34=t$21[e$19];return r$34!==void 0&&(i$27[e$19]=r$34),i$27;},{id:t$21.id,name:t$21.name});}function lee(t$21,i$27,e$19){let r$34=yye(t$21),o$32=e$19?.minimalTaskSubcategoriesEnabled?vye(r$34,i$27):i$27,s$25=[],n$46=[];return r$34.forEach(a$30=>{let c$37=o$32[a$30]??e$19?.cachedMissingLists?.get(a$30);if(c$37){n$46.push(c$37);return;}e$19?.missingListIdsToIgnore?.has(a$30)||s$25.push(a$30);}),{missingListIds:s$25,foundLists:n$46};}function yye(t$21){let i$27=new Set();return t$21.forEach(e$19=>{e$19.lists?.forEach(r$34=>i$27.add(r$34.list_id)),e$19.parent_task?.lists?.forEach(r$34=>i$27.add(r$34.list_id));}),Array.from(i$27);}function vye(t$21,i$27){let e$19={};for(let r$34 of t$21){let o$32=i$27[r$34];o$32&&(e$19[r$34]=D_(o$32));}return e$19;}function dee(t$21){let i$27=[],e$19=[];return t$21.lists?.forEach(({data:r$34,object_id:o$32,status:s$25})=>{if(s$25!==oM.FOUND){e$19.push(o$32);return;}let a$30=Es$1({list:r$34,space_id:t$21.space_ids?.[r$34.id]??``,task_count:0});i$27.push(D_(a$30));}),{failedListIds:e$19,lists:i$27};}function jee(t$21,i$27,e$19,r$34){let o$32=r$34?.id===i$27.id?"Personal List":i$27.name,{isFullySuccessOperation:s$25,isFullyFailureOperation:n$46,hasSuccessOperation:a$30,hasFailureOperation:c$37}={isFullySuccessOperation:t$21.every(({operation_result:l$26})=>l$26===`success`),isFullyFailureOperation:t$21.every(({operation_result:l$26})=>l$26===`failure`),hasSuccessOperation:t$21.some(l$26=>l$26.operation_result===`success`),hasFailureOperation:t$21.some(l$26=>l$26.operation_result===`failure`)},m$32=``;return s$25&&(m$32=kye(t$21.length,e$19,o$32)),a$30&&c$37&&(m$32=Tye(t$21,e$19,o$32)),n$46&&(m$32=Iye(o$32)),{description:m$32,type:`taskPosition`};}function kye(t$21,i$27,e$19){return new je$3("{taskCount, plural, =1 {# task} other {# tasks}} successfully duplicated to {listName}.",i$27).format({taskCount:t$21,listName:e$19});}function Tye(t$21,i$27,e$19){let r$34=t$21.filter(({operation_result:n$46})=>n$46===`success`).length,o$32=t$21.filter(({operation_result:n$46})=>n$46===`failure`).length;return new je$3("{successCount, plural, =1 {# task} other {# tasks}} successfully duplicated to {listName}. {failCount, plural, =1 {# task} other {# tasks}} failed.",i$27).format({successCount:r$34,failCount:o$32,listName:e$19});}function Iye(t$21){return"Couldn't duplicate tasks to "+t$21+". Please try again.";}function Lee(t$21){let i$27={enabled:!1,scheduleAsyncCopying:!1,scheduledTasksLimit:0};if(t$21)try{return JSON.parse(t$21);}catch{return i$27;}return i$27;}function Bee(t$21){let i$27=dt({cacheMaxSize:t$21?.entityStateMaxCount,formatEntity:Aye});return e$19=>Eye(e$19,i$27,t$21);}function Eye(t$21,i$27,e$19){if(e$19?.entityStateMaxCount===void 0)return{tasksCacheMap:i$27(t$21.tasksCacheMap),subtasksIdsMap:t$21.subtasksIdsMap};let r$34=Om(t$21.tasksCacheMap,{orderBy:`updatedAt`,maxSize:e$19.entityStateMaxCount}),o$32=Rye(t$21.subtasksIdsMap,r$34.ids);return{tasksCacheMap:i$27(r$34),subtasksIdsMap:o$32};}function Aye(t$21){return{...t$21,available_statuses:void 0,content_preview:void 0,content:``,customFields:void 0,html_content:``,members:void 0,other_subcategories:void 0,parent_task:t$21.parent_task?Mye(t$21.parent_task):void 0,permissions:void 0,siml_subcategories:void 0,statuses:void 0,subcategory:t$21.subcategory?wye(t$21.subcategory):void 0,todoCommentsV3:void 0};}function wye(t$21){return{id:t$21.id,name:t$21.name,access:t$21.access};}function Mye(t$21){return{id:t$21.id,name:t$21.name};}function Rye(t$21,i$27){let e$19={};for(let r$34 of i$27)t$21[r$34]&&(e$19[r$34]=t$21[r$34]);return e$19;}function Vee(t$21,i$27){let e$19=i$27?.subtasksIdsMap&&Object.keys(i$27.subtasksIdsMap).length?{...t$21.subtasksIdsMap,...i$27.subtasksIdsMap}:t$21.subtasksIdsMap,r$34=i$27?pt(t$21.tasksCacheMap,i$27.tasksCacheMap):t$21.tasksCacheMap;return{...Kr$2,...i$27,tasksCacheMap:r$34,subtasksIdsMap:e$19};}function zee(t$21,i$27){return t$21.map(e$19=>{let r$34=e$19.value?.filter(o$32=>i$27!==o$32.id);return{...e$19,value:r$34};});}function Qee(t$21){return(t$21.version_event_data?.changes??[]).some(e$19=>e$19.field.startsWith(`cf_`));}function Jee(t$21,i$27,e$19){let r$34=Qee(t$21),o$32=!!a$5(t$21,`tag`)||!!a$5(t$21,`tag_removed`);if(!e$19)return i$27;let s$25={};return e$19&&!r$34&&(s$25.customFieldDefinitionIds=e$19.customFieldDefinitionIds,s$25.customFieldValues=e$19.customFieldValues,s$25.customFields=e$19.customFields),e$19&&!o$32&&(s$25.tags=e$19.tags),{...i$27,...s$25};}function Yee(t$21){return`time_estimate`in t$21&&`time_estimates_by_user`in t$21;}function Xee(t$21,i$27,e$19){if(!t$21)return!1;let r$34=r$6(`task-parent`,i$27)?.object_id;return r$34?r$34===t$21?!0:k$20(t$21,e$19).includes(r$34):!1;}function Zee(t$21,i$27){return{taskId:t$21.id,pointsEstimatesData:{points:t$21.points,...Fye(t$21.points,i$27)}};}function Fye(t$21,i$27){return i$27?.rolled_up_points?{rolled_up_points:xye(t$21,i$27?.points,i$27?.rolled_up_points)}:{};}function xye(t$21,i$27,e$19){return e$19+(t$21??0)-(i$27??0);}function ete(t$21,i$27){let e$19=t$21.time_estimates_by_user?Object.fromEntries(t$21.time_estimates_by_user.map(r$34=>[r$34.user.id,{...r$34}])):{};return{taskId:t$21.id,data:{time_estimate:t$21.time_estimate,users:e$19,time_estimate_string:t$21.time_estimate_string,...Oye(t$21.time_estimate,i$27)}};}function Oye(t$21,i$27){return i$27?.rolled_up_time_estimate?{rolled_up_time_estimate:Pye(t$21,i$27?.time_estimate,i$27?.rolled_up_time_estimate)}:{};}function Pye(t$21,i$27,e$19){return e$19+(t$21??0)-(i$27??0);}function ite(t$21){return t$21?.object_type!==et$6.LIST?``:t$21?.object_id;}function ote(t$21){return ite(r$6(`task-parent`,t$21))??``;}function ste(t$21,i$27,e$19){let r$34=r$6(`task-in-space`,t$21),o$32=r$6(`task-parent`,t$21);return[e$19,i$27,r$34?.object_id??``,o$32?.object_id??``];}function V_(t$21){return t$21.version_event_data?.changes?.find(i$27=>i$27.field.includes(`clickapps.`));}function ute(t$21){return`${t$21}`==`true`;}function fte(t$21){let i$27=V_(t$21);if(!i$27)return{app:void 0,value:void 0};let[,e$19]=i$27.field.split(`.`);return{app:e$19,value:ute(i$27.after)};}function hte({app:t$21,value:i$27,teamId:e$19,teams:r$34}){return t$21===void 0||i$27===void 0?r$34:r$34.map(o$32=>o$32.id!==e$19?o$32:{...o$32,...(Object.hasOwn(o$32,t$21)?{[t$21]:i$27}:{})});}function Bte(t$21){return!!t$21&&typeof t$21==`object`&&`type`in t$21&&t$21.type===n$18.getPermissionsError.type;}function Vte(t$21){return!!t$21&&typeof t$21==`object`&&`object_permissions`in t$21;}function U_(t$21,i$27){return t$21(null).pipe(Zs$1(e$19=>i$27?.aborted||!e$19.ok||e$19.cursor===null?qe$6({ok:!1}):t$21(e$19.cursor)),Es$3(e$19=>e$19.ok&&e$19.cursor!==null,!0),$e$3((e$19,r$34)=>r$34.ok?e$19.ok?{ok:!0,items:e$19.items.concat(d$22(r$34.items)),...(r$34.meta?{meta:r$34.meta}:{})}:e$19:r$34,{ok:!0,items:[]}));}function sre(t$21){let i$27=s$20(`calendar`,t$21)?t$21.calendar:s$20(`list`,t$21)?t$21.list:t$21;return s$19(s$20(`divisions`,i$27)?i$27.divisions:s$20(`groups`,i$27)?i$27.groups:[]).flatMap(r$34=>s$20(`task_ids`,r$34)?r$34.task_ids:[]);}function W_(t$21){return i$27=>i$27.pipe(q$20(()=>({success:!0,changeIds:t$21})),Xo$2(e$19=>(fA(e$19,{origin:`CalendarOfflineSyncService.doSyncOnce`,feature:`calendar`,context:{changeIds:t$21}}),qe$6({success:!1,changeIds:t$21,error:e$19.message}))));}function Tre(t$21,i$27,e$19,r$34){return Ue$6(t$21?I$12(t$21):i$2,o$32=>Yye(o$32,i$27,e$19,r$34).sort(L9()));}function Yye(t$21,i$27,e$19,r$34){return t$21.filter(o$32=>o$32.assignment&&(!i$27||U$16(o$32.assignment.id,i$27))&&(e$19?o$32.assignment.resolved:!o$32.assignment.resolved)&&(!r$34||o$32.textContent&&st$10(o$32.textContent,r$34).score>0));}function Ire(t$21,i$27,e$19){if(!e$19)return`chat`;let[r$34,o$32]=e$19.split(`?`),s$25=t$21||`chat`,a$30=new URLSearchParams(o$32||``).get(`tab`);if(s$25===e$17.threads)return eve(a$30);if(Xye(s$25))return Zye(s$25,a$30);if(s$25===e$17.drafts)return tve(a$30);if(i$27?.type&&[a$28.CHANNEL,a$28.DM,a$28.GROUP_DM].includes(i$27.type))return`${s$25}${{p:`.posts`,calendar:`.calendar`,assigned:`.assigned`}[r$34.split(`/`)[5]]||`.chat`}`;return s$25;}function Zye(t$21,i$27){return`${t$21}.${i$27||`assigned`}`;}function eve(t$21){return`${e$17.threads}.${t$21||`unread`}`;}function tve(t$21){return`${e$17.drafts}.${t$21||`drafts`}`;}function yve(t$21,i$27){return p$7(i$27??{id:t$21});}function H_(t$21,i$27){return t$21??i$27;}function wre({dataViewEntities:t$21,dataViewIdMap:i$27,hierarchy:e$19,viewType:r$34}){let o$32=i$27[e$19.type][e$19.id];return o$32?u$37(o$32,t$21).find(n$46=>n$46.viewType===r$34):void 0;}function cM(t$21){return t$21.type===g$9.type?t$21.projectId:t$21.id;}function Rre(t$21){return t$21.type===g$9.type?!0:t$21.data?.private!==void 0;}function Fre(t$21,i$27,e$19){let r$34=xre(t$21),o$32=Cve(t$21);if(r$34&&o$32&&o$32===E$1.CREATE_CHANNEL_NAME_ALREADY_EXISTS)return[Ae$5.createChatRoomFailure({roomData:i$27,details:{message:Sve,field:`name`,eCode:E$1.CREATE_CHANNEL_NAME_ALREADY_EXISTS,failedRoomId:e$19}})];let s$25=[];if(!bve.includes(o$32)){let n$46=r$34?t$21.error:{err:vve};s$25.push(new _d({forceShow:!0,...n$46}));}return s$25.push(Ae$5.createChatRoomFailure({roomData:i$27,details:{message:r$34&&`message`in t$21.error?t$21.error.message:``,field:`type`,eCode:o$32,failedRoomId:e$19}})),s$25;}function xre(t$21){return!!t$21&&typeof t$21==`object`&&`error`in t$21&&typeof t$21.error==`object`&&!!t$21.error;}function Cve(t$21){return xre(t$21)&&(`ECODE`in t$21.error||`ECODES`in t$21.error)?t$21.error.ECODE??t$21.error.ECODES?.[0]:void 0;}function Ore(t$21){return Math.max(t$21?.updatedAt??0,t$21?.latestCommentDate??0);}function mM(t$21){let i$27=t$21?.map(Ore)??[];return Math.max(...i$27,0);}function Pre(t$21,i$27){let e$19=[],r$34=[];for(let o$32 of t$21)i$27[o$32.id]?e$19.push({...o$32,name:i$27[o$32.id].name}):r$34.push(o$32.id);return{loadedRooms:e$19,nonLoadedRoomIds:r$34};}function jre(t$21,i$27){let e$19=new Map();return t$21.filter(r$34=>!i$27.includes(r$34.id)).forEach(r$34=>{e$19.set(r$34.id,{object_id:r$34.id,object_type:$re.ObjectType.View});}),[...e$19.values()];}function kl(t$21){let i$27=[],{versionUpdates:e$19}=t$21;return e$19&&(e$19.versionIdsToDelete.length>0&&i$27.push(j$14.removeVersionsByEntry({entries:e$19.versionIdsToDelete.map(r$34=>({id:r$34,ovmType:Lre}))})),e$19.versionsToSave.length>0&&i$27.push(j$14.getVersionsSuccess({versions:e$19.versionsToSave.map(r$34=>({id:r$34.object_id,ovmType:Lre,version:r$34}))}))),i$27;}function Nre(t$21,i$27){return i$27.includes(t$21)?[Ae$5.removeChatRoomFromHiddenSuccess({roomId:t$21})]:z$18;}function Bre(t$21,i$27,e$19){let r$34=[];return e$19.includes(t$21)&&r$34.push(Ae$5.removeChatRoomFromHiddenSuccess({roomId:t$21})),i$27||r$34.push(re$7.loadUnreadCountsSuccess({unreadCounts:[t7(t$21)]})),r$34;}function Vre(t$21,i$27){return!ml(i$27,t$21)&&i$27?[Ae$5.updateChatRoomOptimistic({id:t$21.id,changes:{followers:[...(t$21.followers??[]),i$27.toString()]}})]:z$18;}function Wre(t$21){return t$21.type===a$28.CHANNEL;}function lM(t$21,i$27){let e$19=[...t$21,...Object.entries(i$27)].filter(r$34=>r$34[1]!==void 0);return new Map(e$19);}function Hre(t$21){if(!t$21?.length)return[];let i$27=[];for(let e$19 of t$21)e$19&&i$27.push({id:e$19.id,visibility:e$19.visibility,type:e$19.type,name:e$19.name??``,parent:e$19.parent,isCanonical:e$19.is_canonical_channel,isLegacyChannel:e$19.is_legacy_channel,latestCommentDate:e$19.latest_comment_at,workspaceId:e$19.workspace_id,createdAt:e$19.created_at,updatedAt:e$19.updated_at});return i$27;}function Gre(t$21,i$27){let e$19=t$21.followers;return t$21.type===a$28.GROUP_DM&&t$21.followers?.length===1&&(e$19=t$21.members),i$27?e$19?.sort((r$34,o$32)=>(i$27[o$32]?.mention||0)-(i$27[r$34]?.mention||0)):e$19;}function zre(t$21,i$27){let e$19=t$21.members,r$34=t$21.hierarchy_members;return i$27?{members:e$19?.sort((o$32,s$25)=>(i$27[s$25]?.mention||0)-(i$27[o$32]?.mention||0)),hierarchy_members:r$34?.sort((o$32,s$25)=>(i$27[s$25]?.mention||0)-(i$27[o$32]?.mention||0))}:{members:e$19,hierarchy_members:r$34};}function K_(t$21,i$27,e$19,r$34){let o$32=e$19[t$21.id];if(!xe$2(t$21))return{room:i$27,versionUpdates:{versionsToSave:[],versionIdsToDelete:o$32?[t$21.id]:[]}};let s$25=r$34[t$21.id];return!o$32||!s$25?{room:i$27,versionUpdates:{versionsToSave:[t$21._version_vector],versionIdsToDelete:[]}}:a$19(o$32.version,t$21._version_vector)?{room:s$25,versionUpdates:{versionsToSave:[o$32.version],versionIdsToDelete:[]}}:{room:i$27,versionUpdates:{versionsToSave:[t$21._version_vector],versionIdsToDelete:[]}};}function Yre(t$21){return function(i$27){return i$27.pipe(Mu(()=>[t$21.select(J$9(`view`)),t$21.select(hJ)]),q$20(([{remoteRoom:e$19,mappedResponse:r$34},o$32,s$25])=>{let n$46=r$34.room,{room:a$30,versionUpdates:c$37}=K_(e$19,n$46,o$32,s$25);return{...r$34,room:a$30,versionUpdates:c$37};}));};}function Q_(t$21){return function(i$27){return i$27.pipe(Mu(()=>[t$21.select(J$9(`view`)),t$21.select(hJ)]),q$20(([{remoteRooms:e$19,mappedResponse:r$34},o$32,s$25])=>{let n$46=n$40(r$34.rooms,`id`),a$30=[],c$37={versionsToSave:[],versionIdsToDelete:r$34.notFoundRoomIds??[]};return e$19.forEach(m$32=>{let l$26=n$46[m$32.id],{room:g$19,versionUpdates:f$33}=K_(m$32,l$26,o$32,s$25);a$30.push(g$19),c$37.versionsToSave.push(...f$33.versionsToSave),c$37.versionIdsToDelete.push(...f$33.versionIdsToDelete);}),{...r$34,rooms:a$30,versionUpdates:c$37};}));};}function pM(t$21){return t$21.pipe(Xo$2(i$27=>typeof i$27==`object`&&i$27!==null&&`ECODE`in i$27&&i$27.ECODE===`SUBCAT_144`?qe$6(null):at$12(()=>i$27)));}function mie(t$21,i$27){if(!i$27)return cie.log(`[Diagnose] Chat Room OVM event - No local chat room version to compare, fetching room`,{event:t$21}),!0;let e$19=a$19(i$27.version,t$21.version_change);return cie.log(`[Diagnose] Chat Room OVM event - Compared versions and selected ${e$19?`to not fetch`:`to fetch`}`,{event:t$21,localVersion:i$27}),!e$19;}function Ove(t$21){return t$21.action===`remove`&&t$21.ids?t$21.ids.map(i$27=>i$27.toString()):(t$21.action===`add`||t$21.action===`update`)&&t$21.members?t$21.members.map(i$27=>i$27.user.id.toString()):[];}function Pve(t$21){if(t$21.action!==`add`||!t$21.members)return[];let i$27=[];return t$21.members.forEach(e$19=>{`group`in e$19&&e$19.group?.members&&e$19.group.members.forEach(r$34=>{r$34.id&&i$27.push(r$34.id.toString());});}),i$27;}function hie(t$21){return t$21.type===Vs$2||t$21.type===Gs$1?Ove(t$21):t$21.type===ws$1||t$21.type===Ls?Pve(t$21):[];}function J_(t$21){return`hierarchy_members`in t$21&&Array.isArray(t$21.hierarchy_members);}function fM(t$21,i$27){let e$19=Ns$1(t$21),r$34=t$21.type===a$28.CHANNEL,o$32=e$19?i$27?.visibility===x$26.Private:!V9(t$21);return r$34&&o$32;}function hM(t$21,i$27,e$19){return t$21&&!!i$27&&e$19.length>0;}function sm(t$21){return t$21===null||t$21===`null`;}function vie(t$21){let i$27=t$21.filter(e$19=>e$19.field.startsWith(yie.MEMBER_PREFIX));return{additions:i$27.filter(e$19=>!sm(e$19.after)&&sm(e$19.before)),removals:i$27.filter(e$19=>sm(e$19.after)&&!sm(e$19.before))};}function Sie(t$21){let i$27=t$21.filter(e$19=>e$19.field.startsWith(yie.GROUP_MEMBER_PREFIX));return{additions:i$27.filter(e$19=>!sm(e$19.after)&&sm(e$19.before)),removals:i$27.filter(e$19=>sm(e$19.after)&&!sm(e$19.before))};}function $ve(t$21,i$27){for(let e$19 of i$27.values())t$21.add(e$19);}function jve(t$21,i$27,e$19){for(let r$34 of i$27.values())r$34!==e$19&&t$21.delete(r$34);}function bie(t$21,i$27,e$19){let r$34=new Set(t$21),{additions:o$32,removals:s$25}=i$27;return o$32.size>0&&$ve(r$34,o$32),s$25.size>0&&jve(r$34,s$25,e$19),Array.from(r$34);}function Cie(t$21){return t$21.map(i$27=>i$27.field.split(`.`).pop()??``);}function _ie(t$21,i$27){return t$21.flatMap(e$19=>{return i$27[e$19.field.split(`.`).pop()??``]?.members.map(o$32=>o$32.id.toString())??[];});}function kie(t$21,i$27,e$19){let r$34=Cie(t$21.additions),o$32=Cie(t$21.removals),s$25=_ie(i$27.additions,e$19),n$46=_ie(i$27.removals,e$19);return{additions:new Set([...r$34,...s$25]),removals:new Set([...o$32,...n$46])};}function Tie(t$21,i$27){return!!i$27&&(t$21.additions.size>0||t$21.removals.size>0);}function Nve({response:t$21,room:i$27}){return typeof t$21!=`string`?Ae$5.deleteChatRoomFailure({id:i$27.id,error:t$21}):Ae$5.deleteChatRoomSuccess({room:i$27});}function Bve(t$21){return i$27=>Nve({response:i$27,room:t$21});}function Fie(t$21){return i$27=>i$27.pipe(Z$12(e$19=>t$21.getTasksByIds(e$19,!0)),is(),q$20(e$19=>e$19.flat()),q$20(e$19=>new x$21(e$19,[],{fromAPI:!0})));}function xie(t$21,i$27){let e$19=t$21.map(r$34=>r$34?.id);return i$27.filter(r$34=>!e$19.includes(r$34));}function Oie(t$21){return t$21.filter(i$27=>y$3(i$27)&&!!i$27.externalID).map(i$27=>e$9(i$27.externalID??``));}function Die(){let t$21=C$23(q$19);return Xr$2(Mu(()=>[t$21.select(AI.selectEnableLongPolling),t$21.select(de$10)]),q$20(([i$27,e$19,r$34])=>({value:i$27,enabled:e$19&&r$34?.member_count>1})),oe$13(({enabled:i$27})=>!!i$27),q$20(({value:i$27})=>i$27));}function X_({action:t$21,entityUnreadCount:i$27,roomUnreadCount:e$19,channelsUnreadCount:r$34,threadsUnreadCount:o$32,comments:s$25,badgeCounts:n$46}){let a$30=s$25.length===0,c$37=a$30&&i$27?.hasUnread,m$32=i$27?i$27.badgeCount-n$46:0,l$26=Math.max(0,(e$19?.unreadThreadsCount??0)-(c$37?1:0)),g$19=Math.max(0,(r$34?.badgeCount??0)-m$32),f$33=Math.max(0,(o$32?.unreadThreadsCount??0)-(c$37?1:0)),h$15={[t$21.id]:{lastReadAt:t$21.date,badgeCount:n$46,hasUnread:!a$30}};if(t$21.objectType===et$6.COMMENT){let I$25=c$37?{[t$21.roomId]:{unreadThreadsCount:l$26}}:{};return{...h$15,...I$25,[Qve]:{lastReadAt:t$21.date,unreadThreadsCount:f$33,hasUnread:f$33>0}};}return{...h$15,[Kve]:{lastReadAt:t$21.date,badgeCount:g$19,hasUnread:g$19>0}};}function bM({action:t$21,entityUnreadCount:i$27,roomUnreadCount:e$19,channelsUnreadCount:r$34,threadsUnreadCount:o$32,comments:s$25,badgeCounts:n$46}){let a$30=s$25.length===0,c$37=!i$27?.hasUnread&&s$25.length>0,m$32=i$27?i$27.badgeCount-n$46:0,l$26=Math.max(0,(e$19?.unreadThreadsCount??0)+(c$37?1:0)),g$19=Math.max(0,(r$34?.badgeCount??0)-m$32),f$33=Math.max(0,(o$32?.unreadThreadsCount??0)+(c$37?1:0)),h$15={[t$21.id]:{lastReadAt:t$21.date,badgeCount:n$46,hasUnread:!a$30}};if(t$21.objectType===et$6.COMMENT){let I$25=c$37?{[t$21.roomId]:{unreadThreadsCount:l$26}}:{};return{...h$15,...I$25,[Yve]:{lastReadAt:t$21.date,unreadThreadsCount:f$33,hasUnread:f$33>0}};}return{...h$15,[Jve]:{lastReadAt:t$21.date,badgeCount:g$19,hasUnread:g$19>0}};}function Nie(t$21){return t$21.reduce((i$27,e$19)=>Math.max(i$27,e$19.lastUpdatedAt??0),0);}function Bie(t$21,i$27){return t$21.filter(e$19=>e$19.status===Ga.FOUND).map(e$19=>({workspaceId:i$27,objectId:e$19.data.parent_id,objectType:e$19.data.parent_type,parentId:e$19.data.parent_id,parentType:e$19.data.parent_type,hasUnread:e$19.data.has_unread??!1,badgeCount:e$19.data.badge_count??0,unreadMentionsCount:e$19.data.mention_count??0,unreadThreadsCount:e$19.data.thread_count??0,unreadAssignmentCount:e$19.data.assignment_count??0,lastReadAt:e$19.data.date??0,lastUpdatedAt:e$19.data.last_updated_at??0,version:e$19.data.version??0}));}function am$1(t$21,i$27){return{workspaceId:i$27,objectId:t$21.parent_id,objectType:t$21.parent_type,parentId:t$21.parent_id,parentType:t$21.parent_type,hasUnread:t$21.has_unread??!1,badgeCount:t$21.badge_count??0,unreadMentionsCount:t$21.mention_count??0,unreadThreadsCount:t$21.thread_count??0,unreadAssignmentCount:0,lastReadAt:t$21.date??0,lastUpdatedAt:t$21.last_updated_at??0,version:t$21.version??0};}function Vie(t$21,i$27){let e$19=i$27?.[t$21?.objectId]?.lastReadAt;return t$21.readStrategy===`READ`||!e$19||!t$21.date?!0:t$21.readStrategy===`READ_IF_OLDER`?!!(e$19&&t$21.date<e$19):t$21.readStrategy===`READ_IF_NEWER`?!!(e$19&&t$21.date>e$19):!0;}function Z_(t$21){return t$21===`unread_threads`?e$17.threads:t$21===`unread_rooms`?e$17.channels:`unknown`;}function Wie(t$21){return[`unread_threads`,`unread_rooms`].map(i$27=>{let e$19=Z_(i$27),r$34=t$21[i$27];return{objectId:e$19,objectType:et$6.VIEW,parentId:e$19,parentType:et$6.VIEW,badgeCount:r$34.badge_count,hasUnread:r$34.unread_count>0,lastReadAt:t$21.computed_date_ms,previousUnreadAt:t$21.computed_date_ms,unreadMentionsCount:r$34.mention_count,unreadThreadsCount:r$34.unread_count,unreadAssignmentCount:0,lastUpdatedAt:t$21.computed_date_ms,workspaceId:String(t$21.workspace_id)};});}function Hie(t$21){let i$27=Z_(t$21.badge_type);return{objectId:i$27,objectType:et$6.VIEW,parentId:i$27,parentType:et$6.VIEW,badgeCount:t$21.counts.badge_count,hasUnread:t$21.counts.unread_count>0,lastReadAt:t$21.computed_date_ms,previousUnreadAt:t$21.computed_date_ms,unreadMentionsCount:t$21.counts.mention_count,unreadThreadsCount:t$21.counts.unread_count,unreadAssignmentCount:0,lastUpdatedAt:t$21.computed_date_ms,workspaceId:String(t$21.workspace_id)};}function Gie(t$21,i$27){return{workspaceId:i$27,objectId:t$21.parent_id,objectType:t$21.parent_type,parentId:t$21.root_parent_id,parentType:t$21.root_parent_type,badgeCount:t$21.badge_count,hasUnread:t$21.has_unread,lastReadAt:Number(t$21.date),previousUnreadAt:Number(t$21.date),unreadMentionsCount:t$21.mention_count,unreadThreadsCount:t$21.thread_count,unreadAssignmentCount:0,lastUpdatedAt:Number(t$21.last_updated_at),version:Number(t$21.version)};}function zie(t$21,i$27){return t$21.map(e$19=>Gie(e$19,i$27));}function Jie(t$21){return[`unread_threads`,`unread_rooms`].includes(t$21);}function Yie(t$21,i$27){let e$19=Infinity;return t$21.forEach((r$34,o$32)=>{r$34.hash&&i$27[o$32]!==r$34.hash&&r$34.startTime<e$19&&(e$19=r$34.startTime);}),e$19===Infinity?-1:e$19;}function Xie(t$21){return Object.keys(t$21).map(i$27=>{let[,e$19,r$34]=i$27.split(`:`);return{startTime:Number(e$19),endTime:Number(r$34),hash:t$21[i$27]};});}function ek(t$21,i$27,e$19,r$34){e$19.mark(`ngrx.effect.unread_counts_ws_event.${t$21}.${i$27}`,{client_trace:r$34,entityId:t$21}).setGenericName(`ngrx.effect.unread_counts_ws_event.${i$27}`);}function Zie(t$21,i$27,e$19,r$34){let o$32=[],s$25=e$19&&r$32.includes(e$19?.type);if(t$21.hasUnread){if(t$21.objectType===et$6.VIEW){let n$46=s$25&&e$19.isHidden;o$32.push(Ae$5.removeChatRoomFromHidden({id:t$21.objectId,context:{clientTrace:n$46?r$34?.clientTrace:void 0}}));}t$21.parentId&&o$32.push(Xve(t$21.parentId,e$19,r$34));}return o$32.push(re$7.processWebsocketUnreadCount({entity:{...t7(t$21.objectId),...i$27,...t$21},context:{clientTrace:r$34?.clientTrace,isBecomingUnread:t$21.hasUnread&&!i$27?.hasUnread}})),o$32;}function Xve(t$21,i$27,e$19){return Ae$5.loadChatRoom({id:t$21,maxAge:Infinity,withHierarchyMembers:!0,forceFetch:!i$27,context:{clientTrace:!i$27||(r$32.includes(i$27?.type)?i$27.isHidden:!e$19?.hasJoined)?e$19?.clientTrace:void 0}});}function eoe({wsUnreadCount:t$21,storedUnreadCount:i$27,storedChatRoom:e$19,options:r$34,syntheticMarkerService:o$32}){return ek(t$21.objectId,`finish`,o$32,r$34?.clientTrace),Zie(t$21,i$27,e$19,r$34);}function toe(t$21){let i$27=t$21.payload.badge_type===`unread_threads`?e$17.threads:e$17.channels,e$19=Number(t$21.payload.counts.unread_count);return Zve.log(`[Diagnose] Badge count websocket event`,t$21),{workspaceId:String(t$21.payload.workspace_id),objectId:i$27,objectType:et$6.VIEW,parentId:i$27,parentType:et$6.VIEW,badgeCount:Number(t$21.payload.counts.badge_count),hasUnread:e$19>0,unreadThreadsCount:e$19,unreadMentionsCount:Number(t$21.payload.counts.mention_count),unreadAssignmentCount:0,lastUpdatedAt:Number(t$21.payload.computed_date_ms)};}function eSe(t$21,i$27,e$19){let o$32=new Map(t$21.pendingWebsockets).get(i$27)??[];return o$32.push(e$19),o$32;}function roe({changes:t$21,state:i$27}){let e$19=Date.now()+5e3,r$34=new Map(i$27.pendingWebsockets);for(let o$32 of Object.keys(t$21)){let s$25=eSe(i$27,o$32,e$19);r$34.set(o$32,s$25);}return{...i$27,pendingWebsockets:r$34};}function ioe({objectId:t$21,state:i$27}){let e$19=new Map(i$27.pendingWebsockets),r$34=e$19.get(t$21)??[];return r$34?.length<=1?e$19.delete(t$21):r$34.shift(),{...i$27,pendingWebsockets:e$19};}function _M(t$21,i$27){for(let e$19 of t$21){let r$34=e$19.assignee;if(r$34?.id===i$27)return r$34;if(e$19.children?.length){let o$32=_M(e$19.children,i$27);if(o$32)return o$32;}}return null;}function poe(t$21,i$27,e$19,r$34){let o$32=[];return o$32.push({type:o$20,attributes:{},text:t$21}),e$19&&o$32.push({task_mention:{task_id:e$19},text:`${e$19} `,type:`task_mention`}),r$34&&r$34.forEach(s$25=>{o$32.push({task_mention:{task_id:s$25},text:`${s$25} `,type:`task_mention`});}),o$32.push({type:o$20,attributes:{},text:`
`}),{thread_followers:[i$27],user:i$27,id:``,date:String(Date.now()),reactions:[],comment:o$32};}function uoe(t$21){let i$27={title:"Would you like to share this task in the comments?",body:"Post Task to comments",buttonText:"Post Task",comment:"Created a Task from checklist item "},e$19={title:"Would you like to share this subtask in the comments?",body:"Post subtask to comments",buttonText:"Post subtask",comment:"Created a subtask from checklist item "},r$34={title:"Would you like to share these subtasks in the comments?",body:"Post subtasks to comments",buttonText:"Post subtasks",comment:"Created subtasks from checklist "},o$32=(t$21.newTaskIds?.length??0)>1;return{taskId:t$21.taskId,newTaskId:t$21.newTaskId,newTaskIds:t$21.newTaskIds,user:t$21.user,title:o$32?r$34.title:t$21.isSubtask?e$19.title:i$27.title,body:o$32?r$34.body:t$21.isSubtask?e$19.body:i$27.body,buttonText:o$32?r$34.buttonText:t$21.isSubtask?e$19.buttonText:i$27.buttonText,commentCopy:o$32?r$34.comment:t$21.isSubtask?e$19.comment:i$27.comment};}function boe(t$21,i$27){let e$19=new Map(t$21.map(n$46=>[n$46.id,n$46])),r$34=new Map(i$27.map(n$46=>[n$46.id,n$46])),o$32=nSe(i$27,e$19),s$25=aSe(t$21,r$34);return{updated:Array.from(o$32.values()),removed:s$25};}function nSe(t$21,i$27){let e$19=new Map();for(let r$34 of t$21){let o$32=i$27.get(r$34.id);(!o$32||!j$21(o$32,r$34))&&e$19.set(r$34.id,r$34);}return e$19;}function aSe(t$21,i$27){let e$19=[];for(let r$34 of t$21)i$27.has(r$34.id)||e$19.push(r$34.id);return e$19;}function koe(t$21){if(!t$21.startsWith(e$1)&&!t$21.startsWith(o$11))return null;let[,i$27,e$19,r$34,o$32]=t$21.replace(e$1,``).replace(o$11,``).split(`|`).map(n$46=>!n$46||n$46===`undefined`?null:n$46);if(i$27===`composer`)return{key:t$21,roomId:e$17.launchpad,replyToId:null,id:null,teamId:e$19};if(!i$27||!r$34)return null;let s$25=r$34!==cSe?r$34:null;return{key:t$21,roomId:mSe[i$27]??i$27,replyToId:e$19,id:s$25,teamId:o$32};}function Toe(t$21){return typeof t$21==`string`&&Object.values(za).includes(t$21);}function Yp(t$21){return t$21.startsWith(`ls`)?t$21.substring(2):t$21;}function woe(t$21){return t$21.startsWith(`comment-thread`)&&t$21.split(`_`).length>=4;}function dSe(t$21){return t$21.endsWith(Aoe)?{isNewComment:!0,remaining:t$21.substring(0,t$21.length-(Aoe.length+1))}:{isNewComment:!1,remaining:t$21};}function pSe(t$21){let i$27=t$21.lastIndexOf(`_[{`),e$19=t$21.lastIndexOf(`}]`);if(i$27>0&&e$19===t$21.length-2){let r$34=t$21.substring(0,i$27),o$32=t$21.substring(i$27+1);try{return{id:r$34,metadata:JSON.parse(o$32)};}catch(s$25){return fA(s$25,{feature:`chat`,origin:`drafts`}),{id:t$21};}}return{id:t$21};}function uSe(t$21){if(!woe(t$21))return null;let i$27=t$21.split(`_`),e$19=i$27[0],r$34=parseInt(i$27[1],10),o$32=parseInt(i$27[2],10),{isNewComment:n$46,remaining:a$30}=dSe(i$27.slice(3).join(`_`)),{id:c$37,metadata:m$32}=pSe(a$30);return{identifier:e$19,type:r$34,redundantType:o$32,id:c$37,metadata:m$32,isNewComment:n$46};}function fSe(t$21){if(typeof t$21==`object`)return t$21;if(typeof t$21!=`string`)return null;try{return JSON.parse(t$21);}catch{return null;}}function hSe(t$21,i$27){let e$19=uSe(t$21);if(!e$19)return null;let r$34=fSe(i$27);return r$34?.content?{id:`${t$21}`,clientKey:t$21,timestamp:r$34.timestamp,workspaceId:null,comment:{comment:r$34.content,parent:e$19.id,type:e$19.type,assignee:r$34.commentAssignee,mode:r$34.commentMode,root_parent_type:e$19.type!==a$27.Comment?e$19.type:void 0,root_parent_id:void 0}}:null;}function Moe(t$21,i$27){return t$21.map(e$19=>{let r$34=Yp(e$19);if(!woe(r$34))return null;let o$32=i$27.get(e$19);return!o$32||typeof o$32!=`object`?null:hSe(r$34,o$32);}).filter(e$19=>!!e$19);}function Roe(t$21,i$27){return i$27?.content?{id:t$21,comment:{comment:i$27.content,assignee:i$27.commentAssignee,emailData:i$27.emailData,parent:t$21,type:a$27.Task,root_parent_id:t$21,root_parent_type:a$27.Task},clientKey:t$21,timestamp:i$27.time??Date.now(),workspaceId:null}:null;}function Foe(t$21){let i$27=[];for(let e$19 in t$21){if(!t$21[e$19])continue;let r$34=Roe(e$19,t$21[e$19]);r$34&&i$27.push(r$34);}return i$27;}function Doe(t$21){let i$27=t$21.snapshot.firstChild;for(;i$27;){if(i$27.url.find(e$19=>e$19.path===`docs`||e$19.path===`dc`))return!0;i$27=i$27.firstChild;}return!1;}function Noe(t$21){let i$27=t$21.snapshot.firstChild;for(;i$27;){if(i$27.url.find(e$19=>e$19.path===`inbox`))return!0;i$27=i$27.firstChild;}return!1;}function Boe(t$21){let i$27=t$21.snapshot.firstChild;for(;i$27;){if(i$27.url.find(e$19=>e$19.path===`wb`||e$19.path===`whiteboards`))return!0;i$27=i$27.firstChild;}return!1;}function kM(t$21){return!!(t$21.userFacing!==!1&&t$21?.err);}function Hoe(){return{offline:!1,userFacingError:null,resourceNotFoundError:null};}function Goe(t$21=Hoe(),i$27){switch(i$27.type){case dF:return{...t$21,offline:i$27.payload.offline};case fF:return{...t$21,userFacingError:i$27.payload};case mF:return{...t$21,resourceNotFoundError:i$27.error};default:return t$21;}}function Xoe(t$21){let{emails:i$27,team:e$19,chatItemUrlForSharing:r$34,memberApiService:o$32}=t$21;try{if(!r$34||!i$27.length)return;let n$46=new URL(r$34).pathname.split(`/`).filter(c$37=>c$37!==``);if(!n$46.includes(`t`))return;let a$30=n$46[n$46.length-1];return a$30?SSe({...t$21,commentId:a$30,team:e$19,memberApiService:o$32,email:i$27[0]}):void 0;}catch{return;}}function SSe(t$21){let{commentId:i$27,memberApiService:e$19,email:r$34,team:o$32,store:s$25}=t$21;return Q$17(0,3e3).pipe(le$5(n$46=>{if(n$46<3)return e$19.getTeamMembers(o$32.id,Yoe);throw Error;}),Is$1(n$46=>{let a$30=q$1(n$46);s$25.dispatch(ht$3({users:a$30}));}),q$20(n$46=>n$46.find(a$30=>a$30?.user?.email===r$34)?.user?.id),As$3(s$25.select(b$17)),oe$13(([n$46,a$30])=>!!n$46&&!!a$30?.id),Ve$4(1),Is$1(([n$46,a$30])=>{s$25.dispatch(n$23.updateComment({id:i$27,comment:{assigned_by:a$30,assignee:n$46,date_assigned:new Date().getTime()}}));}),Xo$2(()=>qe$6(void 0))).subscribe();}function cse(t$21,i$27){let e$19=i$27.id;if(!e$19)return t$21;let r$34=t$21[e$19]??{users:[],groups:[],agentUsers:[]};return r$34.agentUsers.some(({user:o$32})=>o$32.id===i$27.user.id)||(r$34={...r$34,agentUsers:[...r$34.agentUsers,{user:i$27.user,role:i$27.userRole}]},t$21[e$19]=r$34),t$21;}function mse(t$21,i$27){let e$19=i$27.id;return!e$19||!t$21[e$19]?t$21:{...t$21,[e$19]:{...t$21[e$19],agentUsers:t$21[e$19].agentUsers.filter(({user:r$34})=>r$34.id!==i$27.user.id)}};}function lse(t$21,i$27){let e$19=i$27.id;if(!e$19)return t$21;let r$34=t$21[e$19]??{users:[],groups:[],agentUsers:[]};return r$34.groups.findIndex(({group:o$32})=>o$32.id===i$27.userGroup.id)===-1&&(r$34={...r$34,groups:[...r$34.groups,{group:i$27.userGroup}]},t$21[e$19]=r$34),t$21;}function dse(t$21,i$27){let e$19=i$27.id;if(!e$19)return t$21;let r$34=t$21[e$19]??{users:[],groups:[],agentUsers:[]};return r$34.users.findIndex(({user:o$32})=>o$32.id===i$27.user.id)===-1&&(r$34={...r$34,users:[...r$34.users,{user:i$27.user,role:i$27.userRole}]},t$21[e$19]=r$34),t$21;}function pse(t$21,i$27){let e$19=i$27.id;return e$19&&(t$21[e$19]={users:[],groups:[],agentUsers:[]}),t$21;}function use(t$21,i$27){let e$19=i$27.id;return e$19?{...t$21,[e$19]:{...t$21[e$19],users:t$21[e$19].users.filter(({user:r$34})=>r$34.id!==i$27.user.id)}}:t$21;}function fse(t$21,{itemId:i$27}){return i$27?{...t$21,[i$27]:{...t$21[i$27],groups:[]}}:t$21;}function Cse(t$21){let i$27=[`messagesCount`,`activityCount`,`reminderCount`,`savedCount`],e$19=[];return t$21.assignedToMe&&e$19.push(`assignedActivityCount`,`assignedMessagesCount`),t$21.mentioned&&e$19.push(`mentionMessagesCount`),[...i$27,...e$19];}function kse(t$21){return t$21?Object.values(t$21).filter(ISe).map(i$27=>({id:i$27.id,name:i$27.name,status:i$27.status})):[];}function ESe(t$21){let i$27=t$21.previewNotification?.type===`reminder_v2`,e$19=t$21.previewNotification?.historyItem?.dueDate;return i$27&&!e$19||i$27&&(t$21.snoozedUntil||e$19)&&new Date(t$21.snoozedUntil??e$19)>new Date()?`snoozed`:`uncleared`;}function Rse(t$21,i$27){if(!t$21||!i$27||t$21.id===i$27.id)return!1;let e$19=Mse(t$21),r$34=Mse(i$27);return e$19.length<1||r$34.length<1?!1:e$19.includes(r$34[0])&&e$19[0]!==r$34[0];}function Mse(t$21){return t$21.recentNotifications.map(i$27=>i$27.historyItem?.parentCommentResourceName).filter(i$27=>!!i$27);}function Fse(t$21){return(t$21.mostRecentCommentNotification?.historyItem||t$21.previewNotification?.historyItem)?.reminderEntity?.dueDateStatus===`LATER`;}function FSe(t$21,i$27){return i$27[0]?.notificationBundles?.filter(e$19=>e$19.unreadCount>0&&e$19.bundleType===t$21).length??0;}function xSe(t$21){return t$21[0]?.notificationBundles?.filter(i$27=>i$27.unreadCount>0).length??0;}function ah(t$21,i$27,e$19,r$34){let o$32=i$27.bundleType;return o$32?kt(t$21,{...i$27,bundleType:Tl.BundleType.All})?FSe(o$32,r$34):kt(t$21,i$27)?xSe(r$34):e$19:e$19;}function BSe(t$21){if(!t$21.includes(`/b/`))return;let e$19=t$21.split(`/b/`)[1]??``;if(!e$19)return;let r$34=e$19.split(`?`)[0];if(r$34)return decodeURIComponent(r$34);}function Hse(t$21,i$27){return BSe(t$21)?.includes(i$27)??!1;}function Gse(t$21){return btoa(JSON.stringify(t$21));}function qse(t$21){return{notificationBundleId:t$21.id,entityResourceId:Re$1(t$21.rootEntityResourceName),entityResourceType:rt$2(t$21.rootEntityResourceName)};}function Kse(t$21){return typeof t$21==`object`&&t$21!==null&&`notificationBundleId`in t$21&&typeof t$21.notificationBundleId==`string`&&`entityResourceId`in t$21&&typeof t$21.entityResourceId==`string`&&`entityResourceType`in t$21&&typeof t$21.entityResourceType==`string`;}function Qse(t$21){try{let i$27=JSON.parse(atob(t$21));return Kse(i$27)?i$27:void 0;}catch{return;}}function Jse(t$21){return t$21.params.bundleId;}function ck(t$21){return!!(`params`in t$21.routerState&&typeof t$21.routerState.params==`object`&&t$21.routerState.params!==null&&`bundleId`in t$21.routerState.params&&t$21.routerState.params.bundleId);}function mk(t$21){return!!(`data`in t$21.routerState&&typeof t$21.routerState.data==`object`&&t$21.routerState.data!==null&&`isInbox`in t$21.routerState.data&&t$21.routerState.data.isInbox);}function Xse(t$21){return t$21?.comment.map(e$19=>`image`in e$19?e$19.image.url:``).filter(Boolean);}function MM(t$21,i$27){if(t$21.threadCommentDetailsByParentCommentId)return t$21.threadCommentDetailsByParentCommentId[i$27];}function ene(t$21,i$27){return!!MM(t$21,i$27);}function ine(t$21,i$27,e$19,r$34){return e$19?r$34.filter(o$32=>!R$3(o$32,t$21,i$27.id)):[...r$34,qSe(t$21,i$27)];}function qSe(t$21,i$27){return{user:i$27,reaction:t$21,userid:String(i$27.id)};}function QSe(t$21){if(t$21.type!==`reminder_v2`)return[];let i$27=[],e$19=t$21.historyItem,r$34=e$19.associatedEntity,o$32=e$19.associatedParentEntity;return r$34&&rt$2(r$34)===`comment`&&i$27.push(Re$1(r$34)),o$32&&rt$2(o$32)===`comment`&&i$27.push(Re$1(o$32)),i$27;}function tbe(t$21,i$27){return t$21.map(e$19=>e$19.type===`tag`?rbe(e$19):e$19.type===`group_tag`?ibe(e$19,i$27):e$19);}function rbe(t$21){if(!t$21.text&&t$21.user){let i$27=t$21.user.username||t$21.user.username_alias;return{...t$21,text:i$27?`@${i$27}`:t$21.user.email};}return t$21;}function ibe(t$21,i$27){return t$21.user_group?.id&&(t$21.user_group={...i$27[t$21.user_group.id],...t$21.user_group}),t$21;}function obe(t$21){return{thumbnail_large:t$21.thumbnail_large??t$21.thumbnailLarge,thumbnail_medium:t$21.thumbnail_medium??t$21.thumbnailMedium,thumbnail_small:t$21.thumbnail_small??t$21.thumbnailSmall};}function uk(t$21){let i$27=t$21.payload.operation,e$19=t$21.payload.reminder_ids,r$34=t$21.payload.user_id,o$32=t$21.payload.workspace_id,s$25=t$21.version_event_data?.context?.ws_key;return mbe.log(`Reminder websocket event`,t$21),{operation:i$27,reminderIds:e$19,userId:r$34,workspaceId:o$32,wsKey:s$25};}function $M(t$21){return!!(t$21&&t$21.length>0);}function _ne(t$21){if(t$21)return t$21.filter(i$27=>rt$2(i$27)!==`comment`)[0];}function kne(t$21){return t$21?t$21.filter(i$27=>rt$2(i$27)===`comment`):[];}function Fne(t$21,i$27){i$27.push(t$21.filter(e$19=>!ss$1(e$19.status))),t$21.forEach(e$19=>{e$19.subtasks&&e$19.subtasks.length&&Fne(e$19.subtasks,i$27);});}function xne(t$21=jM,i$27){switch(i$27.type){case ed:{let{unresolvedTasks:e$19,accessibleTasks:r$34,inaccessibleTasks:o$32,task:s$25,status:n$46,dependencies:a$30,boardPayload:c$37,listPayload:m$32,unresolvedConflict:l$26,revertGroupIdsMap:g$19,muteNotifications:f$33,extraData:h$15}=i$27.payload;if(!e$19?.length&&!r$34?.length&&!o$32?.length)return t$21;let I$25=!0;if(Array.isArray(s$25)&&s$25.length>1)return{...t$21,task:s$25,status:n$46,modalOpen:I$25,unresolvedTasks:e$19,listPayload:m$32,unresolvedConflict:l$26,inaccessibleTasks:o$32,accessibleTasks:r$34,revertGroupIdsMap:g$19,muteNotifications:f$33,extraData:h$15};let A$22=[...t$21.subtasks],R$21=[...t$21.checklists],w$26=[...t$21.comments];if(e$19&&e$19.length){let E$16=e$19[0],P$20=[];Fne(E$16.task.subtasks||[],P$20),A$22=z$17(P$20),w$26=E$16.task.todoComments.filter(B$22=>!B$22.resolved),E$16.task.checklists.forEach(B$22=>{B$22.unresolved>0&&B$22.items.forEach(G$16=>{Rne(G$16,R$21);});});}return{...jM,modalOpen:I$25,unresolvedTasks:e$19,checklists:R$21,comments:w$26,subtasks:A$22,task:s$25,status:n$46,dependencies:a$30,boardPayload:c$37,listPayload:m$32,unresolvedConflict:l$26,inaccessibleTasks:o$32,accessibleTasks:r$34,revertGroupIdsMap:g$19,muteNotifications:f$33,extraData:h$15};}case cd:{let e$19=i$27.payload;return{...t$21,project:e$19};}case td:{let e$19=i$27.payload;return{...t$21,timezone:e$19,timezoneModal:!0};}case rd:return{...t$21,timezone:``,timezoneModal:!1};case ad:return jM;case id:{let e$19=i$27.payload,{showAllSubs:r$34,showAllComments:o$32,showAllChecklists:s$25,showAllUnresolved:n$46}=t$21;return e$19===`subs`?r$34=!0:e$19===`comments`?o$32=!0:e$19===`checklists`?s$25=!0:n$46=!0,{...t$21,showAllSubs:r$34,showAllComments:o$32,showAllChecklists:s$25,showAllUnresolved:n$46};}case od:case sd:return{...t$21,resolving:!0};default:return t$21;}}function $ne(){return{provide:N$10,useFactory:dbe};}function jne(){return{provide:te$5,deps:[q$19,Ni,Ft],useFactory:pbe};}function Lne(){return{provide:oe$4,deps:[q$19],useFactory:ube};}function Dne(){return zn$1([$ne(),jne(),Lne()]);}function Bne(t$21){let i$27=e$19=>e$19.type===m$11.rehydrate.type&&!!e$19.state;return(e$19,r$34)=>i$27(r$34)?{...e$19,...r$34.state}:t$21(e$19,r$34);}function Une(t$21,i$27){let e$19=lr$1(t$21),r$34=`ngrx-reducer-validator`;if(e$19.length>0){r$34+=`-failed`,fc(e$19,{origin:r$34,handled:!1,actionType:t$21.type,feature:`unknown`});return;}r$34=`ngrx-reducer-exception`,fc(i$27,{origin:r$34,handled:!1,actionType:t$21.type,feature:`unknown`});}function Wne(t$21){return(i$27,e$19)=>{try{return t$21(i$27,e$19);}catch(r$34){Une(e$19,r$34);}return i$27;};}function Hne(t$21){return(i$27,e$19)=>fbe(e$19)?t$21({...i$27,[e$19.sliceName]:void 0},e$19):t$21(i$27,e$19);}function LM(t$21){return t$21.map(hbe);}function hbe(t$21){return ybe(gbe(t$21));}function gbe(t$21){return t$21.group?{...t$21,id:t$21.group_id,items:t$21.notifs}:t$21;}function ybe(t$21){let i$27=(t$21.notifs||[]).find(e$19=>e$19.field===`comment_resolved`&&e$19.comment);return i$27?{...t$21,notifs:t$21.notifs.filter(e$19=>!e$19.comment||e$19.field!==`comment_assigned`||e$19.comment.id!==i$27.comment.id)}:t$21;}function hk(t$21){let i$27=[];return t$21.forEach(e$19=>{if(e$19.task&&i$27.push(e$19.task),!e$19.items?.length)return;let r$34=hk(e$19.items);r$34.length&&i$27.push(...r$34);}),i$27;}function Kne(t$21){return t$21?.map(i$27=>i$27.field===`checklist_items_added`&&i$27.checklist_items?{...i$27,notifCount:i$27.checklist_items.length,checklistFullContent:i$27.checklist_items.map(e$19=>e$19.name),checklist_items:void 0}:i$27);}function gk(t$21){return t$21.group_id||Sbe(t$21.notifs);}function Sbe(t$21){return t$21.length>0?t$21[0].id:``;}function DM(t$21,i$27){let e$19=[];return t$21.forEach(r$34=>{if(gk(r$34)===i$27)return;if(!r$34.group||!r$34.items){e$19.push(r$34);return;}let o$32=DM(r$34.items,i$27);if(o$32.length){if(o$32.length===r$34.items.length){e$19.push(r$34);return;}e$19.push({...r$34,items:o$32});}}),e$19;}function Zne(t$21,i$27,e$19,r$34){if(t$21.group&&t$21.items){let o$32=!1,s$25=t$21.items?.map(n$46=>{let a$30=Zne(n$46,i$27,e$19,r$34);return o$32||=a$30!==n$46,a$30;});return o$32?{...t$21,items:s$25}:t$21;}if(t$21[i$27]&&t$21[i$27].id===e$19){let s$25=t$21[i$27].followers.find(n$46=>n$46.id===r$34.id)?t$21[i$27].followers.filter(n$46=>n$46.id!==r$34.id):[...t$21[i$27].followers,r$34];return{...t$21,[i$27]:{...t$21[i$27],followers:s$25}};}return t$21;}function NM(t$21,i$27,e$19,r$34){return{...t$21,list:t$21.list.map(o$32=>Zne(o$32,i$27,e$19,r$34))};}function eae(t$21=Jne,i$27){let e$19,r$34,o$32,s$25,n$46;switch(i$27.type){case Mo$1:i$27.payload.team?n$46=Object.assign({},t$21.availableAll,{[i$27.payload.team.id]:{unseen:0}}):n$46=t$21.availableAll,s$25=Object.assign({},t$21.available,{unseen:0}),o$32=E$15(t$21.list);for(let a$30 of o$32)for(let c$37 of a$30.notifs)c$37.seen=!0;return{...t$21,list:o$32,allMarkedSeen:!0,available:s$25,availableAll:n$46,error:``};case co:if(i$27.payload.error)e$19=t$21.list.findIndex(a$30=>a$30.task&&a$30.task.id===i$27.payload.prevPayload.taskId),e$19!==-1&&(r$34=Object.assign({},t$21.list[e$19],{has_more_notifs:!1}));else if(A$19(i$27.payload)&&i$27.payload.length>0){let a$30=i$27.payload[0];e$19=t$21.list.findIndex(c$37=>c$37.task&&a$30.task&&c$37.task.id===a$30.task.id),e$19===-1&&(e$19=t$21.list.findIndex(c$37=>c$37.subcat&&a$30.subcat&&c$37.subcat.id===a$30.subcat.id)),e$19===-1&&(e$19=t$21.list.findIndex(c$37=>c$37.view&&a$30.view&&c$37.view.id===a$30.view.id)),r$34=Xne(E$15(a$30)),r$34.notifs=t$21.list[e$19].notifs.concat(r$34.notifs);}return r$34?o$32=[...t$21.list.slice(0,e$19),r$34,...t$21.list.slice(e$19+1)]:o$32=t$21.list.slice(),{...t$21,list:o$32,error:``};case io$1:{let a$30=t$21.list.map(c$37=>c$37.view&&c$37.view.id===i$27.payload.viewId||c$37.task&&c$37.task.id===i$27.payload.taskId?{...c$37,notifs:c$37.notifs.map(m$32=>m$32.id===i$27.payload.notifId?{...m$32,additional_items:[...m$32.additional_items,...i$27.payload.items],last_page:i$27.payload.lastPage}:m$32)}:c$37);return{...t$21,list:a$30};}case ro:{o$32=E$15(i$27.payload.notifications);for(let c$37 of o$32)c$37=Xne(c$37);o$32=Yne(o$32);let a$30={};return i$27.payload.request&&!i$27.payload.request.showArchived&&i$27.payload.request.filter===e$12.All&&!i$27.payload.request.lastId&&i$27.payload.request.team&&(a$30={available:{unseen:0},availableAll:{...t$21.availableAll,[i$27.payload.request.team]:{unseen:0}}}),{...t$21,...a$30,list:i$27.payload.reset?o$32:[...t$21.list,...o$32],lastNotif:i$27.payload.lastNotif,allMarkedSeen:!!t$21.showArchived,allLoaded:!i$27.payload.has_more_tasks,loading:!1,silentLoading:!1,error:``};}case no$1:return{...t$21,available:i$27.payload,error:``};case ao$1:{let a$30={};return i$27.payload?.notifs&&i$27.payload.notifs.forEach(c$37=>{c$37.team&&(a$30[c$37.team]={count:parseInt(c$37.count,10),unseen:parseInt(c$37.unseen,10)});}),{...t$21,availableAll:a$30,error:t$21.list.length>0?``:t$21.error};}case oo$1:{let a$30=Yne(E$15(t$21.list)),c$37=!i$27.payload.lastId&&!!t$21.showArchived==!!i$27.payload.showArchived&&t$21.filter===i$27.payload.filter&&!t$21.showArchived&&t$21.teamId===i$27.payload.teamId;a$30=i$27.payload.lastId||c$37?[...a$30]:[],c$37&&!i$27.payload.lastId&&i$27.payload.isFirstPageLoad&&a$30.length>0&&(a$30=a$30.slice(0,10));let m$32=!c$37||a$30.length===0;return{...t$21,list:a$30,lastId:i$27.payload.lastId,showArchived:i$27.payload.showArchived,filter:i$27.payload.filter,loading:m$32,silentLoading:!m$32,error:``,teamId:i$27.payload.teamId};}case Yi:return i$27.payload&&t$21&&t$21.list?(i$27.payload.parent_task&&(i$27.payload.parent||(i$27.payload.parent=i$27.payload.parent_task.id),i$27.payload.parent_name||(i$27.payload.parent_name=i$27.payload.parent_task.name)),{...t$21,list:tae(t$21.list,i$27.payload)}):t$21;case Qi:{let{payload:{commentType:a$30,commentId:c$37,assignee:m$32}}=i$27,l$26=t$21.list.map(g$19=>({...g$19,notifs:g$19.notifs.map(f$33=>((a$30===a$27.Task||a$30===a$27.DocComment)&&f$33.parent_comment?f$33.parent_comment?.id===c$37&&(f$33={...f$33,parent_comment:{...f$33.parent_comment,assignee:m$32}}):(a$30===a$27.Task||a$30===a$27.DocComment)&&!f$33.parent_comment?f$33.comment?.id===c$37&&(f$33={...f$33,comment:{...f$33.comment,assignee:m$32}}):a$30===a$27.Comment&&f$33.parent_comment&&f$33.additional_items?.length&&(f$33.additional_items=f$33.additional_items.map(h$15=>(h$15.comment?.id===c$37&&(h$15={...h$15,comment:{...h$15.comment,assignee:m$32}}),h$15))),f$33))}));return{...t$21,list:l$26};}case Fo:return{...t$21,list:[],error:``};case Ao$3:return{...t$21,settingsSaving:!0,error:``};case so:return{...t$21,settingsSaving:!1,error:``};case eo:return{...t$21,...Jne};case to$1:return{...t$21,loading:!1,silentLoading:!1,error:"Sorry, we're having trouble displaying your notifications. Please try again."};case No$1:return NM(t$21,`task`,i$27.payload.task.id,i$27.payload.user);case Uo$1:return NM(t$21,`view`,i$27.payload.view.id,i$27.payload.user);case Vo$1:return NM(t$21,`subcat`,i$27.payload.subcategory.id,i$27.payload.user);case ho$1:return{...t$21,list:[]};case Wo$1:return{...t$21,list:DM(t$21.list,gk(i$27.payload.notification))};default:return t$21;}}function Yne(t$21){return t$21.forEach(i$27=>{i$27.notifs=Kne(i$27.notifs);}),t$21;}function Xne(t$21){let i$27=[{key:`gh_commit`,repoNameField:`repo_name`,getCommitUrl(e$19){if(e$19.repo_owner&&e$19.repo_name&&e$19.sha)return`https://github.com/${e$19.repo_owner}/${e$19.repo_name}/commit/${e$19.sha}`;},getShortHash(e$19){return e$19?.sha?.substr(0,6);}},{key:`gl_commit`,repoNameField:`gl_repo_slug`,getCommitUrl(e$19){if(e$19.gl_repo_owner_name&&e$19.gl_repo_slug&&e$19.sha)return(e$19.host_url||Qne)+`/${e$19.gl_repo_owner_name}/${e$19.gl_repo_slug}/commit/${e$19.sha}`;},getShortHash(e$19){return e$19?.sha?.substr(0,6);}},{key:`bb_commit`,repoNameField:`bb_repo_name`,getCommitUrl(e$19){return e$19.data.links?e$19.data.links.html.href:e$19.data.self_link||``;},getShortHash(e$19){return e$19.hash?.substr(0,6);}}];for(let e$19 of t$21.notifs){if(e$19.comment&&(e$19.comment.resolved_original=e$19.comment.resolved,e$19.additional_items))for(let o$32 of e$19.additional_items)o$32.comment&&(o$32.comment.resolved_original=o$32.comment.resolved,o$32.field===`comment`&&!e$19.parent_comment&&o$32.comment.parent===e$19.comment.id&&(e$19.parent_comment=e$19.comment));let r$34=t$21.notifs.indexOf(e$19)+1;if(e$19.field===`status`)for(e$19.timeline=[];t$21.notifs[r$34]&&t$21.notifs[r$34].field===`status`&&t$21.notifs[r$34].user.id===e$19.user.id;)e$19.timeline.unshift(e$19.before),e$19.lastId=t$21.notifs[r$34].id,e$19.lastIdType=t$21.notifs[r$34].type,e$19.before=t$21.notifs[r$34].before,t$21.notifs.splice(r$34,1);else if(e$19.field===`reaction`)for(e$19.reactions=[e$19.user];t$21.notifs[r$34]&&t$21.notifs[r$34].field===`reaction`&&t$21.notifs[r$34].comment.id===e$19.comment.id&&t$21.notifs[r$34].data.reaction===e$19.data.reaction;)e$19.reactions.push(t$21.notifs[r$34].user),t$21.notifs.splice(r$34,1);else if(i$27.some(o$32=>o$32.key===e$19.field)&&e$19.after){e$19.commits=[{...e$19.after,data:e$19.data}];let o$32=e$19.field,s$25=i$27.find(n$46=>n$46.key===e$19.field);for(;t$21.notifs[r$34]&&t$21.notifs[r$34].field===o$32&&t$21.notifs[r$34].after&&t$21.notifs[r$34].after.author===e$19.after.author&&t$21.notifs[r$34].after.branch_name===e$19.after.branch_name&&t$21.notifs[r$34].after[s$25.repoNameField]===e$19.after[s$25.repoNameField];)e$19.commits.unshift({...t$21.notifs[r$34].after,data:t$21.notifs[r$34].data}),e$19.lastId=t$21.notifs[r$34].id,e$19.lastIdType=t$21.notifs[r$34].type,e$19.after=t$21.notifs[r$34].after,t$21.notifs.splice(r$34,1);e$19.commits=e$19.commits.map(n$46=>({...n$46,url:s$25.getCommitUrl(n$46),sha_short:s$25.getShortHash(n$46)}));}}return t$21;}function tae(t$21,i$27){return t$21.map(e$19=>e$19.task?.id===i$27.id?{...e$19,task:{...e$19.task,...i$27},notifs:e$19.notifs?.map(r$34=>{if(r$34.field===`comment_assigned`){let o$32=(e$19.task.todoComments||[]).findIndex(s$25=>s$25.id===r$34.comment.id);if(o$32!==-1)return{...r$34,comment:{...r$34.comment,...e$19.task.todoComments[o$32]}};}return r$34;})}:e$19.group&&e$19.items?.some(r$34=>r$34.task?.id===i$27.id)?{...e$19,items:tae(e$19.items,i$27)}:e$19);}function iae(t$21,i$27=`m/d/y`){if(!t$21)return``;let e$19=(0,yk.default)(),r$34=(0,yk.default)(t$21),s$25=I$5(r$34,i$27,e$19.year()!==r$34.year()),n$46=r$34.diff(e$19,`seconds`),a$30=Math.ceil(n$46/60),c$37=Math.round(a$30/60);if(n$46>=-60&&n$46<0)return`1 minute from now`;if(a$30>0&&a$30<60)return`${a$30} ${ne(a$30)} from now`;if(c$37>0&&c$37<24)return`${c$37} ${le$1(c$37)} from now`;return(0,yk.default)(t$21).isSame(e$19.clone().add(1,`day`),`day`)?`tomorrow`:s$25;}function BM(t$21){return{...t$21};}function sae(t$21){let i$27=[],e$19=[];for(let r$34 of t$21)r$34.dueDateStatus===`DELETED`?e$19.push(r$34.id):i$27.push(r$34);return{foundReminders:i$27,deletedReminderIds:e$19};}function nae(t$21){let i$27=0;for(let e$19 of t$21)if(e$19.updatedAt){let r$34=new Date(e$19.updatedAt).getTime();i$27=Math.max(i$27,r$34);}return i$27;}function aae(){return C$23(Ni).environment$.pipe(q$20(t$21=>t$21.apiUrlRemindersV3Service));}function hae(t$21){let{tag:i$27,path:e$19,query:r$34,extras:o$32,replaceRoute:s$25}=t$21.payload;Cbe.log(`RouterActions.Go`,i$27,e$19,{queryParams:r$34,extras:o$32,replaceRoute:s$25});}function Rbe(t$21,{loadingMap:i$27,cardRefreshTimestamps:e$19}){return o$7(t$21)&&It$1(t$21.id,i$27)&&!e$19[t$21.id];}function Nae(t$21){return t$21.some(i$27=>Hi$1.includes(i$27.field));}function Hae(t$21){return t$21?Nbe.some(i$27=>t$21[i$27]===void 0):!0;}function Gae(t$21,i$27,e$19){return!t$21||(t$21.project_details||!e$19)&&(t$21.category_details||!i$27)?t$21:{...t$21,project_details:t$21.project_details??(e$19&&{id:e$19.id,name:e$19.name,access:e$19.access}),category_details:t$21.category_details??(i$27&&{id:i$27.id,name:i$27.name,hidden:i$27.hidden,access:i$27.access,private:i$27.private})};}function Yae(t$21,i$27,e$19){let r$34=t$21.fields??[],o$32=t$21.customFieldValues??[],s$25=t$21.customFields??[],n$46=[...r$34],a$30=[...o$32],c$37=[...s$25];if(i$27.value){let m$32={field_id:e$19.id,options:void 0,value:void 0,value_richtext:void 0};n$46.find(l$26=>l$26.field_id===e$19.id)||(n$46=n$46.concat(m$32)),a$30.find(l$26=>l$26.field_id===e$19.id)||(a$30=a$30.concat(m$32));}return n$46=Wbe(n$46,e$19,i$27),a$30=Hbe(a$30,e$19,i$27),c$37=Gbe(c$37,e$19,i$27),{newFields:n$46,newCustomFieldValues:a$30,newCustomFields:c$37};}function Wbe(t$21,i$27,e$19){return t$21.map(r$34=>r$34.field_id===i$27.id?{...r$34,value:e$19.value,options:e$19.valueOptions,value_richtext:e$19.valueRichtext}:r$34);}function Hbe(t$21,i$27,e$19){return t$21.map(r$34=>r$34.field_id===i$27.id?{...r$34,value:e$19.value,value_options:e$19.valueOptions,value_richtext:e$19.valueRichtext}:r$34);}function Gbe(t$21,i$27,e$19){return t$21.map(r$34=>r$34.id===i$27.id?{...r$34,value:e$19.value,value_options:e$19.valueOptions,value_richtext:e$19.valueRichtext}:r$34);}function cce(t$21){let i$27=C$23(q$19),e$19=C$23(Le$4);return(t$21?qe$6(t$21):i$27.select(h$13)).pipe(Ve$4(1),Is$1(o$32=>{o$32&&i$27.dispatch(y$15({name:`List`,projectId:o$32.id,id:`-3`,redirect:!1}));}),le$5(()=>e$19),Ye$2(p$25),Ve$4(1));}function mce(t$21,i$27,e$19,r$34){return Re$4({subcategory:{...i$27,preset_task_template:t$21?{permanent_template_id:t$21.permanent_template_id,name:t$21.name}:void 0},categoryId:e$19,projectId:r$34});}function dce(t$21=Qbe,i$27){switch(i$27.type){case _$2:{let e$19=i$27.payload;return{...t$21,currentTeamId:e$19.teamId,recentTemplates:e$19.teamId!==t$21.currentTeamId?null:t$21.recentTemplates};}case L$3:return{...t$21,recentTemplatesLoading:!0};case G$3:return{...t$21,searchTemplatesMap:{...t$21.searchTemplatesMap,[i$27.payload.query]:i$27.payload.ids},templatesMap:(i$27.payload.templates||[]).reduce((e$19,r$34)=>(e$19[r$34.id]=r$34,e$19),{...t$21.templatesMap}),templatesPagingMap:{...t$21.templatesPagingMap,[i$27.payload.query]:{start:i$27.payload.start,startId:i$27.payload.startId}},hasFetchedMap:{...t$21.hasFetchedMap,[i$27.payload.query]:!0}};case f$11:{let e$19=i$27.payload;return{...t$21,recentTemplates:e$19.templates,recentTemplatesError:``,recentTemplatesLoading:!1,hasFetchedMap:{...t$21.hasFetchedMap,"":!0}};}case R$6:{let e$19=i$27.payload;return{...t$21,recentTemplatesError:e$19.error,recentTemplatesLoading:!1};}case M$5:{let{autoTemplateId:e$19,open:r$34}=i$27.payload;return{...t$21,autoTemplateId:e$19,open:r$34};}case h$2:{let{autoTemplateApplied:e$19}=i$27.payload;return{...t$21,autoTemplateApplied:e$19};}case H$3:{let e$19=i$27.payload;return{...t$21,recentTemplatesError:e$19.error,recentTemplatesLoading:!1};}case d$7:{let{shareTemplatePath:e$19}=i$27.payload;return{...t$21,shareTemplatePath:e$19};}case m$13:{let{shareTemplateApplied:e$19}=i$27.payload;return{...t$21,shareTemplateApplied:e$19};}case D$3.type:return{...t$21,templatesHistory:{...t$21.templatesHistory}};case I$7.type:{let e$19=i$27.payload,r$34=t$21.templatesHistory?.entries||[],o$32=new Set(r$34.filter(n$46=>n$46.templateUserState?.is_dismissed).map(n$46=>n$46.id)),s$25=e$19.map(n$46=>o$32.has(n$46.id)?{...n$46,templateUserState:{...n$46.templateUserState,is_dismissed:!0}}:n$46);return{...t$21,templatesHistory:{...t$21.templatesHistory,entries:s$25}};}case b$6.type:return{...t$21,templatesHistory:{...t$21.templatesHistory,error:i$27.payload}};case N$4.type:{let e$19=t$21.templatesHistory?.entries?.find(r$34=>r$34.id===i$27.payload.id);return e$19?{...t$21,templatesHistory:{...t$21.templatesHistory,entries:t$21.templatesHistory?.entries?.map(r$34=>r$34.id===e$19.id?{...e$19,templateActionStatus:i$27.payload.status}:r$34)}}:t$21;}case k$8.type:{let e$19=t$21.templatesHistory?.entries?.find(r$34=>r$34.id===i$27.payload.id);return e$19?{...t$21,templatesHistory:{...t$21.templatesHistory,entries:t$21.templatesHistory?.entries?.map(r$34=>(r$34.id===e$19.id&&(e$19.templateUserState={...e$19.templateUserState,is_dismissed:!0}),r$34))}}:t$21;}default:return t$21;}}function GM(){return s$23().get(fce)===!0||!1;}function hce(){let t$21=GM();f$30.byNamespace(`fe-platform`).info(`Zoneless mode enabled:`,t$21);let e$19=hD(()=>{let r$34=C$23(Qn),o$32=s$23();r$34.isTreatmentOn(O$16.FePlatformEnableNgZoneless).pipe(Ve$4(1)).subscribe(s$25=>{o$32.set(fce,s$25);});});return zn$1([t$21?aN():void 0,{provide:o0,useValue:t$21},e$19].filter(r$34=>!!r$34));}function Ybe(t$21){return t$21===`FIELD_043`||t$21===`FIELD_046`;}function Ds$1(t$21){return typeof t$21==`object`&&t$21!==null&&`vector`in t$21&&Array.isArray(t$21.vector);}function Ek(t$21){for(let i$27=0;i$27<t$21.length;i$27++){let e$19=t$21[i$27];if(typeof e$19!=`object`||!(`data`in e$19))continue;let r$34=e$19.data;if(typeof r$34==`object`&&r$34!==null&&(!(`_version_vector`in r$34)||!Ds$1(r$34._version_vector)))return!1;}return!0;}function Qce(t$21){return t$21?Number(new TextEncoder().encode(Ae$3(t$21)).length/1e3).toFixed(1):0;}function Zce(){return[{provide:we$2,useClass:Uce,multi:!0},{provide:we$2,useClass:Yce,multi:!0},{provide:we$2,useClass:Vce,multi:!0},{provide:we$2,useClass:Rce,multi:!0},{provide:we$2,useClass:vce,multi:!0},{provide:we$2,useClass:Hce,multi:!0},{provide:we$2,useClass:bce,multi:!0},{provide:we$2,useClass:Sce,multi:!0},{provide:we$2,useClass:Mce,multi:!0},{provide:we$2,useClass:Kce,multi:!0},{provide:we$2,useClass:Xce,multi:!0},{provide:we$2,useClass:Ak,multi:!0},{provide:we$2,useClass:wk,multi:!0},{provide:we$2,useClass:zce,multi:!0},{provide:we$2,useClass:wce,multi:!0},{provide:we$2,useClass:qce,multi:!0},{provide:we$2,useClass:xce,multi:!0},{provide:we$2,useClass:Jce,multi:!0}];}function eme(t$21,i$27,e$19){if(!(!t$21||!i$27||!e$19))return new yn(`${i$27}/hierarchy/v1/project?include_archived=false&include_view_settings=true&team=${e$19}`,{headers:{Authorization:`Bearer ${t$21}`},method:`GET`}).withTelemetry(`app_bootstrap.xhr.fetch_project`);}function tme(){if(s$23().get(wo$2))return new yn(`${w$25.globalShardApiUrlBase}/${a$29.Auth}/v1/refresh_token`,{body:JSON.stringify({}),credentials:`include`,method:`POST`}).withTelemetry(`app_bootstrap.xhr.refresh_token`);}function rme(){let t$21=sCe();if(t$21)return oCe(t$21);let i$27=Dd$1();if(i$27)return iCe(i$27);}function iCe(t$21){return new yn(`${ime()}/shard/v1/handshake/${t$21}`,{method:`GET`}).withTelemetry(`app_bootstrap.xhr.fetch_shard_info`);}function oCe(t$21){return new yn(`${ime()}/shard/v1/legacyResourceHandshake?${t$21}`,{method:`GET`}).withTelemetry(`app_bootstrap.xhr.fetch_legacy_resource_shard_info`);}function ime(){let t$21=Pd();return t$21?Vd(t$21).apiUrlBase:w$25.apiUrlBase;}function sCe(){let t$21=Gu();if(t$21?.id&&/^[a-zA-Z0-9]+$/.test(t$21.id))return`task_id=${t$21.id}`;}function ome(t$21,i$27,e$19){if(!(!t$21||!i$27||!e$19))return new yn(`${i$27}/customFields/v1/team/${e$19}/fields`,{headers:{Authorization:`Bearer ${t$21}`},method:`GET`}).withTelemetry(`app_bootstrap.xhr.fetch_team_custom_fields`);}function sme(t$21){return I$24(this,null,function*(){let i$27=tme(),e$19=rme();if(t$21.set(i$27),t$21.set(e$19),!(!i$27||!e$19))try{let[r$34,o$32]=yield Promise.all([i$27.parseJsonResponseEarly(),e$19.parseJsonResponseEarly()]),s$25=r$34?.token,n$46=o$32?.appEnvironment?.apiUrlBase,a$30=o$32?.workspaceId;if(!s$25||!n$46||!a$30)return;t$21.set(eme(s$25,n$46,a$30)),t$21.set(ome(s$25,n$46,a$30));}catch{return;}});}function nme(){let t$21=h$14.get(n$44);t$21&&(t$21 in u$32?s$2(t$21):a$1());}function ame(){return hD(()=>{let t$21=h$14.get(n$44),i$27=document.documentElement.lang;er$2(`locale_info`,{cookieLocale:t$21,documentLocale:i$27,browserLocales:navigator.languages,browserLocale:navigator.language,localeWrong:t$21&&t$21!==i$27}),nme();});}function mme(){return hD(()=>{let t$21=C$23(Fi),i$27=C$23(nr$1),e$19=C$23(q$19),r$34=C$23(Ni),o$32=C$23(cme),s$25=C$23(Rc$1),n$46=C$23(ge$6);if(z$16||!s$25.refreshOrJwtTokenExists())return;let a$30=i$27.getUserShareAndReplay();a$30.pipe(Ve$4(1)).subscribe(m$32=>{e$19.dispatch(Ke$3({value:m$32.teams})),e$19.dispatch(p$28({payload:m$32.user}));});let c$37=o$32.parsePrefetchUrl();c$37?.viewId&&$i({isLayoutV4:n$46.isLayoutV4(),disabled:jS(O$16.FePlatformDisableAppInitializerPrefetchView)}).pipe(Ve$4(1),le$5(({isLayoutV4:m$32,disabled:l$26})=>m$32&&l$26?z$18:a$30),Ve$4(1)).subscribe(m$32=>{r$34.registerTeamSwitched(c$37.teamId||m$32.user.default_team),$i([r$34.handshakeInitiated$,r$34.handshakeCompleted$]).pipe(oe$13(([,l$26])=>l$26!==null),Ve$4(1),le$5(()=>t$21.getTeamByIdAndSetToPrefetchStore(c$37.teamId||m$32.user.default_team)),oe$13(l$26=>!!l$26)).subscribe(l$26=>{t$21.prefetchAnyView(qe$6(m$32),c$37,l$26),t$21.prefetchTeamProjectsAndSharedHierarhcy(c$37.teamId||m$32.user.default_team);});});});}function lme(){return hD(()=>{let t$21=C$23(Qn),i$27=C$23(f$23);i$27.nativeWindow.location.hostname===`qa.clickup-stg.com`&&!n$45()&&t$21.isTreatmentOn(O$16.FePlatformRedirectQaStagingToNormalStaging).pipe(Ve$4(1)).subscribe(r$34=>{if(r$34){let o$32=new URL(i$27.nativeWindow.location.href);o$32.hostname=`app.clickup-stg.com`,i$27.nativeWindow.location.replace(o$32.toString());}});});}function dme(){return hD(()=>{C$23(W).init();});}function pme(){return hD(()=>{let t$21=C$23(Qn),i$27=s$23();t$21.isTreatmentOn(O$16.FePlatformSplitUseIDB).pipe(Ve$4(1)).subscribe(e$19=>{i$27.set(jA,e$19);});});}function fme(){return hD(()=>{let t$21=C$23(Qn),i$27={secure:!0,sameSite:`None`,path:`/`};t$21.isTreatmentOn(O$16.FePlatformServeVite).pipe(Ve$4(1)).subscribe(e$19=>{e$19?h$14.set(ume,`1`,{...i$27,expires:new Date(Date.now()+31536e6)}):h$14.remove(ume,i$27);});});}function xk(t$21,i$27){let e$19=t$21;return{message:{...t$21,msg:e$19.msg},meta:{timestamp:i$27.timestamp??Date.now(),replyTo:e$19.reply_to,hasHandler:i$27.hasHandler??!1,isHandled:i$27.isHandled??!1}};}function QM(t$21){return t$21.vector.length;}function vme(t$21,i$27){return!!t$21.vector&&QM(t$21)>=QM(i$27);}function Sme(t$21){return t$21.event.version_change.object_id;}function dCe(t$21){return S$13(t$21)?.context?{ws_key:k$13(t$21)}:{};}function Cme(t$21){let i$27=t$21.relationships?.find(e$19=>e$19.type===`task-parent`&&e$19.object_type===et$6.LIST);return Array.isArray(t$21.changes)?t$21.changes.map(e$19=>({...e$19,subcategory_id:i$27?.object_id})):t$21.changes||[];}function _me(t$21){return Array.isArray(t$21)?t$21.find(e$19=>e$19?.field===Rt.ParentChanged)?.subcategory_id:t$21.subcategory_id;}function kme(t$21){return d$1(t$21)?i$3(t$21):ni(t$21)?_me(t$21):null;}function Ime(t$21){return t$21.msg===`taskUpdate`||t$21.msg===`optimizedTaskUpdate`;}function Ame(t$21){let i$27=Array.isArray(t$21.message?.payload?.hist_item)?t$21.message?.payload?.hist_item[0]:t$21.message?.payload?.hist_item;(i$27?.field===`assignee`||i$27?.field===`follower`)&&(t$21.fields.push(s$15.Users),t$21.fields.push(s$15.Groups));}function wme(t$21){return!!t$21?.filter?.filters?.some(({field:i$27})=>i$27.startsWith(`cf_`));}function Mme(t$21){wme(t$21.dataView)&&t$21.dataView?.filter?.filters?.forEach(i$27=>{i$27.field.startsWith(`cf_`)&&t$21.fields.push(i$27.field);});}function Rme(t$21){t$21.fields.push(s$15.CustomFields);}function Fme(t$21){return t$21?Array.isArray(t$21)?t$21.some(i$27=>i$27.field===t$3.DependencyOf||i$27.field===t$3.DependsOn):t$21.field===t$3.DependencyOf||t$21.field===t$3.DependsOn:!1;}function xme(t$21){let i$27=Fme(t$21.message.payload.hist_item),e$19=!!t$21.dataView?.columns?.fields?.some(({field:r$34,hidden:o$32})=>r$34===`dependencies`&&!o$32);i$27&&e$19&&t$21.fields.push(s$15.RelationshipFields,s$15.RelatedTasks);}function Ome(t$21){t$21.dataView?.columns?.fields?.some(e$19=>e$19.field===`linked`&&!e$19.hidden)&&t$21.fields.push(`linked`);}function Pme(t$21){t$21.dataView?.columns?.fields?.some(e$19=>e$19.field===`pages`&&!e$19.hidden)&&t$21.fields.push(`doc_pages`);}function $me(t$21){(Array.isArray(t$21.message?.payload?.hist_item)?t$21.message?.payload?.hist_item[0]:t$21.message?.payload?.hist_item)?.field===`points`&&t$21.fields.push(s$15.PointsEstimate);}function jme(t$21){d$1(t$21.message.payload.hist_item)&&t$21.dataView?.viewType===o$31.Board&&t$21.fields.push(s$15.Statuses);}function Lme(t$21){(t$21.dataView?.viewType===o$31.List||pCe(t$21.message?.payload))&&t$21.fields.push(s$15.SubtasksByStatus);}function pCe(t$21){return t$21?.hist_item?Array.isArray(t$21.hist_item)?t$21.hist_item.some(i$27=>i$27?.field===`new_subtask`):t$21.hist_item.field===`new_subtask`:!1;}function Dme(t$21){let i$27=t$21.dataView?.viewType===o$31.List&&!!t$21.dataView?.columns?.fields?.find(r$34=>uCe(r$34)),e$19=Array.isArray(t$21.message?.payload?.hist_item)?t$21.message?.payload?.hist_item[0]:t$21.message?.payload?.hist_item;[`timeEstimate`,`time_estimate`].includes(e$19?.field)&&(i$27=!0),i$27&&t$21.fields.push(s$15.TimeEstimate);}function uCe(t$21){return t$21.field===`timeEstimate`&&!t$21.hidden;}function Nme(t$21){let i$27=new Set();return t$21.forEach(e$19=>{e$19?.customFields?.forEach(r$34=>{i$27.add(`cf_${r$34.id}`);}),e$19?.customFieldValues?.forEach(r$34=>{i$27.add(`cf_${r$34.field_id}`);});}),i$27;}function Bme(t$21){return t$21.filter(i$27=>!i$27.startsWith(`cf_`))??[];}function yCe(){let i$27=new URLSearchParams(window.location.search).get(`pl`);return i$27===`true`||i$27===`1`;}function qme(t$21=[],i$27=[]){if(!yCe()){try{performance.mark(`app_bootstrap.script.angular_bootstrap_function.start`);}catch{}Promise.all(t$21).then(()=>{p$1.AngularBootstrapStart$.next(ka());return Be$8(iY,QA(zme,{providers:i$27}));}).then(()=>{try{if(performance.mark(`app_bootstrap.script.angular_bootstrap_function.finish`),performance.measure){performance.measure(`app_bootstrap.angular_bootstrap_function`,`app_bootstrap.angular_bootstrap_function.start`,`app_bootstrap.angular_bootstrap_function.finish`);let e$19=performance.getEntriesByName(`app_bootstrap.angular_bootstrap_function`,`measure`);if(e$19.length>0){let[r$34]=e$19;hCe.log(`%c\u2139\uFE0F Bootstrap duration: ${Number(r$34.duration).toFixed(4)}`,`color: #7b68ee`);}}}catch{}}).catch(e$19=>{lA(new Error(`Cannot initialize client app`,{cause:e$19}),{feature:`platform`});});}}var vQ,SQ,cre,mQ,Mb,fle,hle,hQ,gQ,yQ,vle,JA,ble,Rb,bQ,CQ,_Q,kQ,xb,Ele,IQ,EQ,AQ,wQ,XA,wle,Mle,Rle,ll,xle,Pb,Ole,OQ,VQ,$Q,UQ,$b$1,jb,Lle,GQ,Dle,Lb,Db,Nb,QQ,JQ,Hle,Gle,Bb,qle,YQ,Xle,Zle,XQ,ZQ,rde,ide,eJ,Af$1,nde,ade,cde,mde,lde,tJ,hde,gde,e0,rJ,Ub,iJ,oJ,sJ,Wb,aJ,nJ,cJ,Hde,mJ,lJ,Gde,dJ,Kde,Qde,pJ,Jde,uJ,fpe,hpe,fJ,hJ$1,ype,vpe,gJ,Hb,vJ,kpe,t0$1,Ipe,r0,Ape,wpe,CJ,_J,Cr$4,vi$1,oo$3,jf,Kpe,OJ$1,Qpe,Jpe,Ype,NJ,Xpe,Hc,Zpe,l0$1,eue,Fp,D0,ta$2,VJ,tue,UJ,N0,rue,B0,iue,ut$2,kJ$1,Zb,Df,p0,cC,u0,HJ,eC,U0,f0,mue,xf$1,h0,mC,ul$1,tC,g0,y0,Pp,rt$5,Rf,fl,rC,v0,io$2,due,iC,i0,lC,pue,ki,pl,Fa,Of,hC,hue,gue,XJ,ZJ,C0,_0,n0,pC,qc$1,k0,Bf,bue,F0,Aue,wue,Mue,xa,Fue,jp$1,xue,$0,j0,dl,Pa,Pue,gC,a9,c9$1,m9,l9,d9,jue,p9,Lue,u9,f9,Nue,h9,g9$1,y9,Uue,v9,S9,Hue,b9,C9,_9,zue,que,Kue,yC,k9,T9,I9,E9,Q0,A9,w9,M9,P9,$9,N9,B9,V9$1,Jue,Yue,U9,H9,Da,vC,lfe,Y9,gfe,yfe,X9,iY,Tfe,vl$1,sY,Afe,sw,wfe,nw,_C,Gf,zf,aw,kC,Mfe,ew,Ffe,Iw,bl,Cl,xfe,RC,FC$1,EC,AC,zY,jfe,LY,fw,hw,Qf,Vfe,Wfe,Gfe,gw,xC,yw,OC,vw,lw,PC,Sw,bw,Jfe,Cw,VY,Yfe,dw,Xfe,Zfe,ehe,the,JY,rhe,fn$1,Jf,Kf,pw,_w,kw$1,Yf,Hp,lhe,$C,jC$1,MC,XY,LC,Tw,DC,hhe,ZY,vhe,She,bhe,r6,NC,i6,BC$1,o6,n6,a6,Aw,ww,c6,Mw,m6,l6,p6,u6,f6,The,v6,S6,b6,C6,Ehe,k6,A6,VC$1,UC$1,WC,F6,Rw,O6,P6,$6,j6,L6,Rhe,D6,HC,ia,GC,zC$1,qC$1,KC$1,QC$1,V6,xhe,U6,JC$1,W6,Phe,H6,G6,z6,q6,YC$1,K6,Dhe,Q6,J6,Y6,Fw,Z6,e8,t8,r8,Vhe,xw,si$2,o8,s8,Va$1,n8,c8,m8,l8,u8,f8,Hhe,Ghe,zhe,g8,S8,b8,C8,_8,k8,ZC$1,T8,I8,E8,A8,M8,R8,O8,j8,Yhe,N8,V8,U8,W8,H8,G8,Zhe,ege,z8,q8,K8,tge,t_,r_,J8,Bw,Qc$1,Uw,e7,t7$1,r7,Ww,i7,i_,Jc$2,o_,o7,oge,sge,s7,n7,Yc$2,m7,f7,Gw,h7,g7,y7,v7,S7,b7,C7,n_,_7,k7,T7,I7,w7,M7,R7,F7,x7,d_,O7,P7,j7,L7,D7$1,u_,Sge,xs$3,H7,z7,Zc,g_,J7,Y7,X7,eX,tX,b_,C_,sX,nX,aX,cX,mX,lX,dX,pX,uX,fX,hX,gX,yX,qw,SX,MX,Tge,Ige,OX,DX,NX,BX,VX,GX,zX,$ge,Xw,Zw,jge,Lge,QX,JX,YX,XX,ZX,tZ,rZ,iZ,oZ,sZ,nZ,aZ,cZ,mZ,lZ,qp,pZ,uZ,fZ,Ha,Gge,E_,rm,vZ,bZ,CZ,kZ,TZ,IZ,EZ,AZ,wZ,MZ,xZ,OZ,R_,PZ,w_,M_,tye,UZ,WZ,F_,zZ,rM,GZ,iM,qZ,KZ,L_,tee,ree,iee,oee,gye,oM,pee,bye,gee,yee,vee,See,bee,Cee,_ee,kee,Iee,Eee,Aee,wee,Mee,N_,Ree,_ye,Fee,xee,Oee,Pee,$ee,Dee,Jp,Nee,Uee,Wee,Hee,Gee,qee,Kee,tte,rte,nte,ate,B_,cte,mte,lte,dte,pte,gte,yte,vte,Ste,bte,Cte,_te,kte,Tte,Ite,Ete,Ate,wte,Mte,Rte,Fte,xte,Ote,Pte,$te,jte,Lte,Dte,Nte,Ute,Wte,Hte,Gte,im,Gye,_l,so$1,zte,qte,Kte,Qte,Jte,Yte,nM,nh,Xte,Zte,ere,tre,rre,ire,ore,are,nre,mre,lre,dre,pre,ure,fre,hre,gre,yre,Sre,bre,Cre,_re,kre,Xye,rve,ive,ove,sve,nve,ave,cve,mve,lve,dve,pve,uve,fve,hve,gve,Ere,Are,Mre,G_,vve,Sve,bve,$re,Lre,Dre,z_,Ure,Ga,qre,Kre,_ve,Qre,q_,Jre,dM,Xre,om,Zre,eie,uM,tie,rie,iie,oie,sie,Rve,Fve,nie,aie,cie,lie,die,xve,pie,uie,fie,gM,gie,yie,Iie,Eie,Lve,Aie,wie,yM,Dve,Vve,Uve,Wve,Hve,vM,Mie,Rie,Gve,Pie,SM,$ie,jie,Lie,Y_,Kve,Qve,Jve,Yve,CM,nm,Uie,qie,Kie,Qie,noe,Zve,tk,iSe,oSe,soe,aoe,coe,moe,doe,hoe,goe,yoe,voe,Soe,Coe,_oe,cSe,mSe,za,lSe,Ioe,Eoe,Aoe,xoe,Ooe,Poe,$oe,gSe,joe,Loe,Voe,Uoe,Woe,vSe,zoe,Koe,Qoe,Joe,Yoe,Zoe,ese,tse,rse,ise,ose,sse,nse,ase,hse,gse,yse,vse,Sse,bse,_se,rk,ISe,Tse,wM,Vr$1,js$2,ak,Use,Ise,ik,Ps$1,Ese,Ase,wse,qa,ok,Xp$1,ASe,xse,Ose,Tl,ch,wSe,MSe,RSe,TM,$se,IM,mh,jse,Zp,OSe,sk,$s$3,nk,Nse,eu,AM,jSe,Bse,Il,NSe,Wse,zse,Yse,Zse,lk,dk,tne,USe,rne,WSe,HSe,GSe,zSe,one,sne,nne,KSe,RM,ane,FM,JSe,YSe,xM,cne,mne,XSe,lne,dne,pne,pk,ZSe,ebe,sbe,nbe,lh,OM,abe,PM,une,fne,aa,hne,cbe,gne,yne,vne,Sne,bne,Cne,mbe,Tne,Ine,Ene,Ane,wne,Mne,Rne,jM,One,Pne,dbe,pbe,ube,Nne,Vne,fbe,fk,Gne,zne,qne,Qne,Jne,rae,yk,oae,vk,cae,bbe,mae,lae,dae,pae,uae,VM,fae,Cbe,gae,yae,vae,Sk,UM,Sae,_be,bae,Cae,_ae,kae,Ibe,Ebe,Abe,bk,Tae,Iae,tu,Eae,Aae,wae,Mbe,Fbe,ru,Mae,xbe,Rae,Obe,Fae,Pbe,xae,Oae,Pae,$ae,jae,Lae,WM,El,Dae,Bae,Vae,dh$1,Uae,Wae,Nbe,Ck,_k,kk,zae,qae,Kae,Tk,Qae,Jae,Xae,Zae,ece,tce,rce,ice,oce,sce,nce,ace,lce,Qbe,pce,uce,fce,gce,yce,zM,vce,Sce,bce,Cce,_ce,kce,Tce,Ice,Ece,Ace,wce,Mce,Rce,Zr,Ls$3,Fce,xce,Ik,Oce,Ka,Pce,$ce,jce,Lce,Dce,Nce,Bce,qM,Vce,Ak,wk,Uce,Mk,Wce,Hce,Xbe,Zbe,eCe,tCe,Gce,zce,qce,rCe,Kce,Jce,Rk,Yce,Xce,Fk,yn,KM,nCe,aCe,cCe,mCe,cme,ume,lCe,hme,gme,yme,bme,Tme,Ok,ca,Pk,Eme,$k,jk,Vme,Lk,Dk,Ume,Wme,Hme,Gme,zme,hCe,gCe;var init_main=__esmMin(()=>{init_chunk_LWNLWGPJ();init_chunk_YIAG7DPN();init_chunk_MBUUNCST();init_chunk_GIDHMHEZ();init_chunk_QSKEJN5H();init_chunk_V3ND2NRH();init_chunk_M3CXGYSO();init_chunk_MVCVHWPZ();init_chunk_3TDMQHLT();init_chunk_LKFCOP6T();init_chunk_RFR7IPQQ();init_chunk_54VMXGIT();init_chunk_KQ5MJH4P();init_chunk_OE6PYBYM();init_chunk_ZVLVJY5R();init_chunk_TBALFSIE();init_chunk_RTN5Y2MY();init_chunk_345DKYPN();init_chunk_QT263FLP();init_chunk_YA3B72AI();init_chunk_QG2YM64Y();init_chunk_NZAQMP66();init_chunk_WDWYRRED();init_chunk_OUX4NQEB();init_chunk_AOI7CZHM();init_chunk_PFWPGAZ6();init_chunk_ACL7MKVX();init_chunk_2PCRUZKH();init_chunk_GK7J3SXA();init_chunk_N3VBW4LJ();init_chunk_OEGD73JW();init_chunk_E473VFU3();init_chunk_4ICHMYUQ();init_chunk_PBGU6R25();init_chunk_TFSG7C6A();init_chunk_5EF5WLTR();init_chunk_MADIVYH4();init_chunk_2Y4IZSXB();init_chunk_C2P6DO2P();init_chunk_WEYRVEFO();init_chunk_R36OVBVY();init_chunk_YG64XT3O();init_chunk_UQ4QH522();init_chunk_U6ASKBBR();init_chunk_RCPKOZPS();init_chunk_QHV373YC();init_chunk_6A6JPUN3();init_chunk_33UJWRIJ();init_chunk_D7BRHWJ2();init_chunk_YZWLYZGX();init_chunk_DOL4AIBY();init_chunk_YJRKFXN6();init_chunk_WQUFW7WE();init_chunk_4MLO4QQQ();init_chunk_NYMJ6D3A();init_chunk_MNPSNBDG();init_chunk_CTLM6VFG();init_chunk_3IZTKVT2();init_chunk_5XIGGBWG();init_chunk_GJQO7UEW();init_chunk_LQKPCXK7();init_chunk_ACOBBVBA();init_chunk_WRKOQF42();init_chunk_QCUHP6TR();init_chunk_BGBSY46S();init_chunk_S67WJARE();init_chunk_O3MISVPC();init_chunk_QBWGEOKR();init_chunk_MPLGVJS7();init_chunk_XGSJYVNR();init_chunk_XBXQJ4GL();init_chunk_TACGRXKU();init_chunk_MS76NODV();init_chunk_IC3VL6RI();init_chunk_OG3IKRPM();init_chunk_5ACJ7CLE();init_chunk_SA7BLIFV();init_chunk_ZDHXZUOV();init_chunk_ZAKAVV55();init_chunk_QWTBZGNP();init_chunk_N7MM3HUT();init_chunk_KQSSGK34();init_chunk_RJMDCZGC();init_chunk_7HANRWMF();init_chunk_NBAPQGHD();init_chunk_7BSGO4MG();init_chunk_AS3JIYA2();init_chunk_RH4FWQNN();init_chunk_W5QUWOEQ();init_chunk_O2SZ5CQF();init_chunk_VYW5RLTF();init_chunk_JY7S4RLR();init_chunk_6RDJS63F();init_chunk_I6UTE6SD();init_chunk_ZMDKCXOF();init_chunk_2XUJX3BL();init_chunk_F5YPYGEI();init_chunk_MZBRJFVU();init_chunk_K65HDRCK();init_chunk_R45NF4AY();init_chunk_VXB24VUM();init_chunk_UJQAVLJE();init_chunk_IF7EMKQR();init_chunk_KIYRLFYY();init_chunk_27UKCLLJ();init_chunk_SJEB5A53();init_chunk_QCVS34YT();init_chunk_KU6HOPT6();init_chunk_H55464Z7();init_chunk_5E4GWM3G();init_chunk_IJ4PRWCS();init_chunk_HGTWKD72();init_chunk_CHFNWNLP();init_chunk_KDV2XVKH();init_chunk_M6QPC5NP();init_chunk_2K475J7X();init_chunk_O2VTHQMX();init_chunk_O4APS4QY();init_chunk_56WV7NKT();init_chunk_NGP5VHNR();init_chunk_U7GN3J7X();init_chunk_QKCKEXSK();init_chunk_7VBQI6QO();init_chunk_MDK4IUVT();init_chunk_RV7KNZZR();init_chunk_ETF7SHKB();init_chunk_BXATQYZZ();init_chunk_P7AX6236();init_chunk_DHVHUA7X();init_chunk_27M7YZJX();init_chunk_TK56FUVY();init_chunk_I6WPMW6I();init_chunk_6KXDX2WB();init_chunk_L4FVJ2SR();init_chunk_HW5M5EJ3();init_chunk_FIDKMGV2();init_chunk_TCQRVZIW();init_chunk_DMRPX4KX();init_chunk_6DDHAS6F();init_chunk_CGPDZMQG();init_chunk_UTNRXYWW();init_chunk_HUNTI6OO();init_chunk_C5XDFTY3();init_chunk_IPDBOLGC();init_chunk_OYS3PCQN();init_chunk_5GHC3Y64();init_chunk_2WSZTAJQ();init_chunk_VIU25DTV();init_chunk_WEOSME6L();init_chunk_L2B2Z47Y();init_chunk_H3NGRIAC();init_chunk_RLK27ZUA();init_chunk_2VQXPST3();init_chunk_CBH5EF6E();init_chunk_RJ4N5IZZ();init_chunk_YABWRMNR();init_chunk_EF4MUJAL();init_chunk_4YYHOD3T();init_chunk_A5AMLAMN();init_chunk_2WMBWE4A();init_chunk_Z722GYNE();init_chunk_PPYHVRM2();init_chunk_2ZKFK4FQ();init_chunk_QOXJVRQR();init_chunk_ZCMXS5HG();init_chunk_7TJKIKA5();init_chunk_IE2PF6QF();init_chunk_IJGGAYH2();init_chunk_DTRCSCDI();init_chunk_KRBWRIUA();init_chunk_AD3RX73I();init_chunk_5KY23Z44();init_chunk_4EGCKAGP();init_chunk_IMSGYTIS();init_chunk_SMIVPXBH();init_chunk_K3DRVV6Q();init_chunk_IN6OFQMK();init_chunk_SYWBQ7P5();init_chunk_MCHJVVFT();init_chunk_FL43D7GE();init_chunk_VVKCKFPH();init_chunk_Y7FXR2C3();init_chunk_M52OSWPN();init_chunk_QBPQ6NNC();init_chunk_OSRTBKFF();init_chunk_MMUVDGGH();init_chunk_AUSNRDFT();init_chunk_WT2BZZOB();init_chunk_JKT425JB();init_chunk_KD7YDNSJ();init_chunk_7M2WGB7J();init_chunk_GGSXP2UF();init_chunk_HS5S4AQQ();init_chunk_6HNCEOCZ();init_chunk_63QZK6YD();init_chunk_YTCDZSGI();init_chunk_7NNZE7VE();init_chunk_NDIPCL2A();init_chunk_BTTKJ224();init_chunk_G55NUQPT();init_chunk_3IQZKDPQ();init_chunk_COKS5NRA();init_chunk_7WWZ2JH6();init_chunk_73MIKFUP();init_chunk_MS64DTHW();init_chunk_AUJKHP2P();init_chunk_RHIM4YAO();init_chunk_3KHJAJTF();init_chunk_HHXIJPAQ();init_chunk_SC6D6ZCZ();init_chunk_GAXJVXAV();init_chunk_I7VA2QZN();init_chunk_S26Z2U2T();init_chunk_HQJ73OOY();init_chunk_HC6TEKGO();init_chunk_BJMXJFNV();init_chunk_Z6Z7IV6F();init_chunk_TOQJGOHA();init_chunk_F7Z3UE26();init_chunk_QPQEKQQK();init_chunk_LLK4QMNB();init_chunk_B7DCZBHN();init_chunk_KO3EUFNZ();init_chunk_WAKBWYJT();init_chunk_DK6TV7BJ();init_chunk_7KHLQDJ3();init_chunk_WP3JG3CA();init_chunk_45EG57BE();init_chunk_66VCHJTZ();init_chunk_WMQZBRDI();init_chunk_VL3EL6VX();init_chunk_H5U7RGZ6();init_chunk_IAWFQDRP();init_chunk_KDVMWK7Z();init_chunk_TLJPAJSO();init_chunk_TURIJ7YG();init_chunk_MFVTSQTM();init_chunk_YYSAES3W();init_chunk_QKXTMWNS();init_chunk_572VH4PN();init_chunk_FNPH6SE2();init_chunk_TOUX6JHL();init_chunk_43ADMI6R();init_chunk_MQDUJX7I();init_chunk_LP3T73IJ();init_chunk_GX2OGTWM();init_chunk_KLDBPTAV();init_chunk_UE3L25ST();init_chunk_GC3IGJJP();init_chunk_XCNHWPMY();init_chunk_PFJ2HH6M();init_chunk_XWMCW3VL();init_chunk_2RASJTR6();init_chunk_HP5YAQSD();init_chunk_FZFHHBQU();init_chunk_RSOGWXUC();init_chunk_ZMONI7LM();init_chunk_RKFES4AY();init_chunk_YU5EUHIP();init_chunk_H2H6TQXI();init_chunk_D2BDKS6Z();init_chunk_EIUPIMK3();init_chunk_7T5M7MDD();init_chunk_QQ4BDXQH();init_chunk_AM5CGUAE();init_chunk_4JXL5NLU();init_chunk_QY242NLB();init_chunk_SLDJLS3W();init_chunk_GRVQX4YB();init_chunk_FMLSMREI();init_chunk_55MVDEZA();init_chunk_MV2OR3MM();init_chunk_KQ2U6JR7();init_chunk_VJ6K7447();init_chunk_IB3WND4P();init_chunk_AV2U3K6O();init_chunk_L4VKTPCI();init_chunk_EQJPMMDN();init_chunk_AFGIXINT();init_chunk_LD35L75T();init_chunk_UJHR4ODB();init_chunk_DBYL4S7L();init_chunk_IZXOYL35();init_chunk_YBZTUL35();init_chunk_ZXGHULUR();init_chunk_RS5TSI22();init_chunk_26GUEDXE();init_chunk_E7A3ZNIO();init_chunk_LFMXPICJ();init_chunk_FERWDOAD();init_chunk_M5OKQKTH();init_chunk_KOH2LN7P();init_chunk_ESMMMQ24();init_chunk_IEQ6TOOI();init_chunk_7KOZZ3JQ();init_chunk_XRKUB7CW();init_chunk_GF5YRE5Q();init_chunk_D3A3OTDV();init_chunk_XP2PB7NZ();init_chunk_SSKZ4UWS();init_chunk_6XG47YUH();init_chunk_KZR3RKTP();init_chunk_SPUXTX46();init_chunk_3VEK4ZTJ();init_chunk_WAFN7K32();init_chunk_XIJAFODG();init_chunk_4OV7BD46();init_chunk_AYIQKKQN();init_chunk_QS2VZ7BS();init_chunk_ZZY2CRH6();init_chunk_EBP2RB3E();init_chunk_SWG7XZRC();init_chunk_3G5RWRU6();init_chunk_4PTSSLXS();init_chunk_LEBTZNLM();init_chunk_NCNFF4P5();init_chunk_YBOBJARS();init_chunk_5NVHWBLQ();init_chunk_TXMEYB3F();init_chunk_SDW2YVHW();init_chunk_BSQLKKPT();init_chunk_4SJ56CQ7();init_chunk_ZYK23T47();init_chunk_G6MWNWZJ();init_chunk_LXYSDGOZ();init_chunk_E5WQXQQX();init_chunk_ZYXF27NJ();init_chunk_EW22LB3X();init_chunk_RX2IT33R();init_chunk_HQ23SRJU();init_chunk_U2O2OAWW();init_chunk_VRZFRU5E();init_chunk_2AZS4T25();init_chunk_KPPJJXYA();init_chunk_ZKF43KCS();init_chunk_M6GZZG7K();init_chunk_C6J7FWG3();init_chunk_LE5DQF6M();init_chunk_PCARPHZ3();init_chunk_XO6PDRBV();init_chunk_SSMOPCOP();init_chunk_5Q3ZIKGV();init_chunk_O2GJYKIU();init_chunk_4AMMAJJX();init_chunk_6XZ2ATYJ();init_chunk_CR2DDQCM();init_chunk_6GDA4ORM();init_chunk_KLBCLUVT();init_chunk_IGR6AOYR();init_chunk_G4HWGCLT();init_chunk_JW5CDN72();init_chunk_X7R2YLJ6();init_chunk_EJESKHIT();init_chunk_GIGOKR72();init_chunk_QOUWN2S7();init_chunk_QNCMYMLJ();init_chunk_5YVTLEYY();init_chunk_6AGUKP3B();init_chunk_72XMGHUU();init_chunk_FX53TGUQ();init_chunk_DI4RYWI2();init_chunk_PNQZSBOM();init_chunk_CZTJCIFC();init_chunk_UETE77GO();init_chunk_ES2UF5CP();init_chunk_UAT3L6QW();init_chunk_HSDHS2RS();init_chunk_UJRW4QF2();init_chunk_NQ4PBGGL();init_chunk_N4KKIHU6();init_chunk_3YG3LPCT();init_chunk_6P6QCLEN();init_chunk_VEEC4VYQ();init_chunk_L53RB37L();init_chunk_A76L7RFC();init_chunk_GXPRUVKY();init_chunk_7HXAPEUP();init_chunk_ACEXO4F3();init_chunk_DLQIMJEC();init_chunk_J32C2Y5L();init_chunk_GJHJXTKQ();init_chunk_W2LZLYJB();init_chunk_QJ6YQOYU();init_chunk_OSRUURNL();init_chunk_DJQUJSL3();init_chunk_MITZBOEJ();init_chunk_CAMMEM3L();init_chunk_RKBMNU42();init_chunk_USMMG65A();init_chunk_7MQ654HN();init_chunk_RG43USMS();init_chunk_P2RONZT5();init_chunk_UFFVXUGM();init_chunk_ALG674GG();init_chunk_XYJ6AOE7();init_chunk_XHONBACF();init_chunk_LHYLVLN2();init_chunk_5FHYZOC2();init_chunk_OLZCAKLO();init_chunk_CJWI5PNY();init_chunk_2L5ZTHLM();init_chunk_GZRQ5U25();init_chunk_IEL3ONU5();init_chunk_J6DRQW23();init_chunk_VT56I6IL();init_chunk_5JBSCDKG();init_chunk_3SZW2M2C();init_chunk_VZD7NVSW();init_chunk_SBQWP5L3();init_chunk_FWFYPZTY();init_chunk_7MHCG3V5();init_chunk_U7Z6NJY4();init_chunk_KPEAXVVQ();init_chunk_QGEELZGO();init_chunk_RWNXFSCE();init_chunk_ELVEJ42V();init_chunk_R4N5F5HV();init_chunk_F5SMZ5RF();init_chunk_5RAIWTKC();init_chunk_QHU2GVXI();init_chunk_T3LVENLZ();init_chunk_XGBHKKWI();init_chunk_6FKZDWPJ();init_chunk_DXFJXJOV();init_chunk_ODOCJQ5F();init_chunk_HS7J5TEM();init_chunk_EN7RMMI7();init_chunk_F2SHUGTJ();init_chunk_YJB4SS5Y();init_chunk_OSKJKMSY();init_chunk_HXRASESW();init_chunk_RTKQZAN3();init_chunk_3GZYEUEN();init_chunk_F6KRYMJV();init_chunk_ASZYWPHV();init_chunk_5KHKSHXW();init_chunk_35BZ5QQX();init_chunk_GNWFLEEI();init_chunk_4XG3JNKM();init_chunk_52ANXW4F();init_chunk_QR442M54();init_chunk_3MPI6JF3();init_chunk_2ROZ5VHY();init_chunk_IWAULXVX();init_chunk_4YGCBWOQ();init_chunk_SCJRO5IS();init_chunk_4PSTW3N6();init_chunk_BJMJWJKZ();init_chunk_PXYW74BB();init_chunk_CXZTQK5T();init_chunk_6ZNU2KGL();init_chunk_35HVG5RK();init_chunk_5CMJOLUY();init_chunk_5SK6KTFI();init_chunk_N3BFPGRL();init_chunk_DVA577KS();init_chunk_4JSYWQHS();init_chunk_BBHS4A4U();init_chunk_FNB2N3LB();init_chunk_SRAH72RX();init_chunk_SFCBR4KI();init_chunk_GYIGCPHR();init_chunk_2HAPJZUO();init_chunk_6HRTMVN3();init_chunk_DPCK54JR();init_chunk_ABUIJZSL();init_chunk_BBMAWOQ6();init_chunk_S4K3RMR5();init_chunk_RVGFP37O();init_chunk_WF5G4JVF();init_chunk_DKECJVTO();init_chunk_A6C3CJAL();init_chunk_U2RFAULR();init_chunk_GKWZIUEB();init_chunk_3NKCH3CH();init_chunk_DF65H2AH();init_chunk_FB6BYVSD();init_chunk_4VAIGVKD();init_chunk_36FEP36U();init_chunk_HEMUXET2();init_chunk_22XYGCJN();init_chunk_6BK7BDKR();init_chunk_G2PXXA5T();init_chunk_D3UIGXPV();init_chunk_AZPZV6X7();init_chunk_HLM7TNGI();init_chunk_QXJPGP67();init_chunk_T5WOJ4W5();init_chunk_DNVUH6UR();init_chunk_GTDNXJ33();init_chunk_2ESQX6AE();init_chunk_E6IIPJB4();init_chunk_7Q4QUTW7();init_chunk_BWEL2QFB();init_chunk_IEHBFF3M();init_chunk_Y2QPCMHA();init_chunk_XOK2L335();init_chunk_JYZXFLEK();init_chunk_5KL7G6KI();init_chunk_CAL44HKN();init_chunk_J44EDCGI();init_chunk_NPGLSXOA();init_chunk_MV4HWFKV();init_chunk_FBTZXYBQ();init_chunk_2FTVEPC5();init_chunk_GYOBVN7B();init_chunk_ZDI2POF3();init_chunk_FLQEKE6Y();init_chunk_ACXH67VK();init_chunk_6T6OIPK7();init_chunk_FSEXL3Q6();init_chunk_7JF7EGYV();init_chunk_TQQJXNHJ();init_chunk_P4PD6ZSF();init_chunk_7EO6JZE6();init_chunk_CT73AALH();init_chunk_KG2YWESQ();init_chunk_MSAX4I6O();init_chunk_BPKFOE4A();init_chunk_YOBJAFMK();init_chunk_4QU3WEDM();init_chunk_2THJGZAY();init_chunk_ANM5TKZG();init_chunk_XVTRENJA();init_chunk_RB5S7242();init_chunk_KOCP3ID3();init_chunk_W7IDWRP4();init_chunk_UFLOBGWK();init_chunk_SAOD5MO2();init_chunk_JCLRQCCF();init_chunk_NCTW5BX4();init_chunk_F6XZEC6K();init_chunk_G73G74MJ();init_chunk_RDC6TFEZ();init_chunk_ZVYP3SBH();init_chunk_TL7D6LH4();init_chunk_L6HTPEJ7();init_chunk_77NFKQGT();init_chunk_44VUQYXW();init_chunk_EQUVXRCG();init_chunk_TELZBU23();init_chunk_44FG3VOC();init_chunk_YXRMFJYV();init_chunk_OKPXB6ZM();init_chunk_T4MAJ763();init_chunk_YYESZLLI();init_chunk_WHRLA65U();init_chunk_6DXI4IJQ();init_chunk_5AHTPI6D();init_chunk_2S7DVFMT();init_chunk_K3DBGPGZ();init_chunk_NDHIVANN();init_chunk_LDQCWE5R();init_chunk_MZC5FI2L();init_chunk_NM2PAV4N();init_chunk_E44CUPSK();init_chunk_4C5TX24U();init_chunk_5KEQTMKL();init_chunk_W6CJLQ7F();init_chunk_P5IXZRLD();init_chunk_IPOBEEX3();init_chunk_VL7FPG4Z();init_chunk_SFZSW7BO();init_chunk_MC3E7F7S();init_chunk_RX7XESY6();init_chunk_5LCBLNMU();init_chunk_JJQIONPF();init_chunk_GOMSCAEP();init_chunk_OA7HPKNQ();init_chunk_A2L2C2AX();init_chunk_MEIVNTA4();init_chunk_WM4PZEVS();init_chunk_P3KELYZA();init_chunk_LO75U72T();init_chunk_K7FPMRRN();init_chunk_VYOW3UM4();init_chunk_4DHZ57JL();init_chunk_24SRNUKF();init_chunk_2NIE7DGK();init_chunk_ASWS2XZO();init_chunk_ZZLLTIDJ();init_chunk_PNYP5U3X();init_chunk_2LD7UGWB();init_chunk_W4IKE6WB();init_chunk_KDXRVIPR();init_chunk_F6V3PHRP();init_chunk_XORVRBLA();init_chunk_7IJT4CKC();init_chunk_SVJM4RHI();init_chunk_PRFVW5HN();init_chunk_JMMN4FPE();init_chunk_2DYRUEXM();init_chunk_EN2KTIPR();init_chunk_ECGDXEBV();init_chunk_OZS2GHCT();init_chunk_QL7KUB4R();init_chunk_7GIIM5WD();init_chunk_MJEOCM2T();init_chunk_FZNKH3NT();init_chunk_H3BL6WZC();init_chunk_UPFUC3UY();init_chunk_W7HHZI3V();init_chunk_WVNG6S2S();init_chunk_AR3GDZXE();init_chunk_RPYM2Y32();init_chunk_NX6HMH2N();init_chunk_KF6DUMC5();init_chunk_YMQZBYUA();init_chunk_3X4X5GQ5();init_chunk_MLQED6TU();init_chunk_5I4YJSMV();init_chunk_P5CFJQBZ();init_chunk_FHET5ADS();init_chunk_OWTGK7HE();init_chunk_4ENKDM22();init_chunk_JD52CDRU();init_chunk_5EXEWERK();init_chunk_OI5PRX4Z();init_chunk_RZFEFFKI();init_chunk_TXEYYEAF();init_chunk_OI52CPV5();init_chunk_SEROBDOA();init_chunk_WL2C3REA();init_chunk_FCFHSZWY();init_chunk_F2E6JG5K();init_chunk_GOAYARXA();init_chunk_X5FNAWJO();init_chunk_LPCGVIKH();init_chunk_J3Y5EZRN();init_chunk_THGKNHGB();init_chunk_SHV4BRVZ();init_chunk_RJRPIYRD();init_chunk_PDAIY3K3();init_chunk_DTKK4UIQ();init_chunk_H5QQURM3();init_chunk_MV44IULF();init_chunk_HMKKQD5U();init_chunk_JFRIW46L();init_chunk_7TWM5WXY();init_chunk_U6NJ3HW3();init_chunk_7QSRUV5A();init_chunk_HSQTB5Q7();init_chunk_V5SOBSWK();init_chunk_U3G3FNRQ();init_chunk_KF3RFKRX();init_chunk_MQCOIHAS();init_chunk_PFUN7GO6();init_chunk_3YYCR3MK();init_chunk_4R3TRM5Y();init_chunk_HXVIZTL7();init_chunk_JQTLC6XH();init_chunk_BN4FR4XP();init_chunk_YO6RUNLM();init_chunk_H4MN5W5F();init_chunk_GF6DBRGK();init_chunk_64MGOCJ7();init_chunk_J6WGJTYG();init_chunk_UADGEKVG();init_chunk_KDZDP3T6();init_chunk_JABG3MKS();init_chunk_3TI46X7E();init_chunk_PQ2OBNL3();init_chunk_QJA5THH5();init_chunk_GHX25U4X();init_chunk_VPMJGXHQ();init_chunk_V3Y77IQB();init_chunk_A5RWVW6L();init_chunk_TEKYJVJJ();init_chunk_SPVJCDA2();init_chunk_VPZEFXR4();init_chunk_UCII7UGI();init_chunk_NZH7SYY6();init_chunk_SPPMZYJT();init_chunk_AWNVOENH();init_chunk_3UFNUG62();init_chunk_3DXE6P6X();init_chunk_L7BAU7P4();init_chunk_AZ5L2OLW();init_chunk_G5VBTBVT();init_chunk_33ETUROJ();init_chunk_MELMYAJL();init_chunk_5XVCKR22();init_chunk_KIP5JWYU();init_chunk_K3WIYCV6();init_chunk_LCD22NZJ();init_chunk_VEN77NA6();init_chunk_LHHQLCF4();init_chunk_35AE62MD();init_chunk_RKR6FMF6();init_chunk_MQHOQO6A();init_chunk_RRVLQ6GA();init_chunk_XAIUELKS();init_chunk_CT25OK3L();init_chunk_CTKLVH4W();init_chunk_Z5A2GO7L();init_chunk_NAIZ4J7T();init_chunk_SPHGP6P4();init_chunk_NI3FL6YS();init_chunk_H7ZUHCCL();init_chunk_4BTAM75I();init_chunk_6RCKJAXW();init_chunk_SPWALZFX();init_chunk_2P37CFB2();init_chunk_4MND4D7W();init_chunk_MOCG3PWT();init_chunk_3BIX4D7Y();init_chunk_A6JCA3BQ();init_chunk_G2SDJOQJ();init_chunk_LWB7QD34();init_chunk_JC5M7IO6();init_chunk_4VVPFSRR();init_chunk_R272XGUQ();init_chunk_L6GQM66W();init_chunk_ETMBEXOE();init_chunk_F23IDYOX();init_chunk_UMCD4X4F();init_chunk_BTS4R3BH();init_chunk_6D2KJVDG();init_chunk_Y2SCIU6M();init_chunk_PTYNVLL2();init_chunk_FXYYYK5G();init_chunk_L73HJHEU();init_chunk_WKJU3U3U();init_chunk_RNGWHP7S();init_chunk_XSDXOKLO();init_chunk_IN7E6US2();init_chunk_QGQCGXEY();init_chunk_3N4CASC2();init_chunk_CU274KUE();init_chunk_AMIRFDYS();init_chunk_CKDA6KXW();init_chunk_CSZBT7I2();init_chunk_3X5WC7DA();init_chunk_NU6EKGRJ();init_chunk_EB36OZU4();init_chunk_742OTHVN();init_chunk_R4WHFJ4B();init_chunk_7O3UVUQI();init_chunk_BM7522YF();init_chunk_KGLVHAPC();init_chunk_AJHKRVHL();init_chunk_4VQ6F3DE();init_chunk_BTOIODAJ();init_chunk_UNMOHDD3();init_chunk_CPAEXGVU();init_chunk_5VA36X3M();init_chunk_UPNTE63Z();init_chunk_QRDDGA4K();init_chunk_JUNZZTDR();init_chunk_YLTNJU23();init_chunk_FSUJB66E();init_chunk_ZLKRFUEK();init_chunk_R36FQPRD();init_chunk_4PLE5LMQ();init_chunk_JT4XTBDH();init_chunk_NRJBIJHU();init_chunk_YWWWFLXT();init_chunk_SQ2XYNLG();init_chunk_UZX2Y23P();init_chunk_APG5MJMQ();init_chunk_NX67GN3J();init_chunk_EYEMIHOG();init_chunk_3JNZKAWX();init_chunk_2I46TDZX();init_chunk_T7ZJ7F2H();init_chunk_CQZ7X5ZN();init_chunk_QKQ26YO6();init_chunk_UPJFNX3J();init_chunk_OAOU4QMU();init_chunk_MNJJ4VZE();init_chunk_SPSKVY4A();init_chunk_O37UCX57();init_chunk_XUMIRDBZ();init_chunk_XI6H22W5();init_chunk_WXMYLHBN();init_chunk_SVLPAL5V();init_chunk_BYW7M3JI();init_chunk_WNZZNBN6();init_chunk_PY4RM2DK();init_chunk_MQ65FATA();init_chunk_RLEJPADI();init_chunk_4H4TBDKS();init_chunk_7WMFVCDK();init_chunk_DDI2Q77L();init_chunk_LQFJW75X();init_chunk_PRGTPZ2H();init_chunk_AIYIXAL4();init_chunk_D3BWUJNO();init_chunk_26RD64NZ();init_chunk_K4UH3HHY();init_chunk_SHJ2TL2M();init_chunk_CYPGBSHM();init_chunk_IURAS4BN();init_chunk_AFIBYHNJ();init_chunk_IUPIZIGZ();init_chunk_NHG6OVVK();init_chunk_5T6A5SAI();init_chunk_5QTBUJIR();init_chunk_HJI4UQAM();init_chunk_PFFMD7C5();init_chunk_LNBP5WET();init_chunk_ZUBFAM6I();init_chunk_H2STOOWE();init_chunk_QSBB4QFL();init_chunk_IJBRRVTQ();init_chunk_BHWOIQPB();init_chunk_ARTK3WFN();init_chunk_ZI257CVE();init_chunk_6X56RLUX();init_chunk_ZB5K4Q5D();init_chunk_2U4N4VVC();init_chunk_FXGDI762();init_chunk_43IG4HST();init_chunk_456354UE();init_chunk_5DUMABNF();init_chunk_WUCNMC7P();init_chunk_AK5BRWLB();init_chunk_P3N2IDFO();init_chunk_YUQ2TNMQ();init_chunk_U4QG7EDX();init_chunk_7A6Q5FWY();init_chunk_QU4KW4CC();init_chunk_E3YHYJ7M();init_chunk_DVJLJHKX();init_chunk_ZXLMWX7A();init_chunk_KTBQVFMS();init_chunk_5NHRCTOS();init_chunk_3JTXLA2C();init_chunk_7J6VZIK2();init_chunk_3IC5G5L3();init_chunk_DONNYC6R();init_chunk_C43HTVRN();init_chunk_HWHYDDXK();init_chunk_VPGECYYB();init_chunk_342USNU7();init_chunk_5AGY6SKG();init_chunk_SWGX3SS4();init_chunk_YPHK4I4N();init_chunk_NNUEHMLD();init_chunk_BZZIVHCZ();init_chunk_J6J2E2TN();init_chunk_WZBFNSHE();init_chunk_U3FIRBU2();init_chunk_XJLRIQK5();init_chunk_73OPKABQ();init_chunk_WTQN77GO();init_chunk_TYTJ5WNQ();init_chunk_UHNK5WAH();init_chunk_GF2U2YDN();init_chunk_V27VDWY3();init_chunk_RQSNHR5N();init_chunk_UDODREM6();init_chunk_5RGKLLTW();init_chunk_BQHGLOSZ();init_chunk_KFG2KCFW();init_chunk_RLVXVCUW();init_chunk_D6KNJFOX();init_chunk_RAFUKUV4();init_chunk_22QDIKPS();init_chunk_KSL72JRC();init_chunk_GV7WX3OU();init_chunk_BPPQKANW();init_chunk_CF2O3YR5();init_chunk_3TAAWHMD();init_chunk_ZJWNEXB6();init_chunk_QF4MVXKL();init_chunk_IA6QB7CK();init_chunk_7V7XJXYS();init_chunk_E3CLHXVA();init_chunk_VCPB72ZH();init_chunk_3F6YY7WC();init_chunk_UJ7MCFG4();init_chunk_YTNSLBJG();init_chunk_6SB6MYUI();init_chunk_HGEYXQNH();init_chunk_CSIUVN6E();init_chunk_VTBRH4GX();init_chunk_YCVQPPGP();init_chunk_D66QWYXA();init_chunk_MQVTR3AF();init_chunk_DE6BJ7J2();init_chunk_CTOSVATH();init_chunk_72UR3VX3();init_chunk_JBBFIZX7();init_chunk_YBQOMA2F();init_chunk_BCXEX6HU();init_chunk_6PUX42YE();init_chunk_UJGQOQQY();init_chunk_WL5ER3K7();init_chunk_XHBSXBYT();init_chunk_5BUC7JXJ();init_chunk_3LRXLKKO();init_chunk_H6NPQBSV();init_chunk_IAPCEUOG();init_chunk_ATW6KFNQ();init_chunk_6OJH5HUH();init_chunk_AI5AGN47();init_chunk_Z6AT3IZ2();init_chunk_7MCXST47();init_chunk_RRLZKMRN();init_chunk_M4ZNANRB();init_chunk_CCOMGHIY();init_chunk_LPSWCYLN();init_chunk_ZGDPKF5N();init_chunk_T3UHELTX();init_chunk_GBQACLXU();init_chunk_3Z26LBNJ();init_chunk_W7ZYLIIG();init_chunk_4CSPZNUT();init_chunk_3JBNJVCU();init_chunk_I7O6DKBK();init_chunk_5Q7QGDPZ();init_chunk_P7SIX23R();init_chunk_METFJNNW();init_chunk_DODLY3LU();init_chunk_XIHVMJLG();init_chunk_3O74YUZW();init_chunk_4ZFO6GGY();init_chunk_MEJ73EXY();init_chunk_2C6CLRYT();init_chunk_UZI7NJJY();init_chunk_QR6JA6G7();init_chunk_NJDYDYYO();init_chunk_DSJPKFWL();init_chunk_KWNMQEEQ();init_chunk_EQ6NXTKP();init_chunk_YB6MTVKF();init_chunk_A54FS33J();init_chunk_7FD32THW();init_chunk_Q23EQG4E();init_chunk_TAQRHH47();init_chunk_4LL63MBX();init_chunk_BSXI46ZJ();init_chunk_RWCLB5ZJ();init_chunk_YKEZJMKQ();init_chunk_YIJBKTP5();init_chunk_DX4MIMBT();init_chunk_D6OBTJER();init_chunk_SSQCA4RH();init_chunk_YZJXCLNT();init_chunk_UUVBFWL3();init_chunk_OI5D4BGE();init_chunk_WOQF7ASS();init_chunk_2C4YCMLM();init_chunk_3TE4AL4Y();init_chunk_QAQTCRJA();init_chunk_GQAWAFX5();init_chunk_O4RIJVHB();init_chunk_PZTCVRYY();init_chunk_W466RFSE();init_chunk_PHTLDMNZ();init_chunk_RNIYY5IM();init_chunk_J2JUYTRP();init_chunk_FGURSX7C();init_chunk_DSUSWBJU();init_chunk_TXLMLGS4();init_chunk_RCUIBUMR();init_chunk_74Y3TQEE();init_chunk_ESBXPUWU();init_chunk_ZTEST4BC();init_chunk_MIY64KNP();init_chunk_RKEQKQLF();init_chunk_JUXW6X56();init_chunk_H6HICY6C();init_chunk_QDRLTX4E();init_chunk_JFFTUK2Q();init_chunk_7BG4ID5K();init_chunk_YMFQCSPS();init_chunk_YNGVU5G4();init_chunk_VSA5FMMB();init_chunk_KYTA5AN4();init_chunk_VQ2T5BB3();init_chunk_N23AERUN();init_chunk_7AESSIHX();init_chunk_6G7QKLTK();init_chunk_IBPUTVKM();init_chunk_SNEMIYZ2();init_chunk_H7WEGWDP();init_chunk_5ZLO54JR();init_chunk_2E3NZTWD();init_chunk_JFP6POO6();init_chunk_LAH3IOQ2();init_chunk_SHPSEPM3();init_chunk_BZLFTFIX();init_chunk_SSOR7XBL();init_chunk_EQ73RKXI();init_chunk_DEWLIIGL();init_chunk_D56MYMA3();init_chunk_Z7KY7THX();init_chunk_ACZAVYPP();init_chunk_X7GETOBP();init_chunk_HKM3URAS();init_chunk_LPY2KINP();init_chunk_NYCRBZVE();init_chunk_VJAC2YML();init_chunk_2CLC5CJ5();init_chunk_2WWDF2EP();init_chunk_EAT3PWXW();init_chunk_PZRJETMO();init_chunk_ZJTSMHSQ();init_chunk_VIACF325();init_chunk_LD3OPMMH();init_chunk_CXWOR2EE();init_chunk_T3DOBT4P();init_chunk_2CEAVPF4();init_chunk_SCAACWUK();init_chunk_7VOFJWIM();init_chunk_ISFIS6QF();init_chunk_MYSLSPSJ();init_chunk_XN3GVKL7();init_chunk_4QOXXXKD();init_chunk_X22WVVH2();init_chunk_K7UBOSE2();init_chunk_5OQ2WZRS();init_chunk_HS72KILA();init_chunk_26MEO5R6();init_chunk_JTB4R22M();init_chunk_XV3SZ5QM();init_chunk_PVNBLCOE();init_chunk_KVPIOCNH();init_chunk_HGW6XRJ2();init_chunk_EPJXWKMM();init_chunk_WGKYYUPG();init_chunk_3I6IL6EL();init_chunk_LCPFOFRR();init_chunk_UHYJ6OAV();init_chunk_VFUGVHO6();init_chunk_WO2ILKNB();init_chunk_P45O4LBO();init_chunk_GEHHVVPS();init_chunk_LSTIPTFG();init_chunk_UYM3JTV2();init_chunk_4Z2MZHXP();init_chunk_5ED4SEKT();init_chunk_6QDIKEXJ();init_chunk_T5LSRYBM();init_chunk_6MW54TTX();init_chunk_ETM3OHTF();init_chunk_3NZ5SE2N();init_chunk_27ZGBOZO();init_chunk_FXQRI5UB();init_chunk_TY3TPDZK();init_chunk_EAULFZLW();init_chunk_6ZC7G4W6();init_chunk_VXSQ4ABE();init_chunk_HY2ETRRZ();init_chunk_E4ELGNEN();init_chunk_KUSPLU3M();init_chunk_FFU4FLUP();init_chunk_KSZF4ZCA();init_chunk_MJCSWIBV();init_chunk_CMQEOMN7();init_chunk_OSD5LSNB();init_chunk_J2PMOX3K();init_chunk_ZQE7BA7H();init_chunk_NO3QDQH6();init_chunk_E26JV7S6();init_chunk_VYTDD4ZH();init_chunk_7QQQ2VDX();init_chunk_H3UOGGIP();init_chunk_HWWKYUV2();init_chunk_CDGC2DSY();init_chunk_XPOWJT6P();init_chunk_2USFPV22();init_chunk_2TN2ZJTG();init_chunk_WU2PKKVO();init_chunk_V3JZVKDG();init_chunk_GEX6YGGZ();init_chunk_UYJG34ME();init_chunk_VWIGD4R6();init_chunk_2M435SKO();init_chunk_DM7QGBU5();init_chunk_MDPC6ARV();init_chunk_AOQIOFZ3();init_chunk_RYYJBUFD();init_chunk_MYNRNW52();init_chunk_MATUXFHD();init_chunk_ZBOAJ5JJ();init_chunk_Q5WGP7EG();init_chunk_6GZM34SG();init_chunk_C7BR2QVI();init_chunk_O6UHEPTI();init_chunk_OWQP6VSR();init_chunk_RQTHRBRJ();init_chunk_W4CC4ZGC();init_chunk_E2NLYKXN();init_chunk_C6GKTI2J();init_chunk_7DEFT7TH();init_chunk_ZIW2MNBU();init_chunk_S7ODPXSP();init_chunk_ZN2DLBU6();init_chunk_VXRNYANT();init_chunk_N3U4W3B3();init_chunk_PMLRCZHH();init_chunk_MUW5CQ54();init_chunk_OZLMANDP();init_chunk_PRNSVG25();init_chunk_QUYXRF3F();init_chunk_3FY6AAVN();init_chunk_7P2TUDQX();init_chunk_UHMR4FDK();init_chunk_DFKDK2AH();init_chunk_OL7BP54H();init_chunk_KCW4KPLN();init_chunk_XAXBO7TJ();init_chunk_3XJR5MLX();init_chunk_3YCVWEHI();init_chunk_VX3SAUZW();init_chunk_3VWFKKTE();init_chunk_DD2MWGWV();init_chunk_262FZW6T();init_chunk_ASUB5NX4();init_chunk_EBLPXPDW();init_chunk_AASDVGPT();init_chunk_L6637PEL();init_chunk_HM3UQH5M();init_chunk_DCQBWQPQ();init_chunk_B53ODZCO();init_chunk_OFKHWFYY();init_chunk_SYOGBZEE();init_chunk_NJTX3IDK();init_chunk_YV4KWNVW();init_chunk_NEHZXZ5N();init_chunk_KQOPH5JT();init_chunk_S67WQKNL();init_chunk_EBLBISL2();init_chunk_SZWCUL54();init_chunk_IP2USH2G();init_chunk_AZ7ZFAMP();init_chunk_O3DMQPBG();init_chunk_7E4RPC7F();init_chunk_KKM5D4ZH();init_chunk_4GE36HWE();init_chunk_D2OVXLQW();init_chunk_RJ5WD4C3();init_chunk_UJPRVUKC();init_chunk_FJ7PXLWN();init_chunk_WJ7JHKSS();init_chunk_BO2OQIFE();init_chunk_LHW5BJJT();init_chunk_IKZYU66O();init_chunk_ATKILZ4A();init_chunk_R3N2DXOF();init_chunk_RZAT3AKA();init_chunk_S7BHBHYQ();init_chunk_5UOTY7JD();init_chunk_PZXNU3KR();init_chunk_R2JBAC76();init_chunk_DOACKACE();init_chunk_EL62J62W();init_chunk_27JHJO32();init_chunk_MRPXEF6A();init_chunk_IKGXPYBA();init_chunk_PVQSDRCN();init_chunk_EWYVQPZK();init_chunk_QCKT4DQC();init_chunk_CRDCU2YJ();init_chunk_DUC5RAZN();init_chunk_VQJUJ76U();init_chunk_MULHNYHP();init_chunk_3GMVUIQ2();init_chunk_TZE6RLQ3();init_chunk_F6I5JCQY();init_chunk_7GPZBDSL();init_chunk_JHDEJ7QA();init_chunk_6DDQZHCY();init_chunk_N4XVPDF4();init_chunk_PMJ2S2EI();init_chunk_BXLTK4KK();init_chunk_C5NR4QAC();init_chunk_D4ZJFUAH();init_chunk_Y6XIJDQE();init_chunk_2AG46AOQ();init_chunk_HPWO54VS();init_chunk_TEZK55QE();init_chunk_ORWI6C7C();init_chunk_LC3UDGST();init_chunk_KURLOCN2();init_chunk_6ZWXAYNY();init_chunk_WG4K4XWQ();init_chunk_BVPMVEN4();init_chunk_JDS3PI27();init_chunk_OT7YQBQU();init_chunk_RTYJBZD2();init_chunk_IO2G2NRM();init_chunk_DFC65VMV();init_chunk_6A6XPM6O();init_chunk_HRMQAK5M();init_chunk_GRSXVX26();init_chunk_AS7GHBTN();init_chunk_U3IIHVIU();init_chunk_332F4YSC();init_chunk_EO5IH4ME();init_chunk_5H2KVSX3();init_chunk_NNJWVAO4();init_chunk_FV3RL75Y();init_chunk_FGTDP4PK();init_chunk_I5Z534O3();init_chunk_CE7AJTHZ();init_chunk_XMJWUKT6();init_chunk_JOR7Y6ZH();init_chunk_NLUDHCIX();init_chunk_DX42IWO5();init_chunk_42JFQOYK();init_chunk_5MHLJFAM();init_chunk_CD6BXJH4();init_chunk_FH75ARBM();init_chunk_AH3WKWOQ();init_chunk_TGZB3HEQ();init_chunk_MORO5J4V();init_chunk_GMC7YYHZ();init_chunk_EDZFKDYT();init_chunk_5LJVRLAE();init_chunk_D2JVZWJY();init_chunk_GAEATFUF();init_chunk_HGCVBYPY();init_chunk_A3AZZFHH();init_chunk_5GDLRJBY();init_chunk_HEUWOYII();init_chunk_WCABV24O();init_chunk_D7DSERB6();init_chunk_M3MT5UJO();init_chunk_WHKTZCWS();init_chunk_2P5J76AD();init_chunk_YL7LY26G();init_chunk_FAG4C2AG();init_chunk_BD4NVYWE();init_chunk_SN467VYT();init_chunk_WIRZ72AY();init_chunk_5WXCG2CY();init_chunk_PJQ53WM4();init_chunk_6BIDSCBO();init_chunk_ZPRH744P();init_chunk_5R5WUML7();init_chunk_4BEIH33K();init_chunk_ZPQTGOYD();init_chunk_N2M7RTLF();init_chunk_IWDKHN53();init_chunk_6CTKAQBL();init_chunk_GJBWBEFI();init_chunk_C7DJ7ZUT();init_chunk_JYVTRWC5();init_chunk_W7BXXZ5U();init_chunk_4NLGLXM3();init_chunk_55GR3CTX();init_chunk_DJ4UL6HB();init_chunk_CJCFO44T();init_chunk_VE7QISLR();init_chunk_N4Q66NYB();init_chunk_BQ3J5YGZ();init_chunk_ZPWYMIBL();init_chunk_BXPMI6PL();init_chunk_AFGEJHUZ();init_chunk_6TA3YMMH();init_chunk_6P4NHFOM();init_chunk_X6ZTLYCQ();init_chunk_E56XT5MT();init_chunk_Y7PITYYD();init_chunk_KPKJQDB4();init_chunk_XLJGABNH();init_chunk_3E6LZKN4();init_chunk_IQFQU3ON();init_chunk_LMZSZYRO();init_chunk_NDNWTY62();init_chunk_XD444R5V();init_chunk_IL56MUSI();init_chunk_2S5X5WSH();init_chunk_34VTQ24L();init_chunk_4UJVOEZZ();init_chunk_2K6E7TVW();init_chunk_UAUUAKYT();init_chunk_2TKDU5UL();init_chunk_CQZSZCIE();init_chunk_5TRTU6WF();init_chunk_ZE6R7ILQ();init_chunk_G7XLULYR();init_chunk_Z5PI4OFY();init_chunk_XD337MM7();init_chunk_ESMNUDT2();init_chunk_NEZ7IFJE();init_chunk_PFRX7IW7();init_chunk_RGHGYV3D();init_chunk_TU4ODZ2G();init_chunk_SO33TMJW();init_chunk_LMNOWYQY();init_chunk_JIB5HD2R();init_chunk_FPJAYOZY();init_chunk_ZPMLSRTD();init_chunk_JDHBZ6MX();init_chunk_LRF6746Z();init_chunk_RQNOCW4L();init_chunk_XEP6IYZ4();init_chunk_XGFXH4XH();init_chunk_VUBOXDJE();init_chunk_3CCW6RTS();init_chunk_J4YA6GZG();init_chunk_7EWVPPRJ();init_chunk_PKLJMSRU();init_chunk_DBYKMXYD();init_chunk_FUF2XOBT();init_chunk_LDAWA2NV();init_chunk_44KJRQGI();init_chunk_XI3MNGF5();init_chunk_SCVSPAPO();init_chunk_JVYDMBKJ();init_chunk_KVKVSE54();init_chunk_66PQEJKB();init_chunk_T56TXYXX();init_chunk_V5EIEMXY();init_chunk_LKCRK4FM();init_chunk_7IBVYJVT();init_chunk_JOSFSE7S();init_chunk_NYCJ5W6U();init_chunk_RUOOHTGC();init_chunk_5JWDKE2T();init_chunk_AJAXZWGB();init_chunk_SGCNCY66();init_chunk_TGLORDHS();init_chunk_T5CIKHHO();init_chunk_6K4CVQDU();init_chunk_NZ4YBVLV();init_chunk_A4KYEZO7();init_chunk_CAPZNU4C();init_chunk_I26OEY4X();init_chunk_IGGDPCOA();init_chunk_TQTS4Z34();init_chunk_R5IH4AR7();init_chunk_SETWYOJC();init_chunk_YH47UO4D();init_chunk_QSWHKWIX();init_chunk_M44OX2TM();init_chunk_72FTP3TU();init_chunk_UST55PDK();init_chunk_ZJ6ZXA2D();init_chunk_MGEBTVBB();init_chunk_C7GHIZK6();init_chunk_LVU5I4QB();init_chunk_SRA6Z3UN();init_chunk_JRKCOKQ4();init_chunk_5WYMXTWS();init_chunk_RRILRRCT();init_chunk_HFIA5NER();init_chunk_KK6MGEZ2();init_chunk_IUYYRHNF();init_chunk_WWZ3HPDJ();init_chunk_XOHDTI5N();init_chunk_YG7PVAVZ();init_chunk_S5O7EDQH();init_chunk_LUKGKVGG();init_chunk_QQFX6JU2();init_chunk_I4YQPKLK();init_chunk_SSXFAZWT();init_chunk_LWA5UHGM();init_chunk_PLGGSX5K();init_chunk_5V6YOMUA();init_chunk_U6QISNPJ();init_chunk_CFMHD35E();init_chunk_4AEO2AVH();init_chunk_HPT547N5();init_chunk_SLTGWFCA();init_chunk_DGOQTFVW();init_chunk_U4ALET4H();init_chunk_YTYJFA7T();init_chunk_QJHGHZW6();init_chunk_KZXKTX5O();init_chunk_WIOTMDCU();init_chunk_4NXHYDB4();init_chunk_VKJIRQ5A();init_chunk_Y4EVC7PB();init_chunk_3AKOTGJ2();init_chunk_SPFGCKQS();init_chunk_WASC46AA();init_chunk_WJQRPWQK();init_chunk_6FVUPDR4();init_chunk_EGYA3AK6();init_chunk_6236DX3W();init_chunk_2TKSOSRY();init_chunk_6DJCWTRJ();init_chunk_2IEPNTHG();init_chunk_Z6QHLU7K();init_chunk_AMEBXQ2T();init_chunk_CW2AAW52();init_chunk_AGX7UXIL();init_chunk_OCSXDCZG();init_chunk_EZKN7GE5();init_chunk_ZLZESCB4();init_chunk_IE7EWK64();init_chunk_QVVVOHY7();init_chunk_UUS7GQXT();init_chunk_VELFUUM4();init_chunk_4LLUVYMU();init_chunk_VXXMYUTV();init_chunk_OH6JC3QU();init_chunk_DHDUNJVF();init_chunk_6AWFRWLM();init_chunk_RZWMLPGX();init_chunk_Z5B5U2O3();vQ=C$24((u_e,Cle)=>{Cle.exports=`./media/maintenance-gears-IPZE26XE.png`;});SQ=C$24((f_e,_le)=>{_le.exports=`./media/maintenance-gears-dark-CSORA7WP.png`;});cre=C$24(aM=>{Object.defineProperty(aM,`__esModule`,{value:!0});Object.defineProperty(aM,`default`,{enumerable:!0,get:()=>Qye});var qye=f$13().default,ur=(W$13(),G$15(F$15)),Kye=qye(pe$2()),Br$2=Ve$1(),Qye=(0,Kye.default)(`CreateEventIO`,(0,ur.object)({calendarId:Br$2.EventSchema.schema.calendar.schema.id,reconciliationId:(0,ur.string)(),start:Br$2.EventSchema.schema.start,end:Br$2.EventSchema.schema.end,timeZone:(0,ur.optional)(Br$2.EventSchema.schema.timeZone),recurrence:(0,ur.optional)(Br$2.EventSchema.schema.recurrence),isAllDay:(0,ur.optional)(Br$2.EventSchema.schema.isAllDay),summary:(0,ur.optional)(Br$2.EventSchema.schema.summary),attendees:(0,ur.optional)(Br$2.EventSchema.schema.attendees),attachments:(0,ur.optional)(Br$2.EventSchema.schema.attachments),description:(0,ur.optional)(Br$2.EventSchema.schema.description),location:(0,ur.optional)(Br$2.EventSchema.schema.location),reminders:(0,ur.optional)(Br$2.EventSchema.schema.reminders),transparency:(0,ur.optional)(Br$2.EventSchema.schema.transparency),visibility:(0,ur.optional)(Br$2.EventSchema.schema.visibility),eventType:(0,ur.optional)(Br$2.EventSchema.schema.eventType),taskIds:(0,ur.optional)(Br$2.EventSchema.schema.taskIds),conferenceData:(0,ur.optional)(Br$2.EventSchema.schema.conferenceData),zoomExternalID:(0,ur.optional)(Br$2.EventSchema.schema.zoomExternalID),taskSyncMetadata:(0,ur.optional)(Br$2.EventSchema.schema.taskSyncMetadata),guestsCanInviteOthers:(0,ur.optional)(Br$2.EventSchema.schema.guestsCanInviteOthers),guestsCanModify:(0,ur.optional)(Br$2.EventSchema.schema.guestsCanModify),guestsCanSeeOtherGuests:(0,ur.optional)(Br$2.EventSchema.schema.guestsCanSeeOtherGuests),sendUpdates:(0,ur.optional)((0,ur.enums)([`all`,`none`,`externalOnly`]))}),(0,ur.object)({eventId:(0,ur.string)(),reconciliationId:(0,ur.string)(),eventData:Br$2.EventSchema}));});VN();VN();dm();mQ=new M$22();Mb=class extends De$3{handleError(i$27){mQ.next(i$27),lA(i$27,{feature:`unknown`});}};dm();VN();dm();hr$3();Ee$4();VN();fle=`70477c5a-c5d0-4763-a35f-f81eafc24a72`;VN();dm();hr$3();VN();dm();hr$3();VN();hle=[`attachmentsViewerOutlet`];r$12(`attachments_viewer`,`load`);hQ=(()=>{class t$21{constructor(e$19,r$34){this.dynamicComponentLoader=e$19,this.attachmentsViewerService=r$34,this.destroy$=new M$22(),this.appPlaceholderService=C$23(S$11),r$12(`attachments_viewer`,`construct`);}ngOnInit(){r$12(`attachments_viewer`,`init`),ts$2(this.appPlaceholderService.onIdle(),this.attachmentsViewerService.onOpen).pipe(Ve$4(1),le$5(e$19=>$i([this.getComponentFactory(),qe$6(e$19)])),gs(this.destroy$)).subscribe(([{componentFactory:e$19},r$34])=>{this.componentRef=this.attachmentsViewerOutlet.createComponent(e$19),this.componentRef.changeDetectorRef.detectChanges(),r$34&&this.attachmentsViewerService.onOpen.emit(r$34);});}ngAfterViewInit(){r$12(`attachments_viewer`,`after_view_init`);}ngOnDestroy(){this.destroy$.next(),this.componentRef&&this.componentRef.destroy();}getComponentFactory(){return this.dynamicComponentLoader.getLazyComponent(import(`./attachments-viewer-lazy.module-f4b29792f0.js`).then(e$19=>({module:e$19.AttachmentsViewerLazyModule,component:e$19.AttachmentsViewerLazyComponent})));}static{this.fac=function(r$34){return new(r$34||t$21)(br(C$15),br(Pt$2));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-attachments-viewer`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(hle,5,Mi$1),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.attachmentsViewerOutlet=s$25.first);}},decls:2,vars:0,consts:[[`attachmentsViewerOutlet`,``]],template:function(r$34,o$32){r$34&1&&$p(0,gle,0,0,`ng-template`,null,0,rN);},encapsulation:2,changeDetection:0});}}return t$21;})();dm();VN();gQ=(()=>{class t$21{constructor(){this.chatModalOutletComponent$=gt$2(()=>I$24(this,null,function*(){return import(`./chat-modal-outlet.component-9af21812ae.js`);})).pipe(q$20(e$19=>e$19.ChatModalOutletComponent),ys$1({bufferSize:1,refCount:!1}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();dm();VN();dm();VN();yQ=(()=>{class t$21{constructor(e$19){this.dynamicComponentLoader=e$19,this.#e=new tt$3(null),this.activeModal$=this.#e.asObservable(),this.#t=null;}#e;#t;setContainerRef(e$19){this.#t=o$28(e$19,`page-modal container should not be empty`);}open(s$25){return I$24(this,arguments,function*(e$19,r$34={},o$32){(yield Li$1(this.#e))&&this.close();let{component:n$46}=yield Rs$1(this.dynamicComponentLoader.getLazyComponent(e$19,o$32));return this.createModalComponent(n$46,r$34,o$32);});}close(){o$28(this.#t).remove(),this.#e.next(null);}createModalComponent(e$19,r$34,o$32){let s$25=o$28(this.#t).createComponent(e$19,{injector:o$32});return this.#e.next({component:s$25.instance,options:{closeOnEsc:!0,...r$34}}),s$25.onDestroy(()=>{this.close();}),s$25.instance;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(C$15));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();vle=[`bodyContainer`];r$12(`page_modal`,`load`);JA=(()=>{class t$21 extends F$19{set setBodyContainerRef(e$19){e$19&&this.pageModalService.setContainerRef(e$19);}constructor(e$19,r$34,o$32,s$25){super(),this.pageModalService=e$19,this.hotkeyService=r$34,this.windowService=o$32,this.state=s$25,this.viewModel$=this.state.select(),r$12(`page_modal`,`construct`),this.state.connect(`modalOptions`,this.pageModalService.activeModal$.pipe(q$20(n$46=>n$46?.options??null)));}ngOnInit(){r$12(`page_modal`,`init`),this.register(this.pageModalService.activeModal$,e$19=>{this.toggleGlobalModalStyles(!!e$19);}),this.hotkeyService.listenOn({code:`Escape`},e$19=>{this.pageModalService.close(),e$19.preventDefault(),e$19.stopPropagation();},this.pageModalService.activeModal$.pipe(q$20(e$19=>!!e$19)));}ngAfterViewInit(){r$12(`page_modal`,`after_view_init`);}close(){this.pageModalService.close();}toggleGlobalModalStyles(e$19){let{document:r$34}=this.windowService.nativeWindow;r$34.body.classList[e$19?`add`:`remove`](ble);}static{this.fac=function(r$34){return new(r$34||t$21)(br(yQ),br(ct),br(f$23),br(K$13));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-page-modal`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(vle,5,Mi$1),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.setBodyContainerRef=s$25.first);}},features:[VT([ct,K$13]),jp],decls:1,vars:1,consts:[[`bodyContainer`,``],[4,`rxLet`],[1,`modal`],[1,`modal-backdrop`,3,`click`],[1,`modal-body`]],template:function(r$34,o$32){r$34&1&&Bp(0,Sle,6,6,`ng-container`,1),r$34&2&&dg(`rxLet`,o$32.viewModel$);},dependencies:[F$16],styles:[`.modal[_ngcontent-%COMP%]{position:fixed;z-index:801;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;border:0;margin:0;padding:0;background:none}.modal-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:var(--cu-background-overlay)}.modal-body[_ngcontent-%COMP%]{position:relative;margin:20px 20px 50px;background:var(--cu-background-main);border-radius:var(--cu-radii-6);width:min(100vw - 40px,var(--max-width, 100vw));height:min(100vh - 40px - 30px,var(--max-height, 100vh))}`],changeDetection:0});}}return t$21;})(),ble=`modal-open`;VN();Rb=(()=>{class t$21{constructor(){this.clickupSymbolColorImage=t$19(),this.maintenanceGearsImage=vQ(),this.maintenanceGearsDarkImage=SQ();}reload(){window.location.reload();}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-maintenance-page`]],decls:16,vars:3,consts:()=>{let e$19;e$19=" ClickUp ";let r$34;r$34=" Scheduled Maintenance ";let o$32;o$32=" ClickUp is getting some upgrades. We'll be right back. ";let s$25;return s$25=" Refresh ",[e$19,r$34,o$32,s$25,[1,`cu-maintenance-page__header`],[1,`cu-maintenance-page__header-logo`],[`alt`,``,1,`cu-maintenance-page__header-logo-symbol`,3,`src`],[1,`cu-maintenance-page__header-logo-text`],[`name`,`question`,1,`cu-maintenance-page__header-icon`],[1,`cu-maintenance-page__body`],[1,`cu-maintenance-page__body-toast`],[`alt`,``,1,`cu-maintenance-page__body-toast-image`,3,`src`],[`alt`,``,1,`cu-maintenance-page__body-toast-image_dark`,3,`src`],[`cu3Button`,``,`size`,`large`,`buttonType`,`outline`,3,`click`]];},template:function(r$34,o$32){r$34&1&&(Kc$3(0,`div`,4)(1,`div`,5),fg$1(2,`img`,6),Kc$3(3,`p`,7),FC(4,0),Jc$1()(),fg$1(5,`cu3-icon`,8),Jc$1(),Kc$3(6,`div`,9)(7,`div`,10),fg$1(8,`img`,11)(9,`img`,12),Kc$3(10,`h1`),FC(11,1),Jc$1(),Kc$3(12,`p`),FC(13,2),Jc$1(),Kc$3(14,`button`,13),Fg(`click`,function(){return o$32.reload();}),FC(15,3),Jc$1()()()),r$34&2&&(vv(2),dg(`src`,o$32.clickupSymbolColorImage,hf),vv(6),dg(`src`,o$32.maintenanceGearsImage,hf),vv(),dg(`src`,o$32.maintenanceGearsDarkImage,hf));},dependencies:[I$14,K$12,ie$3],styles:[`.cu-maintenance-page__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;padding:16px;border-bottom:var(--cu-border-size-1) solid var(--cu-border-default)}.cu-maintenance-page__header-logo[_ngcontent-%COMP%]{display:flex;align-items:center}.cu-maintenance-page__header-logo-symbol[_ngcontent-%COMP%]{height:var(--16px);text-align:center;margin-right:9px}.cu-maintenance-page__header-logo-text[_ngcontent-%COMP%]{font-size:var(--cu-heading-h6-font-size);line-height:var(--cu-label-medium-line-height);color:var(--cu-content-default);font-weight:800}.cu-maintenance-page__header-icon[_ngcontent-%COMP%]{font-size:var(--cu-label-medium-font-size)}.cu-maintenance-page__body[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translateY(-50%) translate(-50%)}.cu-maintenance-page__body-toast[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:var(--400px);max-width:100vw;padding:24px;border:var(--cu-border-size-1) solid var(--cu-border-default);border-radius:var(--cu-radii-7);box-shadow:0 6px 24px #00000014;background-color:var(--cu-background-main)}.cu-maintenance-page__body-toast-image[_ngcontent-%COMP%]{width:var(--88px);max-width:200px;height:auto}.dark-theme[_nghost-%COMP%]   .cu-maintenance-page__body-toast-image[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .cu-maintenance-page__body-toast-image[_ngcontent-%COMP%]{display:none}.cu-maintenance-page__body-toast-image_dark[_ngcontent-%COMP%]{display:none}.dark-theme[_nghost-%COMP%]   .cu-maintenance-page__body-toast-image_dark[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .cu-maintenance-page__body-toast-image_dark[_ngcontent-%COMP%]{display:block}.cu-maintenance-page__body-toast[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:var(--cu-heading-h5-font-size);line-height:var(--cu-heading-line-height);font-weight:var(--cu-heading-weight-semibold);color:var(--cu-content-default);text-align:center;margin:4px}.cu-maintenance-page__body-toast[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--cu-paragraph-medium-font-size);line-height:var(--cu-paragraph-line-height);font-weight:var(--cu-paragraph-weight-regular);color:var(--cu-content-secondary);text-align:center;margin-bottom:20px}.cu-maintenance-page__body-toast[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}`],changeDetection:0});}}return t$21;})();VN();bQ=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,T$17,I$14,Te$4,Rb]});}}return t$21;})();dm();hr$3();({selectUnderMaintenance:CQ}=nn({name:xE,reducer:RE}));VN();r$12(`maintenance_container`,`load`);_Q=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.document=e$19,this.injector=r$34,this.modalService=o$32,this.store=s$25,this.websocketService=n$46,this.underMaintenance$=this.store.select(CQ),this.destroy$=new M$22(),r$12(`maintenance_container`,`construct`),this.underMaintenance$.pipe(zt$2(),gs(this.destroy$)).subscribe(a$30=>a$30?this.openMaintenanceModal():this.closeMaintenanceModal()),this.websocketService.onChange.pipe(oe$13(a$30=>!!a$30?.type),gs(this.destroy$)).subscribe(a$30=>{switch(a$30.type){case d$15.WorkspaceMaintenanceStarted:this.store.dispatch(w({underMaintenance:!0}));return;case d$15.WorkspaceMaintenanceEnded:this.store.dispatch(w({underMaintenance:!1}));return;default:return;}});}ngAfterViewInit(){r$12(`maintenance_container`,`after_view_init`);}ngOnInit(){r$12(`maintenance_container`,`init`);}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}openMaintenanceModal(){if(this.maintenanceModal)return;let e$19=this.document.getElementById(`loading-placeholder`);e$19&&e$19.remove(),this.maintenanceModal=this.modalService.openComponent(Rb,this.injector,{blank:!0,preventExternalClick:!0,cannotClose:!0,keepOpened:!0,dialogModifier:`cu-modal__dialog-maintenance`});}closeMaintenanceModal(){this.maintenanceModal&&(this.modalService.close(),window.location.reload());}static{this.fac=function(r$34){return new(r$34||t$21)(br(Tm),br(oe$12),br(V$10),br(q$19),br(Pc));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-maintenance-container`]],decls:1,vars:0,consts:[[1,`cu-maintenance-container__body`]],template:function(r$34,o$32){r$34&1&&pg(0,`div`,0);},styles:[`.cu-maintenance-container__body[_ngcontent-%COMP%]{display:none}`],changeDetection:0});}}return t$21;})();VN();kQ=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,OE,bQ]});}}return t$21;})();VN();dm();dm();VN();xb=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.cfmAsyncOperationsService=e$19,this.effects=r$34,this.asyncOperationsResource=o$32,this.store=s$25,this.destroyRef=n$46,this.pollingIntervals=[{maxCount:10,interval:1e3},{maxCount:30,interval:3e3},{maxCount:50,interval:5e3},{maxCount:Infinity,interval:3e4}],this.polledOperations=new Map();}init(){this.effects.register(this.store.select(o$30).pipe(F$22(this.destroyRef)),()=>{this.polledOperations.clear();}),this.effects.register(this.cfmAsyncOperationsService.select(`runningOperations`).pipe(F$22(this.destroyRef)),e$19=>{for(let r$34 of e$19)this.isOperationPending(r$34)&&this.pollOperation(r$34.workspaceId,r$34.details.fieldId,r$34.id);});}getDelay(e$19){for(let{maxCount:r$34,interval:o$32}of this.pollingIntervals)if(e$19<=r$34)return o$32;return this.pollingIntervals[this.pollingIntervals.length-1].interval;}isOperationPending(e$19){return e$19.status===i$6.Pending||e$19.status===i$6.Processing;}pollOperation(e$19,r$34,o$32){this.polledOperations.has(o$32)||(this.polledOperations.set(o$32,{count:0}),this.fetchOperation(e$19,r$34,o$32));}fetchOperation(e$19,r$34,o$32){let s$25=this.polledOperations.get(o$32);s$25&&this.effects.register(qe$6(!0).pipe(ps$2(this.getDelay(s$25.count++)),le$5(()=>this.asyncOperationsResource.getOperation(e$19,r$34,o$32)),Ve$4(1)),n$46=>{this.isOperationPending(n$46)?this.fetchOperation(e$19,r$34,o$32):(this.polledOperations.delete(n$46.id),this.handleOperationResponse(n$46));});}handleOperationResponse(e$19){switch(e$19.status){case i$6.Completed:this.handleOperationSuccess(e$19);break;case i$6.Canceled:case i$6.Failed:this.handleOperationFailure(e$19);break;default:break;}}handleOperationSuccess(e$19){let r$34;switch(e$19.type){case c$12.Conversion:r$34=i$5;break;case c$12.Duplication:r$34=F$7;break;case c$12.Merge:r$34=s$7;break;default:return;}this.store.dispatch(r$34({operation:e$19}));}handleOperationFailure(e$19){let r$34;switch(e$19.type){case c$12.Conversion:r$34=F$6;break;case c$12.Duplication:r$34=l$10;break;case c$12.Merge:r$34=M$3;break;default:return;}this.store.dispatch(r$34({operation:e$19}));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Jt),ge$10(F$19),ge$10(nt$1),ge$10(q$19),ge$10(at$11));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();Ele=[`container`];r$12(`cfm_keeper`,`load`);IQ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37){this.viewContainerRef=e$19,this.rxLocalEffects=r$34,this.cfmKeeperService=o$32,this.cfmAsyncJobsPollingService=s$25,this.customFieldsManagerStateService=n$46,this.injector=a$30,this.actions$=c$37,r$12(`cfm_keeper`,`construct`),this.createCfmInContainerOnDispatch(),this.destroyCfmInContainerOnDispatch(),this.cfmAsyncJobsPollingService.init();}ngAfterViewInit(){r$12(`cfm_keeper`,`after_view_init`);}ngOnInit(){r$12(`cfm_keeper`,`init`);}createCfmInContainerOnDispatch(){this.rxLocalEffects.register(this.actions$.pipe(Ye$2(n$4),oi$1(({cfmParams:e$19})=>$i([qe$6(e$19),j$23(import(`./custom-fields-manager-view.module-eddcc6f5b9.js`))]))).subscribe(([e$19,{CustomFieldsManagerViewModule:r$34,CustomFieldsManagerComponent:o$32}])=>{this.createCfmInContainer(r$34,o$32,e$19);}));}destroyCfmInContainerOnDispatch(){this.rxLocalEffects.register(this.actions$.pipe(Ye$2(r$1)).subscribe(()=>{this.destroyCfmInContainer(),this.customFieldsManagerStateService.resetState();}));}createCfmInContainer(e$19,r$34,o$32){let s$25=ME(e$19,this.injector);this.setCfmState(o$32);let n$46=this.addCfmComponent(r$34,s$25);this.destroyCfmModuleOnComponentDestroy(n$46,s$25),this.hideCfmOnMarginClicked(n$46);}addCfmComponent(e$19,r$34){let o$32=this.viewContainerRef.createComponent(e$19,{ngModuleRef:r$34});return this.container?.insert(o$32.hostView),o$32.changeDetectorRef.detectChanges(),o$32.instance;}setCfmState(e$19){let r$34=e$19.task,o$32=xt(e$19?.view),s$25=e$19.hierarchyEntityId,n$46=e$19.hierarchyEntityLevel,a$30=f$9(s$25,n$46,e$19,r$34);this.customFieldsManagerStateService.set({isCfmOpen:!0,selectedHierarchyEntity:a$30,focusedField:e$19?.focusedField??null,isCreateSidebarOpen:e$19?.createField??!1,addExisting:e$19?.addExistingField??!1,view:e$19?.view??o$19.Default,viewAnchor:e$19?.viewAnchor,placement:e$19?.placement,modifier:e$19?.modifier??``,fieldType:e$19?.fieldType,createVia:e$19?.createVia,dataViewId:e$19?.dataViewId??``,typeConfig:e$19?.typeConfig,selectedTaskType:e$19?.selectedTaskType??null,shouldOpenRightSidebar:!o$32,showWorkspaceTaskTypes:e$19?.showWorkspaceTaskTypes??!1,preselectFillWithAi:e$19?.preselectFillWithAi??!1}),e$19?.selectedTaskType&&this.customFieldsManagerStateService.set({selectedTaskType:e$19.selectedTaskType});}destroyCfmInContainer(){this.container?.clear();}hideCfmOnMarginClicked(e$19){this.rxLocalEffects.register(e$19.doClose.pipe(Ve$4(1)),()=>this.cfmKeeperService.hide());}destroyCfmModuleOnComponentDestroy(e$19,r$34){this.rxLocalEffects.register(e$19.componentDestroyed,()=>r$34.destroy());}static{this.fac=function(r$34){return new(r$34||t$21)(br(Mi$1),br(F$19),br(yt),br(xb),br(G$1),br(oe$12),br(Le$4));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-cfm-keeper`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(Ele,5,Mi$1),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.container=s$25.first);}},features:[VT([F$19,yt,xb])],decls:2,vars:0,consts:[[`container`,``]],template:function(r$34,o$32){r$34&1&&yg(0,null,0);},encapsulation:2,changeDetection:0});}}return t$21;})();dm();VN();EQ=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.customFieldsManagerStateService=r$34,this.createComponentLazily=Ke$1(()=>this.actions$.pipe(Ye$2(t$13),q$20(({cfmParams:o$32})=>n$4({cfmParams:o$32??{}})))),this.destroyComponent=Ke$1(()=>this.actions$.pipe(Ye$2(r$20),q$20(()=>r$1()))),this.hideCustomFieldsManagerOnRedirection=Ke$1(()=>this.actions$.pipe(Ye$2(bt$4),Mu(()=>this.customFieldsManagerStateService.select(`isCfmOpen`)),oe$13(([,o$32])=>o$32),q$20(()=>r$20())));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(G$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();AQ=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.segmentService=r$34,this.store=o$32,this.trackCfmOpenStateChangeEffect=Ke$1(()=>this.actions$.pipe(Ye$2(t$13),Mu(()=>this.store.select(b$10)),Is$1(([{cfmParams:s$25,origin:n$46},a$30])=>{let c$37=xt(s$25?.view);this.trackCfmOpenStateChangeInAmplitude(n$46,c$37,a$30);})),{dispatch:!1});}trackCfmOpenStateChangeInAmplitude(e$19,r$34,o$32){r$34?this.segmentService.track(Bu.OpenCustomFieldMiniEditor,{via:e$19,"view type":o$32?De$2(o$32.viewType):``}):this.segmentService.track(Bu.OpenCustomFieldManager,{via:e$19});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(_b$1),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();wQ=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,Je$4.forFeature([EQ,AQ])]});}}return t$21;})();XA=F$23(L0());wle=A$21({"../../../../../node_modules/moment/locale/ar-sa.js":()=>import(`./ar-sa-511d97e94c.js`),"../../../../../node_modules/moment/locale/de.js":()=>import(`./de-cdf4c03647.js`),"../../../../../node_modules/moment/locale/es.js":()=>import(`./es-e3145fc6b1.js`),"../../../../../node_modules/moment/locale/fr.js":()=>import(`./fr-6b12df7a30.js`),"../../../../../node_modules/moment/locale/it.js":()=>import(`./it-2ef55719ba.js`),"../../../../../node_modules/moment/locale/pt-br.js":()=>import(`./pt-br-b76c7e772f.js`)});VN();dm();VN();VN();C$22();Mle=()=>{},Rle="More",ll=i3(o3({items:[],itemWidths:{},itemContainer:null,initialItemId:``,containerWidth:0,dropdownWidth:150,gapBetweenItems:2,activeItemId:``,itemOrder:[],forcedVisibleItems:[],itemVisibilityFilter:()=>!0,dependencyProvider:Mle,remeasurementTrigger:0}),r3(t$21=>{let i$27=h$15=>t$21.forcedVisibleItems().includes(h$15),e$19=IN(()=>(t$21.dependencyProvider()(),t$21.activeItemId())),r$34=fN(()=>{let h$15=t$21.itemWidths();return t$21.items().map(I$25=>{let A$22=h$15[I$25.id]||0,R$21=I$25.id||w$22();return{...I$25,id:R$21,width:A$22};});}),o$32=fN(()=>r$34().filter(h$15=>{if(i$27(h$15.id))return!0;let I$25=t$21.itemVisibilityFilter();return I$25?I$25(h$15):!1;})),s$25=fN(()=>{let h$15=t$21.itemOrder(),I$25=t$21.initialItemId();if(h$15.length===0)return o$32();let A$22=[],R$21=new Map(o$32().map(E$16=>[E$16.id,E$16])),w$26=R$21.get(I$25);w$26&&(A$22.push(w$26),R$21.delete(I$25));for(let E$16 of h$15){let P$20=R$21.get(E$16);P$20&&(A$22.push(P$20),R$21.delete(E$16));}return A$22.push(...Array.from(R$21.values())),A$22;}),n$46=fN(()=>RQ(s$25().map(h$15=>({id:h$15.id,title:h$15.title||``,width:i$27(h$15.id)?h$15.width||1:h$15.width,icon:void 0})),e$19(),t$21.containerWidth(),t$21.dropdownWidth(),t$21.gapBetweenItems(),t$21.forcedVisibleItems())),a$30=fN(()=>{let h$15=n$46().visibilityMap;return s$25().map(I$25=>({...I$25,visible:h$15[I$25.id]}));}),c$37=fN(()=>a$30().filter(h$15=>h$15.visible===!0)),m$32=fN(()=>a$30().filter(h$15=>h$15.visible===!1)),l$26=fN(()=>m$32().length>0),g$19=fN(()=>s$25().find(h$15=>h$15.id===e$19())?.title??``);return{itemsWithWidths:r$34,itemsInOrder:s$25,activeItem:e$19,currentItemTitle:g$19,viewItems:a$30,visibleItems:c$37,hiddenItems:m$32,hasHiddenItems:l$26,dropdownTitle:fN(()=>!n$46().activeItemVisible&&c$37().length===0?g$19():`${m$32().length} ${Rle}`)};}),l3(t$21=>({setItems:i$27=>{DA(t$21,{items:i$27.map(r$34=>{if(`id`in r$34&&`width`in r$34&&`visible`in r$34&&`title`in r$34)return r$34;let o$32=r$34;return{id:o$32.id||w$22(),title:o$32.innerHTML,visible:!0,width:1};})});},setItemWidths:i$27=>{DA(t$21,{itemWidths:i$27});},setContainerWidth:i$27=>{DA(t$21,{containerWidth:i$27});},setDropdownWidth:i$27=>{DA(t$21,{dropdownWidth:i$27});},setGapBetweenItems:i$27=>{DA(t$21,{gapBetweenItems:i$27});},setItemOrder:i$27=>{DA(t$21,{itemOrder:i$27});},setActiveItem:i$27=>{DA(t$21,{activeItemId:i$27});},setDependencyProvider:i$27=>{DA(t$21,{dependencyProvider:i$27});},setItemVisibilityFilter:i$27=>{DA(t$21,{itemVisibilityFilter:i$27});},setActiveItemId:i$27=>{DA(t$21,{activeItemId:i$27});},setInitialItemId:i$27=>{DA(t$21,{initialItemId:i$27});},setItemContainer:i$27=>{DA(t$21,{itemContainer:i$27});},triggerRemeasurement:()=>{DA(t$21,{remeasurementTrigger:t$21.remeasurementTrigger()+1});},addForcedVisibleItem:i$27=>{DA(t$21,{forcedVisibleItems:[...t$21.forcedVisibleItems(),i$27]});},removeForcedVisibleItem:i$27=>{DA(t$21,{forcedVisibleItems:t$21.forcedVisibleItems().filter(e$19=>e$19!==i$27)});},clearForcedVisibleItems:()=>{DA(t$21,{forcedVisibleItems:[]});},addForcedVisibleItemWithRemeasurement:i$27=>{let e$19=t$21.forcedVisibleItems();e$19.includes(i$27)||DA(t$21,{forcedVisibleItems:[...e$19,i$27],remeasurementTrigger:t$21.remeasurementTrigger()+1});},removeForcedVisibleItemWithWidthReset:i$27=>{let e$19=t$21.forcedVisibleItems(),r$34=t$21.itemWidths();e$19.includes(i$27)&&DA(t$21,{forcedVisibleItems:e$19.filter(o$32=>o$32!==i$27),itemWidths:{...r$34,[i$27]:0},remeasurementTrigger:t$21.remeasurementTrigger()+1});},clearForcedVisibleItemsWithWidthReset:()=>{let i$27=t$21.forcedVisibleItems(),e$19=t$21.itemWidths();if(i$27.length>0){let r$34={...e$19};i$27.forEach(o$32=>{r$34[o$32]=0;}),DA(t$21,{forcedVisibleItems:[],itemWidths:r$34,remeasurementTrigger:t$21.remeasurementTrigger()+1});}},getOverflowItemElements:()=>{let i$27=t$21.itemContainer();if(!i$27?.nativeElement)return[];let r$34=i$27.nativeElement.querySelectorAll(`[cuOverflowItem]`);return Array.from(r$34);},setItemsFromDirectives:i$27=>{DA(t$21,{items:i$27.map((r$34,o$32)=>({id:r$34.id()||`item-${o$32}`,title:r$34.title()||`Item ${o$32+1}`,width:0,visible:!0,icon:r$34.icon(),triggered:()=>r$34.triggered.emit()}))});},getElementsFromDirectives:i$27=>i$27.map(e$19=>e$19.elementRef.nativeElement),selectHiddenItem:i$27=>{let e$19=t$21.visibleItems(),r$34=e$19[e$19.length-1];if(r$34&&r$34.id!==i$27){let o$32=t$21.itemsInOrder().map(a$30=>a$30.id),s$25=o$32.indexOf(i$27),n$46=o$32.indexOf(r$34.id);if(s$25!==-1&&n$46!==-1){let a$30=o$32[s$25];o$32[s$25]=o$32[n$46],o$32[n$46]=a$30,DA(t$21,{itemOrder:o$32});}}DA(t$21,{activeItemId:i$27});}})),l3(t$21=>({selectPotentiallyHiddenItem:(i$27,e$19)=>{let r$34=t$21.items().find(s$25=>s$25.id===i$27);e$19&&r$34&&e$19(r$34)&&!t$21.forcedVisibleItems().includes(i$27)&&DA(t$21,{forcedVisibleItems:[...t$21.forcedVisibleItems(),i$27]}),t$21.selectHiddenItem(i$27);}})));VN();xle=[`*`],Pb=(()=>{class t$21{constructor(){this.elementRef=C$23(Cr$3),this.destroyRef=C$23(at$11),this.store=C$23(ll),this.injector=C$23(oe$12),this.isPerformingMeasurement=!1,this.activeItem=this.store.activeItem,this.viewItems=this.store.viewItems,this.visibleItems=this.store.visibleItems,this.itemContainer=this.store.itemContainer,this.gapBetweenItems=OA(2),this.containerEffect=pN(()=>{let e$19=this.store.itemContainer();this.scheduleMeasurementIfReady(e$19);}),this.gapEffect=pN(()=>{let e$19=this.gapBetweenItems();this.store.setGapBetweenItems(e$19);}),this.remeasurementEffect=pN(()=>{this.store.remeasurementTrigger();let e$19=this.store.itemContainer();e$19?.nativeElement&&queueMicrotask(()=>{this.performMeasurement(e$19);});});}ngAfterViewInit(){this.initResizeObserver();}ngOnDestroy(){this.resizeObserver&&this.resizeObserver.disconnect();}triggerMeasurementFromContainer(){let e$19=this.store.itemContainer();this.scheduleMeasurementIfReady(e$19);}scheduleMeasurementIfReady(e$19){e$19&&e$19.nativeElement&&!this.isPerformingMeasurement&&oo$2(this.injector,()=>{xf(()=>{this.isPerformingMeasurement||this.performMeasurement(e$19);});});}triggerMeasurement(){let e$19=this.store.itemContainer();e$19&&e$19.nativeElement&&this.performMeasurement(e$19);}performMeasurement(e$19){this.isPerformingMeasurement=!0;try{let r$34=this.store.items();if(r$34.length===0)return;let o$32=FQ(e$19),s$25=e$19.nativeElement;this.store.setContainerWidth(o$32);let n$46=this.getDirectiveElements(s$25);if(n$46.length===0)return;let a$30=r$34.map(g$19=>g$19.visible);this.store.setItems(r$34.map(g$19=>({...g$19,visible:!0})));let m$32=xQ(n$46.map(g$19=>({nativeElement:g$19})),r$34,this.store.itemWidths());if(!Object.values(m$32).some(g$19=>g$19>0)){this.store.setItems(r$34.map((g$19,f$33)=>({...g$19,visible:a$30[f$33]})));return;}this.store.setItemWidths(m$32),this.measureAndUpdateDropdownWidth(s$25);}finally{this.isPerformingMeasurement=!1;}}getDirectiveElements(e$19){let r$34=e$19.querySelectorAll(`[cuOverflowItem]`);return Array.from(r$34);}measureAndUpdateDropdownWidth(e$19){let r$34=e$19.querySelector(`.cu-overflow-items-container-trigger`);if(r$34){let o$32=n$6(r$34);o$32>0&&this.store.setDropdownWidth(o$32);}}initResizeObserver(){this.resizeObserver=new ResizeObserver(()=>{this.isPerformingMeasurement||queueMicrotask(()=>{this.triggerMeasurement();});}),this.resizeObserver.observe(this.elementRef.nativeElement);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-overflow-items`]],inputs:{gapBetweenItems:[1,`gapBetweenItems`]},features:[VT([ll])],ngContentSelectors:xle,decls:1,vars:0,template:function(r$34,o$32){r$34&1&&(UC(),qC(0));},styles:[`[_nghost-%COMP%]{display:flex;justify-content:flex-end;flex-wrap:nowrap;height:100%;overflow-x:hidden;flex:1 1 auto;min-width:0;width:100%}`],changeDetection:0});}}return t$21;})();VN();hr$3();Ee$4();VN();Ole=300,OQ=(()=>{class t$21{constructor(e$19,r$34){this.router=e$19,this.destroyRef=r$34;}init(){n$45()||!(`serviceWorker`in navigator)||navigator.serviceWorker.ready.then(()=>{this.sendUrlUpdateToServiceWorker(window.location.href),this.setupEventHandlers(),this.router.events.pipe(oe$13(e$19=>e$19 instanceof M$20),fs$1(Ole,m$28),F$22(this.destroyRef)).subscribe(e$19=>{let r$34=new URL(e$19.urlAfterRedirects,window.location.origin).href;this.sendUrlUpdateToServiceWorker(r$34);});});}setupEventHandlers(){V$15(window,`beforeunload`,{passive:!0}).pipe(F$22(this.destroyRef)).subscribe(()=>{this.sendCleanupMessageToServiceWorker();});}sendUrlUpdateToServiceWorker(e$19){try{navigator.serviceWorker.controller&&`postMessage`in navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:`URL_UPDATE`,payload:{url:e$19,tabId:ze$3,timestamp:Date.now()}});}catch(r$34){fA(`Error sending URL update to service worker`,{feature:`web-push-notifications`,cause:r$34,tab_id:ze$3});}}sendCleanupMessageToServiceWorker(){try{navigator.serviceWorker.controller&&`postMessage`in navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:`URL_CLEANUP`,payload:{tabId:ze$3}});}catch(e$19){fA(`Error sending cleanup message to service worker`,{feature:`web-push-notifications`,cause:e$19,tab_id:ze$3});}}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(x$22),ge$10(at$11));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();VN();VQ=F$23(Q$9());dm();hr$3();VN();VN();$Q=(()=>{class t$21{constructor(){this.sharedTaskService=C$23(ty),this.modalService=C$23(V$10),this.store=C$23(q$19),this.location=C$23(Ft),this.isSidebarMode=this.store.selectSignal(gt$1);}safelyNavigateAwayFromTask(e$19,{currentUrl:r$34=this.location.path(),forceClose:o$32=!1,event:s$25=void 0}={}){let n$46=this.isSidebarMode();return(o$32||this.isNavigatingAwayFromTask(r$34,e$19))&&!n$46&&!s$25?.[e$13]?(this.modalService.setPreventClose(!1),this.sharedTaskService.closeTaskWithNoRouting(),!0):!1;}isNavigatingAwayFromTask(e$19,r$34){return oO(e$19)&&!oO(r$34);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();UQ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.title=e$19,this.navigationHistoryService=r$34,this.applicationEnvironmentService=o$32,this.store=s$25,this.maxHistoryItemState=100,this.maxDisplayItems=15,this.titleChangeDebounceTime=500,this.ignoreTitles=[`ClickUp`,`Login`],this.destroy$=new M$22(),this.taskNavigateAwayService=C$23($Q),this.segmentService=C$23(_b$1),this.title$=this.title.getTitleChanges().pipe(oe$13(n$46=>!this.ignoreTitles.includes(n$46)),zt$2(),fs$1(this.titleChangeDebounceTime)),this.hierarchyContext$=this.store.select(Ge$4),this.history=[],this.history$=new M$22();}init(){this.title$.pipe(ps$2(1e3),As$3(this.hierarchyContext$),q$20(([e$19,r$34])=>this.createHistoryItem(e$19,r$34.type)),oe$13(e$19=>!!e$19),Is$1(e$19=>this.history=jQ(this.maxHistoryItemState)(this.history,e$19)),Is$1(()=>this.history$.next(this.history)),gs(this.destroy$)).subscribe();}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}getHistory(){return this.history$.pipe(q$20(e$19=>this.reverseHistory(e$19)),q$20(e$19=>DQ(e$19)),q$20(e$19=>NQ(e$19,this.maxDisplayItems)));}onOpenMenu(){this.segmentService.track(Bu.ClickHistoryMenu,{});}onClickHistoryItem(e$19){this.taskNavigateAwayService.safelyNavigateAwayFromTask(e$19);}reverseHistory(e$19){return[...e$19].reverse();}createHistoryItem(e$19,r$34){let o$32=this.navigationHistoryService.currentLocation();if(o$32)return{id:(0,VQ.default)(o$32.path),...LQ(o$32.path,this.applicationEnvironmentService.environment.appUrl),title:e$19,locationType:o$32.locationType,viewType:o$32.viewType,hierarchyEntityType:r$34};}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Gt$1),ge$10(Se$4),ge$10(Ni),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();VN();VN();$b$1=(()=>{class t$21{constructor(){this.isLayoutV4=!1,this.toolTips={arrowLeft:{text:`Navigate backward`,i18n:`@@common_navigate-backward-text`,dataTest:`nav-backward`},arrowRight:{text:`Navigate forward`,i18n:`@@common_navigate-forward-text`,dataTest:`nav-forward`}},this.toolTip=this.toolTips.arrowLeft;}ngOnChanges(e$19){e$19.type&&(this.toolTip=this.toolTips[this.type]);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-navigation-controls-arrow`]],hostVars:2,hostBindings:function(r$34,o$32){r$34&2&&Gg(`v4`,o$32.isLayoutV4);},inputs:{isLayoutV4:`isLayoutV4`,type:`type`},features:[Fm],decls:3,vars:5,consts:()=>{let e$19;return e$19=""+`0`+"",[[`cuTooltip`,e$19],[`cu3IconButton`,``,`tooltipModifierWithPlacement`,`tooltip_web-component`,1,`button`,3,`size`,6,`cuTooltip`],[3,`name`]];},template:function(r$34,o$32){r$34&1&&(Kc$3(0,`button`,1),jC(1,0),fg$1(2,`cu3-icon`,2),Jc$1()),r$34&2&&(Lg(o$32.toolTip.text),VC(1),dg(`size`,o$32.isLayoutV4?`small`:`compact`),og(`aria-label`,o$32.toolTip.text),vv(2),dg(`name`,ST(o$32.type)));},dependencies:[j$16,Te$4,ue$7,I$14,K$12],styles:[`.v4[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{--button-color: var(--cu-global-actions-bar-v4-button-color);--button-background-hover: var( --cu-global-actions-bar-v4-button-background-hover );--button-background-active: var( --cu-global-actions-bar-v4-button-background-active )}`],changeDetection:0});}}return t$21;})();VN();jb=(()=>{class t$21{constructor(){this.isLayoutV4=!1,this.navBackward=new He$4(),this.navForward=new He$4();}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-navigation-controls-arrows`]],inputs:{isLayoutV4:`isLayoutV4`},outputs:{navBackward:`navBackward`,navForward:`navForward`},decls:2,vars:4,consts:[[3,`cuPress`,`type`,`isLayoutV4`],[3,`cuPress`,`isLayoutV4`,`type`]],template:function(r$34,o$32){r$34&1&&(Kc$3(0,`cu-navigation-controls-arrow`,0),Fg(`cuPress`,function(){return o$32.navBackward.emit();}),Jc$1(),Kc$3(1,`cu-navigation-controls-arrow`,1),Fg(`cuPress`,function(){return o$32.navForward.emit();}),Jc$1()),r$34&2&&(dg(`type`,`arrowLeft`)(`isLayoutV4`,o$32.isLayoutV4),vv(),dg(`isLayoutV4`,o$32.isLayoutV4)(`type`,`arrowRight`));},dependencies:[$b$1,et$2],encapsulation:2,changeDetection:0});}}return t$21;})();VN();Lle={activity:`tabActivity`,ai:`v4SidebarBrain`,board:`boardView`,box:`boxView`,chat:`chatV4`,clips:`clip`,conversation:`chatHashAvatar`,docs:`doc`,dashboards:`chart`,embed:`embedView`,forms:`formView`,gantt:`ganttView`,goals:`v4SidebarGoals`,map:`mapView`,"mind-map":`mindMapView`,"my-work":`v4SidebarMyWork`,overview:`folder`,"teams-hub":`v4SidebarTeams`,"time-hub":`sidebarTime`,timeline:`timelineView`,whiteboard:`sidebarWhiteboards`,"hubs-whiteboards":`sidebarWhiteboards`,workload:`view18`};VN();GQ=(()=>{class t$21{transform(e$19){return HQ(e$19);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.pipe=kE({name:`cuGetIconFromLocationOrViewType`,type:t$21,pure:!0});}}return t$21;})();VN();Dle=()=>[`bottom-left`];Lb=(()=>{class t$21{constructor(){this.isLayoutV4=!1,this.openMenu=new He$4(),this.clickHistoryItem=new He$4(),this.disabled=!0,this.buttonSize=this.isLayoutV4?`small`:`compact`,this.itemId=c$24(`id`);}ngOnChanges(e$19){this.disabled=!this.history||this.history.length===0;}onClickHistoryItem(e$19){this.clickHistoryItem.emit(e$19);}navHistoryOpened(){this.openMenu.emit();}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-navigation-controls-history-menu`]],hostVars:2,hostBindings:function(r$34,o$32){r$34&2&&Gg(`v4`,o$32.isLayoutV4);},inputs:{isLayoutV4:`isLayoutV4`,history:`history`},outputs:{openMenu:`openMenu`,clickHistoryItem:`clickHistoryItem`},features:[Fm],decls:4,vars:10,consts:()=>{let e$19;e$19="Navigation history";let r$34;return r$34="Navigation history",[[`cuDropdown`,``,`dropdownModifierClass`,`history-menu`,3,`dropdownOpen`,`dropdownCloseOnInsideClick`,`dropdownPlacement`,`dropdownDisabled`,`dropdownRightEdgePadding`,`dropdownPreventToggleOverlap`,`hidden`,`dropdownUseModernPositioning`,`dropdownUseModernPositioningOffsetPx`],[`cuDropdownToggle`,``,`cu3IconButton`,``,`cuTooltip`,e$19,`toggleAriaLabel`,r$34,`tooltipModifierWithPlacement`,`tooltip_web-component`,`data-test`,`nav-history`,1,`button`,3,`size`],[`name`,`history`],[4,`cuDropdownMenu`],[4,`ngFor`,`ngForOf`,`ngForTrackBy`],[1,`nav-menu-item`],[3,`click`,`routerLink`,`queryParams`],[3,`name`],[1,`nav-history-menu-item-title`]];},template:function(r$34,o$32){r$34&1&&(Kc$3(0,`div`,0),Fg(`dropdownOpen`,function(){return o$32.navHistoryOpened();}),Kc$3(1,`button`,1),fg$1(2,`cu3-icon`,2),Jc$1(),Bp(3,Ble,2,2,`div`,3),Jc$1()),r$34&2&&(dg(`dropdownCloseOnInsideClick`,!0)(`dropdownPlacement`,HT(9,Dle))(`dropdownDisabled`,o$32.disabled)(`dropdownRightEdgePadding`,8)(`dropdownPreventToggleOverlap`,!0)(`hidden`,o$32.disabled)(`dropdownUseModernPositioning`,!0)(`dropdownUseModernPositioningOffsetPx`,12),vv(),dg(`size`,o$32.buttonSize));},dependencies:[Ao$1,V$7,xo$1,ho,j$16,Te$4,ue$7,I$14,K$12,Xt,Pt$3,GQ],styles:[`.history-menu[_ngcontent-%COMP%]{padding:8px;max-width:730px}.nav-menu-item[_ngcontent-%COMP%]{padding:0}.nav-menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 8px;width:100%}.nav-menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .nav-history-menu-item-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;display:block}.v4[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{--button-color: var(--cu-global-actions-bar-v4-button-color);--button-background-hover: var( --cu-global-actions-bar-v4-button-background-hover );--button-background-active: var( --cu-global-actions-bar-v4-button-background-active )}.v4[_nghost-%COMP%]   .button[aria-expanded=true][_ngcontent-%COMP%]{--button-background: var(--button-background-hover)}`],changeDetection:0});}}return t$21;})();VN();Db=(()=>{class t$21{constructor(){this.isLayoutV4=!1,this.hidden=!1,this.navBackward=new He$4(),this.navForward=new He$4(),this.openMenu=new He$4(),this.clickHistoryItem=new He$4(),this.isStandaloneApp=d$23();}ngOnChanges(e$19){this.hidden=!this.history||this.history.length===0;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-navigation-controls-view`]],hostVars:4,hostBindings:function(r$34,o$32){r$34&2&&Gg(`v4`,o$32.isLayoutV4)(`hidden`,o$32.hidden);},inputs:{isLayoutV4:`isLayoutV4`,history:`history`},outputs:{navBackward:`navBackward`,navForward:`navForward`,openMenu:`openMenu`,clickHistoryItem:`clickHistoryItem`},features:[Fm],decls:2,vars:3,consts:[[3,`isLayoutV4`],[3,`openMenu`,`clickHistoryItem`,`history`,`isLayoutV4`],[3,`navForward`,`navBackward`,`isLayoutV4`]],template:function(r$34,o$32){r$34&1&&(HD(0,Vle,1,1,`cu-navigation-controls-arrows`,0),Kc$3(1,`cu-navigation-controls-history-menu`,1),Fg(`openMenu`,function(){return o$32.openMenu.emit();})(`clickHistoryItem`,function(n$46){return o$32.clickHistoryItem.emit(n$46);}),Jc$1()),r$34&2&&(BD(o$32.isStandaloneApp?0:-1),vv(),dg(`history`,o$32.history)(`isLayoutV4`,o$32.isLayoutV4));},dependencies:[jb,Lb],styles:[`[_nghost-%COMP%]{display:flex;align-items:center;white-space:nowrap;flex-shrink:0;margin-inline:4px}.v4[_nghost-%COMP%]{margin-inline:4px 0}.v4.hidden[_nghost-%COMP%]{margin-inline:0}`],changeDetection:0});}}return t$21;})();VN();Nb=(()=>{class t$21{constructor(){this.isLayoutV4=!1,this.isEnabled$=jS(O$16.FePlatformNavigationHistoryControls),this.historyService=C$23(UQ),this.router=C$23(qd),this.history$=this.historyService.getHistory();}ngOnInit(){this.historyService.init();}onOpenMenu(){this.historyService.onOpenMenu();}onClickHistoryItem(e$19){this.historyService.onClickHistoryItem(e$19);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-navigation-controls`]],inputs:{isLayoutV4:`isLayoutV4`},decls:2,vars:3,consts:[[3,`history`,`isLayoutV4`,`navBackward`,`navForward`,`openMenu`,`clickHistoryItem`,4,`ngIf`],[3,`navBackward`,`navForward`,`openMenu`,`clickHistoryItem`,`history`,`isLayoutV4`]],template:function(r$34,o$32){r$34&1&&(Bp(0,Ule,2,4,`cu-navigation-controls-view`,0),YT(1,`async`)),r$34&2&&dg(`ngIf`,JT(1,1,o$32.isEnabled$));},dependencies:[Vn$1,Db,qn],styles:[`[_nghost-%COMP%]{display:block}`],changeDetection:0});}}return t$21;})();VN();QQ=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,I$14,M$14,Te$4,lu,Ao$1,T$17,W$7,Nb,jb,$b$1,Lb,Db]});}}return t$21;})();VN();JQ=F$23(X$13());VN();Hle=[`syncupActionBar`],Gle=(t$21,i$27)=>({isTimerActive:t$21,isClipActive:i$27});Bb=(()=>{class t$21{constructor(){this.isTimerActive=!1,this.isClipActive=!1,this.sizeChange=new He$4(),this.chatMetaService=C$23(d),this.GlobalActionBarMenu=(0,JQ.lazy)(()=>I$24(this,null,function*(){return import(`./GlobalActionBarMenu-a70e71e23b.js`).then(e$19=>({default:e$19.GlobalActionBarMenu}));})),this.Icon=ar;}ngOnInit(){this.setupResizeObserver();}ngOnDestroy(){this.resizeObserver?.disconnect();}setupResizeObserver(){this.syncupActionBarElement?.nativeElement&&(this.resizeObserver=new ResizeObserver(e$19=>{for(let r$34 of e$19){let{width:o$32}=r$34.contentRect;this.sizeChange.emit(o$32);}}),this.resizeObserver.observe(this.syncupActionBarElement.nativeElement));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-syncup-global-action-bar`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(Hle,7),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.syncupActionBarElement=s$25.first);}},inputs:{isTimerActive:`isTimerActive`,isClipActive:`isClipActive`},outputs:{sizeChange:`sizeChange`},features:[VT([M$2])],decls:5,vars:5,consts:[[`syncupActionBar`,``],[`icon`,``],[`cuReactFeature`,``,`key`,`syncup-global-action-bar`,`feature`,`chat`,2,`display`,`flex`,3,`Component`,`props`],[`cuReactFeature`,``,`key`,`syncup-global-action-bar`,`feature`,`chat`,2,`display`,`flex`,3,`Component`]],template:function(r$34,o$32){r$34&1&&(tl(0),fg$1(1,`div`,2,0),Bp(3,zle,1,1,`ng-template`,null,1,rN),Si$1()),r$34&2&&(vv(),dg(`Component`,o$32.GlobalActionBarMenu)(`props`,$T(2,Gle,o$32.isTimerActive,o$32.isClipActive)));},dependencies:[gi$1,o$24,ae],encapsulation:2,changeDetection:0});}}return t$21;})();VN();VN();qle=t$21=>({active:t$21});YQ=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.quickAppService=r$34,this.appOpened=new He$4(),this.apps$=this.quickAppService.apps$,this.trackById=c$24(`id`),this.viewModel$=q$15({user:this.store.select(b$17),apps:this.apps$});}clickApp(e$19){this.openApp(e$19.id);}togglePin(e$19){this.quickAppService.updatePin(e$19.id,!e$19.pinned);}openProfile(){this.openApp(`profile`);}openApp(e$19){this.appOpened.emit(e$19),this.quickAppService.executeApp(e$19,{via:`top dropdown`});}static{this.fac=function(r$34){return new(r$34||t$21)(br(q$19),br(io));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-apps-menu-items`]],outputs:{appOpened:`appOpened`},decls:1,vars:1,consts:()=>{let e$19;return e$19="My profile",[e$19,[4,`rxLet`],[`data-test`,`apps-menu-items__container`,1,`container`],[1,`item`,3,`cuPress`],[1,`item__icon`],[1,`cu-simple-bar__bottom-menu-avatar`,3,`user`,`showGuestTooltip`,`showGuestDot`,`displayProfileCard`,`modifier`],[1,`item__title`],[`class`,`item__container`,3,`soon`,`cuTooltip`,4,`ngFor`,`ngForOf`,`ngForTrackBy`],[1,`item__container`,3,`cuTooltip`],[`class`,`pin`,3,`disabled`,`ngClass`,`cuPress`,4,`ngIf`],[3,`name`,`color`,4,`ngIf`],[1,`pin`,3,`cuPress`,`disabled`,`ngClass`],[3,`name`]];},template:function(r$34,o$32){r$34&1&&Bp(0,Yle,8,7,`ng-container`,1),r$34&2&&dg(`rxLet`,o$32.viewModel$);},dependencies:[F$16,et$2,no,Xt,Te$4,ue$7,Vn$1,zn,I$14,K$12],styles:[`[_nghost-%COMP%]{display:block;padding:0 var(--cu-size-2)}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr)}.item[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;width:100%;border-radius:var(--cu-radii-6);padding:var(--11px) var(--3px);border:var(--cu-border-size-1) solid transparent;cursor:pointer}.pin[_ngcontent-%COMP%]:hover + .item[_ngcontent-%COMP%], .pin[_ngcontent-%COMP%]:focus + .item[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]:hover, .item[_ngcontent-%COMP%]:focus{background-color:var(--cu-background-main-hover-strong)}.item__container[_ngcontent-%COMP%]{position:relative}.item__container.soon[_ngcontent-%COMP%]   .pin[_ngcontent-%COMP%]{display:none}.item__container.soon[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{cursor:default}.item__container.soon[_ngcontent-%COMP%]   .item__icon[_ngcontent-%COMP%], .item__container.soon[_ngcontent-%COMP%]   .item__title[_ngcontent-%COMP%]{opacity:.7}.item__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:var(--56px);height:var(--56px);margin-bottom:var(--cu-size-2);border-radius:var(--cu-radii-6);border:var(--cu-border-size-1) solid var(--cu-border-high-contrast);background-color:var(--cu-background-menu)}.item__icon[_ngcontent-%COMP%]   cu3-icon[_ngcontent-%COMP%]{font-size:var(--cu-size-6)}[_nghost-%COMP%]     .item__icon .cu-avatar.cu-avatar_20 .cu-avatar__online{width:var(--10px);height:var(--10px);top:auto;bottom:var(--negative-2px);right:var(--negative-2px);border:var(--cu-border-size-2) solid #fff;background-color:var(--cu-avatar-user-online)}body.dark-theme   [_nghost-%COMP%]     .item__icon .cu-avatar.cu-avatar_20 .cu-avatar__online{border-color:#384047}.item__title[_ngcontent-%COMP%]{font-size:var(--cu-font-size-5);font-weight:var(--cu-font-weight-regular);line-height:var(--cu-font-size-7);color:var(--cu-content-default);text-align:center;text-transform:capitalize}.pin[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;top:var(--10px);right:var(--10px);width:var(--cu-size-5);height:var(--cu-size-5);border-radius:var(--cu-radii-2);opacity:0;border:var(--cu-border-size-1) solid var(--cu-border-high-contrast);background-color:var(--cu-background-main);box-shadow:var(--cu-elevation-1)}.pin[_ngcontent-%COMP%]:hover, .pin[_ngcontent-%COMP%]:focus{background-color:var(--cu-background-main-hover-strong)}.item__container[_ngcontent-%COMP%]:hover   .pin[_ngcontent-%COMP%], .item__container[_ngcontent-%COMP%]:focus   .pin[_ngcontent-%COMP%], .pin.active[_ngcontent-%COMP%]{opacity:1}.pin[_ngcontent-%COMP%]   cu3-icon[_ngcontent-%COMP%]{color:var(--cu-content-secondary);font-size:var(--cu-size-3)}`],changeDetection:0});}}return t$21;})();VN();Xle=()=>[`bottom-left`],Zle=()=>[`bottom`];XQ=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.segmentService=r$34,this.isLayoutV39=!1;}closeMenu(){this.dropdown?.close();}dropdownOpened(){this.store.dispatch(Xe$1({open:!1})),this.store.dispatch(new C$11({open:!1}));}static{this.fac=function(r$34){return new(r$34||t$21)(br(q$19),br(_b$1));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-apps-menu`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(V$7,5),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.dropdown=s$25.first);}},hostVars:2,hostBindings:function(r$34,o$32){r$34&2&&Gg(`v3_9`,o$32.isLayoutV39);},inputs:{isLayoutV39:`isLayoutV39`},decls:4,vars:12,consts:()=>{let e$19;return e$19="Quick Action Menu",[[`cuDropdown`,``,3,`dropdownOpen`,`dropdownCloseOnInsideClick`,`dropdownPlacement`,`dropdownRightEdgePadding`,`dropdownPreventToggleOverlap`,`dropdownTrigger`],[`cuDropdownToggle`,``,`cu3IconButton`,``,`cuTooltip`,e$19,`data-test`,`apps-menu__quick-action-menu`,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`size`,`variant`,`colorMode`,`tooltipPlacement`],[`name`,`nineDots`],[`class`,`cu-dropdown__menu_overflow-hidden cu-dropdown__menu_padding-top-bottom cu-dropdown__menu_fixed-width apps-menu-dropdown`,4,`cuDropdownMenu`],[1,`cu-dropdown__menu_overflow-hidden`,`cu-dropdown__menu_padding-top-bottom`,`cu-dropdown__menu_fixed-width`,`apps-menu-dropdown`],[3,`appOpened`]];},template:function(r$34,o$32){r$34&1&&(Kc$3(0,`div`,0),Fg(`dropdownOpen`,function(){return o$32.dropdownOpened();}),Kc$3(1,`button`,1),fg$1(2,`cu3-icon`,2),Jc$1(),Bp(3,ede,2,0,`div`,3),Jc$1()),r$34&2&&(dg(`dropdownCloseOnInsideClick`,!1)(`dropdownPlacement`,HT(10,Xle))(`dropdownRightEdgePadding`,8)(`dropdownPreventToggleOverlap`,!0)(`dropdownTrigger`,`click`),vv(),dg(`size`,o$32.isLayoutV39?`compact`:`medium`)(`variant`,o$32.isLayoutV39?`default`:`onColor`)(`colorMode`,o$32.isLayoutV39?`legacy`:`dark`)(`tooltipPlacement`,HT(11,Zle)),og(`aria-label`,`Quick Action Menu`));},dependencies:[Ao$1,V$7,xo$1,ho,j$16,Te$4,ue$7,I$14,K$12,YQ],styles:[`[_nghost-%COMP%]{margin-left:var(--4px)}.apps-menu-dropdown[_ngcontent-%COMP%]{max-height:calc(100vh - var(--cu-global-actions-bar-height) - 16px);overflow-y:auto;top:33px!important}.cu-scrollbar[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%], .cu-scrollbar   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%], .cu-os-win[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%], .cu-os-win   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]{scrollbar-color:var(--cu-border-hover) var(--cu-background-menu);scrollbar-width:thin}.cu-scrollbar[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-corner, .cu-scrollbar   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-corner, .cu-os-win[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-corner, .cu-os-win   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-corner{display:none}.cu-scrollbar[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar, .cu-scrollbar   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar, .cu-os-win[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar, .cu-os-win   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:var(--cu-background-menu);width:10px;height:10px}.cu-scrollbar[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track, .cu-scrollbar   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track, .cu-os-win[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track, .cu-os-win   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:var(--cu-background-menu)}.cu-scrollbar[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .cu-scrollbar   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .cu-os-win[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .cu-os-win   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--cu-border-hover);border-radius:var(--cu-radii-5);border:var(--cu-border-size-2) solid var(--cu-background-menu)}.cu-scrollbar[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-button, .cu-scrollbar   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-button, .cu-os-win[_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-button, .cu-os-win   [_nghost-%COMP%]   .apps-menu-dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}.cu-dropdown__toggle[aria-expanded=true][_ngcontent-%COMP%]{background-color:var(--cu-background-on-dark-hover)}.v3_9[_nghost-%COMP%]{margin-left:0}.v3_9[_nghost-%COMP%]   .cu-dropdown__toggle[aria-expanded=true][_ngcontent-%COMP%]{background-color:var(--cu-background-main-hover-strong)}`],changeDetection:0});}}return t$21;})();VN();ZQ=(()=>{class t$21{constructor(e$19){this.generateHomeRouteService=e$19,this.isLayoutV39=!1,this.homePath$=this.generateHomeRouteService.getHomeRoute(),this.viewModel$=q$15({homePath:this.homePath$}),this.clickupSymbolColorImage=t$19();}static{this.fac=function(r$34){return new(r$34||t$21)(br(l$15));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-brand-logo`]],hostVars:2,hostBindings:function(r$34,o$32){r$34&2&&Gg(`v3_9`,o$32.isLayoutV39);},inputs:{isLayoutV39:`isLayoutV39`},decls:1,vars:1,consts:[[4,`rxLet`],[3,`routerLink`],[`data-test`,`brand-logo__simple-bar-img`,`alt`,``,1,`symbol`,3,`src`]],template:function(r$34,o$32){r$34&1&&Bp(0,tde,3,2,`ng-container`,0),r$34&2&&dg(`rxLet`,o$32.viewModel$);},dependencies:[F$16,Pt$3],styles:[`[_nghost-%COMP%]{display:flex;align-items:center;padding-left:var(--5px)}html.todesktop-platform-darwin   [_nghost-%COMP%]{display:none}.symbol[_ngcontent-%COMP%]{height:var(--cu-size-4)}.v3_9[_nghost-%COMP%]   .symbol[_ngcontent-%COMP%]{height:var(--cu-size-3)}`],changeDetection:0});}}return t$21;})();dm();Ee$4();VN();rde=()=>({code:`Key[`,metaKey:!0}),ide=()=>({code:`Key]`,metaKey:!0});eJ=(()=>{class t$21{constructor(e$19,r$34,o$32){this.segmentService=e$19,this.destroyRef=r$34,this.location=o$32,this.isLayoutV39=!1,this.isLayoutV4=!1,this.state$=new tt$3({canGoBack:!1,canGoForward:!1}),this.viewModel$=this.state$.asObservable();}ngOnInit(){if(`navigation`in window)V$15(window.navigation,`currententrychange`).pipe(F$22(this.destroyRef)).subscribe(()=>{this.state$.next({canGoBack:window.navigation.canGoBack,canGoForward:window.navigation.canGoForward});});else throw new Error(`window.navigation is not available`);}goBack(){window.navigation.canGoBack&&(this.location.back(),this.segmentService.track(Bu.NavigateGlobalActionBar,{action:`back`}));}goForward(){window.navigation.canGoForward&&(this.location.forward(),this.segmentService.track(Bu.NavigateGlobalActionBar,{action:`forward`}));}static{this.fac=function(r$34){return new(r$34||t$21)(br(_b$1),br(at$11),br(Ft));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-desktop-navigation`]],hostVars:2,hostBindings:function(r$34,o$32){r$34&2&&Gg(`v4`,o$32.isLayoutV4);},inputs:{isLayoutV39:`isLayoutV39`,isLayoutV4:`isLayoutV4`},decls:2,vars:3,consts:()=>{let e$19;e$19="Go back";let r$34;return r$34="Go forward",[[4,`ngIf`],[`cu3IconButton`,``,`cuTooltip`,e$19,`tooltipModifierWithPlacement`,`tooltip_web-component`,1,`button`,3,`cuPress`,`size`,`variant`,`colorMode`,`disabled`,`tooltipHotkey`],[`name`,`arrowLeft`],[`cu3IconButton`,``,`cuTooltip`,r$34,`tooltipModifierWithPlacement`,`tooltip_web-component`,1,`button`,3,`cuPress`,`size`,`variant`,`colorMode`,`disabled`,`tooltipHotkey`],[`name`,`arrowRight`]];},template:function(r$34,o$32){r$34&1&&(Bp(0,ode,5,12,`ng-container`,0),YT(1,`async`)),r$34&2&&dg(`ngIf`,JT(1,1,o$32.viewModel$));},dependencies:[Vn$1,j$16,Te$4,ue$7,et$2,I$14,K$12,qn],styles:[`[_nghost-%COMP%]{display:flex;align-items:center}.v4[_nghost-%COMP%]{margin-left:4px}.v4[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{--button-color: var(--cu-global-actions-bar-v4-button-color);--button-background-hover: var( --cu-global-actions-bar-v4-button-background-hover );--button-background-active: var( --cu-global-actions-bar-v4-button-background-active )}`],changeDetection:0});}}return t$21;})();VN();VN();VN();Af$1=(()=>{class t$21{constructor(){this.elementRef=C$23(Cr$3),this.store=C$23(ll,{optional:!0}),this.id=OA(),this.title=OA(),this.tooltip=OA(),this.icon=OA(),this.triggered=kA$1(),this.isVisible=fN(()=>{if(!this.store)return!0;let e$19=this.id();if(!e$19)return!0;let r$34=this.store.containerWidth(),o$32=this.store.itemWidths(),s$25=this.store.items();return r$34===0||s$25.length===0||!o$32[e$19]||o$32[e$19]===0?!0:this.store.visibleItems().some(a$30=>a$30.id===e$19);}),this.visibilityEffect=pN(()=>{let e$19=this.isVisible(),r$34=this.elementRef.nativeElement;e$19?(r$34.style.display=``,r$34.style.pointerEvents=``):(r$34.style.display=`none`,r$34.style.pointerEvents=`none`);});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.dir=xE$1({type:t$21,selectors:[[``,`cuOverflowItem`,``]],inputs:{id:[1,`id`],title:[1,`title`],tooltip:[1,`tooltip`],icon:[1,`icon`]},outputs:{triggered:`triggered`}});}}return t$21;})();VN();VN();nde=[`*`,[[``,`slot`,`dropdown-title`]]],ade=[`*`,`[slot=dropdown-title]`],cde=()=>({originX:`end`,originY:`bottom`,overlayX:`end`,overlayY:`top`,offsetY:8}),mde=t$21=>[t$21],lde=(t$21,i$27)=>i$27.id;tJ=(()=>{class t$21{constructor(){this.elementRef=C$23(Cr$3),this.store=C$23(ll),this.dynamicClassBuilderService=C$23(y$11),this.overflowItemsComponent=C$23(Pb,{optional:!0}),this.overflowItemDirectives=jA$1(Af$1,{descendants:!0}),this.menuTrigger=PA(We$2),this.hiddenItems=this.store.hiddenItems,this.hasHiddenItems=this.store.hasHiddenItems,this.dropdownTitle=this.store.dropdownTitle,this.visibleItems=this.store.visibleItems,this.gapBetweenItems=this.store.gapBetweenItems,this.gapBetweenItemsClass=fN(()=>this.dynamicClassBuilderService.get(`gap`,`${this.gapBetweenItems()}px`)),this.directivesEffect=pN(()=>{this.overflowItemDirectives().length>0&&(this.registerChildrenWithStore(),this.overflowItemsComponent&&queueMicrotask(()=>{this.overflowItemsComponent?.triggerMeasurementFromContainer();}));});}get class(){return this.gapBetweenItemsClass();}ngAfterContentInit(){this.store.setItemContainer(this.elementRef);}ngAfterViewInit(){this.registerChildrenWithStore();}getChildElements(){return this.store.getElementsFromDirectives([...this.overflowItemDirectives()]);}getDirectives(){return[...this.overflowItemDirectives()];}getForcedVisibleItems(){return this.store.forcedVisibleItems();}addForcedVisibleItemWithRemeasurement(e$19){this.store.addForcedVisibleItemWithRemeasurement(e$19);}removeForcedVisibleItemWithWidthReset(e$19){this.store.removeForcedVisibleItemWithWidthReset(e$19);}clearForcedVisibleItemsWithWidthReset(){this.store.clearForcedVisibleItemsWithWidthReset();}selectHiddenItem(e$19){e$19.triggered?e$19.triggered():this.store.selectHiddenItem(e$19.id),this.menuTrigger()?.close();}triggerMeasurement(){this.overflowItemsComponent&&this.overflowItemsComponent.triggerMeasurementFromContainer();}registerChildrenWithStore(){let e$19=[...this.overflowItemDirectives()];this.store.setItemsFromDirectives(e$19);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-overflow-items-container`]],contentQueries:function(r$34,o$32,s$25){r$34&1&&YC(s$25,o$32.overflowItemDirectives,Af$1,5),r$34&2&&JC();},viewQuery:function(r$34,o$32){r$34&1&&KC(o$32.menuTrigger,We$2,5),r$34&2&&JC();},hostAttrs:[1,`cu-overflow-items-container`],hostVars:2,hostBindings:function(r$34,o$32){r$34&2&&gT(o$32.class);},ngContentSelectors:ade,decls:4,vars:1,consts:[[`menu`,``],[`cu3Button`,``,1,`cu-overflow-items-container-trigger`,3,`size`,`buttonType`,`cu3MenuTriggerFor`,`menuPosition`],[`name`,`chevronDown`,`cu3Trailing`,``],[1,`cu-overflow-items-container`],[3,`iconName`],[3,`click`,`iconName`]],template:function(r$34,o$32){r$34&1&&(UC(nde),qC(0),HD(1,pde,4,7,`button`,1),Bp(2,fde,3,0,`ng-template`,null,0,rN)),r$34&2&&(vv(),BD(o$32.hasHiddenItems()?1:-1));},dependencies:[T$17,ie$3,B$14,Ao$1,I$14,K$12,B$6,X$2,W$7],styles:[`[_nghost-%COMP%]{display:flex;align-items:center;justify-content:flex-end;flex:1 1 auto;min-width:0;position:relative;overflow:hidden;width:100%}.cu-overflow-items-container-trigger[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center}.cu-overflow-items-container[_ngcontent-%COMP%]{--cu-menu-min-width: 180px}`],changeDetection:0});}}return t$21;})();Q$18();VN();VN();VN();hde=[`*`],gde=()=>[`bottom-right`,`auto`];e0=(()=>{class t$21{constructor(){this.autoOpen=null,this.isLayoutV4=!1,this.dropdownClose=new He$4(),this.viewInited=!1;}get dropdownClass(){return`cu-recording-setup-dropdown${this.isLayoutV4?`-v4`:``}`;}ngAfterViewInit(){this.autoOpen&&this.open(),this.viewInited=!0;}ngOnChanges(e$19){this.viewInited&&e$19.autoOpen?.currentValue&&this.open();}open(){this.dropdown.open();}close(){this.dropdown.close();}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-recording-setup-dropdown`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(V$7,7),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.dropdown=s$25.first);}},inputs:{autoOpen:`autoOpen`,isLayoutV4:`isLayoutV4`},outputs:{dropdownClose:`dropdownClose`},features:[Fm],ngContentSelectors:hde,decls:4,vars:6,consts:[[`cuDropdown`,``,3,`dropdownClose`,`dropdownCloseOnInsideClick`,`dropdownCloseOnModal`,`dropdownPlacement`,`dropdownUseModernPositioning`,`dropdownUseModernPositioningOffsetPx`],[`cuDropdownToggle`,``],[3,`class`,4,`cuDropdownMenu`],[3,`closeDialog`]],template:function(r$34,o$32){r$34&1&&(UC(),Kc$3(0,`div`,0),Fg(`dropdownClose`,function(){return o$32.dropdownClose.emit();}),Kc$3(1,`div`,1),qC(2),Jc$1(),Bp(3,yde,2,2,`div`,2),Jc$1()),r$34&2&&dg(`dropdownCloseOnInsideClick`,!1)(`dropdownCloseOnModal`,!0)(`dropdownPlacement`,HT(5,gde))(`dropdownUseModernPositioning`,o$32.isLayoutV4)(`dropdownUseModernPositioningOffsetPx`,o$32.isLayoutV4?10:0);},dependencies:[Ao$1,V$7,xo$1,ho,Js$1],styles:[`.cu-recording-setup-dropdown[_ngcontent-%COMP%]{width:310px;margin-top:5px!important;border-radius:var(--cu-radii-6);box-shadow:0 0 0 1px #0000000f,0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a!important}.cu-recording-setup-dropdown-v4[_ngcontent-%COMP%]{width:310px;border-radius:var(--cu-radii-6);border:var(--cu-border-size-1) solid var(--cu-border-default);box-shadow:var(--cu-elevation-4)}`],changeDetection:0});}}return t$21;})();VN();rJ=(()=>{class t$21{constructor(e$19,r$34){this.screenRecorderTriggerService=e$19,this.clipEntitlementService=r$34,this.pendingToggleActiveValue=null,this.isLayoutV39=!1,this.isLayoutV4=!1,this.defaultButtonTemplate=null,this.clickItem=new He$4(),this.toggleActive=new He$4(),this.stopRecordingText="Stop recording",this.autoOpen$=this.screenRecorderTriggerService.recorderOpened$;}ngOnChanges(e$19){e$19.item?.currentValue?.active!==void 0&&e$19.item?.currentValue?.active!==e$19.item?.previousValue?.active&&(this.pendingToggleActiveValue=e$19.item?.currentValue?.active,e$19.item?.currentValue?.active||(this.toggleActive.emit(this.pendingToggleActiveValue),this.pendingToggleActiveValue=null));}recorderClosed(){this.screenRecorderTriggerService.closeRecorder();}onLoadingAnimationDone(){this.pendingToggleActiveValue!==null&&(this.toggleActive.emit(this.pendingToggleActiveValue),this.pendingToggleActiveValue=null);}refreshStorageUsage(){this.clipEntitlementService.refreshStorageUsage();}static{this.fac=function(r$34){return new(r$34||t$21)(br($$1),br(B$12));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-clip-button`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(e0,5),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.recordingSetupDropdownComponent=s$25.first);}},hostVars:4,hostBindings:function(r$34,o$32){r$34&2&&Gg(`v3_9`,o$32.isLayoutV39)(`v4`,o$32.isLayoutV4);},inputs:{isLayoutV39:`isLayoutV39`,isLayoutV4:`isLayoutV4`,item:`item`,defaultButtonTemplate:`defaultButtonTemplate`},outputs:{clickItem:`clickItem`,toggleActive:`toggleActive`},features:[VT([Di]),Fm],decls:2,vars:1,consts:[[1,`clip-controls`,3,`onGAB`,`isLayoutV39`,`isLayoutV4`],[3,`cuDropdownOpenedClass`,`autoOpen`,`isLayoutV4`],[1,`clip-controls`,3,`animationend`,`onGAB`,`isLayoutV39`,`isLayoutV4`],[3,`dropdownClose`,`mouseenter`,`cuDropdownOpenedClass`,`autoOpen`,`isLayoutV4`],[`cu3IconButton`,``,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`size`,`cuTooltip`,`tooltipHotkey`,`active`,`class`],[`cu3IconButton`,``,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`size`,`variant`,`colorMode`,`cuTooltip`,`tooltipHotkey`,`active`,`class`],[`cu3IconButton`,``,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`cuPress`,`size`,`cuTooltip`,`tooltipHotkey`],[3,`name`],[`cu3IconButton`,``,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`cuPress`,`size`,`variant`,`colorMode`,`cuTooltip`,`tooltipHotkey`]],template:function(r$34,o$32){r$34&1&&HD(0,Sde,1,3,`cu-clip-controls`,0)(1,_de,4,6,`cu-recording-setup-dropdown`,1),r$34&2&&BD(o$32.item.active?0:1);},dependencies:[gi$1,T$17,I$14,K$12,M$14,j$16,Te$4,ue$7,zr,e0,v$7,C$7,et$2,qn],styles:[`.clip-controls[_ngcontent-%COMP%]{display:flex}.clip-button-dropdown_opened[_ngcontent-%COMP%]   .record-button[_ngcontent-%COMP%]{--button-background: var(--cu-background-on-dark-hover)}.clip-button[_ngcontent-%COMP%]{background-color:var(--cu-background-on-dark-hover);padding-left:var(--7px);position:relative;width:auto}.clip-button[_ngcontent-%COMP%]:hover:before, .clip-button[_ngcontent-%COMP%]:focus:before{background-color:var(--cu-background-on-dark-hover)}.clip-button[_ngcontent-%COMP%]:active:before{background-color:var(--cu-background-on-dark-pressed)}.clip-button[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;width:calc(100% + 2px);height:calc(100% + 2px);top:-1px;left:-1px;border-radius:var(--cu-radii-2);pointer-events:none;background-color:transparent}.recording[_ngcontent-%COMP%]{color:var(--cu-red600);font-size:var(--cu-font-size-5);font-weight:var(--cu-font-weight-regular);padding:var(--1px) var(--4px);background-color:var(--cu-grey100);border-radius:var(--cu-radii-2);margin:var(--negative-1px) -5px var(--negative-1px) var(--2px)}.v3_9[_nghost-%COMP%]   .clip-button-dropdown_opened[_ngcontent-%COMP%]   .record-button[_ngcontent-%COMP%]{--button-background: var(--cu-background-main-hover-strong)}.v3_9[_nghost-%COMP%]   .clip-button[_ngcontent-%COMP%]{background-color:var(--cu-background-main-hover-strong)}.v3_9[_nghost-%COMP%]   .clip-button[_ngcontent-%COMP%]:hover:before, .v3_9[_nghost-%COMP%]   .clip-button[_ngcontent-%COMP%]:focus:before{background-color:var(--cu-background-main-hover-strong)}.v3_9[_nghost-%COMP%]   .clip-button[_ngcontent-%COMP%]:active:before{background-color:var(--cu-background-main-pressed)}.v3_9[_nghost-%COMP%]   .recording[_ngcontent-%COMP%]{color:var(--cu-background-danger);background-color:var(--cu-grey100)}.v4[_nghost-%COMP%]   .record-button[_ngcontent-%COMP%]{--button-color: var(--cu-global-actions-bar-v4-button-color);--button-background-hover: var( --cu-global-actions-bar-v4-button-background-hover );--button-background-active: var( --cu-global-actions-bar-v4-button-background-active )}.v4[_nghost-%COMP%]   .clip-button-dropdown_opened[_ngcontent-%COMP%]   .record-button[_ngcontent-%COMP%]{--button-background: var( --cu-global-actions-bar-v4-button-background-hover )}`],changeDetection:0});}}return S$20([c$25()],t$21.prototype,`item`,void 0),t$21;})();Q$18();VN();dm();dm();VN();Ub=(()=>{class t$21 extends F$19{constructor(e$19,r$34,o$32){super(),this.store=e$19,this.timeTrackerService=r$34,this.defaultBillableService=o$32,this.currentEntry$=this.store.select(L$5),this.isTimeTrackerOpen$=this.store.select(ot$2),this.timeTrackingActive$=$i([this.isTimeTrackerOpen$,this.currentEntry$]).pipe(q$20(([s$25,n$46])=>s$25||!!n$46)),this.duration$=this.currentEntry$.pipe(le$5(s$25=>s$25?c$9(s$25.start):qe$6(0))),this.team$=this.store.select(de$10),this.viewModel$=q$15({duration:this.duration$,timeTrackingActive:this.timeTrackingActive$,isTimeTrackerOpen:this.isTimeTrackerOpen$});}toggleTimer(){this.register(this.currentEntry$.pipe(ss$2(this.defaultBillableService.isTeamDefaultBillable()),Ve$4(1)),([e$19,r$34])=>{this.timeTrackerAction({action:e$19?O$11.Stop:O$11.Start,task:e$19?.task,payload:{...e$19,billable:e$19?e$19.billable:r$34}});});}timeTrackerAction(e$19){this.timeTrackerService.dispatchTimeTrackingEvent({...e$19,via:a$4.GlobalActionBar});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(V$4),ge$10(B$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();iJ=(()=>{class t$21{constructor(e$19){this.timeTrackingButtonService=e$19,this.defaultButtonTemplate=null,this.isLayoutV39=!1,this.isLayoutV4=!1,this.clickItem=new He$4(),this.sizeChanged=new He$4(),this.viewModel$=this.timeTrackingButtonService.viewModel$,this.startTimerString="Start timer",this.stopTimerString="Stop timer",this.viewModel$.pipe(zt$2((r$34,o$32)=>r$34.timeTrackingActive===o$32.timeTrackingActive),Ss$1(1),F$22()).subscribe(()=>{queueMicrotask(()=>{this.sizeChanged.emit();});});}toggleTimer(){this.timeTrackingButtonService.toggleTimer();}static{this.fac=function(r$34){return new(r$34||t$21)(br(Ub));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-time-tracking-button`]],hostVars:4,hostBindings:function(r$34,o$32){r$34&2&&Gg(`v3_9`,o$32.isLayoutV39)(`v4`,o$32.isLayoutV4);},inputs:{item:`item`,defaultButtonTemplate:`defaultButtonTemplate`,isLayoutV39:`isLayoutV39`,isLayoutV4:`isLayoutV4`},outputs:{clickItem:`clickItem`,sizeChanged:`sizeChanged`},features:[VT([Ub])],decls:2,vars:3,consts:()=>{let e$19;return e$19="Open time tracking",[[4,`ngIf`],[`class`,`container`,4,`ngIf`,`ngIfElse`],[1,`container`],[`cu3Button`,``,1,`time-tracking-button-v3`,3,`cuPress`,`size`,`variant`,`colorMode`],[`cuTooltip`,e$19,`tooltipModifierWithPlacement`,`tooltip_web-component`,1,`tracking-time`,3,`tooltipDisabled`],[`size`,`xsmall`,1,`toggle`,3,`timerStarted`,`timerStopped`,`isTimerRunning`]];},template:function(r$34,o$32){r$34&1&&(Bp(0,Ide,2,2,`ng-container`,0),YT(1,`async`)),r$34&2&&dg(`ngIf`,JT(1,1,o$32.viewModel$));},dependencies:[Vn$1,ie$3,et$2,Te$4,ue$7,j$3,qn,m$9],styles:[`.container[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.toggle[_ngcontent-%COMP%]{position:absolute;right:7px}.tracking-time[_ngcontent-%COMP%]{color:var(--cu-content-on-dark-secondary);font-size:var(--cu-label-xsmall-font-size);font-weight:var(--cu-font-weight-medium);line-height:var(--cu-label-xsmall-line-height);min-width:6ch;text-align:left}.time-tracking-button-v3[_ngcontent-%COMP%]{display:flex;align-items:center;height:var(--28px);border:none;border-radius:var(--cu-radii-3);background-color:var(--cu-background-on-dark-hover)}.time-tracking-button-v3[_ngcontent-%COMP%]:active{background-color:var(--cu-background-on-dark-pressed)}.time-tracking-button-v3[_ngcontent-%COMP%], .time-tracking-button-v3[cu3-size=compact][_ngcontent-%COMP%], .time-tracking-button-v3[cu3-size=small][_ngcontent-%COMP%]{padding-inline:7px 27px}.v3_9[_nghost-%COMP%]   .tracking-time[_ngcontent-%COMP%]{position:relative;color:var(--cu-content-secondary)}.v3_9[_nghost-%COMP%]   .time-tracking-button-v3[_ngcontent-%COMP%]{background-color:var(--cu-background-main-hover-strong)}.v3_9[_nghost-%COMP%]   .time-tracking-button-v3[_ngcontent-%COMP%]:active{background-color:var(--cu-background-main-pressed)}.v4[_nghost-%COMP%]   .time-tracking-button-v3[_ngcontent-%COMP%]{background-color:var(--cu-global-actions-bar-v4-button-subtle-background)}.v4[_nghost-%COMP%]   .time-tracking-button-v3[_ngcontent-%COMP%]:hover, .v4[_nghost-%COMP%]   .container[_ngcontent-%COMP%]:has(.toggle:hover)   .time-tracking-button-v3[_ngcontent-%COMP%]{background-color:var(--cu-global-actions-bar-v4-button-subtle-background-hover)}.v4[_nghost-%COMP%]   .time-tracking-button-v3[_ngcontent-%COMP%]:active{background-color:var(--cu-global-actions-bar-v4-button-background-active)}`],changeDetection:0});}}return S$20([c$25()],t$21.prototype,`item`,void 0),t$21;})();VN();oJ=(t$21,i$27)=>i$27.id;sJ=(()=>{class t$21{constructor(){this.isLayoutV39=!1,this.isLayoutV4=!1,this.quickAppService=C$23(io),this.apps$=this.quickAppService.pinnedApps$,this.isTimerActive=!1,this.isClipActive=!1,this.isSyncUpActive=!1;}onTimeTrackingSizeChanged(e$19){let r$34=`time_tracking`;this.isItemForced(e$19,r$34)?(e$19.removeForcedVisibleItemWithWidthReset(r$34),this.isTimerActive=!1):(e$19.addForcedVisibleItemWithRemeasurement(r$34),this.isTimerActive=!0);}onClipSizeChanged(e$19,r$34){let o$32=`clip`,s$25=this.isItemForced(r$34,o$32);!e$19&&s$25?(r$34.removeForcedVisibleItemWithWidthReset(o$32),this.isClipActive=!1):e$19&&!s$25&&(this.isClipActive=!0,r$34.addForcedVisibleItemWithRemeasurement(o$32));}onSyncUpSizeChange(e$19,r$34){let o$32=`syncup-global-action-bar`,s$25=this.isItemForced(r$34,o$32);e$19>0&&!s$25?(r$34.addForcedVisibleItemWithRemeasurement(o$32),this.isSyncUpActive=!0):e$19===0&&s$25&&(r$34.removeForcedVisibleItemWithWidthReset(o$32),this.isSyncUpActive=!1);}clickApp(e$19){this.quickAppService.executeApp(e$19.id,{via:`top nav`});}isItemForced(e$19,r$34){return e$19.getForcedVisibleItems().includes(r$34);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-pinned-items`]],hostVars:10,hostBindings:function(r$34,o$32){r$34&2&&Gg(`cu-pinned-items_timer-active`,o$32.isTimerActive)(`cu-pinned-items_clip-active`,o$32.isClipActive)(`cu-pinned-items_syncup-active`,o$32.isSyncUpActive)(`v3_9`,o$32.isLayoutV39)(`v4`,o$32.isLayoutV4);},inputs:{isLayoutV39:`isLayoutV39`,isLayoutV4:`isLayoutV4`},decls:2,vars:1,consts:[[`overflowContainer`,``],[`regularButtonTemplateV4`,``],[`regularButtonTemplate`,``],[`cuOverflowItem`,``,1,`cu-pinned-items-no-drag`,3,`sizeChange`,`isTimerActive`,`isClipActive`,`id`],[`slot`,`dropdown-title`,1,`cu-pinned-items-dropdown-title`,`cu-pinned-items-no-drag`],[`name`,`pin`],[`cuOverflowItem`,``,1,`cu-pinned-items-no-drag`,3,`id`,`title`,`tooltip`,`icon`,`item`,`defaultButtonTemplate`,`isLayoutV39`,`isLayoutV4`],[`aria-hidden`,`true`,2,`display`,`contents`],[`cu3IconButton`,``,`cuOverflowItem`,``,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`id`,`title`,`tooltip`,`icon`,`size`,`cuTooltip`,`tooltipHotkey`,`selected`,`class`],[`cuOverflowItem`,``,1,`cu-pinned-items-no-drag`,3,`clickItem`,`triggered`,`sizeChanged`,`id`,`title`,`tooltip`,`icon`,`item`,`defaultButtonTemplate`,`isLayoutV39`,`isLayoutV4`],[`cuOverflowItem`,``,1,`cu-pinned-items-no-drag`,3,`clickItem`,`triggered`,`toggleActive`,`id`,`title`,`tooltip`,`icon`,`item`,`defaultButtonTemplate`,`isLayoutV39`,`isLayoutV4`],[`cu3IconButton`,``,`cuOverflowItem`,``,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`cuPress`,`triggered`,`id`,`title`,`tooltip`,`icon`,`size`,`cuTooltip`,`tooltipHotkey`],[3,`name`],[`cu3IconButton`,``,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`cuPress`,`size`,`cuTooltip`,`tooltipHotkey`],[3,`item`,`defaultButtonTemplate`,`isLayoutV39`,`isLayoutV4`],[3,`ngTemplateOutlet`],[3,`clickItem`,`item`,`defaultButtonTemplate`,`isLayoutV39`,`isLayoutV4`],[`cu3IconButton`,``,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`cuPress`,`size`,`variant`,`colorMode`,`cuTooltip`,`tooltipHotkey`]],template:function(r$34,o$32){r$34&1&&HD(0,xde,8,5,`cu-overflow-items-container`)(1,Bde,3,2),r$34&2&&BD(o$32.isLayoutV4?0:1);},dependencies:[tJ,Bb,Af$1,iJ,rJ,j$16,Te$4,ue$7,et$2,I$14,K$12,Yn,Po,zi,qn],styles:[`[_nghost-%COMP%]{display:flex;align-items:center;gap:var(--4px);margin-left:var(--4px)}.active[_ngcontent-%COMP%]{background-color:var(--cu-background-on-dark-hover)}.app-ai[_ngcontent-%COMP%]{background-image:url("./media/AI-default-ACTPFU23.svg");background-position:50% 50%;background-repeat:no-repeat;background-size:var(--16px) var(--16px)}.v3_9[_nghost-%COMP%]{gap:0}.v3_9[_nghost-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:var(--cu-background-main-hover-strong)}.v4[_nghost-%COMP%]{margin:revert;flex:1;align-items:center;min-width:0;gap:2px}.v4[_nghost-%COMP%]   .cu-pinned-items-no-drag[_ngcontent-%COMP%]{-webkit-app-region:no-drag}@media screen and (width <= 875px){.v4.cu-pinned-items_timer-active.cu-pinned-items_clip-active.cu-pinned-items_syncup-active[_nghost-%COMP%]     .cu-clip-controls__square{margin-right:0}.v4.cu-pinned-items_timer-active.cu-pinned-items_clip-active.cu-pinned-items_syncup-active[_nghost-%COMP%]     .cu-clip-controls__time{display:none}}@media screen and (width <= 705px){.v4.cu-pinned-items_syncup-active[_nghost-%COMP%]:not(.cu-pinned-items_timer-active)     .cu-clip-controls__square{margin-right:0}.v4.cu-pinned-items_syncup-active[_nghost-%COMP%]:not(.cu-pinned-items_timer-active)     .cu-clip-controls__time{display:none}}@media screen and (width <= 715px){.v4[_nghost-%COMP%]     .cu-clip-controls__square{margin-right:0}.v4[_nghost-%COMP%]     .cu-clip-controls__time{display:none}}.v4[_nghost-%COMP%]:not(:empty){margin-right:0}.v4[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{--button-color: var(--cu-global-actions-bar-v4-button-color);--button-background-hover: var( --cu-global-actions-bar-v4-button-background-hover );--button-background-active: var( --cu-global-actions-bar-v4-button-background-active )}.v4[_nghost-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:var(--cu-global-actions-bar-v4-button-background-hover)}.sidebarTime-icon[_ngcontent-%COMP%]{transform:none}.cu-pinned-items-dropdown-title[_ngcontent-%COMP%]{display:flex;align-items:center}`],changeDetection:0});}}return t$21;})();VN();dm();Wb=`quickCreate`,aJ=sn({quickCreateModal:!1},on(s.showTaskModalOnNewRoute,t$21=>nJ(t$21,!0)),on(s.dismissTaskModalOnNewRoute,t$21=>nJ(t$21,!1))),nJ=(t$21,i$27)=>({...t$21,quickCreateModal:i$27});cJ=Ue$6(mt$4(Wb),t$21=>t$21.quickCreateModal);VN();Hde=t$21=>({button:!0,v3_9:t$21}),mJ=f$30.byNamespace(`growth`),lJ=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.splitService=r$34,this.quickCreateService=C$23(U$5),this.effects=C$23(F$19),this.globalHotkeyFeatureFlagService=C$23(F$4),this.quickCreateModal$=this.store.select(cJ),this.isGuest$=this.store.select(Gr$2),this.guestSettings$=this.store.select(Hr$2),this.createItemsHotkey={code:`KeyT`},this.createItemsHotkeyChorded={code:`KeyT`,altKey:!0},this.isChordedKeysEnabled$=this.globalHotkeyFeatureFlagService.isChordedGlobalHotkeysFeatureEnabled$,this.tooltipHotkey$=$i([this.store.select(at$10),this.isChordedKeysEnabled$]).pipe(q$20(([o$32,s$25])=>o$32?s$25?this.createItemsHotkeyChorded:this.createItemsHotkey:null)),this.nuxOwnerExampleExperiment$=this.store.select(al).pipe(Ve$4(1),q$20(o$32=>o$32===N$16.OWNER),le$5(o$32=>o$32?this.splitService.getTreatment({name:B$17.ExpNuxOwnerExample}):qe$6(`excluded`))),this.buttonText$=this.nuxOwnerExampleExperiment$.pipe(q$20(o$32=>o$32===d$20.ON?(mJ.log(`User gets 'on' treatment for ${B$17.ExpNuxOwnerExample} experiment`),"Create"):(mJ.log(`User gets 'off' treatment or is excluded from ${B$17.ExpNuxOwnerExample} experiment`),"New")));}ngOnInit(){this.quickCreateModal$.pipe(Ve$4(1),oe$13(Boolean),Is$1(()=>this.showQuickCreateModal()),Is$1(()=>this.store.dispatch(s.dismissTaskModalOnNewRoute()))).subscribe();}showQuickCreateModal(e$19){this.effects.register($i([this.isGuest$,this.guestSettings$]).pipe(le$5(([r$34,o$32])=>{let s$25=r$34?o$32?.can_create_views?c$5:r$3:void 0;return this.quickCreateService.showQuickCreateModal({defaultTab:e$19?.type??`task`,initialContent:e$19?.initialContent,allowedTabs:s$25});})));}static{this.fac=function(r$34){return new(r$34||t$21)(br(q$19),br(Qn));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-quick-create-modal-toggle`]],inputs:{isLayoutV39:`isLayoutV39`},features:[VT([F$19])],decls:6,vars:14,consts:()=>{let e$19;return e$19="Create Items",[[`cu3Button`,``,`cuTooltip`,e$19,`tooltipModifierWithPlacement`,`tooltip_web-component`,`cuPendoId`,`quick-create-new-task`,`data-test`,`quick-create-modal-toggle-new-task`,3,`cuPress`,`variant`,`colorMode`,`buttonType`,`size`,`tooltipHotkey`,`ngClass`],[`cu3Leading`,``,3,`name`]];},template:function(r$34,o$32){r$34&1&&(Kc$3(0,`button`,0),YT(1,`async`),Fg(`cuPress`,function(){return o$32.showQuickCreateModal();}),fg$1(2,`cu3-icon`,1),tl(3),NT(4),YT(5,`async`),Si$1(),Jc$1()),r$34&2&&(dg(`variant`,o$32.isLayoutV39?`onSubtle`:`onColor`)(`colorMode`,o$32.isLayoutV39?`light`:`dark`)(`buttonType`,o$32.isLayoutV39?`outline`:`text`)(`size`,o$32.isLayoutV39?`compact`:`medium`)(`tooltipHotkey`,JT(1,8,o$32.tooltipHotkey$))(`ngClass`,BT(12,Hde,o$32.isLayoutV39)),vv(2),dg(`name`,o$32.isLayoutV39?`addCircleFilled`:`addCircle`),vv(2),oh(JT(5,10,o$32.buttonText$)));},dependencies:[ie$3,Te$4,ue$7,u$13,zn,et$2,I$14,K$12,T$17,D$11,qn],styles:[`[_nghost-%COMP%]{display:contents}.button[_ngcontent-%COMP%]{margin-right:var(--4px);margin-left:var(--4px)}html.todesktop-platform-darwin[_nghost-%COMP%]   .button[_ngcontent-%COMP%], html.todesktop-platform-darwin   [_nghost-%COMP%]   .button[_ngcontent-%COMP%]{-webkit-app-region:no-drag}.v3_9[cu3-size=compact][_ngcontent-%COMP%]{border-radius:var(--cu-radii-4);padding-left:var(--9px);--button-border-color: var(--cu-global-actions-bar-button-border);--button-color: var(--cu-content-primary)}`],changeDetection:0});}}return t$21;})();VN();dm();VN();Gde=[`lottie`],dJ=(()=>{class t$21{onMouseEnter(){let e$19=this.brainLottieComponent.player;if(!e$19)return;let r$34=e$19.getLottie(),n$46=r$34.currentFrame>=r$34.totalFrames-1;e$19.setDirection(1),n$46?r$34.goToAndPlay(0,!0):r$34.play();}onMouseLeave(){let e$19=this.brainLottieComponent.player;if(!e$19)return;let r$34=e$19.getLottie(),n$46=r$34.currentFrame/r$34.totalFrames;r$34.playDirection===1&&n$46<.5&&(r$34.setDirection(-1),r$34.play());}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-search-modal-toggle-lottie`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(Gde,7),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.brainLottieComponent=s$25.first);}},decls:2,vars:3,consts:[[`lottie`,``],[`name`,`brainSpin`,3,`loop`,`autoplay`,`speed`]],template:function(r$34,o$32){r$34&1&&fg$1(0,`cu-lottie-player`,1,0),r$34&2&&dg(`loop`,!1)(`autoplay`,!1)(`speed`,2);},dependencies:[K$3],encapsulation:2,changeDetection:0});}}return t$21;})();VN();Kde=[`searchModalToggleLottie`],Qde=(t$21,i$27,e$19,r$34)=>({button:!0,"search-button":!0,"with-ai-button":t$21,"with-ai-button-v4":i$27,v3_9:e$19,v4:r$34}),pJ=()=>[`bottom`],Jde=(t$21,i$27)=>({button:!0,"ai-button":!0,v3_9:t$21,v4:i$27});uJ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30){this.commandBarService=e$19,this.contentAssistantFeaturesService=r$34,this.contentAssistantMainLoader=o$32,this.locationControlService=s$25,this.aiSidebarRouteService=n$46,this.destroyRef=a$30,this.toggled=new He$4(),this.prefersReducedMotion$=fo(),this.aiShortcut=p$12,this.aiShortcutLabel=Rt$2,this.aiLabel=Bt$6,this.askAiLabel="Ask AI",this.tooltip="Open Search",this.searchText="Search",this.searchEverythingText="Search everything",this.showAiButton$=this.contentAssistantFeaturesService.isClickAppOn$,this.hotkey$=this.commandBarService.hotkey$,this.hotkeyLabel$=this.hotkey$.pipe(q$20(c$37=>n$31(c$37))),this.aiWaitingForSidebarReady$=this.locationControlService.aiWaitingForSidebarReady$,this.isAiFullPageActive$=N$17(this.aiSidebarRouteService.isOnAiRoute);}ngOnInit(){this.commandBarService.onToggled$.pipe(F$22(this.destroyRef)).subscribe(({opened:e$19})=>{this.toggled.emit({opened:e$19});});}openSearchModal(){this.commandBarService.open({via:`search button`});}closeSearchModal(){this.commandBarService.close().catch(e$19=>lA(e$19,{feature:`command-bar`}));}openAi(){this.contentAssistantMainLoader.checkQuotaAndShowModal(`global-ai-toolbar`,{via:`global-ai-toolbar`,location:`global-ai`,metadata:{}},void 0).pipe(F$22(this.destroyRef)).subscribe();}openAiToggleLottie(e$19){this.isLayoutV4&&(e$19?this.searchModalToggleLottie?.onMouseEnter():this.searchModalToggleLottie?.onMouseLeave());}static{this.fac=function(r$34){return new(r$34||t$21)(br(ve$4),br(Ti$2),br(Lt),br(Te$2),br(q$6),br(at$11));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-search-modal-toggle`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(Kde,5),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.searchModalToggleLottie=s$25.first);}},inputs:{isLayoutV39:`isLayoutV39`,isLayoutV4:`isLayoutV4`},outputs:{toggled:`toggled`},decls:4,vars:1,consts:[[`content`,``],[`searchModalToggleLottie`,``],[1,`v4-wrapper`],[4,`ngTemplateOutlet`],[4,`rxLet`,`rxLetStrategy`],[`data-test`,`search-modal-toggle__search-modal`,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`cuPress`,`ngClass`,`cuTooltip`,`tooltipHotkey`,`tooltipPlacement`],[1,`leading-icon`,3,`name`],[1,`placeholder`],[1,`hotkey`],[1,`separator`],[`data-test`,`search-modal-toggle__ai-button-search-bar`,`tooltipModifierWithPlacement`,`tooltip_web-component`,3,`cuPress`,`mouseenter`,`mouseleave`,`ngClass`,`cuTooltip`,`tooltipHotkey`,`tooltipPlacement`,`tooltipDisabled`,`disabled`],[1,`ai-button__icon`,`ai-button__icon-primary`,3,`name`],[1,`ai-button__icon`,`ai-button__icon-default`,3,`name`],[1,`ai-button__label`],[1,`ai-fade-v4`],[1,`ai-button__icon`,`ai-button__icon-animatedpetals`],[1,`ai-button__icon`,`ai-button__icon-staticpetals`,`ai-brain-icon`]],template:function(r$34,o$32){r$34&1&&(HD(0,Xde,2,1,`div`,2)(1,epe,1,1,`ng-container`),Bp(2,upe,1,2,`ng-template`,null,0,rN)),r$34&2&&BD(o$32.isLayoutV4?0:1);},dependencies:[Yn,F$16,zn,Te$4,ue$7,et$2,I$14,K$12,dJ,qn],styles:[`[_nghost-%COMP%]{--search-modal-toggle-v4-transition: var(--cu-animation-duration-long) var(--cu-animation-timing-snappy);display:flex;width:26%;container:cu-search-modal-toggle/inline-size;position:relative}.button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:var(--cu-size-7);border:var(--cu-border-size-1) solid transparent;position:relative}.button[_ngcontent-%COMP%]:hover, .button[_ngcontent-%COMP%]:focus{background-color:var(--cu-background-on-dark-hover)}.button[_ngcontent-%COMP%]:active{background-color:var(--cu-background-on-dark-pressed)}.button[_ngcontent-%COMP%]:focus-visible{border:var(--cu-border-size-1) solid var(--cu-border-on-dark-focus);box-shadow:0 0 0 4px var(--cu-effect-on-dark);outline:transparent}.button[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;width:calc(100% + var(--2px));height:calc(100% + var(--2px));top:var(--negative-1px);left:var(--negative-1px);pointer-events:none;background-color:var(--cu-background-on-dark-hover)}@container cu-search-modal-toggle (inline-size < 240px){button[_ngcontent-%COMP%]:not(.v4):first-child{justify-content:flex-start;padding-left:var(--7px)}}@container cu-search-modal-toggle (inline-size < 100px){button[_ngcontent-%COMP%]:not(.v4):first-child   .placeholder[_ngcontent-%COMP%]{display:none}}.leading-icon[_ngcontent-%COMP%]{color:var(--cu-content-on-dark-secondary);font-size:var(--cu-size-4);margin-right:var(--cu-size-2);position:relative}span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:var(--cu-font-size-6);font-weight:var(--cu-font-weight-regular);line-height:var(--cu-font-size-7);color:var(--cu-content-on-dark-secondary);position:relative}span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;right:var(--7px)}.search-button[_ngcontent-%COMP%]{min-width:var(--60px)}.search-button[_ngcontent-%COMP%]:not(.with-ai-button){border-radius:var(--cu-radii-3)}.search-button[_ngcontent-%COMP%]:not(.with-ai-button):before{border-radius:var(--cu-radii-3)}.search-button.with-ai-button[_ngcontent-%COMP%]{border-top-left-radius:var(--cu-radii-3);border-bottom-left-radius:var(--cu-radii-3);justify-content:flex-start;padding-left:var(--8px)}.search-button.with-ai-button[_ngcontent-%COMP%]:before{border-top-left-radius:var(--cu-radii-3);border-bottom-left-radius:var(--cu-radii-3)}.separator[_ngcontent-%COMP%]{width:1px;background-color:var(--cu-background-on-dark-pressed)}.ai-button[_ngcontent-%COMP%]{flex:1;padding:6px 8px;font-size:var(--cu-font-size-6);color:var(--cu-content-on-dark-secondary);border-top-right-radius:var(--cu-radii-3);border-bottom-right-radius:var(--cu-radii-3)}.ai-button[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;border-top-right-radius:var(--cu-radii-3);border-bottom-right-radius:var(--cu-radii-3)}.ai-button[_ngcontent-%COMP%]   .ai-button__icon[_ngcontent-%COMP%]{font-size:var(--16px);margin-right:var(--4px)}.ai-button[_ngcontent-%COMP%]   .ai-button__icon-staticpetals[_ngcontent-%COMP%]{width:var(--16px);height:var(--16px)}.ai-button[_ngcontent-%COMP%]   .ai-button__icon-default[_ngcontent-%COMP%]{display:none}.ai-button[disabled][_ngcontent-%COMP%]{cursor:not-allowed}.ai-button[_ngcontent-%COMP%]:hover:not([disabled]){color:var(--cu-content-on-dark)}.ai-button[_ngcontent-%COMP%]:hover:not([disabled])   .ai-button__icon-default[_ngcontent-%COMP%]{display:inline-flex}.ai-button[_ngcontent-%COMP%]:hover:not([disabled])   .ai-button__icon-primary[_ngcontent-%COMP%]{display:none}.search-button.v3_9[_ngcontent-%COMP%]{background-color:var(--cu-background-main);border-color:var(--cu-global-actions-bar-button-border);border-radius:var(--cu-radii-4);justify-content:flex-start;padding:0 8px}.search-button.v3_9.with-ai-button[_ngcontent-%COMP%]{border-radius:var(--cu-radii-4) 0 0 var(--cu-radii-4);border-right:0}.search-button.v3_9[_ngcontent-%COMP%]:before{background-color:transparent}.search-button.v3_9[_ngcontent-%COMP%]:hover{background-color:var(--cu-background-main-hover-strong)}.search-button.v3_9[_ngcontent-%COMP%]:active{background-color:var(--cu-background-main-pressed)}.search-button.v3_9[_ngcontent-%COMP%]:focus-visible{border:var(--cu-border-size-1) solid var(--cu-border-primary);box-shadow:0 0 0 4px var(--cu-effect-primary);outline:transparent;z-index:1}.search-button.v3_9[_ngcontent-%COMP%]   .leading-icon[_ngcontent-%COMP%], .search-button.v3_9[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--cu-content-tertiary)}.ai-button.v3_9[_ngcontent-%COMP%]{padding:0 var(--8px);background-color:var(--cu-background-main);border-color:var(--cu-global-actions-bar-button-border);border-left:0;color:var(--cu-content-on-dark-secondary);border-radius:0 var(--cu-radii-4) var(--cu-radii-4) 0}.ai-button.v3_9[_ngcontent-%COMP%]:hover:not([disabled]){background-color:var(--cu-background-main-hover-strong)}.ai-button.v3_9[_ngcontent-%COMP%]:active:not([disabled]){background-color:var(--cu-background-main-pressed)}.ai-button.v3_9[_ngcontent-%COMP%]:focus-visible{border:var(--cu-border-size-1) solid var(--cu-border-primary);box-shadow:0 0 0 4px var(--cu-effect-primary);outline:transparent}.ai-button.v3_9[_ngcontent-%COMP%]:before{background-color:transparent}.ai-button.v3_9[_ngcontent-%COMP%]   .ai-button__icon-default[_ngcontent-%COMP%]{display:inline-flex;margin-right:0}.v4-wrapper[_ngcontent-%COMP%]{width:100%;border-radius:var(--cu-radii-round)}.ai-fade-v4[_ngcontent-%COMP%]{--fade-color: var(--cu-global-actions-bar-v4-search-background);position:absolute;z-index:1;inset:2px 2px 2px auto;width:100px;background-image:linear-gradient(to left,var(--fade-color) 80%,transparent);border-radius:0 var(--cu-radii-round) var(--cu-radii-round) 0;pointer-events:none;-webkit-user-select:none;user-select:none;opacity:0}@media (prefers-reduced-motion: no-preference){.ai-fade-v4[_ngcontent-%COMP%]{transition:opacity var(--search-modal-toggle-v4-transition),background-image var(--search-modal-toggle-v4-transition)}}.v4-wrapper[_ngcontent-%COMP%]:hover:has(.search-button.v4:not(:focus-visible))   .ai-fade-v4[_ngcontent-%COMP%], .v4-wrapper[_ngcontent-%COMP%]:has(.ai-button.v3_9.v4:hover)   .ai-fade-v4[_ngcontent-%COMP%], .v4-wrapper[_ngcontent-%COMP%]:has(.ai-button.v3_9.v4:focus-visible)   .ai-fade-v4[_ngcontent-%COMP%]{--fade-color: var(--cu-global-actions-bar-v4-search-background-hover);opacity:1}.ai-button.v3_9.v4[_ngcontent-%COMP%]{position:absolute;z-index:2;inset:4px 4px 4px auto;height:auto;width:max-content;border:var(--cu-border-size-1) solid transparent;gap:4px;padding:0 4px 0 8px;flex-direction:row-reverse;background-color:transparent;border-radius:var(--cu-radii-round)}@media (prefers-reduced-motion: no-preference){.ai-button.v3_9.v4[_ngcontent-%COMP%]{transition:background-color var(--search-modal-toggle-v4-transition),border-color var(--search-modal-toggle-v4-transition)}.ai-button.v3_9.v4[_ngcontent-%COMP%]   .ai-button__label[_ngcontent-%COMP%]{transition:opacity var(--search-modal-toggle-v4-transition),visibility var(--search-modal-toggle-v4-transition)}}.ai-button.v3_9.v4[_ngcontent-%COMP%]   .ai-button__label[_ngcontent-%COMP%]{font-weight:var(--cu-font-weight-medium);color:var(--cu-content-secondary);visibility:hidden;opacity:0}.ai-button.v3_9.v4[_ngcontent-%COMP%]   .ai-button__icon[_ngcontent-%COMP%]{margin:0}.ai-button.v3_9.v4[_ngcontent-%COMP%]   .ai-button__icon[_ngcontent-%COMP%]     lottie-player{position:unset}.ai-button.v3_9.v4[_ngcontent-%COMP%]:focus-visible{border-color:var(--cu-border-primary)}.ai-button.v3_9.v4[_ngcontent-%COMP%]:hover   .ai-button__label[_ngcontent-%COMP%], .ai-button.v3_9.v4[_ngcontent-%COMP%]:focus-visible   .ai-button__label[_ngcontent-%COMP%], .ai-button.v3_9.v4[_ngcontent-%COMP%]:active   .ai-button__label[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]:hover:not(:focus-visible) + .ai-button.v3_9.v4[_ngcontent-%COMP%]   .ai-button__label[_ngcontent-%COMP%]{opacity:1;visibility:visible}.search-button.v4[_ngcontent-%COMP%]:hover:not(:focus-visible) + .ai-button.v3_9.v4[_ngcontent-%COMP%]{background-color:var(--cu-background-on-main)}.ai-button.v3_9.v4[_ngcontent-%COMP%]:hover, .ai-button.v3_9.v4[_ngcontent-%COMP%]:focus-visible{background-color:var(--cu-background-on-main-hover)}.ai-button.v3_9.v4[_ngcontent-%COMP%]:active{background-color:var(--cu-background-on-main-pressed)}.search-button.v4[_ngcontent-%COMP%]{padding:0 7px;gap:4px;border-radius:var(--cu-radii-round);background-color:var(--cu-global-actions-bar-v4-search-background);border-color:transparent;box-shadow:var(--cu-elevation-border-1)}.search-button.v4.with-ai-button-v4[_ngcontent-%COMP%]{padding-right:32px}@media (prefers-reduced-motion: no-preference){.search-button.v4[_ngcontent-%COMP%]{transition:box-shadow var(--search-modal-toggle-v4-transition)}}.search-button.v4[_ngcontent-%COMP%]   .leading-icon[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{color:var(--cu-global-actions-bar-v4-search-color)}@media (prefers-reduced-motion: no-preference){.search-button.v4[_ngcontent-%COMP%]   .leading-icon[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{transition:color var(--search-modal-toggle-v4-transition)}}.search-button.v4[_ngcontent-%COMP%]   .leading-icon[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]   .hotkey[_ngcontent-%COMP%]{margin:revert;font-weight:var(--cu-font-weight-medium)}.search-button.v4[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{text-align:left}.search-button.v4[_ngcontent-%COMP%]   .hotkey[_ngcontent-%COMP%]{font-size:var(--cu-size-3);color:var(--cu-content-disabled)}.search-button.v4[_ngcontent-%COMP%]:hover, .search-button.v4[_ngcontent-%COMP%]:focus-visible, .search-button.v4[_ngcontent-%COMP%]:active{background-color:var(--cu-global-actions-bar-v4-search-background-hover);box-shadow:var(--cu-elevation-border-2)}.search-button.v4[_ngcontent-%COMP%]:hover   .leading-icon[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]:hover   .placeholder[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]:focus-visible   .leading-icon[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]:focus-visible   .placeholder[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]:active   .leading-icon[_ngcontent-%COMP%], .search-button.v4[_ngcontent-%COMP%]:active   .placeholder[_ngcontent-%COMP%]{color:var(--cu-global-actions-bar-v4-search-color-hover)}@container cu-search-modal-toggle (max-width: 159px){.ai-button.v3_9.v4[_ngcontent-%COMP%]{padding:0 4px}}@container cu-search-modal-toggle (max-width: 119px){.ai-fade-v4[_ngcontent-%COMP%]{width:40px}.ai-button.v3_9.v4[_ngcontent-%COMP%]   .ai-button__label[_ngcontent-%COMP%]{display:none}}`],changeDetection:0});}}return t$21;})();VN();fpe=t$21=>[t$21],hpe=t$21=>({billingEntry:t$21}),fJ=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.segmentService=r$34,this.teamId$=this.store.select(o$30),this.encodedOpenBillingPageVia=encodeURIComponent(ge$7.TopNav);}clickUpgrade(){this.segmentService.track(Bu.ClickUpgrade,{via:n$8.TopNav,menuItem:e$2.Upgrade});}static{this.fac=function(r$34){return new(r$34||t$21)(br(q$19),br(_b$1));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-upgrade-toggle`]],decls:5,vars:8,consts:()=>{let e$19;return e$19="Upgrade",[e$19,[3,`cuPress`,`routerLink`,`queryParams`],[`name`,`clickupAdd`]];},template:function(r$34,o$32){r$34&1&&(Kc$3(0,`a`,1),YT(1,`async`),Fg(`cuPress`,function(){return o$32.clickUpgrade();}),fg$1(2,`cu3-icon`,2),Kc$3(3,`span`),FC(4,0),Jc$1()()),r$34&2&&dg(`routerLink`,BT(4,fpe,JT(1,2,o$32.teamId$)+`/settings/billing`))(`queryParams`,BT(6,hpe,o$32.encodedOpenBillingPageVia));},dependencies:[Pt$3,et$2,I$14,K$12,qn],styles:[`a[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;height:var(--cu-size-7);border-radius:var(--cu-radii-3);padding:0 10px 0 8px;margin-right:4px;border:none;overflow:hidden;color:var(--cu-content-on-dark);column-gap:4px;-webkit-backface-visibility:hidden;-webkit-transform:translate3d(0,0,0)}a[_ngcontent-%COMP%]:hover:before, a[_ngcontent-%COMP%]:focus:before{width:1000%;height:1000%}a[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;width:400%;height:400%;left:0;background:linear-gradient(-45deg,#ffc800,#ff02f0,#8930fd,#49ccf9);background-size:100% 100%;z-index:0;pointer-events:none}@media screen and (prefers-reduced-motion: no-preference){a[_ngcontent-%COMP%]:before{animation:upgrade-toggle-gradient 30s ease 2}@keyframes upgrade-toggle-gradient{50%{transform:translate(-75%)}}}cu3-icon[_ngcontent-%COMP%]{font-size:var(--cu-size-4);position:relative}span[_ngcontent-%COMP%]{font-size:var(--cu-label-small-font-size);font-weight:var(--cu-label-weight-medium);line-height:var(--cu-label-small-line-height);position:relative}`],changeDetection:0});}}return t$21;})();VN();VN();hJ$1=(()=>{class t$21{constructor(){this.isLayoutV4=OA(!1),this.isLayoutV4ia=OA(!1),this.isLayoutV39=OA(!1),this.store=C$23(q$19),this.user=this.store.selectSignal(b$17);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-user-main-settings-placeholder`]],hostVars:4,hostBindings:function(r$34,o$32){r$34&2&&Gg(`v4`,o$32.isLayoutV4())(`v3_9`,o$32.isLayoutV39());},inputs:{isLayoutV4:[1,`isLayoutV4`],isLayoutV4ia:[1,`isLayoutV4ia`],isLayoutV39:[1,`isLayoutV39`]},decls:1,vars:1,consts:[[3,`avatar`,`size`,`online`]],template:function(r$34,o$32){if(r$34&1&&HD(0,gpe,2,5,`cu-online-avatar`,0),r$34&2){let s$25;BD((s$25=o$32.user())?0:-1,s$25);}},dependencies:[U$1,ta$1],styles:[`[_nghost-%COMP%]{min-width:var(--44px);margin-left:var(--6px);padding:2px}.v4[_nghost-%COMP%]{margin-left:var(--2px)}.v3_9[_nghost-%COMP%]{margin-left:var(--8px)}`],changeDetection:0});}}return t$21;})();VN();VN();ype=()=>({originX:`start`,originY:`bottom`,overlayX:`start`,overlayY:`top`,offsetY:5}),vpe=t$21=>[t$21];gJ=(()=>{class t$21{constructor(e$19){this.store=e$19,this.segmentService=C$23(_b$1),this.team$=this.store.select(de$10).pipe(R$20());}pickerMenuOpen(){this.segmentService.track(Bu.ClickWorkspaceSwitcher,{action:`open`});}static{this.fac=function(r$34){return new(r$34||t$21)(br(q$19));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-workspace-picker-toggle`]],decls:2,vars:3,consts:[[`workspacePicker`,``],[`data-test`,`workspace-picker-toggle__button`,1,`toggle`,3,`menuOpened`,`cu3MenuTriggerFor`,`menuPosition`],[3,`avatar`,`size`],[1,`name`],[1,`chevron`,3,`name`]],template:function(r$34,o$32){if(r$34&1&&(HD(0,bpe,8,11),YT(1,`async`)),r$34&2){let s$25;BD((s$25=JT(1,1,o$32.team$))?0:-1,s$25);}},dependencies:[Aa$1,V$8,T$17,I$14,K$12,Vo,Pt,B$6,Ca,qn],styles:[`.toggle[_ngcontent-%COMP%]{min-width:52px;height:var(--28px);gap:6px;padding-inline:6px;border-radius:var(--cu-radii-3);display:inline-flex;align-items:center;border:1px solid transparent;background-color:var(--cu-global-actions-bar-v4-button-subtle-background)}.toggle.menu-open[_ngcontent-%COMP%], .toggle[_ngcontent-%COMP%]:hover, .toggle[_ngcontent-%COMP%]:focus-visible{background-color:var(--cu-global-actions-bar-v4-button-subtle-background-hover)}.toggle[_ngcontent-%COMP%]:focus-visible{border:var(--cu-border-size-1) solid var(--cu-border-primary-focus);box-shadow:0 0 0 4px var(--cu-effect-primary)}.toggle[_ngcontent-%COMP%]:active{background-color:var(--cu-global-actions-bar-v4-button-background-active)}html.todesktop-platform-darwin[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%], html.todesktop-platform-darwin   [_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{-webkit-app-region:no-drag}.name[_ngcontent-%COMP%]{font-size:var(--cu-label-small-font-size);line-height:var(--cu-label-small-line-height);font-weight:var(--cu-font-weight-semibold);color:var(--cu-content-default);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:4px}.v4[_nghost-%COMP%]   .name[_ngcontent-%COMP%], .v4   [_nghost-%COMP%]   .name[_ngcontent-%COMP%]{margin-left:0}@media screen and (width <= 650px){.name[_ngcontent-%COMP%]{display:none}}.chevron[_ngcontent-%COMP%]{font-size:var(--14px);color:var(--cu-content-tertiary)}@media (prefers-reduced-motion: no-preference){.chevron[_ngcontent-%COMP%]{transition:rotate .2s cubic-bezier(.785,.135,.15,.86) 0s}}.menu-open[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{rotate:-180deg}`],changeDetection:0});}}return t$21;})();VN();dm();VN();Hb=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30){this.sidebarLayoutService=e$19,this.store=r$34,this.splitService=o$32,this.locationControlService=s$25,this.contentAssistantFeaturesService=n$46,this.globalHotkeyFeatureFlagService=a$30,this.isLayoutV39$=oe$3().pipe(ws$2(!1)),this.isLayoutV4$=n$35().pipe(ws$2(!1)),this.layoutV4Service=C$23(ge$6),this.isLayoutV4ia$=this.layoutV4Service.isLayoutV4ia().pipe(ws$2(!1)),this.isSidebarCollapsed$=this.sidebarLayoutService.isSidebarCollapsed$.pipe(ws$2(!1)),this.isChordedKeysEnabled$=this.globalHotkeyFeatureFlagService.isChordedGlobalHotkeysFeatureEnabled$,this.team$=this.store.select(de$10),this.showUpgradeButton$=this.team$.pipe(As$3(this.store.select(p$22)),q$20(([c$37,m$32])=>{let{role:l$26}=c$37;return(l$26===N$16.OWNER||l$26===N$16.ADMIN)&&m$32;})),this.showDesktopNavigation$=n$45()&&!d$23()?this.splitService.isTreatmentOn({name:O$16.ShowDesktopNavigationButtons}):qe$6(!1),this.viewModel$=$i({isLayoutV39:this.isLayoutV39$,isLayoutV4:this.isLayoutV4$,isLayoutV4ia:this.isLayoutV4ia$,isSidebarCollapsed:this.isSidebarCollapsed$,showWhoAmI:qe$6(s$23().get(`devtools.cuWhoAmI`)??!1),showUpgradeButton:this.showUpgradeButton$,showLogo:this.team$.pipe(ls$2(`branding`),q$20(c$37=>!c$37?.branding?.enabled)),showDesktopNavigation:this.showDesktopNavigation$,isAiEnabled:this.contentAssistantFeaturesService.isClickAppOn$,isChordedKeysEnabled:this.isChordedKeysEnabled$});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(st),ge$10(q$19),ge$10(Qn),ge$10(Te$2),ge$10(Ti$2),ge$10(F$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();Ee$4();vJ=F$23(he$4()),kpe=`placeholder-topbar-extra-data`;VN();t0$1=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.appPlaceholderService=C$23(S$11),this.destroyRef=C$23(at$11);}syncTopbarExtraData(){this.appPlaceholderService.onIdle().pipe(le$5(()=>$i({user:this.store.select(b$17),team:this.store.select(de$10)})),fs$1(100,m$28),q$20(({user:e$19,team:r$34})=>SJ$1(e$19??null,r$34)),F$22(this.destroyRef)).subscribe();}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();Ee$4();Ipe=`placeholder-topbar-icons`;VN();r0=(()=>{class t$21{constructor(){this.quickAppService=C$23(io),this.appPlaceholderService=C$23(S$11),this.destroyRef=C$23(at$11);}syncTopbarIcons(){this.appPlaceholderService.onIdle().pipe(le$5(()=>this.quickAppService.pinnedApps$),fs$1(100,m$28),le$5(e$19=>j$23(bJ(e$19))),F$22(this.destroyRef)).subscribe();}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();Ape=()=>[import(`./calendar-global-action-bar.component-87b5a240ba.js`).then(t$21=>t$21.CalendarGlobalActionBarComponent)],wpe=()=>[import(`./user-main-settings-menu.component-4e3d816729.js`).then(t$21=>t$21.UserMainSettingsMenuComponent)];r$12(`global_actions_bar`,`load`);CJ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.destroyRef=e$19,this.facade=r$34,this.sidebarAnalyticsService=o$32,this.store=s$25,this.clickedHome=new He$4(),this.homeLogoVia=`home logo`,this.topbarIconsPersistService=C$23(r0),this.topbarExtraDataPersistService=C$23(t0$1),this.appPlaceholderService=C$23(S$11),this.idle$=this.appPlaceholderService.onIdle().pipe(q$20(()=>!0)),this.viewModel$=this.facade.viewModel$,r$12(`global_actions_bar`,`construct`);}ngOnInit(){r$12(`global_actions_bar`,`init`),this.topbarIconsPersistService.syncTopbarIcons(),this.topbarExtraDataPersistService.syncTopbarExtraData(),this.facade.viewModel$.pipe(q$20(e$19=>({isLayoutV4:e$19.isLayoutV4,isLayoutV4ia:e$19.isLayoutV4ia})),zt$2(),F$22(this.destroyRef)).subscribe(({isLayoutV4:e$19,isLayoutV4ia:r$34})=>{let o$32=e$19&&!r$34?`var(--44px)`:`var(--40px)`;document.body.style.setProperty(`--cu-global-actions-bar-height`,o$32);});}ngAfterViewInit(){r$12(`global_actions_bar`,`after_view_init`);}clickedOnHomeLogo(){this.trackHomeLogoClick(),this.clickedHome.emit();}trackHomeLogoClick(){this.setCanvasViaProperty(this.homeLogoVia),this.sidebarAnalyticsService.trackSidebarNavMenuEvents(s$6.homeLogo);}setCanvasViaProperty(e$19){this.store.dispatch(n$29({trackVia:{via:e$19}}));}static{this.fac=function(r$34){return new(r$34||t$21)(br(at$11),br(Hb),br(A$4),br(q$19));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-global-actions-bar`]],outputs:{clickedHome:`clickedHome`},features:[VT([Hb,io,r0,t0$1])],decls:2,vars:3,consts:[[`desktopNavigation`,``],[1,`global-actions-bar`,3,`sidebar-collapsed`,`v3_9`,`v4`,`v4_ia`],[1,`global-actions-bar`],[1,`row`],[1,`left-part`],[1,`brand-logo`,3,`isLayoutV39`],[3,`ngTemplateOutlet`],[`id`,`cu-global-action-bar-left-portal`,1,`left-portal`],[3,`isLayoutV4`],[`data-test`,`global-actions-bar__search-modal-toggle`,1,`search-modal-toggle`,3,`cuPendoId`,`isLayoutV39`,`isLayoutV4`],[3,`isLayoutV39`],[1,`right-part`],[1,`separator`],[1,`overflow-items`],[1,`brand-logo`,3,`cuPress`,`isLayoutV39`],[1,`pinned-items`,3,`isLayoutV39`,`isLayoutV4`],[3,`isLayoutV39`,`isLayoutV4`],[3,`isLayoutV39`,`isLayoutV4`,`isLayoutV4ia`]],template:function(r$34,o$32){if(r$34&1&&(HD(0,qpe,28,26,`div`,1),YT(1,`async`)),r$34&2){let s$25;BD((s$25=JT(1,1,o$32.viewModel$))?0:-1,s$25);}},dependencies:[ZQ,et$2,gJ,Yn,le,QQ,Nb,uJ,u$13,lJ,fJ,Pb,sJ,Bb,XQ,eJ,hJ$1,qn],styles:[`body{--cu-global-actions-bar-height: var(--40px)}.global-actions-bar[_ngcontent-%COMP%]{display:flex;align-items:center;height:var(--cu-global-actions-bar-height, 0);flex:0 0 var(--cu-global-actions-bar-height);padding-inline:var(--8px);background-color:var(--cu-global-actions-bar-background)}body.save-as-pdf[_nghost-%COMP%]   .global-actions-bar[_ngcontent-%COMP%], body.save-as-pdf   [_nghost-%COMP%]   .global-actions-bar[_ngcontent-%COMP%]{display:none}body.save-as-pdf[_nghost-%COMP%]   .global-actions-bar[_ngcontent-%COMP%]   .cu-hidden-print[_ngcontent-%COMP%], body.save-as-pdf   [_nghost-%COMP%]   .global-actions-bar[_ngcontent-%COMP%]   .cu-hidden-print[_ngcontent-%COMP%]{display:none}.row[_ngcontent-%COMP%]{display:flex;align-items:center;height:var(--32px);flex-grow:1}.left-part[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:6px;flex:1;height:100%;min-width:0}html.todesktop-platform-darwin:not(.cu-desktop-fullscreen)[_nghost-%COMP%]   .left-part[_ngcontent-%COMP%], html.todesktop-platform-darwin:not(.cu-desktop-fullscreen)   [_nghost-%COMP%]   .left-part[_ngcontent-%COMP%]{padding-left:73px}html.todesktop-platform-darwin[_nghost-%COMP%]   .left-part[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], html.todesktop-platform-darwin   [_nghost-%COMP%]   .left-part[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-app-region:no-drag}.left-part[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{block-size:16px;margin-inline:6px;block-size:100%;background-color:var(--cu-global-actions-bar-v4-divider-color)}.brand-logo[_ngcontent-%COMP%]{margin-left:var(--8px);margin-right:var(--8px)}html.todesktop-platform-darwin[_nghost-%COMP%]   .search-modal-toggle[_ngcontent-%COMP%], html.todesktop-platform-darwin   [_nghost-%COMP%]   .search-modal-toggle[_ngcontent-%COMP%]{-webkit-app-region:no-drag}.right-part[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;margin-left:auto;padding-left:var(--12px);flex:1}html.todesktop-platform-darwin[_nghost-%COMP%]   .right-part[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], html.todesktop-platform-darwin   [_nghost-%COMP%]   .right-part[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-app-region:no-drag}.row   html.todesktop-platform-darwin[_nghost-%COMP%]   .row[_ngcontent-%COMP%], html.todesktop-platform-darwin   [_nghost-%COMP%]   .row[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%], .left-part   html.todesktop-platform-darwin[_nghost-%COMP%]   .row[_ngcontent-%COMP%], html.todesktop-platform-darwin   [_nghost-%COMP%]   .row[_ngcontent-%COMP%], .left-part[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%], .left-part[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%], .right-part   html.todesktop-platform-darwin[_nghost-%COMP%]   .row[_ngcontent-%COMP%], html.todesktop-platform-darwin   [_nghost-%COMP%]   .row[_ngcontent-%COMP%], .right-part[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%], .right-part[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%]{-webkit-app-region:drag}.separator[_ngcontent-%COMP%]{width:1px;height:16px;margin:0 4px;background-color:var(--cu-background-on-dark-pressed)}.separator[_ngcontent-%COMP%]:before{height:0}.left-portal[_ngcontent-%COMP%]{min-width:0;height:100%;display:flex;justify-content:flex-end;align-items:center;gap:4px}.global-actions-bar.v3_9[_ngcontent-%COMP%]{background:transparent}.global-actions-bar.v3_9[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]{padding-right:var(--4px)}.global-actions-bar.v3_9[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-width:var(--22px);min-height:var(--22px);margin-left:var(--7px);padding:0;border-radius:50%;background-color:var(--cu-background-main)}.global-actions-bar.v3_9.sidebar-collapsed[_ngcontent-%COMP%]   .brand-logo[_ngcontent-%COMP%]{margin-left:var(--19px)}.global-actions-bar.v3_9[_ngcontent-%COMP%]   .search-modal-toggle[_ngcontent-%COMP%]{width:20%}.global-actions-bar.v4[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{min-width:0}html.todesktop-platform-darwin[_nghost-%COMP%]   .global-actions-bar.v4[_ngcontent-%COMP%]   .pinned-items[_ngcontent-%COMP%], html.todesktop-platform-darwin   [_nghost-%COMP%]   .global-actions-bar.v4[_ngcontent-%COMP%]   .pinned-items[_ngcontent-%COMP%]{-webkit-app-region:drag}.global-actions-bar.v4[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:visible;padding-left:4px}@media screen and (width <= 1200px){.global-actions-bar.v4[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%]{flex:1 1 auto}}.global-actions-bar.v4[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]{flex:1}html.todesktop-platform-darwin:not(.cu-desktop-fullscreen)[_nghost-%COMP%]   .global-actions-bar.v4[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%], html.todesktop-platform-darwin:not(.cu-desktop-fullscreen)   [_nghost-%COMP%]   .global-actions-bar.v4[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]{padding-left:75px}@media screen and (width <= 1200px){.global-actions-bar.v4[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]{flex:1 0 auto}}.global-actions-bar.v4[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{width:1px;height:16px;margin:0 8px;background-color:var(--cu-global-actions-bar-v4-divider-color)}.global-actions-bar.v4[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]:before{height:0}.global-actions-bar.v4[_ngcontent-%COMP%]   .search-modal-toggle[_ngcontent-%COMP%]{flex:0 1 20%;min-width:11rem;max-width:22.5rem}@media screen and (width <= 680px){.global-actions-bar.v4[_ngcontent-%COMP%]   .search-modal-toggle[_ngcontent-%COMP%]{width:initial}}.global-actions-bar.v4_ia[_ngcontent-%COMP%]{padding-inline:6px}`],changeDetection:0});}}return t$21;})();dm();Ee$4();VN();VN();dm();VN();_J=(()=>{class t$21{constructor(e$19){this.logger=e$19,e$19.setNamespace(`platform`);}logMessage(e$19){this.logger.log(`OVM Persist: ${e$19}`);}logCleaned(e$19){e$19.length>0&&(this.logMessage(`Cleaned ${e$19.length} items`),Ni$1.addAction(`ovmPersist`,{cleanedItems:e$19.length}));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(l$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Cr$4=typeof globalThis<`u`?globalThis:typeof self<`u`?self:typeof window<`u`?window:global,vi$1=Object.keys,oo$3=Array.isArray;typeof Promise>`u`||Cr$4.Promise||(Cr$4.Promise=Promise);jf=Object.getPrototypeOf,Kpe={}.hasOwnProperty;OJ$1=Object.defineProperty;Qpe=Object.getOwnPropertyDescriptor;Jpe=[].slice;Ype=[].concat;NJ=`Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey`.split(`,`).concat(DJ([8,16,32,64].map(t$21=>[`Int`,`Uint`,`Float`].map(i$27=>i$27+t$21+`Array`)))).filter(t$21=>Cr$4[t$21]),Xpe=NJ.map(t$21=>Cr$4[t$21]);jJ(NJ,t$21=>[t$21,!0]);Hc=null;({toString:Zpe}={});l0$1=typeof Symbol<`u`?Symbol.iterator:`@@iterator`,eue=typeof l0$1==`symbol`?function(t$21){var i$27;return t$21!=null&&(i$27=t$21[l0$1])&&i$27.apply(t$21);}:function(){return null;},Fp={};D0=typeof Symbol<`u`?t$21=>t$21[Symbol.toStringTag]===`AsyncFunction`:()=>!1,ta$2=typeof location<`u`&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);VJ=()=>!0,tue=!new Error(``).stack;UJ=[`Unknown`,`Constraint`,`Data`,`TransactionInactive`,`ReadOnly`,`Version`,`NotFound`,`InvalidState`,`InvalidAccess`,`Abort`,`Timeout`,`QuotaExceeded`,`Syntax`,`DataClone`],N0=[`Modify`,`Bulk`,`OpenFailed`,`VersionChange`,`Schema`,`Upgrade`,`InvalidTable`,`MissingAPI`,`NoSuchDatabase`,`InvalidArgument`,`SubTransaction`,`Unsupported`,`Internal`,`DatabaseClosed`,`PrematureCommit`,`ForeignAwait`].concat(UJ),rue={VersionChanged:`Database version changed by other database connection`,DatabaseClosed:`Database has been closed`,Abort:`Transaction aborted`,TransactionInactive:`Transaction has already completed or failed`,MissingAPI:`IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb`};xp(Op).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+`: `+this.message+d0(this._e,2));}},toString:function(){return this.name+`: `+this.message;}}),xp(aC).from(Op),xp(Ff).from(Op);B0=N0.reduce((t$21,i$27)=>(t$21[i$27]=i$27+`Error`,t$21),{}),iue=Op,ut$2=N0.reduce((t$21,i$27)=>{var e$19=i$27+`Error`;function r$34(o$32,s$25){this._e=yl(),this.name=e$19,o$32?typeof o$32==`string`?(this.message=`${o$32}${s$25?`
 `+s$25:``}`,this.inner=s$25||null):typeof o$32==`object`&&(this.message=`${o$32.name} ${o$32.message}`,this.inner=o$32):(this.message=rue[i$27]||e$19,this.inner=null);}return xp(r$34).from(iue),t$21[i$27]=r$34,t$21;},{});ut$2.Syntax=SyntaxError,ut$2.Type=TypeError,ut$2.Range=RangeError;kJ$1=UJ.reduce((t$21,i$27)=>(t$21[i$27+`Error`]=ut$2[i$27],t$21),{}),Zb=N0.reduce((t$21,i$27)=>([`Syntax`,`Type`,`Range`].indexOf(i$27)===-1&&(t$21[i$27+`Error`]=ut$2[i$27]),t$21),{});Zb.ModifyError=aC,Zb.DexieError=Op,Zb.BulkError=Ff;Df={},[p0,cC,u0]=typeof Promise>`u`?[]:(()=>{let t$21=Promise.resolve();if(typeof crypto>`u`||!crypto.subtle)return[t$21,jf(t$21),t$21];let i$27=crypto.subtle.digest(`SHA-512`,new Uint8Array([0]));return[i$27,jf(i$27),t$21];})(),HJ=cC&&cC.then,eC=p0&&p0.constructor,U0=!!u0,f0=!1,mue=u0?()=>{u0.then(zb);}:Cr$4.setImmediate?setImmediate.bind(null,zb):Cr$4.MutationObserver?()=>{var t$21=document.createElement(`div`);new MutationObserver(()=>{zb(),t$21=null;}).observe(t$21,{attributes:!0}),t$21.setAttribute(`i`,`1`);}:()=>{setTimeout(zb,0);},xf$1=function(t$21,i$27){Rf.push([t$21,i$27]),mC&&(mue(),mC=!1);},h0=!0,mC=!0,ul$1=[],tC=[],g0=null,y0=Lf,Pp={id:`global`,global:!0,ref:0,unhandleds:[],onunhandled:IJ,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t$21=>{try{IJ(t$21[0],t$21[1]);}catch{}});}},rt$5=Pp,Rf=[],fl=0,rC=[];v0={get:function(){var t$21=rt$5,i$27=lC;function e$19(r$34,o$32){var s$25=!t$21.global&&(t$21!==rt$5||i$27!==lC);let n$46=s$25&&!La();var a$30=new Be$9((c$37,m$32)=>{W0(this,new GJ(dC(r$34,t$21,s$25,n$46),dC(o$32,t$21,s$25,n$46),c$37,m$32,t$21));});return ta$2&&QJ(a$30,this),a$30;}return e$19.prototype=Df,e$19;},set:function(t$21){$a$2(this,`then`,t$21&&t$21.prototype===Df?v0:{get:function(){return t$21;},set:v0.set});}};$p$1(Be$9.prototype,{then:v0,_then:function(t$21,i$27){W0(this,new GJ(null,null,t$21,i$27,rt$5));},catch:function(t$21){if(arguments.length===1)return this.then(null,t$21);var i$27=arguments[0],e$19=arguments[1];return typeof i$27==`function`?this.then(null,r$34=>r$34 instanceof i$27?e$19(r$34):qb(r$34)):this.then(null,r$34=>r$34&&r$34.name===i$27?e$19(r$34):qb(r$34));},finally:function(t$21){return this.then(i$27=>(t$21(),i$27),i$27=>(t$21(),qb(i$27)));},stack:{get:function(){if(this._stack)return this._stack;try{f0=!0;var t$21=KJ$1(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t$21),t$21;}finally{f0=!1;}}},timeout:function(t$21,i$27){return t$21<Infinity?new Be$9((e$19,r$34)=>{var o$32=setTimeout(()=>r$34(new ut$2.Timeout(i$27)),t$21);this.then(e$19,r$34).finally(clearTimeout.bind(null,o$32));}):this;}}),typeof Symbol<`u`&&Symbol.toStringTag&&$a$2(Be$9.prototype,Symbol.toStringTag,`Dexie.Promise`),Pp.env=JJ(),$p$1(Be$9,{all:function(){var t$21=Oa.apply(null,arguments).map(Kb);return new Be$9(function(i$27,e$19){t$21.length===0&&i$27([]);var r$34=t$21.length;t$21.forEach((o$32,s$25)=>Be$9.resolve(o$32).then(n$46=>{t$21[s$25]=n$46,--r$34||i$27(t$21);},e$19));});},resolve:t$21=>{if(t$21 instanceof Be$9)return t$21;if(t$21&&typeof t$21.then==`function`)return new Be$9((e$19,r$34)=>{t$21.then(e$19,r$34);});var i$27=new Be$9(Df,!0,t$21);return QJ(i$27,g0),i$27;},reject:qb,race:function(){var t$21=Oa.apply(null,arguments).map(Kb);return new Be$9((i$27,e$19)=>{t$21.map(r$34=>Be$9.resolve(r$34).then(i$27,e$19));});},PSD:{get:()=>rt$5,set:t$21=>rt$5=t$21},totalEchoes:{get:()=>lC},newPSD:Gc,usePSD:Dp,scheduler:{get:()=>xf$1,set:t$21=>{xf$1=t$21;}},rejectionMapper:{get:()=>y0,set:t$21=>{y0=t$21;}},follow:(t$21,i$27)=>new Be$9((e$19,r$34)=>Gc((o$32,s$25)=>{var n$46=rt$5;n$46.unhandleds=[],n$46.onunhandled=s$25,n$46.finalize=hl$1(function(){(function(a$30){function c$37(){a$30(),rC.splice(rC.indexOf(c$37),1);}rC.push(c$37),++fl,xf$1(()=>{--fl==0&&H0();},[]);})(()=>{this.unhandleds.length===0?o$32():s$25(this.unhandleds[0]);});},n$46.finalize),t$21();},i$27,e$19,r$34))}),eC&&(eC.allSettled&&$a$2(Be$9,`allSettled`,function(){let t$21=Oa.apply(null,arguments).map(Kb);return new Be$9(i$27=>{t$21.length===0&&i$27([]);let e$19=t$21.length,r$34=new Array(e$19);t$21.forEach((o$32,s$25)=>Be$9.resolve(o$32).then(n$46=>r$34[s$25]={status:`fulfilled`,value:n$46},n$46=>r$34[s$25]={status:`rejected`,reason:n$46}).then(()=>--e$19||i$27(r$34)));});}),eC.any&&typeof AggregateError<`u`&&$a$2(Be$9,`any`,function(){let t$21=Oa.apply(null,arguments).map(Kb);return new Be$9((i$27,e$19)=>{t$21.length===0&&e$19(new AggregateError([]));let r$34=t$21.length,o$32=new Array(r$34);t$21.forEach((s$25,n$46)=>Be$9.resolve(s$25).then(a$30=>i$27(a$30),a$30=>{o$32[n$46]=a$30,--r$34||e$19(new AggregateError(o$32));}));});}));io$2={awaits:0,echoes:0,id:0},due=0,iC=[],i0=0,lC=0,pue=0;(``+HJ).indexOf(`[native code]`)===-1&&(Lp=La=mr$4);ki=Be$9.reject;pl=``,Fa=`Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.`,Of=[],hC=typeof navigator<`u`&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),hue=hC,gue=hC,XJ=t$21=>!/(dexie\.js|dexie\.min\.js)/.test(t$21);ZJ={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};C0=class{_trans(i$27,e$19,r$34){let o$32=this._tx||rt$5.trans,s$25=this.name;function n$46(c$37,m$32,l$26){if(!l$26.schema[s$25])throw new ut$2.NotFound(`Table `+s$25+` not part of transaction`);return e$19(l$26.idbtrans,l$26);}let a$30=Wf();try{return o$32&&o$32.db===this.db?o$32===rt$5.trans?o$32._promise(i$27,n$46,r$34):Gc(()=>o$32._promise(i$27,n$46,r$34),{trans:o$32,transless:rt$5.transless||rt$5}):b0(this.db,i$27,[this.name],n$46);}finally{a$30&&Hf();}}get(i$27,e$19){return i$27&&i$27.constructor===Object?this.where(i$27).first(e$19):this._trans(`readonly`,r$34=>this.core.get({trans:r$34,key:i$27}).then(o$32=>this.hook.reading.fire(o$32))).then(e$19);}where(i$27){if(typeof i$27==`string`)return new this.db.WhereClause(this,i$27);if(oo$3(i$27))return new this.db.WhereClause(this,`[${i$27.join(`+`)}]`);let e$19=vi$1(i$27);if(e$19.length===1)return this.where(e$19[0]).equals(i$27[e$19[0]]);let r$34=this.schema.indexes.concat(this.schema.primKey).filter(m$32=>m$32.compound&&e$19.every(l$26=>m$32.keyPath.indexOf(l$26)>=0)&&m$32.keyPath.every(l$26=>e$19.indexOf(l$26)>=0))[0];if(r$34&&this.db._maxKey!==pl)return this.where(r$34.name).equals(r$34.keyPath.map(m$32=>i$27[m$32]));!r$34&&ta$2&&console.warn(`The query ${JSON.stringify(i$27)} on ${this.name} would benefit of a compound index [${e$19.join(`+`)}]`);let{idxByName:o$32}=this.schema,s$25=this.db._deps.indexedDB;function n$46(m$32,l$26){try{return s$25.cmp(m$32,l$26)===0;}catch{return!1;}}let[a$30,c$37]=e$19.reduce(([m$32,l$26],g$19)=>{let f$33=o$32[g$19],h$15=i$27[g$19];return[m$32||f$33,m$32||!f$33?gl$1(l$26,f$33&&f$33.multi?I$25=>{let A$22=ja(I$25,g$19);return oo$3(A$22)&&A$22.some(R$21=>n$46(h$15,R$21));}:I$25=>n$46(h$15,ja(I$25,g$19))):l$26];},[null,null]);return a$30?this.where(a$30.name).equals(i$27[a$30.keyPath]).filter(c$37):r$34?this.filter(c$37):this.where(e$19).equals(``);}filter(i$27){return this.toCollection().and(i$27);}count(i$27){return this.toCollection().count(i$27);}offset(i$27){return this.toCollection().offset(i$27);}limit(i$27){return this.toCollection().limit(i$27);}each(i$27){return this.toCollection().each(i$27);}toArray(i$27){return this.toCollection().toArray(i$27);}toCollection(){return new this.db.Collection(new this.db.WhereClause(this));}orderBy(i$27){return new this.db.Collection(new this.db.WhereClause(this,oo$3(i$27)?`[${i$27.join(`+`)}]`:i$27));}reverse(){return this.toCollection().reverse();}mapToClass(i$27){this.schema.mappedClass=i$27;let e$19=r$34=>{if(!r$34)return r$34;let o$32=Object.create(i$27.prototype);for(var s$25 in r$34)if(Xo$3(r$34,s$25))try{o$32[s$25]=r$34[s$25];}catch{}return o$32;};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=e$19,this.hook(`reading`,e$19),i$27;}defineClass(){return this.mapToClass(function(i$27){_o$1(this,i$27);});}add(i$27,e$19){let{auto:r$34,keyPath:o$32}=this.schema.primKey,s$25=i$27;return o$32&&r$34&&(s$25=Qb(o$32)(i$27)),this._trans(`readwrite`,n$46=>this.core.mutate({trans:n$46,type:`add`,keys:e$19!=null?[e$19]:null,values:[s$25]})).then(n$46=>n$46.numFailures?Be$9.reject(n$46.failures[0]):n$46.lastResult).then(n$46=>{if(o$32)try{pn(i$27,o$32,n$46);}catch{}return n$46;});}update(i$27,e$19){if(typeof i$27!=`object`||oo$3(i$27))return this.where(`:id`).equals(i$27).modify(e$19);{let r$34=ja(i$27,this.schema.primKey.keyPath);if(r$34===void 0)return ki(new ut$2.InvalidArgument(`Given object does not contain its primary key`));try{typeof e$19!=`function`?vi$1(e$19).forEach(o$32=>{pn(i$27,o$32,e$19[o$32]);}):e$19(i$27,{value:i$27,primKey:r$34});}catch{}return this.where(`:id`).equals(r$34).modify(e$19);}}put(i$27,e$19){let{auto:r$34,keyPath:o$32}=this.schema.primKey,s$25=i$27;return o$32&&r$34&&(s$25=Qb(o$32)(i$27)),this._trans(`readwrite`,n$46=>this.core.mutate({trans:n$46,type:`put`,values:[s$25],keys:e$19!=null?[e$19]:null})).then(n$46=>n$46.numFailures?Be$9.reject(n$46.failures[0]):n$46.lastResult).then(n$46=>{if(o$32)try{pn(i$27,o$32,n$46);}catch{}return n$46;});}delete(i$27){return this._trans(`readwrite`,e$19=>this.core.mutate({trans:e$19,type:`delete`,keys:[i$27]})).then(e$19=>e$19.numFailures?Be$9.reject(e$19.failures[0]):void 0);}clear(){return this._trans(`readwrite`,i$27=>this.core.mutate({trans:i$27,type:`deleteRange`,range:ZJ})).then(i$27=>i$27.numFailures?Be$9.reject(i$27.failures[0]):void 0);}bulkGet(i$27){return this._trans(`readonly`,e$19=>this.core.getMany({keys:i$27,trans:e$19}).then(r$34=>r$34.map(o$32=>this.hook.reading.fire(o$32))));}bulkAdd(i$27,e$19,r$34){let o$32=Array.isArray(e$19)?e$19:void 0,s$25=(r$34=r$34||(o$32?void 0:e$19))?r$34.allKeys:void 0;return this._trans(`readwrite`,n$46=>{let{auto:a$30,keyPath:c$37}=this.schema.primKey;if(c$37&&o$32)throw new ut$2.InvalidArgument(`bulkAdd(): keys argument invalid on tables with inbound keys`);if(o$32&&o$32.length!==i$27.length)throw new ut$2.InvalidArgument(`Arguments objects and keys must have the same length`);let m$32=i$27.length,l$26=c$37&&a$30?i$27.map(Qb(c$37)):i$27;return this.core.mutate({trans:n$46,type:`add`,keys:o$32,values:l$26,wantResults:s$25}).then(({numFailures:g$19,results:f$33,lastResult:h$15,failures:I$25})=>{if(g$19===0)return s$25?f$33:h$15;throw new Ff(`${this.name}.bulkAdd(): ${g$19} of ${m$32} operations failed`,I$25);});});}bulkPut(i$27,e$19,r$34){let o$32=Array.isArray(e$19)?e$19:void 0,s$25=(r$34=r$34||(o$32?void 0:e$19))?r$34.allKeys:void 0;return this._trans(`readwrite`,n$46=>{let{auto:a$30,keyPath:c$37}=this.schema.primKey;if(c$37&&o$32)throw new ut$2.InvalidArgument(`bulkPut(): keys argument invalid on tables with inbound keys`);if(o$32&&o$32.length!==i$27.length)throw new ut$2.InvalidArgument(`Arguments objects and keys must have the same length`);let m$32=i$27.length,l$26=c$37&&a$30?i$27.map(Qb(c$37)):i$27;return this.core.mutate({trans:n$46,type:`put`,keys:o$32,values:l$26,wantResults:s$25}).then(({numFailures:g$19,results:f$33,lastResult:h$15,failures:I$25})=>{if(g$19===0)return s$25?f$33:h$15;throw new Ff(`${this.name}.bulkPut(): ${g$19} of ${m$32} operations failed`,I$25);});});}bulkDelete(i$27){let e$19=i$27.length;return this._trans(`readwrite`,r$34=>this.core.mutate({trans:r$34,type:`delete`,keys:i$27})).then(({numFailures:r$34,lastResult:o$32,failures:s$25})=>{if(r$34===0)return o$32;throw new Ff(`${this.name}.bulkDelete(): ${r$34} of ${e$19} operations failed`,s$25);});}};_0=class{_read(i$27,e$19){var r$34=this._ctx;return r$34.error?r$34.table._trans(null,ki.bind(null,r$34.error)):r$34.table._trans(`readonly`,i$27).then(e$19);}_write(i$27){var e$19=this._ctx;return e$19.error?e$19.table._trans(null,ki.bind(null,e$19.error)):e$19.table._trans(`readwrite`,i$27,`locked`);}_addAlgorithm(i$27){var e$19=this._ctx;e$19.algorithm=gl$1(e$19.algorithm,i$27);}_iterate(i$27,e$19){return Jb(this._ctx,i$27,e$19,this._ctx.table.core);}clone(i$27){var e$19=Object.create(this.constructor.prototype),r$34=Object.create(this._ctx);return i$27&&_o$1(r$34,i$27),e$19._ctx=r$34,e$19;}raw(){return this._ctx.valueMapper=null,this;}each(i$27){var e$19=this._ctx;return this._read(r$34=>Jb(e$19,i$27,r$34,e$19.table.core));}count(i$27){return this._read(e$19=>{let r$34=this._ctx,o$32=r$34.table.core;if(Mp(r$34,!0))return o$32.count({trans:e$19,query:{index:oC(r$34,o$32.schema),range:r$34.range}}).then(n$46=>Math.min(n$46,r$34.limit));var s$25=0;return Jb(r$34,()=>(++s$25,!1),e$19,o$32).then(()=>s$25);}).then(i$27);}sortBy(i$27,e$19){let r$34=i$27.split(`.`).reverse(),o$32=r$34[0],s$25=r$34.length-1;function n$46(m$32,l$26){return l$26?n$46(m$32[r$34[l$26]],l$26-1):m$32[o$32];}var a$30=this._ctx.dir===`next`?1:-1;function c$37(m$32,l$26){var g$19=n$46(m$32,s$25),f$33=n$46(l$26,s$25);return g$19<f$33?-a$30:g$19>f$33?a$30:0;}return this.toArray(function(m$32){return m$32.sort(c$37);}).then(e$19);}toArray(i$27){return this._read(e$19=>{var r$34=this._ctx;if(r$34.dir===`next`&&Mp(r$34,!0)&&r$34.limit>0){let{valueMapper:o$32}=r$34,s$25=oC(r$34,r$34.table.core.schema);return r$34.table.core.query({trans:e$19,limit:r$34.limit,values:!0,query:{index:s$25,range:r$34.range}}).then(({result:n$46})=>o$32?n$46.map(o$32):n$46);}{let o$32=[];return Jb(r$34,s$25=>o$32.push(s$25),e$19,r$34.table.core).then(()=>o$32);}},i$27);}offset(i$27){var e$19=this._ctx;return i$27<=0||(e$19.offset+=i$27,Mp(e$19)?s0(e$19,()=>{var r$34=i$27;return(o$32,s$25)=>r$34===0||(r$34===1?(--r$34,!1):(s$25(()=>{o$32.advance(r$34),r$34=0;}),!1));}):s0(e$19,()=>{var r$34=i$27;return()=>--r$34<0;})),this;}limit(i$27){return this._ctx.limit=Math.min(this._ctx.limit,i$27),s0(this._ctx,()=>{var e$19=i$27;return function(r$34,o$32,s$25){return--e$19<=0&&o$32(s$25),e$19>=0;};},!0),this;}until(i$27,e$19){return o0$1(this._ctx,function(r$34,o$32,s$25){return!i$27(r$34.value)||(o$32(s$25),e$19);}),this;}first(i$27){return this.limit(1).toArray(function(e$19){return e$19[0];}).then(i$27);}last(i$27){return this.reverse().first(i$27);}filter(i$27){var e$19,r$34;return o0$1(this._ctx,function(o$32){return i$27(o$32.value);}),e$19=this._ctx,r$34=i$27,e$19.isMatch=gl$1(e$19.isMatch,r$34),this;}and(i$27){return this.filter(i$27);}or(i$27){return new this.db.WhereClause(this._ctx.table,i$27,this);}reverse(){return this._ctx.dir=this._ctx.dir===`prev`?`next`:`prev`,this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this;}desc(){return this.reverse();}eachKey(i$27){var e$19=this._ctx;return e$19.keysOnly=!e$19.isMatch,this.each(function(r$34,o$32){i$27(o$32.key,o$32);});}eachUniqueKey(i$27){return this._ctx.unique=`unique`,this.eachKey(i$27);}eachPrimaryKey(i$27){var e$19=this._ctx;return e$19.keysOnly=!e$19.isMatch,this.each(function(r$34,o$32){i$27(o$32.primaryKey,o$32);});}keys(i$27){var e$19=this._ctx;e$19.keysOnly=!e$19.isMatch;var r$34=[];return this.each(function(o$32,s$25){r$34.push(s$25.key);}).then(function(){return r$34;}).then(i$27);}primaryKeys(i$27){var e$19=this._ctx;if(e$19.dir===`next`&&Mp(e$19,!0)&&e$19.limit>0)return this._read(o$32=>{var s$25=oC(e$19,e$19.table.core.schema);return e$19.table.core.query({trans:o$32,values:!1,limit:e$19.limit,query:{index:s$25,range:e$19.range}});}).then(({result:o$32})=>o$32).then(i$27);e$19.keysOnly=!e$19.isMatch;var r$34=[];return this.each(function(o$32,s$25){r$34.push(s$25.primaryKey);}).then(function(){return r$34;}).then(i$27);}uniqueKeys(i$27){return this._ctx.unique=`unique`,this.keys(i$27);}firstKey(i$27){return this.limit(1).keys(function(e$19){return e$19[0];}).then(i$27);}lastKey(i$27){return this.reverse().firstKey(i$27);}distinct(){var i$27=this._ctx,e$19=i$27.index&&i$27.table.schema.idxByName[i$27.index];if(!e$19||!e$19.multi)return this;var r$34={};return o0$1(this._ctx,function(o$32){var s$25=o$32.primaryKey.toString(),n$46=Xo$3(r$34,s$25);return r$34[s$25]=!0,!n$46;}),this;}modify(i$27){var e$19=this._ctx;return this._write(r$34=>{var o$32;if(typeof i$27==`function`)o$32=i$27;else{var s$25=vi$1(i$27),n$46=s$25.length;o$32=function(A$22){for(var R$21=!1,w$26=0;w$26<n$46;++w$26){var E$16=s$25[w$26],P$20=i$27[E$16];ja(A$22,E$16)!==P$20&&(pn(A$22,E$16,P$20),R$21=!0);}return R$21;};}let a$30=e$19.table.core,{outbound:c$37,extractKey:m$32}=a$30.schema.primaryKey,l$26=this.db._options.modifyChunkSize||200,g$19=[],f$33=0,h$15=[],I$25=(A$22,R$21)=>{let{failures:w$26,numFailures:E$16}=R$21;f$33+=A$22-E$16;for(let P$20 of vi$1(w$26))g$19.push(w$26[P$20]);};return this.clone().primaryKeys().then(A$22=>{let R$21=w$26=>{let E$16=Math.min(l$26,A$22.length-w$26);return a$30.getMany({trans:r$34,keys:A$22.slice(w$26,w$26+E$16),cache:`immutable`}).then(P$20=>{let B$22=[],G$16=[],v$22=c$37?[]:null,x$28=[];for(let H$10=0;H$10<E$16;++H$10){let te$16=P$20[H$10],ye$5={value:Uf(te$16),primKey:A$22[w$26+H$10]};o$32.call(ye$5,ye$5.value,ye$5)!==!1&&(ye$5.value==null?x$28.push(A$22[w$26+H$10]):c$37||Co$1(m$32(te$16),m$32(ye$5.value))===0?(G$16.push(ye$5.value),c$37&&v$22.push(A$22[w$26+H$10])):(x$28.push(A$22[w$26+H$10]),B$22.push(ye$5.value)));}let U$19=Mp(e$19)&&e$19.limit===Infinity&&(typeof i$27!=`function`||i$27===n0)&&{index:e$19.index,range:e$19.range};return Promise.resolve(B$22.length>0&&a$30.mutate({trans:r$34,type:`add`,values:B$22}).then(H$10=>{for(let te$16 in H$10.failures)x$28.splice(parseInt(te$16),1);I$25(B$22.length,H$10);})).then(()=>(G$16.length>0||U$19&&typeof i$27==`object`)&&a$30.mutate({trans:r$34,type:`put`,keys:v$22,values:G$16,criteria:U$19,changeSpec:typeof i$27!=`function`&&i$27}).then(H$10=>I$25(G$16.length,H$10))).then(()=>(x$28.length>0||U$19&&i$27===n0)&&a$30.mutate({trans:r$34,type:`delete`,keys:x$28,criteria:U$19}).then(H$10=>I$25(x$28.length,H$10))).then(()=>A$22.length>w$26+E$16&&R$21(w$26+l$26));});};return R$21(0).then(()=>{if(g$19.length>0)throw new aC(`Error modifying one or more objects`,g$19,f$33,h$15);return A$22.length;});});});}delete(){var i$27=this._ctx,e$19=i$27.range;return Mp(i$27)&&(i$27.isPrimKey&&!gue||e$19.type===3)?this._write(r$34=>{let{primaryKey:o$32}=i$27.table.core.schema,s$25=e$19;return i$27.table.core.count({trans:r$34,query:{index:o$32,range:s$25}}).then(n$46=>i$27.table.core.mutate({trans:r$34,type:`deleteRange`,range:s$25}).then(({failures:a$30,lastResult:c$37,results:m$32,numFailures:l$26})=>{if(l$26)throw new aC(`Could not delete some values`,Object.keys(a$30).map(g$19=>a$30[g$19]),n$46-l$26);return n$46-l$26;}));}):this.modify(n0);}},n0=(t$21,i$27)=>i$27.value=null;pC=class{get Collection(){return this._ctx.table.db.Collection;}between(i$27,e$19,r$34,o$32){r$34=r$34!==!1,o$32=o$32===!0;try{return this._cmp(i$27,e$19)>0||this._cmp(i$27,e$19)===0&&(r$34||o$32)&&(!r$34||!o$32)?Rp(this):new this.Collection(this,()=>Wc(i$27,e$19,!r$34,!o$32));}catch{return Yo$2(this,Fa);}}equals(i$27){return i$27==null?Yo$2(this,Fa):new this.Collection(this,()=>e9(i$27));}above(i$27){return i$27==null?Yo$2(this,Fa):new this.Collection(this,()=>Wc(i$27,void 0,!0));}aboveOrEqual(i$27){return i$27==null?Yo$2(this,Fa):new this.Collection(this,()=>Wc(i$27,void 0,!1));}below(i$27){return i$27==null?Yo$2(this,Fa):new this.Collection(this,()=>Wc(void 0,i$27,!1,!0));}belowOrEqual(i$27){return i$27==null?Yo$2(this,Fa):new this.Collection(this,()=>Wc(void 0,i$27));}startsWith(i$27){return typeof i$27!=`string`?Yo$2(this,`String expected.`):this.between(i$27,i$27+pl,!0,!0);}startsWithIgnoreCase(i$27){return i$27===``?this.startsWith(i$27):Yb(this,(e$19,r$34)=>e$19.indexOf(r$34[0])===0,[i$27],pl);}equalsIgnoreCase(i$27){return Yb(this,(e$19,r$34)=>e$19===r$34[0],[i$27],``);}anyOfIgnoreCase(){var i$27=Oa.apply(Fp,arguments);return i$27.length===0?Rp(this):Yb(this,(e$19,r$34)=>r$34.indexOf(e$19)!==-1,i$27,``);}startsWithAnyOfIgnoreCase(){var i$27=Oa.apply(Fp,arguments);return i$27.length===0?Rp(this):Yb(this,(e$19,r$34)=>r$34.some(o$32=>e$19.indexOf(o$32)===0),i$27,pl);}anyOf(){let i$27=Oa.apply(Fp,arguments),e$19=this._cmp;try{i$27.sort(e$19);}catch{return Yo$2(this,Fa);}if(i$27.length===0)return Rp(this);let r$34=new this.Collection(this,()=>Wc(i$27[0],i$27[i$27.length-1]));r$34._ondirectionchange=s$25=>{e$19=s$25===`next`?this._ascending:this._descending,i$27.sort(e$19);};let o$32=0;return r$34._addAlgorithm((s$25,n$46,a$30)=>{let c$37=s$25.key;for(;e$19(c$37,i$27[o$32])>0;)if(++o$32,o$32===i$27.length)return n$46(a$30),!1;return e$19(c$37,i$27[o$32])===0||(n$46(()=>{s$25.continue(i$27[o$32]);}),!1);}),r$34;}notEqual(i$27){return this.inAnyRange([[-Infinity,i$27],[i$27,this.db._maxKey]],{includeLowers:!1,includeUppers:!1});}noneOf(){let i$27=Oa.apply(Fp,arguments);if(i$27.length===0)return new this.Collection(this);try{i$27.sort(this._ascending);}catch{return Yo$2(this,Fa);}let e$19=i$27.reduce((r$34,o$32)=>r$34?r$34.concat([[r$34[r$34.length-1][1],o$32]]):[[-Infinity,o$32]],null);return e$19.push([i$27[i$27.length-1],this.db._maxKey]),this.inAnyRange(e$19,{includeLowers:!1,includeUppers:!1});}inAnyRange(i$27,e$19){let r$34=this._cmp,o$32=this._ascending,s$25=this._descending,n$46=this._min,a$30=this._max;if(i$27.length===0)return Rp(this);if(!i$27.every(E$16=>E$16[0]!==void 0&&E$16[1]!==void 0&&o$32(E$16[0],E$16[1])<=0))return Yo$2(this,`First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower`,ut$2.InvalidArgument);let c$37=!e$19||e$19.includeLowers!==!1,m$32=e$19&&e$19.includeUppers===!0,l$26,g$19=o$32;function f$33(E$16,P$20){return g$19(E$16[0],P$20[0]);}try{l$26=i$27.reduce(function(E$16,P$20){let B$22=0,G$16=E$16.length;for(;B$22<G$16;++B$22){let v$22=E$16[B$22];if(r$34(P$20[0],v$22[1])<0&&r$34(P$20[1],v$22[0])>0){v$22[0]=n$46(v$22[0],P$20[0]),v$22[1]=a$30(v$22[1],P$20[1]);break;}}return B$22===G$16&&E$16.push(P$20),E$16;},[]),l$26.sort(f$33);}catch{return Yo$2(this,Fa);}let h$15=0,I$25=m$32?E$16=>o$32(E$16,l$26[h$15][1])>0:E$16=>o$32(E$16,l$26[h$15][1])>=0,A$22=c$37?E$16=>s$25(E$16,l$26[h$15][0])>0:E$16=>s$25(E$16,l$26[h$15][0])>=0,R$21=I$25,w$26=new this.Collection(this,()=>Wc(l$26[0][0],l$26[l$26.length-1][1],!c$37,!m$32));return w$26._ondirectionchange=E$16=>{E$16===`next`?(R$21=I$25,g$19=o$32):(R$21=A$22,g$19=s$25),l$26.sort(f$33);},w$26._addAlgorithm((E$16,P$20,B$22)=>{for(var G$16=E$16.key;R$21(G$16);)if(++h$15,h$15===l$26.length)return P$20(B$22),!1;return!!function(v$22){return!I$25(v$22)&&!A$22(v$22);}(G$16)||(this._cmp(G$16,l$26[h$15][1])===0||this._cmp(G$16,l$26[h$15][0])===0||P$20(()=>{g$19===o$32?E$16.continue(l$26[h$15][0]):E$16.continue(l$26[h$15][1]);}),!1);}),w$26;}startsWithAnyOf(){let i$27=Oa.apply(Fp,arguments);return i$27.every(e$19=>typeof e$19==`string`)?i$27.length===0?Rp(this):this.inAnyRange(i$27.map(e$19=>[e$19,e$19+pl])):Yo$2(this,`startsWithAnyOf() only works with strings`);}};qc$1=Pf(null,`storagemutated`),k0=class{_lock(){return Mf(!rt$5.global),++this._reculock,this._reculock!==1||rt$5.global||(rt$5.lockOwnerFor=this),this;}_unlock(){if(Mf(!rt$5.global),--this._reculock==0)for(rt$5.global||(rt$5.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var i$27=this._blockedFuncs.shift();try{Dp(i$27[1],i$27[0]);}catch{}}return this;}_locked(){return this._reculock&&rt$5.lockOwnerFor!==this;}create(i$27){if(!this.mode)return this;let e$19=this.db.idbdb,r$34=this.db._state.dbOpenError;if(Mf(!this.idbtrans),!i$27&&!e$19)switch(r$34&&r$34.name){case`DatabaseClosedError`:throw new ut$2.DatabaseClosed(r$34);case`MissingAPIError`:throw new ut$2.MissingAPI(r$34.message,r$34);default:throw new ut$2.OpenFailed(r$34);}if(!this.active)throw new ut$2.TransactionInactive();return Mf(this._completion._state===null),(i$27=this.idbtrans=i$27||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):e$19.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=xr$1(o$32=>{Nf(o$32),this._reject(i$27.error);}),i$27.onabort=xr$1(o$32=>{Nf(o$32),this.active&&this._reject(new ut$2.Abort(i$27.error)),this.active=!1,this.on(`abort`).fire(o$32);}),i$27.oncomplete=xr$1(()=>{this.active=!1,this._resolve(),`mutatedParts`in i$27&&qc$1.storagemutated.fire(i$27.mutatedParts);}),this;}_promise(i$27,e$19,r$34){if(i$27===`readwrite`&&this.mode!==`readwrite`)return ki(new ut$2.ReadOnly(`Transaction is readonly`));if(!this.active)return ki(new ut$2.TransactionInactive());if(this._locked())return new Be$9((s$25,n$46)=>{this._blockedFuncs.push([()=>{this._promise(i$27,e$19,r$34).then(s$25,n$46);},rt$5]);});if(r$34)return Gc(()=>{var s$25=new Be$9((n$46,a$30)=>{this._lock();let c$37=e$19(n$46,a$30,this);c$37&&c$37.then&&c$37.then(n$46,a$30);});return s$25.finally(()=>this._unlock()),s$25._lib=!0,s$25;});var o$32=new Be$9((s$25,n$46)=>{var a$30=e$19(s$25,n$46,this);a$30&&a$30.then&&a$30.then(s$25,n$46);});return o$32._lib=!0,o$32;}_root(){return this.parent?this.parent._root():this;}waitFor(i$27){var e$19=this._root();let r$34=Be$9.resolve(i$27);if(e$19._waitingFor)e$19._waitingFor=e$19._waitingFor.then(()=>r$34);else{e$19._waitingFor=r$34,e$19._waitingQueue=[];var o$32=e$19.idbtrans.objectStore(e$19.storeNames[0]);(function n$46(){for(++e$19._spinCount;e$19._waitingQueue.length;)e$19._waitingQueue.shift()();e$19._waitingFor&&(o$32.get(-Infinity).onsuccess=n$46);})();}var s$25=e$19._waitingFor;return new Be$9((n$46,a$30)=>{r$34.then(c$37=>e$19._waitingQueue.push(xr$1(n$46.bind(null,c$37))),c$37=>e$19._waitingQueue.push(xr$1(a$30.bind(null,c$37)))).finally(()=>{e$19._waitingFor===s$25&&(e$19._waitingFor=null);});});}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ut$2.Abort()));}table(i$27){let e$19=this._memoizedTables||(this._memoizedTables={});if(Xo$3(e$19,i$27))return e$19[i$27];let r$34=this.schema[i$27];if(!r$34)throw new ut$2.NotFound(`Table `+i$27+` not part of transaction`);let o$32=new this.db.Table(i$27,r$34,this);return o$32.core=this.db.core.table(i$27),e$19[i$27]=o$32,o$32;}};Bf=t$21=>{try{return t$21.only([[]]),Bf=()=>[[]],[[]];}catch{return Bf=()=>pl,pl;}};bue=0;F0=class{_parseStoresSpec(i$27,e$19){vi$1(i$27).forEach(r$34=>{if(i$27[r$34]!==null){var o$32=i$27[r$34].split(`,`).map((n$46,a$30)=>{let c$37=(n$46=n$46.trim()).replace(/([&*]|\+\+)/g,``),m$32=/^\[/.test(c$37)?c$37.match(/^\[(.*)\]$/)[1].split(`+`):c$37;return T0(c$37,m$32||null,/\&/.test(n$46),/\*/.test(n$46),/\+\+/.test(n$46),oo$3(m$32),a$30===0);}),s$25=o$32.shift();if(s$25.multi)throw new ut$2.Schema(`Primary key cannot be multi-valued`);o$32.forEach(n$46=>{if(n$46.auto)throw new ut$2.Schema(`Only primary key can be marked as autoIncrement (++)`);if(!n$46.keyPath)throw new ut$2.Schema(`Index must have a name and cannot be an empty string`);}),e$19[r$34]=r9(r$34,s$25,o$32);}});}stores(i$27){let e$19=this.db;this._cfg.storesSource=this._cfg.storesSource?_o$1(this._cfg.storesSource,i$27):i$27;let r$34=e$19._versions,o$32={},s$25={};return r$34.forEach(n$46=>{_o$1(o$32,n$46._cfg.storesSource),s$25=n$46._cfg.dbschema={},n$46._parseStoresSpec(o$32,s$25);}),e$19._dbSchema=s$25,A0(e$19,[e$19._allTables,e$19,e$19.Transaction.prototype]),uC(e$19,[e$19._allTables,e$19,e$19.Transaction.prototype,this._cfg.tables],vi$1(s$25),s$25),e$19._storeNames=vi$1(s$25),this;}upgrade(i$27){return this._cfg.contentUpgrade=V0(this._cfg.contentUpgrade||mr$4,i$27),this;}};Aue={stack:`dbcore`,name:`VirtualIndexMiddleware`,level:1,create:function(t$21){return{...t$21,table(i$27){let e$19=t$21.table(i$27),{schema:r$34}=e$19,o$32={},s$25=[];function n$46(l$26,g$19,f$33){let h$15=$f(l$26),I$25=o$32[h$15]=o$32[h$15]||[],A$22=l$26==null?0:typeof l$26==`string`?1:l$26.length,R$21=g$19>0,w$26={...f$33,isVirtual:R$21,keyTail:g$19,keyLength:A$22,extractKey:I0(l$26),unique:!R$21&&f$33.unique};return I$25.push(w$26),w$26.isPrimaryKey||s$25.push(w$26),A$22>1&&n$46(A$22===2?l$26[0]:l$26.slice(0,A$22-1),g$19+1,f$33),I$25.sort((E$16,P$20)=>E$16.keyTail-P$20.keyTail),w$26;}let a$30=n$46(r$34.primaryKey.keyPath,0,r$34.primaryKey);o$32[`:id`]=[a$30];for(let l$26 of r$34.indexes)n$46(l$26.keyPath,0,l$26);function c$37(l$26){let g$19=l$26.query.index;return g$19.isVirtual?{...l$26,query:{index:g$19,range:(f$33=l$26.query.range,h$15=g$19.keyTail,{type:f$33.type===1?2:f$33.type,lower:Xb(f$33.lower,f$33.lowerOpen?t$21.MAX_KEY:t$21.MIN_KEY,h$15),lowerOpen:!0,upper:Xb(f$33.upper,f$33.upperOpen?t$21.MIN_KEY:t$21.MAX_KEY,h$15),upperOpen:!0})}}:l$26;var f$33,h$15;}return{...e$19,schema:{...r$34,primaryKey:a$30,indexes:s$25,getIndexByKeyPath:function(l$26){let g$19=o$32[$f(l$26)];return g$19&&g$19[0];}},count:l$26=>e$19.count(c$37(l$26)),query:l$26=>e$19.query(c$37(l$26)),openCursor(l$26){let{keyTail:g$19,isVirtual:f$33,keyLength:h$15}=l$26.query.index;return f$33?e$19.openCursor(c$37(l$26)).then(I$25=>I$25&&function(A$22){return Object.create(A$22,{continue:{value:function(w$26){w$26!=null?A$22.continue(Xb(w$26,l$26.reverse?t$21.MAX_KEY:t$21.MIN_KEY,g$19)):l$26.unique?A$22.continue(A$22.key.slice(0,h$15).concat(l$26.reverse?t$21.MIN_KEY:t$21.MAX_KEY,g$19)):A$22.continue();}},continuePrimaryKey:{value(w$26,E$16){A$22.continuePrimaryKey(Xb(w$26,t$21.MAX_KEY,g$19),E$16);}},primaryKey:{get:()=>A$22.primaryKey},key:{get(){let w$26=A$22.key;return h$15===1?w$26[0]:w$26.slice(0,h$15);}},value:{get:()=>A$22.value}});}(I$25)):e$19.openCursor(l$26);}};}};}};wue={stack:`dbcore`,name:`HooksMiddleware`,level:2,create:t$21=>({...t$21,table(i$27){let e$19=t$21.table(i$27),{primaryKey:r$34}=e$19.schema;return{...e$19,mutate(s$25){let n$46=rt$5.trans,{deleting:a$30,creating:c$37,updating:m$32}=n$46.table(i$27).hook;switch(s$25.type){case`add`:if(c$37.fire===mr$4)break;return n$46._promise(`readwrite`,()=>l$26(s$25),!0);case`put`:if(c$37.fire===mr$4&&m$32.fire===mr$4)break;return n$46._promise(`readwrite`,()=>l$26(s$25),!0);case`delete`:if(a$30.fire===mr$4)break;return n$46._promise(`readwrite`,()=>l$26(s$25),!0);case`deleteRange`:if(a$30.fire===mr$4)break;return n$46._promise(`readwrite`,()=>function(f$33){return g$19(f$33.trans,f$33.range,1e4);}(s$25),!0);}return e$19.mutate(s$25);function l$26(f$33){let h$15=rt$5.trans,I$25=f$33.keys||function(A$22,R$21){return R$21.type===`delete`?R$21.keys:R$21.keys||R$21.values.map(A$22.extractKey);}(r$34,f$33);if(!I$25)throw new Error(`Keys missing`);return(f$33=f$33.type===`add`||f$33.type===`put`?{...f$33,keys:I$25}:{...f$33}).type!==`delete`&&(f$33.values=[...f$33.values]),f$33.keys&&(f$33.keys=[...f$33.keys]),function(A$22,R$21,w$26){return R$21.type===`add`?Promise.resolve([]):A$22.getMany({trans:R$21.trans,keys:w$26,cache:`immutable`});}(e$19,f$33,I$25).then(A$22=>{let R$21=I$25.map((w$26,E$16)=>{let P$20=A$22[E$16],B$22={onerror:null,onsuccess:null};if(f$33.type===`delete`)a$30.fire.call(B$22,w$26,P$20,h$15);else if(f$33.type===`add`||P$20===void 0){let G$16=c$37.fire.call(B$22,w$26,f$33.values[E$16],h$15);w$26==null&&G$16!=null&&(w$26=G$16,f$33.keys[E$16]=w$26,r$34.outbound||pn(f$33.values[E$16],r$34.keyPath,w$26));}else{let G$16=q0(P$20,f$33.values[E$16]),v$22=m$32.fire.call(B$22,G$16,w$26,P$20,h$15);if(v$22){let x$28=f$33.values[E$16];Object.keys(v$22).forEach(U$19=>{Xo$3(x$28,U$19)?x$28[U$19]=v$22[U$19]:pn(x$28,U$19,v$22[U$19]);});}}return B$22;});return e$19.mutate(f$33).then(({failures:w$26,results:E$16,numFailures:P$20,lastResult:B$22})=>{for(let G$16=0;G$16<I$25.length;++G$16){let v$22=E$16?E$16[G$16]:I$25[G$16],x$28=R$21[G$16];v$22==null?x$28.onerror&&x$28.onerror(w$26[G$16]):x$28.onsuccess&&x$28.onsuccess(f$33.type===`put`&&A$22[G$16]?f$33.values[G$16]:v$22);}return{failures:w$26,results:E$16,numFailures:P$20,lastResult:B$22};}).catch(w$26=>(R$21.forEach(E$16=>E$16.onerror&&E$16.onerror(w$26)),Promise.reject(w$26)));});}function g$19(f$33,h$15,I$25){return e$19.query({trans:f$33,values:!1,query:{index:r$34,range:h$15},limit:I$25}).then(({result:A$22})=>l$26({type:`delete`,keys:A$22,trans:f$33}).then(R$21=>R$21.numFailures>0?Promise.reject(R$21.failures[0]):A$22.length<I$25?{failures:[],numFailures:0,lastResult:void 0}:g$19(f$33,{...h$15,lower:A$22[A$22.length-1],lowerOpen:!0},I$25)));}}};}})};Mue={stack:`dbcore`,level:-1,create:t$21=>({table:i$27=>{let e$19=t$21.table(i$27);return{...e$19,getMany:r$34=>{if(!r$34.cache)return e$19.getMany(r$34);let o$32=s9(r$34.keys,r$34.trans._cache,r$34.cache===`clone`);return o$32?Be$9.resolve(o$32):e$19.getMany(r$34).then(s$25=>(r$34.trans._cache={keys:r$34.keys,values:r$34.cache===`clone`?Uf(s$25):s$25},s$25));},mutate:r$34=>(r$34.type!==`add`&&(r$34.trans._cache=null),e$19.mutate(r$34))};}})};xa=function(t$21,i$27){if(!this){let e$19=new xa();return t$21&&`d`in t$21&&_o$1(e$19,t$21),e$19;}_o$1(this,arguments.length?{d:1,from:t$21,to:arguments.length>1?i$27:t$21}:{d:0});};$p$1(xa.prototype,{add(t$21){return fC(this,t$21),this;},addKey(t$21){return Vf(this,t$21,t$21),this;},addKeys(t$21){return t$21.forEach(i$27=>Vf(this,i$27,i$27)),this;},[l0$1](){return P0(this);}});Fue={stack:`dbcore`,level:0,create:t$21=>{let i$27=t$21.schema.name,e$19=new xa(t$21.MIN_KEY,t$21.MAX_KEY);return{...t$21,table:r$34=>{let o$32=t$21.table(r$34),{schema:s$25}=o$32,{primaryKey:n$46}=s$25,{extractKey:a$30,outbound:c$37}=n$46,m$32={...o$32,mutate:f$33=>{let h$15=f$33.trans,I$25=h$15.mutatedParts||(h$15.mutatedParts={}),A$22=v$22=>{let x$28=`idb://${i$27}/${r$34}/${v$22}`;return I$25[x$28]||(I$25[x$28]=new xa());},R$21=A$22(``),w$26=A$22(`:dels`),{type:E$16}=f$33,[P$20,B$22]=f$33.type===`deleteRange`?[f$33.range]:f$33.type===`delete`?[f$33.keys]:f$33.values.length<50?[[],f$33.values]:[],G$16=f$33.trans._cache;return o$32.mutate(f$33).then(v$22=>{if(oo$3(P$20)){E$16!==`delete`&&(P$20=v$22.results),R$21.addKeys(P$20);let x$28=s9(P$20,G$16);x$28||E$16===`add`||w$26.addKeys(P$20),(x$28||B$22)&&function(U$19,H$10,te$16,ye$5){function ke$5(Qe$3){let Ct$5=U$19(Qe$3.name||``);function Zt$4(Fe$6){return Fe$6!=null?Qe$3.extractKey(Fe$6):null;}let Ae$6=Fe$6=>Qe$3.multiEntry&&oo$3(Fe$6)?Fe$6.forEach(He$5=>Ct$5.addKey(He$5)):Ct$5.addKey(Fe$6);(te$16||ye$5).forEach((Fe$6,He$5)=>{let St$3=te$16&&Zt$4(te$16[He$5]),fr=ye$5&&Zt$4(ye$5[He$5]);Co$1(St$3,fr)!==0&&(St$3!=null&&Ae$6(St$3),fr!=null&&Ae$6(fr));});}H$10.indexes.forEach(ke$5);}(A$22,s$25,x$28,B$22);}else if(P$20){let x$28={from:P$20.lower,to:P$20.upper};w$26.add(x$28),R$21.add(x$28);}else R$21.add(e$19),w$26.add(e$19),s$25.indexes.forEach(x$28=>A$22(x$28.name).add(e$19));return v$22;});}},l$26=({query:{index:f$33,range:h$15}})=>{var I$25,A$22;return[f$33,new xa((I$25=h$15.lower)!==null&&I$25!==void 0?I$25:t$21.MIN_KEY,(A$22=h$15.upper)!==null&&A$22!==void 0?A$22:t$21.MAX_KEY)];},g$19={get:f$33=>[n$46,new xa(f$33.key)],getMany:f$33=>[n$46,new xa().addKeys(f$33.keys)],count:l$26,query:l$26,openCursor:l$26};return vi$1(g$19).forEach(f$33=>{m$32[f$33]=function(h$15){let{subscr:I$25}=rt$5;if(I$25){let A$22=B$22=>{let G$16=`idb://${i$27}/${r$34}/${B$22}`;return I$25[G$16]||(I$25[G$16]=new xa());},R$21=A$22(``),w$26=A$22(`:dels`),[E$16,P$20]=g$19[f$33](h$15);if(A$22(E$16.name||``).add(P$20),!E$16.isPrimaryKey){if(f$33!==`count`){let B$22=f$33===`query`&&c$37&&h$15.values&&o$32.query({...h$15,values:!1});return o$32[f$33].apply(this,arguments).then(G$16=>{if(f$33===`query`){if(c$37&&h$15.values)return B$22.then(({result:x$28})=>(R$21.addKeys(x$28),G$16));let v$22=h$15.values?G$16.result.map(a$30):G$16.result;h$15.values?R$21.addKeys(v$22):w$26.addKeys(v$22);}else if(f$33===`openCursor`){let v$22=G$16,x$28=h$15.values;return v$22&&Object.create(v$22,{key:{get:()=>(w$26.addKey(v$22.primaryKey),v$22.key)},primaryKey:{get(){let U$19=v$22.primaryKey;return w$26.addKey(U$19),U$19;}},value:{get:()=>(x$28&&R$21.addKey(v$22.primaryKey),v$22.value)}});}return G$16;});}w$26.add(e$19);}}return o$32[f$33].apply(this,arguments);};}),m$32;}};}},jp$1=class t$21{constructor(i$27,e$19){this._middlewares={},this.verno=0;let r$34=t$21.dependencies;this._options=e$19={addons:t$21.addons,autoOpen:!0,indexedDB:r$34.indexedDB,IDBKeyRange:r$34.IDBKeyRange,...e$19},this._deps={indexedDB:e$19.indexedDB,IDBKeyRange:e$19.IDBKeyRange};let{addons:o$32}=e$19;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let s$25={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:mr$4,dbReadyPromise:null,cancelOpen:mr$4,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var n$46;s$25.dbReadyPromise=new Be$9(a$30=>{s$25.dbReadyResolve=a$30;}),s$25.openCanceller=new Be$9((a$30,c$37)=>{s$25.cancelOpen=c$37;}),this._state=s$25,this.name=i$27,this.on=Pf(this,`populate`,`blocked`,`versionchange`,`close`,{ready:[V0,mr$4]}),this.on.ready.subscribe=PJ(this.on.ready.subscribe,a$30=>(c$37,m$32)=>{t$21.vip(()=>{let l$26=this._state;if(l$26.openComplete)l$26.dbOpenError||Be$9.resolve().then(c$37),m$32&&a$30(c$37);else if(l$26.onReadyBeingFired)l$26.onReadyBeingFired.push(c$37),m$32&&a$30(c$37);else{a$30(c$37);let g$19=this;m$32||a$30(function f$33(){g$19.on.ready.unsubscribe(c$37),g$19.on.ready.unsubscribe(f$33);});}});}),this.Collection=(n$46=this,wf$1(_0.prototype,function(a$30,c$37){this.db=n$46;let m$32=ZJ,l$26=null;if(c$37)try{m$32=c$37();}catch(I$25){l$26=I$25;}let g$19=a$30._ctx,f$33=g$19.table,h$15=f$33.hook.reading.fire;this._ctx={table:f$33,index:g$19.index,isPrimKey:!g$19.index||f$33.schema.primKey.keyPath&&g$19.index===f$33.schema.primKey.name,range:m$32,keysOnly:!1,dir:`next`,unique:``,algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:l$26,or:g$19.or,valueMapper:h$15!==Lf?h$15:null};})),this.Table=function(a$30){return wf$1(C0.prototype,function(c$37,m$32,l$26){this.db=a$30,this._tx=l$26,this.name=c$37,this.schema=m$32,this.hook=a$30._allTables[c$37]?a$30._allTables[c$37].hook:Pf(null,{creating:[sue,mr$4],reading:[oue,Lf],updating:[aue,mr$4],deleting:[nue,mr$4]});});}(this),this.Transaction=function(a$30){return wf$1(k0.prototype,function(c$37,m$32,l$26,g$19,f$33){this.db=a$30,this.mode=c$37,this.storeNames=m$32,this.schema=l$26,this.chromeTransactionDurability=g$19,this.idbtrans=null,this.on=Pf(this,`complete`,`error`,`abort`),this.parent=f$33||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Be$9((h$15,I$25)=>{this._resolve=h$15,this._reject=I$25;}),this._completion.then(()=>{this.active=!1,this.on.complete.fire();},h$15=>{var I$25=this.active;return this.active=!1,this.on.error.fire(h$15),this.parent?this.parent._reject(h$15):I$25&&this.idbtrans&&this.idbtrans.abort(),ki(h$15);});});}(this),this.Version=function(a$30){return wf$1(F0.prototype,function(c$37){this.db=a$30,this._cfg={version:c$37,storesSource:null,dbschema:{},tables:{},contentUpgrade:null};});}(this),this.WhereClause=function(a$30){return wf$1(pC.prototype,function(c$37,m$32,l$26){this.db=a$30,this._ctx={table:c$37,index:m$32===`:id`?null:m$32,or:l$26};let g$19=a$30._deps.indexedDB;if(!g$19)throw new ut$2.MissingAPI();this._cmp=this._ascending=g$19.cmp.bind(g$19),this._descending=(f$33,h$15)=>g$19.cmp(h$15,f$33),this._max=(f$33,h$15)=>g$19.cmp(f$33,h$15)>0?f$33:h$15,this._min=(f$33,h$15)=>g$19.cmp(f$33,h$15)<0?f$33:h$15,this._IDBKeyRange=a$30._deps.IDBKeyRange;});}(this),this.on(`versionchange`,a$30=>{a$30.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close();}),this.on(`blocked`,a$30=>{!a$30.newVersion||a$30.newVersion<a$30.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a$30.oldVersion/10}`);}),this._maxKey=Bf(e$19.IDBKeyRange),this._createTransaction=(a$30,c$37,m$32,l$26)=>new this.Transaction(a$30,c$37,m$32,this._options.chromeTransactionDurability,l$26),this._fireOnBlocked=a$30=>{this.on(`blocked`).fire(a$30),Of.filter(c$37=>c$37.name===this.name&&c$37!==this&&!c$37._state.vcFired).map(c$37=>c$37.on(`versionchange`).fire(a$30));},this.use(Aue),this.use(wue),this.use(Fue),this.use(Mue),this.vip=Object.create(this,{_vip:{value:!0}}),o$32.forEach(a$30=>a$30(this));}version(i$27){if(isNaN(i$27)||i$27<.1)throw new ut$2.Type(`Given version is not a positive number`);if(i$27=Math.round(10*i$27)/10,this.idbdb||this._state.isBeingOpened)throw new ut$2.Schema(`Cannot add version when database is open`);this.verno=Math.max(this.verno,i$27);let e$19=this._versions;var r$34=e$19.filter(o$32=>o$32._cfg.version===i$27)[0];return r$34||(r$34=new this.Version(i$27),e$19.push(r$34),e$19.sort(_ue),r$34.stores({}),this._state.autoSchema=!1,r$34);}_whenReady(i$27){return this.idbdb&&(this._state.openComplete||rt$5.letThrough||this._vip)?i$27():new Be$9((e$19,r$34)=>{if(this._state.openComplete)return r$34(new ut$2.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r$34(new ut$2.DatabaseClosed());this.open().catch(mr$4);}this._state.dbReadyPromise.then(e$19,r$34);}).then(i$27);}use({stack:i$27,create:e$19,level:r$34,name:o$32}){o$32&&this.unuse({stack:i$27,name:o$32});let s$25=this._middlewares[i$27]||(this._middlewares[i$27]=[]);return s$25.push({stack:i$27,create:e$19,level:r$34??10,name:o$32}),s$25.sort((n$46,a$30)=>n$46.level-a$30.level),this;}unuse({stack:i$27,name:e$19,create:r$34}){return i$27&&this._middlewares[i$27]&&(this._middlewares[i$27]=this._middlewares[i$27].filter(o$32=>r$34?o$32.create!==r$34:!!e$19&&o$32.name!==e$19)),this;}open(){return Iue(this);}_close(){let i$27=this._state,e$19=Of.indexOf(this);if(e$19>=0&&Of.splice(e$19,1),this.idbdb){try{this.idbdb.close();}catch{}this._novip.idbdb=null;}i$27.dbReadyPromise=new Be$9(r$34=>{i$27.dbReadyResolve=r$34;}),i$27.openCanceller=new Be$9((r$34,o$32)=>{i$27.cancelOpen=o$32;});}close(){this._close();let i$27=this._state;this._options.autoOpen=!1,i$27.dbOpenError=new ut$2.DatabaseClosed(),i$27.isBeingOpened&&i$27.cancelOpen(i$27.dbOpenError);}delete(){let i$27=arguments.length>0,e$19=this._state;return new Be$9((r$34,o$32)=>{let s$25=()=>{this.close();var n$46=this._deps.indexedDB.deleteDatabase(this.name);n$46.onsuccess=xr$1(()=>{(function({indexedDB:a$30,IDBKeyRange:c$37},m$32){!z0(a$30)&&m$32!==`__dbnames`&&G0(a$30,c$37).delete(m$32).catch(mr$4);})(this._deps,this.name),r$34();}),n$46.onerror=ea(o$32),n$46.onblocked=this._fireOnBlocked;};if(i$27)throw new ut$2.InvalidArgument(`Arguments not allowed in db.delete()`);e$19.isBeingOpened?e$19.dbReadyPromise.then(s$25):s$25();});}backendDB(){return this.idbdb;}isOpen(){return this.idbdb!==null;}hasBeenClosed(){let i$27=this._state.dbOpenError;return i$27&&i$27.name===`DatabaseClosed`;}hasFailed(){return this._state.dbOpenError!==null;}dynamicallyOpened(){return this._state.autoSchema;}get tables(){return vi$1(this._allTables).map(i$27=>this._allTables[i$27]);}transaction(){let i$27=Eue.apply(this,arguments);return this._transaction.apply(this,i$27);}_transaction(i$27,e$19,r$34){let o$32=rt$5.trans;o$32&&o$32.db===this&&i$27.indexOf(`!`)===-1||(o$32=null);let s$25=i$27.indexOf(`?`)!==-1,n$46,a$30;i$27=i$27.replace(`!`,``).replace(`?`,``);try{if(a$30=e$19.map(m$32=>{var l$26=m$32 instanceof this.Table?m$32.name:m$32;if(typeof l$26!=`string`)throw new TypeError(`Invalid table argument to Dexie.transaction(). Only Table or String are allowed`);return l$26;}),i$27==`r`||i$27===`readonly`)n$46=`readonly`;else{if(i$27!=`rw`&&i$27!=`readwrite`)throw new ut$2.InvalidArgument(`Invalid transaction mode: `+i$27);n$46=`readwrite`;}if(o$32){if(o$32.mode===`readonly`&&n$46===`readwrite`){if(!s$25)throw new ut$2.SubTransaction(`Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY`);o$32=null;}o$32&&a$30.forEach(m$32=>{if(o$32&&o$32.storeNames.indexOf(m$32)===-1){if(!s$25)throw new ut$2.SubTransaction(`Table `+m$32+` not included in parent transaction.`);o$32=null;}}),s$25&&o$32&&!o$32.active&&(o$32=null);}}catch(m$32){return o$32?o$32._promise(null,(l$26,g$19)=>{g$19(m$32);}):ki(m$32);}let c$37=o9.bind(null,this,n$46,a$30,o$32,r$34);return o$32?o$32._promise(n$46,c$37,`lock`):rt$5.trans?Dp(rt$5.transless,()=>this._whenReady(c$37)):this._whenReady(c$37);}table(i$27){if(!Xo$3(this._allTables,i$27))throw new ut$2.InvalidTable(`Table ${i$27} does not exist`);return this._allTables[i$27];}},xue=typeof Symbol<`u`&&`observable`in Symbol?Symbol.observable:`@@observable`,$0=class{constructor(i$27){this._subscribe=i$27;}subscribe(i$27,e$19,r$34){return this._subscribe(i$27&&typeof i$27!=`function`?i$27:{next:i$27,error:e$19,complete:r$34});}[xue](){return this;}};;try{j0={indexedDB:Cr$4.indexedDB||Cr$4.mozIndexedDB||Cr$4.webkitIndexedDB||Cr$4.msIndexedDB,IDBKeyRange:Cr$4.IDBKeyRange||Cr$4.webkitIDBKeyRange};}catch{j0={indexedDB:null,IDBKeyRange:null};}dl=jp$1;$p$1(dl,{...Zb,delete:t$21=>new dl(t$21,{addons:[]}).delete(),exists:t$21=>new dl(t$21,{addons:[]}).open().then(i$27=>(i$27.close(),!0)).catch(`NoSuchDatabaseError`,()=>!1),getDatabaseNames(t$21){try{return function({indexedDB:i$27,IDBKeyRange:e$19}){return z0(i$27)?Promise.resolve(i$27.databases()).then(r$34=>r$34.map(o$32=>o$32.name).filter(o$32=>o$32!==`__dbnames`)):G0(i$27,e$19).toCollection().primaryKeys();}(dl.dependencies).then(t$21);}catch{return ki(new ut$2.MissingAPI());}},defineClass:()=>function(t$21){_o$1(this,t$21);},ignoreTransaction:t$21=>rt$5.trans?Dp(rt$5.transless,t$21):t$21(),vip:x0,async:function(t$21){return function(){try{var i$27=O0(t$21.apply(this,arguments));return i$27&&typeof i$27.then==`function`?i$27:Be$9.resolve(i$27);}catch(e$19){return ki(e$19);}};},spawn:function(t$21,i$27,e$19){try{var r$34=O0(t$21.apply(e$19,i$27||[]));return r$34&&typeof r$34.then==`function`?r$34:Be$9.resolve(r$34);}catch(o$32){return ki(o$32);}},currentTransaction:{get:()=>rt$5.trans||null},waitFor:function(t$21,i$27){let e$19=Be$9.resolve(typeof t$21==`function`?dl.ignoreTransaction(t$21):t$21).timeout(i$27||6e4);return rt$5.trans?rt$5.trans.waitFor(e$19):e$19;},Promise:Be$9,debug:{get:()=>ta$2,set:t$21=>{BJ$1(t$21,t$21===`dexie`?()=>!0:XJ);}},derive:xp,extend:_o$1,props:$p$1,override:PJ,Events:Pf,on:qc$1,liveQuery:Oue,extendObservabilitySet:n9,getByKeyPath:ja,setByKeyPath:pn,delByKeyPath:function(t$21,i$27){typeof i$27==`string`?pn(t$21,i$27,void 0):`length`in i$27&&[].map.call(i$27,function(e$19){pn(t$21,e$19,void 0);});},shallowClone:LJ,deepClone:Uf,getObjectDiff:q0,cmp:Co$1,asap:$J,minKey:-Infinity,addons:[],connections:Of,errnames:B0,dependencies:j0,semVer:`3.2.2`,version:`3.2.2`.split(`.`).map(t$21=>parseInt(t$21)).reduce((t$21,i$27,e$19)=>t$21+i$27/Math.pow(10,2*e$19))}),dl.maxKey=Bf(dl.dependencies.IDBKeyRange),typeof dispatchEvent<`u`&&typeof addEventListener<`u`&&(qc$1(`storagemutated`,t$21=>{if(!Pa){let i$27;hC?(i$27=document.createEvent(`CustomEvent`),i$27.initCustomEvent(`x-storagemutated-1`,!0,!0,t$21)):i$27=new CustomEvent(`x-storagemutated-1`,{detail:t$21}),Pa=!0,dispatchEvent(i$27),Pa=!1;}}),addEventListener(`x-storagemutated-1`,({detail:t$21})=>{Pa||sC(t$21);}));Pa=!1;if(typeof BroadcastChannel<`u`){let t$21=new BroadcastChannel(`x-storagemutated-1`);qc$1(`storagemutated`,i$27=>{Pa||t$21.postMessage(i$27);}),t$21.onmessage=i$27=>{i$27.data&&sC(i$27.data);};}else if(typeof self<`u`&&typeof navigator<`u`){qc$1(`storagemutated`,i$27=>{try{Pa||(typeof localStorage<`u`&&localStorage.setItem(`x-storagemutated-1`,JSON.stringify({trig:Math.random(),changedParts:i$27})),typeof self.clients==`object`&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(e$19=>e$19.postMessage({type:`x-storagemutated-1`,changedParts:i$27})));}catch{}}),typeof addEventListener<`u`&&addEventListener(`storage`,i$27=>{if(i$27.key===`x-storagemutated-1`){let e$19=JSON.parse(i$27.newValue);e$19&&sC(e$19.changedParts);}});let t$21=self.document&&navigator.serviceWorker;t$21&&t$21.addEventListener(`message`,function({data:i$27}){i$27&&i$27.type===`x-storagemutated-1`&&sC(i$27.changedParts);});}Be$9.rejectionMapper=function(t$21,i$27){if(!t$21||t$21 instanceof Op||t$21 instanceof TypeError||t$21 instanceof SyntaxError||!t$21.name||!kJ$1[t$21.name])return t$21;var e$19=new kJ$1[t$21.name](i$27||t$21.message,t$21);return`stack`in t$21&&$a$2(e$19,`stack`,{get:function(){return this.inner.stack;}}),e$19;},BJ$1(ta$2,XJ);Pue=`ovmVersionAudit`,gC=class extends jp$1{constructor(){super(Pue),this.objectStoreName=`versionAudits`,this.version(1).stores({versionAudits:`++id, &key, lastUpdated`});}};VN();a9=(()=>{class t$21{constructor(){this.maxAge=3*86400*1e3,this.maxItems=5e4,this.isEnabled$=jS(O$16.FePlatformKillRefreshOvmPersist),this.logger=C$23(_J),this.destroy$=new M$22(),this.db=null;}init(){this.isEnabled$.pipe(Is$1(e$19=>{e$19&&(this.db=new gC(),this.logger.logMessage(`Enabled`),this.logNumberOfEntriesOnStartup());}),gs(this.destroy$)).subscribe();}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}clean(){return Hi$2(this.cleanOldEntries(),this.cleanTooManyItems()).pipe(q$20(e$19=>e$19.map(r$34=>({id:r$34.objectId,ovmType:r$34.type}))),Is$1(e$19=>this.logger.logCleaned(e$19)));}logNumberOfEntriesOnStartup(){return I$24(this,null,function*(){let e$19=yield this.getVersionAuditStore()?.count();e$19&&this.logger.logMessage(`${e$19} items on startup`);});}removeOne(e$19){return I$24(this,null,function*(){let r$34=yield this.getVersionAuditStore()?.get({key:Gb(e$19)});r$34&&(yield this.getVersionAuditStore()?.delete(r$34.id));});}removeMany(e$19){return I$24(this,null,function*(){for(let r$34=0;r$34<e$19.length;r$34++)yield this.removeOne(e$19[r$34]);});}findOldEntriesIds(){return I$24(this,null,function*(){let e$19=[];return yield this.getVersionAuditStore()?.where(`lastUpdated`).below(Date.now()-this.maxAge)?.each(o$32=>{e$19.push(o$32);}),e$19;});}findMaxItemsIds(){return I$24(this,null,function*(){let e$19=[],r$34=yield this.getVersionAuditStore()?.count();return!r$34||r$34<=this.maxItems||(yield this.getVersionAuditStore()?.orderBy(`id`).limit(r$34-this.maxItems)?.each(s$25=>e$19.push(s$25))),e$19;});}cleanOldEntries(){return I$24(this,null,function*(){let e$19=yield this.findOldEntriesIds();return e$19.length>0&&(yield this.getVersionAuditStore()?.bulkDelete(e$19.map(r$34=>this.getId(r$34)))),e$19;});}cleanTooManyItems(){return I$24(this,null,function*(){let e$19=yield this.findMaxItemsIds();return e$19.length>0&&(yield this.getVersionAuditStore()?.bulkDelete(e$19.map(r$34=>this.getId(r$34)))),e$19;});}upsertOne(e$19){return I$24(this,null,function*(){let r$34=Gb(e$19),o$32=yield this.db?.versionAudits.get({key:r$34});if(!o$32){yield this.getVersionAuditStore()?.add(this.createOvmRecordFromOvmEntry(e$19));return;}yield this.updateRecord(this.getId(o$32),e$19);});}updateOne(e$19){return I$24(this,null,function*(){return this.upsertOne(e$19);});}upsertMany(e$19){return I$24(this,null,function*(){for(let r$34=0;r$34<e$19.length;r$34++)yield this.upsertOne(e$19[r$34]);});}hasId(e$19){return!!e$19.id;}getId(e$19){return t$18(this.hasId(e$19),`persisted record somehow does not have id`),e$19.id;}updateRecord(e$19,r$34){return I$24(this,null,function*(){yield this.getVersionAuditStore()?.update(e$19,this.createOvmRecordFromOvmEntry(r$34));});}getVersionAuditStore(){return this.db?.versionAudits;}createOvmRecordFromOvmEntry(e$19){return{key:Gb(e$19),objectId:e$19.id,type:e$19.ovmType,lastUpdated:Date.now()};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();c9$1=(()=>{class t$21{constructor(e$19,r$34){this.ovmPersistService=e$19,this.actions$=r$34,this.isEnabled$=jS(O$16.FePlatformKillRefreshOvmPersist),this.isEnabled=!1,this.cleanIntervalDuration=3e4,this.cleanOldEntries$=Ke$1(()=>this.isEnabled$.pipe(oe$13(Boolean),le$5(()=>we$3(this.cleanIntervalDuration)),le$5(()=>this.ovmPersistService.clean()),oe$13(o$32=>o$32.length>0),q$20(o$32=>j$14.removeVersionsByEntry({entries:o$32})))),this.upsertOne$=Ke$1(()=>this.actions$.pipe(Ye$2(j$14.setVersion),oe$13(()=>this.isEnabled),q$20(o$32=>this.createOvmEntryFromAction(o$32)),Is$1(o$32=>j$23(this.ovmPersistService.upsertOne(o$32)))),{dispatch:!1}),this.updateOne$=Ke$1(()=>this.actions$.pipe(Ye$2(j$14.markDirty),oe$13(()=>this.isEnabled),q$20(o$32=>this.createOvmEntryFromAction(o$32)),Is$1(o$32=>j$23(this.ovmPersistService.updateOne(o$32)))),{dispatch:!1}),this.removeOne$=Ke$1(()=>this.actions$.pipe(Ye$2(j$14.removeVersion),oe$13(()=>this.isEnabled),q$20(o$32=>this.createOvmEntryFromAction(o$32)),Is$1(o$32=>j$23(this.ovmPersistService.removeOne(o$32)))),{dispatch:!1}),this.removeMany$=Ke$1(()=>this.actions$.pipe(Ye$2(j$14.removeVersions),oe$13(()=>this.isEnabled),q$20(o$32=>this.createOvmEntriesFromAction(o$32)),Is$1(o$32=>j$23(this.ovmPersistService.removeMany(o$32)))),{dispatch:!1}),this.upsertMany$=Ke$1(()=>this.actions$.pipe(Ye$2(j$14.getVersionsSuccess,j$14.setVersions),oe$13(()=>this.isEnabled),Is$1(o$32=>j$23(this.ovmPersistService.upsertMany(o$32.versions)))),{dispatch:!1}),this.removeManyByEntry$=Ke$1(()=>this.actions$.pipe(Ye$2(j$14.removeVersionsByEntry),oe$13(()=>this.isEnabled),Is$1(o$32=>j$23(this.ovmPersistService.removeMany(o$32.entries)))),{dispatch:!1});}ngrxOnRunEffects(e$19){return this.isEnabled$.pipe(Is$1(r$34=>this.isEnabled=r$34),Ve$4(1)).subscribe(),this.ovmPersistService.init(),e$19;}createOvmEntryFromAction(e$19){return{id:e$19.id,ovmType:e$19.ovmType};}createOvmEntriesFromAction(e$19){return e$19.ids.map(r$34=>({id:r$34,ovmType:e$19.ovmType}));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(a9),ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();m9=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,Je$4.forFeature([c9$1])]});}}return t$21;})();VN();dm();Ee$4();VN();l9=(()=>{class t$21{constructor(){this.processInterval=2e3,this.ovmRetryService=C$23(ge$4),this.process$=Ke$1(()=>we$3(this.processInterval).pipe(Is$1(()=>this.ovmRetryService.processItems())),{dispatch:!1});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();d9=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[ge$4,uo$2,ln],imports:[m9,Je$4.forFeature([l9])]});}}return t$21;})();VN();jue=[`container`];r$12(`react-app`,`load`);p9=(()=>{class t$21{constructor(e$19,r$34){this.zone=e$19,this.injector=r$34,this.api=null,r$12(`react-app`,`construct`);}ngOnInit(){return I$24(this,null,function*(){r$12(`react-app`,`init`),r$26(this.zone.runOutsideAngular(()=>I$24(this,null,function*(){this.api=yield import(`./App-4687a1b59d.js`),this.api.render(this.injector,o$28(this.container?.nativeElement));})));});}ngAfterViewInit(){r$12(`react-app`,`after_view_init`);}ngOnDestroy(){this.api?.unmount();}static{this.fac=function(r$34){return new(r$34||t$21)(br(V$16),br(oe$12));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-react-app`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(jue,7),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.container=s$25.first);}},decls:2,vars:0,consts:[[`container`,``]],template:function(r$34,o$32){r$34&1&&pg(0,`div`,null,0);},encapsulation:2,changeDetection:0});}}return t$21;})();VN();dm();Q$18();VN();dm();VN();Lue=500,u9=(()=>{class t$21{constructor(e$19){this.element=e$19,this.disableVerticalMove=!1,this.disableHorizontalMove=!1,this.shouldSetBoundaries=!1,this.onDragEnd=new He$4(),this.onMouseUp=new He$4(),this.mousedown=new He$4(),this.mousemove=new He$4(),this.mouseup=new He$4(),this.disableClick=!1,this.destroy$=new M$22();}onMouseup(e$19){this.mouseup.emit(e$19),this.onMouseUp.emit({top:this.element.nativeElement.style.top,left:this.element.nativeElement.style.left});}onMousemove(e$19){this.mousemove.emit(e$19);}ngOnInit(){this.moveHandle.style.cursor=`pointer`,this.moveHandle.style.userSelect=`none`,this.mousedrag=this.mousedown.pipe(q$20(e$19=>({top:e$19.clientY-this.element.nativeElement.getBoundingClientRect().top,left:e$19.clientX-this.element.nativeElement.getBoundingClientRect().left})),Z$12(e$19=>this.mousemove.pipe(Os$3(10),q$20(r$34=>({top:r$34.clientY-e$19.top,left:r$34.clientX-e$19.left})),gs(this.mouseup))),gs(this.destroy$)),this.moveHandle.addEventListener(`mousedown`,e$19=>{this.mousedown.emit(e$19);}),this.mousedrag.subscribe(e$19=>{this.updateElementPosition(e$19),this.handleDragEnd();});}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}updateElementPosition({top:e$19,left:r$34}){let o$32=e$19,s$25=r$34;if(this.shouldSetBoundaries){let n$46=this.element.nativeElement.getBoundingClientRect().height,a$30=this.element.nativeElement.getBoundingClientRect().width;e$19<0?o$32=0:e$19+n$46>window.innerHeight&&(o$32=window.innerHeight-n$46),r$34<0?s$25=0:r$34+a$30>window.innerWidth&&(s$25=window.innerWidth-a$30);}this.disableVerticalMove||(this.element.nativeElement.style.top=`${o$32}px`),this.disableHorizontalMove||(this.element.nativeElement.style.left=`${s$25}px`);}handleDragEnd(){this.dragSetTimeout&&clearTimeout(this.dragSetTimeout),this.dragSetTimeout=setTimeout(()=>{this.onDragEnd.emit();},Lue);}static{this.fac=function(r$34){return new(r$34||t$21)(br(Cr$3));};}static{this.dir=xE$1({type:t$21,selectors:[[``,`cuMovable`,``]],hostBindings:function(r$34,o$32){r$34&1&&Fg(`mouseup`,function(n$46){return o$32.onMouseup(n$46);},tv)(`mousemove`,function(n$46){return o$32.onMousemove(n$46);},tv);},inputs:{disableVerticalMove:`disableVerticalMove`,disableHorizontalMove:`disableHorizontalMove`,shouldSetBoundaries:`shouldSetBoundaries`,moveHandle:`moveHandle`},outputs:{onDragEnd:`onDragEnd`,onMouseUp:`onMouseUp`}});}}return S$20([c$25()],t$21.prototype,`moveHandle`,void 0),t$21;})();VN();f9=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1]});}}return t$21;})();VN();Nue=t$21=>({top:t$21});r$12(`chat-bot-trigger`,`load`);h9=`support-btn-position`,g9$1=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.localStorage=s$23(),this.chatBotService=C$23(ae$5),this.showChatBot$=this.store.select(l$1).pipe(Is$1(e$19=>{e$19&&this.setInitialPosition();})),this.initialPosition=`45%`,r$12(`chat-bot-trigger`,`construct`);}ngOnInit(){r$12(`chat-bot-trigger`,`init`),this.setInitialPosition();}ngAfterViewInit(){r$12(`chat-bot-trigger`,`after_view_init`);}onMouseUp({top:e$19}){this.localStorage.set(h9,e$19);}triggerChatBot(){this.chatBotService.open();}removeTrigger(){this.chatBotService.hideTrigger();}setInitialPosition(){this.initialPosition=this.localStorage.get(h9)??this.initialPosition;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-chat-bot-trigger`]],decls:2,vars:3,consts:()=>{let e$19;e$19="Move support button";let r$34;r$34="Hide support button";let o$32;return o$32=""+`#6`+""+`/#6`+" Support ",[[`moveHandle`,``],o$32,[`cuMovable`,``,1,`cu-chat-bot-trigger__container`,3,`ngStyle`,`moveHandle`,`disableHorizontalMove`,`shouldSetBoundaries`],[`cuMovable`,``,1,`cu-chat-bot-trigger__container`,3,`onMouseUp`,`ngStyle`,`moveHandle`,`disableHorizontalMove`,`shouldSetBoundaries`],[`aria-label`,e$19,1,`cu-chat-bot-trigger__move-handle`],[3,`name`],[`cu3Button`,``,1,`cu-chat-bot-trigger`,3,`click`,`buttonType`],[`cu3Leading`,``,3,`name`],[`cu3IconButton`,``,`aria-label`,r$34,1,`cu-chat-bot-trigger__close`,3,`click`,`size`,`buttonType`]];},template:function(r$34,o$32){r$34&1&&(HD(0,Bue,9,12,`div`,2),YT(1,`async`)),r$34&2&&BD(JT(1,1,o$32.showChatBot$)?0:-1);},dependencies:[gi$1,Wn,T$17,ie$3,D$11,I$14,K$12,M$14,j$16,f9,u9,qn],styles:[`.cu-chat-bot-trigger__container[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;height:fit-content;padding-left:30px;position:absolute;right:0;transform:rotate(-90deg);transform-origin:bottom right;z-index:1001}.cu-chat-bot-trigger__container[_ngcontent-%COMP%]:hover   .cu-chat-bot-trigger__close[_ngcontent-%COMP%], .cu-chat-bot-trigger__container[_ngcontent-%COMP%]:hover   .cu-chat-bot-trigger__move-handle[_ngcontent-%COMP%]{opacity:1}.cu-chat-bot-trigger__move-handle[_ngcontent-%COMP%]{background:none;border:none;font-size:18px}.cu-chat-bot-trigger__close[_ngcontent-%COMP%], .cu-chat-bot-trigger__move-handle[_ngcontent-%COMP%]{opacity:0}.cu-chat-bot-trigger[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}`],changeDetection:0});}}return t$21;})();VN();dm();hr$3();VN();VN();y9=(()=>{class t$21{constructor(e$19){this.store=e$19,this.shouldUseSidebarMode$=this.store.select(gt$1);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Uue=[`container`];r$12(`task_keeper`,`load`);v9=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30){this.sharedTaskService=e$19,this.dynamicComponentLoader=r$34,this.store=o$32,this.performanceTimingService=s$25,this.taskViewModeService=n$46,this.splitScreenService=a$30,this.destroy$=new M$22(),this.chatModalEvents=C$23(v$14),this.injector=C$23(oe$12),this.ngZone=C$23(V$16),this.taskViewComponent$=gt$2(()=>this.dynamicComponentLoader.getLazyComponent(import(`./task-view-public-ui.module-96b18d5640.js`).then(c$37=>({module:c$37.TaskViewPublicUiModule,component:c$37.TaskViewComponent})))).pipe(ys$1({bufferSize:1,refCount:!0})),this.showTaskViewSidebar$=this.taskViewModeService.shouldUseSidebarMode$,this.reuseView=!1,this.isSplitScreenSidebarEnabled$=$i([this.splitScreenService.isSplitScreenSupported$,this.splitScreenService.isSplitScreenTaskEnabled$]).pipe(q$20(([c$37,m$32])=>c$37&&m$32),ws$2(!1)),this.showTaskViewRightSidebar$=$i([this.isSplitScreenSidebarEnabled$,this.showTaskViewSidebar$]).pipe(q$20(([c$37,m$32])=>c$37&&m$32)),this.previousRace=null,r$12(`task_keeper`,`construct`),Gu()&&this.taskViewComponent$.pipe(Ve$4(1),gs(this.destroy$)).subscribe();}ngOnInit(){r$12(`task_keeper`,`init`),et$7({timeout:6e4}).pipe(le$5(()=>this.taskViewComponent$),gs(this.destroy$)).subscribe(),this.sharedTaskService.onLayoutChange.pipe(As$3(this.isSplitScreenSidebarEnabled$),gs(this.destroy$)).subscribe(([{openInSidebar:e$19},r$34])=>{r$34&&this.moveComponentBasedOnLayout(!!e$19);}),$i([this.sharedTaskService.onOpen,this.showTaskViewSidebar$.pipe(Ve$4(1))]).pipe(As$3(this.showTaskViewRightSidebar$),gs(this.destroy$)).subscribe(([[e$19],r$34])=>{r$34&&e$19.isOpen?this.store.dispatch(Bt$5({taskInfo:e$19})):(this.closeTask(),this.chatModalEvents.emitCloseAll(),xf(()=>{this.ngZone.run(()=>this.openTaskV3(e$19,r$34));},{injector:this.injector}));}),this.sharedTaskService.onClose.pipe(gs(this.destroy$)).subscribe(this.closeTask.bind(this));}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.componentRef&&(this.componentRef.destroy(),this.componentRef=null);}ngAfterViewInit(){r$12(`task_keeper`,`after_view_init`);}closeTaskFromHomeRedirect(){this.sharedTaskService.closeTaskWithNoRouting();}openTaskV3(e$19,r$34){e$19.clearPerformanceTiming&&this.performanceTimingService.handleNavigation(e$19.id);let o$32=typeof e$19==`string`?e$19:e$19.id||``,s$25=typeof e$19==`string`?``:e$19.commentId??``;this.componentRef?(this.container.insert(this.componentRef.hostView),this.componentRef.instance.setTaskData(o$32,{initStaleTabListener:!0,app:e$19.app,contentSection:e$19.contentSection}),this.componentRef.hostView.detectChanges()):(this.previousRace&&this.previousRace.unsubscribe(),this.previousRace=ts$2(this.taskViewComponent$,this.sharedTaskService.onClose.pipe(q$20(()=>!1))).subscribe(n$46=>{if(this.previousRace=null,n$46){let a$30=!1;if(r$34){let c$37=this.splitScreenService.renderComponentIntoSidebar({component:n$46.component,injector:n$46.injector,identity:{type:W$9.Task,name:`Task View`}});c$37&&(a$30=!0,this.componentRef=c$37);}(!r$34||!this.componentRef)&&(this.componentRef=this.container.createComponent(n$46.componentFactory)),this.componentRef?.instance?.setTaskData(o$32,{app:e$19.app,contentSection:e$19.contentSection,commentId:s$25,initStaleTabListener:!0,isSplitScreen:a$30}),this.componentRef.changeDetectorRef.detectChanges();}}));}closeTask(){this.splitScreenService.clearTab(W$9.Task),this.reuseView?this.container.detach():(this.componentRef=null,this.container.length>0&&this.container.remove(0));}moveComponentBasedOnLayout(e$19){this.componentRef&&this.isComponentInSidebar().pipe(Ve$4(1),gs(this.destroy$)).subscribe(r$34=>{e$19!==r$34&&(e$19?this.moveComponentToSidebar():this.moveComponentToLocalContainer());});}isComponentInSidebar(){return this.componentRef?.hostView?this.splitScreenService.activeTabs$.pipe(q$20(r$34=>r$34.some(o$32=>o$32.type===W$9.Task&&o$32.ref===this.componentRef))):qe$6(!1);}moveComponentToSidebar(){if(!this.componentRef)return;let e$19=this.componentRef.hostView,r$34=this.container.indexOf(e$19);r$34!==-1&&this.container.detach(r$34);let o$32=this.splitScreenService.renderExistingComponentIntoSidebar({componentRef:this.componentRef,identity:{type:W$9.Task,name:`Task View`}});o$32&&(this.componentRef=o$32);}moveComponentToLocalContainer(){this.componentRef&&(this.splitScreenService.clearTab(W$9.Task,!1),this.container.insert(this.componentRef.hostView));}static{this.fac=function(r$34){return new(r$34||t$21)(br(ty),br(C$15),br(q$19),br(Fe$2),br(y9),br(Ge));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-task-keeper`]],viewQuery:function(r$34,o$32){if(r$34&1&&zC(Uue,7,Mi$1),r$34&2){let s$25;QC(s$25=ZC())&&(o$32.container=s$25.first);}},decls:2,vars:0,consts:[[`container`,``]],template:function(r$34,o$32){r$34&1&&yg(0,null,0);},encapsulation:2,changeDetection:0});}}return t$21;})();VN();dm();hr$3();VN();r$12(`doc_keeper`,`load`);S9=`doc-modal`,Hue=t$21=>{let{layoutV4:i$27,layoutV4ia:e$19,docsV4ModalOnlyExpanded:r$34,isTaskViewOpen:o$32,taskViewMode:s$25}=t$21;return r$34&&i$27&&(e$19||o$32&&s$25!==c$32.Full||!o$32);},b9=t$21=>{let{layoutV4:i$27,layoutV4ia:e$19,layoutV3:r$34,bottomBarVisible:o$32}=t$21,s$25=`cu-modal_doc`;return i$27&&(s$25+=` layout-v4`),e$19&&(s$25+=` layout-v4-ia`),r$34&&(s$25+=` layout-v3`),Hue(t$21)&&(s$25+=` cu-modal_doc-v4`),t$21.isSplitScreenEnabled&&(s$25+=` cu-modal_active-right-sidebar`),o$32&&(s$25+=` cu-modal_bottom-bar-visible`),s$25;},C9=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37){this.sharedDocService=e$19,this.effects=r$34,this.modalService=o$32,this.layoutService=s$25,this.store=n$46,this.sharedTaskService=a$30,this.trayFacade=c$37,this.isLayoutV4$=n$35(),this.splitScreenService=C$23(Ge),this.modalOnlyExpanded$=y$7(`doc-modal-only-expanded`),this.chatModals=C$23(F$14),this.layoutV4Service=C$23(ge$6),this.isLayoutV4ia$=this.layoutV4Service.isLayoutV4ia(),this.bottomBarVisible$=this.trayFacade.trayBarVisible$,r$12(`doc_keeper`,`construct`);}ngOnInit(){r$12(`doc_keeper`,`init`),this.sharedDocService.onOpenModalStart.pipe(le$5(e$19=>e$19.injector.get(C$15).getLazyComponent(import(`./dashboard-doc-page.module-716ef6ae44.js`).then(o$32=>({module:o$32.DashboardDocPageModule,component:o$32.DashboardDocPageComponent}))).pipe(As$3(this.layoutService.layoutV3$,this.isLayoutV4$,this.isLayoutV4ia$,this.modalOnlyExpanded$,this.store.select(V2),this.sharedTaskService.isOpen$,this.splitScreenService.isSplitScreenEnabled$,this.bottomBarVisible$),q$20(([{componentFactory:o$32},s$25,n$46,a$30,c$37,m$32,l$26,g$19,f$33])=>({componentFactory:o$32,layoutV3:s$25,layoutV4:n$46,layoutV4ia:a$30,docsV4ModalOnlyExpanded:c$37,taskViewMode:m$32,isTaskViewOpen:l$26,isSplitScreenEnabled:g$19,bottomBarVisible:f$33,...e$19})))),this.effects.untilDestroy()).subscribe(({componentFactory:e$19,injector:r$34,teamId:o$32,viewId:s$25,pageId:n$46,options:a$30,commentId:c$37,blockId:m$32,threadedCommentId:l$26,layoutV3:g$19,layoutV4:f$33,layoutV4ia:h$15,docsV4ModalOnlyExpanded:I$25,isTaskViewOpen:A$22,taskViewMode:R$21,isSplitScreenEnabled:w$26,bottomBarVisible:E$16})=>{this.chatModals.closeAll(),a$30?.customBackLink?this.sharedDocService.setBackLink(a$30.customBackLink):a$30?.preserveBackLink||this.sharedDocService.setBackLinkWithCurrentLocation();let P$20=this.modalService.openComponentFactory(e$19,oe$12.create({parent:r$34,providers:[{provide:q$11,useClass:q$11}]}),{modifier:b9({layoutV3:g$19,layoutV4:f$33,layoutV4ia:h$15,docsV4ModalOnlyExpanded:I$25,isTaskViewOpen:A$22,taskViewMode:R$21,isSplitScreenEnabled:w$26,bottomBarVisible:E$16}),name:S9,trackVia:a$30?.trackVia,keepOpened:!0,blank:!0,disableEscape:!0,persistAfterRouting:a$30?.persistAfterRouting,dialogModifier:`cu-modal__dialog_doc`,payload:{doc:{teamId:o$32,viewId:s$25,pageId:n$46}}},{via:a$30?.via??a$30?.trackVia?.via});this.sharedDocService.setState({isOpen:!0}),P$20.instance.changeLocation=a$30?.changeLocation||a$30?.changeLocation===void 0,P$20.instance.isModal=!0,P$20.instance.reloadPageOnNavigate=!0,P$20.instance.viewId=s$25,P$20.instance.pageId=n$46,P$20.instance.teamId=o$32,P$20.instance.blockId=m$32,P$20.instance.commentId=c$37,P$20.instance.viaDetails=a$30?.viaDetails,(a$30?.threadedCommentId||l$26)&&(P$20.instance.threadedCommentId=a$30?.threadedCommentId||l$26),P$20.instance.setData(s$25,n$46,a$30?.initialView,a$30?.initialPage,c$37),a$30?.collapseSidebar&&P$20.instance.collapseSidebarByDefault(),a$30?.openWithRightSidebarState&&P$20.instance.setRightSidebarStateAfterViewLoaded(a$30.openWithRightSidebarState),a$30?.defaultTab&&P$20.instance.setRightSidebarTab(a$30.defaultTab),a$30?.renameDoc&&P$20.instance.startEditingDocName(),P$20.changeDetectorRef.detectChanges();}),this.listenToVersionChange();}ngAfterViewInit(){r$12(`doc_keeper`,`after_view_init`);}listenToVersionChange(){this.effects.register($i([this.layoutService.layoutV3$,this.isLayoutV4$,this.isLayoutV4ia$,this.modalOnlyExpanded$,this.store.select(V2),this.sharedTaskService.isOpen$,this.splitScreenService.isSplitScreenEnabled$,this.bottomBarVisible$]).pipe(P$15()),([e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32])=>{let l$26=b9({layoutV3:e$19,layoutV4:r$34,layoutV4ia:o$32,docsV4ModalOnlyExpanded:s$25,isTaskViewOpen:a$30,taskViewMode:n$46,isSplitScreenEnabled:c$37,bottomBarVisible:m$32});this.modalService.setModalModifierByName(S9,l$26);});}static{this.fac=function(r$34){return new(r$34||t$21)(br(Q$7),br(F$19),br(V$10),br(E$9),br(q$19),br(ty),br(bt$1));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-doc-keeper`]],features:[VT([F$19])],decls:0,vars:0,template:function(r$34,o$32){},encapsulation:2,changeDetection:0});}}return t$21;})();VN();_9=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`docManager`,L$1)]});}}return t$21;})();VN();dm();VN();zue=[`/not-authorized`,`/not-found`,`/not-found-team`,`/not-authenticated`],que=[`/login`,`/signup`,`/teamInvite`,`/api`],Kue=[...zue,...que,`/onboarding`,`/team-setup/new`,`/team-setup/project`,`/team-setup/join`,`/team-setup/join-existing`,`/team-setup/ai`,`/team-setup/additional`,`/team-setup/reset`,`/join-team`,`/docs/`,`/forms/`,`/sharing/`,`/performance/`],yC=(()=>{class t$21{constructor(){this.showHeader$=new tt$3(!1),this.destroyRef=C$23(at$11),this.router=C$23(x$22),this.route=C$23(z$14);}init(){this.router.events.pipe(oe$13(e$19=>e$19 instanceof M$20),F$22(this.destroyRef)).subscribe(e$19=>{this.showHeader$.next(this.shouldShowHeaderByUrl(e$19.url));});}shouldShowHeaderByUrl(e$19){return!Kue.some(r$34=>e$19.startsWith(r$34))&&!(this.route.snapshot.queryParamMap.has(`hide-header`)||f$20());}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();r$12(`app_view_toast_initializer`,`load`);k9=(()=>{class t$21{constructor(){r$12(`app_view_toast_initializer`,`construct`);}ngAfterViewInit(){r$12(`app_view_toast_initializer`,`after_view_init`);}ngOnInit(){r$12(`app_view_toast_initializer`,`init`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-app-view-toast-initializer`]],decls:3,vars:2,consts:[[3,`position`]],template:function(r$34,o$32){r$34&1&&fg$1(0,`cu-toast-lazy-wrapper`)(1,`cu-toast-lazy-wrapper`,0)(2,`cu-toast-lazy-wrapper`,0),r$34&2&&(vv(),dg(`position`,`center`),vv(),dg(`position`,`right`));},dependencies:[D],encapsulation:2,changeDetection:0});}}return t$21;})();VN();VN();T9=(()=>{class t$21{constructor(){this.syntheticMarkerService=C$23(N$12),this.measured=!1,this.componentNames=[`attachments_viewer`,`cfm_keeper`,`doc_keeper`,`global_actions_bar`,`global_gradient`,`maintenance_container`,`modal_keeper`,`page_modal`,`task_keeper`,`app_view_toast_initializer`,`react-app`,`cu3-icons`,`chat-bot-trigger`],this.performanceMarks=new Map();}appViewRendered(){this.measured||this.createMarkers();}createMarkers(){this.syntheticMarkerService.onReady(()=>{this.collectPerformanceMarks();for(let e$19=0;e$19<this.componentNames.length;e$19++){let r$34=this.componentNames[e$19],o$32=this.createMetricMarkersFor(r$34);if(!(!o$32.construct||!o$32.afterViewInit||!o$32.init||!o$32.load))try{let s$25=this.syntheticMarkerService.createSyntheticMarker(`app_bootstrap.component.${r$34}`).setDependencies([o$32.construct,o$32.afterViewInit,o$32.init,o$32.load]).setStartMarker(o$32.construct).setEndMarker(o$32.afterViewInit);this.syntheticMarkerService.adoptHistoricAndOprhanMarkers(s$25),s$25.isReadyToReport()&&this.syntheticMarkerService.reportSynthetic(s$25);}catch{}}this.performanceMarks.clear(),this.measured=!0;});}collectPerformanceMarks(){if(this.performanceMarks.size>0)return;let e$19=performance.getEntriesByType(`mark`);for(let r$34=0;r$34<e$19.length;r$34++){let o$32=e$19[r$34];o$32 instanceof PerformanceMark&&o$32.name.startsWith(`angular.component`)&&this.performanceMarks.set(o$32.name,o$32);}}createMetricMarkersFor(e$19){return{construct:this.createMarker(e$19,`construct`),afterViewInit:this.createMarker(e$19,`after_view_init`),load:this.createMarker(e$19,`load`),init:this.createMarker(e$19,`init`)};}createMarker(e$19,r$34){let o$32=`angular.component.${e$19}.${r$34}`,s$25=this.performanceMarks.get(o$32);if(s$25)return this.syntheticMarkerService.createMetricMarkerFromPerformanceMark(s$25);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();hr$3();VN();dm();hr$3();VN();I9=(()=>{class t$21{constructor(){this.router=C$23(x$22),this.route=C$23(z$14),this.store=C$23(q$19),this.destroyRef=C$23(at$11),this.inboxUnreadCountsService=C$23(d$5),this.titleService=C$23(Gt$1),this.sharedTaskService=C$23(ty),this.pausedNotificationsService=C$23(S),this.isLayoutV4$=n$35();}init(){$i([this.router.events.pipe(oe$13(e$19=>e$19 instanceof M$20),le$5(()=>{let e$19=this.route,r$34;for(;e$19.firstChild;)e$19.snapshot.data.stateName===`manager`&&(r$34=e$19),e$19=e$19.firstChild;return $i([r$34?r$34.data:qe$6(null),e$19.data,qe$6(a$18(e$19.snapshot))]);})),this.store.select(de$10),this.store.select(h$13),this.store.select(x$24),this.store.select(P$18),this.store.select(b$10),this.inboxUnreadCountsService.notificationsUnreadCountFormatted$,this.pausedNotificationsService.pausedNotifications$,this.isLayoutV4$,this.store.select(Xc$1)]).pipe(F$22(this.destroyRef)).subscribe(([[e$19,r$34,o$32],s$25,n$46,a$30,c$37,m$32,l$26,g$19,f$33,h$15])=>{let I$25=`ClickUp`;if(r$34)if(e$19){let A$22,R$21=``;if(r$34.title){if(A$22=r$34.title,r$34.showSidebarContextInTitle){if(n$46)a$30?c$37?(A$22=`${c$37.name}`,R$21=` (${r$34.title})`):(A$22=`${a$30.name}`,R$21=` (${r$34.title})`):(A$22=n$46.name??(n$46.access?"All Folders":"Shared with me"),R$21=` (${r$34.title})`);else{let E$16=f$33?"All Tasks":"Everything";A$22=h$15?"Shared with me":E$16,R$21=` (${r$34.title})`;}m$32&&m$32.name&&(A$22=`${m$32.name} | ${A$22}`);}r$34.isInbox&&l$26&&!g$19&&(A$22=`(${l$26}) `+A$22),s$25&&(A$22+=` | ${s$25.name}`);}A$22||=I$25,A$22+=R$21,!this.sharedTaskService.isOpen&&!r$34.isDocView&&!r$34.isClipPage&&!o$32.isChat&&!o$32.isAi&&!r$34.isWhiteboardView&&this.titleService.setTitle(A$22||I$25);}else[`login`,`onboarding`,`signup`].includes(r$34.id)&&(this.sharedTaskService.isOpen||this.titleService.setTitle(r$34.title));});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();hr$3();VN();E9=(()=>{class t$21{constructor(){this.destroyRef=C$23(at$11),this.router=C$23(x$22),this.splitService=C$23(Qn),this.store=C$23(q$19),this.userStateFacade=C$23(U$15),this.viewsHandleLastKnownLocationRoutingConfig$=this.splitService.getTreatmentWithConfig(O$16.ViewsHandleLastKnownLocationRouting).pipe(q$20(e$19=>e$19.treatment===d$20.ON&&e$19.config?n$43(e$19.config):null));}init(){this.router.events.pipe(oe$13(e$19=>e$19 instanceof M$20),As$3(this.store.select(de$10),this.userStateFacade.userId$,this.viewsHandleLastKnownLocationRoutingConfig$),F$22(this.destroyRef)).subscribe(([e$19,r$34,o$32,s$25])=>{this.setLastUrl(this.router.url,r$34.id,o$32,s$25);});}setLastUrl(e$19,r$34,o$32,s$25){if(!s$25){s$23().remove(Es$2);return;}let a$30=(s$25.pathsToIgnore??[]).some(c$37=>new RegExp(c$37).test(e$19));if(r$34&&o$32&&!a$30){let c$37=c$22();c$37[`${r$34}_${o$32}`]=e$19,s$23().set(Es$2,c$37);}}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Q0=F$23(u$17());VN();A9=(()=>{class t$21{constructor(){this.httpPatterns=(0,Q0.default)([`onedrive\\.live\\.com\\/`,`figma\\.com\\/(login|finish_embed_login)`,`accounts\\.google\\.com\\/`,`login\\.microsoftonline\\.com\\/`,`login\\.live\\.com\\/`,`dropbox\\.com\\/.*chooser\\?`,`dropbox\\.com\\/dropins`,`app\\.box\\.com\\/`,`accounts\\.box\\.com\\/`,`account\\.box\\.com\\/`,`app\\.asana\\.com\\/.*-\\/oauth_authorize`,`trello\\.com\\/.*1\\/OAuthAuthorizeToken`,`trello\\.com\\/authenticate_openid`,`todoist\\.com\\/.*oauth\\/authorize`,`todoist\\.com\\/Users\\/login`,`launchpad\\.37signals\\.com\\/`,`id\\.getharvest\\.com\\/`,`platform\\.harvestapp\\.com\\/platform\\/`,`(azure|api)\\.clickup\\.com\\/v1\\/team\\/\\d+\\/(microsoft|okta|saml)\\/(login|consume)`,`(azure|api)\\.clickup-stg\\.com\\/v1\\/team\\/\\d+\\/(microsoft|okta|saml)\\/(login|consume)`,`wrike\\.com\\/`,`github\\.com\\/session`,`miro\\.com\\/`,`accounts\\.skilljar\\.com\\/`,`app\\.clickup-qa\\.com\\/`,`pull-requests\\.clickup\\.com\\/`]),this.nonHttpPatterns=(0,Q0.default)([`about:blank\\?miro=true`]);}get desktopInternalURLsPattern(){return`^(https?:\\/\\/(www\\.)?(${this.concatPatterns(this.httpPatterns)}).*)$|^${this.concatPatterns(this.nonHttpPatterns)}$`;}init(){return I$24(this,null,function*(){return te$6(this.desktopInternalURLsPattern);});}concatPatterns(e$19){return e$19.map(r$34=>`(${r$34})`).join(`|`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();VN();w9=`openProtocolURL`,M9=(()=>{class t$21{constructor(e$19,r$34){this.router=e$19,this.desktopAuth=r$34,this.openProtocolUrl$=n$45()?It$4(ke$2,w9):z$18;}handleEvent(e$19){let{pathname:r$34,search:o$32}=new URL(e$19.url);r$34===this.desktopAuth.oauthCallbackPath?this.desktopAuth.browserCallbackReceived(e$19.url):this.router.navigateByUrl(r$34+o$32);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(x$22),ge$10(up));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();n$45()&&ke$2&&ce$5(w9,(t$21,i$27)=>{i$27.preventDefault();});VN();P9=(()=>{class t$21{constructor(e$19){this.splitService=e$19,this.initialized=!1,this.stopPolling=null,this.baseInterval=9e4,this.offsetRange=15e3,this.idleCallbackTimeout=2e3;}init(){this.initialized||!n$45()||!window.desktop||(this.initialized=!0,this.splitService.getSplitChangeIsTreatmentOnByFlag$({name:O$16.FePlatformDesktopResourcePolling}).subscribe(e$19=>{e$19?(this.pollMemory(),this.scheduleMemoryPolling()):this.clearPollingInterval();}));}clearDatadogResourceMetrics(){Ni$1.setGlobalContextProperty(`resources`,{});}clearPollingInterval(){this.stopPolling&&(Ni$1.addAction(`desktopResourceMetricsStopped`),this.stopPolling(),this.stopPolling=null);}gatherResourceMetrics(){return I$24(this,null,function*(){if(window.desktop?.resources?.getResources)try{let e$19=yield window.desktop.resources.getResources();Ni$1.addAction(`desktopResourceMetricsUpdated`,{resources:e$19}),Ni$1.setGlobalContextProperty(`resources`,e$19);}catch(e$19){this.clearDatadogResourceMetrics(),this.clearPollingInterval(),fA(e$19,{feature:`desktop-app`});}else this.clearDatadogResourceMetrics();});}gatherMetricsInAnimationFrame(){O9(this.gatherResourceMetrics.bind(this));}pollMemory(){x9(this.gatherMetricsInAnimationFrame.bind(this),this.idleCallbackTimeout);}scheduleMemoryPolling(){this.stopPolling=F9(this.pollMemory.bind(this),this.baseInterval,this.offsetRange);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Qn));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();$9=(()=>{class t$21{constructor(e$19,r$34,o$32){this.store=e$19,this.splitService=r$34,this.notificationsTrackingService=o$32,this.initialized=!1,this.ignorePatterns=[],this.errorThrottleMap=new Map(),this.ERROR_THROTTLE_DURATION_MS=3e4,this.CLEANUP_INTERVAL_MS=3e5;}init(){if(this.initialized||!n$45()||!window.desktop)return;this.initialized=!0,this.startCleanupInterval(),this.store.select(b$17).subscribe(s$25=>{window.desktop?.track?.setUserId?.(s$25?.id??null);}),this.splitService.getSplitChangeByConfigByFlag$({name:O$16.DesktopErrorTrackingFilters}).subscribe(s$25=>{if(s$25.config){let n$46=n$43(s$25.config);this.ignorePatterns=Array.isArray(n$46?.ignore)?n$46.ignore.map(a$30=>new RegExp(a$30)):[];}});let e$19=({error:s$25,properties:n$46})=>{s$25 instanceof Error&&(s$25.stack=n$46.stackTrace);let a$30=s$25 instanceof Error?s$25.message:typeof s$25==`string`?s$25:null;a$30&&this.ignorePatterns.some(c$37=>c$37.test(a$30))||a$30&&this.shouldThrottleError(a$30)||fc(s$25,n$46);},r$34=({action:s$25,context:n$46})=>{er$2(s$25,n$46);},o$32=({event:s$25,props:n$46})=>{this.notificationsTrackingService.track(s$25,n$46);};window.desktop.track.onError?.(e$19),window.desktop.track.onAction?.(r$34),window.desktop.track?.setIsInitialized?.(!0),window.desktop.track?.onNotificationEvent?.(o$32);}ngOnDestroy(){this.cleanupInterval&&q$16(this.cleanupInterval);}shouldThrottleError(e$19){let r$34=Date.now(),o$32=this.errorThrottleMap.get(e$19);return!o$32||r$34-o$32>=this.ERROR_THROTTLE_DURATION_MS?(this.errorThrottleMap.set(e$19,r$34),!1):!0;}startCleanupInterval(){this.cleanupInterval=L$11(()=>{this.cleanupThrottleMap();},this.CLEANUP_INTERVAL_MS);}cleanupThrottleMap(){let r$34=Date.now()-this.ERROR_THROTTLE_DURATION_MS;for(let[o$32,s$25]of this.errorThrottleMap.entries())s$25<r$34&&this.errorThrottleMap.delete(o$32);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Qn),ge$10(ji));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();hr$3();VN();N9=(()=>{class t$21{constructor(){this.zone=C$23(V$16),this.destroyRef=C$23(at$11),this.router=C$23(x$22),this.desktopInternalUrlsService=C$23(A9),this.desktopRoutingScheduler=C$23(M9),this.zoneScheduler=C$23(ue$5),this.desktopCommunicationService=C$23(Oe$2),this.desktopTrackService=C$23($9),this.desktopResourcesService=C$23(P9),this.desktopWindowService=C$23(wt$3),this.desktopShortcutsService=C$23(Z$3),this.sharedTaskService=C$23(ty);}init(){this.desktopCommunicationService.init(),this.desktopTrackService.init(),this.desktopResourcesService.init(),this.desktopWindowService.init(),n$45()&&this.initDesktopAppClient();}initDesktopAppClient(){this.desktopInternalUrlsService.init(),this.zone.runOutsideAngular(()=>{Hi$2(new x$27(s$25=>{let n$46=window.open;return window.open=(a$30,c$37,...m$32)=>{let l$26=a$30?.toString();if(l$26&&c$37===`_blank`&&l$26.startsWith(window.location.origin)&&!l$26.startsWith(window.location.origin+`/assets/html/`))s$25.next(l$26);else return n$46(a$30,c$37,...m$32);},()=>{window.open=n$46;};}),It$4(window,`click`).pipe(oe$13(s$25=>{let n$46=s$25.target,a$30=n$46.getAttribute(`href`);return n$46.tagName.toLowerCase()===`a`&&(n$46.getAttribute(`target`)===`_blank`||s$25[e$13])&&a$30?.startsWith(window.location.origin);}),q$20(s$25=>(s$25.preventDefault(),s$25.target.getAttribute(`href`))))).pipe(this.zoneScheduler.observeOnNgZone(),F$22(this.destroyRef)).subscribe(s$25=>this.navigateToTargetUrl(s$25)),document.addEventListener(`auxclick`,s$25=>s$25.preventDefault()),j9(`File`,`Print`,()=>window.print(),{accelerator:`CommandOrControl+P`}).then(()=>L9$1()),this.desktopRoutingScheduler.openProtocolUrl$.pipe(F$22(this.destroyRef)).subscribe(([,s$25])=>{this.zone.run(()=>{this.desktopRoutingScheduler.handleEvent(s$25);});}),this.desktopShortcutsService.register();});}navigateToTargetUrl(e$19){let{pathname:o$32,searchParams:s$25}=new URL(e$19),n$46=e$19.replace(window.location.origin,``);if(D9(window.location.origin,e$19)&&oO(o$32)){let a$30=Gu(o$32),c$37=s$25.get(`comment`),m$32=s$25.get(`threadedComment`),l$26=!!m$32;this.sharedTaskService.goToHighlightedCommentDelayed({taskId:a$30.id,commentId:l$26?m$32:c$37,parentCommentId:l$26?c$37:``,threadComment:l$26}),this.sharedTaskService.openTaskModal(a$30,c$37);}else this.sharedTaskService.isOpen&&this.sharedTaskService.closeTaskAndGoBackToPreviousPage(),this.router.navigateByUrl(n$46);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();dm();hr$3();VN();B9=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.sharingPerformanceService=C$23(N$7),this.modalService=C$23(V$10),this.dynamicComponentLoader=C$23(C$15),this.injector=C$23(oe$12),this.destroyRef=C$23(at$11),this.segmentService=C$23(_b$1);}init(){this.store.select(xs).pipe(R$20()).pipe(le$5(e$19=>$i([this.dynamicComponentLoader.getLazyComponent(import(`./src-e381dee14d.js`).then(r$34=>({module:r$34.ShareEntityModule,component:r$34.ShareEntityComponent}))),qe$6(e$19),this.store.select(h$13),this.store.select(Q$16(e$19.item?.project_id))]).pipe(Ve$4(1)))).subscribe(([{componentFactory:e$19},r$34,o$32,s$25])=>{let n$46=o$32??s$25,a$30={};r$34.itemType===t$12.Task&&(a$30.objectType=et$6.TASK,a$30.objectId=r$34.item?.id),this.segmentService.track(Bu.ClickShare,{via:r$34.itemType,...a$30}),this.openSharingModal(e$19,r$34,n$46);});}openSharingModal(e$19,r$34,o$32){let s$25=`cu-share-entity__modal`,n$46=r$34?.options?.modalModifier?`${s$25} ${r$34.options.modalModifier}`:s$25,a$30=this.modalService.openComponentFactory(e$19,this.injector,{title:``,modifier:n$46,bodyModifier:`cu-modal__body_no-min-height`,persistAfterRouting:!0,name:`sharing modal`,via:r$34?.options?.via});this.sharingPerformanceService.markStart({entityType:r$34.itemType,id:r$34.item?.id,event:u$20.Load}),a$30.instance.item=r$34.item,r$34.itemType&&a$30.instance.typeChanges$.next(r$34.itemType),a$30.instance.projectId=r$34?.options?.project?.id??o$32?.id,a$30.instance.type=r$34?.itemType,a$30.instance.warning=r$34?.options?.warning,a$30.instance.openProtectPermissions=r$34?.options?.openProtectPermissions,a$30.instance.flipTheOrder=!!r$34?.options?.flipTheOrder,a$30.instance.extraExpanded=!!r$34?.options?.extraExpanded,a$30.instance.openWebOptions=r$34?.options?.openWebOptions,a$30.instance.inviteByMention=r$34?.options?.inviteByMention??!1,a$30.instance.via=r$34?.options?.via??`share modal other`,a$30.instance.chatRoomId=r$34?.options?.chatRoomId,a$30.instance.inviteMethod=r$34?.options?.inviteMethod,r$34?.options?.inviteExisting?(a$30.instance.inviteEmail=``,a$30.instance.searchString=r$34?.options?.inviteEmail):a$30.instance.inviteEmail=r$34?.options?.inviteEmail,this.modalService.closeModal.pipe(oe$13(c$37=>c$37?.name===`sharing modal`),ds(),F$22(this.destroyRef)).subscribe(()=>{this.sharingPerformanceService.mark({entityType:r$34.itemType,id:r$34.item?.id,event:u$20.CloseModal}),this.store.dispatch(kr());});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();V9$1=(()=>{class t$21{constructor(){this.appClientTitleService=C$23(I9),this.sharedTaskService=C$23(ty),this.swUpdate=C$23(v$1),this.desktopAppViewService=C$23(N9),this.sharingModalListener=C$23(B9),this.router=C$23(x$22),this.performanceTimingService=C$23(wa),this.splitService=C$23(Qn),this.lazyLink=C$23(L$6),this.dashboardViewService=C$23(E9),this.locationService=C$23(me$4),this.windowService=C$23(f$23),this.store=C$23(q$19),this.syntheticMarkerService=C$23(N$12),this.layoutVersionService=C$23(je);}init(){this.syntheticMarkerService.mark(`service.app_view.init`),this.storeUserLocation(),this.lazyLink.registerPrefetchLinks(),this.getStackTraceLimit(),this.layoutVersionService.init(),this.sharingModalListener.init(),this.sharedTaskService.init(),this.swUpdate.init(),this.appClientTitleService.init(),this.desktopAppViewService.init(),this.dashboardViewService.init(),this.router.events.pipe(As$3(this.store.select(gt$1)),oe$13(([e$19,r$34])=>(!this.sharedTaskService.isOpen||r$34)&&e$19 instanceof X$12)).subscribe(()=>{this.performanceTimingService.handleNavigation();});}getStackTraceLimit(){this.splitService.getTreatmentWithConfig({name:O$16.FePlatformStackTraceLimit}).subscribe(e$19=>{if(e$19.treatment===`on`&&e$19.config){let r$34=JSON.parse(e$19.config);r$34.limit&&(Error.stackTraceLimit=r$34.limit);}});}storeUserLocation(){this.locationService.currentCountry$.pipe(Ve$4(1)).subscribe(e$19=>{this.store.dispatch(i$24({payload:e$19})),this.windowService.nativeWindow.gtag&&this.windowService.nativeWindow.gtag([`cuUserLocation`,JSON.stringify(e$19)]);});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Jue=()=>[import(`./activity-monitor-display-deferred.component-1b0fc086aa.js`).then(t$21=>t$21.ActivityMonitorDisplayDeferredComponent)],Yue=()=>[import(`./app-view-services-initializer.component-a380ea87cb.js`).then(t$21=>t$21.AppViewServicesInitializerComponent)];U9=(()=>{class t$21{constructor(){this.swUpdate=C$23(v$1),this.appViewService=C$23(V9$1),this.locale=C$23(al$1),this.chatModalOutletService=C$23(gQ),this.sharedTaskService=C$23(ty),this.sharedDocService=C$23(Q$7),this.appHeaderService=C$23(yC),this.syntheticMarkerService=C$23(N$12),this.initialComponentTelemetryService=C$23(T9),this.appPlaceholderService=C$23(S$11),this.initializeServices$=this.appPlaceholderService.onIdle().pipe(q$20(()=>!0)),this.newBuildToast$=this.swUpdate.isNewBuild$.pipe(le$5(e$19=>e$19?import(`./new-build-toast.component-f9f8f7cb30.js`).then(r$34=>r$34.NewBuildToastComponent):[null])),this.loaderComponent$=gt$2(()=>import(`./loader.component-3199393a91.js`).then(e$19=>e$19.LoaderComponent)),this.chatModalOutletComponent$=this.chatModalOutletService.chatModalOutletComponent$,this.activityMonitorEnabled$=jS(O$16.FePlatformActivityMonitor),this.syntheticMarkerService.mark(`angular.component.app_view.constructor`),xf(()=>{this.initialComponentTelemetryService.appViewRendered();});}ngOnInit(){this.syntheticMarkerService.onReady(()=>{try{let e$19=this.syntheticMarkerService.createSyntheticMarker(`app_bootstrap.root_components.init`).setDependenciesByName([`angular.component.app_component.*`,`angular.component.app_view.*`]).setStartMarkerByName(`angular.component.app_component.constructor`).reportOnMarkerByName(`angular.component.app_view.after_view_init`);this.syntheticMarkerService.adoptHistoricAndOprhanMarkers(e$19);}catch{}}),this.syntheticMarkerService.mark(`angular.component.app_view.init.start`),this.appViewService.init(),MQ(this.locale),this.syntheticMarkerService.mark(`angular.component.app_view.init.finish`);}ngAfterViewInit(){this.syntheticMarkerService.mark(`angular.component.app_view.after_view_init`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.cmp=_E({type:t$21,selectors:[[`cu-app-view`]],features:[BE([qc])],decls:32,vars:26,consts:[[`taskKeeper`,``],[`class`,`cu-hidden-print`,3,`clickedHome`,4,`ngIf`],[3,`taskIsOpen`,`taskOnClose`,`taskOnOpen`,`docIsOpen`],[4,`ngIf`],[1,`cu-hidden-print`,3,`clickedHome`],[4,`ngComponentOutlet`]],template:function(r$34,o$32){r$34&1&&(fg$1(0,`cu-global-gradient`)(1,`cu-maintenance-container`),Bp(2,Xue,1,0,`cu-global-actions-bar`,1),YT(3,`async`),fg$1(4,`router-outlet`)(5,`cu-modal-keeper`,2),YT(6,`async`),YT(7,`async`),fg$1(8,`cu-task-keeper`,null,0)(10,`cu-doc-keeper`)(11,`cu-cfm-keeper`)(12,`cu-page-modal`)(13,`cu-app-view-toast-initializer`)(14,`cu-attachments-viewer`),Bp(15,efe,2,1,`ng-container`,3),YT(16,`async`),Bp(17,rfe,2,1,`ng-container`,3),YT(18,`async`),Bp(19,ofe,2,1,`ng-container`,3),YT(20,`async`),fg$1(21,`cu-react-app`)(22,`cu3-icons`)(23,`cu-chat-bot-trigger`),$p(24,sfe,1,0),DD(25,24,Jue),YT(27,`async`),$p(28,nfe,1,0),DD(29,28,Yue),YT(31,`async`)),r$34&2&&(vv(2),dg(`ngIf`,JT(3,10,o$32.appHeaderService.showHeader$)),vv(3),dg(`taskIsOpen`,JT(6,12,o$32.sharedTaskService.isOpen$))(`taskOnClose`,o$32.sharedTaskService.onClose)(`taskOnOpen`,o$32.sharedTaskService.onOpen)(`docIsOpen`,JT(7,14,o$32.sharedDocService.isOpen$)),vv(10),dg(`ngIf`,JT(16,16,o$32.newBuildToast$)),vv(2),dg(`ngIf`,JT(18,18,o$32.loaderComponent$)),vv(2),dg(`ngIf`,JT(20,20,o$32.chatModalOutletComponent$)),vv(6),CD(JT(27,22,o$32.activityMonitorEnabled$)),vv(4),CD(JT(31,24,o$32.initializeServices$)));},dependencies:[gi$1,jn,Vn$1,Jo$2,hr$2,vn,dn,A$1,kQ,_Q,v9,_9,C9,wQ,IQ,JA,hQ,p9,A$3,$$2,g9$1,d9,CJ,k9,qn],encapsulation:2,changeDetection:0});}}return t$21;})();VN();dm();VN();dm();VN();H9=(()=>{class t$21{constructor(){this.localStorage=s$23(),this.connected=!0,this.splitFlagOn=!1,this.appLoaded$=new M$22(),this.loadRetryTimeout$=l$22(O$16.FePlatformErrorsRetry),this.connectionService=C$23(R$15),this.userService=C$23(nr$1),this.disconnected$=this.connectionService.isConnected.pipe(oe$13(e$19=>!e$19),Is$1(e$19=>{this.localStorage.remove(`spinner_retry_count`);}),gs(this.appLoaded$));}appLoaded(){this.localStorage.remove(`spinner_retry_count`),this.appLoaded$.next(),this.appLoaded$.complete();}showStartupRetry(){let e$19=document.querySelector(`.cu-loader-retry`);if(!e$19)return;let r$34=e$19.getElementsByTagName(`p`);if(r$34.length<1)return;let o$32=this.localStorage.get(`spinner_retry_count`),s$25=e$19.getElementsByTagName(`button`);if(s$25.length<1)return;s$25[0].focus(),s$25[0].addEventListener(`click`,()=>{if(o$32){this.localStorage.remove(`spinner_retry_count`),er$2(`spinner_retry_logout`),this.userService.logout(!0,!0,!0,!1,null,{userInitiated:!0});return;}this.connected?(this.localStorage.set(`spinner_retry_count`,1),er$2(`spinner_retry_reload`)):er$2(`spinner_retry_reload_disconnected`),window.location.reload();});let n$46="Things are taking longer than expected to load. Give it another try?";this.connected?o$32&&(n$46="Oops! The application still isn't loading. Try \"Login\" to directly access the login page.",s$25[0].innerText="Login"):n$46="It appears you're offline. Please reconnect to the Internet, then click \"Retry\" to proceed.",r$34[0].innerText=n$46,e$19.setAttribute(`style`,`visibility:visible`);}listenForLoadRetry(){this.connectionService.isConnected.pipe(zt$2(),oe$13(e$19=>!e$19&&this.splitFlagOn),gs(this.appLoaded$)).subscribe(()=>{this.connected=!1,this.showStartupRetry();}),this.loadRetryTimeout$.pipe(q$20(e$19=>JSON.parse(e$19)),oe$13(Boolean),Is$1(()=>this.splitFlagOn=!0),le$5(e$19=>Q$17(e$19.timeout)),gs(this.appLoaded$),gs(this.disconnected$)).subscribe(()=>{this.showStartupRetry();});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();VN();Da=function(t$21){return t$21.IndexHtml=`app_bootstrap.script.index_html`,t$21.MainBundleLoaded=`app_bootstrap.script.main_bundle.loaded`,t$21.BootstrapFunctionStart=`app_bootstrap.script.angular_bootstrap_function.start`,t$21.BootstrapFunctionEnd=`app_bootstrap.script.angular_bootstrap_function.finish`,t$21.AppModuleLoaded=`app_bootstrap.script.app_module.loaded`,t$21.BootstrapTsLoaded=`app_bootstrap.script.bootstrap_ts.loaded`,t$21;}(Da||{});VN();vC=(()=>{class t$21{constructor(){this.syntheticMarkerService=C$23(N$12);}setColdOrWarmStartContext(){let e$19=0,r$34=!1;performance.getEntriesByType(`resource`).forEach(o$32=>{if(!(!Q9(o$32)||o$32.initiatorType!==`script`||!K9(o$32))){if(!(`deliveryType`in o$32)){r$34=!0;return;}o$32.deliveryType===`cache`&&e$19++;}}),r$34||Ni$1.setGlobalContextProperty(`cold_start`,e$19<4);}createInitialLoadContext(){let e$19=z9([Da.MainBundleLoaded,Da.IndexHtml]);return{indexReady:e$19.get(Da.IndexHtml),mainBundleReady:e$19.get(Da.MainBundleLoaded),slowestBundle:q9()};}createInitialLoadScriptsSynthetics(){let e$19=this.createInitialLoadContext();if(!J9(e$19))return;let r$34=null,o$32=null;Object.values(Da).forEach(s$25=>{let n$46=this.syntheticMarkerService.createMetricMarkerFromPerformanceMarkerName(s$25);s$25===Da.IndexHtml&&n$46&&(r$34=n$46),s$25===Da.MainBundleLoaded&&n$46&&(o$32=n$46);}),o$32&&r$34&&this.syntheticMarkerService.onReady(()=>{this.createStoreInitMarker(),this.createEffectsInitMarker(),this.createCommonDataStoreModuleMarker(),this.createScriptsMarker(r$34,o$32,e$19),this.createSyntheticFromMark(`app_bootstrap.xhr.refresh_token`),this.createSyntheticFromMark(`app_bootstrap.xhr.fetch_shard_info`);});}createEffectsInitMarker(){let e$19=this.syntheticMarkerService.createSyntheticMarker(`app_bootstrap.ngrx.initial_effects`).setDependenciesByName([`app_bootstrap.ngrx.effects.*`]),r$34=performance.getEntriesByType(`mark`),o$32=null,s$25=null;for(let n$46=0;n$46<r$34.length;n$46++){let a$30=r$34[n$46];if(a$30 instanceof PerformanceMark&&a$30.name.startsWith(`app_bootstrap.ngrx.effects`)){let c$37=this.syntheticMarkerService.createMetricMarkerFromPerformanceMark(a$30);(!o$32||o$32.getStartTime()>c$37.getStartTime())&&(o$32=c$37),(!s$25||c$37.getStartTime()>s$25.getStartTime())&&(s$25=c$37);}}o$32&&s$25&&(e$19.setStartMarker(o$32).setEndMarker(s$25),e$19.addMetadata({startName:o$32.getName(),endName:s$25.getName()}),this.syntheticMarkerService.adoptHistoricAndOprhanMarkers(e$19),e$19.isReadyToReport()&&this.syntheticMarkerService.reportSynthetic(e$19));}createCommonDataStoreModuleMarker(){try{this.syntheticMarkerService.adoptHistoricAndOprhanMarkers(this.syntheticMarkerService.createSyntheticMarker(`app_bootstrap.common_data_store_module`).setDependenciesByName([`app_bootstrap.ngrx.module.common_data_store_module.load`,`app_bootstrap.ngrx.module.common_data_store_module.construct`]).setStartMarkerByName(`app_bootstrap.ngrx.module.common_data_store_module.load`).reportOnMarkerByName(`app_bootstrap.ngrx.module.common_data_store_module.construct`));}catch{}}createStoreInitMarker(){let e$19=this.syntheticMarkerService.createSyntheticMarker(`app_bootstrap.ngrx.initial_store_modules`).setDependenciesByName([`app_bootstrap.ngrx.module.*`]),r$34=[],o$32=null,s$25=null,n$46=performance.getEntriesByType(`mark`);for(let a$30=0;a$30<n$46.length;a$30++){let c$37=n$46[a$30];if(c$37 instanceof PerformanceMark&&c$37.name.startsWith(`app_bootstrap.ngrx.module`)){let m$32=this.syntheticMarkerService.createMetricMarkerFromPerformanceMark(c$37);m$32.getName()===`app_bootstrap.ngrx.module.app_store_module.load`&&(o$32=m$32),m$32.getName()===`app_bootstrap.ngrx.module.app_store_module.construct`&&(s$25=m$32),r$34.push(m$32);}}e$19.setDependencies(r$34),o$32&&s$25&&(e$19.setStartMarker(o$32),e$19.setEndMarker(s$25),this.syntheticMarkerService.reportSynthetic(e$19));}createScriptsMarker(e$19,r$34,o$32){if(!J9(o$32))return;let s$25={approximateScriptParseTime:G9(o$32),mainBundleReady:o$32.mainBundleReady.startTime,slowestBundle:o$32.slowestBundle.responseEnd,indexReady:o$32.indexReady.startTime},n$46=this.syntheticMarkerService.createSyntheticMarker(`app_bootstrap.initial_load.scripts`).setDependenciesByName([`app_bootstrap.script.*`]).setStartMarker(e$19).setEndMarker(r$34).addMetadata(s$25);this.syntheticMarkerService.adoptHistoricAndOprhanMarkers(n$46),n$46.isReadyToReport()&&this.syntheticMarkerService.reportSynthetic(n$46);}createSyntheticFromMark(e$19){let r$34=this.syntheticMarkerService.createSyntheticMarker(e$19),o$32=this.metricMarkerFromMark(`${e$19}.start`),s$25=this.metricMarkerFromMark(`${e$19}.finish`);!o$32||!s$25||(r$34.addDependency(o$32).setStartMarker(o$32).addDependency(s$25).setEndMarker(s$25),r$34.isReadyToReport()&&this.syntheticMarkerService.reportSynthetic(r$34));}metricMarkerFromMark(e$19){let r$34=performance.getEntriesByName(e$19,`mark`)[0];if(!(!r$34||!(r$34 instanceof PerformanceMark)))return this.syntheticMarkerService.createMetricMarkerFromPerformanceMark(r$34);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();lfe=()=>[import(`./not-found.component-0b0bd7e215.js`).then(t$21=>t$21.NotFoundComponent)];performance.mark(`app_bootstrap.script.app_module.loaded`);e$11(`app_module`,`load`);dQ();lQ();Y9=`redirectPath`,gfe=`mobile-ios`,yfe=`mobile-android`,X9=`joinViaInviteEmail_redirectTo`,iY=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19,f$33,h$15,I$25,A$22,R$21,w$26,E$16,P$20,B$22,G$16,v$22,x$28){this.router=e$19,this.store=r$34,this.windowService=o$32,this.userService=s$25,this.sessionService=n$46,this.helpers=a$30,this.userStateFacade=c$37,this.segmentService=m$32,this.meta=l$26,this.injector=g$19,this.document=h$15,this.splitService=I$25,this.performanceTimingService=A$22,this.authToken=R$21,this.renderer=w$26,this.navigationHistoryService=E$16,this.viewContextService=P$20,this.taskViewPlaceholderService=B$22,this.initialLoadTelemetryService=G$16,this.syntheticMarkerService=v$22,this.cdr=x$28,this.errorPageService=C$23(zi$1),this.showNotFound$=this.errorPageService.hasNotFoundError(),this.animationsDisabled=!1,this.startupErrorService=C$23(H9),this.mobileQueryParams={},this.directiveTimingService=null,this.destroy$=new M$22(),this.firstNav=!1,this.onBoarding=!0,this.desktopDeprecationComponent$=Z9()?this.splitService.isTreatmentOn({name:O$16.ShowDesktopDeprecation}).pipe(le$5(H$10=>H$10?import(`./upgrade-desktop-app.component-c62f6ff80c.js`).then(te$16=>te$16.UpgradeDesktopAppComponent):qe$6(null))):qe$6(null),this.sharedDataCompatHelper=C$23(T$3),this.appPlaceholderService=C$23(S$11),G$16.setColdOrWarmStartContext(),this.taskViewPlaceholderService.syncTaskViewPlaceholderEnabledLocalStorage(),v$22.mark(`angular.component.app_component.constructor`),fn.setInjector(g$19),(w$25.name===`qa`||w$25.name===`staging`)&&this.exposeStringUtils(),this.authToken.migrateTokensToCookiesIfNeeded(),uQ(e$19),this.updateMetaTag(),W9(this.destroy$),h$14.remove(`jwt`,{path:`/`,secure:!0}),f$30.info(`platform`,`%c\u2139\uFE0F App version: ${t$20}`,`color: #7b68ee`),e$19.events.pipe(As$3(this.userStateFacade.userId$),gs(this.destroy$)).subscribe(([H$10,te$16])=>{if(H$10 instanceof $e$2&&this.setMobileQueryParams(H$10),!this.firstNav&&H$10 instanceof X$12&&(this.firstNav=!0,H$10.url===`/not-authorized`&&this.router.navigate([`/`]),oO(H$10.url)||this.store.dispatch(Re$3({showSidebar:!0}))),H$10 instanceof M$20)switch(this.helpers.addPageTracking(H$10.url,te$16),H$10.url.includes(`/`,1)?H$10.url:H$10.url.substring(0,H$10.url.indexOf(`/`,1))){case`/signup`:case`/login`:default:this.onBoarding=!1;}}),QS(this.destroy$);let U$19=!1;u$15.pipe(gs(this.destroy$)).subscribe(H$10=>{H$10&&h$15.body.classList.contains(`dark-theme`)?(h$15.body.classList.remove(`dark-theme`),U$19=!0):!H$10&&U$19&&(h$15.body.classList.add(`dark-theme`),U$19=!1);}),this.windowService.nativeWindow.showClickup?this.routerEventsSub=e$19.events.pipe(gs(this.destroy$)).subscribe(H$10=>{H$10 instanceof M$20&&(this.showAppElement(),this.routerEventsSub&&this.routerEventsSub.unsubscribe());}):(h$15.addEventListener(`openMobileApp`,()=>{this.segmentService.track(Bu.ClickMobilePrompt,{cta:`open mobile app`});}),h$15.addEventListener(`downloadMobileApp`,()=>{this.segmentService.track(Bu.ClickMobilePrompt,{cta:`download mobile app`});}),h$15.addEventListener(`showClickup`,H$10=>{switch(H$10.detail){case`signup`:case`login/forgot`:case`login-forgot`:case`login`:case`login/sso`:let te$16=H$10.detail===`login-forgot`?`login/forgot`:H$10.detail;(H$10.detail===`login`||H$10.detail===`login/sso`)&&(this.userService.email=H$10.meta.email,this.userService.password=H$10.meta.password,this.userService.setLoginState(H$10.meta)),this.router.navigate([te$16]).then(this.showAppElement.bind(this));break;case`show-app`:{e$19.events.pipe(oe$13(Qe$3=>Qe$3 instanceof M$20),Ve$4(1)).subscribe(()=>{this.showAppElement();});let ye$5=this.mobileQueryParams[Y9]??`/`,ke$5=localStorage.getItem(X9);this.mobileQueryParams[Y9]===void 0&&ke$5?(ye$5=ke$5,localStorage.removeItem(X9),this.segmentService.track(Bu.ClickMobilePrompt,{cta:`continue on mobile web`}),window.location.replace(ye$5)):(this.router.navigate([ye$5]),this.showAppElement(),this.segmentService.track(Bu.ClickMobilePrompt,{cta:`continue on mobile web`}));break;}default:this.userService.logUserIn(H$10.detail).pipe(gs(this.destroy$)).subscribe(),this.userSub=e$19.events.pipe(gs(this.destroy$)).subscribe(ye$5=>{ye$5 instanceof M$20&&(this.showAppElement(),this.userSub&&this.userSub.unsubscribe());}),this.routeAfterLogin(H$10.detail);}})),this.helpers.dispatchEvent(`clickupLoaded`,{apiUrl:w$25.apiUrl}),f$31()&&this.renderer.addClass(h$15.body,`cu-os-win`),c$30()&&(this.renderer.addClass(h$15.body,`cu-os-mac`),pQ(this.renderer)),i$23&&this.renderer.setAttribute(this.document.documentElement,`dir`,`rtl`);}updateMetaTag(){m$31()&&this.meta.updateTag({name:`viewport`,content:`width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0`},`name="viewport"`);}routeAfterLogin(e$19){let r$34=this.sessionService.redirectUrl||``;e$19.email_validated||r$34.includes(`email_code`)?this.router.navigateByUrl(r$34||`/`):this.router.navigate([`signup/validate-email`]);}createPlaceholderRemovedSynthetic(){this.syntheticMarkerService.onReady(()=>{this.syntheticMarkerService.adoptHistoricAndOprhanMarkers(this.syntheticMarkerService.createSyntheticMarker(`app_bootstrap.placeholder_removed`).setDependenciesByName([`app_bootstrap.manager.*`,`app_bootstrap.app_load_guard.*`,`app_bootstrap.script.*`,`app_bootstrap.xhr.*`,`angular.component.app_component.*`,`angular.component.app_view.*`,`service.app_view.*`,`app_bootstrap.remove_placeholder`]).setStartMarkerByName(`app_bootstrap.script.index_html`).reportOnMarkerByName(`app_bootstrap.remove_placeholder`));});}removePlaceholders(){this.createPlaceholderRemovedSynthetic();let e$19=this.document.documentElement,r$34=document.getElementById(`loading-placeholder`),o$32=document.getElementById(`mobile-ios`),s$25=document.getElementById(`mobile-android`);if(window.dispatchEvent(new Event(`stopResourceTracking`)),r$34){document.getElementById(`task-view-placeholder`)?(r$34.classList.add(`main-content-loaded`),F$21(()=>{r$34.remove(),this.syntheticMarkerService.mark(`app_bootstrap.remove_placeholder`),e$19?.classList.remove(`layout-v4-placeholder`),e$19?.classList.remove(`layout-v4-placeholder_desktop`);},200)):(r$34.remove(),this.syntheticMarkerService.mark(`app_bootstrap.remove_placeholder`),e$19?.classList.remove(`layout-v4-placeholder`),e$19?.classList.remove(`layout-v4-placeholder_desktop`)),this.startupErrorService.appLoaded(),p$1.LoadingPlaceholderRemoved$.next(ka());let c$37=this.navigationHistoryService.currentLocation()?.viewType,m$32;try{m$32={...Fb(`duration_placeholderRemoved`,this.performanceTimingService.lastNavigationTime,null,this.performanceTimingService.lastNavigationTime.monotonic),isError:!1},this.syntheticMarkerService.mark(`app_boostrap.view_timing.duration_placeholder_removed`),Rl(`duration_placeholderRemoved`);}catch(l$26){lA(l$26,{feature:`performance-timing`,markerName:`duration_placeholderRemoved`}),m$32={markerName:`duration_placeholderRemoved`,startTime:0,endTime:0,time:0,isError:!0};}$i({isWhiteLabel:this.store.select(a$13),numberOfSpaces:this.store.select(Fl),numberOfCustomFields:this.store.select(p$17),numberOfCategories:this.store.select(_$12),numberOfUsers:this.store.select(uu$1)}).pipe(fs$1(5e3),Ve$4(1)).subscribe(l$26=>{let{cacheStats:g$19,networkStats:f$33,resourceCounts:h$15,resourceTypeCounts:I$25}=J0();this.viewContextService.addViewContext({duration_placeholderRemoved:{isWhiteLabel:!!l$26.isWhiteLabel,numberOfCustomFields:l$26.numberOfCustomFields.length,numberOfSpaces:l$26.numberOfSpaces.length,numberOfCategories:l$26.numberOfCategories?.length??0,numberOfUsers:l$26.numberOfUsers.length,currentPageType:c$37??`unknown`,cacheStats:g$19,networkStats:f$33,resourceCounts:h$15,resourceTypeCounts:I$25}}),this.performanceTimingService.addAction(`duration_placeholderRemoved`,{isWhiteLabel:!!l$26.isWhiteLabel,numberOfCustomFields:l$26.numberOfCustomFields.length,numberOfSpaces:l$26.numberOfSpaces.length,numberOfCategories:l$26.numberOfCategories?.length??0,numberOfUsers:l$26.numberOfUsers.length,currentPageType:c$37??`unknown`,...m$32,...J0()});});}o$32&&o$32.remove(),s$25&&s$25.remove();let n$46=document.querySelectorAll(`meta`);Array.prototype.forEach.call(n$46,a$30=>{a$30.content===`strict-origin-when-cross-origin`&&!this.windowService.nativeWindow.location.pathname.includes(`reset`)&&(a$30.content=`no-referrer-when-downgrade`);}),this.appPlaceholderService.setAppIsShown();}showAppElement(){let e$19=document.getElementsByTagName(`app-root`)[0];if(document.getElementById(`task-view-placeholder`)){this.taskViewPlaceholderService.taskViewInitialized$.pipe(Ve$4(1)).subscribe(()=>{this.removePlaceholders();});return;}he$6(0,1e3).pipe(oe$13(()=>{let o$32=e$19.innerText.trim().length>0,s$25=document.getElementsByTagName(`cu-whitelabel-public-sharing-wrapper`);return o$32||s$25.length>0;}),q$20(()=>!!document.getElementById(`loading-placeholder`)),Es$3(o$32=>o$32),gs(this.destroy$)).subscribe(()=>{this.removePlaceholders();});}ngOnInit(){this.applyThemeFromLocalStorage(),this.syntheticMarkerService.mark(`angular.component.app_component.init`),this.sharedDataCompatHelper.initialise(),this.startupErrorService.listenForLoadRetry(),this.addPendoAttributes(),this.disableAnimationsIfNeeded(),n$45()&&document.body.setAttribute(`data-desktop-app-version`,w$23()??`unknown`),Ir$1||yo(),this.performanceTimingService.markTiming(`finish_appComponentInit`);}ngAfterViewInit(){this.syntheticMarkerService.mark(`angular.component.app_component.after_view_init`),this.initialLoadTelemetryService.createInitialLoadScriptsSynthetics(),this.segmentService.identifyOnUserChanges(),this.segmentService.groupOnTeamChanges();}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}exposeRestrictDom(){window.restrictDom=Tt$1;}exposeStringUtils(){return I$24(this,null,function*(){let{compressString:e$19,decompressString:r$34}=yield import(`./strings-38ca94bd36.js`);window.compressString=e$19,window.decompressString=r$34;});}addPendoAttributes(){return I$24(this,null,function*(){if(Z9())this.document.body.setAttribute(`data-legacy-desktop-app`,``);else{let{UAParser:e$19}=(yield import(`./ua-parser-a1c20b15d9.js`)).default,{name:o$32,version:s$25}=new e$19().getResult().browser;A$18(o$32,s$25)&&this.document.body.setAttribute(`data-outdated-browser`,``);}});}disableAnimationsIfNeeded(){let e$19=`cu-animations-disabled`;if(w$25.name===`local-e2e`){this.animationsDisabled=!0,this.document.body.classList.add(e$19);return;}this.store.select(ve$8).pipe(gs(this.destroy$)).subscribe(r$34=>{this.animationsDisabled=r$34,this.animationsDisabled?this.document.body.classList.add(e$19):this.document.body.classList.remove(e$19),this.syntheticMarkerService.mark(`app_bootstrap.disable_animations_if_needed`),this.cdr.markForCheck();});}applyThemeFromLocalStorage(){try{let e$19=localStorage.getItem(`user_theme_color`);e$19&&O$12(this.renderer,e$19);}catch(e$19){f$30.error(`platform`,`Error applying theme from localStorage`,e$19);}}setMobileQueryParams(e$19){(e$19.url.startsWith(`/${gfe}`)||e$19.url.startsWith(`/${yfe}`))&&(this.mobileQueryParams=e$19.state.root.queryParams);}static{this.fac=function(r$34){return new(r$34||t$21)(br(x$22),br(q$19),br(f$23),br(nr$1),br(bi),br(k$17),br(U$15),br(_b$1),br(zt$1),br(oe$12),br(al$1),br(Tm),br(Qn),br(wa),br(Rc$1),br(jI),br(Se$4),br(A$15),br(De),br(vC),br(N$12),br(BA));};}static{this.cmp=_E({type:t$21,selectors:[[`app-root`]],hostVars:1,hostBindings:function(r$34,o$32){r$34&2&&Eg(`@.disabled`,o$32.animationsDisabled);},features:[VT([[]])],decls:5,vars:5,consts:[[4,`ngComponentOutlet`]],template:function(r$34,o$32){if(r$34&1&&(HD(0,pfe,1,1,`ng-container`),YT(1,`async`),YT(2,`async`),Yc$1(3,ffe,3,0)(4,hfe,1,0,`cu-app-view`)),r$34&2){let s$25;BD((s$25=JT(1,1,o$32.desktopDeprecationComponent$))?0:JT(2,3,o$32.showNotFound$)?3:4,s$25);}},dependencies:[U9,jn,gi$1,qn],encapsulation:2,changeDetection:0});}}return t$21;})();VN();VN();VN();VN();VN();Tfe=typeof document>`u`?null:document.documentElement;vl$1=null,sY=!1;Afe=1e3,sw=`{{`,wfe=`}}`,nw=`ng-enter`,_C=`ng-leave`,Gf=`ng-trigger`,zf=`.ng-trigger`,aw=`ng-animating`,kC=`.ng-animating`;Mfe=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;ew=new RegExp(`${sw}\\s*(.+?)\\s*${wfe}`,`g`);Ffe=/-+([a-z0-9])/g;Iw=(()=>{class t$21{validateStyleProperty(e$19){return FY(e$19);}containsElement(e$19,r$34){return iw(e$19,r$34);}getParentElement(e$19){return CC(e$19);}query(e$19,r$34,o$32){return ow(e$19,r$34,o$32);}computeStyle(e$19,r$34,o$32){return o$32||``;}animate(e$19,r$34,o$32,s$25,n$46,a$30=[],c$37){return new a$16(o$32,s$25);}static fac=function(r$34){return new(r$34||t$21)();};static prov=k$27({token:t$21,factory:t$21.fac});}return t$21;})(),bl=class{static NOOP=new Iw();},Cl=class{};xfe=new Set([`width`,`height`,`minWidth`,`minHeight`,`maxWidth`,`maxHeight`,`left`,`top`,`bottom`,`right`,`fontSize`,`outlineWidth`,`outlineOffset`,`paddingTop`,`paddingLeft`,`paddingBottom`,`paddingRight`,`marginTop`,`marginLeft`,`marginBottom`,`marginRight`,`borderRadius`,`borderWidth`,`borderTopWidth`,`borderLeftWidth`,`borderRightWidth`,`borderBottomWidth`,`textIndent`,`perspective`]),RC=class extends Cl{normalizePropertyName(i$27,e$19){return TC(i$27);}normalizeStyleValue(i$27,e$19,r$34,o$32){let s$25=``,n$46=r$34.toString().trim();if(xfe.has(e$19)&&r$34!==0&&r$34!==`0`)if(typeof r$34==`number`)s$25=`px`;else{let a$30=r$34.match(/^[+-]?[\d\.]+([a-z]*)$/);a$30&&a$30[1].length==0&&o$32.push(nY(i$27,r$34));}return n$46+s$25;}};FC$1=`*`;EC=new Set([`true`,`1`]),AC=new Set([`false`,`0`]);zY=`:self`,jfe=new RegExp(`s*${zY}s*,?`,`g`);LY=``,fw=class{_driver;constructor(i$27){this._driver=i$27;}build(i$27,e$19,r$34){let o$32=new hw(e$19);return this._resetContextStyleTimingState(o$32),Bo(this,Vp(i$27),o$32);}_resetContextStyleTimingState(i$27){i$27.currentQuerySelector=LY,i$27.collectedStyles=new Map(),i$27.collectedStyles.set(LY,new Map()),i$27.currentTime=0;}visitTrigger(i$27,e$19){let r$34=e$19.queryCount=0,o$32=e$19.depCount=0,s$25=[],n$46=[];return i$27.name.charAt(0)==`@`&&e$19.errors.push(aY()),i$27.definitions.forEach(a$30=>{if(this._resetContextStyleTimingState(e$19),a$30.type==i$16.State){let c$37=a$30,m$32=c$37.name;m$32.toString().split(/\s*,\s*/).forEach(l$26=>{c$37.name=l$26,s$25.push(this.visitState(c$37,e$19));}),c$37.name=m$32;}else if(a$30.type==i$16.Transition){let c$37=this.visitTransition(a$30,e$19);r$34+=c$37.queryCount,o$32+=c$37.depCount,n$46.push(c$37);}else e$19.errors.push(cY());}),{type:i$16.Trigger,name:i$27.name,states:s$25,transitions:n$46,queryCount:r$34,depCount:o$32,options:null};}visitState(i$27,e$19){let r$34=this.visitStyle(i$27.styles,e$19),o$32=i$27.options&&i$27.options.params||null;if(r$34.containsDynamicStyles){let s$25=new Set(),n$46=o$32||{};r$34.styles.forEach(a$30=>{a$30 instanceof Map&&a$30.forEach(c$37=>{cw(c$37).forEach(m$32=>{n$46.hasOwnProperty(m$32)||s$25.add(m$32);});});}),s$25.size&&e$19.errors.push(mY(i$27.name,[...s$25.values()]));}return{type:i$16.State,name:i$27.name,style:r$34,options:o$32?{params:o$32}:null};}visitTransition(i$27,e$19){e$19.queryCount=0,e$19.depCount=0;let r$34=Bo(this,Vp(i$27.animation),e$19),o$32=Ofe(i$27.expr,e$19.errors);return{type:i$16.Transition,matchers:o$32,animation:r$34,queryCount:e$19.queryCount,depCount:e$19.depCount,options:Sl$1(i$27.options)};}visitSequence(i$27,e$19){return{type:i$16.Sequence,steps:i$27.steps.map(r$34=>Bo(this,r$34,e$19)),options:Sl$1(i$27.options)};}visitGroup(i$27,e$19){let r$34=e$19.currentTime,o$32=0,s$25=i$27.steps.map(n$46=>{e$19.currentTime=r$34;let a$30=Bo(this,n$46,e$19);return o$32=Math.max(o$32,e$19.currentTime),a$30;});return e$19.currentTime=o$32,{type:i$16.Group,steps:s$25,options:Sl$1(i$27.options)};}visitAnimate(i$27,e$19){let r$34=Bfe(i$27.timings,e$19.errors);e$19.currentAnimateTimings=r$34;let o$32,s$25=i$27.styles?i$27.styles:m$18({});if(s$25.type==i$16.Keyframes)o$32=this.visitKeyframes(s$25,e$19);else{let n$46=i$27.styles,a$30=!1;if(!n$46){a$30=!0;let m$32={};r$34.easing&&(m$32.easing=r$34.easing),n$46=m$18(m$32);}e$19.currentTime+=r$34.duration+r$34.delay;let c$37=this.visitStyle(n$46,e$19);c$37.isEmptyStep=a$30,o$32=c$37;}return e$19.currentAnimateTimings=null,{type:i$16.Animate,timings:r$34,style:o$32,options:null};}visitStyle(i$27,e$19){let r$34=this._makeStyleAst(i$27,e$19);return this._validateStyleAst(r$34,e$19),r$34;}_makeStyleAst(i$27,e$19){let r$34=[],o$32=Array.isArray(i$27.styles)?i$27.styles:[i$27.styles];for(let a$30 of o$32)typeof a$30==`string`?a$30===c$19?r$34.push(a$30):e$19.errors.push(lY(a$30)):r$34.push(new Map(Object.entries(a$30)));let s$25=!1,n$46=null;return r$34.forEach(a$30=>{if(a$30 instanceof Map&&(a$30.has(`easing`)&&(n$46=a$30.get(`easing`),a$30.delete(`easing`)),!s$25)){for(let c$37 of a$30.values())if(c$37.toString().indexOf(sw)>=0){s$25=!0;break;}}}),{type:i$16.Style,styles:r$34,easing:n$46,offset:i$27.offset,containsDynamicStyles:s$25,options:null};}_validateStyleAst(i$27,e$19){let r$34=e$19.currentAnimateTimings,o$32=e$19.currentTime,s$25=e$19.currentTime;r$34&&s$25>0&&(s$25-=r$34.duration+r$34.delay),i$27.styles.forEach(n$46=>{typeof n$46!=`string`&&n$46.forEach((a$30,c$37)=>{let m$32=e$19.collectedStyles.get(e$19.currentQuerySelector),l$26=m$32.get(c$37),g$19=!0;l$26&&(s$25!=o$32&&s$25>=l$26.startTime&&o$32<=l$26.endTime&&(e$19.errors.push(dY(c$37,l$26.startTime,l$26.endTime,s$25,o$32)),g$19=!1),s$25=l$26.startTime),g$19&&m$32.set(c$37,{startTime:s$25,endTime:o$32}),e$19.options&&OY(a$30,e$19.options,e$19.errors);});});}visitKeyframes(i$27,e$19){let r$34={type:i$16.Keyframes,styles:[],options:null};if(!e$19.currentAnimateTimings)return e$19.errors.push(pY()),r$34;let o$32=1,s$25=0,n$46=[],a$30=!1,c$37=!1,m$32=0,l$26=i$27.steps.map(w$26=>{let E$16=this._makeStyleAst(w$26,e$19),P$20=E$16.offset!=null?E$16.offset:Nfe(E$16.styles),B$22=0;return P$20!=null&&(s$25++,B$22=E$16.offset=P$20),c$37=c$37||B$22<0||B$22>1,a$30=a$30||B$22<m$32,m$32=B$22,n$46.push(B$22),E$16;});c$37&&e$19.errors.push(uY()),a$30&&e$19.errors.push(fY());let g$19=i$27.steps.length,f$33=0;s$25>0&&s$25<g$19?e$19.errors.push(hY()):s$25==0&&(f$33=o$32/(g$19-1));let h$15=g$19-1,I$25=e$19.currentTime,A$22=e$19.currentAnimateTimings,R$21=A$22.duration;return l$26.forEach((w$26,E$16)=>{let P$20=f$33>0?E$16==h$15?1:f$33*E$16:n$46[E$16],B$22=P$20*R$21;e$19.currentTime=I$25+A$22.delay+B$22,A$22.duration=B$22,this._validateStyleAst(w$26,e$19),w$26.offset=P$20,r$34.styles.push(w$26);}),r$34;}visitReference(i$27,e$19){return{type:i$16.Reference,animation:Bo(this,Vp(i$27.animation),e$19),options:Sl$1(i$27.options)};}visitAnimateChild(i$27,e$19){return e$19.depCount++,{type:i$16.AnimateChild,options:Sl$1(i$27.options)};}visitAnimateRef(i$27,e$19){return{type:i$16.AnimateRef,animation:this.visitReference(i$27.animation,e$19),options:Sl$1(i$27.options)};}visitQuery(i$27,e$19){let r$34=e$19.currentQuerySelector,o$32=i$27.options||{};e$19.queryCount++,e$19.currentQuery=i$27;let[s$25,n$46]=Lfe(i$27.selector);e$19.currentQuerySelector=r$34.length?r$34+` `+s$25:s$25,No$2(e$19.collectedStyles,e$19.currentQuerySelector,new Map());let a$30=Bo(this,Vp(i$27.animation),e$19);return e$19.currentQuery=null,e$19.currentQuerySelector=r$34,{type:i$16.Query,selector:s$25,limit:o$32.limit||0,optional:!!o$32.optional,includeSelf:n$46,animation:a$30,originalSelector:i$27.selector,options:Sl$1(i$27.options)};}visitStagger(i$27,e$19){e$19.currentQuery||e$19.errors.push(gY());let r$34=i$27.timings===`full`?{duration:0,delay:0,easing:`full`}:qf(i$27.timings,e$19.errors,!0);return{type:i$16.Stagger,animation:Bo(this,Vp(i$27.animation),e$19),timings:r$34,options:null};}};hw=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map();options=null;unsupportedCSSPropertiesFound=new Set();constructor(i$27){this.errors=i$27;}};Qf=class{_map=new Map();get(i$27){return this._map.get(i$27)||[];}append(i$27,e$19){let r$34=this._map.get(i$27);r$34||this._map.set(i$27,r$34=[]),r$34.push(...e$19);}has(i$27){return this._map.has(i$27);}clear(){this._map.clear();}},Vfe=1,Wfe=new RegExp(`:enter`,`g`),Gfe=new RegExp(`:leave`,`g`);gw=class{buildKeyframes(i$27,e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26=[]){m$32=m$32||new Qf();let g$19=new yw(i$27,e$19,m$32,o$32,s$25,l$26,[]);g$19.options=c$37;let f$33=c$37.delay?ra(c$37.delay):0;g$19.currentTimeline.delayNextStep(f$33),g$19.currentTimeline.setStyles([n$46],null,g$19.errors,c$37),Bo(this,r$34,g$19);let h$15=g$19.timelines.filter(I$25=>I$25.containsAnimation());if(h$15.length&&a$30.size){let I$25;for(let A$22=h$15.length-1;A$22>=0;A$22--){let R$21=h$15[A$22];if(R$21.element===e$19){I$25=R$21;break;}}I$25&&!I$25.allowOnlyTimelineStyles()&&I$25.setStyles([a$30],null,g$19.errors,c$37);}return h$15.length?h$15.map(I$25=>I$25.buildKeyframes()):[Ew(e$19,[],[],[],0,f$33,``,!1)];}visitTrigger(i$27,e$19){}visitState(i$27,e$19){}visitTransition(i$27,e$19){}visitAnimateChild(i$27,e$19){let r$34=e$19.subInstructions.get(e$19.element);if(r$34){let o$32=e$19.createSubContext(i$27.options),s$25=e$19.currentTimeline.currentTime,n$46=this._visitSubInstructions(r$34,o$32,o$32.options);s$25!=n$46&&e$19.transformIntoNewTimeline(n$46);}e$19.previousNode=i$27;}visitAnimateRef(i$27,e$19){let r$34=e$19.createSubContext(i$27.options);r$34.transformIntoNewTimeline(),this._applyAnimationRefDelays([i$27.options,i$27.animation.options],e$19,r$34),this.visitReference(i$27.animation,r$34),e$19.transformIntoNewTimeline(r$34.currentTimeline.currentTime),e$19.previousNode=i$27;}_applyAnimationRefDelays(i$27,e$19,r$34){for(let o$32 of i$27){let s$25=o$32?.delay;if(s$25){let n$46=typeof s$25==`number`?s$25:ra(Up(s$25,o$32?.params??{},e$19.errors));r$34.delayNextStep(n$46);}}}_visitSubInstructions(i$27,e$19,r$34){let s$25=e$19.currentTimeline.currentTime,n$46=r$34.duration!=null?ra(r$34.duration):null,a$30=r$34.delay!=null?ra(r$34.delay):null;return n$46!==0&&i$27.forEach(c$37=>{let m$32=e$19.appendInstructionToTimeline(c$37,n$46,a$30);s$25=Math.max(s$25,m$32.duration+m$32.delay);}),s$25;}visitReference(i$27,e$19){e$19.updateOptions(i$27.options,!0),Bo(this,i$27.animation,e$19),e$19.previousNode=i$27;}visitSequence(i$27,e$19){let r$34=e$19.subContextCount,o$32=e$19,s$25=i$27.options;if(s$25&&(s$25.params||s$25.delay)&&(o$32=e$19.createSubContext(s$25),o$32.transformIntoNewTimeline(),s$25.delay!=null)){o$32.previousNode.type==i$16.Style&&(o$32.currentTimeline.snapshotCurrentStyles(),o$32.previousNode=xC);let n$46=ra(s$25.delay);o$32.delayNextStep(n$46);}i$27.steps.length&&(i$27.steps.forEach(n$46=>Bo(this,n$46,o$32)),o$32.currentTimeline.applyStylesToKeyframe(),o$32.subContextCount>r$34&&o$32.transformIntoNewTimeline()),e$19.previousNode=i$27;}visitGroup(i$27,e$19){let r$34=[],o$32=e$19.currentTimeline.currentTime,s$25=i$27.options&&i$27.options.delay?ra(i$27.options.delay):0;i$27.steps.forEach(n$46=>{let a$30=e$19.createSubContext(i$27.options);s$25&&a$30.delayNextStep(s$25),Bo(this,n$46,a$30),o$32=Math.max(o$32,a$30.currentTimeline.currentTime),r$34.push(a$30.currentTimeline);}),r$34.forEach(n$46=>e$19.currentTimeline.mergeTimelineCollectedStyles(n$46)),e$19.transformIntoNewTimeline(o$32),e$19.previousNode=i$27;}_visitTiming(i$27,e$19){if(i$27.dynamic){let r$34=i$27.strValue;return qf(e$19.params?Up(r$34,e$19.params,e$19.errors):r$34,e$19.errors);}else return{duration:i$27.duration,delay:i$27.delay,easing:i$27.easing};}visitAnimate(i$27,e$19){let r$34=e$19.currentAnimateTimings=this._visitTiming(i$27.timings,e$19),o$32=e$19.currentTimeline;r$34.delay&&(e$19.incrementTime(r$34.delay),o$32.snapshotCurrentStyles());let s$25=i$27.style;s$25.type==i$16.Keyframes?this.visitKeyframes(s$25,e$19):(e$19.incrementTime(r$34.duration),this.visitStyle(s$25,e$19),o$32.applyStylesToKeyframe()),e$19.currentAnimateTimings=null,e$19.previousNode=i$27;}visitStyle(i$27,e$19){let r$34=e$19.currentTimeline,o$32=e$19.currentAnimateTimings;!o$32&&r$34.hasCurrentStyleProperties()&&r$34.forwardFrame();let s$25=o$32&&o$32.easing||i$27.easing;i$27.isEmptyStep?r$34.applyEmptyStep(s$25):r$34.setStyles(i$27.styles,s$25,e$19.errors,e$19.options),e$19.previousNode=i$27;}visitKeyframes(i$27,e$19){let r$34=e$19.currentAnimateTimings,o$32=e$19.currentTimeline.duration,s$25=r$34.duration,a$30=e$19.createSubContext().currentTimeline;a$30.easing=r$34.easing,i$27.styles.forEach(c$37=>{let m$32=c$37.offset||0;a$30.forwardTime(m$32*s$25),a$30.setStyles(c$37.styles,c$37.easing,e$19.errors,e$19.options),a$30.applyStylesToKeyframe();}),e$19.currentTimeline.mergeTimelineCollectedStyles(a$30),e$19.transformIntoNewTimeline(o$32+s$25),e$19.previousNode=i$27;}visitQuery(i$27,e$19){let r$34=e$19.currentTimeline.currentTime,o$32=i$27.options||{},s$25=o$32.delay?ra(o$32.delay):0;s$25&&(e$19.previousNode.type===i$16.Style||r$34==0&&e$19.currentTimeline.hasCurrentStyleProperties())&&(e$19.currentTimeline.snapshotCurrentStyles(),e$19.previousNode=xC);let n$46=r$34,a$30=e$19.invokeQuery(i$27.selector,i$27.originalSelector,i$27.limit,i$27.includeSelf,!!o$32.optional,e$19.errors);e$19.currentQueryTotal=a$30.length;let c$37=null;a$30.forEach((m$32,l$26)=>{e$19.currentQueryIndex=l$26;let g$19=e$19.createSubContext(i$27.options,m$32);s$25&&g$19.delayNextStep(s$25),m$32===e$19.element&&(c$37=g$19.currentTimeline),Bo(this,i$27.animation,g$19),g$19.currentTimeline.applyStylesToKeyframe();let f$33=g$19.currentTimeline.currentTime;n$46=Math.max(n$46,f$33);}),e$19.currentQueryIndex=0,e$19.currentQueryTotal=0,e$19.transformIntoNewTimeline(n$46),c$37&&(e$19.currentTimeline.mergeTimelineCollectedStyles(c$37),e$19.currentTimeline.snapshotCurrentStyles()),e$19.previousNode=i$27;}visitStagger(i$27,e$19){let r$34=e$19.parentContext,o$32=e$19.currentTimeline,s$25=i$27.timings,n$46=Math.abs(s$25.duration),a$30=n$46*(e$19.currentQueryTotal-1),c$37=n$46*e$19.currentQueryIndex;switch(s$25.duration<0?`reverse`:s$25.easing){case`reverse`:c$37=a$30-c$37;break;case`full`:c$37=r$34.currentStaggerTime;break;}let l$26=e$19.currentTimeline;c$37&&l$26.delayNextStep(c$37);let g$19=l$26.currentTime;Bo(this,i$27.animation,e$19),e$19.previousNode=i$27,r$34.currentStaggerTime=o$32.currentTime-g$19+(o$32.startTime-r$34.currentTimeline.startTime);}},xC={},yw=class t$21{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=xC;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(i$27,e$19,r$34,o$32,s$25,n$46,a$30,c$37){this._driver=i$27,this.element=e$19,this.subInstructions=r$34,this._enterClassName=o$32,this._leaveClassName=s$25,this.errors=n$46,this.timelines=a$30,this.currentTimeline=c$37||new OC(this._driver,e$19,0),a$30.push(this.currentTimeline);}get params(){return this.options.params;}updateOptions(i$27,e$19){if(!i$27)return;let r$34=i$27,o$32=this.options;r$34.duration!=null&&(o$32.duration=ra(r$34.duration)),r$34.delay!=null&&(o$32.delay=ra(r$34.delay));let s$25=r$34.params;if(s$25){let n$46=o$32.params;n$46||(n$46=this.options.params={}),Object.keys(s$25).forEach(a$30=>{(!e$19||!n$46.hasOwnProperty(a$30))&&(n$46[a$30]=Up(s$25[a$30],n$46,this.errors));});}}_copyOptions(){let i$27={};if(this.options){let e$19=this.options.params;if(e$19){let r$34=i$27.params={};Object.keys(e$19).forEach(o$32=>{r$34[o$32]=e$19[o$32];});}}return i$27;}createSubContext(i$27=null,e$19,r$34){let o$32=e$19||this.element,s$25=new t$21(this._driver,o$32,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o$32,r$34||0));return s$25.previousNode=this.previousNode,s$25.currentAnimateTimings=this.currentAnimateTimings,s$25.options=this._copyOptions(),s$25.updateOptions(i$27),s$25.currentQueryIndex=this.currentQueryIndex,s$25.currentQueryTotal=this.currentQueryTotal,s$25.parentContext=this,this.subContextCount++,s$25;}transformIntoNewTimeline(i$27){return this.previousNode=xC,this.currentTimeline=this.currentTimeline.fork(this.element,i$27),this.timelines.push(this.currentTimeline),this.currentTimeline;}appendInstructionToTimeline(i$27,e$19,r$34){let o$32={duration:e$19??i$27.duration,delay:this.currentTimeline.currentTime+(r$34??0)+i$27.delay,easing:``},s$25=new vw(this._driver,i$27.element,i$27.keyframes,i$27.preStyleProps,i$27.postStyleProps,o$32,i$27.stretchStartingKeyframe);return this.timelines.push(s$25),o$32;}incrementTime(i$27){this.currentTimeline.forwardTime(this.currentTimeline.duration+i$27);}delayNextStep(i$27){i$27>0&&this.currentTimeline.delayNextStep(i$27);}invokeQuery(i$27,e$19,r$34,o$32,s$25,n$46){let a$30=[];if(o$32&&a$30.push(this.element),i$27.length>0){i$27=i$27.replace(Wfe,`.`+this._enterClassName),i$27=i$27.replace(Gfe,`.`+this._leaveClassName);let c$37=r$34!=1,m$32=this._driver.query(this.element,i$27,c$37);r$34!==0&&(m$32=r$34<0?m$32.slice(m$32.length+r$34,m$32.length):m$32.slice(0,r$34)),a$30.push(...m$32);}return!s$25&&a$30.length==0&&n$46.push(yY(e$19)),a$30;}},OC=class t$21{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map();_currentKeyframe=new Map();_keyframes=new Map();_styleSummary=new Map();_localTimelineStyles=new Map();_globalTimelineStyles;_pendingStyles=new Map();_backFill=new Map();_currentEmptyStepKeyframe=null;constructor(i$27,e$19,r$34,o$32){this._driver=i$27,this.element=e$19,this.startTime=r$34,this._elementTimelineStylesLookup=o$32,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map()),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e$19),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e$19,this._localTimelineStyles)),this._loadKeyframe();}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0;}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0;}get currentTime(){return this.startTime+this.duration;}delayNextStep(i$27){let e$19=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e$19?(this.forwardTime(this.currentTime+i$27),e$19&&this.snapshotCurrentStyles()):this.startTime+=i$27;}fork(i$27,e$19){return this.applyStylesToKeyframe(),new t$21(this._driver,i$27,e$19||this.currentTime,this._elementTimelineStylesLookup);}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map(),this._keyframes.set(this.duration,this._currentKeyframe));}forwardFrame(){this.duration+=Vfe,this._loadKeyframe();}forwardTime(i$27){this.applyStylesToKeyframe(),this.duration=i$27,this._loadKeyframe();}_updateStyle(i$27,e$19){this._localTimelineStyles.set(i$27,e$19),this._globalTimelineStyles.set(i$27,e$19),this._styleSummary.set(i$27,{time:this.currentTime,value:e$19});}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe;}applyEmptyStep(i$27){i$27&&this._previousKeyframe.set(`easing`,i$27);for(let[e$19,r$34]of this._globalTimelineStyles)this._backFill.set(e$19,r$34||c$19),this._currentKeyframe.set(e$19,c$19);this._currentEmptyStepKeyframe=this._currentKeyframe;}setStyles(i$27,e$19,r$34,o$32){e$19&&this._previousKeyframe.set(`easing`,e$19);let s$25=o$32&&o$32.params||{},n$46=zfe(i$27,this._globalTimelineStyles);for(let[a$30,c$37]of n$46){let m$32=Up(c$37,s$25,r$34);this._pendingStyles.set(a$30,m$32),this._localTimelineStyles.has(a$30)||this._backFill.set(a$30,this._globalTimelineStyles.get(a$30)??c$19),this._updateStyle(a$30,m$32);}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((i$27,e$19)=>{this._currentKeyframe.set(e$19,i$27);}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i$27,e$19)=>{this._currentKeyframe.has(e$19)||this._currentKeyframe.set(e$19,i$27);}));}snapshotCurrentStyles(){for(let[i$27,e$19]of this._localTimelineStyles)this._pendingStyles.set(i$27,e$19),this._updateStyle(i$27,e$19);}getFinalKeyframe(){return this._keyframes.get(this.duration);}get properties(){let i$27=[];for(let e$19 in this._currentKeyframe)i$27.push(e$19);return i$27;}mergeTimelineCollectedStyles(i$27){i$27._styleSummary.forEach((e$19,r$34)=>{let o$32=this._styleSummary.get(r$34);(!o$32||e$19.time>o$32.time)&&this._updateStyle(r$34,e$19.value);});}buildKeyframes(){this.applyStylesToKeyframe();let i$27=new Set(),e$19=new Set(),r$34=this._keyframes.size===1&&this.duration===0,o$32=[];this._keyframes.forEach((a$30,c$37)=>{let m$32=new Map([...this._backFill,...a$30]);m$32.forEach((l$26,g$19)=>{l$26===S$12?i$27.add(g$19):l$26===c$19&&e$19.add(g$19);}),r$34||m$32.set(`offset`,c$37/this.duration),o$32.push(m$32);});let s$25=[...i$27.values()],n$46=[...e$19.values()];if(r$34){let a$30=o$32[0],c$37=new Map(a$30);a$30.set(`offset`,0),c$37.set(`offset`,1),o$32=[a$30,c$37];}return Ew(this.element,o$32,s$25,n$46,this.duration,this.startTime,this.easing,!1);}},vw=class extends OC{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(i$27,e$19,r$34,o$32,s$25,n$46,a$30=!1){super(i$27,e$19,n$46.delay),this.keyframes=r$34,this.preStyleProps=o$32,this.postStyleProps=s$25,this._stretchStartingKeyframe=a$30,this.timings={duration:n$46.duration,delay:n$46.delay,easing:n$46.easing};}containsAnimation(){return this.keyframes.length>1;}buildKeyframes(){let i$27=this.keyframes,{delay:e$19,duration:r$34,easing:o$32}=this.timings;if(this._stretchStartingKeyframe&&e$19){let s$25=[],n$46=r$34+e$19,a$30=e$19/n$46,c$37=new Map(i$27[0]);c$37.set(`offset`,0),s$25.push(c$37);let m$32=new Map(i$27[0]);m$32.set(`offset`,DY(a$30)),s$25.push(m$32);let l$26=i$27.length-1;for(let g$19=1;g$19<=l$26;g$19++){let f$33=new Map(i$27[g$19]),h$15=f$33.get(`offset`),I$25=e$19+h$15*r$34;f$33.set(`offset`,DY(I$25/n$46)),s$25.push(f$33);}r$34=n$46,e$19=0,o$32=``,i$27=s$25;}return Ew(this.element,i$27,this.preStyleProps,this.postStyleProps,r$34,e$19,o$32,!0);}};lw={},PC=class{_triggerName;ast;_stateStyles;constructor(i$27,e$19,r$34){this._triggerName=i$27,this.ast=e$19,this._stateStyles=r$34;}match(i$27,e$19,r$34,o$32){return qfe(this.ast.matchers,i$27,e$19,r$34,o$32);}buildStyles(i$27,e$19,r$34){let o$32=this._stateStyles.get(`*`);return i$27!==void 0&&(o$32=this._stateStyles.get(i$27?.toString())||o$32),o$32?o$32.buildStyles(e$19,r$34):new Map();}build(i$27,e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26){let g$19=[],f$33=this.ast.options&&this.ast.options.params||lw,h$15=a$30&&a$30.params||lw,I$25=this.buildStyles(r$34,h$15,g$19),A$22=c$37&&c$37.params||lw,R$21=this.buildStyles(o$32,A$22,g$19),w$26=new Set(),E$16=new Map(),P$20=new Map(),B$22=o$32===`void`,G$16={params:QY(A$22,f$33),delay:this.ast.options?.delay},v$22=l$26?[]:KY(i$27,e$19,this.ast.animation,s$25,n$46,I$25,R$21,G$16,m$32,g$19),x$28=0;return v$22.forEach(U$19=>{x$28=Math.max(U$19.duration+U$19.delay,x$28);}),g$19.length?NY(e$19,this._triggerName,r$34,o$32,B$22,I$25,R$21,[],[],E$16,P$20,x$28,g$19):(v$22.forEach(U$19=>{let H$10=U$19.element,te$16=No$2(E$16,H$10,new Set());U$19.preStyleProps.forEach(ke$5=>te$16.add(ke$5));let ye$5=No$2(P$20,H$10,new Set());U$19.postStyleProps.forEach(ke$5=>ye$5.add(ke$5)),H$10!==e$19&&w$26.add(H$10);}),NY(e$19,this._triggerName,r$34,o$32,B$22,I$25,R$21,v$22,[...w$26.values()],E$16,P$20,x$28));}};Sw=class{styles;defaultParams;normalizer;constructor(i$27,e$19,r$34){this.styles=i$27,this.defaultParams=e$19,this.normalizer=r$34;}buildStyles(i$27,e$19){let r$34=new Map(),o$32=QY(i$27,this.defaultParams);return this.styles.styles.forEach(s$25=>{typeof s$25!=`string`&&s$25.forEach((n$46,a$30)=>{n$46&&(n$46=Up(n$46,o$32,e$19));let c$37=this.normalizer.normalizePropertyName(a$30,e$19);n$46=this.normalizer.normalizeStyleValue(a$30,c$37,n$46,e$19),r$34.set(a$30,n$46);});}),r$34;}};bw=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map();constructor(i$27,e$19,r$34){this.name=i$27,this.ast=e$19,this._normalizer=r$34,e$19.states.forEach(o$32=>{let s$25=o$32.options&&o$32.options.params||{};this.states.set(o$32.name,new Sw(o$32.style,s$25,r$34));}),BY(this.states,`true`,`1`),BY(this.states,`false`,`0`),e$19.transitions.forEach(o$32=>{this.transitionFactories.push(new PC(i$27,o$32,this.states));}),this.fallbackTransition=Qfe(i$27,this.states);}get containsQueries(){return this.ast.queryCount>0;}matchTransition(i$27,e$19,r$34,o$32){return this.transitionFactories.find(n$46=>n$46.match(i$27,e$19,r$34,o$32))||null;}matchStyles(i$27,e$19,r$34){return this.fallbackTransition.buildStyles(i$27,e$19,r$34);}};Jfe=new Qf(),Cw=class{bodyNode;_driver;_normalizer;_animations=new Map();_playersById=new Map();players=[];constructor(i$27,e$19,r$34){this.bodyNode=i$27,this._driver=e$19,this._normalizer=r$34;}register(i$27,e$19){let r$34=[],s$25=qY(this._driver,e$19,r$34,[]);if(r$34.length)throw CY(r$34);this._animations.set(i$27,s$25);}_buildPlayer(i$27,e$19,r$34){let o$32=i$27.element,s$25=tw(this._normalizer,i$27.keyframes,e$19,r$34);return this._driver.animate(o$32,s$25,i$27.duration,i$27.delay,i$27.easing,[],!0);}create(i$27,e$19,r$34={}){let o$32=[],s$25=this._animations.get(i$27),n$46,a$30=new Map();if(s$25?(n$46=KY(this._driver,e$19,s$25,nw,_C,new Map(),new Map(),r$34,Jfe,o$32),n$46.forEach(l$26=>{let g$19=No$2(a$30,l$26.element,new Map());l$26.postStyleProps.forEach(f$33=>g$19.set(f$33,null));})):(o$32.push(_Y()),n$46=[]),o$32.length)throw kY(o$32);a$30.forEach((l$26,g$19)=>{l$26.forEach((f$33,h$15)=>{l$26.set(h$15,this._driver.computeStyle(g$19,h$15,c$19));});});let m$32=Ba(n$46.map(l$26=>{let g$19=a$30.get(l$26.element);return this._buildPlayer(l$26,new Map(),g$19);}));return this._playersById.set(i$27,m$32),m$32.onDestroy(()=>this.destroy(i$27)),this.players.push(m$32),m$32;}destroy(i$27){let e$19=this._getPlayer(i$27);e$19.destroy(),this._playersById.delete(i$27);let r$34=this.players.indexOf(e$19);r$34>=0&&this.players.splice(r$34,1);}_getPlayer(i$27){let e$19=this._playersById.get(i$27);if(!e$19)throw TY(i$27);return e$19;}listen(i$27,e$19,r$34,o$32){let s$25=bC(e$19,``,``,``);return SC(this._getPlayer(i$27),r$34,s$25,o$32),()=>{};}command(i$27,e$19,r$34,o$32){if(r$34==`register`){this.register(i$27,o$32[0]);return;}if(r$34==`create`){let n$46=o$32[0]||{};this.create(i$27,e$19,n$46);return;}let s$25=this._getPlayer(i$27);switch(r$34){case`play`:s$25.play();break;case`pause`:s$25.pause();break;case`reset`:s$25.reset();break;case`restart`:s$25.restart();break;case`finish`:s$25.finish();break;case`init`:s$25.init();break;case`setPosition`:s$25.setPosition(parseFloat(o$32[0]));break;case`destroy`:this.destroy(i$27);break;}}},VY=`ng-animate-queued`,Yfe=`.ng-animate-queued`,dw=`ng-animate-disabled`,Xfe=`.ng-animate-disabled`,Zfe=`ng-star-inserted`,ehe=`.ng-star-inserted`,the=[],JY={namespaceId:``,setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},rhe={namespaceId:``,setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fn$1=`__ng_removed`,Jf=class{namespaceId;value;options;get params(){return this.options.params;}constructor(i$27,e$19=``){this.namespaceId=e$19;let r$34=i$27&&i$27.hasOwnProperty(`value`);if(this.value=ohe(r$34?i$27.value:i$27),r$34){let{value:s$25,...n$46}=i$27;this.options=n$46;}else this.options={};this.options.params||(this.options.params={});}absorbOptions(i$27){let e$19=i$27.params;if(e$19){let r$34=this.options.params;Object.keys(e$19).forEach(o$32=>{r$34[o$32]??(r$34[o$32]=e$19[o$32]);});}}},Kf=`void`,pw=new Jf(Kf),_w=class{id;hostElement;_engine;players=[];_triggers=new Map();_queue=[];_elementListeners=new Map();_hostClassName;constructor(i$27,e$19,r$34){this.id=i$27,this.hostElement=e$19,this._engine=r$34,this._hostClassName=`ng-tns-`+i$27,Rs$2(e$19,this._hostClassName);}listen(i$27,e$19,r$34,o$32){if(!this._triggers.has(e$19))throw IY(r$34,e$19);if(r$34==null||r$34.length==0)throw EY(e$19);if(!she(r$34))throw AY(r$34,e$19);let s$25=No$2(this._elementListeners,i$27,[]),n$46={name:e$19,phase:r$34,callback:o$32};s$25.push(n$46);let a$30=No$2(this._engine.statesByElement,i$27,new Map());return a$30.has(e$19)||(Rs$2(i$27,Gf),Rs$2(i$27,Gf+`-`+e$19),a$30.set(e$19,pw)),()=>{this._engine.afterFlush(()=>{let c$37=s$25.indexOf(n$46);c$37>=0&&s$25.splice(c$37,1),this._triggers.has(e$19)||a$30.delete(e$19);});};}register(i$27,e$19){return this._triggers.has(i$27)?!1:(this._triggers.set(i$27,e$19),!0);}_getTrigger(i$27){let e$19=this._triggers.get(i$27);if(!e$19)throw wY(i$27);return e$19;}trigger(i$27,e$19,r$34,o$32=!0){let s$25=this._getTrigger(e$19),n$46=new Yf(this.id,e$19,i$27),a$30=this._engine.statesByElement.get(i$27);a$30||(Rs$2(i$27,Gf),Rs$2(i$27,Gf+`-`+e$19),this._engine.statesByElement.set(i$27,a$30=new Map()));let c$37=a$30.get(e$19),m$32=new Jf(r$34,this.id);if(!(r$34&&r$34.hasOwnProperty(`value`))&&c$37&&m$32.absorbOptions(c$37.options),a$30.set(e$19,m$32),c$37||(c$37=pw),!(m$32.value===Kf)&&c$37.value===m$32.value){if(!che(c$37.params,m$32.params)){let A$22=[],R$21=s$25.matchStyles(c$37.value,c$37.params,A$22),w$26=s$25.matchStyles(m$32.value,m$32.params,A$22);A$22.length?this._engine.reportError(A$22):this._engine.afterFlush(()=>{Kc$4(i$27,R$21),un$1(i$27,w$26);});}return;}let f$33=No$2(this._engine.playersByElement,i$27,[]);f$33.forEach(A$22=>{A$22.namespaceId==this.id&&A$22.triggerName==e$19&&A$22.queued&&A$22.destroy();});let h$15=s$25.matchTransition(c$37.value,m$32.value,i$27,m$32.params),I$25=!1;if(!h$15){if(!o$32)return;h$15=s$25.fallbackTransition,I$25=!0;}return this._engine.totalQueuedPlayers++,this._queue.push({element:i$27,triggerName:e$19,transition:h$15,fromState:c$37,toState:m$32,player:n$46,isFallbackTransition:I$25}),I$25||(Rs$2(i$27,VY),n$46.onStart(()=>{Wp(i$27,VY);})),n$46.onDone(()=>{let A$22=this.players.indexOf(n$46);A$22>=0&&this.players.splice(A$22,1);let R$21=this._engine.playersByElement.get(i$27);if(R$21){let w$26=R$21.indexOf(n$46);w$26>=0&&R$21.splice(w$26,1);}}),this.players.push(n$46),f$33.push(n$46),n$46;}deregister(i$27){this._triggers.delete(i$27),this._engine.statesByElement.forEach(e$19=>e$19.delete(i$27)),this._elementListeners.forEach((e$19,r$34)=>{this._elementListeners.set(r$34,e$19.filter(o$32=>o$32.name!=i$27));});}clearElementCache(i$27){this._engine.statesByElement.delete(i$27),this._elementListeners.delete(i$27);let e$19=this._engine.playersByElement.get(i$27);e$19&&(e$19.forEach(r$34=>r$34.destroy()),this._engine.playersByElement.delete(i$27));}_signalRemovalForInnerTriggers(i$27,e$19){let r$34=this._engine.driver.query(i$27,zf,!0);r$34.forEach(o$32=>{if(o$32[fn$1])return;let s$25=this._engine.fetchNamespacesByElement(o$32);s$25.size?s$25.forEach(n$46=>n$46.triggerLeaveAnimation(o$32,e$19,!1,!0)):this.clearElementCache(o$32);}),this._engine.afterFlushAnimationsDone(()=>r$34.forEach(o$32=>this.clearElementCache(o$32)));}triggerLeaveAnimation(i$27,e$19,r$34,o$32){let s$25=this._engine.statesByElement.get(i$27),n$46=new Map();if(s$25){let a$30=[];if(s$25.forEach((c$37,m$32)=>{if(n$46.set(m$32,c$37.value),this._triggers.has(m$32)){let l$26=this.trigger(i$27,m$32,Kf,o$32);l$26&&a$30.push(l$26);}}),a$30.length)return this._engine.markElementAsRemoved(this.id,i$27,!0,e$19,n$46),r$34&&Ba(a$30).onDone(()=>this._engine.processLeaveNode(i$27)),!0;}return!1;}prepareLeaveAnimationListeners(i$27){let e$19=this._elementListeners.get(i$27),r$34=this._engine.statesByElement.get(i$27);if(e$19&&r$34){let o$32=new Set();e$19.forEach(s$25=>{let n$46=s$25.name;if(o$32.has(n$46))return;o$32.add(n$46);let c$37=this._triggers.get(n$46).fallbackTransition,m$32=r$34.get(n$46)||pw,l$26=new Jf(Kf),g$19=new Yf(this.id,n$46,i$27);this._engine.totalQueuedPlayers++,this._queue.push({element:i$27,triggerName:n$46,transition:c$37,fromState:m$32,toState:l$26,player:g$19,isFallbackTransition:!0});});}}removeNode(i$27,e$19){let r$34=this._engine;if(i$27.childElementCount&&this._signalRemovalForInnerTriggers(i$27,e$19),this.triggerLeaveAnimation(i$27,e$19,!0))return;let o$32=!1;if(r$34.totalAnimations){let s$25=r$34.players.length?r$34.playersByQueriedElement.get(i$27):[];if(s$25&&s$25.length)o$32=!0;else{let n$46=i$27;for(;n$46=n$46.parentNode;)if(r$34.statesByElement.get(n$46)){o$32=!0;break;}}}if(this.prepareLeaveAnimationListeners(i$27),o$32)r$34.markElementAsRemoved(this.id,i$27,!1,e$19);else{let s$25=i$27[fn$1];(!s$25||s$25===JY)&&(r$34.afterFlush(()=>this.clearElementCache(i$27)),r$34.destroyInnerAnimations(i$27),r$34._onRemovalComplete(i$27,e$19));}}insertNode(i$27,e$19){Rs$2(i$27,this._hostClassName);}drainQueuedTransitions(i$27){let e$19=[];return this._queue.forEach(r$34=>{let o$32=r$34.player;if(o$32.destroyed)return;let s$25=r$34.element,n$46=this._elementListeners.get(s$25);n$46&&n$46.forEach(a$30=>{if(a$30.name==r$34.triggerName){let c$37=bC(s$25,r$34.triggerName,r$34.fromState.value,r$34.toState.value);c$37._data=i$27,SC(r$34.player,a$30.phase,c$37,a$30.callback);}}),o$32.markedForDestroy?this._engine.afterFlush(()=>{o$32.destroy();}):e$19.push(r$34);}),this._queue=[],e$19.sort((r$34,o$32)=>{let s$25=r$34.transition.ast.depCount,n$46=o$32.transition.ast.depCount;return s$25==0||n$46==0?s$25-n$46:this._engine.driver.containsElement(r$34.element,o$32.element)?1:-1;});}destroy(i$27){this.players.forEach(e$19=>e$19.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i$27);}},kw$1=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map();playersByElement=new Map();playersByQueriedElement=new Map();statesByElement=new Map();disabledNodes=new Set();totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map();collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(i$27,e$19)=>{};_onRemovalComplete(i$27,e$19){this.onRemovalComplete(i$27,e$19);}constructor(i$27,e$19,r$34){this.bodyNode=i$27,this.driver=e$19,this._normalizer=r$34;}get queuedPlayers(){let i$27=[];return this._namespaceList.forEach(e$19=>{e$19.players.forEach(r$34=>{r$34.queued&&i$27.push(r$34);});}),i$27;}createNamespace(i$27,e$19){let r$34=new _w(i$27,e$19,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e$19)?this._balanceNamespaceList(r$34,e$19):(this.newHostElements.set(e$19,r$34),this.collectEnterElement(e$19)),this._namespaceLookup[i$27]=r$34;}_balanceNamespaceList(i$27,e$19){let r$34=this._namespaceList,o$32=this.namespacesByHostElement;if(r$34.length-1>=0){let n$46=!1,a$30=this.driver.getParentElement(e$19);for(;a$30;){let c$37=o$32.get(a$30);if(c$37){let m$32=r$34.indexOf(c$37);r$34.splice(m$32+1,0,i$27),n$46=!0;break;}a$30=this.driver.getParentElement(a$30);}n$46||r$34.unshift(i$27);}else r$34.push(i$27);return o$32.set(e$19,i$27),i$27;}register(i$27,e$19){let r$34=this._namespaceLookup[i$27];return r$34||(r$34=this.createNamespace(i$27,e$19)),r$34;}registerTrigger(i$27,e$19,r$34){let o$32=this._namespaceLookup[i$27];o$32&&o$32.register(e$19,r$34)&&this.totalAnimations++;}destroy(i$27,e$19){i$27&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r$34=this._fetchNamespace(i$27);this.namespacesByHostElement.delete(r$34.hostElement);let o$32=this._namespaceList.indexOf(r$34);o$32>=0&&this._namespaceList.splice(o$32,1),r$34.destroy(e$19),delete this._namespaceLookup[i$27];}));}_fetchNamespace(i$27){return this._namespaceLookup[i$27];}fetchNamespacesByElement(i$27){let e$19=new Set(),r$34=this.statesByElement.get(i$27);if(r$34){for(let o$32 of r$34.values())if(o$32.namespaceId){let s$25=this._fetchNamespace(o$32.namespaceId);s$25&&e$19.add(s$25);}}return e$19;}trigger(i$27,e$19,r$34,o$32){if(wC(e$19)){let s$25=this._fetchNamespace(i$27);if(s$25)return s$25.trigger(e$19,r$34,o$32),!0;}return!1;}insertNode(i$27,e$19,r$34,o$32){if(!wC(e$19))return;let s$25=e$19[fn$1];if(s$25&&s$25.setForRemoval){s$25.setForRemoval=!1,s$25.setForMove=!0;let n$46=this.collectedLeaveElements.indexOf(e$19);n$46>=0&&this.collectedLeaveElements.splice(n$46,1);}if(i$27){let n$46=this._fetchNamespace(i$27);n$46&&n$46.insertNode(e$19,r$34);}o$32&&this.collectEnterElement(e$19);}collectEnterElement(i$27){this.collectedEnterElements.push(i$27);}markElementAsDisabled(i$27,e$19){e$19?this.disabledNodes.has(i$27)||(this.disabledNodes.add(i$27),Rs$2(i$27,dw)):this.disabledNodes.has(i$27)&&(this.disabledNodes.delete(i$27),Wp(i$27,dw));}removeNode(i$27,e$19,r$34){if(wC(e$19)){let o$32=i$27?this._fetchNamespace(i$27):null;o$32?o$32.removeNode(e$19,r$34):this.markElementAsRemoved(i$27,e$19,!1,r$34);let s$25=this.namespacesByHostElement.get(e$19);s$25&&s$25.id!==i$27&&s$25.removeNode(e$19,r$34);}else this._onRemovalComplete(e$19,r$34);}markElementAsRemoved(i$27,e$19,r$34,o$32,s$25){this.collectedLeaveElements.push(e$19),e$19[fn$1]={namespaceId:i$27,setForRemoval:o$32,hasAnimation:r$34,removedBeforeQueried:!1,previousTriggersValues:s$25};}listen(i$27,e$19,r$34,o$32,s$25){return wC(e$19)?this._fetchNamespace(i$27).listen(e$19,r$34,o$32,s$25):()=>{};}_buildInstruction(i$27,e$19,r$34,o$32,s$25){return i$27.transition.build(this.driver,i$27.element,i$27.fromState.value,i$27.toState.value,r$34,o$32,i$27.fromState.options,i$27.toState.options,e$19,s$25);}destroyInnerAnimations(i$27){let e$19=this.driver.query(i$27,zf,!0);e$19.forEach(r$34=>this.destroyActiveAnimationsForElement(r$34)),this.playersByQueriedElement.size!=0&&(e$19=this.driver.query(i$27,kC,!0),e$19.forEach(r$34=>this.finishActiveQueriedAnimationOnElement(r$34)));}destroyActiveAnimationsForElement(i$27){let e$19=this.playersByElement.get(i$27);e$19&&e$19.forEach(r$34=>{r$34.queued?r$34.markedForDestroy=!0:r$34.destroy();});}finishActiveQueriedAnimationOnElement(i$27){let e$19=this.playersByQueriedElement.get(i$27);e$19&&e$19.forEach(r$34=>r$34.finish());}whenRenderingDone(){return new Promise(i$27=>{if(this.players.length)return Ba(this.players).onDone(()=>i$27());i$27();});}processLeaveNode(i$27){let e$19=i$27[fn$1];if(e$19&&e$19.setForRemoval){if(i$27[fn$1]=JY,e$19.namespaceId){this.destroyInnerAnimations(i$27);let r$34=this._fetchNamespace(e$19.namespaceId);r$34&&r$34.clearElementCache(i$27);}this._onRemovalComplete(i$27,e$19.setForRemoval);}i$27.classList?.contains(dw)&&this.markElementAsDisabled(i$27,!1),this.driver.query(i$27,Xfe,!0).forEach(r$34=>{this.markElementAsDisabled(r$34,!1);});}flush(i$27=-1){let e$19=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r$34,o$32)=>this._balanceNamespaceList(r$34,o$32)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r$34=0;r$34<this.collectedEnterElements.length;r$34++){let o$32=this.collectedEnterElements[r$34];Rs$2(o$32,Zfe);}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r$34=[];try{e$19=this._flushAnimations(r$34,i$27);}finally{for(let o$32=0;o$32<r$34.length;o$32++)r$34[o$32]();}}else for(let r$34=0;r$34<this.collectedLeaveElements.length;r$34++){let o$32=this.collectedLeaveElements[r$34];this.processLeaveNode(o$32);}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r$34=>r$34()),this._flushFns=[],this._whenQuietFns.length){let r$34=this._whenQuietFns;this._whenQuietFns=[],e$19.length?Ba(e$19).onDone(()=>{r$34.forEach(o$32=>o$32());}):r$34.forEach(o$32=>o$32());}}reportError(i$27){throw MY(i$27);}_flushAnimations(i$27,e$19){let r$34=new Qf(),o$32=[],s$25=new Map(),n$46=[],a$30=new Map(),c$37=new Map(),m$32=new Map(),l$26=new Set();this.disabledNodes.forEach(Ae$6=>{l$26.add(Ae$6);let Fe$6=this.driver.query(Ae$6,Yfe,!0);for(let He$5=0;He$5<Fe$6.length;He$5++)l$26.add(Fe$6[He$5]);});let g$19=this.bodyNode,f$33=Array.from(this.statesByElement.keys()),h$15=HY(f$33,this.collectedEnterElements),I$25=new Map(),A$22=0;h$15.forEach((Ae$6,Fe$6)=>{let He$5=nw+A$22++;I$25.set(Fe$6,He$5),Ae$6.forEach(St$3=>Rs$2(St$3,He$5));});let R$21=[],w$26=new Set(),E$16=new Set();for(let Ae$6=0;Ae$6<this.collectedLeaveElements.length;Ae$6++){let Fe$6=this.collectedLeaveElements[Ae$6],He$5=Fe$6[fn$1];He$5&&He$5.setForRemoval&&(R$21.push(Fe$6),w$26.add(Fe$6),He$5.hasAnimation?this.driver.query(Fe$6,ehe,!0).forEach(St$3=>w$26.add(St$3)):E$16.add(Fe$6));}let P$20=new Map(),B$22=HY(f$33,Array.from(w$26));B$22.forEach((Ae$6,Fe$6)=>{let He$5=_C+A$22++;P$20.set(Fe$6,He$5),Ae$6.forEach(St$3=>Rs$2(St$3,He$5));}),i$27.push(()=>{h$15.forEach((Ae$6,Fe$6)=>{let He$5=I$25.get(Fe$6);Ae$6.forEach(St$3=>Wp(St$3,He$5));}),B$22.forEach((Ae$6,Fe$6)=>{let He$5=P$20.get(Fe$6);Ae$6.forEach(St$3=>Wp(St$3,He$5));}),R$21.forEach(Ae$6=>{this.processLeaveNode(Ae$6);});});let G$16=[],v$22=[];for(let Ae$6=this._namespaceList.length-1;Ae$6>=0;Ae$6--)this._namespaceList[Ae$6].drainQueuedTransitions(e$19).forEach(He$5=>{let St$3=He$5.player,fr=He$5.element;if(G$16.push(St$3),this.collectedEnterElements.length){let Hi$3=fr[fn$1];if(Hi$3&&Hi$3.setForMove){if(Hi$3.previousTriggersValues&&Hi$3.previousTriggersValues.has(He$5.triggerName)){let cm=Hi$3.previousTriggersValues.get(He$5.triggerName),es$1=this.statesByElement.get(He$5.element);if(es$1&&es$1.has(He$5.triggerName)){let ph=es$1.get(He$5.triggerName);ph.value=cm,es$1.set(He$5.triggerName,ph);}}St$3.destroy();return;}}let no$2=!g$19||!this.driver.containsElement(g$19,fr),Wi$1=P$20.get(fr),vn$2=I$25.get(fr),Or=this._buildInstruction(He$5,r$34,vn$2,Wi$1,no$2);if(Or.errors&&Or.errors.length){v$22.push(Or);return;}if(no$2){St$3.onStart(()=>Kc$4(fr,Or.fromStyles)),St$3.onDestroy(()=>un$1(fr,Or.toStyles)),o$32.push(St$3);return;}if(He$5.isFallbackTransition){St$3.onStart(()=>Kc$4(fr,Or.fromStyles)),St$3.onDestroy(()=>un$1(fr,Or.toStyles)),o$32.push(St$3);return;}let JM=[];Or.timelines.forEach(Hi$3=>{Hi$3.stretchStartingKeyframe=!0,this.disabledNodes.has(Hi$3.element)||JM.push(Hi$3);}),Or.timelines=JM,r$34.append(fr,Or.timelines);let Kme={instruction:Or,player:St$3,element:fr};n$46.push(Kme),Or.queriedElements.forEach(Hi$3=>No$2(a$30,Hi$3,[]).push(St$3)),Or.preStyleProps.forEach((Hi$3,cm)=>{if(Hi$3.size){let es$1=c$37.get(cm);es$1||c$37.set(cm,es$1=new Set()),Hi$3.forEach((ph,Nk)=>es$1.add(Nk));}}),Or.postStyleProps.forEach((Hi$3,cm)=>{let es$1=m$32.get(cm);es$1||m$32.set(cm,es$1=new Set()),Hi$3.forEach((ph,Nk)=>es$1.add(Nk));});});if(v$22.length){let Ae$6=[];v$22.forEach(Fe$6=>{Ae$6.push(RY(Fe$6.triggerName,Fe$6.errors));}),G$16.forEach(Fe$6=>Fe$6.destroy()),this.reportError(Ae$6);}let x$28=new Map(),U$19=new Map();n$46.forEach(Ae$6=>{let Fe$6=Ae$6.element;r$34.has(Fe$6)&&(U$19.set(Fe$6,Fe$6),this._beforeAnimationBuild(Ae$6.player.namespaceId,Ae$6.instruction,x$28));}),o$32.forEach(Ae$6=>{let Fe$6=Ae$6.element;this._getPreviousPlayers(Fe$6,!1,Ae$6.namespaceId,Ae$6.triggerName,null).forEach(St$3=>{No$2(x$28,Fe$6,[]).push(St$3),St$3.destroy();});});let H$10=R$21.filter(Ae$6=>GY(Ae$6,c$37,m$32)),te$16=new Map();WY(te$16,this.driver,E$16,m$32,c$19).forEach(Ae$6=>{GY(Ae$6,c$37,m$32)&&H$10.push(Ae$6);});let ke$5=new Map();h$15.forEach((Ae$6,Fe$6)=>{WY(ke$5,this.driver,new Set(Ae$6),c$37,S$12);}),H$10.forEach(Ae$6=>{let Fe$6=te$16.get(Ae$6),He$5=ke$5.get(Ae$6);te$16.set(Ae$6,new Map([...(Fe$6?.entries()??[]),...(He$5?.entries()??[])]));});let Qe$3=[],Ct$5=[],Zt$4={};n$46.forEach(Ae$6=>{let{element:Fe$6,player:He$5,instruction:St$3}=Ae$6;if(r$34.has(Fe$6)){if(l$26.has(Fe$6)){He$5.onDestroy(()=>un$1(Fe$6,St$3.toStyles)),He$5.disabled=!0,He$5.overrideTotalTime(St$3.totalTime),o$32.push(He$5);return;}let fr=Zt$4;if(U$19.size>1){let Wi$1=Fe$6,vn$2=[];for(;Wi$1=Wi$1.parentNode;){let Or=U$19.get(Wi$1);if(Or){fr=Or;break;}vn$2.push(Wi$1);}vn$2.forEach(Or=>U$19.set(Or,fr));}let no$2=this._buildAnimation(He$5.namespaceId,St$3,x$28,s$25,ke$5,te$16);if(He$5.setRealPlayer(no$2),fr===Zt$4)Qe$3.push(He$5);else{let Wi$1=this.playersByElement.get(fr);Wi$1&&Wi$1.length&&(He$5.parentPlayer=Ba(Wi$1)),o$32.push(He$5);}}else Kc$4(Fe$6,St$3.fromStyles),He$5.onDestroy(()=>un$1(Fe$6,St$3.toStyles)),Ct$5.push(He$5),l$26.has(Fe$6)&&o$32.push(He$5);}),Ct$5.forEach(Ae$6=>{let Fe$6=s$25.get(Ae$6.element);if(Fe$6&&Fe$6.length){let He$5=Ba(Fe$6);Ae$6.setRealPlayer(He$5);}}),o$32.forEach(Ae$6=>{Ae$6.parentPlayer?Ae$6.syncPlayerEvents(Ae$6.parentPlayer):Ae$6.destroy();});for(let Ae$6=0;Ae$6<R$21.length;Ae$6++){let Fe$6=R$21[Ae$6],He$5=Fe$6[fn$1];if(Wp(Fe$6,_C),He$5&&He$5.hasAnimation)continue;let St$3=[];if(a$30.size){let no$2=a$30.get(Fe$6);no$2&&no$2.length&&St$3.push(...no$2);let Wi$1=this.driver.query(Fe$6,kC,!0);for(let vn$2=0;vn$2<Wi$1.length;vn$2++){let Or=a$30.get(Wi$1[vn$2]);Or&&Or.length&&St$3.push(...Or);}}let fr=St$3.filter(no$2=>!no$2.destroyed);fr.length?nhe(this,Fe$6,fr):this.processLeaveNode(Fe$6);}return R$21.length=0,Qe$3.forEach(Ae$6=>{this.players.push(Ae$6),Ae$6.onDone(()=>{Ae$6.destroy();let Fe$6=this.players.indexOf(Ae$6);this.players.splice(Fe$6,1);}),Ae$6.play();}),Qe$3;}afterFlush(i$27){this._flushFns.push(i$27);}afterFlushAnimationsDone(i$27){this._whenQuietFns.push(i$27);}_getPreviousPlayers(i$27,e$19,r$34,o$32,s$25){let n$46=[];if(e$19){let a$30=this.playersByQueriedElement.get(i$27);a$30&&(n$46=a$30);}else{let a$30=this.playersByElement.get(i$27);if(a$30){let c$37=!s$25||s$25==Kf;a$30.forEach(m$32=>{m$32.queued||!c$37&&m$32.triggerName!=o$32||n$46.push(m$32);});}}return(r$34||o$32)&&(n$46=n$46.filter(a$30=>!(r$34&&r$34!=a$30.namespaceId||o$32&&o$32!=a$30.triggerName))),n$46;}_beforeAnimationBuild(i$27,e$19,r$34){let o$32=e$19.triggerName,s$25=e$19.element,n$46=e$19.isRemovalTransition?void 0:i$27,a$30=e$19.isRemovalTransition?void 0:o$32;for(let c$37 of e$19.timelines){let m$32=c$37.element,l$26=m$32!==s$25,g$19=No$2(r$34,m$32,[]);this._getPreviousPlayers(m$32,l$26,n$46,a$30,e$19.toState).forEach(h$15=>{let I$25=h$15.getRealPlayer();I$25.beforeDestroy&&I$25.beforeDestroy(),h$15.destroy(),g$19.push(h$15);});}Kc$4(s$25,e$19.fromStyles);}_buildAnimation(i$27,e$19,r$34,o$32,s$25,n$46){let a$30=e$19.triggerName,c$37=e$19.element,m$32=[],l$26=new Set(),g$19=new Set(),f$33=e$19.timelines.map(I$25=>{let A$22=I$25.element;l$26.add(A$22);let R$21=A$22[fn$1];if(R$21&&R$21.removedBeforeQueried)return new a$16(I$25.duration,I$25.delay);let w$26=A$22!==c$37,E$16=ahe((r$34.get(A$22)||the).map(x$28=>x$28.getRealPlayer())).filter(x$28=>{let U$19=x$28;return U$19.element?U$19.element===A$22:!1;}),P$20=s$25.get(A$22),B$22=n$46.get(A$22),G$16=tw(this._normalizer,I$25.keyframes,P$20,B$22),v$22=this._buildPlayer(I$25,G$16,E$16);if(I$25.subTimeline&&o$32&&g$19.add(A$22),w$26){let x$28=new Yf(i$27,a$30,A$22);x$28.setRealPlayer(v$22),m$32.push(x$28);}return v$22;});m$32.forEach(I$25=>{No$2(this.playersByQueriedElement,I$25.element,[]).push(I$25),I$25.onDone(()=>ihe(this.playersByQueriedElement,I$25.element,I$25));}),l$26.forEach(I$25=>Rs$2(I$25,aw));let h$15=Ba(f$33);return h$15.onDestroy(()=>{l$26.forEach(I$25=>Wp(I$25,aw)),un$1(c$37,e$19.toStyles);}),g$19.forEach(I$25=>{No$2(o$32,I$25,[]).push(h$15);}),h$15;}_buildPlayer(i$27,e$19,r$34){return e$19.length>0?this.driver.animate(i$27.element,e$19,i$27.duration,i$27.delay,i$27.easing,r$34):new a$16(i$27.duration,i$27.delay);}},Yf=class{namespaceId;triggerName;element;_player=new a$16();_containsRealPlayer=!1;_queuedCallbacks=new Map();destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(i$27,e$19,r$34){this.namespaceId=i$27,this.triggerName=e$19,this.element=r$34;}setRealPlayer(i$27){this._containsRealPlayer||(this._player=i$27,this._queuedCallbacks.forEach((e$19,r$34)=>{e$19.forEach(o$32=>SC(i$27,r$34,void 0,o$32));}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i$27.totalTime),this.queued=!1);}getRealPlayer(){return this._player;}overrideTotalTime(i$27){this.totalTime=i$27;}syncPlayerEvents(i$27){let e$19=this._player;e$19.triggerCallback&&i$27.onStart(()=>e$19.triggerCallback(`start`)),i$27.onDone(()=>this.finish()),i$27.onDestroy(()=>this.destroy());}_queueEvent(i$27,e$19){No$2(this._queuedCallbacks,i$27,[]).push(e$19);}onDone(i$27){this.queued&&this._queueEvent(`done`,i$27),this._player.onDone(i$27);}onStart(i$27){this.queued&&this._queueEvent(`start`,i$27),this._player.onStart(i$27);}onDestroy(i$27){this.queued&&this._queueEvent(`destroy`,i$27),this._player.onDestroy(i$27);}init(){this._player.init();}hasStarted(){return this.queued?!1:this._player.hasStarted();}play(){!this.queued&&this._player.play();}pause(){!this.queued&&this._player.pause();}restart(){!this.queued&&this._player.restart();}finish(){this._player.finish();}destroy(){this.destroyed=!0,this._player.destroy();}reset(){!this.queued&&this._player.reset();}setPosition(i$27){this.queued||this._player.setPosition(i$27);}getPosition(){return this.queued?0:this._player.getPosition();}triggerCallback(i$27){let e$19=this._player;e$19.triggerCallback&&e$19.triggerCallback(i$27);}};Hp=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(i$27,e$19)=>{};constructor(i$27,e$19,r$34){this._driver=e$19,this._normalizer=r$34,this._transitionEngine=new kw$1(i$27.body,e$19,r$34),this._timelineEngine=new Cw(i$27.body,e$19,r$34),this._transitionEngine.onRemovalComplete=(o$32,s$25)=>this.onRemovalComplete(o$32,s$25);}registerTrigger(i$27,e$19,r$34,o$32,s$25){let n$46=i$27+`-`+o$32,a$30=this._triggerCache[n$46];if(!a$30){let c$37=[],l$26=qY(this._driver,s$25,c$37,[]);if(c$37.length)throw bY(o$32,c$37);a$30=Kfe(o$32,l$26,this._normalizer),this._triggerCache[n$46]=a$30;}this._transitionEngine.registerTrigger(e$19,o$32,a$30);}register(i$27,e$19){this._transitionEngine.register(i$27,e$19);}destroy(i$27,e$19){this._transitionEngine.destroy(i$27,e$19);}onInsert(i$27,e$19,r$34,o$32){this._transitionEngine.insertNode(i$27,e$19,r$34,o$32);}onRemove(i$27,e$19,r$34){this._transitionEngine.removeNode(i$27,e$19,r$34);}disableAnimations(i$27,e$19){this._transitionEngine.markElementAsDisabled(i$27,e$19);}process(i$27,e$19,r$34,o$32){if(r$34.charAt(0)==`@`){let[s$25,n$46]=rw(r$34),a$30=o$32;this._timelineEngine.command(s$25,e$19,n$46,a$30);}else this._transitionEngine.trigger(i$27,e$19,r$34,o$32);}listen(i$27,e$19,r$34,o$32,s$25){if(r$34.charAt(0)==`@`){let[n$46,a$30]=rw(r$34);return this._timelineEngine.listen(n$46,e$19,a$30,s$25);}return this._transitionEngine.listen(i$27,e$19,r$34,o$32,s$25);}flush(i$27=-1){this._transitionEngine.flush(i$27);}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players];}whenRenderingDone(){return this._transitionEngine.whenRenderingDone();}afterFlushAnimationsDone(i$27){this._transitionEngine.afterFlushAnimationsDone(i$27);}};lhe=(()=>{class t$21{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap();_state=0;_initialStyles;constructor(e$19,r$34,o$32){this._element=e$19,this._startStyles=r$34,this._endStyles=o$32;let s$25=t$21.initialStylesByElement.get(e$19);s$25||t$21.initialStylesByElement.set(e$19,s$25=new Map()),this._initialStyles=s$25;}start(){this._state<1&&(this._startStyles&&un$1(this._element,this._startStyles,this._initialStyles),this._state=1);}finish(){this.start(),this._state<2&&(un$1(this._element,this._initialStyles),this._endStyles&&(un$1(this._element,this._endStyles),this._endStyles=null),this._state=1);}destroy(){this.finish(),this._state<3&&(t$21.initialStylesByElement.delete(this._element),this._startStyles&&(Kc$4(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Kc$4(this._element,this._endStyles),this._endStyles=null),un$1(this._element,this._initialStyles),this._state=3);}}return t$21;})();$C=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map();constructor(i$27,e$19,r$34,o$32){this.element=i$27,this.keyframes=e$19,this.options=r$34,this._specialStyles=o$32,this._duration=r$34.duration,this._delay=r$34.delay||0,this.time=this._duration+this._delay;}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i$27=>i$27()),this._onDoneFns=[]);}init(){this._buildPlayer()&&this._preparePlayerBeforeStart();}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let i$27=this.keyframes,e$19=this._triggerWebAnimation(this.element,i$27,this.options);if(!e$19)return this._onFinish(),null;this.domPlayer=e$19,this._finalKeyframe=i$27.length?i$27[i$27.length-1]:new Map();let r$34=()=>this._onFinish();return e$19.addEventListener(`finish`,r$34),this.onDestroy(()=>{e$19.removeEventListener(`finish`,r$34);}),e$19;}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause();}_convertKeyframesToObject(i$27){let e$19=[];return i$27.forEach(r$34=>{e$19.push(Object.fromEntries(r$34));}),e$19;}_triggerWebAnimation(i$27,e$19,r$34){let o$32=this._convertKeyframesToObject(e$19);try{return i$27.animate(o$32,r$34);}catch{return null;}}onStart(i$27){this._originalOnStartFns.push(i$27),this._onStartFns.push(i$27);}onDone(i$27){this._originalOnDoneFns.push(i$27),this._onDoneFns.push(i$27);}onDestroy(i$27){this._onDestroyFns.push(i$27);}play(){let i$27=this._buildPlayer();i$27&&(this.hasStarted()||(this._onStartFns.forEach(e$19=>e$19()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),i$27.play());}pause(){this.init(),this.domPlayer?.pause();}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish());}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns;}_resetDomPlayerState(){this.domPlayer?.cancel();}restart(){this.reset(),this.play();}hasStarted(){return this._started;}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i$27=>i$27()),this._onDestroyFns=[]);}setPosition(i$27){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=i$27*this.time);}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0;}get totalTime(){return this._delay+this._duration;}beforeDestroy(){let i$27=new Map();this.hasStarted()&&this._finalKeyframe.forEach((r$34,o$32)=>{o$32!==`offset`&&i$27.set(o$32,this._finished?r$34:IC(this.element,o$32));}),this.currentSnapshot=i$27;}triggerCallback(i$27){let e$19=i$27===`start`?this._onStartFns:this._onDoneFns;e$19.forEach(r$34=>r$34()),e$19.length=0;}},jC$1=class{validateStyleProperty(i$27){return!0;}validateAnimatableStyleProperty(i$27){return!0;}containsElement(i$27,e$19){return iw(i$27,e$19);}getParentElement(i$27){return CC(i$27);}query(i$27,e$19,r$34){return ow(i$27,e$19,r$34);}computeStyle(i$27,e$19,r$34){return IC(i$27,e$19);}animate(i$27,e$19,r$34,o$32,s$25,n$46=[]){let c$37={duration:r$34,delay:o$32,fill:o$32==0?`both`:`forwards`};s$25&&(c$37.easing=s$25);let m$32=new Map(),l$26=n$46.filter(h$15=>h$15 instanceof $C);PY(r$34,o$32)&&l$26.forEach(h$15=>{h$15.currentSnapshot.forEach((I$25,A$22)=>m$32.set(A$22,I$25));});let g$19=xY(e$19).map(h$15=>new Map(h$15));g$19=$Y(i$27,g$19,m$32);let f$33=mhe(i$27,g$19);return new $C(i$27,g$19,c$37,f$33);}};MC=`@`,XY=`@.disabled`,LC=class{namespaceId;delegate;engine;_onDestroy;type=0;constructor(i$27,e$19,r$34,o$32){this.namespaceId=i$27,this.delegate=e$19,this.engine=r$34,this._onDestroy=o$32;}get data(){return this.delegate.data;}destroyNode(i$27){this.delegate.destroyNode?.(i$27);}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy();});}),this._onDestroy?.();}createElement(i$27,e$19){return this.delegate.createElement(i$27,e$19);}createComment(i$27){return this.delegate.createComment(i$27);}createText(i$27){return this.delegate.createText(i$27);}appendChild(i$27,e$19){this.delegate.appendChild(i$27,e$19),this.engine.onInsert(this.namespaceId,e$19,i$27,!1);}insertBefore(i$27,e$19,r$34,o$32=!0){this.delegate.insertBefore(i$27,e$19,r$34),this.engine.onInsert(this.namespaceId,e$19,i$27,o$32);}removeChild(i$27,e$19,r$34,o$32){if(o$32){this.delegate.removeChild(i$27,e$19,r$34,o$32);return;}this.parentNode(e$19)&&this.engine.onRemove(this.namespaceId,e$19,this.delegate);}selectRootElement(i$27,e$19){return this.delegate.selectRootElement(i$27,e$19);}parentNode(i$27){return this.delegate.parentNode(i$27);}nextSibling(i$27){return this.delegate.nextSibling(i$27);}setAttribute(i$27,e$19,r$34,o$32){this.delegate.setAttribute(i$27,e$19,r$34,o$32);}removeAttribute(i$27,e$19,r$34){this.delegate.removeAttribute(i$27,e$19,r$34);}addClass(i$27,e$19){this.delegate.addClass(i$27,e$19);}removeClass(i$27,e$19){this.delegate.removeClass(i$27,e$19);}setStyle(i$27,e$19,r$34,o$32){this.delegate.setStyle(i$27,e$19,r$34,o$32);}removeStyle(i$27,e$19,r$34){this.delegate.removeStyle(i$27,e$19,r$34);}setProperty(i$27,e$19,r$34){e$19.charAt(0)==MC&&e$19==XY?this.disableAnimations(i$27,!!r$34):this.delegate.setProperty(i$27,e$19,r$34);}setValue(i$27,e$19){this.delegate.setValue(i$27,e$19);}listen(i$27,e$19,r$34,o$32){return this.delegate.listen(i$27,e$19,r$34,o$32);}disableAnimations(i$27,e$19){this.engine.disableAnimations(i$27,e$19);}},Tw=class extends LC{factory;constructor(i$27,e$19,r$34,o$32,s$25){super(e$19,r$34,o$32,s$25),this.factory=i$27,this.namespaceId=e$19;}setProperty(i$27,e$19,r$34){e$19.charAt(0)==MC?e$19.charAt(1)==`.`&&e$19==XY?(r$34=r$34===void 0?!0:!!r$34,this.disableAnimations(i$27,r$34)):this.engine.process(this.namespaceId,i$27,e$19.slice(1),r$34):this.delegate.setProperty(i$27,e$19,r$34);}listen(i$27,e$19,r$34,o$32){if(e$19.charAt(0)==MC){let s$25=phe(i$27),n$46=e$19.slice(1),a$30=``;return n$46.charAt(0)!=MC&&([n$46,a$30]=uhe(n$46)),this.engine.listen(this.namespaceId,s$25,n$46,a$30,c$37=>{let m$32=c$37._data||-1;this.factory.scheduleListenerCallback(m$32,r$34,c$37);});}return this.delegate.listen(i$27,e$19,r$34,o$32);}};DC=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map();_cdRecurDepth=0;constructor(i$27,e$19,r$34){this.delegate=i$27,this.engine=e$19,this._zone=r$34,e$19.onRemovalComplete=(o$32,s$25)=>{s$25?.removeChild(null,o$32);};}createRenderer(i$27,e$19){let o$32=this.delegate.createRenderer(i$27,e$19);if(!i$27||!e$19?.data?.animation){let m$32=this._rendererCache,l$26=m$32.get(o$32);if(!l$26){let g$19=()=>m$32.delete(o$32);l$26=new LC(``,o$32,this.engine,g$19),m$32.set(o$32,l$26);}return l$26;}let s$25=e$19.id,n$46=e$19.id+`-`+this._currentId;this._currentId++,this.engine.register(n$46,i$27);let a$30=m$32=>{Array.isArray(m$32)?m$32.forEach(a$30):this.engine.registerTrigger(s$25,n$46,i$27,m$32.name,m$32);};return e$19.data.animation.forEach(a$30),new Tw(this,n$46,o$32,this.engine);}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin();}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++;});}scheduleListenerCallback(i$27,e$19,r$34){if(i$27>=0&&i$27<this._microtaskId){this._zone.run(()=>e$19(r$34));return;}let o$32=this._animationCallbacksBuffer;o$32.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o$32.forEach(s$25=>{let[n$46,a$30]=s$25;n$46(a$30);}),this._animationCallbacksBuffer=[];});}),o$32.push([e$19,r$34]);}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId);}),this.delegate.end&&this.delegate.end();}whenRenderingDone(){return this.engine.whenRenderingDone();}componentReplaced(i$27){this.engine.flush(),this.delegate.componentReplaced?.(i$27);}};hhe=(()=>{class t$21 extends Hp{constructor(e$19,r$34,o$32){super(e$19,r$34,o$32);}ngOnDestroy(){this.flush();}static fac=function(r$34){return new(r$34||t$21)(ge$10(Tm),ge$10(bl),ge$10(Cl));};static prov=k$27({token:t$21,factory:t$21.fac});}return t$21;})();ZY=[{provide:Cl,useFactory:ghe},{provide:Hp,useClass:hhe},{provide:mr$3,useFactory:yhe,deps:[k$22,Hp,V$16]}],vhe=[{provide:bl,useClass:Iw},{provide:fy,useValue:`NoopAnimations`},...ZY],She=[{provide:bl,useFactory:()=>new jC$1()},{provide:fy,useFactory:()=>`BrowserAnimations`},...ZY];bhe=t$21=>t$21.select(ct$5),r6={provide:n$14,deps:[q$19],useFactory:bhe};VN();dm();hr$3();VN();dm();hr$3();NC=class extends Ge$2{constructor(i$27){super(null,null),this.networkState=i$27,this.eventSubscription=void 0;}initialize(){this.attachFn=()=>{this.eventSubscription=this.networkState.networkActive$.pipe(oe$13(i$27=>i$27)).subscribe(()=>{this.onInterrupt.emit(new ze$4(this,{}));});},this.detachFn=()=>{this.eventSubscription?.unsubscribe(),this.eventSubscription=void 0;};}};i6=new K$17(()=>!1);dm();VN();BC$1=(()=>{class t$21{constructor(){this.activeRequestCountValue$=new tt$3(0),this.networkActive$=this.activeRequestCountValue$.asObservable().pipe(q$20(e$19=>e$19>0),zt$2());}requestStarted(){this.activeRequestCountValue$.next(this.activeRequestCountValue$.value+1);}requestCompleted(){this.activeRequestCountValue$.next(this.activeRequestCountValue$.value-1);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();o6=(()=>{class t$21{constructor(){this.networkState=C$23(BC$1),this.http=C$23(ve$7),this.connection=C$23(R$15),this.localStorage=s$23(),this.logger=f$30.byNamespace(`fe-platform`),this.preloadedVersionsLsKey=`preloaded-asset-versions`,this.loadedAssets=new Set(),this.idle=xi$2({sharedTabId:`assetPreload`}),this.userIdle$=Hi$2(this.idle.onIdleStart.pipe(q$20(()=>!0)),this.idle.onIdleEnd.pipe(q$20(()=>!1))),this.userIdleAndOnline$=$i([this.userIdle$,this.connection.isConnected]).pipe(q$20(([e$19,r$34])=>e$19&&r$34),zt$2());}preloadCurrentVersion(e$19){return I$24(this,null,function*(){if(this.getPreloadedVersions().includes(e$18)){this.logger.info(`Assets already preloaded for version ${e$18} before the lock was created`),er$2(`asset_preload_skipped`,{version:e$18,reason:`Already preloaded on boot`});return;}let r$34={idleSeconds:10,maxErrorsBeforeAbort:5,exponentialBackoffMultiplier:1e3},o$32=this.createScriptLoadObserver();try{yield this.preloadVersion(e$18,yield this.getAssetsToPreload(),{...r$34,...e$19});}finally{o$32.disconnect();}});}preloadNewVersion(){return I$24(this,null,function*(){});}preloadVersion(e$19,r$34,o$32){return I$24(this,null,function*(){let s$25=Date.now();er$2(`asset_preload_started`,{version:e$19,currentVersion:e$19===e$18}),this.startIdleWatcher(o$32.idleSeconds);try{yield navigator.locks.request(`asset-preload`,()=>I$24(this,null,function*(){if(this.getPreloadedVersions().includes(e$19)){this.logger.info(`Assets already preloaded for version ${e$19} after the lock was created`),er$2(`asset_preload_skipped`,{version:e$19,reason:`Another tab preloaded the version`});return;}let n$46=new M$22(),a$30=this.userIdleAndOnline$.pipe(le$5(c$37=>{let m$32=r$34.filter(l$26=>!this.loadedAssets.has(l$26));if(c$37){this.logger.info(`User is idle, starting preload of ${m$32.length} assets`),er$2(`asset_preload_idle_started`,{version:e$19,assetsNotYetLoaded:m$32.length});let l$26=0;return j$23(m$32).pipe(Z$12(g$19=>I$24(this,null,function*(){this.loadedAssets.add(g$19);try{yield fetch(g$19,{priority:`low`});}catch(f$33){if(l$26++,fA(f$33,{feature:`asset-preload`}),l$26>=o$32.maxErrorsBeforeAbort)throw new Error(`${l$26} / ${o$32.maxErrorsBeforeAbort} maximum script preload errors reached`);yield Li$1(Q$17(Math.pow(2,l$26-1)*o$32.exponentialBackoffMultiplier));}}),1),Is$1({complete:()=>{n$46.next();}}));}return this.logger.info(`User is busy, pausing preload of assets`),er$2(`asset_preload_idle_ended`,{version:e$19,assetsNotYetLoaded:m$32.length}),z$18;}),gs(n$46)).subscribe({error:c$37=>{n$46.error(c$37),a$30.unsubscribe();},complete:()=>{this.logger.info(`All assets preloaded!`),er$2(`asset_preload_completed`,{version:e$19,durationMs:Date.now()-s$25}),this.markVersionAsPreloaded(e$19);}});return Li$1(n$46);}));}catch(n$46){fA(n$46,{feature:`asset-preload`}),er$2(`asset_preload_errored`);}finally{this.idle.stop();}});}getAssetsToPreload(){return I$24(this,null,function*(){let e$19=document.querySelector(`base`).href;return Object.values(JSON.parse(document.querySelector(`script[type=importmap]`).innerText).imports).map(r$34=>new URL(r$34,e$19).href);});}getPreloadedVersions(){return this.localStorage.get(this.preloadedVersionsLsKey)??[];}createScriptLoadObserver(){let e$19=new PerformanceObserver(r$34=>{r$34.getEntries().forEach(o$32=>{o$32.initiatorType===`script`&&this.loadedAssets.add(o$32.name);});});return e$19.observe({type:`resource`,buffered:!0}),e$19;}startIdleWatcher(e$19){this.idle.setIdle(e$19),this.idle.setTimeout(!1),this.idle.setInterrupts([...uo$3(),new NC(this.networkState)]),this.idle.watch();}markVersionAsPreloaded(e$19){let r$34=this.getPreloadedVersions();r$34.push(e$19),r$34.length>5&&r$34.splice(0,r$34.length-5),this.localStorage.set(this.preloadedVersionsLsKey,r$34);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();dm();VN();n6=(()=>{class t$21{constructor(){this.destroyRef=C$23(at$11),this.enableSegment=jS(O$16.FePlatformSegment),this.enableSegmentProxy=jS(O$16.GrowthAnalyticsSegmentProxy);}init(){let e$19=s$23();this.enableSegment.pipe(F$22(this.destroyRef),Is$1(r$34=>{e$19.set(O$16.FePlatformSegment,r$34);})).subscribe(),this.enableSegmentProxy.pipe(F$22(this.destroyRef),Is$1(r$34=>{e$19.set(O$16.GrowthAnalyticsSegmentProxy,r$34);})).subscribe();}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();hr$3();VN();a6=(()=>{class t$21 extends Qn{getUser(){return $i([this.splitOverridesService.overrideWithUser$.pipe(Ve$4(1)),this.store.select(b$17)]).pipe(q$20(([e$19,r$34])=>e$19||r$34));}isTreatmentOn(e$19){let r$34;return b$15(e$19)?r$34=Cr$2(e$19):r$34=e$19,this.splitOverridesService.liveOverrideEnabledForFeatureFlag(r$34.name)?this.getTreatmentOnWithOverrides(r$34):this.getTreatmentOnWithOverrides(r$34).pipe(Ve$4(1),ys$1({bufferSize:1,refCount:r$34.refCount??!0}));}getTreatmentWithConfig(e$19){let r$34;return b$15(e$19)?(r$34=Cr$2(e$19),Ic(r$34)):r$34=e$19,this.splitOverridesService.liveOverrideEnabledForFeatureFlag(r$34.name)?this.getTreatmentConfigWithOverrides(r$34):this.getTreatmentConfigWithOverrides(r$34).pipe(Ve$4(1),ys$1({bufferSize:1,refCount:r$34.refCount??!0}));}getTreatment(e$19){return super.getTreatment(e$19).pipe(Z$12(r$34=>this.splitOverridesService.getOverrideValue(e$19.name).pipe(q$20(o$32=>o$32?typeof o$32.value==`object`?o$32.value.treatment:o$32.value:r$34),q$20(o$32=>o$32))));}getTreatmentConfigWithOverrides(e$19){return this.splitOverridesService.getOverrideValue(e$19.name).pipe(le$5(r$34=>r$34?.active?r$34.value===d$20.ON||r$34.value===d$20.OFF?qe$6({treatment:r$34.value}):qe$6(r$34.value):super.getTreatmentWithConfig(e$19)));}getTreatmentOnWithOverrides(e$19){return this.splitOverridesService.getOverrideValue(e$19.name).pipe(le$5(r$34=>r$34?.active?qe$6(r$34.value===d$20.ON):super.isTreatmentOn(e$19)),ys$1({bufferSize:1,refCount:e$19.refCount??!0}));}static{this.fac=(()=>{let e$19;return function(o$32){return(e$19||(e$19=ty$1(t$21)))(o$32||t$21);};})();}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();VN();dm();VN();Aw=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.destroyRef=C$23(at$11),this.rumTrackingInstrumentationViewContextService=C$23(A$15);}init(){this.listenToSidebarEntitySelection();}listenToSidebarEntitySelection(){this.store.select(Sr).pipe(oe$13(e$19=>!!e$19&&e$19.length>0),fs$1(5e3),q$20(e$19=>e$19[e$19.length-1].type),Is$1(e$19=>{this.rumTrackingInstrumentationViewContextService.addViewContext({hierarchy_type_selected:e$19});}),F$22(this.destroyRef)).subscribe();}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();ww=new _$14(`RUM_HIERARCHIES_INSTRUMENTATION_TOKEN`);VN();c6=new _$14(`RUM_TASKS_INSTRUMENTATION_TOKEN`);VN();Mw=new _$14(`RUM_TRACKER_INSTRUMENTATION_TOKEN`);VN();m6=(()=>{class t$21{static forRoot(){return{ngModule:t$21,providers:[ge$5,{provide:Mw,useFactory:t$21.initializeRumTrackingInstrumentationService,deps:[ge$5],multi:!0},Aw,{provide:ww,useFactory:t$21.initializeRumHierarchiesInstrumentationService,deps:[Aw],multi:!0}]};}static{this.initializeRumTrackingInstrumentationService=e$19=>{e$19.init();};}static{this.initializeRumHierarchiesInstrumentationService=e$19=>{e$19.init();};}constructor(){C$23(Mw,{optional:!0}),C$23(ww,{optional:!0}),C$23(c6,{optional:!0});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,wD]});}}return t$21;})();VN();dm();VN();l6=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.userStateFacade=e$19,this.userService=r$34,this.injector=o$32,this.websocketService=s$25,this.store=n$46,this.idleTimeoutService$=j$23(import(`./idle-timeout.service-73a7b41500.js`)),this.userTeams$=this.store.select(c$36);}initListeners(){this.initSessionListeners(),this.initIdleTimeoutWSListener();}initSessionListeners(){let e$19=this.userStateFacade.userId$.pipe(oe$13(()=>!!this.userService.userData?.email_validated),zt$2());e$19.pipe(oe$13(Boolean),le$5(()=>this.userService.getUserSessionSettings()),As$3(this.idleTimeoutService$)).subscribe(([r$34,{IdleTimeoutService:o$32}])=>{let s$25=this.injector.get(o$32),{idle_timeout:n$46,timeout_duration:a$30,idle_timeout_providing_team:c$37,timeout_duration_providing_team:m$32}=r$34,l$26=``;c$37&&this.userTeams$.pipe(q$20(f$33=>f$33.find(h$15=>h$15.id===c$37)),R$20(),q$20(f$33=>f$33.name)).subscribe(f$33=>{l$26=f$33;}),n$46&&s$25.initIdleTimer(this.injector,parseInt(n$46,10)/1e3,l$26);let g$19=``;m$32&&this.userTeams$.pipe(q$20(f$33=>f$33.find(h$15=>h$15.id===m$32)),R$20(),q$20(f$33=>f$33.name)).subscribe(f$33=>{g$19=f$33;}),a$30&&s$25.initSessionWarningTimer(this.injector,g$19);}),e$19.pipe(oe$13(r$34=>!r$34),le$5(()=>this.idleTimeoutService$)).subscribe(({IdleTimeoutService:r$34})=>{this.injector.get(r$34).clearTimersAndHandlers();});}initIdleTimeoutWSListener(){this.websocketService.onChange.pipe(oe$13(({type:e$19})=>e$19===`sessionIdleTimeoutChange`)).pipe(le$5(()=>this.userService.getUserSessionSettings()),q$20(({idle_timeout:e$19,idle_timeout_providing_team:r$34})=>[e$19,r$34]),R$20(),As$3(this.idleTimeoutService$)).subscribe(([[e$19,r$34],{IdleTimeoutService:o$32}])=>{let s$25=this.injector.get(o$32),n$46=``;r$34&&this.userTeams$.pipe(q$20(a$30=>a$30.find(c$37=>c$37.id===r$34)),R$20(),q$20(a$30=>a$30.name)).subscribe(a$30=>{n$46=a$30;}),s$25.initIdleTimer(this.injector,parseInt(e$19??`0`,10),n$46);});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(U$15),ge$10(nr$1),ge$10(oe$12),ge$10(Pc),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();dm();U$18();VN();p6=(()=>{class t$21{constructor(){this.route=C$23(z$14),this.destroyRef=C$23(at$11),this.locationProvider=C$23(wr$1),this.isChatActiveMemo=!1;}init(){this.locationProvider.isChatActive$.pipe(Is$1(e$19=>this.isChatActiveMemo=e$19),F$22(this.destroyRef)).subscribe();}isChatActive(){return this.isChatActiveMemo;}isChatActiveObservable(){return this.locationProvider.isChatActive$.pipe(ws$2(!1));}createChatViewUrlFromMemberSource(e$19,r$34,o$32,s$25){if(!this.isMemberSourceChatView(e$19,r$34))return null;let n$46=o$26(this.route.snapshot);if(!(`chatId`in n$46))return null;let a$30=sz(n$46.chatId,o$32.id,e$19.id);return s$25?a$30:`${nt$4()}${a$30}`;}isMemberSourceChatView(e$19,r$34){return`id`in e$19&&r$34===`view`&&e$19.viewType!==o$31.Doc&&this.isChatActiveMemo;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();VN();u6=(()=>{class t$21{constructor(){this.publicAgentsService=C$23(I$9);}transform(e$19,r$34){let o$32=this.publicAgentsService.getAgentUserById(e$19.id);return g$14({...e$19,...(o$32||{})},r$34);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();VN();f6=(()=>{class t$21{constructor(){this.publicAgentsService=C$23(I$9);}transform(e$19){return e$19.length?e$19.map(o$32=>{let s$25=this.publicAgentsService.getAgentUserById(o$32.id);return{...o$32,...(s$25||{})};}).map(o$32=>({...g$14(o$32),guest:!1,id:o$32.id,online:!1})):[];}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();dm();The=Le$9(`[Error] ngrx effects error caught`,qe$5());VN();v6=(()=>{class t$21 extends P$14{addEventListener(e$19,r$34,o$32){return r$34.endsWith(`out-zone`)?(r$34=r$34.split(`.`)[0],this.getZone().runOutsideAngular(()=>super.addEventListener(e$19,r$34,o$32))):super.addEventListener(e$19,r$34,o$32);}static{this.fac=(()=>{let e$19;return function(o$32){return(e$19||(e$19=ty$1(t$21)))(o$32||t$21);};})();}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();VN();S6=Ue$6(de$10,we$1(l$24.WhiteLabeling),(t$21,i$27)=>!!t$21?.branding&&typeof i$27<`u`);dm();hr$3();VN();b6=`whitelabelRefreshTokenMeta`,C6=(()=>{class t$21{constructor(){this.appEnvironment=C$23(Ud),this.httpClient=C$23(ve$7),this.window=C$23(f$23),this.store=C$23(q$19),this.splitService=C$23(Qn),this.authTokenService=C$23(Rc$1);}initialize(){let e$19=this.window.nativeWindow.location.href,r$34=this.appEnvironment.whitelabel?.domain,o$32=this.appEnvironment.whitelabel?.nonWhitelabelledAppOrigins,s$25=o$32&&r$34,n$46=o$32?.includes(this.window.origin),a$30=this.appEnvironment.appUrl===this.window.origin;if(!s$25||n$46&&!a$30)return z$18;let c$37=new URL(this.appEnvironment.appUrl).host,m$32=new URL(this.window.origin).host;if(!this.authTokenService.refreshTokenExists()){let h$15=new URL(e$19).searchParams.get(b6);if(h$15)try{this.authTokenService.storeRefreshTokenMetaInLocalStorage(JSON.parse(h$15));}catch(I$25){fA(new Error(`Failed to parse refresh token meta`,{cause:I$25}),{feature:`platform`});}}return Hi$2(this.splitService.isTreatmentOn({name:O$16.FePlatformWhitelabelRedirectPostLogin}).pipe(oe$13(f$33=>f$33),le$5(()=>this.store.select(S6)),oe$13(f$33=>f$33),Ve$4(1),As$3(this.store.select(s$10)),q$20(([,f$33])=>f$33?.endsWith(`.${r$34}`)?f$33:c$37),oe$13(f$33=>f$33!==m$32),As$3(this.store.select(o$30)),q$20(([f$33,h$15])=>({newHost:f$33,teamId:h$15,includeRefreshTokenMeta:!0}))),(a$30?qe$6(!0):this.isValidWhiteLabelledAppOrigin(this.window.origin)).pipe(oe$13(f$33=>!f$33),q$20(()=>({newHost:c$37})))).pipe(Ve$4(1),Is$1(({newHost:f$33,teamId:h$15,includeRefreshTokenMeta:I$25})=>{this.redirectDomains(e$19,f$33,h$15,I$25);}));}isValidWhiteLabelledAppOrigin(e$19){let r$34=new URL(e$19);return this.httpClient.get(`${this.appEnvironment.apiUrlWorkspaceV3Service}/core/whitelabel`,{params:{hostname:r$34.host}}).pipe(q$20(()=>!0),Xo$2(o$32=>o$32 instanceof M$21&&typeof o$32.error==`object`&&o$32.error&&`ECODE`in o$32.error&&typeof o$32.error.ECODE==`string`?qe$6(o$32.error.ECODE!==`WHITE_LABEL_002`):qe$6(!0)));}redirectDomains(e$19,r$34,o$32,s$25){if(n$45())return;let n$46=new URL(e$19);n$46.host=r$34,n$46.pathname===`/`&&o$32&&(n$46.pathname=`/${o$32}/`);let a$30=s$25&&this.authTokenService.areTokensStoredInCookies()&&this.authTokenService.refreshTokenExists()?JSON.stringify(this.authTokenService.getRefreshTokenMetadata()):void 0;a$30&&n$46.searchParams.set(b6,a$30),this.window.nativeWindow.location.href=n$46.toString();}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();Ehe=t$21=>$i([t$21.select(me$8),t$21.select(b$17)]).pipe(q$20(([i$27,e$19])=>C$12(e$19,i$27)),zt$2()),k6={provide:r$29,deps:[q$19],useFactory:Ehe};VN();dm();hr$3();Ee$4();VN();A6=(()=>{class t$21{constructor(){this.service=C$23(f$2),this.apiCallCount=0;}intercept(e$19,r$34){let o$32=this.service.config;if(!o$32.enabled)return r$34.handle(e$19);if(this.matchesFilter(o$32.urlFilter,e$19.url)&&this.shouldSimulateFailure(o$32)){let s$25=o$32.failureStatusCode!==`NONE`;return(o$32.failureDelay>450||!s$25)&&T6(e$19.url,o$32.failureDelay),he$6(o$32.failureDelay).pipe(Is$1(()=>{s$25&&I6(e$19.url);}),le$5(()=>s$25?at$12(()=>this.getError(o$32.failureStatusCode)):r$34.handle(e$19)));}return r$34.handle(e$19);}shouldSimulateFailure(e$19){this.apiCallCount++;let r$34=this.apiCallCount%e$19.failureInterval===0;return r$34&&(this.apiCallCount=0),r$34;}matchesFilter(e$19,r$34){return e$19?r$34.includes(e$19):!0;}getError(e$19){return new M$21({error:{message:`Simulated API failure`,code:`SIMULATED_FAILURE`},status:e$19,statusText:this.getStatusText(e$19)});}getStatusText(e$19){return n$2[e$19]||`Unknown Error`;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();VN();VC$1=new _$14(`PrefetchedRequestCache`);VN();VN();UC$1=(()=>{class t$21{constructor(){this.disallowedRoutesCache=new i$19(1e3);}get(e$19){return this.disallowedRoutesCache.get(e$19);}set(e$19,r$34){this.disallowedRoutesCache.set(e$19,r$34);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();WC=(()=>{class t$21 extends CU{constructor(){super(...arguments),this.windowDocument=C$23(Tm),this.jwtInterceptorCache=C$23(UC$1);}isDisallowedRoute(e$19){let o$32=new URL(e$19.url,this.windowDocument.location.origin).toString(),s$25=this.jwtInterceptorCache.get(o$32);if(s$25!==void 0)return s$25;let n$46=super.isDisallowedRoute(e$19);return this.jwtInterceptorCache.set(o$32,n$46),n$46;}static{this.fac=(()=>{let e$19;return function(o$32){return(e$19||(e$19=ty$1(t$21)))(o$32||t$21);};})();}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();F6=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[{provide:vd,useFactory:Ahe,deps:[Rc$1]},UC$1,{provide:we$2,useClass:WC,multi:!0},Oc],imports:[gi$1]});}}return t$21;})();VN();hr$3();Rw=[{provide:Xe$2,useValue:{customStrategies:{instant:{name:`instant`,work:t$21=>t$21.detectChanges(),behavior:({work:t$21})=>i$27=>i$27.pipe(Is$1(()=>t$21()))}}}}];dm();VN();O6=(()=>{class t$21 extends Gt$1{constructor(){super(...arguments),this.titleChange$=new M$22();}init(){this.titleChange$.next(this.getTitle());}setTitle(e$19){super.setTitle(e$19),this.titleChange$.next(e$19);}getTitleChanges(){return this.titleChange$.asObservable();}static{this.fac=(()=>{let e$19;return function(o$32){return(e$19||(e$19=ty$1(t$21)))(o$32||t$21);};})();}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();hr$3();VN();P6=`x-datadog-trace-id`,$6=(()=>{class t$21{intercept(e$19,r$34){let o$32=performance.now();return fn.addBeginEvent(`HTTP`,Me$1.network.name,{url:e$19.urlWithParams}),r$34.handle(e$19).pipe(Is$1({next:s$25=>{if(s$25 instanceof x$23){let n$46=performance.now()-o$32,a$30=s$25.headers.get(P6)??``;fn.addEndEvent(`HTTP`,Me$1.network.name,{url:e$19.urlWithParams,status:s$25.status,responseTime:n$46,datadogTraceId:a$30});}},error:s$25=>{if(s$25 instanceof M$21){let n$46=s$25.headers?.get(P6)??``;fn.addEndEvent(`HTTP`,Me$1.network.name,{url:e$19.urlWithParams,status:s$25.status,error:s$25.message,datadogTraceId:n$46}),fn.addErrorEvent(`HTTP`,Me$1.network.name,{url:e$19.urlWithParams,status:s$25.status,error:s$25.message,datadogTraceId:n$46});}}}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();hr$3();VN();j6=(()=>{class t$21{constructor(){this.destroy$=new M$22(),this.router=C$23(x$22),this.routesInstrumentationService=C$23(st$7);}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}initialize(){this.initRouterEventDiagnostics(),this.initLocationEventDiagnostics();}initRouterEventDiagnostics(){this.router.events.subscribe(e$19=>{this.isNavigationEvent(e$19)?this.handleNavigationEvents(e$19):this.isRouteConfigLoadEvent(e$19)?this.handleRouteConfigLoadEvents(e$19):this.isActivationEvent(e$19)?this.handleActivationEvents(e$19):e$19 instanceof Ce$5&&fn.addInstantEvent(`Scroll`,Me$1.route.name,{anchor:e$19.anchor});});}initLocationEventDiagnostics(){this.routesInstrumentationService.getInstrumentation().pipe(oe$13(e$19=>e$19.type===`go`||e$19.type===`replaceState`),Is$1(e$19=>{fn.addEndEvent(`Navigation`,Me$1.route.name,{url:e$19.urlAfterRedirects,navigationTrigger:e$19.type});}),gs(this.destroy$)).subscribe();}isActivationEvent(e$19){return e$19 instanceof Ct$3||e$19 instanceof St$2;}isNavigationEvent(e$19){return e$19 instanceof j$18||e$19 instanceof M$20||e$19 instanceof Se$9||e$19 instanceof X$12;}isRouteConfigLoadEvent(e$19){return e$19 instanceof vt$1||e$19 instanceof mt$3||e$19 instanceof $e$2;}handleActivationEvents(e$19){e$19 instanceof St$2?fn.addBeginEvent(`Activation`,Me$1.route.name,{url:e$19.snapshot.url.join(`/`)}):e$19 instanceof Ct$3&&fn.addEndEvent(`Activation`,Me$1.route.name,{url:e$19.snapshot.url.join(`/`)});}handleRouteConfigLoadEvents(e$19){e$19 instanceof $e$2?fn.addInstantEvent(`RoutesRecognized`,Me$1.route.name,{url:e$19.url,state:e$19.state.toString()}):e$19 instanceof vt$1?fn.addBeginEvent(`RouteConfigLoad`,Me$1.route.name,{path:e$19.route.path}):e$19 instanceof mt$3&&fn.addEndEvent(`RouteConfigLoad`,Me$1.route.name,{path:e$19.route.path});}handleNavigationEvents(e$19){e$19 instanceof X$12?fn.addEvent({eventName:`Navigation`,category:Me$1.route.name,phase:ke$3.Begin,eventData:{url:e$19.url,navigationTrigger:e$19.navigationTrigger}}):e$19 instanceof M$20?fn.addEvent({eventName:`Navigation`,category:Me$1.route.name,phase:ke$3.End,eventData:{url:e$19.url}}):e$19 instanceof j$18?fn.addEndEvent(`Navigation`,Me$1.route.name,{url:e$19.url,reason:e$19.reason}):e$19 instanceof Se$9&&fn.addInstantEvent(`Navigation`,Me$1.route.name,{url:e$19.url,error:e$19.error});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();VN();L6=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19);}initialize(){this.actions$.subscribe(e$19=>{fn.addInstantEvent(e$19.type,Me$1.action.name);}),this.store.select(b$17).subscribe(e$19=>{e$19&&fn.addEvent({eventName:`User`,category:Me$1.milestone.name,eventData:{id:e$19.id,name:e$19.username,email:e$19.email}});});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Rhe={provide:we$2,useClass:$6,multi:!0};D6=[Mhe(),Rhe,Fhe()];VN();dm();HC=class{constructor(){this.instrumentationTypeToMarkerAction=new Map();}init(){this.instrumentationTypeToMarkerAction.set(`ActivationEnd`,`activation_end`),this.instrumentationTypeToMarkerAction.set(`ActivationStart`,`activation_start`),this.instrumentationTypeToMarkerAction.set(`ChildActivationEnd`,`child_activation_end`),this.instrumentationTypeToMarkerAction.set(`ChildActivationStart`,`child_activation_start`),this.instrumentationTypeToMarkerAction.set(`go`,`location_go`),this.instrumentationTypeToMarkerAction.set(`GuardsCheckEnd`,`guards_check_end`),this.instrumentationTypeToMarkerAction.set(`GuardsCheckStart`,`guards_check_start`),this.instrumentationTypeToMarkerAction.set(`NavigationCancel`,`navigation_cancel`),this.instrumentationTypeToMarkerAction.set(`NavigationEnd`,`navigation_end`),this.instrumentationTypeToMarkerAction.set(`NavigationError`,`navigation_error`),this.instrumentationTypeToMarkerAction.set(`NavigationStart`,`navigation_start`),this.instrumentationTypeToMarkerAction.set(`replaceState`,`replace_state`),this.instrumentationTypeToMarkerAction.set(`ResolveEnd`,`resolve_end`),this.instrumentationTypeToMarkerAction.set(`ResolveStart`,`resolve_start`),this.instrumentationTypeToMarkerAction.set(`RouteConfigLoadEnd`,`route_config_load_end`),this.instrumentationTypeToMarkerAction.set(`RouteConfigLoadStart`,`route_config_load_start`),this.instrumentationTypeToMarkerAction.set(`RoutesRecognized`,`routes_recognized`),this.instrumentationTypeToMarkerAction.set(`Scroll`,`scroll`);}createMarkerName(i$27){let e$19=this.instrumentationTypeToMarkerAction.get(i$27.type),r$34=this.getFeatureName(i$27);if(e$19&&r$34)return`navigation.${r$34}.${e$19}`;}findSubcategoryFeatureName(i$27){let e$19=i$27.event;if(!e$19||!(`snapshot`in e$19))return;let r$34=e$19.snapshot;if(!(!(`data`in r$34)||!B6(r$34.data)))return r$34.data.viewType??void 0;}getFeatureName(i$27){if(i$27.locationType===`Subcategory`)return this.findSubcategoryFeatureName(i$27);if(i$27.locationType===`view`&&i$27.viewType===`conversation`)return`chat`;if(i$27.locationType===`view`&&i$27.viewType)return i$27.viewType;if(i$27.locationType!==`view`)return i$27.locationType;}getActionName(i$27){return this.instrumentationTypeToMarkerAction.get(i$27);}};ia=class{getEntityId(i$27){let e$19=i$27.event;return e$19?this.findInEvent(e$19,i$27):null;}};GC=class extends ia{findInEvent(i$27,e$19){return(e$19.locationType===`chat`||e$19.viewType===`conversation`)&&`url`in i$27?f$16(i$27?.url)??null:`snapshot`in i$27&&i$27.snapshot.params.chatId?i$27.snapshot.params.chatId:null;}};zC$1=class extends ia{findInEvent(i$27,e$19){return`snapshot`in i$27?this.extractSnapshotEntityId(i$27.snapshot):null;}extractSnapshotEntityId(i$27){return i$27.params.viewId?r$27(i$27.params.viewId):i$27.data.viewType&&i$27.data.viewType===`list`&&i$27.params.locationId?r$27(i$27.params.locationId):null;}};qC$1=class extends ia{findInEvent(i$27,e$19){if(!(`snapshot`in i$27))return null;let r$34=i$27.snapshot;return!r$34.data.viewType||r$34.data.viewType!==`doc`?null:`viewId`in r$34.params?r$34.params.viewId:null;}};KC$1=class extends ia{findInEvent(i$27,e$19){return e$19.locationType===`inbox`?`inbox`:null;}};QC$1=class{constructor(){this.isInitialized=!1,this.context=this.createContext(),this.entityIdDiscoverStrategies=[];}init(){this.isInitialized||(this.entityIdDiscoverStrategies.push(new qC$1()),this.entityIdDiscoverStrategies.push(new GC()),this.entityIdDiscoverStrategies.push(new KC$1()),this.entityIdDiscoverStrategies.push(new zC$1()),this.isInitialized=!0);}createContext(){return{events:[],markers:[],entityId:null,locationType:null};}start(){return this.context=this.createContext(),this;}reset(){return this.start(),this;}addEvent(i$27){return this.context?.events.push(i$27),this;}hasEntityId(){return!!this.context?.entityId;}getEntityId(){return this.context?.entityId??null;}setEntityId(i$27){return this.context.entityId=i$27,this;}findNavMarker(i$27){return this.context.markers.find(e$19=>e$19.getName().includes(i$27));}getMarkers(){return this.context.markers;}addEntityIdToExistingMarkers(){this.context.entityId&&this.context.markers.forEach(i$27=>{i$27.addContext({entityId:this.context.entityId}),i$27.addContext({listId:this.context.entityId});});}addMarker(i$27){return this.context.markers.push(i$27),this;}findStartingNavMarker(){return this.findNavMarker(`navigation_start`)??this.findNavMarker(`activation_start`);}rememberEntityIdIfPresent(i$27){for(let e$19=0;e$19<this.entityIdDiscoverStrategies.length;e$19++){let r$34=this.entityIdDiscoverStrategies[e$19].getEntityId(i$27);if(r$34){this.setEntityId(r$34);break;}}this.hasEntityId()&&this.addEntityIdToExistingMarkers();}};VN();V6=(()=>{class t$21{constructor(){this.isInitialized=!1,this.navTimingNameHelper=new HC(),this.navigationEventContext=new QC$1(),this.syntheticMarkerService=C$23(N$12),this.destroyRef=C$23(at$11),this.routesInstrumentationService=C$23(st$7),this.navSynthetic=null;}init(){this.isInitialized||(this.navigationEventContext.init(),this.navTimingNameHelper.init(),this.routesInstrumentationService.getInstrumentation().pipe(oe$13(e$19=>this.isFeatureWeCareAbout(e$19)),F$22(this.destroyRef)).subscribe(e$19=>{this.navigationEventContext.rememberEntityIdIfPresent(e$19),this.navigationEventContext.hasEntityId()&&this.createSyntheticIfReady(e$19),this.navigationEventContext.addEvent(e$19);let r$34=this.markEvent(e$19);e$19.event&&N6(e$19.event)&&this.finishNavCycle(r$34);}),this.isInitialized=!0);}finishNavCycle(e$19){this.navSynthetic&&e$19&&(this.navSynthetic.setEndMarker(e$19),this.syntheticMarkerService.reportSynthetic(this.navSynthetic)),this.navSynthetic&&(this.syntheticMarkerService.removeSynthetic(this.navSynthetic),this.navSynthetic=null),this.navigationEventContext.reset();}createNavigationMarkerContext(e$19,r$34){let o$32={currentUrl:e$19.currentUrl,type:r$34,locationType:e$19.locationType};return e$19.urlAfterRedirects&&(o$32.urlAfterRedirects=e$19.urlAfterRedirects),this.navigationEventContext.hasEntityId()&&(o$32.listId=o$32.entityId=this.navigationEventContext.getEntityId()),o$32;}createSyntheticIfReady(e$19){if(this.navSynthetic||!this.navigationEventContext.hasEntityId())return;let r$34=this.navigationEventContext.findStartingNavMarker();if(!r$34)return;this.navSynthetic=this.syntheticMarkerService.createSyntheticMarker(`navigation.${this.navTimingNameHelper.getFeatureName(e$19)}.${this.navigationEventContext.getEntityId()}`,this.navigationEventContext.getMarkers()).setStartMarker(r$34).setTrackColor(`secondary-light`);let o$32=r$34.getName().includes(`activation_start`);this.navSynthetic.addMetadata({initialLoad:o$32}),this.navSynthetic.onDestroy(s$25=>{this.navSynthetic=null;});}isFeatureWeCareAbout(e$19){let r$34=this.navTimingNameHelper.getFeatureName(e$19);return r$34?[`list`,`chat`,`inbox`,`overview`,`doc`,`dashboard`,`dashboards`,`onboarding`].includes(r$34):!1;}markEvent(e$19){this.navSynthetic?.hasBeenDestroyed()&&(this.navSynthetic=null);let r$34=this.navTimingNameHelper.createMarkerName(e$19),o$32=this.navTimingNameHelper.getActionName(e$19.type);if(!r$34||!o$32)return null;try{let s$25=this.syntheticMarkerService.getMetricMarkerFactoryService().create(r$34,this.createNavigationMarkerContext(e$19,o$32)).setSyntheticMarkerService(this.syntheticMarkerService).mark();return this.navigationEventContext.addMarker(s$25),this.navSynthetic&&this.navSynthetic.addDependency(s$25),this.syntheticMarkerService.updateSyntheticsWithMetricMarker(s$25),s$25;}catch{}return null;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();xhe={[t$10.AssignedComments](){return I$24(this,null,function*(){let{AssignedCommentsPluginModule:t$21}=yield import(`./assigned-comments-plugin.module-0c003ce9e6.js`);return t$21;});},[t$10.AssignedToMe](){return I$24(this,null,function*(){let{AssignedToMePluginModule:t$21}=yield import(`./assigned-to-me-plugin.module-a4319f3067.js`);return t$21;});},[t$10.AssignedToUser](){return I$24(this,null,function*(){let{AssignedToUserPluginModule:t$21}=yield import(`./assigned-to-user-plugin.module-4e26e8747d.js`);return t$21;});},[t$10.Calendar](){return I$24(this,null,function*(){let{CalendarPluginModule:t$21}=yield import(`./calendar-plugin.module-f5ea223e90.js`);return t$21;});},[t$10.DocRenderer](){return I$24(this,null,function*(){let{DocRendererPluginModule:t$21}=yield import(`./doc-renderer-plugin.module-4ede443188.js`);return t$21;});},[t$10.Embed](){return I$24(this,null,function*(){let{EmbedPluginModule:t$21}=yield import(`./embed-plugin.module-0605f3aaa0.js`);return t$21;});},[t$10.HomeAgenda](){return I$24(this,null,function*(){let{HomeAgendaPluginModule:t$21}=yield import(`./home-agenda-plugin.module-f4dde38fcb.js`);return t$21;});},[t$10.HomeMyList](){return I$24(this,null,function*(){let{HomeMyListPluginModule:t$21}=yield import(`./home-my-list-plugin.module-f43cba26dc.js`);return t$21;});},[t$10.LineUp](){return I$24(this,null,function*(){let{LineupPluginModule:t$21}=yield import(`./lineup-plugin.module-eb2328249f.js`);return t$21;});},[t$10.LegacyMyWork](){return I$24(this,null,function*(){let{LegacyMyWorkPluginModule:t$21}=yield import(`./legacy-my-work-plugin.module-76bd1e6dbc.js`);return t$21;});},[t$10.MyWork](){return I$24(this,null,function*(){let{MyWorkPluginModule:t$21}=yield import(`./my-work-plugin.module-17e05ff389.js`);return t$21;});},[t$10.RecentItems](){return I$24(this,null,function*(){let{RecentItemsPluginModule:t$21}=yield import(`./recent-items-plugin.module-a1b84e9c9f.js`);return t$21;});},[t$10.RecentLocations](){return I$24(this,null,function*(){let{RecentLocationsPluginModule:t$21}=yield import(`./recent-locations-plugin.module-225dc9fd04.js`);return t$21;});},[t$10.Reminders](){return I$24(this,null,function*(){let{RemindersPluginModule:t$21}=yield import(`./reminders-plugin.module-37f3c42b05.js`);return t$21;});},[t$10.TaskActivityStream](){return I$24(this,null,function*(){let{TaskActivityStreamPluginModule:t$21}=yield import(`./task-activity-stream-plugin.module-40de6d796f.js`);return t$21;});},[t$10.TaskDetails](){return I$24(this,null,function*(){let{TaskDetailsPluginModule:t$21}=yield import(`./task-details-plugin.module-7ce63d6f95.js`);return t$21;});},[t$10.PersonalStandup](){return I$24(this,null,function*(){let{PersonalStandupPluginModule:t$21}=yield import(`./personal-standup-plugin.module-a64e78bd31.js`);return t$21;});},[t$10.Whiteboard](){return I$24(this,null,function*(){let{WhiteboardEmbedPluginModule:t$21}=yield import(`./whiteboard-embed-plugin.module-f218343a28.js`);return t$21;});},[t$10.SprintBacklog](){return I$24(this,null,function*(){let{SprintBacklogPluginModule:t$21}=yield import(`./sprint-backlog-plugin.module-d8fe263ed8.js`);return t$21;});}},U6=t$21=>I$24(null,null,function*(){return xhe[t$21]();});VN();JC$1=(()=>{class t$21{constructor(e$19){this.plugin=e$19;}registerGlobalPlugins(){for(let e$19 of a$11){let r$34=()=>I$24(null,null,function*(){return U6(e$19);});this.plugin.registerPlugin(e$19,r$34);}}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(w$3));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();W6=(()=>{class t$21{constructor(e$19){this.s=e$19,e$19.registerGlobalPlugins();}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(JC$1));};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[JC$1],imports:[gi$1,g$4]});}}return t$21;})();VN();VN();Phe=()=>[import(`./comment-attachment.component-3c6757d6e0.js`).then(t$21=>t$21.CommentAttachmentComponent)];H6=(()=>{class t$21{constructor(e$19,r$34){this.elementRef=e$19,this.dynamicComponentEvents=r$34,this.onAttachmentPreview=new He$4(),this.imageLoaded=new He$4(),this.injector=C$23(oe$12),this.destroyRef=C$23(at$11),this.attachmentHeight=`0`;}attachmentPreviewed(e$19){this.dynamicComponentEvents.attachmentPreview.emit({...e$19,element:this.elementRef.nativeElement});}onImageLoaded(){this.attachmentHeight=void 0;}ngOnChanges(e$19){if(e$19.attachment&&(this.parsedAttachment=this.attachment?JSON.parse(this.attachment):void 0),e$19.attributes){let r$34=this.getParsedAttributes(this.attributes);this.parsedAttributes=r$34,this.attachmentWidth=r$34?.attachment?.width,this.attachmentHeight=r$34?.attachment?.height||`0`,this.width=this.calcWidth();}e$19.wrapperWidth&&(this.width=this.calcWidth());}calcWidth(){let e$19=this.attachmentWidth||this.wrapperWidth;if(e$19)return e$19+`px`;}getParsedAttributes(e$19){if(e$19)try{return JSON.parse(e$19);}catch{return;}}static{this.fac=function(r$34){return new(r$34||t$21)(br(Cr$3),br(f$8));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-attachment-element`]],hostAttrs:[1,`cu-attachment-element`],hostVars:2,hostBindings:function(r$34,o$32){r$34&2&&qg(`min-height`,o$32.attachmentHeight,`px`);},inputs:{attachment:`attachment`,attributes:`attributes`,allowPreview:`allowPreview`,noMargin:`noMargin`,wrapperWidth:`wrapperWidth`,wrapperInline:`wrapperInline`,taskId:`taskId`,showImageAsNormalAttachmentView:`showImageAsNormalAttachmentView`},outputs:{onAttachmentPreview:`onAttachmentPreview`,imageLoaded:`imageLoaded`},features:[VT([f$3]),Fm],decls:4,vars:0,consts:[[`data-test`,`attachment-element__container`,1,`cu-attachment-element__container`],[3,`onAttachmentPreview`,`imageLoaded`,`attachment`,`attributes`,`taskId`,`allowPreview`,`noMargin`,`wrapperWidth`,`wrapperInline`]],template:function(r$34,o$32){r$34&1&&(Kc$3(0,`div`,0),$p(1,$he,1,7),DD(2,1,Phe),MD(),Jc$1());},dependencies:[gi$1],styles:[`:host{display:block;margin:8px 0}
`],encapsulation:2,changeDetection:0});}}return t$21;})();VN();G6=(()=>{class t$21{static forRoot(){return{ngModule:t$21,providers:[l({component:H6,selector:`cu-attachment-dynamic`})]};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({});}}return t$21;})();VN();VN();z6=(()=>{class t$21 extends yt$2{pushState(e$19,r$34,o$32,s$25){try{super.pushState(e$19,r$34,o$32,s$25);}catch(n$46){lA(`pushState error`,{feature:`unknown`,cause:n$46});}}replaceState(e$19,r$34,o$32,s$25){try{super.replaceState(e$19,r$34,o$32,s$25);}catch(n$46){lA(`replaceState error`,{feature:`unknown`,cause:n$46});}}static{this.fac=(()=>{let e$19;return function(o$32){return(e$19||(e$19=ty$1(t$21)))(o$32||t$21);};})();}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();q6=(()=>{class t$21{static forRoot(){return{ngModule:t$21,providers:[{provide:ue$10,useFactory:jhe},{provide:H$8,useFactory:Lhe,deps:[q$18,[new km(ue$10),new Om$1()],V$13]}]};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1]});}}return t$21;})();YC$1=class extends Et$3{shouldReuseRoute(i$27,e$19){if(super.shouldReuseRoute(i$27,e$19))return!0;let r$34=e$19.component;return i$27.routeConfig?.component===e$19.routeConfig?.component&&typeof r$34?.shouldReuseRoute==`function`?r$34?.shouldReuseRoute(e$19,i$27):!1;}};K6={allDocs:{getComponent:()=>I$24(null,null,function*(){let[t$21,i$27]=yield Promise.all([import(`./widget-all-docs.module-6f2424f7e8.js`),import(`./widget-all-docs.component-9dc4e06e9d.js`)]);return{module:t$21.WidgetAllDocsModule,component:i$27.WidgetAllDocsComponent};})},allDashboards:{getComponent:()=>I$24(null,null,function*(){return import(`./src-3ee0d616cb.js`).then(({widget:t$21})=>t$21);})},allForms:{getComponent:()=>I$24(null,null,function*(){return import(`./src-d7a42b7594.js`).then(({widget:t$21})=>t$21);})},allWhiteboards:{getComponent:()=>I$24(null,null,function*(){return import(`./src-4ffc03cb87.js`).then(({widget:t$21})=>t$21);})},allSheets:{getComponent:()=>I$24(null,null,function*(){return import(`./src-15bb26b303.js`).then(({widget:t$21})=>t$21);})},collections:{getComponent:()=>I$24(null,null,function*(){return import(`./src-f95fa53d02.js`).then(({widget:t$21})=>t$21);})},lineup:{getComponent:()=>I$24(null,null,function*(){return import(`./src-796df676c5.js`).then(({widget:t$21})=>t$21);})},myTasksList:{getComponent:()=>I$24(null,null,function*(){return import(`./src-f5fe2da844.js`).then(({widget:t$21})=>t$21);})},userCalendar:{getComponent:()=>I$24(null,null,function*(){return import(`./src-a47f252a3b.js`).then(({widget:t$21})=>t$21);})},gettingStarted:{getComponent:()=>I$24(null,null,function*(){return import(`./src-874b7d4136.js`).then(({widget:t$21})=>t$21);})},listView:{getComponent:()=>I$24(null,null,function*(){return import(`./src-3fc0a46827.js`).then(({widget:t$21})=>t$21);})},comments:{getComponent:()=>I$24(null,null,function*(){return import(`./src-ba0a227a60.js`).then(({widget:t$21})=>t$21);})},allClips:{getComponent:()=>I$24(null,null,function*(){return import(`./src-ca2c1f7c1f.js`).then(({widget:t$21})=>t$21);})},startFromDocTemplate:{getComponent:()=>I$24(null,null,function*(){return import(`./src-b1b844ce32.js`).then(({widget:t$21})=>t$21);})},startFromWhiteboardTemplate:{getComponent:()=>I$24(null,null,function*(){return import(`./src-547e59bcbb.js`).then(({widget:t$21})=>t$21);})},startFromFormTemplate:{getComponent:()=>I$24(null,null,function*(){return import(`./src-fdc69bc5d9.js`).then(({widget:t$21})=>t$21);})},dashboards_start_with_template:{getComponent:()=>I$24(null,null,function*(){return import(`./src-bdadfbae89.js`).then(({widget:t$21})=>t$21);})},wikiDocs:{getComponent:()=>I$24(null,null,function*(){return import(`./src-7ca4e16304.js`).then(({widget:t$21})=>t$21);})}};dm();VN();Dhe=new RegExp(/^(?:https?:\/\/)?(?:www\.)?([a-zA-Z0-9]+\.)?(zendesk\.com|help\.clickup\.com)/),Q6=(()=>{class t$21{constructor(e$19,r$34){this.zendeskSSOService=e$19,this.authToken=r$34;}canActivate(e$19){let r$34=e$19.queryParams.return_to?String(e$19.queryParams.return_to):``;return this.authToken.refreshOrJwtTokenExists()&&Dhe.test(r$34)?this.zendeskSSOService.authorizeZendesk(r$34).pipe(q$20(()=>!1)):qe$6(!0);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(z),ge$10(Rc$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();J6=(()=>{class t$21{constructor(e$19,r$34,o$32){this.bannerPopupService=e$19,this.router=r$34,this.desktopOauth=o$32;}canActivate(e$19){return this.desktopOauth.sendBrowserCallbackToDesktop(e$19.fragment??new URLSearchParams(e$19.queryParams).toString()),this.bannerPopupService.set({bannerPopup:{type:e$14.ElectronSsoAuthed}}),this.router.parseUrl(`/`);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(S$16),ge$10(x$22),ge$10(up));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Y6=(()=>{class t$21{canActivate(e$19,r$34){return window.location.href=`https://feedback.clickup.com/feature-requests/`,!1;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Fw=(()=>{class t$21{constructor(e$19,r$34){this.router=e$19,this.localStorage=r$34;}canActivate(e$19,r$34){let o$32=this.localStorage.get(t$2);if(o$32){let s$25=location.hash.split(`&`).find(n$46=>n$46.startsWith(`id_token=`));if(s$25){let n$46=s$25.split(`=`)[1],a$30=o$32.url+(o$32.url.includes(`?`)?`&`:`?`)+`ssoToken=`+n$46;this.router.navigateByUrl(a$30);}else this.router.navigateByUrl(`/`);}else this.router.navigateByUrl(`/`);return!1;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(x$22),ge$10(k$18));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();VN();Z6=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.preloader=e$19,this.store=r$34,this.router=o$32,this.userService=s$25,this.userStateFacade=n$46;}canActivate(){return this.preloader.show(),this.userService.getUser().pipe(le$5(({user:e$19})=>(this.userStateFacade.setUser(e$19),this.store.select(Ne$2))),q$20(e$19=>e$19?!0:this.router.parseUrl(`/`)),Xo$2(()=>{let e$19={id:c$33,user_data:{}};return this.userStateFacade.setUser(e$19),qe$6(!0);}));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(f$19),ge$10(q$19),ge$10(x$22),ge$10(nr$1),ge$10(U$15));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();e8=(()=>{class t$21{constructor(e$19,r$34){this.router=e$19,this.localStorage=r$34;}canActivate(e$19,r$34){let o$32=this.localStorage.get(t$2);if(o$32){let s$25=e$19.queryParams.token;if(s$25){let n$46=o$32.url+(o$32.url.includes(`?`)?`&`:`?`)+`ssoToken=`+s$25;this.router.navigateByUrl(n$46);}else this.router.navigateByUrl(`/`);}else this.router.navigateByUrl(`/`);return!1;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(x$22),ge$10(k$18));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();hr$3();VN();t8=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.store=e$19,this.helpers=r$34,this.userService=o$32,this.injector=s$25,this.authToken=n$46;}canActivate(e$19,r$34){let o$32=this.authToken.refreshOrJwtTokenExists();if(e$19.queryParams.template&&o$32)return this.store.dispatch(new p$10({autoTemplateId:e$19.queryParams.template,open:o$32})),this.store.dispatch(new r$25({path:[`/`],tag:`signup-guard-auto-template-redirect`})),!1;I({store:this.store,injector:this.injector,paramMap:e$19?.queryParamMap});let s$25=this.helpers.getCookie(`clickup-id-token`);return s$25?(this.authToken.storeJWT(s$25),this.helpers.setCookie(`clickup-id-token`,s$25,0),this.userService.getUser(!0).pipe(q$20(()=>!0),Xo$2(()=>qe$6(!0)))):!0;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(k$17),ge$10(nr$1),ge$10(oe$12),ge$10(Rc$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();hr$3();VN();dm();VN();r8=(()=>{class t$21{constructor(e$19,r$34,o$32){this.store=e$19,this.applicationEnvironmentService=r$34,this.accessRequestsTreatmentService=o$32,this.teamId$=this.applicationEnvironmentService.handshakeInitiated$.pipe(R$20(),q$20(()=>window.sessionStorage.getItem(_c$1)),R$20(),zt$2()),this.teams$=this.store.select(c$36).pipe(oe$13(s$25=>s$25?.length>0)),this.user$=this.store.select(b$17).pipe(R$20()),this.canRequestsAccessToTasksInWorkspace$=this.teamId$.pipe(le$5(s$25=>this.accessRequestsTreatmentService.canRequestsAccessToTasksInWorkspace(s$25))),this.hasTeam$=this.store.select(jc$1),this.hasValidTeam$=$i([this.user$,this.hasTeam$]).pipe(q$20(([s$25,n$46])=>n$46)),this.hasTeamAccess$=$i([this.teamId$,this.teams$,this.user$]).pipe(q$20(([s$25,n$46,a$30])=>n$46&&!!n$46.find(c$37=>c$37.id===s$25)));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Ni),ge$10(dr));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Vhe=f$30.byNamespace(`views`),xw=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37){this.clickUpRouter=e$19,this.sharedTaskService=r$34,this.store=o$32,this.sessionService=s$25,this.taskViewHasTeamAccessService=n$46,this.authToken=a$30,this.syntheticMarkerService=c$37;}canActivate(e$19,r$34){this.createSynthetic(),this.syntheticMarkerService.mark(`navigation.task_guard.start`);let o$32=e$19.params.task,s$25=e$19.params.team;return this.sharedTaskService.popUrl?!1:this.authToken.refreshOrJwtTokenExists()?$i([this.store.select(b$17).pipe(R$20()),this.taskViewHasTeamAccessService.hasTeamAccess$,this.taskViewHasTeamAccessService.canRequestsAccessToTasksInWorkspace$,this.taskViewHasTeamAccessService.hasValidTeam$]).pipe(q$20(([,n$46,a$30,c$37])=>{if(n$46||a$30)return this.syntheticMarkerService.mark(`navigation.task_guard.finish`),!0;if(!c$37)return this.syntheticMarkerService.mark(`navigation.task_guard.finish`),this.clickUpRouter.goToTeamSetup(),!1;throw Error(`No team access.`);}),Xo$2(n$46=>this.handleError(o$32,s$25,void 0,n$46))):this.handleError(o$32,s$25,!0,{context:`no JWT`});}handleError(e$19,r$34,o$32,s$25){return Vhe.log(`!!! routing check task guard`,{notAuthenticated:o$32}),this.sessionService.redirectUrl=r$34?`/t/${r$34}/${e$19}`:`/t/${e$19}`,o$32?this.clickUpRouter.goToNotAuthenticated():this.handleNavigateForNotFound(r$34,e$19,s$25),qe$6(!1);}handleNavigateForNotFound(e$19,r$34,o$32){e$19?this.clickUpRouter.showNotFound({initiator:`task guard`,errorContext:`task not found`,error:{teamId:e$19,error:o$32,taskId:r$34}}):this.clickUpRouter.goToNotFoundTeam();}createSynthetic(){this.syntheticMarkerService.onReady(()=>{try{this.syntheticMarkerService.createSyntheticMarker(`navigation.task_guard`).setDependenciesByName([`navigation.task_guard.start`,`navigation.task_guard.finish`]).setStartMarkerByName(`navigation.task_guard.start`).reportOnMarkerByName(`navigation.task_guard.finish`);}catch{}});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(qd),ge$10(ty),ge$10(q$19),ge$10(bi),ge$10(r8),ge$10(Rc$1),ge$10(N$12));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();hr$3();VN();si$2=(()=>{class t$21{constructor(e$19,r$34,o$32){this.router=e$19,this.userService=r$34,this.authToken=o$32;}canActivate(e$19,r$34){return this.authToken.refreshOrJwtTokenExists()?this.userService.getUserShareAndReplay().pipe(q$20(o$32=>{let s$25;o$32?.user?.default_team?s$25=o$32.user.default_team:this.userService.teams.length&&(s$25=this.userService.teams[0].id);let a$30=r$34.url.split(`?`)[0].split(`/`);if(s$25){let c$37=a$30.indexOf(`team`);c$37!==-1&&(a$30=[...a$30.slice(0,c$37+1),s$25,...a$30.slice(c$37+1)]);let m$32=Array.isArray(e$19.data?.customRedirectUrl)?[s$25,...e$19.data.customRedirectUrl]:[s$25,...a$30];this.router.navigate(m$32,{queryParams:e$19.queryParams},{tag:`team-redirect-guard-navigate-to-url`,path:m$32.join(`/`)});}else{let c$37=[`team-setup`,`new`];this.router.navigate(c$37,{queryParamsHandling:`preserve`},{tag:`team-redirect-guard-navigate-to-path`,path:c$37.join(`/`)});}return!1;}),Xo$2(()=>(this.router.goToLogin(),qe$6(!1)))):(this.router.goToLogin(),!1);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(qd),ge$10(nr$1),ge$10(Rc$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();hr$3();VN();o8=(()=>{class t$21{constructor(e$19,r$34,o$32){this.userService=e$19,this.store=r$34,this.authToken=o$32;}canActivate(e$19){let r$34=[`login`];return this.authToken.refreshOrJwtTokenExists()?this.userService.getUserShareAndReplay().pipe(q$20(o$32=>{let s$25=o$32?i8(o$32,this.userService.teams):null,n$46;return s$25?n$46=[s$25,`template`,e$19.params.templateType,e$19.params.templateId,e$19.params.publicKey]:n$46=[`team-setup`,`new`],this.store.dispatch(new r$25({path:n$46,tag:`template-guard-user-redirect`})),!1;}),Xo$2(()=>(this.store.dispatch(new r$25({path:r$34,tag:`template-guard-error-login`})),qe$6(!1)))):(this.store.dispatch(new E$7({shareTemplatePath:[`template`,e$19.params.templateType,e$19.params.templateId,e$19.params.publicKey]})),this.store.dispatch(new r$25({path:this.authToken.refreshOrJwtTokenExists()?r$34:[`signup`],query:e$19.queryParams,tag:`template-guard-auth-redirect`})),!1);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(nr$1),ge$10(q$19),ge$10(Rc$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();hr$3();VN();s8=(()=>{class t$21{constructor(e$19,r$34){this.router=e$19,this.userService=r$34;}canActivate(e$19,r$34){return this.userService.getUserShareAndReplay().pipe(q$20(o$32=>{let s$25;return o$32?.user?.default_team?s$25=o$32.user.default_team:this.userService.teams.length&&(s$25=this.userService.teams[0].id),s$25?this.router.navigateByUrl(`/${s$25}/settings/zoom`):this.router.navigateByUrl(`/`),!1;}));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(x$22),ge$10(nr$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Va$1=()=>I$24(null,null,function*(){return import(`./four-oh-four.component-2ba034b392.js`).then(t$21=>t$21.FourOhFourContainerComponent);}),n8=[{path:`settings/:settings-page`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);})},{path:`settings/team/:settings-page`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);})},{path:`inbox`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);})},{path:`calendar`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);}),data:{locationType:`calendar`}},{path:`meetings`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);}),data:{locationType:`meetings`}},{path:`chat`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);})},{path:`chat/welcome`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);})},{path:`chat/general`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);})},{path:`chat/r/:roomId`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);})},{path:`chat/r/:roomId/syncup`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);})},{path:`new`,canActivate:[si$2],loadComponent:Va$1},{path:`docs`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./doc-manager.routes-1ab234542b.js`).then(t$21=>t$21.routes);}),data:{isDocManager:!0,title:"Docs Home"}},{path:`dashboards`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./grid.module-a84e617b33.js`).then(t$21=>t$21.GridModule);}),data:{isGrid:!0,customRedirectUrl:[`hubs`,`dashboards`],title:"Dashboards Home"}},{path:`ai`,canActivate:[si$2,F],loadComponent:Va$1},{path:`whiteboards`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./view-item-hub-whiteboards.module-d20d3709d5.js`).then(t$21=>t$21.ViewItemHubWhiteboardsModule);}),data:{customRedirectUrl:[`hubs`,`whiteboards`],title:"Whiteboards Home"}},{path:`clips`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./view-item-hub-clips.module-bd4da1e7e1.js`).then(t$21=>t$21.ViewItemHubClipsModule);}),data:{customRedirectUrl:[`hubs`,`clips`],title:"Clips"}},{path:`home`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./home-v3.module-0114ef42d6.js`).then(t$21=>t$21.HomeV3Module);}),data:{title:"Home"}},{path:`time`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./time-hub.routes-0e1599982c.js`).then(t$21=>t$21.TimeHubRoutingModule);}),data:{title:"Time",wsProjectId:Ls$1}},{path:`forms`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./view-item-hub-forms.module-5ec6767e2c.js`).then(t$21=>t$21.ViewItemHubFormModule);}),data:{wsProjectId:Ls$1,title:"Forms"}},{path:`teams`,canActivate:[si$2],loadChildren:()=>I$24(null,null,function*(){return import(`./teams-pulse.module-7f06e013f3.js`).then(t$21=>t$21.TeamsPulseModule);}),data:{customRedirectUrl:[`teams-pulse`],title:"Teams",locationType:`teams-hub`}},{path:`template/:templateType/:templateId/:publicKey`,canActivate:[o8],loadChildren:()=>I$24(null,null,function*(){return import(`./loader.module-55c0ac1775.js`).then(t$21=>t$21.LoaderModule);})},{path:`t/:team/:task`,loadComponent:()=>I$24(null,null,function*(){return import(`./task.component-05ce8fe62b.js`).then(t$21=>t$21.TaskComponent);}),canActivate:[te,xw],data:{isTaskView:!0}},{path:`t/:task`,loadComponent:()=>I$24(null,null,function*(){return import(`./task.component-05ce8fe62b.js`).then(t$21=>t$21.TaskComponent);}),canActivate:[te,xw],data:{isTaskView:!0}},{path:`api`,loadChildren:()=>I$24(null,null,function*(){return import(`./oauth.module-f325c8438e.js`).then(t$21=>t$21.OauthModule);})},{path:`onboarding`,loadChildren:()=>I$24(null,null,function*(){return import(`./onboarding.routes-e248d67962.js`).then(t$21=>t$21.onboardingRoutes);}),canActivate:[li],data:{id:`onboarding`,title:"Onboarding | "+`ClickUp`+""}},{path:`team-setup`,canActivate:[li],loadChildren:()=>I$24(null,null,function*(){return import(`./team-setup.module-434f4bd6f0.js`).then(t$21=>t$21.TeamSetupModule);}),data:{locationType:`onboarding`}},{path:`not-found`,loadChildren:()=>I$24(null,null,function*(){return(yield import(`./not-found.module-04655398f9.js`)).NotFoundModule;}),data:{title:"Not found page"}},{path:`not-authenticated`,loadComponent:()=>I$24(null,null,function*(){return(yield import(`./not-authenticated.component-778376d10a.js`)).NotAuthenticatedComponent;}),data:{title:"Not authenticated"}},{path:`not-authorized`,loadComponent:()=>I$24(null,null,function*(){return(yield import(`./not-authorized.component-b8a8af3dec.js`)).NotAuthorizedComponent;}),data:{title:"Access denied"}},{path:`not-found-team`,loadComponent:()=>I$24(null,null,function*(){return(yield import(`./not-found-team.component-8d093a57a9.js`)).NotFoundTeamComponent;}),data:{title:"Not found team"}},{path:`no-admin-access`,loadChildren:()=>I$24(null,null,function*(){return(yield import(`./no-admin-access.module-bf0affbcd8.js`)).NoAdminAccessModule;}),data:{title:"No admin access"}},{path:`account-delete`,loadChildren:()=>I$24(null,null,function*(){return(yield import(`./delete-account-routing.module-f78393b6e6.js`)).DeleteAccountRoutingModule;}),data:{title:"Delete account"}},{path:`join-team`,loadComponent:()=>I$24(null,null,function*(){return import(`./src-4ee9adf410.js`).then(t$21=>t$21.JoinTeamComponent);}),canActivate:[li,Z6],data:{title:"Join Workspace"}},{path:`teamInvite`,redirectTo:`signup`},{path:`login`,loadChildren:()=>I$24(null,null,function*(){return import(`./login.module-3d999c521c.js`).then(t$21=>t$21.LoginModule);})},{path:`signup`,canActivate:[t8],loadChildren:()=>I$24(null,null,function*(){return import(`./src-b97b98e349.js`).then(t$21=>t$21.SignupModule);})},{path:`feature`,canActivate:[Y6],loadComponent:Va$1},{path:`sharing-help`,loadChildren:()=>I$24(null,null,function*(){return import(`./sharing-help.module-4feeb75889.js`).then(t$21=>t$21.SharingHelpModule);}),canActivate:[li],data:{title:"Sharing in ClickUp"}},{path:`google`,canActivate:[Fw],loadComponent:Va$1},{path:`googleauth`,canActivate:[Fw],loadComponent:Va$1},{path:`desktop/oauth`,canActivate:[J6],loadComponent:Va$1},{path:`saml`,canActivate:[e8],loadComponent:Va$1},{path:`app-auth`,loadChildren:()=>I$24(null,null,function*(){return import(`./src-34afb69caa.js`).then(t$21=>t$21.AppAuthModule);}),canActivate:[()=>w$25.name===`development`||w$25.name===`local`]},{path:`app-center`,loadChildren:()=>It,canActivate:[li]},{path:`:teamId/app-center`,loadChildren:()=>It,canActivate:[li]},{path:`zoom`,loadComponent:Va$1,canActivate:[s8],data:{title:"Zoom"}},{path:`integrations/intercom/install`,loadComponent:()=>I$24(null,null,function*(){return import(`./intercom-install.component-cb79b5c984.js`).then(t$21=>t$21.IntercomInstallComponent);})},{path:`integrations/intercom/redirect`,loadComponent:()=>I$24(null,null,function*(){return import(`./intercom-redirect.component-a5f554679e.js`).then(t$21=>t$21.IntercomRedirectComponent);})},{path:`zendesk/sso`,canActivate:Ks$1([Q6]),loadComponent:()=>I$24(null,null,function*(){return import(`./zendesk-sso.component-e9f5502798.js`).then(t$21=>t$21.ZendeskSSOComponent);})},{path:`performance/custom-fields`,data:{locationType:`performance`},loadComponent:()=>I$24(null,null,function*(){return import(`./all-custom-field-types-performance.component-a6c0c34747.js`).then(t$21=>t$21.AllCustomFieldTypesPerformanceComponent);})},{path:`performance/custom-fields/:fieldType`,data:{locationType:`performance`},loadComponent:()=>I$24(null,null,function*(){return import(`./custom-field-type-performance.component-df4ffe947d.js`).then(t$21=>t$21.CustomFieldTypePerformanceComponent);})},{path:`performance/custom-fields-on-view/:teamId/:viewType/:viewId`,data:{locationType:`performance`},loadComponent:()=>I$24(null,null,function*(){return import(`./view-custom-fields-performance.component-816c2392d6.js`).then(t$21=>t$21.ViewCustomFieldsPerformanceComponent);})},{matcher(t$21){return Object.keys(p$26).includes(t$21[0]?.path)?{consumed:t$21}:null;},loadComponent:()=>I$24(null,null,function*(){return import(`./whitelabel-public-sharing-wrapper.component-39ae7ff1af.js`).then(t$21=>t$21.WhitelabelPublicSharingWrapperComponent);})},{path:``,loadChildren:()=>I$24(null,null,function*(){return import(`./shell.module-ad13d8f51f.js`).then(t$21=>t$21.ClickUpAppShellModule);}),canLoad:[Q],canActivate:[li]},{path:`**`,loadComponent:Va$1}];dm();VN();n$24(`attachment_store_module`,`attachment_effects`,`load`);c8=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.action$=e$19,this.dataService=r$34,this.store=o$32,this.toastService=s$25,this.fetchAttachments$=Ke$1(()=>this.action$.pipe(Ye$2(u$25.fetchAttachments),Z$12(({ids:n$46})=>this.dataService.getAttachmentsByIds(n$46).pipe(q$20(({attachments:a$30})=>u$25.fetchAttachmentsSuccess({attachments:a$30})),Xo$2(a$30=>qe$6(new _d(a$30))))))),this.deleteAttachment$=Ke$1(()=>this.action$.pipe(Ye$2(u$25.deleteAttachment),this.concatLatestAttachment(),Q$15({run:({id:n$46},a$30)=>this.dataService.deleteAttachmentV2(n$46).pipe(Is$1(()=>{this.toastService.addToastItem({title:"Clip deleted!",isV3Toast:!0,icon:`deleteIcon`,iconClass:`danger`});}),le$5(()=>z$18),ws$2(u$25.deleteAttachmentSuccess({id:n$46}))),undoAction:(n$46,a$30,c$37)=>u$25.fetchAttachmentsSuccess({attachments:[c$37]})}))),this.updateAttachment$=Ke$1(()=>this.action$.pipe(Ye$2(u$25.updateAttachment),this.concatLatestAttachment(),Q$15({run:({id:n$46,changes:a$30},c$37)=>this.dataService.editAttachment({id:n$46,...a$30}).pipe(le$5(m$32=>qe$6(u$25.updateAttachmentSuccess({id:n$46,changes:{url:m$32.url}}))),ws$2(u$25.updateAttachmentSuccess({id:n$46,changes:a$30}))),undoAction:({id:n$46,changes:a$30},c$37,m$32)=>u$25.updateAttachmentSuccess({id:n$46,changes:a8(a$30,m$32)})})));}ngrxOnRunEffects(e$19){return n$24(`attachment_store_module`,`attachment_effects`,`run`),e$19;}concatLatestAttachment(){return e$19=>e$19.pipe(Mu(({id:r$34})=>this.store.select(X$7(r$34)).pipe(R$20())));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(M$6),ge$10(q$19),ge$10(q$14));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`attachment_store_module`,`attachment_comment_count_sync_effects`,`load`);m8=(()=>{class t$21{constructor(e$19){this.action$=e$19,this.addAttachmentComment$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.CreateCommentSuccess),oe$13(r$34=>r$34.payload.type===a$27.Attachment),q$20(r$34=>u$25.updateAttachmentCommentCount({id:r$34.payload.parent,diff:1})))),this.removeAttachmentComment$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.DeleteCommentSuccess),oe$13(r$34=>r$34.payload.type===a$27.Attachment),q$20(r$34=>u$25.updateAttachmentCommentCount({id:r$34.payload.parent,diff:-1}))));}ngrxOnRunEffects(e$19){return n$24(`attachment_store_module`,`attachment_comment_count_sync_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`attachment_store_module`,`load`);l8=(()=>{class t$21{constructor(){e$11(`attachment_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[b$5],imports:[gi$1,Je$4.forFeature([c8,m8]),rn.forFeature(K$9,Rt$1)]});}}return t$21;})();dm();hr$3();VN();u8=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19){this.action$=e$19,this.billingService=r$34,this.store=o$32,this.dataService=s$25,this.billingPlanService=n$46,this.destroyRef=a$30,this.settingSuccessMessagesService=c$37,this.segmentService=m$32,this.modalBuilderService=l$26,this.injector=g$19,this.getInvoices$=Ke$1(()=>this.action$.pipe(Ye$2(y$12),q$20(f$33=>f$33.payload),le$5(({generateLastInvoicePdf:f$33,teamId:h$15})=>this.billingService.getInvoices(h$15).pipe(le$5(I$25=>{let A$22=I$25.invoices||[],R$21=[new x$18(A$22)];return A$22.length&&f$33&&R$21.push(new N$13({teamId:h$15,dateToGet:A$22[0].date,invoiceId:A$22[0].id})),R$21;}),Xo$2(I$25=>qe$6(new u$27(I$25.err))))))),this.getInvoice$=Ke$1(()=>this.action$.pipe(Ye$2(C$14),q$20(f$33=>f$33.payload),Z$12(f$33=>{let{teamId:h$15,dateToGet:I$25,invoiceId:A$22}=f$33;return this.billingService.getInvoice(h$15,I$25).pipe(q$20(R$21=>{let{url:w$26,safeUrl:E$16}=R$21;return new B$13({url:w$26,invoiceId:A$22,safeUrl:E$16});}));}))),this.applyCode$=Ke$1(()=>this.action$.pipe(Ye$2(_$8),q$20(f$33=>f$33.payload),le$5(f$33=>{let{teamId:h$15,promoCode:I$25,productTypePromoCode:A$22}=f$33,R$21=A$22.promo??I$25;return $i([this.billingService.getPromoCode(h$15,R$21),this.store.select(Ao$2)]).pipe(le$5(([w$26,E$16])=>{let P$20=[new L$9(w$26)];return E$16||P$20.push(xt$1({state:pr$2.Resolved})),P$20;}),Xo$2(w$26=>qe$6(xt$1({state:pr$2.Resolved}),new d$14(w$26.err)).pipe(Rr(E$16=>qe$6(E$16)))));}))),this.clearInvoices$=Ke$1(()=>this.action$.pipe(Ye$2(g$15),Mu(()=>this.store.select(Ht$1)),q$20(([f$33,h$15])=>({invoices:h$15,...f$33.payload})),le$5(({generateLastInvoicePdf:f$33,teamId:h$15,invoices:I$25})=>I$25.length&&f$33?qe$6(new N$13({teamId:h$15,dateToGet:I$25[0].date,invoiceId:I$25[0].id})):z$18))),this.deletePaymentMethod$=Ke$1(()=>this.action$.pipe(Ye$2(z$11),Mu(()=>this.store.select(de$10)),Z$12(([{method:f$33,tracking:{via:h$15}},{id:I$25,payment_methods:A$22}])=>this.dataService.deletePaymentMethod(I$25,f$33.token).pipe(le$5(()=>{let R$21={payment_methods:Object.fromEntries(Object.entries(A$22??[]).filter(([w$26,E$16])=>w$26!==f$33.token))};return this.settingSuccessMessagesService.addSettingsSuccessMessage(""+f$33.cardType+" ending in "+f$33.last4+" removed"),this.segmentService.track(Bu.UpdateBillingInformation,{actionPerformed:c$7.RemovedInformation,via:h$15}),Pw(I$25,R$21,!1);}),Xo$2(R$21=>qe$6(new _d(R$21))))))),this.retryPayment$=this.createRetryEffect({actionType:Z$7,successMessage:"Your payment has been successfully processed. Thank you for your patience.",trackEvent:Bu.UpdateBillingInformation,actionPerformed:c$7.TryPaymentAgain,action:f$33=>this.dataService.fixBillingIssue(f$33),dispatchDefaultPaymentActionsChangesPayload:{billingPopupMessage:void 0}}),this.retryCardVerification$=this.createRetryEffect({actionType:$$8,successMessage:"Your payment method has been successfully verified. Thank you for your patience.",trackEvent:Bu.UpdateBillingInformation,actionPerformed:c$7.TryVerifyPaymentMethodAgain,action:f$33=>this.dataService.verifyCard(f$33),dispatchDefaultPaymentActionsChangesPayload:{billingPopupMessage:void 0}}),this.setDefaultPaymentMethod$=Ke$1(()=>this.action$.pipe(Ye$2(J$12),Mu(()=>this.store.select(de$10)),le$5(([{method:{token:f$33,cardType:h$15,last4:I$25},context:A$22},{id:R$21,plan_info:w$26}])=>this.dataService.editTeamPaymentMethod(R$21,{paymentMethodToken:f$33,settlePayment:!0}).pipe(le$5(()=>{if(!w$26)return qe$6(V$9({isPaymentMethodsLoading:!1}));let E$16={plan_info:{...w$26,default_payment_token:f$33},billingPopupMessage:void 0};return this.settingSuccessMessagesService.addSettingsSuccessMessage(""+h$15+" ending in "+I$25+" is now your default method"),this.segmentService.track(Bu.UpdateBillingInformation,{actionPerformed:c$7.DefaultPaymentMethodChanged,via:A$22===D$10.Checkout?n$10.Checkout:n$10.Billing}),Pw(R$21,E$16,!1,{context:A$22,token:f$33});}),Xo$2(E$16=>j$23([V$9({isPaymentMethodsLoading:!1}),new _d(E$16)])))))),this.routeToBilling$=Ke$1(()=>this.action$.pipe(Ye$2(R$14),Mu(()=>this.store.select(de$10)),le$5(([f$33,h$15])=>{return j$23([new r$25({path:[`/`,h$15.id,`settings`,`billing`],query:f$33.payload,tag:`billing-effects-route-to-billing`})]);}))),this.updateCheckoutPlan$=Ke$1(()=>this.action$.pipe(Ye$2(K$11),le$5(f$33=>this.billingPlanService.getBillingPlanName(f$33.name)),q$20(f$33=>new a$21({name:f$33})))),this.updateBillingTeamOnTeamUpdate$=Ke$1(()=>this.action$.pipe(Ye$2(st$9),Mu(()=>this.store.select(de$10)),q$20(([f$33,h$15])=>{return new l$20({team:{...h$15,...f$33.changes}});}))),this.setBillingTeam$=Ke$1(()=>this.action$.pipe(Ye$2(T$16),q$20(f$33=>f$33.payload),le$5(f$33=>$i([qe$6(f$33),this.store.select(M$19)])),q$20(([f$33,[h$15,I$25,A$22,R$21,w$26]])=>({team:f$33.team,dontUpdatePlansExist:f$33.dontUpdatePlansExist,plans:{[O$17.FreeForever]:f$33.team.upgradeInfo?.plans[h$15],[O$17.Unlimited]:f$33.team.upgradeInfo?.plans[I$25],[O$17.Business]:f$33.team.upgradeInfo?.plans[A$22],[O$17.BusinessPlus]:f$33.team.upgradeInfo?.plans[R$21],[O$17.Enterprise]:f$33.team.upgradeInfo?.plans[w$26]},addonPrices:f$33.team?.upgradeInfo?.addonPrices||{yearly:[],monthly:[]}})),q$20(f$33=>M$13(f$33)))),this.getInvoicesWhenBillingPageOpened$=Ke$1(()=>this.action$.pipe(Ye$2(q$10),le$5(f$33=>Ct$4([qe$6(f$33),this.store.select(de$10)])),q$20(([f$33,h$15])=>h$15.id),q$20(f$33=>new r$28({generateLastInvoicePdf:!0,teamId:f$33})))),this.triggerContactSales$=Ke$1(()=>this.action$.pipe(Ye$2(et$3),oe$13(({trigger:{trigger:f$33}})=>f$33===b$13.ContactSales),ss$2(this.store.select(b$17).pipe(Ve$4(1))),Is$1(([,f$33])=>{if(f$33){let h$15=new Date(),I$25=h$15.setHours(h$15.getHours()+1),A$22={email:f$33.email,firstName:f$33.username?.split(` `)[0]??``,lastName:f$33.username?.split(` `)[1]??``};h$14.set(`marketo-form-contact-sales`,JSON.stringify(A$22),{expires:I$25,domain:`.clickup.com`});}this.modalBuilderService.create(this.importContactSalesModalComponent()).setOptions({headerModifier:`cu-modal__header-margin-bottom-10`,modifier:`cu-modal__help-modal`,title:"Contact Sales"}).setDestroyRef(this.destroyRef).setInjector(this.injector).open();}),q$20(()=>tt$2()))),this.triggerSendPlanChangeRequest$=Ke$1(()=>this.action$.pipe(Ye$2(et$3),oe$13(({trigger:{trigger:f$33}})=>f$33===b$13.SendPlanChangeRequest),Is$1(()=>{this.modalBuilderService.create(this.importContactAccountExecSalesComponent()).setOptions({title:"Change my plan",modifier:`cu-modal__sales-assist-modal`}).setDestroyRef(this.destroyRef).setInjector(this.injector).open();}),q$20(()=>tt$2()))),this.startGetQuote$=Ke$1(()=>this.action$.pipe(Ye$2(ot$3),q$20(()=>st$8({quotaState:{isLoading:!0}})))),this.getQuote$=Ke$1(()=>this.action$.pipe(Ye$2(ot$3),le$5(({payload:f$33,teamId:h$15})=>this.billingService.getQuote(h$15,f$33).pipe(q$20(I$25=>st$8({quotaState:{data:I$25,error:null,isLoading:!1}})),Xo$2(I$25=>qe$6(st$8({quotaState:{error:I$25.err,isLoading:!1}}),new _d(I$25)))))));}createRetryEffect({actionType:e$19,successMessage:r$34,trackEvent:o$32,actionPerformed:s$25,action:n$46,dispatchDefaultPaymentActionsChangesPayload:a$30}){return Ke$1(()=>this.action$.pipe(Ye$2(e$19),Mu(()=>this.store.select(de$10)),oi$1(([{tracking:c$37},{id:m$32}])=>n$46(m$32).pipe(le$5(()=>(this.settingSuccessMessagesService.addSettingsSuccessMessage(r$34),this.segmentService.track(o$32,{actionPerformed:s$25,...c$37}),Pw(m$32,a$30,!1))),Xo$2(l$26=>Whe(l$26))))));}importContactSalesModalComponent(){return I$24(this,null,function*(){return import(`./contact-sales-modal.component-49459e2e70.js`).then(e$19=>e$19.ContactSalesModalComponent);});}importContactAccountExecSalesComponent(){return I$24(this,null,function*(){return import(`./contact-account-exec-sales.component-f032aa49a1.js`).then(e$19=>e$19.ContactAccountExecSalesComponent);});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(D$8),ge$10(q$19),ge$10(Ci),ge$10(x$19),ge$10(at$11),ge$10(Sl),ge$10(_b$1),ge$10($$6),ge$10(oe$12));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();f8=function(t$21){return t$21.PAY_001=`PAY_001`,t$21;}(f8||{});Hhe=1024*1024,Ghe=1024,zhe={invoicesState:`notFetched`,promoCodeResolvingState:pr$2.NotResolved,promoCodeState:`notFetched`,invoices:[],lastInvoice:null,showPromoCodeInput:!1,promoCode:null,promoCodes:{},promoCodeErrorCode:null,codeRemoved:!1,localPrice:0,team:null,freeForeverPlan:null,professionalPlan:null,businessPlan:null,businessPlusPlan:null,enterprisePlan:null,interval:`yearly`,currencySymbol:`$`,checkoutPlan:null,checkoutPlanName:null,checkoutAddonPrices:null,storage:0,totalStorage:null,downgrading:!1,overLimit:!1,useNewLimits:!1,shouldRefreshTeam:{shouldRefreshTeam:!1},isPaymentMethodsLoading:!1,quota:{data:null,error:null,isLoading:!1},billingSettingsState:{updatingTeam:{isLoading:!1},paymentMethodsRetrieved:!1,standaloneCheckoutAddonId:null}};dm();hr$3();VN();VN();g8=(()=>{class t$21 extends K$13{constructor(){super(),this.isLoading$=this.select(`isLoading`),this.set({isLoading:!1});}startLoading(){this.set({isLoading:!0});}stopLoading(){this.set({isLoading:!1});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();S8=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37){this.action$=e$19,this.store=r$34,this.dataService=o$32,this.memberApiService=s$25,this.productivityAddonLoadingStateService=n$46,this.billingService=a$30,this.billingApiService=c$37,this.updateTeam$=Ke$1(()=>this.action$.pipe(Ye$2(k$16),Mu(()=>this.store.select(o$30)),le$5(([m$32,l$26])=>$i([qe$6(m$32),qe$6(l$26),this.billingApiService.shouldUsePricingApi$.pipe(ds(g$19=>typeof g$19==`boolean`))])),le$5(([m$32,l$26,g$19])=>$i({action:qe$6(m$32),team:this.dataService.getTeamById(l$26,{include_payment_methods:!0,include_plan_info:!g$19},!0),billingPricing:g$19?this.billingService.getV2BillingPricing(l$26):qe$6({})})),le$5(({action:m$32,team:l$26,billingPricing:g$19})=>$i({action:qe$6(m$32),members:this.memberApiService.getTeamMembers(l$26.id,{includeReadOnly:!0,includeGuestAccess:!0,includeInternalGuests:!0}),team:qe$6(l$26),tier:this.store.select(x$20).pipe(ds()),billingPricing:qe$6(g$19)})),Is$1(()=>this.productivityAddonLoadingStateService.stopLoading()),Z$12(({action:m$32,members:l$26,team:g$19,tier:f$33,billingPricing:h$15})=>{let I$25={...g$19,...h$15},A$22=m$32.teamChanges?{...I$25,...m$32.teamChanges}:I$25,R$21=m$32.addUrlPlanParams?new r$25({path:[I$25.id,`settings`,`billing`],query:{upgrade:Se$7[f$33]},tag:`billing-update-team-effect`}):null,w$26=m$32.updateStoresTeam?st$9({teamId:I$25.id,changes:A$22}):null;return d$22([new D$9({team:{...I$25,members:l$26},resetState:m$32.resetState}),V$9({isPaymentMethodsLoading:!1}),w$26,new l$20({team:{...I$25},dontUpdatePlansExist:m$32.options?.dontUpdatePlansExist??m$32.resetState}),R$21,v$17()]);}),Xo$2(()=>(this.productivityAddonLoadingStateService.stopLoading(),[v$17(),V$9({isPaymentMethodsLoading:!1})]))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Ci),ge$10(J$3),ge$10(g8),ge$10(D$8),ge$10(Pt$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();b8=(()=>{class t$21{constructor(e$19,r$34){this.action$=e$19,this.billingService=r$34,this.updateAddonAutoRefill$=Ke$1(()=>this.action$.pipe(Ye$2(ct$3),Z$12(o$32=>this.billingService.updateAddonAutoRefill(o$32.teamId,o$32.addonId,{maxSpendingLimit:o$32.maxSpendingLimit,scheduleRepurchase:o$32.scheduleRepurchase}).pipe(q$20(()=>It$2({teamId:o$32.teamId,addonId:o$32.addonId,maxSpendingLimit:o$32.maxSpendingLimit,scheduleRepurchase:o$32.scheduleRepurchase})),Xo$2(s$25=>qe$6(it$4({error:s$25}))))))),this.updateAddonAutoRefillSuccess$=Ke$1(()=>this.action$.pipe(Ye$2(It$2),q$20(()=>k$16({resetState:!1,updateStoresTeam:!0,addUrlPlanParams:!1}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(D$8));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();C8=(()=>{class t$21{constructor(){this.couponModalKey=`cu.exp_billing_offer_coupon`,this.couponModalShownKey=`cu.exp_billing_offer_coupon.shown`,this.couponModalContextKey=`cu.exp_billing_offer_coupon.context`,this.action$=C$23(Le$4),this.store=C$23(q$19),this.splitService=C$23(Qn),this.segmentService=C$23(_b$1),this.modalBuilderService=C$23($$6),this.billingPlanService=C$23(x$19),this.bannerService=C$23(_$1),this.cancelFlowTrackingService=C$23(z$1),this.injector=C$23(oe$12),this.destroyRef=C$23(at$11),this.offerCouponIfDue$=Ke$1(()=>this.action$.pipe(Ye$2(Lt$1,dt$3),Mu(()=>[this.store.select(rs$1),this.store.select(ml$1),this.store.select(de$10),this.splitService.isTreatmentOn({name:B$17.ExpBillingOfferCoupon})]),oi$1(([,e$19,r$34,o$32,s$25])=>this.evaluateOfferCouponEligibility({isAdminOrOwner:e$19,isSelfServe:r$34,team:o$32,isTreatmentOn:s$25}))));}evaluateOfferCouponEligibility({isAdminOrOwner:e$19,isSelfServe:r$34,team:o$32,isTreatmentOn:s$25}){return!e$19||!r$34||!o$32?.id||!s$25?z$18:this.splitService.getTreatmentWithConfig({name:B$17.ExpBillingOfferCoupon}).pipe(Ve$4(1),Z$12(({config:n$46})=>this.handleOfferCoupon$(n$46,o$32)));}openCouponModal(e$19,r$34,o$32,s$25){this.segmentService.track(Bu.CouponModalShown,{paywall:e$19,workspaceId:o$32}),this.cancelFlowTrackingService.setCouponOfferMode(!0),this.billingPlanService.getPlanPrice(O$17.Unlimited).pipe(Ve$4(1)).subscribe(l$26=>{let g$19=Number(l$26);this.modalBuilderService.create(import(`./new-cancel-flow-modal.component-9f5fbc8733.js`).then(f$33=>f$33.NewCancelFlowModalComponent)).setInjector(this.injector).setDestroyRef(this.destroyRef).setOptions({cannotClose:!1,dialogModifier:`cu-modal__dialog_padding-0 cu-modal__dialog_centered`,headerModifier:`cu-modal__header_margin-0`,modifier:`cu-modal__new-cancel-flow`}).setProps({offerCouponMode:!0,overrideTargetTier:O$17.Unlimited,overrideTargetPpu:g$19,promoCode:s$25}).open();});let n$46=s$23(),a$30=Date.now()+1440*60*1e3,c$37=`${this.couponModalShownKey}.${o$32}`,m$32=`${this.couponModalContextKey}.${o$32}`;return n$46.set(c$37,!0),n$46.set(m$32,{delayDays:r$34,paywall:e$19,expiresAt:a$30}),z$18;}handleOfferCoupon$(e$19,r$34){try{let o$32=r$34.id,{delayDays:s$25,promo:n$46}=this.parseCouponConfig(e$19),a$30=this.getScheduledPaywall(o$32);return!a$30||!this.isPaywallDue(a$30,s$25)?z$18:$i([this.store.select(rs$1),this.store.select(ml$1),this.store.select(Do)]).pipe(Ve$4(1),le$5(([c$37,m$32,l$26])=>!o$32||l$26||this.shouldSkipCouponOffer(r$34,o$32,c$37,m$32)?z$18:this.openCouponModal(a$30.paywall,s$25,o$32,n$46)));}catch(o$32){return fA(o$32,{feature:`billing`,origin:`offerCouponIfDue$-global`}),z$18;}}getScheduledPaywall(e$19){return s$23().get(`${this.couponModalKey}.${e$19}`);}isPaywallDue(e$19,r$34){let o$32=e$19.firstTriggeredAt+r$34*24*60*60*1e3;return Date.now()>=o$32;}shouldSkipCouponOffer(e$19,r$34,o$32,s$25){let n$46=s$23(),a$30=this.bannerService.getBannerBySelectorName({banner:o$8.CouponOffer,workspaceId:r$34});if(n$46.get(a$30)===`disable`)return!0;let c$37=`${this.couponModalShownKey}.${r$34}`,m$32=`${this.couponModalContextKey}.${r$34}`,l$26=n$46.get(c$37,I$25=>I$25===`true`),f$33=n$46.get(m$32)?.expiresAt;return l$26||f$33!=null&&Date.now()>f$33?!0:e$19?.plan_tier!==O$17.FreeForever||!o$32||!s$25;}parseCouponConfig(e$19){let r$34=JSON.parse(e$19||`{}`);return{delayDays:Math.max(0,Number(r$34.delayDays??0)),promo:r$34.promo&&String(r$34.promo).trim()?String(r$34.promo).trim():void 0};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();_8=(()=>{class t$21{constructor(e$19,r$34){this.action$=e$19,this.store=r$34,this.postAddonPurchase$=Ke$1(()=>this.action$.pipe(Ye$2(nt$3),Z$12(()=>this.isTeamLoading$.pipe(oe$13(o$32=>!o$32),Ve$4(1))),Z$12(()=>this.team$.pipe(Ve$4(1))),Z$12(o$32=>[new L$9({valid:!0,promo:o$32.billing_info?.promo_code,promoCodes:s$1(o$32.billing_info?.promo_codes)}),v$20.refreshEntitlements({})]))),this.postPlanUpgrade$=Ke$1(()=>this.action$.pipe(Ye$2(at$8),Z$12(()=>this.isTeamLoading$.pipe(oe$13(o$32=>!o$32),Ve$4(1))),Z$12(()=>this.team$.pipe(Ve$4(1))),Z$12(o$32=>[new L$9({valid:!0,promo:o$32.billing_info?.promo_code,promoCodes:s$1(o$32.billing_info?.promo_codes)}),v$20.refreshEntitlements({})]))),this.isTeamLoading$=this.store.select(ft$2),this.team$=this.store.select(de$10);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`billing_store_module`,`load`);k8=(()=>{class t$21{constructor(){e$11(`billing_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(wt$4,h8),Je$4.forFeature([u8,_8,S8,b8,C8])]});}}return t$21;})();VN();dm();hr$3();VN();hr$3();VN();ZC$1=(()=>{class t$21{constructor(){this.http=C$23(ve$7),this.destroyRef=C$23(at$11),this.errorHandler=C$23(ar$2),this.applicationEnvironmentService=C$23(Ni),this.apiUrlWorkspace=void 0,this.syntheticMarkerService=null,this.applicationEnvironmentService.environment$.pipe(F$22(this.destroyRef)).subscribe(({apiUrlWorkspaceV3Service:e$19})=>{this.apiUrlWorkspace=`${e$19}/experience/bootstrap`;});}init(e$19){this.syntheticMarkerService=e$19;}getBootstrapData(e$19){let r$34=null;return this.syntheticMarkerService&&(r$34=this.createXhrTelemetryHelper(),r$34.init(this.syntheticMarkerService),r$34.start()),this.http.get(`${this.apiUrlWorkspace}/${e$19}`).pipe(Is$1(()=>r$34?.end()),Xo$2(o$32=>{throw this.errorHandler.http(),o$32;}));}createXhrTelemetryHelper(){return new Ei$1(`app_bootstrap`,`bootstrap_workspace`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();n$24(`bootstrap_store_module`,`bootstrap_effects`,`load`);T8=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.bootstrapService=C$23(ZC$1),this.loadBootstrapData$=Ke$1(()=>this.actions$.pipe(Ye$2(d$24),Z$12(e$19=>this.bootstrapService.getBootstrapData(e$19.workspaceId).pipe(q$20(r$34=>i$26({bootstrapData:r$34})),Xo$2(r$34=>qe$6(B$20({error:r$34})))))));}ngrxOnRunEffects(e$19){return n$24(`bootstrap_store_module`,`bootstrap_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`bootstrap_store_module`,`load`);I8=(()=>{class t$21{constructor(){e$11(`bootstrap_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[rn.forFeature(u$36,A$20),Je$4.forFeature([T8])]});}}return t$21;})();E8=sn({},on(m$4,(t$21,i$27)=>({...t$21,chameleonTourId:i$27.tour})),on(u$1,t$21=>({...t$21,chameleonTourId:void 0})));VN();e$11(`chameleon_tour_module`,`load`);A8=(()=>{class t$21{constructor(){e$11(`chameleon_tour_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[rn.forFeature(o$4,E8)]});}}return t$21;})();dm();VN();n$24(`clips_transcoder_store_module`,`clip_transcoder_effects`,`load`);M8=(()=>{class t$21{constructor(e$19,r$34,o$32){this.action$=e$19,this.store=r$34,this.clipsApiService=o$32,this.fetchClipTranscoderData$=Ke$1(()=>this.action$.pipe(Ye$2(o$18.fetchClipTranscoderData),Mu(()=>this.store.select(o$30)),rt$4(([{id:s$25}])=>s$25,([{id:s$25},n$46])=>this.clipsApiService.getTranscoderData(n$46,s$25).pipe(q$20(a$30=>o$18.fetchClipTranscoderDataSuccess({data:w8(s$25,a$30)})),Xo$2(a$30=>qe$6(new _d(a$30)))))));}ngrxOnRunEffects(e$19){return n$24(`clips_transcoder_store_module`,`clip_transcoder_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Ee$2));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`clips_transcoder_store_module`,`load`);R8=(()=>{class t$21{constructor(){e$11(`clips_transcoder_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[Q$4],imports:[gi$1,Je$4.forFeature([M8]),rn.forFeature(A$7,R$5)]});}}return t$21;})();dm();hr$3();VN();n$24(`comments_store_module`,`comments_effects`,`load`);O8=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37){this.action$=e$19,this.commentsService=r$34,this.store=o$32,this.dataViewService=s$25,this.dataService=n$46,this.dashboardDocService=a$30,this.splitService=c$37,this.loadComments$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.LoadCommentsStart),Z$12(m$32=>this.getComments(m$32.payload.type,m$32.payload.parent,m$32.payload,m$32.showError).pipe(le$5(({comments:l$26,last_page:g$19})=>{let f$33=[];return f$33.push(new ks({...m$32.payload,comments:l$26,last_page:g$19})),l$26.length&&m$32.payload.loadAllPages&&!g$19&&f$33.push(new js$1({...m$32.payload})),j$23(f$33);}),Xo$2(l$26=>qe$6(new Cs$1({...m$32.payload,error:l$26}))))))),this.loadMoreComments$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.LoadMoreCommentsStart),Z$12(m$32=>this.store.select(F$12(m$32.payload.key)).pipe(Ve$4(1),le$5(l$26=>l$26?.length?this.getComments(m$32.payload.type,m$32.payload.parent,{...m$32.payload,start_id:l$26[0].id,start:l$26[0].date}).pipe(le$5(({comments:g$19,last_page:f$33})=>{let h$15=[];return h$15.push(new $s$2({...m$32.payload,comments:g$19,last_page:f$33})),g$19.length&&m$32.payload.loadAllPages&&!f$33&&h$15.push(new js$1({...m$32.payload})),j$23(h$15);}),Xo$2(g$19=>qe$6(new Ps({...m$32.payload,error:g$19})))):qe$6(new Rs({key:m$32.payload.key}))))))),this.createComment$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.CreateCommentStart),Mu(()=>[this.store.select(o$30),this.store.select(f$25)]),Z$12(([m$32,l$26,g$19])=>this.commentsService.createCommentV2({...m$32.payload,comment:vs(m$32.payload?.comment?.comment),assignee:m$32.payload.assignee?m$32.payload.assignee.id:null,group_assignee:m$32.payload.group_assignee?m$32.payload.group_assignee.id:null}).pipe(As$3(this.store.select(b$17)),le$5(([f$33,h$15])=>[new Ss({key:m$32.payload.key,type:m$32.payload.type,parent:m$32.payload.parent,createCommentResult:f$33,comment:{id:String(f$33.id),date:String(f$33.date),reactions:[],comment:m$32.payload.comment.comment,user:h$15,parent:m$32.payload.parent,assignee:m$32.payload.assignee,group_assignee:m$32.payload.group_assignee,image_x:m$32.payload.image_x,image_y:m$32.payload.image_y,page:m$32.payload.page,type:m$32.payload.type,comment_number:f$33.comment_number??m$32.payload.comment_number,comment_time:m$32.payload.comment_time,emails:f$33.email&&m$32.payload.email?[{...f$33.email,full_data:m$32.payload.email}]:null,new_thread_count:m$32.payload.threaded_unresolved_count,referenced_content:m$32.payload.referenced_content,assigned_by:m$32.payload.group_assignee||m$32.payload.assignee?h$15:void 0},attachments:m$32.payload.attachments,textSelection:m$32.payload.textSelection,pendingId:m$32.payload.comment.id,taskIdFromDocOrAttach:m$32.payload.taskIdFromDocOrAttach}),new Ns$2({key:m$32.payload.key,type:m$32.payload.type,parent:m$32.payload.parent})]),Xo$2(f$33=>{let h$15=[];h$15.push(new vs$1({comment:m$32.payload.comment,parent:m$32.payload.parent,error:f$33,key:m$32.payload.key}));let I$25=L$7(m$32.payload.comment),A$22=f$33?.ECODE===`CHAT_LIMIT_200`||f$33?.ECODE===`CHAT_LIMIT_201`;return I$25!==`unknown`&&A$22&&h$15.push(n$23.checkChatLimitsEntitlement({objectType:I$25===`post`?`post`:`message`})),f$33&&f$33.ECODE===`COMM_006`&&h$15.push(st$9({teamId:l$26,changes:{attachment_comments_usage:100}})),f$33&&g$19&&h$15.push(So(m$32)),j$23(h$15);}))))),this.retryCreateCommentOnConnectionResumed$=Ke$1(()=>this.action$.pipe(Ye$2(So),Z$12(m$32=>this.store.select(f$25).pipe(oe$13(l$26=>!l$26),Ve$4(1),le$5(()=>{return[new ws({key:m$32.payload.key,parent:m$32.payload.parent,type:m$32.payload.type,commentId:m$32.payload.comment.id}),new Is(m$32.payload)];}))))),this.deleteComment$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.DeleteCommentStart),Z$12(m$32=>{let l$26=this.commentsService.deleteCommentV2(m$32.payload.commentId);return m$32.payload.isPendingComment&&(l$26=qe$6({})),l$26.pipe(ps$2(5*1e3),le$5(()=>[new ws({...m$32.payload}),new Ns$2({key:m$32.payload.key,type:m$32.payload.type,parent:m$32.payload.parent})]),Xo$2(g$19=>qe$6(new _s({error:g$19,...m$32.payload}))),gs(this.action$.pipe(Ye$2(c$26.UndoDeleteCommentStart),oe$13(g$19=>g$19.payload.commentId===m$32.payload.commentId))));}))),this.undoDeleteComment$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.UndoDeleteCommentStart),Z$12(m$32=>this.commentsService.undoCommentV2(m$32.payload.commentId).pipe(q$20(()=>new xs$1({...m$32.payload})),Xo$2(l$26=>qe$6(new As$2({error:l$26,...m$32.payload}))))))),this.updateComment$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.UpdateCommentStart),Z$12(m$32=>m$32.payload.noReq?z$18:this.commentsService.editCommentV2(m$32.payload.comment.id,m$32.payload.changes).pipe(le$5(()=>[new Os$2({...m$32.payload}),new Ns$2({key:m$32.payload.key,type:m$32.payload.type,parent:m$32.payload.parent}),new Ys$2({commentId:m$32.payload.comment.id,assignee:m$32.payload.comment.assignee,commentType:m$32.payload.comment.type})]),Xo$2(l$26=>qe$6(new Ms({error:l$26,...m$32.payload}))))))),this.loadLinks$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.LoadCommentLinksAndMentionsStart),Z$12(m$32=>Gi([this.getLinks(m$32.payload.type,m$32.payload.parent),this.getMentions(m$32.payload.type,m$32.payload.parent)]).pipe(q$20(([l$26,g$19])=>new Us$1({...m$32.payload,links:l$26,taskMentions:g$19})),Xo$2(l$26=>qe$6(new Vs$1({error:l$26,...m$32.payload}))))))),this.websocketCommentCrud$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.CreateCommentFromWebsocket,c$26.UpdateCommentFromWebsocket,c$26.DeleteCommentFromWebsocket),Mu(()=>this.splitService.isTreatmentOn({name:O$16.ChatUpdateBadgesOnComment})),oe$13(([,m$32])=>m$32),le$5(([m$32])=>this.store.select(F$12(m$32.payload.key)).pipe(Ve$4(1),oe$13(l$26=>!!l$26),q$20(()=>new Ns$2({key:m$32.payload.key,parent:m$32.payload.parent,type:m$32.payload.type})))))),this.addCommentReaction$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.AddCommentReaction),Z$12(m$32=>this.commentsService.addCommentReaction(m$32.payload.comment.id,m$32.payload.reaction))),{dispatch:!1}),this.removeCommentReaction$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.RemoveCommentReaction),Z$12(m$32=>this.commentsService.removeCommentReaction(m$32.payload.comment.id,m$32.payload.reaction))),{dispatch:!1}),this.editAttachment$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.EditCommentAttachmentStart),Z$12(m$32=>this.dataService.editAttachment(m$32.payload.attachment).pipe(q$20(l$26=>(R$7(l$26),new zs$1({attachment:l$26}))),Xo$2(l$26=>qe$6(new Gs({error:l$26}))))))),this.loadCommentsAttachments$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.LoadCommentsSuccess),Mu(()=>[this.store.select(W$14),this.store.select(jt$1)]),Z$12(([m$32,l$26,g$19])=>{let f$33=m$32.payload.comments.flatMap(A$22=>Cs(A$22.comment)).map(A$22=>A$22.id),I$25=[...new Set(f$33)].filter(A$22=>!l$26[A$22]&&!g$19.has(A$22));return I$25.length>0?qe$6(u$25.fetchAttachments({ids:I$25})):z$18;}))),this.updateAttachmentCountOnCommentDelete$=Ke$1(()=>this.action$.pipe(Ye$2(c$26.DeleteCommentSuccess),oe$13(m$32=>m$32.payload.type===a$27.Attachment),Mu(()=>this.store.select(Oe$3)),q$20(([m$32,l$26])=>{let g$19=m$32.payload.parent,f$33=l$26[g$19]||0;return _$6({attachmentCommentCountMap:{[g$19]:Math.max(0,f$33-1)}});})));}ngrxOnRunEffects(e$19){return n$24(`comments_store_module`,`comments_effects`,`run`),e$19;}getLinks(e$19,r$34){return e$19===a$27.ConversationView?this.dataViewService.getDataViewLinks(r$34).pipe(xs$2(`links`)):qe$6([]);}getMentions(e$19,r$34){return e$19===a$27.ConversationView?this.dataViewService.getDataView(r$34,{includeMentions:!0}).pipe(q$20(({view:o$32})=>o$32.mentions.mentions)):qe$6([]);}getComments(e$19,r$34,o$32,s$25){return e$19===a$27.DocViewComment?this.dashboardDocService.getDocComments(r$34,o$32):$i([this.store.select(Js$3),this.store.select(Ot),this.store.select(Vt$2),this.store.select(Fo$1)]).pipe(Ve$4(1),le$5(([n$46,a$30,c$37,m$32])=>n$46?a$30?this.commentsService.getPublicViewTaskComments(a$30,m$32.id,o$32,c$37):this.commentsService.getPublicTaskComments(m$32.id,o$32,c$37):this.commentsService.getCommentsV2(o$32,s$25)));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(X$5),ge$10(q$19),ge$10(Qt),ge$10(M$6),ge$10(z$8),ge$10(Qn));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();j8={};Yhe=sn(j8,on(vo$1,(t$21,i$27)=>Fs(t$21,i$27.key,e$19=>e$19.map(r$34=>r$34.id===i$27.comment.id?$e$1({...r$34,...i$27.comment}):r$34))));VN();dm();hr$3();VN();n$24(`comments_store_module`,`comments_with_vector_support_effects`,`load`);N8=(()=>{class t$21{constructor(){this.action$=C$23(Le$4),this.store=C$23(q$19),this.commentsService=C$23(X$5),this.dashboardDocService=C$23(z$8),this.ovmService=C$23(he$1),this.loadCommentsWithVectorSupport$=Ke$1(()=>this.action$.pipe(Ye$2(To$1),Z$12(e$19=>this.getComments(e$19.payload.type,e$19.payload.parent,e$19.payload,e$19.showError).pipe(Mu(()=>this.store.select(F$12(I$15(e$19.payload.parent,e$19.payload.type)))),le$5(([{comments:r$34,last_page:o$32},s$25])=>{let n$46=[],a$30=D8(r$34,s$25??[],this.shouldKeepLocalComment.bind(this));return n$46.push(new ks({...e$19.payload,comments:a$30,last_page:o$32})),r$34.length&&e$19.payload.loadAllPages&&!o$32&&n$46.push(new js$1({...e$19.payload})),j$23(n$46);}),Xo$2(r$34=>qe$6(new Cs$1({...e$19.payload,error:r$34})))))));}ngrxOnRunEffects(e$19){return n$24(`comments_store_module`,`comments_with_vector_support_effects`,`run`),e$19;}getComments(e$19,r$34,o$32,s$25){return e$19===a$27.DocViewComment?this.dashboardDocService.getDocComments(r$34,o$32).pipe(q$20(({comments:n$46,last_page:a$30})=>({comments:n$46,last_page:a$30??!1}))):$i([this.store.select(Js$3),this.store.select(Ot),this.store.select(Vt$2),this.store.select(Fo$1)]).pipe(Ve$4(1),le$5(([n$46,a$30,c$37,m$32])=>n$46?a$30?this.commentsService.getPublicViewTaskComments(a$30,m$32.id,o$32,c$37):this.commentsService.getPublicTaskComments(m$32.id,o$32,c$37):this.commentsService.getCommentsV2(o$32,s$25)),q$20(({comments:n$46,last_page:a$30})=>({comments:n$46,last_page:a$30??!1})));}shouldKeepLocalComment(e$19,r$34){return this.ovmService.shouldKeepLocalBecauseRemoteNotNewer(e$19,r$34,`v1 Comments`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();n$24(`comments_store_module`,`sync_comments_to_comments_v2_effects`,`load`);V8=(()=>{class t$21{constructor(){this.actions=C$23(Le$4),this.store=C$23(q$19),this.isSyncCommentsV1ToV2StoreEnabled$=jS(O$16.SyncCommentsV1ToV2Store).pipe(ws$2(!1)),this.loadCommentsSuccess$=Ke$1(()=>this.actions.pipe(Ye$2(c$26.LoadCommentsSuccess),Mu(()=>this.isSyncCommentsV1ToV2StoreEnabled$),oe$13(([,e$19])=>e$19),q$20(([{payload:e$19}])=>n$23.createBulkCommentsOptimistically({comments:B8(e$19.comments)})))),this.createCommentSuccess$=Ke$1(()=>this.actions.pipe(Ye$2(c$26.CreateCommentSuccess),Mu(({payload:e$19})=>[this.isSyncCommentsV1ToV2StoreEnabled$,this.store.select(H$4(e$19.comment.parent??``))]),oe$13(([,e$19])=>e$19),q$20(([{payload:e$19},,r$34])=>n$23.createCommentOptimistically({comment:e_(e$19.comment,r$34)})))),this.deleteCommentSuccess$=Ke$1(()=>this.actions.pipe(Ye$2(c$26.DeleteCommentSuccess),Mu(()=>this.isSyncCommentsV1ToV2StoreEnabled$),oe$13(([,e$19])=>e$19),q$20(([{payload:e$19}])=>e$19),Mu(({commentId:e$19})=>this.store.select(gt(e$19))),q$20(([{commentId:e$19},r$34])=>Lw(e$19,r$34)))),this.deleteCommentFromWebsocketSuccess$=Ke$1(()=>this.actions.pipe(Ye$2(c$26.DeleteCommentFromWebsocket),Mu(()=>this.isSyncCommentsV1ToV2StoreEnabled$),oe$13(([,e$19])=>e$19),q$20(([{payload:e$19}])=>e$19),Mu(({commentId:e$19})=>this.store.select(gt(e$19))),q$20(([{commentId:e$19},r$34])=>Lw(e$19,r$34))));}ngrxOnRunEffects(e$19){return n$24(`comments_store_module`,`sync_comments_to_comments_v2_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`comments_store_module`,`load`);U8=(()=>{class t$21{constructor(){e$11(`comments_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`comments`,L8),Je$4.forFeature([O8,N8,V8])]});}}return t$21;})();VN();dm();VN();W8=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.commentDraftsStateService=C$23(ul),this.createScheduledCommentSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(l$8.scheduleCommentSuccess),Is$1(e$19=>{e$19.draftId&&this.commentDraftsStateService.deleteDraftById(e$19.draftId);})),{dispatch:!1});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();dm();VN();H8=(()=>{class t$21{constructor(){this.applicationEnvironmentService=C$23(Ni),this.httpClient=C$23(ve$7),this.store=C$23(q$19),this.apiUrl$=$i([this.applicationEnvironmentService.environment$,this.store.select(o$30)]).pipe(F$22(),oe$13(([,e$19])=>!!e$19),q$20(([{apiUrlCommentService:e$19},r$34])=>`${e$19}/workspaces/${r$34}/scheduled-comments`));}createScheduledComment({parentType:e$19,parentId:r$34,data:o$32,optimisticId:s$25}){return this.apiUrl$.pipe(Ve$4(1),le$5(n$46=>this.httpClient.post(`${n$46}/${e$19}/${r$34}`,o$32,{headers:{...(s$25?{"Idempotency-Key":s$25}:{})}})));}updateScheduledComment({parentType:e$19,parentId:r$34,scheduledCommentId:o$32,data:s$25}){return this.apiUrl$.pipe(Ve$4(1),le$5(n$46=>this.httpClient.patch(`${n$46}/${e$19}/${r$34}/${o$32}`,s$25)));}getScheduledCommentById({scheduledCommentId:e$19}){return this.apiUrl$.pipe(Ve$4(1),le$5(r$34=>this.httpClient.get(`${r$34}/${e$19}`)),Mu(()=>this.store.select(o$30)),q$20(([r$34,o$32])=>Dw(r$34,o$32)));}getScheduledComments({searchParams:e$19}){return this.apiUrl$.pipe(Ve$4(1),le$5(r$34=>this.httpClient.post(`${r$34}/search`,e$19)),Mu(()=>this.store.select(o$30)),q$20(([r$34,o$32])=>r$34.map(s$25=>Dw(s$25,o$32))));}getScheduledCommentsCount({searchParams:e$19}){return this.apiUrl$.pipe(Ve$4(1),le$5(r$34=>this.httpClient.post(`${r$34}/search/count`,e$19)));}deleteScheduledComment({scheduledCommentId:e$19}){return this.apiUrl$.pipe(Ve$4(1),le$5(r$34=>this.httpClient.delete(`${r$34}/${e$19}`)));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();G8=2e3,Zhe=1e4,ege=`COMMENT_SCHEDULED_205`,z8=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.browserStatusService=C$23(b$12),this.chatRouterService=C$23(Kt),this.commentsScheduledService=C$23(H8),this.commentsV3Service=C$23(te$8),this.simpleToastService=C$23(X$3),this.store=C$23(q$19),this.toastService=C$23(q$14),this.websocketService=C$23(Pc),this.chatLocationProviderService=C$23(wr$1),this.createScheduledComment$=Ke$1(()=>this.actions$.pipe(Ye$2(l$8.scheduleComment),Mu(()=>this.store.select(o$30)),Z$12(([e$19,r$34])=>this.createScheduledComment(e$19,r$34)))),this.updateScheduledComment$=Ke$1(()=>this.actions$.pipe(Ye$2(l$8.updateScheduledComment),Z$12(e$19=>this.updateScheduledCommentOptimistically(e$19)))),this.getScheduledCommentById$=Ke$1(()=>this.actions$.pipe(Ye$2(l$8.getScheduledCommentById),Z$12(e$19=>this.getScheduledCommentById(e$19)))),this.getScheduledComments$=Ke$1(()=>this.actions$.pipe(Ye$2(l$8.getScheduledComments),oi$1(e$19=>this.getScheduledComments(e$19)))),this.deleteScheduledComment$=Ke$1(()=>this.actions$.pipe(Ye$2(l$8.deleteScheduledComment),Qs$4(e$19=>e$19.scheduledCommentId),Z$12(e$19=>e$19.pipe(Os$3(G8),Rr(r$34=>this.deleteScheduledCommentOptimistically(r$34)))))),this.sendScheduledComment$=Ke$1(()=>this.actions$.pipe(Ye$2(l$8.sendScheduledComment),Qs$4(({scheduledCommentId:e$19})=>e$19),Z$12(e$19=>e$19.pipe(Os$3(G8),Mu(({scheduledCommentId:r$34})=>this.store.select(ue$1(r$34))),oe$13(([r$34,o$32])=>!!o$32),Z$12(([r$34,o$32])=>this.sendScheduledComment(o$32)))))),this.refreshScheduledComments$=Ke$1(()=>{let e$19=new Fe$5(),o$32=this.browserStatusService.createStatusDetector().addDetectorStrategy(e$19).getStatus(),n$46=Hi$2(o$32,this.websocketService.onConnected()).pipe(oe$13(Boolean),Ve$4(1)),a$30=this.chatLocationProviderService.isChatActive$;return n$46.pipe(le$5(()=>o$32)).pipe(le$5(()=>a$30.pipe(oe$13(Boolean),Ve$4(1)))).pipe(oe$13(l$26=>l$26),Os$3(Zhe),q$20(()=>l$8.getScheduledComments({})));});}createScheduledComment(e$19,r$34){return this.commentsScheduledService.createScheduledComment({parentType:Ge$1(e$19.parentType),parentId:e$19.parentId,data:e$19.data,optimisticId:e$19.optimisticId}).pipe(q$20(o$32=>l$8.scheduleCommentSuccess({data:e$19.data,draftId:e$19.draftId,parentId:e$19.parentId,parentType:e$19.parentType,scheduledCommentId:o$32.comment_scheduled_id.toString(),workspaceId:r$34})),Xo$2(o$32=>(o$32?.error?.ECODE===ege?ge(this.toastService):ye$1(this.simpleToastService),qe$6(l$8.scheduleCommentFailure({optimisticId:e$19.optimisticId})))));}updateScheduledCommentOptimistically(e$19){return this.commentsScheduledService.updateScheduledComment({parentType:Ge$1(e$19.parentType),parentId:e$19.parentId,scheduledCommentId:e$19.scheduledCommentId,data:e$19.data}).pipe(q$20(()=>l$8.updateScheduledCommentSuccess({scheduledCommentId:e$19.scheduledCommentId})),ws$2(l$8.updateScheduledCommentOptimistically(e$19)),Xo$2(()=>(Fe(this.simpleToastService),qe$6(l$8.updateScheduledCommentFailure(e$19)))));}getScheduledCommentById(e$19){return this.commentsScheduledService.getScheduledCommentById(e$19).pipe(q$20(r$34=>l$8.getScheduledCommentByIdSuccess({scheduledComment:r$34})),Xo$2(()=>(ve$1(this.simpleToastService),z$18)));}getScheduledComments(e$19){return this.commentsScheduledService.getScheduledComments(e$19).pipe(q$20(r$34=>l$8.getScheduledCommentsSuccess({scheduledComments:r$34})),Xo$2(()=>(xe(this.simpleToastService),qe$6(l$8.getScheduledCommentsFailure()))));}deleteScheduledCommentOptimistically(e$19){return this.commentsScheduledService.deleteScheduledComment(e$19).pipe(q$20(()=>(Ce$1(this.simpleToastService),l$8.deleteScheduledCommentSuccess(e$19))),ws$2(l$8.deleteScheduledCommentOptimistically(e$19)),Xo$2(()=>(Ie$1(this.simpleToastService),qe$6(l$8.deleteScheduledCommentFailure(e$19)))));}sendScheduledComment(e$19){return e$19?this.commentsV3Service.createComment({parentType:Ge$1(e$19.entityType),parentId:e$19.entityId,data:{...e$19.createCommentDto,comment_scheduled_id:Number(e$19.id)}}).pipe(le$5(()=>(Se$1(this.simpleToastService,()=>this.goToRoomOrThread(e$19)),j$23([l$8.deleteScheduledCommentSuccess({scheduledCommentId:e$19.id}),l$8.sendScheduledCommentSuccess()]))),ws$2(l$8.deleteScheduledCommentOptimistically({scheduledCommentId:e$19.id})),Xo$2(()=>(Te(this.simpleToastService),j$23([l$8.deleteScheduledCommentFailure({scheduledCommentId:e$19.id})])))):(Te(this.simpleToastService),qe$6(l$8.sendScheduledCommentFailure()));}goToRoomOrThread(e$19){let r$34=e$19.entityType===a$27.Comment,o$32=r$34?e$19.createCommentDto.roomId??e$19.entityId:e$19.entityId;r$34?this.chatRouterService.goToMessage(o$32,e$19.entityId,`message`):this.chatRouterService.goToChatRoom(e$19.entityId);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();q8=(()=>{class t$21{constructor(){this.websocketOvmService=C$23(M$4),this.websocketConfigService=C$23(E$11),this.scheduledCommentCreated$=Ke$1(()=>this.websocketOvmService.getEventsByType([t$17.ScheduledCommentCreated]).pipe(Z$12(e$19=>this.getScheduledCommentByIdEvent(e$19)))),this.scheduledCommentDeleted$=Ke$1(()=>this.websocketOvmService.getEventsByType([t$17.ScheduledCommentDeleted]).pipe(Z$12(e$19=>{let r$34=t$5(e$19);return[l$8.deleteScheduledCommentOptimistically({scheduledCommentId:r$34}),l$8.deleteScheduledCommentSuccess({scheduledCommentId:r$34})];}))),this.scheduledCommentUpdated$=Ke$1(()=>this.websocketOvmService.getEventsByType([t$17.ScheduledCommentUpdated]).pipe(Z$12(e$19=>this.getScheduledCommentByIdEvent(e$19))));}ngrxOnRunEffects(e$19){return[t$17.ScheduledCommentCreated,t$17.ScheduledCommentDeleted,t$17.ScheduledCommentUpdated].forEach(r$34=>{let o$32=this.websocketConfigService.createConfiguration(r$34).setJitter(400);this.websocketConfigService.addConfiguration(o$32);}),e$19;}getScheduledCommentByIdEvent(e$19){let r$34=t$5(e$19);return[l$8.getScheduledCommentById({scheduledCommentId:r$34})];}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();K8=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[Je$4.forFeature([W8,z8,q8]),rn.forFeature(E$4)]});}}return t$21;})();tge=(t$21,i$27)=>xr(t$21,i$27),t_=(t$21,i$27,e$19)=>Q8(t$21,e$19).filter(o$32=>!i$27[o$32.id]||!tge(o$32,i$27[o$32.id]));r_=(t$21,i$27,e$19)=>{if(!e$19)return t$21;let r$34=t$21.pagination[e$19];return r$34?(r$34.prepend=i$27,{...t$21,pagination:{...t$21.pagination,[e$19]:r$34}}):t$21;},J8=(t$21,i$27,e$19)=>e$19.some(o$32=>t$21.pagination[o$32.parent||``])?e$19.reduce((o$32,s$25)=>{let n$46=o$32.pagination[s$25.parent??``];return n$46&&(n$46.prepend=i$27),o$32;},{...t$21}):t$21;Bw={addReaction:rge,removeReaction:ige};Qc$1=t$21=>t$21.type===a$27.Comment&&typeof t$21.parent==`string`;Uw=({threaded_users:t$21,user:i$27})=>u$35([...(t$21??[]),i$27],e$19=>e$19?.id?.toString());e7=(t$21,{comment:i$27,event:e$19})=>{let o$32=Qc$1(i$27)&&i$27.send_reply_to_channel,s$25=!!e$19,n$46;if(o$32){let c$37=i$27.id+`-stub`;n$46=Ue$3.upsertMany([{...i$27,isPending:!0,comment_type_data:{...i$27.comment_type_data,stub_comment_id:c$37}},{...i$27,id:c$37,parent:i$27.root_parent_id,type:a$27.ConversationView,isPending:!0,comment_type_data:{...i$27.comment_type_data,source_comment_id:i$27.id,source_comment_parent_id:i$27.parent,stub_comment_id:c$37}}],t$21);}else n$46=Ue$3.upsertOne({...i$27,isPending:!0},t$21);let a$30=r_(n$46,!1,i$27.parent);if(Qc$1(i$27)){if(s$25)return a$30;let c$37=n$46.entities[i$27.parent];if(c$37)return Ue$3.updateOne({id:c$37.id,changes:{threaded_replies:Number(c$37.threaded_replies||0)+1,latest_comment_date:i$27.date,thread_followers:Uw({threaded_users:c$37.thread_followers,user:i$27.user}),threaded_users:Uw({threaded_users:c$37.threaded_users,user:i$27.user})}},a$30);}return n$46;};t7$1=Ue$3.getInitialState({pagination:{},lastReaction:null,pendingComments:{},pendingCommentsAnalytics:{},pendingRepliesByParent:{},commentsToRefetch:{},notFoundCommentIds:[],searchRequests:{},recentlyDeletedComments:[]}),r7=sn(t7$1,on(n$23.createCommentOptimistically,e7),on(n$23.createComment,(t$21,{comment:i$27})=>{let e$19=Qc$1(i$27)?Vw({pendingRepliesByParent:t$21.pendingRepliesByParent,parentId:i$27.parent,commentId:i$27.id,type:qe$1.CREATING}):t$21.pendingRepliesByParent;return{...t$21,pendingComments:{...t$21.pendingComments,[i$27.id]:A$12.PENDING},pendingRepliesByParent:e$19};}),on(n$23.createCommentError,(t$21,{optimisticId:i$27,analytics:e$19})=>{let r$34=t$21.entities[i$27.toString()],o$32=r$34&&Qc$1(r$34)?Xf({pendingRepliesByParent:t$21.pendingRepliesByParent,parentId:r$34.parent,commentId:r$34.id,type:qe$1.CREATING}):t$21.pendingRepliesByParent;return{...t$21,pendingComments:{...t$21.pendingComments,[i$27]:A$12.FAILED},pendingCommentsAnalytics:{...t$21.pendingCommentsAnalytics,[i$27]:e$19},pendingRepliesByParent:o$32};}),on(n$23.createCommentSuccess,(t$21,i$27)=>{let e$19=t$21.entities[i$27.optimisticId.toString()],r$34=e$19&&Qc$1(e$19)?Xf({pendingRepliesByParent:t$21.pendingRepliesByParent,parentId:e$19.parent,commentId:e$19.id,type:qe$1.CREATING}):t$21.pendingRepliesByParent;if(!i$27.sendReplyToChannel)return{...Ue$3.updateOne({id:i$27.optimisticId.toString(),changes:{...i$27.comment,id:i$27.comment.id?.toString(),pendingId:i$27.optimisticId.toString(),has_successful_fetch:!1,isPending:!1}},t$21),pendingComments:{...t$21.pendingComments,[i$27.optimisticId]:i$27.comment.id?.toString()},pendingRepliesByParent:r$34};let o$32=i$27.optimisticId.toString(),s$25=o$32+`-stub`,n$46=i$27.comment.source_comment_parent_id??t$21.entities[o$32]?.parent;return{...Ue$3.updateMany([{id:o$32,changes:{...i$27.comment,id:i$27.comment.id?.toString(),pendingId:o$32,comment_type_data:{...i$27.comment.comment_type_data,stub_comment_id:i$27.comment.stub_comment_id},isPending:!1}},{id:s$25,changes:{...i$27.comment,id:i$27.comment.stub_comment_id,pendingId:s$25,comment_type_data:{...i$27.comment.comment_type_data,source_comment_id:i$27.comment.id.toString(),source_comment_parent_id:n$46,stub_comment_id:i$27.comment.stub_comment_id?.toString()}}}],t$21),pendingComments:{...t$21.pendingComments,[i$27.optimisticId]:i$27.comment.id?.toString()},pendingRepliesByParent:r$34};}),on(n$23.createBulkCommentsOptimistically,(t$21,{comments:i$27})=>Ue$3.upsertMany(i$27,t$21)),on(n$23.updateCommentOptimistically,(t$21,{id:i$27,stub_comment_id:e$19,comment:r$34})=>e$19?{...Ue$3.updateMany([{id:i$27,changes:r$34},{id:e$19,changes:r$34}],t$21)}:Ue$3.updateOne({id:i$27,changes:r$34},t$21)),on(n$23.upsertComment,(t$21,{comment:i$27})=>({...Ue$3.upsertOne(i$27,t$21)})),on(n$23.updateCommentSuccess,(t$21,{id:i$27,stub_comment_id:e$19,comment:r$34})=>e$19?Ue$3.updateMany([{id:i$27,changes:r$34},{id:e$19,changes:r$34}],t$21):Ue$3.updateOne({id:i$27,changes:r$34},t$21)),on(n$23.updateCommentSuccess,(t$21,{id:i$27,comment:e$19})=>Ue$3.updateOne({id:i$27,changes:e$19},t$21)),on(n$23.getCommentsWithSearchParams,(t$21,i$27)=>{let e$19={...t$21.searchRequests,[Nw(i$27)]:{loading:!0,error:null,updatedAt:Date.now()}};return{...t$21,searchRequests:e$19};}),on(n$23.getCommentsWithSearchParamsSuccess,(t$21,i$27)=>{let e$19={...t$21.searchRequests,[Nw(i$27)]:{loading:!1,error:null,updatedAt:Date.now()}};return{...t$21,searchRequests:e$19};}),on(n$23.getCommentsSuccess,(t$21,{allComments:i$27,comments:e$19,pagination:r$34,shouldCheckPrepend:o$32=!0})=>{let s$25=t$21.pagination[G$10(r$34)];s$25&&r$34&&(s$25.prepend=r$34.prepend);let n$46=[...new Set([...(s$25?.ids||[]),...(i$27?.map(a$30=>a$30.id)||[]),...e$19.map(a$30=>a$30.id)])];return Ue$3.upsertMany(t_(e$19,t$21.entities,t$21.pendingRepliesByParent),{...t$21,pagination:{...t$21.pagination,[G$10(r$34)]:{...(o$32&&s$25?.start&&r$34?.start&&Number(s$25.start)<Number(r$34.start)?s$25:r$34),ids:n$46}}});}),on(n$23.getCommentSuccess,(t$21,{comments:i$27})=>{let e$19=r_(t$21,!1,i$27[0]?.parent);return Ue$3.upsertMany(t_(i$27,t$21.entities,t$21.pendingRepliesByParent),e$19);}),on(n$23.getCommentSuccessForDifferentParents,pe$3.getRecentCommentsSuccess,(t$21,{comments:i$27})=>{let e$19=J8(t$21,!1,i$27);return Ue$3.upsertMany(t_(i$27,t$21.entities,t$21.pendingRepliesByParent),e$19);}),on(n$23.deleteCommentOptimistically,(t$21,{id:i$27,event:e$19})=>{let r$34=t$21.entities[i$27],o$32=r$34?.comment_type_data,s$25=o$32?.source_comment_id,n$46=o$32?.stub_comment_id,a$30=i$27===n$46,c$37=i$27===s$25||!a$30&&n$46,l$26=!!e$19||a$30,g$19=Ue$3.removeOne(i$27,t$21);if(c$37&&n$46?g$19=Ue$3.removeOne(n$46,g$19):a$30&&s$25&&(g$19=Ue$3.updateOne({id:s$25,changes:{comment_type_data:{...o$32,source_comment_id:void 0,source_comment_parent_id:void 0,stub_comment_id:void 0}}},g$19)),!r$34||r$34.type!==a$27.Comment)return g$19;let f$33=r$34.parent;if(!f$33)return g$19;let h$15=t$21.entities[f$33];if(!h$15)return g$19;let I$25=h$15.threaded_replies;return!I$25||I$25<1||l$26?g$19:Ue$3.updateOne({id:f$33,changes:{threaded_replies:I$25-1}},g$19);}),on(n$23.addRecentlyDeletedComment,(t$21,i$27)=>{let e$19=[...t$21.recentlyDeletedComments,i$27.commentId];return{...t$21,recentlyDeletedComments:e$19};}),on(n$23.deleteBulkCommentsOptimistically,(t$21,{commentIds:i$27})=>Ue$3.removeMany(i$27,t$21)),on(n$23.addCommentReactionOptimistically,(t$21,{commentId:i$27,stubCommentId:e$19,user:r$34,reaction:o$32})=>{let s$25=n$46=>({id:n$46,changes:{reactions:[...(t$21.entities[n$46]?.reactions??[]),{user:r$34,reaction:o$32}]}});return e$19?Ue$3.updateMany([s$25(i$27),s$25(e$19)],t$21):Ue$3.updateOne(s$25(i$27),t$21);}),on(n$23.removeCommentReactionOptimistically,(t$21,{commentId:i$27,stubCommentId:e$19,userId:r$34,reaction:o$32})=>{let s$25=n$46=>({id:n$46,changes:{reactions:t$21.entities[n$46]?.reactions?.filter(a$30=>!R$3(a$30,o$32,r$34))??[]}});return e$19?Ue$3.updateMany([s$25(i$27),s$25(e$19)],t$21):Ue$3.updateOne(s$25(i$27),t$21);}),on(n$23.addReactionFromWebsocket,(t$21,{reaction:i$27})=>Bw.addReaction(t$21,i$27)),on(n$23.removeReactionFromWebsocket,(t$21,{reaction:i$27})=>Bw.removeReaction(t$21,i$27)),on(n$23.setCommentsToRefetch,(t$21,{commentIds:i$27})=>{let e$19=i$27.reduce((r$34,o$32)=>(r$34[o$32]=Date.now(),r$34),{...t$21.commentsToRefetch});return{...t$21,commentsToRefetch:e$19};}),on(n$23.storeNotFoundCommentIds,(t$21,{commentIds:i$27})=>({...t$21,notFoundCommentIds:[...new Set([...t$21.notFoundCommentIds,...i$27])]})),on(n$23.removeCommentsToRefetch,(t$21,{commentIds:i$27})=>{let e$19={...t$21.commentsToRefetch};return i$27.forEach(r$34=>{delete e$19[r$34];}),{...t$21,commentsToRefetch:e$19};}),on(n$23.clearPagination,(t$21,i$27)=>{let e$19=z$15(t$21.pagination,G$10(i$27)),r$34=z$15(t$21.searchRequests,G$10(i$27));return{...t$21,pagination:e$19,searchRequests:r$34};}),on(n$23.resetCommentsState,()=>t7$1),on(n$23.deleteComment,(t$21,{id:i$27})=>{let e$19=t$21.entities[i$27];if(!e$19)return t$21;let r$34=Qc$1(e$19)?Vw({pendingRepliesByParent:t$21.pendingRepliesByParent,parentId:e$19.parent,commentId:e$19.id,type:qe$1.DELETING}):t$21.pendingRepliesByParent;return{...Ue$3.updateOne({id:i$27,changes:{removed:!0}},t$21),pendingRepliesByParent:r$34};}),on(n$23.deleteCommentSuccess,(t$21,{commentId:i$27,parentId:e$19})=>({...Ue$3.removeOne(i$27,t$21),pendingRepliesByParent:Xf({pendingRepliesByParent:t$21.pendingRepliesByParent,parentId:e$19,commentId:i$27,type:qe$1.DELETING})})),on(n$23.deleteCommentError,(t$21,{commentId:i$27,parentId:e$19})=>({...Ue$3.updateOne({id:i$27,changes:{removed:!1}},t$21),pendingRepliesByParent:Xf({pendingRepliesByParent:t$21.pendingRepliesByParent,parentId:e$19,commentId:i$27,type:qe$1.DELETING})})),on(n$23.undoDeleteCommentStart,(t$21,{commentId:i$27})=>t$21.entities[i$27]?Ue$3.updateOne({id:i$27,changes:{removed:!1}},t$21):t$21),on(n$23.undoDeleteCommentError,(t$21,{commentId:i$27})=>t$21.entities[i$27]?Ue$3.updateOne({id:i$27,changes:{removed:!0}},t$21):t$21));Ww=`commentsV2`;VN();dm();VN();i7=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.toggleFollowThread$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.toggleFollowThread),Mu(({commentId:e$19})=>[this.store.select(w$13(e$19))]),q$20(([e$19,r$34])=>r$34?n$23.unfollowThread(e$19):n$23.followThread(e$19)))),this.followThread$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.followThread),Mu(({commentId:e$19})=>this.getCurrentUserAndFollowersInfo(e$19)),Z$12(([e$19,r$34,o$32,s$25])=>{if(!r$34)return z$18;let n$46=[n$23.updateCommentOptimistically({id:e$19.commentId,comment:{thread_followers:d$13([...o$32,r$34],n$22)}})];return s$25||n$46.push(new d$17({commentId:e$19.commentId,followers:[r$34.id]})),j$23(n$46);}))),this.unfollowThread$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.unfollowThread),Mu(({commentId:e$19})=>this.getCurrentUserAndFollowersInfo(e$19)),Z$12(([e$19,r$34,o$32,s$25])=>{if(!r$34)return z$18;let n$46=[n$23.updateCommentOptimistically({id:e$19.commentId,comment:{thread_followers:o$32.filter(a$30=>!n$22(a$30,r$34))}})];return s$25&&n$46.push(new M$17({commentId:e$19.commentId,followers:[r$34.id]})),j$23(n$46);}))),this.followThreadOptimistically$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.followThreadOptimistically),Mu(({commentId:e$19})=>[this.store.select(b$17),this.store.select(R$12(e$19))]),Z$12(([{commentId:e$19},r$34,o$32])=>r$34?o$32.some(s$25=>n$22(s$25,r$34))?z$18:j$23([n$23.updateCommentOptimistically({id:e$19,comment:{thread_followers:[...o$32,r$34]}})]):z$18)));}getCurrentUserAndFollowersInfo(e$19){return[this.store.select(b$17),this.store.select(R$12(e$19)),this.store.select(w$13(e$19))];}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();i_=(t$21,i$27)=>{let r$34=o$5(t$4(t$21));return!!r$34&&i$27.includes(r$34.object_id);};Jc$2=t$21=>t$21.find(i$27=>i$27.type===`comment-parent`&&i$27.object_type===et$6.VIEW);o_=(t$21,i$27)=>{let e$19=Hw(t$21);return typeof e$19!=`string`?!1:i$27.includes(e$19);};o7={[t$17.ChatCommentCreated]:`created`,[t$17.ChatCommentDeleted]:`deleted`,[t$17.ChatCommentEdited]:`edited`,[t$17.CommentCreated]:`created`,[t$17.CommentDeleted]:`deleted`,[t$17.CommentEdited]:`edited`},oge=Ke$1((t$21=C$23(Le$4),i$27=C$23(N$12))=>t$21.pipe(Ye$2(n$23.createCommentOptimistically,n$23.deleteCommentOptimistically),oe$13(({event:e$19})=>!!e$19),q$20(e$19=>{let r$34=`comment`in e$19?e$19.comment.id:e$19.id,o$32=e$19.event,s$25=o7[o$32.name];return i$27.mark(`chat.comment.${s$25}.optimistically.${r$34}`,{entityId:r$34,client_trace:o$32.client_trace}).setGenericName(`chat.comment.${s$25}.optimistically`),n$23.checkCommentVisibility({id:r$34,event:o$32});})),{functional:!0}),sge=Ke$1((t$21=C$23(Le$4),i$27=C$23(N$12))=>t$21.pipe(Ye$2(n$23.getComment),oe$13(({event:e$19,commentIds:r$34})=>!!e$19&&!!r$34?.length),q$20(e$19=>{let r$34=e$19.commentIds?.[0],o$32=e$19.event;return i$27.mark(`chat.comment.get_comment.${r$34}`,{entityId:r$34,client_trace:o$32.client_trace}).setGenericName(`chat.comment.get_comment`),n$23.checkCommentVisibility({id:r$34,event:o$32});})),{functional:!0}),s7={trackCommentOptimistically:oge,trackCommentVisibility:Ke$1((t$21=C$23(Le$4),i$27=C$23(wr$1),e$19=C$23(d$4))=>t$21.pipe(Ye$2(n$23.checkCommentVisibility),Mu(()=>[i$27.activeRoomIds$,i$27.activeThreadIds$]),Is$1(([{id:r$34,event:o$32},s$25,n$46])=>{let a$30=o_(o$32,s$25),c$37=i_(o$32,n$46);if(!a$30&&!c$37){let m$32=o7[o$32.name];e$19.markCommentMarkerFinish(r$34,`chat.comment.${m$32}.complete`,{entityId:r$34,client_trace:o$32.client_trace},{withUIUpdate:!1});}})),{functional:!0,dispatch:!1}),trackGetComment:sge};VN();dm();VN();n7=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.userService=C$23(oe$6),this.commentsService=C$23(X$5),this.toggleReaction$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.toggleReaction),Mu(({commentId:e$19,reaction:r$34})=>[this.store.select(H$4(e$19)),this.store.select(b$17),this.store.select(j$1(e$19,r$34))]),Z$12(([e$19,r$34,o$32,s$25])=>{let n$46=r$34?.comment_type_data,a$30=n$46?.source_comment_id??e$19.commentId,c$37=n$46?.stub_comment_id,m$32={...e$19,commentId:a$30,stubCommentId:c$37,reaction:Je$2(e$19.reaction),userId:o$28(o$32).id};return qe$6(s$25?n$23.removeCommentReaction(m$32):n$23.addCommentReaction(m$32));}))),this.addCommentReaction$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.addCommentReaction),Mu(({userId:e$19})=>[this.userService.getUserByIdNonNullable(e$19)]),Rr(([e$19,r$34])=>this.addCommentReactionWithOptimisticUpdate(e$19,r$34)))),this.removeCommentReaction$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.removeCommentReaction),Rr(e$19=>this.removeCommentReactionWithOptimisticUpdate(e$19))));}addCommentReactionWithOptimisticUpdate({commentId:e$19,stubCommentId:r$34,reaction:o$32},s$25){return this.commentsService.addCommentReaction(e$19,o$32).pipe(q$20(()=>n$23.addCommentReactionSuccess()),ws$2(n$23.addCommentReactionOptimistically({commentId:e$19,stubCommentId:r$34,user:s$25,reaction:o$32})),Xo$2(()=>qe$6(n$23.addCommentReactionError())));}removeCommentReactionWithOptimisticUpdate({commentId:e$19,stubCommentId:r$34,userId:o$32,reaction:s$25}){return this.commentsService.removeCommentReaction(e$19,s$25).pipe(q$20(()=>n$23.removeCommentReactionSuccess()),ws$2(n$23.removeCommentReactionOptimistically({commentId:e$19,stubCommentId:r$34,userId:o$32,reaction:s$25})),Xo$2(()=>qe$6(n$23.removeCommentReactionError())));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();Yc$2=t$21=>t$21.find(i$27=>i$27.type===`comment-author`&&i$27.object_type===`user`);m7=(t$21,i$27)=>{if(!i$27)return!1;return U$16(Yc$2(t$4(t$21))?.object_id,i$27);};dm();f7=(t$21,i$27)=>{let r$34=H$1(t$21).find(o$32=>o$32.field===`idempotency_key`)?.after?.toString();return!!r$34&&r$34 in i$27;};Gw=t$21=>{let i$27=t$4(t$21),e$19=!!Jc$2(i$27)||!!Se(i$27),r$34=!!p$2(i$27)||!!m$2(i$27);return e$19||r$34;};h7=t$21=>t$21.find(i$27=>i$27.field===`reaction`);g7=t$21=>t$21.find(i$27=>i$27.type===`reaction-user`&&i$27.object_type===`user`);VN();y7=(()=>{class t$21{constructor(){this.websocketOvmService=C$23(M$4),this.websocketConfigService=C$23(E$11),this.store=C$23(q$19),this.chatLocationProviderService=C$23(wr$1),this.chatFeatureService=C$23(_t),this.commentCreated$=Ke$1(()=>this.websocketOvmService.getEventsByType([t$17.ChatCommentCreated,t$17.ChatCommentEdited,t$17.CommentCreated,t$17.CommentEdited]).pipe(oe$13(Gw),F$20(()=>({activeRoomsIds:this.chatLocationProviderService.activeRoomIds$,activeThreadIds:this.chatLocationProviderService.activeThreadIds$,shouldAlwaysFetch:this.store.select(No),roomSearchNewMessagesEnabled:this.chatFeatureService.roomSearchNewMessagesEnabled$,currentUserId:this.store.select(ae$8),pendingComments:this.store.select(Ve$2)})),oe$13(([e$19,{pendingComments:r$34}])=>!f7(e$19,r$34)),Z$12(([e$19,{activeRoomsIds:r$34,activeThreadIds:o$32,shouldAlwaysFetch:s$25,roomSearchNewMessagesEnabled:n$46,currentUserId:a$30}])=>{let c$37=u7(e$19),m$32=d7({event:e$19,shouldAlwaysFetch:s$25,activeRoomsIds:r$34,activeThreadIds:o$32,roomSearchNewMessagesEnabled:n$46,currentUserId:a$30});return[...c$37,...m$32];}))),this.commentCreatedForLegacyChat$=Ke$1(()=>this.websocketOvmService.getEventsByType([t$17.ChatCommentCreated]).pipe(Mu(()=>this.chatFeatureService.isEnabled$),oe$13(([,e$19])=>!e$19),Z$12(([e$19])=>{let r$34=s_(e$19);return r$34?.parent?.id?qe$6(n$23.getComment({commentIds:[r$34.parent.id]})):z$18;}))),this.commentDeleted$=Ke$1(()=>this.websocketOvmService.getEventsByType([t$17.ChatCommentDeleted,t$17.CommentDeleted]).pipe(oe$13(Gw),Z$12(e$19=>{let r$34=[n$23.deleteCommentOptimistically({id:t$5(e$19),event:e$19})],o$32=o$5(t$4(e$19));return o$32&&r$34.push(n$23.getComment({commentIds:[o$32.object_id]})),j$23(r$34);}))),this.reactionsFromWebsocket$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.ReactionUpdated).pipe(q$20(e$19=>{return{event:e$19,relationshipReaction:g7(t$4(e$19)),relationshipCommentAuthor:Yc$2(t$4(e$19)),change:h7(H$1(e$19))};}),Mu(()=>this.store.select(ae$8).pipe(q$20(e$19=>e$19?.toString()))),oe$13(([{event:e$19,change:r$34,relationshipReaction:o$32}])=>!!r$34&&!!o$32&&e$19.version_change.object_type===et$6.COMMENT),q$20(([{event:e$19,change:r$34,relationshipReaction:o$32},s$25])=>{let n$46=r$34?.before===null&&typeof r$34?.after==`string`,a$30={reaction:{date:e$19.date_created,commentId:e$19.version_change?.object_id??``,reaction:n$46?r$34.after:r$34?.before??``,userId:o$32?.object_id??``,myUserId:s$25}};return n$46?n$23.addReactionFromWebsocket(a$30):n$23.removeReactionFromWebsocket(a$30);})));}ngrxOnRunEffects(e$19){return[t$17.ChatCommentCreated,t$17.ChatCommentEdited,t$17.ChatCommentDeleted,t$17.ReactionUpdated].forEach(r$34=>{let o$32=this.websocketConfigService.createConfiguration(r$34).disableJitter();this.websocketConfigService.addConfiguration(o$32);}),[t$17.CommentCreated,t$17.CommentEdited,t$17.CommentDeleted].forEach(r$34=>{let o$32=this.websocketConfigService.createConfiguration(r$34).setJitter(400);this.websocketConfigService.addConfiguration(o$32);}),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`comments_v2_store_module`,`load`);v7=(()=>{class t$21{constructor(e$19){if(e$11(`comments_v2_store_module`,`construct`),e$19)throw new Error(`CommentsV2StoreModule is already loaded. Import it in the AppModule only`);k$5(Ww,{version:2,conditional:!0});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(t$21,12));};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[rn.forFeature(Ww,r7),Je$4.forFeature([ma,n7,i7,y7,z$4,s7])]});}}return t$21;})();VN();S7=t$21=>{if(t$21===a$24.Dropdown)return{options:[{name:"Default"}]};if(t$21===a$24.Labels)return{options:[{label:"Default"}]};};b7=(t$21,i$27)=>{let e$19=i$27.map(s$25=>s$25.name.toLowerCase()),r$34=t$8[t$21],o$32=1;for(;e$19.includes(r$34.toLowerCase());)r$34=`${t$8[t$21]} ${o$32}`,o$32++;return r$34;};hr$3();VN();n$24(`custom_fields_store_module`,`create_custom_field_without_settings_effects`,`load`);C7=(()=>{class t$21{constructor(){this.action$=C$23(Le$4),this.store=C$23(q$19),this.createEntityField$=Ke$1(()=>this.action$.pipe(Ye$2(o$27),Mu(({entity:e$19})=>this.store.select(rt$1(e$19))),q$20(([{fieldType:e$19,entity:r$34,addColumn:o$32},s$25])=>s$21({field:{name:b7(e$19,s$25),type:e$19,type_config:S7(e$19)},entity:r$34,addColumn:o$32,ignoreExistingField:!0}))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`create_custom_field_without_settings_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();n_=`cfm-add-existing-fields`,_7=sn({fieldsToAdd:{}},on(s$9,(t$21,{data:i$27,dataViewId:e$19})=>({...t$21,fieldsToAdd:i$27,dataViewId:e$19})),on(r$20,t$21=>({...t$21,fieldsToAdd:{},dataViewId:void 0})));k7=Ue$6(mt$4(n_),t$21=>t$21),T7=Ue$6(k7,t$21=>t$21?.fieldsToAdd),I7=Ue$6(k7,t$21=>t$21?.dataViewId);VN();n$24(`custom_fields_store_module`,`add_existing_fields_effects`,`load`);w7=(()=>{class t$21{static{this.concurrentRequests=5;}constructor(e$19,r$34,o$32,s$25,n$46){this.actions$=e$19,this.store=r$34,this.customFields=o$32,this.cfmResource=s$25,this.aiCustomFieldsBackfillService=n$46,this.addExistingFieldsToLocationEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(t$6),Mu(({dataViewId:a$30})=>[this.store.select(F$3(a$30??``)),this.store.select(te$4)]),Z$12(([a$30,c$37,m$32])=>{let{fields:l$26,createdFields:g$19,selectedEntity:f$33,dataViewId:h$15,showToast:I$25,fillExistingTasks:A$22,appliedObjects:R$21,existingFieldsMap:w$26,shouldMergeAppliedObjects:E$16}=a$30,P$20=g$19?.reduce((v$22,x$28)=>({...v$22,[x$28]:!0}),{})||{},B$22=E7(c$37?.cachedView),G$16=R$21??B$22;return this.cfmResource.addFieldsToLocation(f$33,l$26,t$21.concurrentRequests,E$16?A7(G$16,l$26,m$32,f$33):G$16,w$26).pipe(q$20(v$22=>s$9({data:{...v$22,...P$20},selectedEntity:f$33,dataViewId:h$15,showToast:I$25,fillExistingTasks:A$22})));}))),this.closeCfmAfterAddingExistingFieldsEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(s$9),Mu(()=>[this.store.select(Ge$4),this.store.select(o$30),this.store.select(d$19)]),oe$13(([{selectedEntity:a$30},c$37,,m$32])=>a$30.id!==c$37.id&&a$30.id!==m$32?.id),Z$12(([,,a$30])=>qe$6(r$20(),h$9({teamId:a$30}))))),this.addExistingFieldsToLocationSuccessEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(s$9),Mu(()=>[this.store.select(Ge$4),this.store.select(d$19)]),oe$13(([{selectedEntity:a$30},c$37,m$32])=>a$30.id===c$37.id||a$30.id===m$32?.id),Z$12(([{selectedEntity:a$30}])=>{let c$37={...a$30,name:``};return this.customFields.getEntityFields(a$30.type,a$30.id,!1).pipe(q$20(()=>T$18({entity:c$37})));}))),this.backfillAiFieldsAfterAddingToLocationSuccessEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(s$9),oe$13(({fillExistingTasks:a$30})=>!!a$30),q$20(({data:a$30,selectedEntity:c$37})=>({fieldId:Object.keys(a$30)[0],selectedEntity:c$37})),Mu(({fieldId:a$30})=>[this.store.select(G$8(a$30))]),oe$13(([,a$30])=>!!a$30),Is$1(([{selectedEntity:a$30},c$37])=>{this.aiCustomFieldsBackfillService.backfill(c$37,{id:a$30.id,type:a$30.type,name:``});})),{dispatch:!1}),this.refreshTaskViewOnloadEntityFieldsSuccessEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(s$9),Mu(()=>[this.store.select(Z$10),this.store.select(o$30)]),oe$13(([,a$30,c$37])=>!!a$30&&!!c$37),q$20(([,a$30,c$37])=>RA({taskId:a$30,workspaceId:c$37.toString(),params:{"fields[]":W$8},tags:[[n$34.Refresh,`AddExistingFieldsEffects refreshTaskView`]]})))),this.loadAvailableFieldsSuccessEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(f$26),Mu(()=>[this.store.select(o$30),this.store.select(I$23),this.store.select(T7),this.store.select(I7),this.store.select(Ge$4),this.store.select(d$19)]),oe$13(([{entity:a$30},,,c$37,m$32,l$26,g$19])=>!!c$37&&!!Object.keys(c$37).length&&(!!m$32||a$30.id===l$26.id||a$30.id===g$19?.id)),le$5(([,a$30,c$37,m$32,l$26])=>{let g$19=l$26||c$37;return g$19?this.store.select(li$2(g$19)).pipe(Ve$4(1),le$5(f$33=>{let h$15=a_(f$33,m$32);return h$15.length?qe$6(new xt$2(h$15,!0,g$19),h$9({teamId:a$30}),r$20()):qe$6(r$20());})):j$23([]);})));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`add_existing_fields_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Ar),ge$10(ee$2),ge$10(oe$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();M7=`adding-field-toast-`;VN();n$24(`custom_fields_store_module`,`add_existing_fields_toast_effects`,`load`);R7=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.simpleToastService=r$34,this.customFieldsService=o$32,this.showAddExistingFieldsToLocationLoadingToastEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(t$6),oe$13(({showToast:s$25})=>!!s$25),Is$1(({fields:s$25})=>{m_(s$25).forEach(a$30=>this.simpleToastService.addSimpleToastItem(a$30));})),{dispatch:!1}),this.showAddExistingFieldsToLocationSuccessToastEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(s$9),oe$13(({showToast:s$25})=>!!s$25),Z$12(({data:s$25,selectedEntity:n$46})=>this.customFieldsService.getEntityFields(n$46.type,n$46.id,!1).pipe(Is$1(({fields:a$30})=>{l_(s$25,a$30).forEach(m$32=>this.simpleToastService.addSimpleToastItem(m$32));})))),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`add_existing_fields_toast_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(X$3),ge$10(Ar));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`custom_fields_store_module`,`bulk_update_field_locations_effects`,`load`);F7=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.simpleToastService=o$32,this.toastService=s$25,this.bulkUpdateFieldLocationsEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(N$14),oe$13(n$46=>!!n$46.dataViewId),Rr(n$46=>{let a$30=n$46.dataViewId,c$37={[n$46.fieldId]:!0};return this.store.select(li$2(a$30)).pipe(Ve$4(1),As$3(this.store.select(G$8(n$46.fieldId)),this.store.select(de$10)),le$5(([m$32,l$26,g$19])=>{let f$33=l$26&&m$32.some(I$25=>I$25.customField?.id===l$26.id),h$15=m$32;if(f$33)h$15=a_(m$32,c$37);else if(l$26){let I$25=je$1(l$26,g$19);I$25.state=_$5.Visible,h$15=[...m$32,I$25];}return h$15.length?[new xt$2(h$15,!0,a$30),r$20()]:[r$20()];}));}))),this.showBulkUpdateFieldLocationsLoadingToastEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(W$17),oe$13(({showToast:n$46})=>!!n$46),Is$1(({fieldId:n$46})=>{m_([n$46]).forEach(c$37=>this.simpleToastService.addSimpleToastItem(c$37));})),{dispatch:!1}),this.showBulkdUpdateFieldLocationsSuccessToastEffect=Ke$1(()=>this.actions$.pipe(Ye$2(N$14),oe$13(({showToast:n$46})=>!!n$46),Z$12(({fieldId:n$46})=>this.store.select(G$8(n$46)).pipe(Ve$4(1),oe$13(a$30=>!!a$30),Is$1(a$30=>{l_({[n$46]:!0},[a$30]).forEach(m$32=>this.simpleToastService.addSimpleToastItem(m$32));})))),{dispatch:!1}),this.showBulkUpdateFieldLocationsErrorToastEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(O$14),Is$1(({error:n$46})=>{let a$30=``,c$37=``;n$46.isMessageOverriden?(a$30=`Failed to update field`,c$37=n$46.originalError?.message??`Unknown error`):(a$30=n$46.title??`Failed to update field`,c$37=n$46.msg??`Unknown error`),this.toastService.addToastItem({isV3Toast:!0,title:a$30,description:c$37,icon:`warning`,iconClass:`danger`});})),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`bulk_update_field_locations_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(X$3),ge$10(q$14));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`custom_fields_store_module`,`convert_field_effects`,`load`);x7=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.resource=o$32,this.customFields=s$25,this.convertField=Ke$1(()=>this.actions$.pipe(Ye$2(r$10),Mu(()=>this.store.select(o$30)),Z$12(([n$46,a$30])=>this.resource.convertField(a$30,n$46.fieldId,n$46.targetType).pipe(q$20(c$37=>c$11({operation:c$37})),Xo$2(c$37=>qe$6(n$12({fieldId:n$46.fieldId,targetType:n$46.targetType,error:c$37}))))))),this.convertFieldLimitReachedEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(n$12),q$20(({error:n$46})=>n$46.error),oe$13(({limit:n$46,reason:a$30})=>!!n$46&&!!a$30),q$20(({limit:n$46,reason:a$30})=>ee$7({item:{id:a$30,layout:pe$5.ErrorMessage,title:"Field convert failed!",body:"The selected field is being used on "+n$46+"+ tasks, which exceeds the limit for Converting"}})))),this.convertFieldErrorEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(n$12),q$20(({error:n$46})=>n$46.error),oe$13(({limit:n$46,reason:a$30})=>!n$46&&!a$30),q$20(()=>ee$7({item:{id:`convert_field_error`,layout:pe$5.ErrorMessage,title:"Field convert failed!",body:"Field conversion failed. Please try again"}})))),this.convertFieldAsyncOperationStartedEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(c$11),q$20(({operation:n$46})=>v$3(n$46))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`convert_field_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(ee$2),ge$10(Ar));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();d_=(t$21=[])=>t$21.map(({id:i$27})=>i$27),O7=function(t$21){return{team:d_(t$21.team),project:d_(t$21.project),category:d_(t$21.category),subcategory:d_(t$21.subcategory)};};VN();n$24(`custom_fields_store_module`,`manual_sorting_effects`,`load`);P7=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.segmentService=r$34,this.store=o$32,this.turnOnManualSortingOrder$=Ke$1(()=>this.actions$.pipe(Ye$2(v$5),Is$1(()=>this.segmentService.track(Bu.ManualSortingInCustomFieldsManager,{})),q$20(({hierarchyEntity:s$25})=>T$18({entity:s$25})))),this.fetchManualSortingOrderIfOn$=Ke$1(()=>this.actions$.pipe(Ye$2(i$21),Mu(()=>this.store.select(he)),oe$13(([,s$25])=>s$25),q$20(([{entity:s$25}])=>T$18({entity:s$25})))),this.fetchedManualSortingOrder$=Ke$1(()=>this.actions$.pipe(Ye$2(f$26),q$20(({fields:s$25})=>x$7({order:O7(s$25)})))),this.adjustManualSortingOrder$=Ke$1(()=>this.actions$.pipe(Ye$2(b$2),q$20(({hierarchyEntity:s$25,targetPosition:n$46,movedField:a$30})=>l$21({field:a$30,updates:{position:n$46},entity:s$25,via:`custom field manager`}))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`manual_sorting_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(_b$1),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`custom_fields_store_module`,`async_operation_effects`,`load`);j7=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.store=r$34,this.customFieldsService=o$32,this.fieldCreatedFromOVMUpdateViewsEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(O$5,u$6),oe$13(({oldFieldIds:s$25})=>!!s$25?.length),Mu(()=>[this.store.select(te$15),this.store.select(k$25)]),q$20(([{newFieldId:s$25,oldFieldIds:n$46},a$30,c$37])=>$7({dataViewEntities:a$30,dataViewIdMap:c$37,mergedFieldIds:n$46,newFieldId:s$25})),R$20(),q$20(s$25=>ze$1({updates:s$25})))),this.fieldCreatedFromAsyncOperationEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(u$6),Mu(()=>[this.store.select(o$30),this.store.select(Ge$4)]),Z$12(([,s$25,n$46])=>this.customFieldsService.getEntityFields(n$46.type,n$46.id,!1).pipe(le$5(()=>qe$6(h$9({teamId:s$25}),T$18({entity:{...n$46,name:``}})))))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`async_operation_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Ar));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`custom_fields_store_module`,`async_operation_fail_effects`,`load`);L7=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.store=r$34,this.asyncOperationFailEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(F$6,l$10,M$3),Mu(()=>this.store.select(ae$8)),le$5(([{operation:o$32},s$25])=>{let n$46=[re$6({id:`${o$32.id}_started`})];return o$32.createdBy===s$25+``&&n$46.push(D$1(o$32)),j$23(n$46);})));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`async_operation_fail_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`custom_fields_store_module`,`async_operation_success_effects`,`load`);D7$1=(()=>{class t$21{constructor(e$19){this.actions$=e$19,this.asyncOperationSuccessEffect$=Ke$1(()=>this.actions$.pipe(Ye$2(i$5,F$7,s$7),le$5(({type:r$34,operation:o$32})=>{let s$25=[re$6({id:`${o$32.id}_started`})];return r$34===F$7.type&&s$25.push(u$6({newFieldId:``,oldFieldIds:[]})),j$23(s$25);})));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`async_operation_success_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();dm();Ee$4();u_=`generate-ai-field-values`;Sge={assignee:`assignees`,priority:`priority`,type:`type`,customItems:`type`};VN();xs$3=(()=>{class t$21{constructor(){this.simpleToastService=C$23(X$3),this.toastService=C$23(q$14),this.store=C$23(q$19),this.customFieldsSplitService=C$23(Be$1),this.destroyRef=C$23(at$11),this.managerDataService=C$23(Ci),this.locale=C$23(al$1),this.GENERATED_VALUES_TOAST_KEY=`generated-field-values`,this.isMacOS=c$30(),this.generationFailedMessage=new je$3("Field {count, plural, =1 {value} other {values}} generation failed"),this.cancelGeneratingValuesSubject$=new M$22(),this.cancelGeneratingValues$=this.cancelGeneratingValuesSubject$.asObservable(),this.escapeKeyListener=null,this.undoKeyListener=null,this.enableStoppingSyncGeneration$=this.customFieldsSplitService.aiCustomFieldConfig$.pipe(q$20(e$19=>e$19.enableStoppingSyncGeneration)),this.enableStoppingAsyncGeneration$=this.customFieldsSplitService.aiCustomFieldConfig$.pipe(q$20(e$19=>e$19.enableStoppingAsyncGeneration)),this.enableUndo$=this.customFieldsSplitService.aiCustomFieldConfig$.pipe(q$20(e$19=>e$19.enableUndo)),this.enableGenerateMore$=this.customFieldsSplitService.aiCustomFieldConfig$.pipe(q$20(e$19=>e$19.enableGenerateMore));}displayGeneratingValuesToast(e$19,r$34,o$32=!1,s$25){let n$46=o$32?this.enableStoppingAsyncGeneration$:this.enableStoppingSyncGeneration$;$i([this.customFieldsSplitService.isAICustomFieldEnabled$,n$46]).pipe(Ve$4(1),F$22(this.destroyRef),oe$13(([a$30])=>a$30)).subscribe(([a$30,c$37])=>{let m$32=B7(c$37?()=>this.cancelGeneratingValues(e$19,r$34,o$32,m$32.key):void 0,s$25);this.simpleToastService.addSimpleToastItem(m$32),c$37&&this.addEscapeKeyListener(e$19,r$34,o$32,m$32.key);});}removeGeneratingValuesToast(e$19=u_){this.simpleToastService.removeToastByKey(e$19),this.removeEscapeKeyListener();}displaySuccessToast(e$19,r$34,o$32,s$25=!1){this.displayToast({title:p_(this.locale,!1),fieldId:e$19,historyIds:r$34,previousValuesMap:o$32,isTaskProperty:s$25,valueDetails:{updatedTasks:Object.keys(r$34).length||1,failedTasks:0}});}displayErrorToast({fieldId:e$19,historyIds:r$34,previousValuesMap:o$32,errors:s$25,taskIds:n$46,isTaskProperty:a$30=!1}){let c$37=this.generationFailedMessage.format({count:n$46.length}),m$32=Object.values(s$25??{});n$46.length===1&&m$32.length===1?c$37=m$32[0]:c$37=p_(this.locale,!0),this.displayToast({title:c$37,fieldId:e$19,historyIds:r$34,previousValuesMap:o$32,isTaskProperty:a$30,valueDetails:{updatedTasks:0,failedTasks:n$46.length||1}});}displayToastWithDetails({fieldId:e$19,updatedTasks:r$34,failedTasks:o$32,historyIds:s$25,previousValuesMap:n$46,isTaskProperty:a$30=!1,remainingTaskIds:c$37,customFieldConfig:m$32,taskPropertyConfig:l$26,taskPropertyId:g$19}){this.displayToast({title:p_(this.locale,r$34===0&&o$32>0),fieldId:e$19,historyIds:s$25,previousValuesMap:n$46,isTaskProperty:a$30,valueDetails:{updatedTasks:r$34,failedTasks:o$32},remainingTaskIds:c$37,customFieldConfig:m$32,taskPropertyConfig:l$26,taskPropertyId:g$19});}removeToast(){this.simpleToastService.removeToastByKey(this.GENERATED_VALUES_TOAST_KEY),this.removeUndoKeyListener();}cancelGeneratingValues(e$19,r$34,o$32,s$25=u_){this.cancelGeneratingValuesSubject$.next(),this.updateToastToCancelling(s$25),he$6(5e3).subscribe(()=>{this.removeGeneratingValuesToast(s$25);}),o$32&&this.store.dispatch(hr$1({fieldId:e$19,isTaskProperty:r$34}));}undo(e$19,r$34,o$32,s$25=!1){this.removeToast(),$i([s$25?qe$6(void 0):this.store.select(G$8(e$19)),this.store.select($o$1(Object.keys(o$32))),this.managerDataService.batchUndo(`itemUndo`,{histIds:r$34,itemIds:Object.keys(r$34),method:`edit`})]).pipe(Ve$4(1),F$22(this.destroyRef)).subscribe(([n$46,a$30])=>{for(let c$37 of U7({fieldId:e$19,customField:n$46,previousValuesMap:o$32,isTaskProperty:s$25,tasks:a$30}))this.store.dispatch(c$37);});}addEscapeKeyListener(e$19,r$34,o$32,s$25){this.escapeKeyListener=n$46=>{n$46.key===`Escape`&&this.cancelGeneratingValues(e$19,r$34,o$32,s$25);},window.addEventListener(`keydown`,this.escapeKeyListener);}addUndoKeyListener(e$19,r$34,o$32,s$25=!1){this.removeEscapeKeyListener(),this.undoKeyListener=n$46=>{(this.isMacOS&&n$46.metaKey||!this.isMacOS&&n$46.ctrlKey)&&n$46.key===`z`&&this.undo(e$19,r$34,o$32,s$25);},window.addEventListener(`keydown`,this.undoKeyListener);}removeUndoKeyListener(){this.undoKeyListener&&(window.removeEventListener(`keydown`,this.undoKeyListener),this.undoKeyListener=null);}removeEscapeKeyListener(){this.escapeKeyListener&&(window.removeEventListener(`keydown`,this.escapeKeyListener),this.escapeKeyListener=null);}addV3Toast({title:e$19,fieldId:r$34,historyIds:o$32,previousValuesMap:s$25,isTaskProperty:n$46,valueDetails:a$30,hasUndoValues:c$37,remainingTaskIds:m$32,customFieldConfig:l$26,taskPropertyConfig:g$19,taskPropertyId:f$33,enableGenerateMore:h$15=!1}){let I$25=h$15&&m$32&&m$32.length>0,A$22=V7({hasUndoValues:c$37,hasGenerateMoreButton:I$25,onUndo:()=>{this.undo(r$34,o$32,s$25,n$46);},onGenerateMore:()=>{this.generateMoreTasks({fieldId:r$34,remainingTaskIds:m$32??[],isTaskProperty:n$46??!1,customFieldConfig:l$26,taskPropertyConfig:g$19,taskPropertyId:f$33});}});this.toastService.addToastItem({titleHtml:e$19,descriptionHtml:N7(this.locale,a$30),isV3Toast:!0,actions:A$22,footerAlignment:c$37&&I$25?`spaced`:`stretched`});}displayToast({title:e$19,fieldId:r$34,historyIds:o$32,previousValuesMap:s$25,isTaskProperty:n$46,valueDetails:a$30,remainingTaskIds:c$37,customFieldConfig:m$32,taskPropertyConfig:l$26,taskPropertyId:g$19}){$i([this.customFieldsSplitService.isAICustomFieldEnabled$,this.enableUndo$,this.enableGenerateMore$]).pipe(Ve$4(1),F$22(this.destroyRef),oe$13(([f$33])=>f$33)).subscribe(([f$33,h$15,I$25])=>{let A$22=h$15&&o$32&&Object.keys(o$32).length>0;this.addV3Toast({title:e$19,fieldId:r$34,historyIds:o$32,previousValuesMap:s$25,isTaskProperty:n$46,valueDetails:a$30??{updatedTasks:1,failedTasks:0},hasUndoValues:A$22,remainingTaskIds:c$37,customFieldConfig:m$32,taskPropertyConfig:l$26,taskPropertyId:g$19,enableGenerateMore:I$25}),A$22&&this.addUndoKeyListener(r$34,o$32,s$25,n$46);});}updateToastToCancelling(e$19){this.simpleToastService.updateToastByKey(e$19,{label:"Cancelling...",buttonText:void 0,buttonAction:void 0,buttonHotkey:void 0,timeout:15e3});}generateMoreTasks({fieldId:e$19,remainingTaskIds:r$34,isTaskProperty:o$32,customFieldConfig:s$25,taskPropertyConfig:n$46,taskPropertyId:a$30}){this.store.dispatch(sr$1({fieldId:e$19,taskIds:r$34,customFieldConfig:s$25,taskPropertyConfig:n$46,taskPropertyId:a$30,isTaskProperty:o$32,trackingProperties:{via:o$32?`bulk-generate-ai-property`:`bulk-generate-custom-field`,isBulkUpdate:!0,aiActionsConsumed:r$34.length,aiPaywallVia:o$32?`bulk-generate-ai-property`:`bulk-generate-custom-field`}}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();H7=[`custom`];VN();n$24(`custom_fields_store_module`,`ai_custom_fields_effects`,`load`);z7=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.aiFieldsBulkUpdateService=C$23(W$4),this.aiFieldsGenerateValuesToastService=C$23(xs$3),this.contentAssistantQuotaRunOutLoader=C$23(j$10),this.customFieldsSplitService=C$23(Be$1),this.aiFieldsSegmentTrackerService=C$23(se$1),this.generateAICustomFieldValuesForDisplayedTasksInChunks$=Ke$1(()=>this.actions$.pipe(Ye$2(zo$2),oe$13(({isTaskProperty:e$19})=>!e$19),Mu(({taskIds:e$19,fieldId:r$34})=>[this.store.select($o$1(e$19)),this.store.select(G$8(r$34)).pipe(R$20())]),Is$1(([{fieldId:e$19,isTaskProperty:r$34}])=>{this.aiFieldsGenerateValuesToastService.displayGeneratingValuesToast(e$19,!!r$34,!1);}),le$5(([e$19,r$34,o$32])=>this.updateTaskCustomFields(e$19,r$34,o$32)))),this.updateAICustomFieldValueInFieldsStore$=Ke$1(()=>this.actions$.pipe(Ye$2(Zo),oe$13(({isTaskProperty:e$19})=>!e$19),Mu(({taskId:e$19,jobId:r$34})=>[this.store.select(Fe$1(e$19,r$34)),this.store.select(G$8(r$34)).pipe(R$20()),this.customFieldsSplitService.isStreamQuillContentForAiLongTextFieldsEnabled$]),q$20(([{taskId:e$19},r$34,o$32,s$25])=>t$9({field:o$32,taskId:e$19,valueOptions:o$32.value_options,via:`ai-generate`,...W7(r$34,o$32,s$25)})))),this.updateAutoAiUsagesQuotaRemainingOptimistically$=Ke$1(()=>this.actions$.pipe(Ye$2(Zo),oe$13(({isTaskProperty:e$19})=>!e$19),le$5(()=>this.customFieldsSplitService.aiCustomFieldConfig$),oe$13(e$19=>e$19.shouldUseNewEntitlementLogic),q$20(()=>Jt$1({taskCount:1})))),this.generateAIFieldValuesForTasksFinished$=Ke$1(()=>this.actions$.pipe(Ye$2(Go),Is$1(({fieldId:e$19,historyIds:r$34,previousValuesMap:o$32,taskIds:s$25,errors:n$46,isTaskProperty:a$30})=>{this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),Object.keys(n$46??{}).length?this.aiFieldsGenerateValuesToastService.displayErrorToast({fieldId:e$19,historyIds:r$34,previousValuesMap:o$32,errors:n$46,taskIds:s$25,isTaskProperty:a$30}):this.aiFieldsGenerateValuesToastService.displaySuccessToast(e$19,r$34,o$32,a$30);})),{dispatch:!1}),this.routerNavigatedAction$=Ke$1(()=>this.actions$.pipe(Ye$2(bt$4),Mu(()=>[this.store.select(me$1)]),oe$13(([,e$19])=>e$19.length>0),q$20(()=>tr$2())));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`ai_custom_fields_effects`,`run`),e$19;}updateTaskCustomFields(e$19,r$34,o$32){let{fieldId:s$25,taskIds:n$46,customFieldConfig:a$30}=e$19,c$37={},m$32={},l$26=f_(r$34,s$25),g$19=!0,f$33=!1;return this.aiFieldsBulkUpdateService.updateCustomFieldsForTasks(s$25,n$46,a$30).pipe(Is$1(({data:h$15})=>{h$15.taskId&&h$15.historyIds?.length&&(c$37[h$15.taskId]=h$15.historyIds),h$15.taskId&&h$15.status===`error`&&h$15.error&&(m$32[h$15.taskId]=h$15.error),g$19&&(this.aiFieldsSegmentTrackerService.trackAiFieldGenerationEvent(e$19),g$19=!1),f$33||(f$33=!!h$15.taskId);}),Is$1(({data:h$15})=>{if(h$15.status===`finished`&&!h$15.taskId&&!f$33)throw new Error();}),q$20(h$15=>Gp({action:e$19,event:h$15,historyIds:c$37,previousValuesMap:l$26,errors:m$32,field:o$32})),Xo$2(h$15=>(this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),Xc$2({error:h$15,action:e$19,contentAssistantQuotaRunOutLoader:this.contentAssistantQuotaRunOutLoader,toastService:this.aiFieldsGenerateValuesToastService,historyIds:c$37,previousValuesMap:l$26}))),gs(this.aiFieldsGenerateValuesToastService.cancelGeneratingValues$));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();dm();Ee$4();VN();Zc=(()=>{class t$21{constructor(){this.aiAsyncJobsResource=C$23($$3),this.store=C$23(q$19),this.customFieldsSplitService=C$23(Be$1);}watchJobs(e$19,r$34,o$32){$i([this.store.select(o$30),this.customFieldsSplitService.asyncAiJobsConfig$,this.customFieldsSplitService.aiCustomFieldConfig$]).pipe(le$5(([s$25,n$46,a$30])=>a$30.useWebsocketsForJobStatus?z$18:he$6(n$46.fetchStateIntervalMs??2e3).pipe(le$5(()=>this.fetchJobs(s$25,r$34,o$32).pipe(bs({count:n$46.fetchStateMaxRetriesOnError??5,delay:(c$37,m$32)=>{return he$6(Math.pow(2,m$32)*1e3);}}),q$20(c$37=>({result:c$37,config:a$30})),Xo$2(()=>{for(let c$37 of r$34)this.store.dispatch(rr$1({jobId:c$37,fieldId:e$19,taskIds:[],isQueueCompleted:!0}));return z$18;}))))),Ve$4(1)).subscribe(({result:s$25,config:n$46})=>{n$46?.useWebsocketsForJobStatus||this.handleResult(e$19,s$25,o$32);});}fetchJobs(e$19,r$34,o$32){let s$25=[[n$34.Load,`async-ai-jobs-service-fetch-jobs`]];return o$32?this.aiAsyncJobsResource.fetchTaskPropertiesJobs(e$19,r$34,s$25):this.aiAsyncJobsResource.fetchCustomFieldJobs(e$19,r$34,s$25);}handleResult(e$19,r$34,o$32){let s$25=r$34.filter(n$46=>h_(n$46));s$25.length&&this.watchJobs(e$19,s$25.map(n$46=>n$46.id),o$32);for(let n$46 of r$34){let a$30=n$46.details?.tasks.map(c$37=>c$37.taskId)??[];n$46.status===`completed`?this.handleJobFinished(n$46,o$32,!r$34.some(h_)):n$46.status===`failed`&&this.store.dispatch(rr$1({jobId:n$46.id,fieldId:e$19,taskIds:a$30,isQueueCompleted:!r$34.some(h_)}));}}handleJobFinished(e$19,r$34,o$32){if(!o$32){this.dispatchJobFinished(e$19,r$34,!1);return;}this.customFieldsSplitService.asyncAiJobsConfig$.pipe(Lr$1(s$25=>he$6(s$25.delayHidingPlaceholderMs??2e3)),Ve$4(1)).subscribe(()=>{this.dispatchJobFinished(e$19,r$34,!0);});}dispatchJobFinished(e$19,r$34,o$32){let s$25=this.getFieldId(e$19,r$34),n$46=e$19.details.tasks.map(a$30=>a$30.taskId);this.store.dispatch(or$1({jobId:e$19.id,fieldId:s$25,taskIds:n$46,isQueueCompleted:o$32}));}getFieldId(e$19,r$34){return r$34?e$19.details.tasks[0]?.commands?.[0]?.source:e$19.details.tasks[0]?.fieldIds?.[0];}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();C$22();g_="Failed to generate AI field values";VN();n$24(`custom_fields_store_module`,`ai_custom_fields_async_effects`,`load`);J7=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.aiFieldsBulkUpdateService=C$23(W$4),this.contentAssistantQuotaRunOutLoader=C$23(j$10),this.aiFieldsGenerateValuesToastService=C$23(xs$3),this.aiAsyncJobsResource=C$23($$3),this.store=C$23(q$19),this.asyncAiJobsService=C$23(Zc),this.customFieldsSplitService=C$23(Be$1),this.aiFieldsSegmentTrackerService=C$23(se$1),this.generateAIFieldValuesForTasksAsync$=Ke$1(()=>this.actions$.pipe(Ye$2(sr$1),oe$13(({isTaskProperty:e$19})=>!e$19),Is$1(({fieldId:e$19,isTaskProperty:r$34})=>{this.aiFieldsGenerateValuesToastService.displayGeneratingValuesToast(e$19,!!r$34,!0);}),Z$12(e$19=>this.createAndFetchJobs(e$19)),Is$1(e$19=>{e$19.jobs.length>0&&this.asyncAiJobsService.watchJobs(e$19.jobs[0].fieldId,e$19.jobs.map(r$34=>r$34.id),!1);}),Z$12(e$19=>e$19.jobs.map(r$34=>ir({fieldId:r$34.fieldId,taskIds:r$34.taskIds,jobId:r$34.id,isBackfilling:!1,groupId:r$34.groupId,executionBatchId:r$34.executionBatchId,remainingTaskIds:e$19.remainingTaskIds,customFieldConfig:e$19.customFieldConfig,taskPropertyConfig:e$19.taskPropertyConfig,taskPropertyId:e$19.taskPropertyId}))))),this.generateAIFieldValuesForTasksJobFinished$=Ke$1(()=>this.handleJobCompletion(this.actions$.pipe(Ye$2(or$1)),`displaySuccessToast`),{dispatch:!1}),this.generateAIFieldValuesForTasksJobFailed$=Ke$1(()=>this.handleJobCompletion(this.actions$.pipe(Ye$2(rr$1)),`displayErrorToast`,{historyIds:{},previousValuesMap:{},errors:{}}),{dispatch:!1}),this.updateCustomFieldValueIfAIGenerating$=Ke$1(()=>this.actions$.pipe(Ye$2(hi$2),Mu(({field:e$19,taskId:r$34})=>[this.store.select(Te$1(e$19.id,r$34)),this.customFieldsSplitService.isAsyncAiJobsEnabled$]),oe$13(([,e$19,r$34])=>e$19&&r$34),Z$12(([{field:e$19,taskId:r$34}])=>[t$9({taskId:r$34,field:e$19,value:eh(e$19),valueOptions:e$19.value_options,valueRichtext:e$19.value_richtext,via:`ai-generate`}),nr$3({fieldId:e$19.id,taskId:r$34})]))),this.fetchTaskOnTaskUpdatedSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(Se$5.fetchTaskOnTaskUpdatedSuccess),Mu(()=>[this.customFieldsSplitService.isAsyncAiJobsEnabled$]),oe$13(([,e$19])=>e$19),Z$12(([{context:e$19,task:r$34}])=>Q7(r$34.id,e$19)))),this.asyncAiJobCompletedWithDetails$=Ke$1(()=>this.actions$.pipe(Ye$2(dr$1),Mu(({jobId:e$19})=>[this.customFieldsSplitService.aiCustomFieldConfig$.pipe(q$20(r$34=>r$34.useWebsocketsForJobStatus)),this.store.select(q$4(e$19)),this.store.select(Ie$2(e$19)),this.store.select(Ae$1(e$19))]),oe$13(([e$19,r$34,o$32,s$25])=>r$34&&q7(o$32,s$25)),Is$1(([e$19,,r$34,o$32,s$25])=>{if(!r$34?.groupId){this.displayJobCompletionToast({fieldId:r$34?.fieldId??e$19.jobId,updatedTasks:e$19.updatedTasks,failedTasks:e$19.failedTasks,historyIds:r$34?.historyIds||{},previousValuesMap:s$25,isTaskProperty:!!r$34?.isTaskProperty,remainingTaskIds:r$34?.remainingTaskIds,customFieldConfig:r$34?.customFieldConfig,taskPropertyConfig:r$34?.taskPropertyConfig,taskPropertyId:r$34?.taskPropertyId});return;}let n$46=K7(o$32),a$30=o$32.find(c$37=>c$37?.remainingTaskIds&&c$37.remainingTaskIds.length>0);this.displayJobCompletionToast({fieldId:r$34?.fieldId??e$19.jobId,updatedTasks:n$46.updatedTasks,failedTasks:n$46.failedTasks,historyIds:n$46.historyIds,previousValuesMap:n$46.previousValuesMap,isTaskProperty:r$34?.isTaskProperty,remainingTaskIds:a$30?.remainingTaskIds,customFieldConfig:a$30?.customFieldConfig,taskPropertyConfig:a$30?.taskPropertyConfig,taskPropertyId:a$30?.taskPropertyId});})),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`ai_custom_fields_async_effects`,`run`),e$19;}displayJobCompletionToast({fieldId:e$19,updatedTasks:r$34,failedTasks:o$32,historyIds:s$25,previousValuesMap:n$46,isTaskProperty:a$30,remainingTaskIds:c$37,customFieldConfig:m$32,taskPropertyConfig:l$26,taskPropertyId:g$19}){this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),this.aiFieldsGenerateValuesToastService.displayToastWithDetails({fieldId:e$19,updatedTasks:r$34,failedTasks:o$32,historyIds:s$25,previousValuesMap:n$46,isTaskProperty:a$30,remainingTaskIds:c$37,customFieldConfig:m$32,taskPropertyConfig:l$26,taskPropertyId:g$19});}handleJobCompletion(e$19,r$34,o$32){return e$19.pipe(oe$13(({isQueueCompleted:s$25})=>s$25),Mu(()=>this.customFieldsSplitService.aiCustomFieldConfig$.pipe(q$20(s$25=>s$25.useWebsocketsForJobStatus))),oe$13(([s$25,n$46])=>!n$46),Is$1(([{fieldId:s$25,taskIds:n$46},a$30])=>{this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),r$34===`displaySuccessToast`&&this.aiFieldsGenerateValuesToastService.displaySuccessToast(s$25,o$32?.historyIds||{},o$32?.previousValuesMap||{}),r$34===`displayErrorToast`&&this.aiFieldsGenerateValuesToastService.displayErrorToast({fieldId:s$25,historyIds:o$32?.historyIds||{},previousValuesMap:o$32?.previousValuesMap||{},errors:o$32?.errors||{},taskIds:n$46||o$32?.taskIds||[]});}),q$20(([s$25])=>s$25));}createAndFetchJobs(e$19){let{fieldId:r$34,taskIds:o$32,customFieldConfig:s$25,groupId:n$46,taskPropertyConfig:a$30,taskPropertyId:c$37}=e$19;return $i([this.aiFieldsBulkUpdateService.updateCustomFieldsForTasksAsync(r$34,o$32,s$25),this.store.select(o$30)]).pipe(Is$1(([{jobIds:m$32}])=>y_(m$32)),Z$12(([{jobIds:m$32,remainingTaskIds:l$26},g$19])=>this.aiAsyncJobsResource.fetchCustomFieldJobs(g$19,m$32,[[n$34.Load,`ai-custom-fields-create-and-fetch-jobs`]]).pipe(q$20(f$33=>({jobs:em$1(r$34,f$33,n$46),remainingTaskIds:l$26,customFieldConfig:s$25,taskPropertyConfig:a$30,taskPropertyId:c$37})))),Is$1(()=>this.aiFieldsSegmentTrackerService.trackAiFieldGenerationEvent(e$19)),Xo$2(m$32=>(this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),Xc$2({error:m$32,action:e$19,contentAssistantQuotaRunOutLoader:this.contentAssistantQuotaRunOutLoader,toastService:this.aiFieldsGenerateValuesToastService,historyIds:{},previousValuesMap:{}}).pipe(q$20(()=>({jobs:[],remainingTaskIds:[]}))))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();dm();VN();Y7=(()=>{class t$21{constructor(){this.clickUpEndpointService=C$23(x$15),this.contentAssistantFetchEventSourceService=C$23(at$2),this.http=C$23(ve$7);}backfill(e$19,r$34,o$32){let s$25=`${this.clickUpEndpointService.fieldV3BaseUrl}/experience/workspaces/${e$19}/ai/backfill`,n$46=Number(o$32.id),a$30=HK(o$32.type)??``;return this.contentAssistantFetchEventSourceService.fetchEventSource({type:`backfillCustomFields`,payload:{fieldId:r$34,parentId:n$46,parentType:a$30},url:s$25}).pipe(oe$13(c$37=>c$37.data.status!==`header`));}backfillAsync(e$19,r$34,o$32){let s$25=Number(o$32.id),n$46=HK(o$32.type)??``;return this.http.post(`${this.clickUpEndpointService.fieldV3BaseUrl}/experience/workspaces/${e$19}/ai/backfill`,{fieldId:r$34,parentId:s$25,parentType:n$46});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();VN();n$24(`custom_fields_store_module`,`ai_custom_fields_backfill_effects`,`load`);X7=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.actions$=C$23(Le$4),this.aiCustomFieldsBackfillResource=C$23(Y7),this.aiFieldsGenerateValuesToastService=C$23(xs$3),this.contentAssistantQuotaRunOutLoader=C$23(j$10),this.asyncAiJobsService=C$23(Zc),this.aiAsyncJobsResource=C$23($$3),this.aiFieldsSegmentTrackerService=C$23(se$1),this.backfillStarted$=Ke$1(()=>this.actions$.pipe(Ye$2(Yo),oe$13(({isTaskProperty:e$19})=>!e$19),Mu(()=>[this.store.select(o$30)]),Is$1(([{displayToast:e$19,fieldId:r$34,isTaskProperty:o$32}])=>{e$19&&this.aiFieldsGenerateValuesToastService.displayGeneratingValuesToast(r$34,!!o$32,!1);}),le$5(([e$19,r$34])=>this.backFillValues(r$34,e$19)))),this.backfillAsyncStarted$=Ke$1(()=>this.actions$.pipe(Ye$2(Qo$2),oe$13(({isTaskProperty:e$19})=>!e$19),Mu(()=>[this.store.select(o$30)]),Is$1(([{fieldId:e$19,displayToast:r$34,isTaskProperty:o$32}])=>{r$34&&this.aiFieldsGenerateValuesToastService.displayGeneratingValuesToast(e$19,!!o$32,!0);}),le$5(([e$19,r$34])=>this.backfillValuesAsync(r$34,e$19))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`ai_custom_fields_backfill_effects`,`run`),e$19;}backFillValues(e$19,r$34){return this.aiCustomFieldsBackfillResource.backfill(e$19,r$34.fieldId,r$34.entity).pipe(oe$13(o$32=>o$32.data.status!==`header`),q$20(o$32=>Gp({action:r$34,event:o$32,historyIds:{},previousValuesMap:{},errors:{},field:r$34.customField})),Xo$2(o$32=>th(o$32,this.contentAssistantQuotaRunOutLoader)),gs(this.aiFieldsGenerateValuesToastService.cancelGeneratingValues$));}backfillValuesAsync(e$19,r$34){return this.aiCustomFieldsBackfillResource.backfillAsync(e$19,r$34.fieldId,r$34.entity).pipe(Z$12(({jobIds:o$32})=>this.aiAsyncJobsResource.fetchCustomFieldJobs(e$19,o$32,[[n$34.Load,`ai-custom-fields-backfill`]])),q$20(o$32=>em$1(r$34.fieldId,o$32)),Is$1(o$32=>{this.asyncAiJobsService.watchJobs(o$32[0].fieldId,o$32.map(s$25=>s$25.id),!1),this.aiFieldsSegmentTrackerService.trackAiFieldGenerationEvent(r$34,v_(o$32));}),Z$12(o$32=>o$32.map(s$25=>ir({fieldId:s$25.fieldId,taskIds:s$25.taskIds,jobId:s$25.id,isBackfilling:!0,executionBatchId:s$25.executionBatchId}))),Xo$2(o$32=>(this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),th(o$32,this.contentAssistantQuotaRunOutLoader))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();Ee$4();VN();n$24(`custom_fields_store_module`,`ai_field_values_generation_effects`,`load`);eX=(()=>{class t$21{constructor(){this.websocketV2Service=C$23(G$9),this.customFieldsSplitService=C$23(Be$1),this.actions$=C$23(Le$4),this.store=C$23(q$19),this.handleAsyncAiJobMessage$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.AsyncAiJobMessage).pipe(Mu(({payload:{job_id:e$19}})=>[this.store.select(q$4(e$19)),this.store.select(o$30)]),oe$13(([{payload:{workspace_id:e$19}},r$34,o$32])=>!!r$34&&`${e$19}`===o$32),Z$12(([{payload:{events:e$19,job_id:r$34}}])=>{let o$32=Z7(e$19),s$25=this.processErrorInfoEvents(o$32.errorInfoEvents,r$34),n$46=this.processValueCalculatedEvents(o$32.valueCalculatedEvents,r$34),a$30=this.processJobCompletedEvents(o$32.jobCompletedEvents,r$34),c$37=[...s$25,...n$46];return a$30.length>0?this.customFieldsSplitService.asyncAiJobsConfig$.pipe(Ve$4(1),le$5(m$32=>{let l$26=m$32.delayHidingPlaceholderMs??2e3;return Hi$2(qe$6(c$37).pipe(we$4()),he$6(l$26).pipe(Z$12(()=>a$30)));})):c$37;}))),this.generateAIFieldValuesForTasksJobCreated$=Ke$1(()=>this.actions$.pipe(Ye$2(ir),Mu(({taskIds:e$19})=>this.store.select($o$1(e$19))),q$20(([{fieldId:e$19,jobId:r$34,isTaskProperty:o$32},s$25])=>o$32?mr$1({jobId:r$34,previousValuesMap:S_(s$25,e$19)}):mr$1({jobId:r$34,previousValuesMap:f_(s$25,e$19)}))));}ngrxOnRunEffects(e$19){return this.websocketV2Service.enableMessage(t$17.AsyncAiJobMessage),n$24(`custom_fields_store_module`,`ai_field_values_generation_effects`,`run`),e$19;}processErrorInfoEvents(e$19,r$34){return e$19.map(o$32=>Xo({taskId:o$32.taskId,jobId:r$34,value:o$32.message}));}processValueCalculatedEvents(e$19,r$34){return e$19.map(o$32=>cr$2({jobId:r$34,historyIds:o$32?.taskId?{[o$32.taskId]:o$32?.historyIds??[]}:{}}));}processJobCompletedEvents(e$19,r$34){return e$19.map(o$32=>dr$1({jobId:r$34,failedTasks:o$32?.failedTasks??0,updatedTasks:o$32?.updatedTasks??0}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();Ee$4();VN();n$24(`custom_fields_store_module`,`ai_fields_shared_effects`,`load`);tX=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.aiAsyncJobsResource=C$23($$3),this.store=C$23(q$19),this.destroyRef=C$23(at$11),this.cancelAICustomFieldsJobs$=Ke$1(()=>this.actions$.pipe(Ye$2(hr$1),Mu(({fieldId:e$19})=>[this.store.select(o$30),this.store.select(xe$1(e$19))]),Z$12(([{isTaskProperty:e$19,fieldId:r$34},o$32,s$25])=>{let n$46=a$30=>(e$19?this.aiAsyncJobsResource.cancelTaskPropertiesJobs(o$32,a$30):this.aiAsyncJobsResource.cancelCustomFieldJobs(o$32,a$30)).pipe(Xo$2(()=>qe$6({cancelledJobIds:[],alreadyFinishedJobIds:[],cancellationFailedJobIds:[]})));return s$25.length===0?he$6(1e3).pipe(Z$12(()=>this.store.select(xe$1(r$34)).pipe(Ve$4(1),F$22(this.destroyRef))),Z$12(n$46)):n$46(s$25);}),q$20(e$19=>pr$1({jobIds:e$19.cancelledJobIds.concat(e$19.alreadyFinishedJobIds).concat(e$19.cancellationFailedJobIds)}))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`ai_fields_shared_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();b_={priority:`priority`,assignee:`assignee`,type:`type`,customItems:`type`};VN();dm();VN();C_=(()=>{class t$21{constructor(){this.http=C$23(ve$7),this.clickUpEndpointService=C$23(x$15);}createTaskProperty(e$19,r$34){return this.http.post(`${this.clickUpEndpointService.taskV3BaseUrl}/core/${e$19}/tasks/properties`,{propertyType:r$34.field,config:{ai:{source:r$34.field,opts:r$34.config}},parentId:Number(r$34.entity.id),parentType:o$12(r$34.entity.type)}).pipe(q$20(rX));}getTaskProperties(e$19,r$34,o$32){let s$25=r$34,n$46=o$12(o$32);return this.http.get(`${this.clickUpEndpointService.taskV3BaseUrl}/core/${e$19}/tasks/properties?parentId=${s$25}&parentType=${n$46}`).pipe(q$20(a$30=>iX(a$30,r$34,o$32)));}updateTaskProperty(e$19,r$34,o$32){return this.http.put(`${this.clickUpEndpointService.taskV3BaseUrl}/core/${e$19}/tasks/properties/${r$34}`,{config:{ai:{source:o$32.field,opts:o$32.config}}});}deleteTaskProperty(e$19,r$34,o$32){return this.http.delete(`${this.clickUpEndpointService.taskV3BaseUrl}/core/${e$19}/tasks/properties/${r$34}/parents/${o$12(o$32.type)}/${o$32.id}`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();n$24(`custom_fields_store_module`,`ai_task_properties_effects`,`load`);sX=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.aiFieldsBulkUpdateService=C$23(W$4),this.aiFieldsGenerateValuesToastService=C$23(xs$3),this.contentAssistantQuotaRunOutLoader=C$23(j$10),this.aiFieldsSegmentTrackerService=C$23(se$1),this.customFieldsSplitService=C$23(Be$1),this.aiTaskPropertiesResource=C$23(C_),this.generateAITaskPropertiesForDisplayedTasksInChunks$=Ke$1(()=>this.actions$.pipe(Ye$2(zo$2),oe$13(({isTaskProperty:e$19})=>!!e$19),Is$1(({fieldId:e$19,isTaskProperty:r$34})=>{this.aiFieldsGenerateValuesToastService.displayGeneratingValuesToast(e$19,!!r$34,!1,b_[e$19]??e$19);}),Mu(({taskIds:e$19})=>[this.store.select($o$1(e$19))]),le$5(([e$19,r$34])=>this.updateTaskProperties(e$19,r$34)))),this.fetchAiTaskProperties$=Ke$1(()=>this.actions$.pipe(Ye$2(se$2),Mu(()=>[this.store.select(o$30),this.customFieldsSplitService.isFillTaskPropertiesWithAiEnabled$]),oe$13(([,,e$19])=>!!e$19),Z$12(([{entityId:e$19,entityType:r$34},o$32])=>this.aiTaskPropertiesResource.getTaskProperties(o$32,e$19,r$34).pipe(q$20(s$25=>W$5({taskProperties:s$25,entityId:e$19,entityType:r$34})),Xo$2(()=>qe$6(z$7({entityId:e$19,entityType:r$34}))))))),this.updateAITaskPropertyValueInStore$=Ke$1(()=>this.actions$.pipe(Ye$2(Zo),oe$13(({isTaskProperty:e$19})=>!!e$19),Mu(({taskId:e$19,jobId:r$34})=>[this.store.select(Fe$1(e$19,r$34)),this.store.select($o$1([e$19])),r$34===`assignee`?this.store.select(uu$1):qe$6([])]),oe$13(([,,e$19])=>e$19.length>0),q$20(([{jobId:e$19},r$34,o$32,s$25])=>new x$21([oX(o$32[0],e$19,r$34,{users:s$25})]))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`ai_task_properties_effects`,`run`),e$19;}updateTaskProperties(e$19,r$34){let{fieldId:o$32,taskIds:s$25,taskPropertyId:n$46,taskPropertyConfig:a$30}=e$19,c$37={},m$32={},l$26=S_(r$34,o$32),g$19=!0,f$33=!1;return this.aiFieldsBulkUpdateService.updatePropertiesForTasks(o$32,s$25,n$46,a$30).pipe(Is$1(({data:h$15})=>{h$15.taskId&&h$15.historyIds?.length&&(c$37[h$15.taskId]=h$15.historyIds),h$15.taskId&&h$15.status===`error`&&h$15.error&&(m$32[h$15.taskId]=h$15.error),g$19&&(this.aiFieldsSegmentTrackerService.trackAiFieldGenerationEvent(e$19),g$19=!1),f$33||(f$33=!!h$15.taskId);}),Is$1(({data:h$15})=>{if(h$15.status===`finished`&&!h$15.taskId&&!f$33)throw new Error();}),q$20(h$15=>Gp({action:e$19,event:h$15,historyIds:c$37,previousValuesMap:l$26,errors:m$32,field:{}})),Xo$2(h$15=>(this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),Xc$2({error:h$15,action:e$19,contentAssistantQuotaRunOutLoader:this.contentAssistantQuotaRunOutLoader,toastService:this.aiFieldsGenerateValuesToastService,historyIds:c$37,previousValuesMap:{}}))),gs(this.aiFieldsGenerateValuesToastService.cancelGeneratingValues$));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();n$24(`custom_fields_store_module`,`ai_task_properties_async_effects`,`load`);nX=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.aiFieldsBulkUpdateService=C$23(W$4),this.contentAssistantQuotaRunOutLoader=C$23(j$10),this.aiFieldsGenerateValuesToastService=C$23(xs$3),this.aiAsyncJobsResource=C$23($$3),this.store=C$23(q$19),this.asyncAiJobsService=C$23(Zc),this.aiFieldsSegmentTrackerService=C$23(se$1),this.generateAITaskPropertiesForTasksAsync$=Ke$1(()=>this.actions$.pipe(Ye$2(sr$1),oe$13(({isTaskProperty:e$19})=>!!e$19),Is$1(({fieldId:e$19,isTaskProperty:r$34})=>{this.aiFieldsGenerateValuesToastService.displayGeneratingValuesToast(e$19,!!r$34,!0,b_[e$19]??e$19);}),Z$12(e$19=>this.createAndFetchJobs(e$19)),Is$1(e$19=>{e$19.jobs.length>0&&this.asyncAiJobsService.watchJobs(e$19.jobs[0].fieldId,e$19.jobs.map(r$34=>r$34.id),!0);}),le$5(e$19=>e$19.jobs.map(r$34=>ir({fieldId:r$34.fieldId,taskIds:r$34.taskIds,jobId:r$34.id,isBackfilling:!1,groupId:r$34.groupId,isTaskProperty:!0,executionBatchId:r$34.executionBatchId,remainingTaskIds:e$19.remainingTaskIds,customFieldConfig:e$19.customFieldConfig,taskPropertyConfig:e$19.taskPropertyConfig,taskPropertyId:e$19.taskPropertyId})))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`ai_task_properties_async_effects`,`run`),e$19;}createAndFetchJobs(e$19){let{fieldId:r$34,taskIds:o$32,groupId:s$25,taskPropertyConfig:n$46,taskPropertyId:a$30,customFieldConfig:c$37}=e$19;return $i([this.aiFieldsBulkUpdateService.updatePropertiesForTasksAsync(r$34,o$32,a$30,n$46),this.store.select(o$30)]).pipe(Is$1(([{jobIds:m$32}])=>y_(m$32)),Z$12(([{jobIds:m$32,remainingTaskIds:l$26},g$19])=>this.aiAsyncJobsResource.fetchTaskPropertiesJobs(g$19,m$32,[[n$34.Load,`ai-task-properties-create-and-fetch-jobs`]]).pipe(q$20(f$33=>({jobs:em$1(r$34,f$33,s$25),remainingTaskIds:l$26,customFieldConfig:c$37,taskPropertyConfig:n$46,taskPropertyId:a$30})))),Is$1(()=>this.aiFieldsSegmentTrackerService.trackAiFieldGenerationEvent(e$19)),Xo$2(m$32=>(this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),Xc$2({error:m$32,action:e$19,contentAssistantQuotaRunOutLoader:this.contentAssistantQuotaRunOutLoader,toastService:this.aiFieldsGenerateValuesToastService,historyIds:{},previousValuesMap:{}}).pipe(q$20(()=>({jobs:[],remainingTaskIds:[]}))))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();VN();aX=(()=>{class t$21{constructor(){this.clickUpEndpointService=C$23(x$15),this.http=C$23(ve$7);}backfillAsync(e$19,r$34,o$32,s$25){let n$46=Number(o$32.id),a$30=HK(o$32.type)??``;return this.http.post(`${this.clickUpEndpointService.taskV3BaseUrl}/experience/${e$19}/tasks/ai/backfill`,{parentId:n$46,parentType:a$30,commands:[{source:r$34,opts:s$25}]});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();n$24(`custom_fields_store_module`,`ai_task_properties_backfill_effects`,`load`);cX=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.actions$=C$23(Le$4),this.aiTaskPropertiesBackfillResource=C$23(aX),this.aiFieldsGenerateValuesToastService=C$23(xs$3),this.contentAssistantQuotaRunOutLoader=C$23(j$10),this.asyncAiJobsService=C$23(Zc),this.aiAsyncJobsResource=C$23($$3),this.aiFieldsSegmentTrackerService=C$23(se$1),this.backfillAsyncStarted$=Ke$1(()=>this.actions$.pipe(Ye$2(Qo$2),oe$13(({isTaskProperty:e$19})=>!!e$19),Mu(()=>[this.store.select(o$30)]),Is$1(([{fieldId:e$19,displayToast:r$34,isTaskProperty:o$32}])=>{r$34&&this.aiFieldsGenerateValuesToastService.displayGeneratingValuesToast(e$19,!!o$32,!0,e$19);}),le$5(([e$19,r$34])=>this.backfillValuesAsync(r$34,e$19))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`ai_task_properties_backfill_effects`,`run`),e$19;}backfillValuesAsync(e$19,r$34){return this.aiTaskPropertiesBackfillResource.backfillAsync(e$19,r$34.fieldId,r$34.entity,r$34.taskPropertyConfig).pipe(Is$1(({jobIds:o$32})=>{o$32.length===0&&(this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),this.aiFieldsGenerateValuesToastService.displaySuccessToast(r$34.fieldId,{},{}));}),oe$13(({jobIds:o$32})=>o$32.length>0),Z$12(({jobIds:o$32})=>this.aiAsyncJobsResource.fetchTaskPropertiesJobs(e$19,o$32,[[n$34.Load,`ai-task-properties-backfill`]])),q$20(o$32=>em$1(r$34.fieldId,o$32)),Is$1(o$32=>{this.asyncAiJobsService.watchJobs(o$32[0].fieldId,o$32.map(s$25=>s$25.id),!0),this.aiFieldsSegmentTrackerService.trackAiFieldGenerationEvent(r$34,v_(o$32));}),Z$12(o$32=>o$32.map(s$25=>ir({fieldId:s$25.fieldId,taskIds:s$25.taskIds,jobId:s$25.id,isBackfilling:!0,isTaskProperty:!0,executionBatchId:s$25.executionBatchId}))),Xo$2(o$32=>(this.aiFieldsGenerateValuesToastService.removeGeneratingValuesToast(),th(o$32,this.contentAssistantQuotaRunOutLoader))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();U$18();mX=[{actionType:D$4,triggerType:`task_created`,automateFlag:`automateUpdatesOnTaskCreate`},{actionType:Ae,triggerType:`task_created`,automateFlag:`automateUpdatesOnTaskCreate`},{actionType:de$3,triggerType:`task_created`,automateFlag:`automateUpdatesOnTaskCreate`},{actionType:D$4,triggerType:`task_updated`,automateFlag:`automateUpdatesOnTaskUpdate`},{actionType:Ae,triggerType:`task_updated`,automateFlag:`automateUpdatesOnTaskUpdate`},{actionType:le$2,triggerType:`task_updated`,automateFlag:`automateUpdatesOnTaskUpdate`}];lX={task_created:E$5,task_updated:C$3};dX=(t$21,i$27)=>({active:!0,trigger:{type:i$27,resource:`task`,conditions:[{after:lX[i$27]}],input:{trigger_on:`ALL`}},actions:[{type:`ai_task_property`,resource:`task`,input:{task_property_id:t$21.taskPropertyId},mapped_input:{},interpolated_input:{}}]});VN();n$24(`custom_fields_store_module`,`ai_task_property_automations_effects`,`load`);pX=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.aiTaskPropertiesService=C$23(Ye),this.aiCustomFieldsAutomationToastService=C$23(P$4),this.automationConfigs=mX,this.addAutomationOnTaskCreate$=Ke$1(()=>this.createAddAutomationEffect(`task_created`,`automateUpdatesOnTaskCreate`)),this.addAutomationOnTaskUpdate$=Ke$1(()=>this.createAddAutomationEffect(`task_updated`,`automateUpdatesOnTaskUpdate`)),this.disableAutomationOnTaskCreateWhenUpdatingConfig$=Ke$1(()=>this.createDisableAutomationWhenUpdatingEffect(`task_created`,`automateUpdatesOnTaskCreate`)),this.disableAutomationOnTaskUpdateWhenUpdatingConfig$=Ke$1(()=>this.createDisableAutomationWhenUpdatingEffect(`task_updated`,`automateUpdatesOnTaskUpdate`)),this.disableAutomationOnTaskCreateWhenDeletingConfig$=Ke$1(()=>this.createDisableAutomationWhenDeletingEffect(`task_created`)),this.disableAutomationOnTaskUpdateWhenDeletingConfig$=Ke$1(()=>this.createDisableAutomationWhenDeletingEffect(`task_updated`));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`ai_task_property_automations_effects`,`run`),e$19;}createAddAutomationEffect(e$19,r$34){let o$32=this.automationConfigs.filter(s$25=>s$25.triggerType===e$19&&s$25.automateFlag===r$34);return this.actions$.pipe(Ye$2(...o$32.map(s$25=>s$25.actionType)),oe$13(s$25=>{let n$46=s$25.taskProperty,a$30=s$25[r$34];return n$46.parentType===d$25.Subcategory&&!!a$30;}),Mu(({taskProperty:s$25})=>this.findExistingAutomation(s$25.propertyType,e$19)),Rr(([{taskProperty:s$25},n$46])=>this.getAutomationActions(s$25,e$19,n$46)));}createDisableAutomationWhenUpdatingEffect(e$19,r$34){return this.actions$.pipe(Ye$2(Ae),Mu(({taskProperty:o$32})=>this.findExistingAutomation(o$32.propertyType,e$19)),oe$13(([o$32,s$25])=>!o$32[r$34]&&!!s$25),q$20(([{taskProperty:o$32},s$25])=>this.getUpdateAutomationAction(s$25,o$32,!1)),oe$13(o$32=>o$32!==void 0));}createDisableAutomationWhenDeletingEffect(e$19){return this.actions$.pipe(Ye$2(B$4),Mu(({taskProperty:r$34})=>this.findExistingAutomation(r$34.propertyType,e$19)),oe$13(([,r$34])=>!!r$34),q$20(([{taskProperty:r$34},o$32])=>this.getUpdateAutomationAction(o$32,r$34,!1)),oe$13(r$34=>r$34!==void 0));}getAutomationActions(e$19,r$34,o$32){let s$25=[];if(o$32){let n$46=this.getUpdateAutomationAction(o$32,e$19,!0);n$46&&s$25.push(n$46);}else{let n$46=new M$22(),a$30={id:String(e$19.parentId),type:e$19.parentType};this.actions$.pipe(Ye$2(Q$6,tt),Ve$4(1),gs(n$46)).subscribe(c$37=>{n$46.next(),n$46.complete(),c$37.type===Q$6.type&&this.aiCustomFieldsAutomationToastService.showAutomationCreatedToastForTaskProperty(e$19.propertyType,c$37.automation.id,c$37.parent.id,c$37.parent.type);}),s$25.push(J$6({payload:dX(e$19,r$34),parent:a$30}));}return s$25;}findExistingAutomation(e$19,r$34){return this.aiTaskPropertiesService.findCurrentViewsAiTaskPropertyAutomationOnField(e$19,r$34,!1);}getUpdateAutomationAction(e$19,r$34,o$32){if(e$19?.id)return ot$1({automationId:e$19.id,changes:{active:o$32},parent:{id:r$34.parentId.toString(),type:r$34.parentType}});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();VN();uX=(()=>{class t$21{constructor(){this.store=C$23(q$19);}backfill(e$19,r$34,o$32,s$25=!0){this.store.dispatch(Qo$2({fieldId:e$19,entity:r$34,displayToast:s$25,isTaskProperty:!0,taskPropertyConfig:o$32,trackingProperties:{via:`automatic agent menu`,isBulkUpdate:!0}}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();n$24(`custom_fields_store_module`,`ai_task_property_config_effects`,`load`);fX=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.aiTaskPropertiesResource=C$23(C_),this.aiTaskPropertiesBackfillService=C$23(uX),this.segmentService=C$23(_b$1),this.createAiTaskPropertyConfig$=Ke$1(()=>this.actions$.pipe(Ye$2(ne$2),Mu(()=>[this.store.select(o$30)]),Is$1(([e$19])=>{this.trackEventsOnAiTaskPropertyConfigCreation(e$19);}),Z$12(([{field:e$19,config:r$34,backfill:o$32,entity:s$25,automateUpdatesOnTaskCreate:n$46,automateUpdatesOnTaskUpdate:a$30},c$37])=>this.aiTaskPropertiesResource.createTaskProperty(c$37,{field:e$19,config:r$34,entity:s$25}).pipe(q$20(m$32=>D$4({taskProperty:m$32,backfill:o$32,entity:s$25,automateUpdatesOnTaskCreate:n$46,automateUpdatesOnTaskUpdate:a$30})),Xo$2(()=>qe$6(ce$2())))))),this.backfillValues$=Ke$1(()=>this.actions$.pipe(Ye$2(D$4),oe$13(({backfill:e$19})=>!!e$19),Is$1(({taskProperty:e$19,entity:r$34})=>this.aiTaskPropertiesBackfillService.backfill(e$19.propertyType,r$34,e$19.config,!0))),{dispatch:!1}),this.updateAiTaskPropertyConfig$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae),Mu(()=>[this.store.select(o$30)]),Is$1(([e$19])=>{this.trackEventsOnAiTaskPropertyConfigCreation({...e$19,isUpdate:!0});}),Z$12(([{taskProperty:e$19,config:r$34,entity:o$32,field:s$25},n$46])=>this.aiTaskPropertiesResource.updateTaskProperty(n$46,e$19.taskPropertyId,{field:s$25,config:r$34}).pipe(q$20(()=>K$2({config:r$34,entity:o$32,taskPropertyId:e$19.taskPropertyId})),Xo$2(()=>qe$6(ue$2())))))),this.deleteAiTaskPropertyConfig$=Ke$1(()=>this.actions$.pipe(Ye$2(Pe),Mu(()=>[this.store.select(o$30)]),Z$12(([{taskProperty:e$19,entity:r$34},o$32])=>this.aiTaskPropertiesResource.deleteTaskProperty(o$32,e$19.taskPropertyId,r$34).pipe(q$20(()=>B$4({taskProperty:e$19,entity:r$34})),Xo$2(()=>qe$6(ye$2()))))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`ai_task_property_config_effects`,`run`),e$19;}trackEventsOnAiTaskPropertyConfigCreation({field:e$19,automateUpdatesOnTaskCreate:r$34,automateUpdatesOnTaskUpdate:o$32,isUpdate:s$25,ailbSegment:n$46,ailbTreatment:a$30,ailbVia:c$37}){if(r$34||o$32){let m$32=e$3(e$19);this.segmentService.track(s$25?Bu.ModifyAutomation:Bu.CreateAutomation,{via:c$37||`automatic agent menu`,objectType:`list-properties`,fieldType:m$32,updateExistingTasks:!0,...(!!n$46&&{ailbSegment:n$46}),...(!!a$30&&{ailbTreatment:a$30})});}}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();Ee$4();VN();n$24(`custom_fields_store_module`,`custom_field_level_access_effects`,`load`);hX=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.customFieldBulkPermissionsManagerService=r$34,this.customFieldsSplitService=o$32,this.updateFieldLevelAccessFromOVM$=Ke$1(()=>this.actions$.pipe(Ye$2(ae$3),Qs$4(s$25=>s$25.fieldId,{duration:()=>he$6(6e4)}),Z$12(s$25=>s$25.pipe(Bt$7(()=>this.delayedFieldLevelPermissionsConfig$,{leading:!1,trailing:!0}),As$3(this.customFieldsSplitService.fieldLevelPermissionsConfig$),Lr$1(([,n$46])=>he$6(Math.random()*(n$46.permissionsFetchSpreadMaxMs||0))),Z$12(([{fieldId:n$46,messageType:a$30},c$37])=>this.customFieldBulkPermissionsManagerService.handleFieldLevelAccessChangeFromOVM({fieldId:n$46,flagConfig:c$37,messageType:a$30})))))),this.updateFieldVisibilityLevelFromOVM$=Ke$1(()=>this.actions$.pipe(Ye$2(fe$2),Qs$4(s$25=>s$25.fieldId,{duration:()=>he$6(6e4)}),Z$12(s$25=>s$25.pipe(Bt$7(()=>this.delayedFieldLevelPermissionsConfig$,{leading:!1,trailing:!0}),As$3(this.customFieldsSplitService.fieldLevelPermissionsConfig$),Lr$1(([,n$46])=>he$6(Math.random()*(n$46.permissionsFetchSpreadMaxMs||0))),Z$12(([{fieldId:n$46,messageType:a$30},c$37])=>this.customFieldBulkPermissionsManagerService.handleFieldVisibilityLevelChangeFromOVM({fieldId:n$46,flagConfig:c$37,messageType:a$30})))))),this.delayedFieldLevelPermissionsConfig$=this.customFieldsSplitService.fieldLevelPermissionsConfig$.pipe(Ve$4(1),le$5(({permissionsFetchFromOVMThrottleMs:s$25})=>we$3(s$25)));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`custom_field_level_access_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(ls),ge$10(Be$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();VN();gX=(()=>{class t$21{constructor(e$19,r$34){this.http=e$19,this.clickUpEndpointService=r$34;}getFieldMemberPermissions(e$19,r$34){return this.http.get(`${this.clickUpEndpointService.fieldV3BaseUrl}/experience/workspaces/${e$19}/field/${r$34}/members`);}getFieldPermissions(e$19,r$34,o$32){let s$25={};return o$32&&(s$25[n$34.Websocket]=`true`,s$25[n$34.Refresh]=o$32),this.http.post(`${this.clickUpEndpointService.fieldV3BaseUrl}/experience/workspaces/${e$19}/permissions`,{fieldIds:r$34},{headers:s$25});}shareFieldWithUser(e$19,r$34,o$32,s$25){return this.http.put(`${this.clickUpEndpointService.fieldV3BaseUrl}/experience/workspaces/${e$19}/field/${r$34}/member/user/${o$32}/${s$25}`,void 0);}shareFieldWithGroup(e$19,r$34,o$32,s$25){return this.http.put(`${this.clickUpEndpointService.fieldV3BaseUrl}/experience/workspaces/${e$19}/field/${r$34}/member/group/${o$32}/${s$25}`,void 0);}removeUserFromField(e$19,r$34,o$32){return this.http.delete(`${this.clickUpEndpointService.fieldV3BaseUrl}/experience/workspaces/${e$19}/field/${r$34}/member/user/${o$32}/`);}removeGroupFromField(e$19,r$34,o$32){return this.http.delete(`${this.clickUpEndpointService.fieldV3BaseUrl}/experience/workspaces/${e$19}/field/${r$34}/member/group/${o$32}`);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(ve$7),ge$10(x$15));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();n$24(`custom_fields_store_module`,`custom_field_permissions_effects`,`load`);yX=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.fieldPermissionsService=o$32,this.fieldsEntitlementsService=s$25,this.getCustomFieldMemberPermissions$=Ke$1(()=>this.actions$.pipe(Ye$2(ie$2),Mu(()=>[this.store.select(o$30)]),le$5(([{fieldId:n$46},a$30])=>this.fieldPermissionsService.getFieldMemberPermissions(a$30,n$46).pipe(q$20(c$37=>M$9({fieldId:n$46,data:c$37})),Xo$2(()=>qe$6(me$2({fieldId:n$46}))))))),this.getCustomFieldPermissions$=Ke$1(()=>this.actions$.pipe(Ye$2(p$16),Mu(()=>[this.store.select(o$30),this.fieldsEntitlementsService.allowOpenFieldLevelPermissionsPaywall()]),le$5(([{fields:n$46,messageType:a$30},c$37,m$32])=>m$32?qe$6(x$12({data:{},fields:n$46})):this.fieldPermissionsService.getFieldPermissions(c$37,n$46,a$30).pipe(q$20(l$26=>x$12({data:l$26,fields:n$46})),Xo$2(()=>qe$6(F$11({fields:n$46}))))))),this.setCustomFieldPermissionsFull$=Ke$1(()=>this.actions$.pipe(Ye$2(i$21),oe$13(({optimisticallySetPermissions:n$46})=>!!n$46),q$20(({field:n$46})=>K$6({fields:[n$46.id]})))),this.shareCustomFieldWithUser$=Ke$1(()=>this.actions$.pipe(Ye$2(g$10),Mu(()=>[this.store.select(o$30)]),Z$12(([{fieldId:n$46,userId:a$30,permissionLevel:c$37},m$32])=>this.fieldPermissionsService.shareFieldWithUser(m$32,n$46,a$30,c$37).pipe(q$20(()=>ue$4({userId:a$30,fieldId:n$46,permissionLevel:c$37})),Xo$2(()=>qe$6(ne$3({fieldId:n$46,userId:a$30}))))))),this.removeUserFromCustomField$=Ke$1(()=>this.actions$.pipe(Ye$2(S$8),Mu(()=>[this.store.select(o$30)]),Z$12(([{fieldId:n$46,userId:a$30},c$37])=>this.fieldPermissionsService.removeUserFromField(c$37,n$46,a$30).pipe(q$20(()=>de$6({userId:a$30,fieldId:n$46})),Xo$2(()=>qe$6(Fe$3({fieldId:n$46,userId:a$30}))))))),this.shareCustomFieldWithGroup$=Ke$1(()=>this.actions$.pipe(Ye$2(v$11),Mu(()=>[this.store.select(o$30)]),Z$12(([{fieldId:n$46,groupId:a$30,permissionLevel:c$37},m$32])=>this.fieldPermissionsService.shareFieldWithGroup(m$32,n$46,a$30,c$37).pipe(q$20(()=>le$3({groupId:a$30,fieldId:n$46,permissionLevel:c$37})),Xo$2(()=>qe$6(ce$3({fieldId:n$46,groupId:a$30}))))))),this.removeGroupFromCustomField$=Ke$1(()=>this.actions$.pipe(Ye$2(P$8),Mu(()=>[this.store.select(o$30)]),Z$12(([{fieldId:n$46,groupId:a$30},c$37])=>this.fieldPermissionsService.removeGroupFromField(c$37,n$46,a$30).pipe(q$20(()=>pe({groupId:a$30,fieldId:n$46})),Xo$2(()=>qe$6(Ce$2({fieldId:n$46,groupId:a$30})))))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`custom_field_permissions_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(gX),ge$10(G$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();qw=function(t$21){return t$21.ListViewOpen=`listViewOpen`,t$21;}(qw||{});dm();VN();n$24(`custom_fields_store_module`,`suggested_list_columns_effects`,`load`);SX=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.actions$=e$19,this.store=r$34,this.customFieldsSplitService=o$32,this.suggestedListColumnsService=s$25,this.listViewFacade=n$46,this.NUM_TASKS_TO_GENERATE_SUGGESTIONS=3,this.recordListViewNavigation$=Ke$1(()=>this.actions$.pipe(Ye$2(o$15),Mu(()=>this.customFieldsSplitService.isSuggestedListColumnsEnabled$),oe$13(([,a$30])=>a$30),Rr(([a$30])=>$i([this.listViewFacade.getTaskIds$,this.listViewFacade.getAnyLoading$]).pipe(oe$13(([,c$37])=>!c$37),Ve$4(1),q$20(([c$37])=>({action:a$30,taskIds:c$37.slice(0,this.NUM_TASKS_TO_GENERATE_SUGGESTIONS)})))),Mu(()=>[this.store.select(m$8),this.customFieldsSplitService.suggestedListColumnsConfig$]),oe$13(([,a$30,c$37])=>vX(a$30,c$37)),q$20(([{action:a$30,taskIds:c$37}])=>c$8({viewId:a$30.viewId,taskIds:c$37})))),this.fetchSuggestedListColumnsStart$=Ke$1(()=>this.actions$.pipe(Ye$2(c$8),Mu(()=>this.customFieldsSplitService.isSuggestedListColumnsEnabled$),oe$13(([,a$30])=>a$30),le$5(([{viewId:a$30,taskIds:c$37}])=>this.suggestedListColumnsService.getSuggestedListColumns({trigger:qw.ListViewOpen,viewId:a$30,taskIds:c$37}).pipe(q$20(m$32=>i$4({viewId:a$30,suggestions:m$32.suggestions})),Xo$2(m$32=>qe$6(g$6({viewId:a$30,error:m$32}))))))),this.acceptListColumnSuggestion$=Ke$1(()=>this.actions$.pipe(Ye$2(u$5),le$5(({suggestionId:a$30})=>this.suggestedListColumnsService.acceptSuggestion(a$30))),{dispatch:!1}),this.rejectListColumnSuggestion$=Ke$1(()=>this.actions$.pipe(Ye$2(l$6),le$5(({suggestionId:a$30})=>this.suggestedListColumnsService.rejectSuggestion(a$30))),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`suggested_list_columns_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Be$1),ge$10(v$4),ge$10(uo));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();hr$3();Ee$4();U$18();C$22();MX=(t$21,i$27,e$19)=>{if(!e$19.addNewOptionToTask||!e$19.task||!e$19.entity)return[];let r$34=w$22(),o$32={...i$27,type_config:{...i$27.type_config,options:i$27.type_config.options.map(s$25=>({...s$25,id:s$25.id??r$34}))}};return[a$23({field:{...t$21,...o$32},entity:e$19.entity,updates:o$32}),t$9({taskId:e$19.task.id,field:t$21,value:[...(t$21.value?t$21.value:[]),r$34],valueOptions:void 0,valueRichtext:void 0})];};dm();Tge=(t$21,i$27)=>{let e$19={};return i$27.select(tr$3(t$21)).pipe(q$20(r$34=>{if(!r$34?.length)return e$19;let o$32=[];for(let s$25 of r$34)s$25.subcategories&&o$32.push(...s$25.subcategories.map(n$46=>n$46.id));return{project:[t$21],category:r$34?.map(s$25=>s$25.id)||[],subcategory:o$32};}));},Ige=(t$21,i$27)=>{let e$19={};return i$27.select(Iu(t$21)).pipe(le$5(r$34=>r$34?.project_id?i$27.select(Tu(r$34.project_id,r$34.id)).pipe(q$20(o$32=>({category:[t$21],subcategory:o$32?.map(s$25=>s$25.id)||[]}))):qe$6(e$19)));};OX=(t$21,i$27)=>t$7(a$24.ListRelationship,t$21)&&t$7(a$24.ListRelationship,i$27)&&t$21?.inverted_field?i$27?.type_config?.field_inverted_name??``:i$27.name;DX=(t$21,i$27=[])=>t$21.map(({histItem:r$34})=>r$34).reverse().concat(i$27);NX=(t$21,i$27)=>t$21.customFieldValues?.some(({field_id:r$34})=>i$27.some(({id:o$32})=>o$32===r$34))?t$21.customFieldValues.map(r$34=>{let o$32=i$27.find(s$25=>s$25.id===r$34.field_id);return o$32?{...r$34,value:eh(o$32),value_richtext:o$32.value_richtext}:r$34;}):[...(t$21.customFieldValues??[]),...i$27.map(r$34=>{let{type:o$32,...s$25}=r$34;return{...s$25,field_id:s$25.id,value:eh(r$34)};})];BX=(t$21,i$27)=>t$21.customFields?.some(r$34=>i$27.map(o$32=>o$32.id).includes(r$34.id))?t$21.customFields.map(r$34=>i$27.find(o$32=>o$32.id===r$34.id)||r$34):[...(t$21.customFields||[]),...i$27];VX=(t$21,i$27)=>t$21.fields?.some(({field_id:r$34})=>i$27.some(({id:o$32})=>o$32===r$34))?t$21.fields.map(r$34=>{let o$32=i$27.find(s$25=>s$25.id===r$34.field_id);return o$32?{...r$34,value:o$32.type===a$24.Dropdown&&typeof o$32.value==`number`?o$32.type_config.options[o$32.value].id:o$32.value,options:o$32.value_options,value_richtext:o$32.value_richtext}:r$34;}):[...(t$21.fields??[]),...i$27.map(({type:r$34,...o$32})=>({field_id:o$32.id,value:o$32.value,options:o$32.value_options,value_richtext:o$32.value_richtext}))];VN();n$24(`custom_fields_store_module`,`custom_fields_effects`,`load`);GX=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19,f$33){this.action$=e$19,this.customFieldsService=r$34,this.store=o$32,this.taskService=s$25,this.websocketOvmService=n$46,this.websocketV2Service=a$30,this.customFieldsSplitService=c$37,this.toastService=m$32,this.locale=l$26,this.aiCustomFieldsBackfillService=g$19,this.taskUpdateWebsocketService=f$33,this.listViewInstanceId=C$23(T$11),this.websocketConfigService=C$23(E$11),this.destroyRef=C$23(at$11),this.customFieldsByTaskTypeEnabled$=C$23(ge$3).customFieldsByTaskTypeEnabled$,this.syntheticMarkerService=C$23(N$12),this.bulkRelationshipSuccessText=new mr$2("Added {count} {count, plural, =1 {task} other {tasks}} to task \"{taskName}\" in relationship \"{relationshipName}\"",this.locale),this.resetEntityAndAncestorFields$=Ke$1(()=>this.action$.pipe(Ye$2(ve$6),q$20(()=>ee$6()))),this.createEntityField$=Ke$1(()=>this.action$.pipe(Ye$2(s$21),Mu(()=>[this.store.select(Ge$4),this.customFieldsByTaskTypeEnabled$]),Z$12(([h$15,I$25,A$22])=>(this.updateLoading(`createField`,!0),this.customFieldsService.createEntityField({...h$15.field,[`${h$15.entity.type}_id`]:h$15.entity.id},h$15.ignoreExistingField).pipe(Is$1(R$21=>{h$15.fillExistingTasks&&h$15.entity&&this.aiCustomFieldsBackfillService.backfill(R$21,h$15.entity,!h$15.fromConvergedAutomationModal);}),le$5(R$21=>{let w$26=R$21;h$15.field.applied_objects?.length&&(w$26=$X(w$26,h$15.entity,h$15.field.applied_objects,A$22)),w$26.type===a$24.ListRelationship&&!w$26.linked_subcategory&&w$26.type_config&&`subcategory_id`in w$26.type_config&&w$26.type_config.subcategory_id&&(w$26={...w$26,linked_subcategory:w$26.type_config.subcategory_id});let E$16=[i$21({field:w$26,entity:h$15.entity,addColumn:h$15.addColumn,createAiFieldAutomationForUpdateAction:h$15.createAiFieldAutomationForUpdateAction,createAiFieldAutomationForCreateAction:h$15.createAiFieldAutomationForCreateAction,fillExistingTasks:h$15.fillExistingTasks,fromConvergedAutomationModal:h$15.fromConvergedAutomationModal,via:h$15.via,appliedObjects:h$15.field.applied_objects,optimisticallySetPermissions:!0})];return I$25.id!==h$15.entity.id&&E$16.push(T$18({entity:I$25})),j$23(E$16);}),Xo$2(R$21=>qe$6(R$21).pipe(oe$13(w$26=>!!(w$26.msg||w$26.err)),q$20(w$26=>d$16({error:{ECODE:``,...w$26,msg:(w$26.msg??``)||(w$26.err??``)}})))),cs(()=>{this.updateLoading(`createField`,!1);})))))),this.updateFormulaFieldFilters$=Ke$1(()=>this.action$.pipe(Ye$2(l$21),oe$13(h$15=>!!h$15.formula),Mu(()=>[this.store.select(b$10)]),le$5(([h$15,I$25])=>{let A$22=[],R$21=h$15.field.id,w$26=I$25?.filter.filters,E$16=w$26?.filter(P$20=>P$20.field!==`cf_${R$21}`);return I$25&&E$16?.length!==w$26?.length&&A$22.push(new at$9({...I$25?.filter,filters:E$16},I$25)),j$23(A$22);}))),this.updateEntityField$=Ke$1(()=>this.action$.pipe(Ye$2(l$21),le$5(h$15=>{let I$25={...h$15.updates};h$15.field.type===a$24.ListRelationship&&h$15.field.inverted_field&&I$25.name&&(I$25.type_config={...h$15.field.type_config,...(I$25.type_config||{}),field_inverted_name:I$25.name},delete I$25.name),(h$15.field.type===a$24.Dropdown||h$15.field.type===a$24.Labels)&&(I$25=be$1(h$15.field,I$25)),I$25.type_config?I$25.type_config=ce(h$15.field.type,{...(h$15.field.type_config?h$15.field.type_config:{}),...I$25.type_config}):h$15.field.type===a$24.Button&&delete h$15.field.type_config;let A$22={...h$15.field,...I$25},R$21=[n$37({customFieldsLoading:{updateField:!0}})];return A$22.type===a$24.Labels&&h$15.addNewOptionToTask?R$21.push(...MX(A$22,I$25,h$15)):h$15.skipOptimisticUpdate||R$21.push(a$23({field:A$22,entity:h$15.entity,updates:I$25})),ue$11(j$23(R$21),this.customFieldsService.updateEntityField(A$22,h$15.field,h$15.via,h$15.skipTracking).pipe(le$5(w$26=>{let E$16=[];if(E$16.push(c$27({field:{...w$26,name:OX(h$15.field,w$26)},entity:h$15.entity,reloadView:h$15.reloadView,updates:I$25})),typeof h$15.updates.position<`u`&&E$16.push(T$18({entity:h$15.entity})),h$15.addNewOptionToTask&&(w$26.type===a$24.Dropdown||w$26.type===a$24.Labels)&&h$15.task){let P$20=h$15.field?.value||[],B$22=kX(h$15,w$26);E$16.push(U$13({taskId:h$15.task.id,field:A$22,oldValue:A$22.value,value:w$26.type===a$24.Labels?[B$22,...P$20]:B$22,refreshViewTask:h$15.refreshTask,oldValueOptions:void 0,valueOptions:void 0,via:n$15.CreatedDropdownOrLabelOption})),w$26.type===a$24.Dropdown&&E$16.push(c$27({field:w$26,task:h$15.task,entity:h$15.entity,reloadView:h$15.reloadView,updates:I$25,value:B$22}));}else h$15.refreshTask&&h$15.task?E$16.push(new Se$6({taskId:{id:h$15.task.id}})):h$15.taskId&&h$15.refreshTask&&E$16.push(se$4({taskId:h$15.taskId,refresh:!0}));return E$16;}),Xo$2(w$26=>{let E$16=B$22=>!!(B$22.msg||B$22.err),P$20=[ee$7({item:{id:`customFieldsUpdateError`,layout:pe$5.ErrorMessage,title:"Something went wrong. Please try again"}})];return E$16(w$26)&&P$20.push(u$29({error:{ECODE:``,...w$26,msg:(w$26.msg||w$26.err)??``}})),qe$6(...P$20);}),cs(()=>{this.updateLoading(`updateField`,!1);})));}))),this.deleteEntityField$=Ke$1(()=>this.action$.pipe(Ye$2(F$17),Z$12(h$15=>(this.updateLoading(`deleteField`,!0),this.customFieldsService.deleteEntityField(h$15.fieldId,{entity:{type:h$15.entity.type,id:h$15.entity.id},all:h$15.all}).pipe(q$20(()=>r$30({...h$15,all:h$15.isLastVisibleLocation?!0:h$15.all,isRemovedFromCurrentLocation:h$15.isRemovedFromCurrentLocation})),cs(()=>{this.updateLoading(`deleteField`,!1);}))),10))),this.loadEntityFields$=Ke$1(()=>this.action$.pipe(Ye$2(T$18),Mu(()=>[this.store.select(c$35),this.store.select(Le$8),this.customFieldsSplitService.isLoadEntityAndDescendantCustomFields$]),Z$12(([h$15,I$25,A$22,R$21])=>I$25&&h$15.entity.type===`project`||h$15.entity.id===`-3`||A$22?z$18:(h$15.checkAccess&&h$15.entity.type===`subcategory`?this.store.select($t$2(h$15.entity.id)).pipe(q$20(E$16=>!!E$16),Ve$4(1)):qe$6(!0)).pipe(le$5(E$16=>E$16?this.customFieldsService.getEntityFields(h$15?.taskEntity?.type||h$15.entity.type,h$15?.taskEntity?.id||h$15.entity.id,!0,h$15.includeDescendants??R$21,h$15.forceRefresh):z$18),q$20(E$16=>f$26({fields:E$16.fields,entity:h$15.entity})),Xo$2(E$16=>qe$6(k$19({error:E$16}))))))),this.addFieldToLocation=Ke$1(()=>this.action$.pipe(Ye$2(B$15),ee$8({run:({fieldId:h$15,entity:I$25,fillExistingTasks:A$22,appliedObjects:R$21})=>this.customFieldsService.attachFieldToEntity(h$15,I$25.type,I$25.id,R$21).pipe(q$20(()=>M$16({fieldId:h$15,entity:I$25,fillExistingTasks:A$22,appliedObjects:R$21}))),onError:({fieldId:h$15,entity:I$25},A$22)=>R$16({fieldId:h$15,entity:I$25,error:A$22})}))),this.bulkUpdateFieldLocations$=Ke$1(()=>this.action$.pipe(Ye$2(W$17),Mu(h$15=>[this.store.select(o$30),this.store.select(G$8(h$15.fieldId))]),ee$8({run:({fieldId:h$15,entities:I$25,fillExistingTasks:A$22,appliedObjects:R$21,dataViewId:w$26,showToast:E$16,merge:P$20},B$22,G$16)=>{let v$22=P$20?PX(G$16,I$25,R$21):I$25;return this.customFieldsService.bulkUpdateFieldLocations(B$22,h$15,v$22,P$20?void 0:R$21).pipe(q$20(()=>{return N$14({fieldId:h$15,entities:I$25,fillExistingTasks:A$22,appliedObjects:R$21,dataViewId:w$26,showToast:E$16,field:LX(G$16,v$22,R$21)});}));},onError:({fieldId:h$15,entities:I$25},A$22)=>O$14({fieldId:h$15,entities:I$25,error:A$22})}))),this.createFieldFromWebsocket$=Ke$1(()=>this.action$.pipe(Ye$2(A$17),oe$13(h$15=>!!h$15.field),le$5(h$15=>_r$1.some(I$25=>I$25.type===h$15.field.type)?Jw(h$15.field).map(I$25=>i$21({field:h$15.field,entity:I$25})):z$18))),this.createFieldFromWebsocketOVM$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.FieldCreated).pipe(q$20(TX),Mu(()=>[this.customFieldsSplitService.fieldsImproveLiveRefreshStrategyEnabled$]),le$5(([h$15,I$25])=>!I$25&&h$15?.oldFieldIds?.length?qe$6(u$6(h$15)):I$25?qe$6(O$5(h$15)):z$18))),this.addFieldLocationFromWebsocketOVM$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.FieldLocationAdded).pipe(q$20(EX),q$20(C$4))),this.removeFieldLocationFromWebsocketOVM$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.FieldLocationRemoved).pipe(q$20(AX),q$20(m$10))),this.changeFieldLevelAccessFromWebsocketOVM$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.FieldLevelAccessChanged).pipe(q$20(IX),q$20(ae$3))),this.changeFieldVisibilityLevelFromWebsocketOVM$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.FieldVisibilityLevelChanged).pipe(q$20(wX),q$20(fe$2))),this.reloadTasksAfterFormulaCalculates$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.FormulaValueCalculated).pipe(Is$1(h$15=>{this.syntheticMarkerService.mark(`ngrx.effects.custom_fields.reload_tasks_after_formula_value_calculates.start`).addContext({entityId:t$5(h$15),client_trace:h$15.client_trace});}),Mu(()=>[this.store.select(b$10),this.store.select(te$4)]),oe$13(([h$15,I$25,A$22])=>{let R$21=jX(h$15,I$25,A$22);return R$21||this.syntheticMarkerService.mark(`ngrx.effects.custom_fields.reload_tasks_after_formula_value_calculates.finish`).addContext({entityId:t$5(h$15),client_trace:h$15.client_trace}),R$21;}),fs$1(200,m$28),q$20(([h$15,,])=>(this.syntheticMarkerService.mark(`ngrx.effects.custom_fields.reload_tasks_after_formula_value_calculates.finish`).addContext({entityId:t$5(h$15),client_trace:h$15.client_trace}),j$17({instanceId:this.listViewInstanceId,entityId:t$5(h$15),wsClientTrace:h$15.client_trace}))))),this.formulaValueCalculatedFromWebsocketOVM$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.FormulaValueCalculated).pipe(Qs$4(h$15=>h$15.version_change.object_id,{duration:()=>he$6(6e4)}),Z$12(h$15=>h$15.pipe(Bt$7(()=>this.customFieldsSplitService.fieldsFormulaValueCalculatedConfig$.pipe(Ve$4(1),le$5(({fieldFetchThrottleMs:I$25})=>we$3(I$25))),{leading:!0,trailing:!0}),Mu(I$25=>[this.store.select(G$8(I$25.version_change.object_id)),this.customFieldsSplitService.fieldsFormulaValueCalculated$]),oe$13(([I$25,A$22,R$21])=>R$21&&!!A$22&&(I$25.version_event_data?.changes??[]).some(w$26=>w$26.field===`type_config`)),q$20(([I$25])=>C$17({id:I$25.version_change.object_id,websocketSource:t$17.FormulaValueCalculated})))))),this.loadCustomFieldDetails$=Ke$1(()=>this.action$.pipe(Ye$2(C$17),Z$12(({id:h$15,showError:I$25,websocketSource:A$22})=>this.customFieldsService.getField(h$15,{websocketSource:A$22},{showError:I$25}).pipe(q$20(R$21=>c$27({field:R$21,entity:{},updates:{}})))))),this.loadCustomFieldDetailsFailure$=Ke$1(()=>this.action$.pipe(Ye$2(y$13),oe$13(h$15=>h$15.error.status===401),q$20(h$15=>r$30({fieldId:h$15.id,entity:{},all:!0})))),this.formulaValueCalculatingFromWebsocketOVM$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.FormulaValuesCalculating).pipe(Mu(h$15=>[this.store.select(G$8(h$15.version_change.object_id))]),oe$13(([,h$15])=>h$15?.type===a$24.Formula&&h$15?.type_config?.calculation_state!==D$6.Scheduled),q$20(([,h$15])=>h$15),q$20(h$15=>L$10({field:{...h$15,type_config:{...h$15.type_config,calculation_state:D$6.Scheduled}}})))),this.updateFieldFromWebsocket$=Ke$1(()=>this.action$.pipe(Ye$2(L$10),le$5(h$15=>h$15.field?Jw(h$15.field).map(I$25=>c$27({field:h$15.field,entity:I$25,updates:h$15.field})):z$18))),this.deleteFieldFromWebsocket$=Ke$1(()=>this.action$.pipe(Ye$2(g$16),le$5(h$15=>Jw(h$15.field).map(I$25=>r$30({fieldId:h$15.field.id,entity:I$25,all:!1}))))),this.updateFieldValueFromWebsocket$=Ke$1(()=>this.action$.pipe(Ye$2(S$17),Mu(()=>[this.store.select(p$24)]),le$5(([h$15,I$25])=>{let A$22=s$22(h$15.payload||[],G$16=>G$16.taskId),R$21=h$15.payload.filter(G$16=>!G$16.relatedTaskId),w$26=h$15.payload.filter(G$16=>G$16.relatedTaskId),E$16=WX(R$21,I$25,A$22),P$20=HX(w$26,I$25),B$22=[...E$16,...P$20];return B$22.length===0?z$18:(this.taskService.onChange.emit({type:`webSocketFieldValueUpdate`,tasks:B$22,field:`customFields`,fieldId:`${r$19}${h$15.payload[0].field.id}`}),[new x$21(B$22),...B$22.map(G$16=>new E$14(G$16))]);}))),this.setTaskValue$=Ke$1(()=>this.action$.pipe(Ye$2(U$13),Mu(()=>[this.store.select(Xo$1),this.store.select(b$10)]),Z$12(([h$15,I$25,A$22])=>{let R$21=R$10[h$15.field.type],w$26=R$21.serialiseValueForApi?R$21.serialiseValueForApi(h$15.oldValue,h$15.value,h$15.field):h$15.value;return this.customFieldsService.setTaskFieldValue({taskId:h$15.taskId,fieldId:h$15.field.id,value:w$26,valueOptions:h$15.valueOptions,params:h$15.muteNotifications?{mute_notifications:`true`}:{},debounced:!1,redirectOnError:!0,richTextValue:h$15.field.value_richtext,via:h$15.via}).pipe(As$3(this.store.select(p$24)),le$5(([E$16,P$20])=>{let B$22=[],G$16=E$16.tasks_created?h$15.value.map(v$22=>{if(!v$22.id&&`name`in v$22){let x$28=E$16.tasks_created.find(U$19=>U$19.name===v$22.name).id;return{...v$22,id:x$28};}return v$22;}):h$15.value;return B$22.push(V$11({taskId:h$15.taskId,field:h$15.field,value:G$16,valueOptions:h$15.valueOptions})),P$20[h$15.taskId]&&B$22.push(t$9({taskId:h$15.taskId,field:h$15.field,value:G$16,valueOptions:h$15.valueOptions,valueRichtext:h$15.field.value_richtext})),h$15.refreshViewTask&&(I$25?B$22.push(new Se$6({taskId:{id:h$15.taskId}})):A$22?.viewType===o$31.List?B$22.push(u$28.reloadTasksByIds(0,[h$15.taskId],`setCustomFieldValue-view-list`,!1)):A$22?.viewType===o$31.Gantt?B$22.push(Nt({customField:h$15.field})):B$22.push(new l$23(h$15.taskId,`setCustomFieldValue`,!1))),B$22;}),Xo$2(E$16=>qe$6(E$16).pipe(q$20(P$20=>P$20),q$20(P$20=>v$18({taskId:h$15.taskId,field:h$15.field,value:h$15.value,valueOptions:h$15.valueOptions,error:P$20})))));}))),this.removeTaskValue$=Ke$1(()=>this.action$.pipe(Ye$2(w$17),le$5(h$15=>this.customFieldsService.deleteTaskFieldValue(h$15.taskId,h$15.fieldId,h$15.muteNotifications?{mute_notifications:`true`}:{}).pipe(As$3(this.store.select(p$24)),le$5(([,I$25])=>I$25[h$15.taskId]?qe$6(new x$21([{...I$25[h$15.taskId],customFields:(I$25[h$15.taskId].customFields??[]).map(A$22=>A$22.id===h$15.fieldId?{...A$22,value:null,value_options:void 0}:A$22)}])):z$18))))),this.getTeamFields$=Ke$1(()=>this.action$.pipe(Ye$2(h$9),le$5(h$15=>h$15.teamId?this.customFieldsService.getCustomFields(h$15.teamId).pipe(le$5(I$25=>{let A$22=[];return I$25&&A$22.push(E$13({fields:I$25.fields})),j$23(A$22);})):j$23([])))),this.batchUpdateCustomFieldValues$=Ke$1(()=>this.action$.pipe(Ye$2(D$13),Q$15({run:({field:h$15,tasks:I$25,value:A$22,valueRichtext:R$21,valueOptions:w$26,muteNotifications:E$16,isMerge:P$20})=>{let B$22=A$22==null&&h$15.type!==a$24.Button,G$16=ft(I$25,h$15,A$22,R$21,P$20),v$22=R$10[h$15.type],x$28=h$15?.type===a$24.Users&&h$15?.type_config?.single_user?this.getUsersToRemove(I$25,h$15):void 0,U$19=v$22?.serialiseValueForApi?v$22.serialiseValueForApi(x$28,A$22,h$15):A$22;return(h$15?.type===a$24.ListRelationship||h$15?.type===a$24.Tasks)&&A$22&&this.toastService.addToastItem({title:this.bulkRelationshipSuccessText.format({count:I$25.length,taskName:A$22[0]?.name,relationshipName:h$15.name}),isV3Toast:!0}),this.customFieldsService.setBulkFieldValues(h$15.id,U$19,R$21,w$26,I$25.map(H$10=>H$10.id),B$22,E$16,P$20).pipe(le$5(()=>j$23([k$12.optimisticUpdateTasksState(0,G$16,`batchUpdateCustomFieldValues`,`cf_${h$15.id}`,void 0,void 0,void 0,void 0,void 0,!0),v$20.checkAndTrackUsageLimitHit({entitlement:n$41.CustomFieldValues}),te$13({tasks:G$16,field:h$15,value:A$22,valueRichtext:R$21,valueOptions:w$26,muteNotifications:E$16})])),ws$2(u$28.updateTasksState(0,G$16,`batchUpdateCustomFieldValuesStart`,void 0,!1,!1)));},undoAction:({tasks:h$15})=>u$28.updateTasksState(0,h$15,`undobatchCustomFields`)}))),this.removeCustomFieldFromViews$=Ke$1(()=>this.action$.pipe(Ye$2(m$10),le$5(h$15=>$i([Kw(h$15.entity,this.store),Kw(h$15.movedToEntity,this.store)]).pipe(Ve$4(1),q$20(([I$25,A$22])=>({oldEntities:I$25,newEntities:A$22,action:h$15})))),Mu(()=>[this.store.select(te$15),this.store.select(k$25)]),q$20(([h$15,I$25,A$22])=>FX({data:h$15,dataViewEntities:I$25,dataViewIdMap:A$22})),R$20(),q$20(h$15=>ze$1({updates:h$15})))),this.addCustomFieldToLocation$=Ke$1(()=>this.action$.pipe(Ye$2(C$4),oe$13(h$15=>!!h$15.entity),q$20(h$15=>M$16({fieldId:h$15.fieldId,entity:h$15.entity})))),this.reloadAllCustomFields$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.CopyOperationFinished).pipe(Mu(()=>[this.store.select(o$30),this.customFieldsSplitService.isRefetchFieldsWhenCopyingHierarchyEntityEnabled$]),oe$13(([,,h$15])=>h$15),q$20(([,h$15])=>h$9({teamId:h$15})))),this.loadViewsFieldsMap$=Ke$1(()=>this.action$.pipe(Ye$2(X$10),Mu(()=>this.store.select(o$30)),ee$8({run:({viewId:h$15,locations:I$25},A$22)=>this.customFieldsService.bulkLoadFieldsForLocations(A$22,I$25,!0).pipe(q$20(R$21=>{let w$26={};for(let E$16 of R$21.fields){if(E$16.status!==`found`)continue;let P$20=E$16.data.field_id;w$26[P$20]=E$16.data.locations??[];}return Y$6({viewId:h$15,viewFieldsLocationsMap:w$26});})),onError:({viewId:h$15,locations:I$25},A$22)=>Z$8({viewId:h$15,locations:I$25,error:A$22})}))),this.loadViewsFieldsMapError$=Ke$1(()=>this.action$.pipe(Ye$2(Z$8),q$20(({error:h$15,viewId:I$25})=>({viewId:I$25,locationsToFilter:xX(h$15)})),oe$13(h$15=>!!h$15.locationsToFilter),q$20(({viewId:h$15,locationsToFilter:I$25})=>st$6({viewId:h$15,locationsToFilter:I$25}))));}ngrxOnRunEffects(e$19){return this.websocketOvmService.enableMessage(t$17.FieldCreated).enableMessage(t$17.FormulaValueCalculated).enableMessage(t$17.FormulaValuesCalculating).enableMessageByFeatureFlag(t$17.FieldLocationAdded,O$16.FieldsImproveLiveRefreshStrategy).enableMessage(t$17.FieldLocationRemoved).enableMessage(t$17.FieldLevelAccessChanged).enableMessage(t$17.FieldVisibilityLevelChanged),this.customFieldsSplitService.fieldsImproveLiveRefreshStrategyConfig$.pipe(Ve$4(1),F$22(this.destroyRef)).subscribe(r$34=>{Object.entries(r$34).forEach(([o$32,s$25])=>{this.websocketConfigService.addConfiguration(this.websocketConfigService.createConfiguration(o$32).setRandomJitterByRange(0,s$25.jitter??0));});}),n$24(`custom_fields_store_module`,`custom_fields_effects`,`run`),e$19;}updateLoading(e$19,r$34){this.store.dispatch(n$37({customFieldsLoading:{[e$19]:r$34}}));}getUsersToRemove(e$19,r$34){let o$32=[];return e$19.forEach(s$25=>{let n$46=s$25?.customFields?s$25.customFields.find(a$30=>a$30.id===r$34.id):s$25?.customFieldValues?s$25.customFieldValues.find(a$30=>a$30.field_id===r$34.id):null;n$46&&n$46.value?.forEach(c$37=>{o$32.push(c$37);});}),u$35(o$32,`id`);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(Ar),ge$10(q$19),ge$10(zr$1),ge$10(M$4),ge$10(G$9),ge$10(Be$1),ge$10(q$14),ge$10(al$1),ge$10(oe$1),ge$10(A$5));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();zX=N$8.getInitialState({loading:{createField:!1,updateField:!1,deleteField:!1},areAllFieldsSet:!1,viewsFieldsMap:{},entityAndAncestorFields:v$12.getInitialState()});$ge=(t$21,i$27,e$19)=>e$19.id===t$21.fieldId&&!e$19[i$27]?.some(r$34=>r$34.id===t$21.entity.id);Xw=t$21=>({id:i$27})=>i$27!==t$21,Zw={project:t$21=>i$27=>({...i$27,projects:i$27.projects?.filter(Xw(t$21.id))}),category:t$21=>i$27=>({...i$27,categories:i$27.categories?.filter(Xw(t$21.id))}),subcategory:t$21=>i$27=>({...i$27,subcategories:i$27.subcategories?.filter(Xw(t$21.id))})};({selectAll:jge}=N$8.getSelectors()),{selectEntities:Lge,selectAll:QX}=v$12.getSelectors(),JX=sn(zX,on(n$37,(t$21,{customFieldsLoading:i$27})=>({...t$21,loading:{...t$21.loading,...i$27}})),on(E$13,(t$21,{fields:i$27})=>N$8.setAll(i$27.filter(e$19=>_r$1.some(({type:r$34})=>r$34===e$19.type)),{...t$21,areAllFieldsSet:!0})),on(z$12,(t$21,{field:i$27})=>N$8.upsertOne(KX(t$21.entities[i$27.id],i$27),t$21)),on(I$16,(t$21,{entity:i$27})=>{let e$19=B$5(i$27.type),r$34=jge(t$21).map(o$32=>{let s$25=o$32[e$19],n$46={...o$32,[e$19]:s$25?.filter(({id:c$37})=>c$37!==i$27.id)};return n$46.teams?.length||n$46.projects?.length||n$46.categories?.length||n$46.subcategories?.length?n$46:null;}).filter(Boolean);return N$8.setAll(r$34,t$21);}),on(r$30,(t$21,{all:i$27,entity:e$19,fieldId:r$34})=>{if(i$27)return N$8.removeOne(r$34,{...t$21,entityAndAncestorFields:v$12.setAll(QX(t$21.entityAndAncestorFields).map(s$25=>({...s$25,fields:s$25.fields.filter(n$46=>n$46.id!==r$34)})),t$21.entityAndAncestorFields)});let o$32=t$21.entities[r$34];return!(e$19.type in Zw)||!o$32?t$21:N$8.updateOne({id:r$34,changes:Zw[e$19.type](e$19)(o$32)},{...t$21,entityAndAncestorFields:v$12.updateOne({id:m$17(e$19),changes:{fields:t$21.entityAndAncestorFields.entities[m$17(e$19)]?.fields.filter(s$25=>s$25.id!==r$34)}},t$21.entityAndAncestorFields)});}),on(l$21,(t$21,i$27)=>{if(typeof i$27.updates.position<`u`&&i$27.entity){let e$19=t$21.entityAndAncestorFields.entities[m$17(i$27.entity)],r$34=e$19.fields.filter(n$46=>T$8(n$46.entity,i$27.field.entity));ae$2(r$34,r$34.indexOf(i$27.field),i$27.updates.position);let s$25={entity:e$19.entity,fields:[...e$19.fields.filter(n$46=>!T$8(n$46.entity,i$27.field.entity)),...r$34]};return{...t$21,entityAndAncestorFields:v$12.upsertOne(s$25,t$21.entityAndAncestorFields)};}return t$21;}),on(a$23,c$27,(t$21,i$27)=>{let e$19=i$27.field,r$34=e$19.teams?.length||e$19.projects?.length||e$19.categories?.length||e$19.subcategories?.length,o$32=QX(t$21.entityAndAncestorFields).map(s$25=>{let n$46=s$25.fields.map(a$30=>a$30.id===e$19.id?{...a$30,...e$19}:a$30);return T$8(i$27.entity,s$25.entity)&&!n$46.some(a$30=>a$30.id===e$19.id)&&n$46.push({...e$19,entity:i$27.entity}),{...s$25,fields:n$46};});return N$8.updateOne({id:e$19.id,changes:{...(r$34?{teams:void 0,projects:void 0,categories:void 0,subcategories:void 0}:{}),...e$19}},{...t$21,entityAndAncestorFields:v$12.setAll(o$32,t$21.entityAndAncestorFields)});}),on(q$12,(t$21,i$27)=>({...t$21,entityAndAncestorFields:v$12.setAll(i$27.entityAndAncestorFields,t$21.entityAndAncestorFields)})),on(N$14,(t$21,i$27)=>i$27.field?N$8.updateOne({id:i$27.fieldId,changes:i$27.field},t$21):t$21),on(M$16,(t$21,i$27)=>{let e$19=B$5(i$27.entity.type),r$34=t$21.entities[i$27.fieldId];if(!r$34)return t$21;let o$32=qX(i$27,e$19)(r$34);return N$8.updateOne({id:i$27.fieldId,changes:o$32},t$21);}),on(i$21,(t$21,i$27)=>{if(t$21.entities[i$27.field.id])return t$21;let e$19=i$27.entity.type?B$5(i$27.entity.type):void 0,r$34=e$19&&!i$27.field[e$19]?{...i$27.field,[e$19]:[{id:i$27.entity.id,name:i$27.entity.name,entity:i$27.entity.type,[`${i$27.entity.type}_access`]:i$27.entity.access}]}:i$27.field,o$32=Lge(t$21.entityAndAncestorFields)[m$17(i$27.entity)];return N$8.upsertOne(r$34,{...t$21,entityAndAncestorFields:v$12.upsertOne({entity:i$27.entity,fields:[...(o$32?o$32.fields:[]),{...r$34,entity:i$27.entity}]},t$21.entityAndAncestorFields)});}),on(f$26,(t$21,{entity:i$27,fields:e$19})=>({...t$21,entityAndAncestorFields:v$12.upsertOne({fields:qe(e$19),entity:i$27},t$21.entityAndAncestorFields)})),on(H$6,(t$21,i$27)=>{let e$19=t$21.entityAndAncestorFields.entities[m$17(i$27.entity)];if(!e$19)return t$21;let r$34=e$19.fields.map(o$32=>o$32.id===i$27.fieldId?{...o$32,automations:{triggers:o$32?.automations?.triggers?o$32.automations.triggers.concat(i$27.trigger):[i$27.trigger]}}:o$32);return{...t$21,entityAndAncestorFields:v$12.updateOne({id:m$17(i$27.entity),changes:{fields:r$34}},t$21.entityAndAncestorFields)};}),on(J$13,(t$21,i$27)=>{let e$19=t$21.entityAndAncestorFields.entities[m$17(i$27.hierarchyEntity)];if(!e$19)return t$21;let r$34=e$19.fields.map(o$32=>o$32.automations?.triggers?{...o$32,automations:{triggers:o$32.automations.triggers.filter(s$25=>s$25.id!==i$27.automationId)}}:o$32);return{...t$21,entityAndAncestorFields:v$12.updateOne({id:m$17(i$27.hierarchyEntity),changes:{fields:r$34}},t$21.entityAndAncestorFields)};}),on(K$14,(t$21,i$27)=>{if(!i$27.automationId)return t$21;let e$19=t$21.entityAndAncestorFields.entities[m$17(i$27.hierarchyEntity)];if(!e$19)return t$21;let r$34=e$19.fields.map(o$32=>o$32.automations?.triggers?{...o$32,automations:{triggers:o$32.automations.triggers.map(s$25=>s$25.id===i$27.automationId?{...s$25,active:!s$25.active}:s$25)}}:o$32);return{...t$21,entityAndAncestorFields:v$12.updateOne({id:m$17(i$27.hierarchyEntity),changes:{fields:r$34}},t$21.entityAndAncestorFields)};}),on(Y$6,(t$21,i$27)=>({...t$21,viewsFieldsMap:{...t$21.viewsFieldsMap,[i$27.viewId]:i$27.viewFieldsLocationsMap}})),on(ee$6,t$21=>({...t$21,entityAndAncestorFields:v$12.getInitialState()})));dm();VN();n$24(`custom_fields_store_module`,`custom_fields_by_task_type_effects`,`load`);YX=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.store=r$34,this.editCustomFieldsByTaskType$=Ke$1(()=>this.actions$.pipe(Ye$2(oe$10),Mu(()=>[this.store.select(de$10)]),Z$12(([{id:o$32,fieldIdsToRemove:s$25,fieldIdsToAdd:n$46,fieldIdsToConvert:a$30},c$37])=>{let m$32=[];return(a$30??[]).forEach(l$26=>{let g$19={fieldId:l$26,entities:[{...c$37,type:`team`}],appliedObjects:[{object_id:o$32,object_type:Cr.CustomTypeObject}]};m$32.push(W$17(g$19));}),m$32.push(P$12({fieldIds:n$46,taskTypeId:o$32})),m$32.push(Q$13({fieldIds:s$25,taskTypeId:o$32})),m$32.push(ie$5({id:o$32})),qe$6(...m$32);}))),this.addTaskTypeToCustomFields$=Ke$1(()=>this.actions$.pipe(Ye$2(P$12),Mu(()=>[this.store.select(de$10),this.store.select(At$2)]),Z$12(([o$32,s$25,n$46])=>{let a$30=[];for(let c$37 of o$32.fieldIds){let m$32=n$46[c$37],l$26=m$32?.teams?.[0]?.applied_objects??[];if(Dge(l$26,o$32.taskTypeId))continue;let f$33={id:s$25.id,type:`team`},h$15=[...l$26,{object_type:Cr.CustomTypeObject,object_id:o$32.taskTypeId}];a$30.push(B$15({fieldId:c$37,entity:f$33,appliedObjects:h$15}));let I$25={...m$32};I$25.applied_objects=h$15,I$25.teams[0].applied_objects=h$15,a$30.push(a$23({entity:f$33,field:I$25,updates:{applied_objects:h$15}}));}return a$30.length===0?qe$6():qe$6(...a$30);}))),this.removeTaskTypeFromCustomFields$=Ke$1(()=>this.actions$.pipe(Ye$2(Q$13),Mu(()=>[this.store.select(de$10),this.store.select(At$2)]),Z$12(([o$32,s$25,n$46])=>{let a$30=[];for(let c$37 of o$32.fieldIds){let m$32=n$46[c$37],l$26=m$32?.teams?.[0]?.applied_objects??[],g$19=Nge(l$26,o$32.taskTypeId);if(g$19.length===l$26.length)continue;let f$33={id:s$25.id,type:`team`};a$30.push(B$15({fieldId:c$37,entity:f$33,appliedObjects:g$19}));let h$15={...m$32};h$15.applied_objects=g$19,h$15.teams[0].applied_objects=g$19,a$30.push(a$23({entity:f$33,field:h$15,updates:{applied_objects:g$19}}));}return a$30.length===0?qe$6():qe$6(...a$30);}))),this.deleteTaskTypeFromCustomFields$=Ke$1(()=>this.actions$.pipe(Ye$2(K$10),Mu(()=>[this.store.select(de$10),this.store.select(Ct)]),Z$12(([o$32,s$25,n$46])=>{let a$30=[],c$37=n$46[o$32.typeToDelete]??[];for(let m$32 of c$37){let g$19=(m$32?.teams?.[0]?.applied_objects??[]).length>1,f$33=m$32.id;g$19?a$30.push(Q$13({fieldIds:[f$33],taskTypeId:o$32.typeToDelete})):a$30.push(F$17({entity:s$25,fieldId:f$33,all:!0}));}return qe$6(...a$30);})));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`custom_fields_by_task_type_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();n$24(`custom_fields_store_module`,`custom_fields_location_effects`,`load`);XX=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.store=r$34,this.addFieldToLocation$=Ke$1(()=>this.actions$.pipe(Ye$2(M$16,N$14),Mu(o$32=>[this.store.select(G$8(o$32.fieldId)),this.store.select(Ze)]),oe$13(o$32=>!!o$32[1]),Z$12(([o$32,s$25,n$46])=>{let a$30=`entity`in o$32?[o$32.entity]:o$32.entities;return Q$2(s$25,a$30,n$46,this.store).pipe(le$5(c$37=>{let m$32=z$5(s$25,a$30,n$46);return qe$6(q$12({entityAndAncestorFields:O$4(c$37.filter(g$19=>g$19!==null),m$32)}));}));})));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`custom_fields_location_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();U$18();VN();n$24(`custom_fields_store_module`,`delete_custom_field_effects`,`load`);ZX=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.store=r$34,this.resetGroupingIfFieldDeleted$=Ke$1(()=>this.actions$.pipe(Ye$2(r$30),Mu(()=>this.store.select(b$10).pipe(R$20())),oe$13(([o$32,s$25])=>s$25.grouping.field===`cf_${o$32.fieldId}`),q$20(([,o$32])=>new ct$4(k$26.Status,o$32))));}ngrxOnRunEffects(e$19){return n$24(`custom_fields_store_module`,`delete_custom_field_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();tZ=sn({currentTaskCustomFieldsMap:{}},on(m$24,(t$21,i$27)=>({...t$21,currentTaskCustomFieldsMap:(i$27.fields??[]).reduce((e$19,r$34)=>(e$19[r$34.id]=r$34,e$19),{...t$21.currentTaskCustomFieldsMap})})),on(p$23,(t$21,i$27)=>{let e$19=t$21.currentTaskCustomFieldsMap[i$27.field.id]?{...t$21.currentTaskCustomFieldsMap[i$27.field.id],...i$27.field}:i$27.field;return{...t$21,currentTaskCustomFieldsMap:{...t$21.currentTaskCustomFieldsMap,[i$27.field.id]:e$19}};}),on(i$21,(t$21,i$27)=>{let e$19=i$27.entity.type?B$5(i$27.entity.type):void 0,r$34=e$19&&!i$27.field[e$19]?{...i$27.field,[e$19]:[{id:i$27.entity.id,name:i$27.entity.name,entity:i$27.entity.type,[`${i$27.entity.type}_access`]:i$27.entity.access}]}:i$27.field;return{...t$21,currentTaskCustomFieldsMap:{...t$21.currentTaskCustomFieldsMap,[r$34.id]:{...r$34}}};}),on(r$30,(t$21,i$27)=>{let{fieldId:e$19}=i$27,r$34=z$15(t$21.currentTaskCustomFieldsMap,e$19);return{...t$21,currentTaskCustomFieldsMap:r$34};}),on(a$23,c$27,(t$21,i$27)=>{let e$19=i$27.field;return{...t$21,currentTaskCustomFieldsMap:t$21.currentTaskCustomFieldsMap[e$19.id]?{...t$21.currentTaskCustomFieldsMap,[e$19.id]:{...t$21.currentTaskCustomFieldsMap[e$19.id],...e$19}}:t$21.currentTaskCustomFieldsMap};}));VN();e$11(`custom_fields_store_module`,`load`);rZ=(()=>{class t$21{constructor(){e$11(`custom_fields_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[ee$2],imports:[gi$1,rn.forFeature(s$11,tZ),rn.forFeature(V$5,JX),Je$4.forFeature([GX,C7]),rn.forFeature(q$5,Be$2),rn.forFeature(G$5,de$4),rn.forFeature(n_,_7),rn.forFeature(at,de$1),rn.forFeature(it,wt),rn.forFeature(S$2,f$7),rn.forFeature(U$6,ge$1),Je$4.forFeature([yX,z7,sX,J7,eX,x7,P7,w7,R7,D7$1,L7,j7,ZX,SX,X7,cX,nX,fX,pX,YX,F7,tX,XX]),Je$4.forFeature([hX])]});}}return t$21;})();dm();VN();n$24(`entitlements_store_module`,`entitlements_effects`,`load`);iZ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37){this.action$=e$19,this.entitlementsService=r$34,this.store=o$32,this.configurablePaywallService=s$25,this.entitlementsGraphService=n$46,this.segmentService=a$30,this.splitService=c$37,this.updateEntitlements$=Ke$1(()=>this.action$.pipe(Ye$2(v$20.updateEntitlements),le$5(m$32=>qe$6(m$32.entitlements)),q$20(m$32=>ue$9(m$32)),q$20(m$32=>v$20.setEntitlements(m$32)))),this.refreshEntitlementsOnTeamIdChange$=Ke$1(()=>this.action$.pipe(Ye$2(ke$4),oe$13(m$32=>!!m$32.teamId),zt$2((m$32,l$26)=>m$32.teamId===l$26.teamId),q$20(m$32=>v$20.refreshEntitlements({teamId:m$32.teamId})))),this.refreshEntitlements$=Ke$1(()=>this.action$.pipe(Ye$2(v$20.refreshEntitlements),Mu(m$32=>m$32.teamId?qe$6(m$32.teamId):this.store.select(o$30)),oe$13(([,m$32])=>!!m$32),fs$1(200),le$5(([,m$32])=>this.refreshEntitlementsForTeam(m$32)))),this.refreshComplexEntitlements$=Ke$1(()=>this.action$.pipe(Ye$2(v$20.refreshComplexEntitlements),Mu(()=>this.store.select(o$30)),oe$13(([,m$32])=>!!m$32),le$5(([{entitlements:m$32},l$26])=>$i(m$32.reduce((g$19,f$33)=>({...g$19,[f$33]:this.entitlementsService.getEntitlement(l$26,f$33)}),{}))),q$20(m$32=>v$20.setEntitlements(ue$9(m$32))))),this.checkFormViewEntitlement$=Ke$1(()=>this.action$.pipe(Ye$2(v$20.checkFormViewEntitlement),q$20(()=>v$20.checkEntitlement({entitlement:{name:T$20.FormViewUtilization},showPaywall:!0})))),this.checkEntitlement$=Ke$1(()=>this.action$.pipe(Ye$2(v$20.checkEntitlement),le$5(m$32=>$i([this.store.select(o$30),this.store.select(et$4).pipe(oe$13(l$26=>l$26))]).pipe(ds(),oe$13(([l$26])=>!!l$26),le$5(([l$26])=>Ct$4([this.refreshEntitlement(m$32.entitlement,l$26,m$32.refresh),qe$6(m$32),this.entitlementsGraphService.getNextAvailableTier(m$32.entitlement.name),this.entitlementsGraphService.getNextAvailableTier(m$32.entitlement.name,m$32.useTopUpgrade)]).pipe(ds())))),Mu(([m$32,l$26])=>[m$32?qe$6(y$16(l$26.entitlement,m$32)):this.store.select(be$6(l$26.entitlement))]),le$5(([[m$32,l$26,g$19,f$33],h$15])=>l$26.showPaywall&&!h$15?$i([this.configurablePaywallService.getOpenPaywallModalAction(l$26.entitlement.name,f$33,{entryPoint:l$26.entryPoint,via:l$26.via,skipSegment:l$26.skipSegment,minPlanTier:g$19},{}),qe$6(m$32),qe$6(l$26.entitlement.name)]):$i([qe$6(null),qe$6(m$32),qe$6(null)])),Is$1(([m$32,,l$26])=>{m$32&&l$26&&this.configurablePaywallService.tryScheduleCouponOffer(l$26,m$32.name);}),Z$12(([m$32,l$26])=>d$22([l$26?v$20.setEntitlements(l$26??f$29):null,m$32])))),this.forcePaywall$=Ke$1(()=>this.action$.pipe(Ye$2(v$20.forcePaywall),le$5(m$32=>Ct$4([qe$6(m$32),this.entitlementsGraphService.getNextAvailableTier(m$32.entitlement),this.entitlementsGraphService.getNextAvailableTier(m$32.entitlement,m$32.useTopUpgrade)]).pipe(ds())),Is$1(([m$32,l$26,g$19])=>this.configurablePaywallService.showPaywall(m$32.entitlement,g$19,{entryPoint:m$32.entryPoint,via:m$32.via,skipSegment:m$32.skipSegment,minPlanTier:l$26}))),{dispatch:!1}),this.trackUsageLimitHit$=Ke$1(()=>this.action$.pipe(Ye$2(v$20.checkAndTrackUsageLimitHit),fs$1(250),Mu(()=>[this.splitService.isTreatmentOn(O$16.GrowthUsageLimitHitTrackingFe).pipe(oe$13(m$32=>m$32))]),Mu(([m$32])=>[this.store.select(xe$4(m$32.entitlement)).pipe(oe$13(l$26=>l$26?.planLimits!==void 0&&l$26.planLimits!==null&&l$26.planLimits!==`Infinity`)),this.store.select(o$30),this.store.select(n$36).pipe(oe$13(l$26=>l$26===O$17.FreeForever))]),oe$13(([[m$32],l$26,g$19])=>!!g$19),Z$12(([[m$32],l$26,g$19])=>$i([qe$6(m$32),this.entitlementsService.getEntitlement(g$19,m$32.entitlement)])),Is$1(([m$32,l$26])=>{V$14(l$26)&&l$26.planLimits!==void 0&&l$26.planLimits!==null&&l$26.planLimits!==`Infinity`&&l$26.usage>Number(l$26.planLimits)&&l$26.entitled&&this.segmentService.track(Bu.UsageLimitHit,{entitlement:m$32.entitlement,useCount:l$26.usage});})),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`entitlements_store_module`,`entitlements_effects`,`run`),e$19;}refreshEntitlementsForTeam(e$19){return this.entitlementsService.getEntitlements(e$19).pipe(q$20(r$34=>{let o$32=Object.entries(r$34).filter(([,n$46])=>n$46.dataIsComplete===!1).map(([n$46])=>n$46);return{newState:ue$9(Object.fromEntries(Object.entries(r$34).filter(([n$46,a$30])=>a$30.dataIsComplete!==!1))),complexEntitlements:o$32};}),Z$12(({newState:r$34,complexEntitlements:o$32})=>[v$20.setEntitlements(r$34),...(o$32.length>0?[v$20.refreshComplexEntitlements({entitlements:o$32})]:[])]),Xo$2(()=>[]));}refreshEntitlement(e$19,r$34,o$32){let s$25=o$32===`skip`,n$46=o$32===`force`,a$30=e$19.name;return $i([this.store.select(ye$4(a$30)),this.store.select(be$6(e$19))]).pipe(ds(([,c$37])=>$$9.isInitialized(c$37)),le$5(([c$37])=>!s$25&&c$37||n$46?this.entitlementsService.getEntitlement(r$34,a$30).pipe(q$20(m$32=>ue$9({[a$30]:m$32}))):qe$6(null)));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(g$13),ge$10(q$19),ge$10(xi$1),ge$10(l2),ge$10(_b$1),ge$10(Qn));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`entitlements_grace_period_store_module`,`entitlements_grace_period_effects`,`load`);oZ=(()=>{class t$21{constructor(e$19,r$34,o$32){this.entitlementsGracePeriodService=e$19,this.action$=r$34,this.store=o$32,this.checkEntitlementsGracePeriodEligibility$=Ke$1(()=>this.action$.pipe(Ye$2(o2.checkEntitlementsGracePeriodEligibility),le$5(()=>this.store.select(Ui$1)),oe$13(s$25=>!s$25),Mu(()=>this.store.select(o$30)),le$5(([,s$25])=>this.entitlementsGracePeriodService.checkEntitlementsGracePeriodEligibility(s$25)),q$20(s$25=>o2.setEntitlementsGracePeriodEligibility({entitlements:s$25.entitlements}))));}ngrxOnRunEffects(e$19){return n$24(`entitlements_grace_period_store_module`,`entitlements_grace_period_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(zi$2),ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`entitlements_grace_period_store_module`,`load`);sZ=(()=>{class t$21{constructor(){e$11(`entitlements_grace_period_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(nr$2,fg),Je$4.forFeature([oZ])]});}}return t$21;})();VN();e$11(`entitlements_store_module`,`load`);nZ=(()=>{class t$21{constructor(){e$11(`entitlements_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,sZ,rn.forFeature(H$7,te$14),Je$4.forFeature([iZ])]});}}return t$21;})();dm();VN();n$24(`app_module`,`new_build_effects`,`load`);aZ=(()=>{class t$21{constructor(e$19,r$34){this.websocketV2Service=e$19,this.swUpdates=r$34,this.handleEvent$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.NewBuild).pipe(Is$1(()=>{this.swUpdates.setNewBuildAvailable();})),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`app_module`,`new_build_effects`,`run`),this.websocketV2Service.enableMessage(t$17.NewBuild),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(G$9),ge$10(v$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();dm();cZ=Ke$1(Bge,{functional:!0});VN();n$24(`onboarding_store_module`,`onboarding_effects`,`load`);mZ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30){this.actions=e$19,this.dataService=r$34,this.userService=o$32,this.sharedData=s$25,this.navService=n$46,this.store=a$30,this.setOnboardingStep$=Ke$1(()=>this.actions.pipe(Ye$2(m$20),q$20(c$37=>c$37.payload),le$5(c$37=>{if(!this.sharedData.currentUser.value.tour_cards_done){let m$32=Object.assign({},{onboarding_step:c$37},c$37===`completed`?{tour_cards_done:!0}:void 0);return this.userService.updateUser(m$32).pipe(le$5(l$26=>(this.sharedData.setCurrentUser({...l$26.user,onboarding_step:c$37,...(c$37===`completed`?{tour_cards_done:!0}:{})}),qe$6({type:$$7}))),Xo$2(this.handleError.bind(this)));}return qe$6({type:$$7});}))),this.onboardingCreateCategories$=Ke$1(()=>this.actions.pipe(Ye$2(f$21),Mu(()=>this.store),q$20(([c$37,m$32])=>m$32.onboarding.categories),Mu(()=>[this.store.select(de$10),this.store.select(er$3)]),le$5(([c$37,m$32,l$26])=>this.dataService.createCategories(l$26.id,{categories:c$37}).pipe(q$20(g$19=>{let f$33=g$19.categories||[];this.store.dispatch(se$5({data:f$33})),this.navService.setCategoryList(f$33);let h$15=`completed`;this.store.dispatch(ot$4({id:m$32.id,data:{setupStep:h$15}})),m$32.setup_step=h$15,this.store.dispatch({type:m$20,payload:`completed`});}),le$5(()=>(setTimeout(()=>this.store.dispatch({type:J$10}),5e3),qe$6(new r$25({path:[`/`,m$32.id,`d`,`l`],tag:`onboarding-effects-create-categories`})))),Xo$2(this.handleCategoryError.bind(this)))))),this.createDashboardViewWithTemplateEffect$=cZ;}ngrxOnRunEffects(e$19){return n$24(`onboarding_store_module`,`onboarding_effects`,`run`),e$19;}handleError(e$19){return qe$6(new _d(e$19));}handleCategoryError(e$19){let r$34;return e$19.ECODE?r$34=e$19.err:r$34=e$19.message||"Could not complete your request at this time",qe$6({type:v$15,payload:r$34});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(Ci),ge$10(nr$1),ge$10(I$18),ge$10(Jr),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`onboarding_store_module`,`load`);lZ=(()=>{class t$21{constructor(){e$11(`onboarding_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[Y$5],imports:[gi$1,rn.forFeature(z$10,ce$6),Je$4.forFeature([mZ])]});}}return t$21;})();dm();VN();dm();VN();qp=(()=>{class t$21{constructor(e$19,r$34,o$32){this.http=e$19,this.applicationEnvironmentServiceInfo=r$34,this.errorHandler=o$32,this.destroy$=new M$22(),this.applicationEnvironmentServiceInfo.environment$.pipe(gs(this.destroy$)).subscribe(s$25=>{this.baseProjectApiPath=`${s$25.apiUrl}/project`,this.baseSpaceAclsApiPath=`${s$25.apiUrlUserV3Service}/access`;});}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}getProjectsByTeamId(e$19){let r$34=`${this.baseProjectApiPath}?team=${e$19}`;return this.http.get(r$34);}getProjectById(e$19){let r$34=`${this.baseProjectApiPath}/${e$19}`;return this.http.get(r$34);}toggleProjectPrivacy(e$19,r$34,o$32){let s$25=`${this.baseProjectApiPath}/${e$19}`,n$46={private:r$34,keep_creator:o$32};return this.http.put(s$25,n$46);}toggleProjectAdminManagement(e$19,r$34){let o$32=`${this.baseProjectApiPath}/${e$19}`,s$25={admin_can_manage:r$34};return this.http.put(o$32,s$25);}toggleProjectDefaultLocationPermissions(e$19,r$34){let o$32=`${this.baseProjectApiPath}/${e$19}`,s$25={default_permission_level:r$34};return this.http.put(o$32,s$25);}addProjectMembers(e$19,r$34){let o$32=`${this.baseProjectApiPath}/${e$19}`,s$25={add:r$34.map(n$46=>typeof n$46==`string`||typeof n$46==`number`?{id:n$46}:{id:n$46.user.id})};return this.http.put(o$32,s$25);}editProjectMembers(e$19){let r$34=`${this.baseSpaceAclsApiPath}/${e$19.teamId}/space/${e$19.projectId}/acls`,o$32={entries:e$19.members.map(s$25=>({id:s$25.id,kind:`user`,permission_level:s$25.permission_level}))};return this.http.patch(r$34,o$32).pipe(this.errorHandler.http({showError:!0,redirectOnError:!1}));}removeProjectMembers(e$19,r$34){let o$32=`${this.baseProjectApiPath}/${e$19}`,s$25={rem:r$34.map(n$46=>({id:n$46}))};return this.http.put(o$32,s$25);}addProjectMemberGroups(e$19,r$34){let o$32=`${this.baseProjectApiPath}/${e$19}`,s$25={add_groups:r$34.map(n$46=>n$46.group.id)};return this.http.put(o$32,s$25);}editProjectGroupMembers(e$19){let r$34=`${this.baseSpaceAclsApiPath}/${e$19.teamId}/space/${e$19.projectId}/acls`,o$32={entries:e$19.members.map(s$25=>({id:s$25.id,kind:`group`,permission_level:s$25.permission_level}))};return this.http.patch(r$34,o$32).pipe(this.errorHandler.http({showError:!0,redirectOnError:!1}));}removeProjectMemberGroups(e$19,r$34){let o$32=`${this.baseProjectApiPath}/${e$19}`,s$25={rem_groups:r$34.map(n$46=>n$46)};return this.http.put(o$32,s$25);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(ve$7),ge$10(Ni),ge$10(ar$2));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();pZ=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.projectApiService=r$34,this.store=o$32,this.getProjectsByTeamId$=Ke$1(()=>this.actions$.pipe(Ye$2(r$17),le$5(s$25=>this.projectApiService.getProjectsByTeamId(s$25.teamId).pipe(q$20(n$46=>c$17({projects:n$46})),Xo$2(n$46=>[i$13({error:n$46}),new _d(n$46)]))))),this.selectProjectById$=Ke$1(()=>this.actions$.pipe(Ye$2(p$15),le$5(s$25=>this.projectApiService.getProjectById(s$25.projectId).pipe(q$20(n$46=>m$16({project:n$46})),Xo$2(n$46=>[d$9({error:n$46}),new _d(n$46)]))))),this.toggleProjectPrivacy$=Ke$1(()=>this.actions$.pipe(Ye$2(g$9),le$5(s$25=>this.projectApiService.toggleProjectPrivacy(s$25.projectId,s$25.isPrivate,s$25.keepCreator).pipe(le$5(()=>j$23([p$15({projectId:s$25.projectId}),Ee$3({project:{id:s$25.projectId,private:s$25.isPrivate},label:`toggle project privacy`})])),Xo$2(n$46=>{let a$30=n$46 instanceof M$21&&n$46.error?n$46.error:n$46;return[a$14({error:a$30}),new _d(a$30)];}))))),this.toggleProjectAdminManagement$=Ke$1(()=>this.actions$.pipe(Ye$2(P$7),le$5(s$25=>this.projectApiService.toggleProjectAdminManagement(s$25.projectId,s$25.adminCanManage).pipe(q$20(()=>p$15({projectId:s$25.projectId})),Xo$2(n$46=>{let a$30=n$46 instanceof M$21&&n$46.error?n$46.error:n$46;return[l$16({error:a$30}),new _d(a$30)];}))))),this.toggleProjectDefaultLocationPermissions$=Ke$1(()=>this.actions$.pipe(Ye$2(u$21),le$5(s$25=>this.projectApiService.toggleProjectDefaultLocationPermissions(s$25.projectId,s$25.defaultLocationPermissions).pipe(q$20(()=>p$15({projectId:s$25.projectId})),Xo$2(()=>qe$6(b$9())))))),this.addProjectMembers$=Ke$1(()=>this.actions$.pipe(Ye$2(E$8),Z$12(s$25=>this.projectApiService.addProjectMembers(s$25.projectId,s$25.members).pipe(q$20(()=>p$15({projectId:s$25.projectId})),Xo$2(n$46=>[R$9({error:n$46}),new _d(n$46)]))))),this.editProjectMembers$=Ke$1(()=>this.actions$.pipe(Ye$2(C$10),Mu(()=>[this.store.select(xs)]),Z$12(([{projectId:s$25,members:n$46,teamId:a$30},c$37])=>this.projectApiService.editProjectMembers({projectId:s$25,members:n$46,teamId:a$30}).pipe(le$5(()=>{let m$32=[x$11({projectId:s$25}),p$15({projectId:s$25})];if(c$37?.options?.chatRoomId){let l$26=n$46.filter(g$19=>!!g$19.user).map(g$19=>g$19.user);l$26&&m$32.push(new ft$3({viewId:c$37?.options?.chatRoomId,add:l$26}));}return j$23(m$32);}),Xo$2(m$32=>[R$9({error:m$32})]))))),this.removeProjectMembers$=Ke$1(()=>this.actions$.pipe(Ye$2(O$8),le$5(s$25=>this.projectApiService.removeProjectMembers(s$25.projectId,s$25.memberIds).pipe(q$20(()=>p$15({projectId:s$25.projectId})),Xo$2(n$46=>[F$10({error:n$46}),new _d(n$46)]))))),this.addProjectMemberGroups$=Ke$1(()=>this.actions$.pipe(Ye$2(y$8),le$5(s$25=>this.projectApiService.addProjectMemberGroups(s$25.projectId,s$25.memberGroups).pipe(q$20(()=>p$15({projectId:s$25.projectId})),Xo$2(n$46=>[M$7({error:n$46}),new _d(n$46)]))))),this.editProjectGroupMembers$=Ke$1(()=>this.actions$.pipe(Ye$2(G$7),le$5(({projectId:s$25,members:n$46,teamId:a$30})=>this.projectApiService.editProjectGroupMembers({projectId:s$25,members:n$46,teamId:a$30}).pipe(le$5(()=>[I$8({projectId:s$25}),p$15({projectId:s$25})]),Xo$2(c$37=>[f$12({error:c$37}),new _d(c$37)]))))),this.removeProjectMemberGroups$=Ke$1(()=>this.actions$.pipe(Ye$2(S$7),le$5(s$25=>this.projectApiService.removeProjectMemberGroups(s$25.projectId,s$25.memberGroupIds).pipe(q$20(()=>p$15({projectId:s$25.projectId})),Xo$2(n$46=>[v$10({error:n$46}),new _d(n$46)])))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(qp),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();uZ=sn({projects:[],projectSelected:void 0,projectLoading:!1,projectError:void 0},on(r$17,t$21=>({...t$21,projectLoading:!0})),on(c$17,(t$21,i$27)=>({...t$21,projects:i$27.projects,projectLoading:!1})),on(i$13,(t$21,i$27)=>({...t$21,projectLoading:!1,projectError:i$27.error})),on(n$19,(t$21,i$27)=>({...t$21,projects:[...t$21.projects.map(e$19=>e$19.id===i$27.project.id?i$27.project:e$19)]})),on(s$13,t$21=>({...t$21,projectSelected:void 0})),on(p$15,t$21=>({...t$21,projectLoading:!0})),on(m$16,(t$21,i$27)=>({...t$21,projectSelected:i$27.project,projects:t$21.projects.map(e$19=>i$27.project.id===e$19.id&&(i$27.project.private!==e$19.private||i$27.project.members?.length!==e$19.members?.length||i$27.project.group_members?.length!==e$19.group_members?.length)?i$27.project:e$19),projectLoading:!1})),on(d$9,(t$21,i$27)=>({...t$21,projectLoading:!1,projectError:i$27.error})),on(g$9,t$21=>({...t$21,projectLoading:!0})),on(a$14,(t$21,i$27)=>({...t$21,projectLoading:!1,projectError:i$27.error})),on(P$7,t$21=>({...t$21,projectLoading:!0})),on(l$16,(t$21,i$27)=>({...t$21,projectLoading:!1,projectError:i$27.error})),on(E$8,t$21=>({...t$21,projectLoading:!0})),on(R$9,(t$21,i$27)=>({...t$21,projectLoading:!1,projectError:i$27.error})),on(O$8,t$21=>({...t$21,projectLoading:!0})),on(F$10,(t$21,i$27)=>({...t$21,projectLoading:!1,projectError:i$27.error})),on(y$8,t$21=>({...t$21,projectLoading:!0})),on(M$7,(t$21,i$27)=>({...t$21,projectLoading:!1,projectError:i$27.error})),on(S$7,t$21=>({...t$21,projectLoading:!0})),on(v$10,(t$21,i$27)=>({...t$21,projectLoading:!1,projectError:i$27.error})));VN();e$11(`project_store_module`,`load`);fZ=(()=>{class t$21{constructor(){e$11(`project_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`project`,uZ),Je$4.forFeature([pZ])]});}}return t$21;})();dm();hr$3();Ha=class{static fromPendingAccessRequestsResponse(i$27,e$19){return i$27.map(r$34=>({...r$34.access_request,actions:r$34.actions??[],member:T_(e$19,r$34.access_request)}));}static fromBulkAccessRequestsResponse(i$27,e$19){return i$27.reduce((r$34,o$32)=>(o$32.data&&o$32.status===`found`&&r$34.push({...o$32.data.access_request,actions:o$32.data.actions??[],member:T_(e$19,o$32.data.access_request)}),r$34),[]);}static fromProcessRequestResponse(i$27,e$19){return[{...i$27,member:e$19}];}static fromRequestObjectAccess(i$27,e$19){return[{...i$27,member:T_(e$19,i$27)}];}};VN();VN();Gge=`request-access-simple-toast`,E_=(()=>{class t$21{constructor(e$19){this.simpleToastService=e$19;}getProcessAccessRequestPayload(e$19,r$34){switch(e$19){case oe$7.APPROVE_ROLE:return{role:r$34.role};case oe$7.APPROVE_INVITE:return r$34.role_subtype?{permission_level:r$34.permission_level,role:r$34.role,role_subtype:r$34.role_subtype??_$13.NONE}:{permission_level:r$34.permission_level,role:r$34.role};case oe$7.APPROVE:return{permission_level:r$34.permission_level};default:return;}}showActionToast({action:e$19,objectType:r$34}){let o$32={type:`default`,key:Gge,label:this.getToastLabel(e$19,r$34),timeout:3e3,icon:e$19===oe$7.DENY?`clear`:`circleCheckFilledColor`,iconClass:e$19===oe$7.DENY?void 0:`success`,position:`left`};this.simpleToastService.addSimpleToastItem(o$32);}getToastLabel(e$19,r$34){return e$19.includes(`approve`)?e$19===oe$7.APPROVE_ROLE?"Membership request approved":"Permissions updated":r$34===et$6.WORKSPACE?"Membership request declined":"Request declined";}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(X$3));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();rm=(()=>{class t$21{constructor(e$19,r$34){this.simpleToastService=e$19,this.authorizationFailuresService=r$34;}requestSentActions(e$19,r$34,o$32){let s$25={label:"Request sent!",type:`default`,key:`request-access-failure-simple-toast`,timeout:3e3,position:`alignedWithSidebar`};switch(e$19){case`success`:r$34&&(s$25={...s$25,iconClass:`success`,icon:`circleCheckFilledColor`},this.simpleToastService.addSimpleToastItem(s$25)),o$32&&this.authorizationFailuresService.setErrorItemFromFailure(L$8.RequestSent,o$32.errorObject);break;case`failure`:r$34&&(s$25={...s$25,label:"Request failed to send!",icon:`clear`},this.simpleToastService.addSimpleToastItem(s$25)),o$32&&this.authorizationFailuresService.setErrorItem({...o$32,loadingOnButtonClick:!1});break;default:break;}}handleError(e$19,r$34){return qe$6(new _d({...this.getGlobalErrorFromErrorObject(e$19),forceShow:r$34}));}getGlobalErrorFromErrorObject(e$19){return e$19 instanceof M$21?e$19.error:e$19;}isErrorUserFacing(e$19){return!vo(e$19)&&!_c(e$19.ECODE??``);}createGlobalError(e$19){let r$34=this.getGlobalErrorFromErrorObject(e$19);return{...r$34,userFacing:this.isErrorUserFacing(r$34)};}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(X$3),ge$10(Hi));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();vZ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.actions$=e$19,this.processAccessRequestService=r$34,this.requestAccessApiService=o$32,this.requestAccessActionService=s$25,this.store=n$46,this.processRequest$=Ke$1(()=>this.actions$.pipe(Ye$2(ms),le$5(a$30=>{let{workspaceId:c$37,accessRequestId:m$32,action:l$26,member:g$19,objectId:f$33,objectType:h$15}=a$30,I$25=this.processAccessRequestService.getProcessAccessRequestPayload(l$26,g$19);return this.requestAccessApiService.processRequest(c$37,m$32,l$26,I$25).pipe(le$5(A$22=>{let R$21=[yf({workspaceId:c$37,accessRequestId:m$32,action:l$26,member:g$19,objectId:f$33,objectType:h$15,updatedRequestAccessData:A$22})];return l$26===oe$7.APPROVE_INVITE&&R$21.push(Cf({teamId:String(c$37)})),j$23(R$21);}),Xo$2(A$22=>qe$6(Tf({error:A$22}))));}))),this.processRequestFailure$=Ke$1(()=>this.actions$.pipe(Ye$2(Tf),le$5(({error:a$30})=>this.requestAccessActionService.handleError(a$30,!0)))),this.processRequestSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(yf),le$5(a$30=>{this.processAccessRequestService.showActionToast(a$30);return j$23(gZ(a$30));}))),this.setEntityMember$=Ke$1(()=>this.actions$.pipe(Ye$2(If),Lr$1(a$30=>this.store.select(cu$1).pipe(oe$13(c$37=>!!c$37[a$30.member.user.id]))),Mu(()=>[this.store.select(cu$1)]),Rr(([a$30,c$37])=>{let m$32=a$30.action===oe$7.APPROVE_INVITE?c$37[a$30.member.user.id]:a$30.member,l$26=null;return a$30.objectType===et$6.TASK?l$26=i$20.setTaskMembers({id:a$30.objectId,action:`add`,members:[m$32]}):a$30.objectType===et$6.VIEW&&(l$26=te$10({id:a$30.objectId,action:`add`,members:[m$32]})),l$26?qe$6(l$26):z$18;})));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(E_),ge$10(R$1),ge$10(rm),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();u$33();dm();hr$3();VN();bZ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.requestAccessApiService=r$34,this.store=o$32,this.requestAccessActionService=s$25,this.getPendingAccessRequestsData$=Ke$1(()=>this.actions$.pipe(Ye$2(ps$1),Lr$1(({workspaceId:n$46})=>this.store.select(Dc(n$46)).pipe(oe$13(Boolean))),Mu(({workspaceId:n$46})=>this.store.select(Dc(n$46))),q$20(([{objectType:n$46,objectId:a$30,setLoadedPendingRequestsState:c$37,params:m$32},l$26])=>Sf({workspaceId:l$26,objectType:n$46,objectId:a$30,setLoadedPendingRequestsState:c$37,queryParams:m$32})))),this.loadPendingAccessRequestsData$=Ke$1(()=>this.actions$.pipe(Ye$2(Sf),Z$12(n$46=>this.requestAccessApiService.getPendingAccessRequests(n$46).pipe(q$20(({requests:a$30})=>_f({accessRequests:a$30,objectId:n$46.objectId,setLoadedPendingRequestsState:n$46.setLoadedPendingRequestsState})),Xo$2(a$30=>qe$6(vf({error:a$30,setLoadedPendingRequestsState:n$46.setLoadedPendingRequestsState}))))))),this.loadPendingAccessRequestsDataFailure$=Ke$1(()=>this.actions$.pipe(Ye$2(vf),q$20(n$46=>this.requestAccessActionService.createGlobalError(n$46)),q$20(n$46=>new _d(n$46)))),this.loadPendingAccessRequestsDataSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(_f),Mu(()=>[this.store.select(c$31)]),q$20(([{accessRequests:n$46,objectId:a$30,setLoadedPendingRequestsState:c$37},m$32])=>bf({accessRequests:Ha.fromPendingAccessRequestsResponse(n$46,m$32),objectId:a$30,setLoadedPendingRequestsState:c$37})))),this.joinFetchedAccessRequestsWithStored$=Ke$1(()=>this.actions$.pipe(Ye$2(bf),Mu(()=>[this.store.select(cf)]),q$20(([{accessRequests:n$46,objectId:a$30,setLoadedPendingRequestsState:c$37},m$32])=>AO({accessRequestsMap:SZ(a$30,n$46,m$32),setLoadedPendingRequestsState:c$37})))),this.resetAccessRequestsMap$=Ke$1(()=>this.actions$.pipe(Ye$2(ve$6),q$20(()=>wO()))),this.getBulkAccessRequestsData$=Ke$1(()=>this.actions$.pipe(Ye$2(Ef),Lr$1(()=>this.store.select(o$30).pipe(oe$13(Boolean))),Mu(()=>[this.store.select(o$30),this.store.select(c$31)]),Rr(([{objectIds:n$46},a$30,c$37])=>this.requestAccessApiService.getBulkAccessRequests(a$30,l$25(n$46)).pipe(q$20(({requests:m$32})=>bf({accessRequests:Ha.fromBulkAccessRequestsResponse(m$32,c$37)})),Xo$2(this.requestAccessActionService.handleError.bind(this))))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(R$1),ge$10(q$19),ge$10(rm));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();CZ=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.memberApiService=r$34,this.updateTeamMembers$=Ke$1(()=>this.actions$.pipe(Ye$2(Cf),Rr(o$32=>this.memberApiService.getTeamMembers(o$32.teamId,{includeReadOnly:!0,includeGuestAccess:!0,includeInternalGuests:!0}).pipe(q$20(s$25=>st$9({teamId:o$32.teamId,changes:{members:s$25}}))))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(J$3));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();kZ=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.websocketV2Service=r$34,this.accessRequestClosed$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.AccessRequestClosed).pipe(Mu(()=>this.store.select(ae$8)),oe$13(([o$32,s$25])=>_Z(o$32,Number(s$25))),q$20(([{payload:o$32}])=>Ef({objectIds:[o$32?.access_request_id]}))));}ngrxOnRunEffects(e$19){return this.websocketV2Service.enableMessage(t$17.AccessRequestClosed),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(G$9));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();TZ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.actions$=e$19,this.requestAccessApiService=r$34,this.trackEventsService=o$32,this.requestAccessActionService=s$25,this.store=n$46,this.requestObjectAccess$=Ke$1(()=>this.actions$.pipe(Ye$2(kf),le$5(({workspaceId:a$30,objectType:c$37,objectId:m$32,showToast:l$26,errorItem:g$19,params:f$33,via:h$15,viaObjectType:I$25})=>this.handleObjectAccessRequest({objectItem:{workspace_id:a$30,object_type:c$37,object_id:m$32},showToast:l$26,errorItem:g$19,params:f$33,via:h$15,viaObjectType:I$25})))),this.requestObjectAccessFailure$=Ke$1(()=>this.actions$.pipe(Ye$2(wf),le$5(({error:a$30,showToast:c$37,errorItem:m$32})=>{this.requestAccessActionService.requestSentActions(`failure`,c$37,m$32),fA(`Error requesting access`,{feature:`request-access`,cause:a$30});return qe$6(new _d(a$30 instanceof M$21&&a$30.error?a$30.error:a$30));}))),this.requestObjectAccessSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(Af),Is$1(({accessRequest:a$30,via:c$37,viaObjectType:m$32})=>{this.trackEventsService.trackEventRequestAccess({accessRequest:a$30,via:c$37,viaObjectType:m$32});}),Mu(()=>[this.store.select(c$31)]),le$5(([{accessRequest:a$30,showToast:c$37,errorItem:m$32},l$26])=>{let g$19=[bf({accessRequests:Ha.fromRequestObjectAccess(a$30,l$26)})];return this.requestAccessActionService.requestSentActions(`success`,c$37,m$32),j$23(g$19);})));}handleObjectAccessRequest({objectItem:e$19,showToast:r$34,errorItem:o$32,params:s$25,via:n$46,viaObjectType:a$30}){let{workspace_id:c$37,object_type:m$32,object_id:l$26}=e$19;return this.requestAccessApiService.requestObjectAccess(c$37.toString(),m$32,l$26,s$25).pipe(q$20(g$19=>Af({accessRequest:g$19,showToast:r$34,errorItem:o$32,via:n$46,viaObjectType:a$30})),Xo$2(g$19=>qe$6(wf({error:g$19,showToast:r$34,errorItem:o$32}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(R$1),ge$10(cu),ge$10(rm),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();IZ=sn({requestAccessMap:null,isLoadedPendingRequestsState:!1,error:null},on(kf,ps$1,t$21=>({...t$21,isLoadedPendingRequestsState:!1})),on(vf,(t$21,i$27)=>({...t$21,error:i$27.error,isLoadedPendingRequestsState:i$27.setLoadedPendingRequestsState??!1})),on(AO,(t$21,i$27)=>({...t$21,requestAccessMap:i$27.accessRequestsMap,isLoadedPendingRequestsState:i$27.setLoadedPendingRequestsState??!1})),on(wO,t$21=>({...t$21,requestAccessMap:null})));VN();e$11(`request_access_store_module`,`load`);EZ=(()=>{class t$21{constructor(){e$11(`request_access_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[rm,E_],imports:[gi$1,rn.forFeature(`request-access`,IZ),Je$4.forFeature([bZ,TZ,vZ,CZ,kZ])]});}}return t$21;})();dm();VN();n$24(`app_module`,`connection_datadog_log_effects`,`load`);AZ=(()=>{class t$21{constructor(e$19,r$34){this.connectionService=e$19,this.windowService=r$34,this.connected$=Ke$1(()=>this.connectionService.isConnected.pipe(zt$2(),hs$3(),oe$13(([o$32,s$25])=>!o$32&&s$25),Is$1(()=>{er$2(`fe_platform_location_on_reconnect`,{url:this.windowService.href});})),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`app_module`,`connection_datadog_log_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(R$15),ge$10(f$23));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();wZ=sn({started:!1,paused:!1},on(KS,t$21=>({...t$21,started:!0,paused:!1})),on(zS,t$21=>({...t$21,paused:!0})),on(ZS,t$21=>({...t$21,paused:!1})),on(XS,t$21=>({...t$21,started:!1,paused:!1})));VN();e$11(`session_replay_module`,`load`);MZ=(()=>{class t$21{constructor(){e$11(`session_replay_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(JS,wZ)]});}}return t$21;})();VN();dm();hr$3();VN();xZ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19,f$33,h$15,I$25,A$22){this.store=e$19,this.navService=r$34,this.dataService=o$32,this.action$=s$25,this.userStateFacade=n$46,this.userService=a$30,this.router=c$37,this.helpers=m$32,this.applicationEnvironmentService=l$26,this.preloader=g$19,this.environmentInjector=f$33,this.sidebarLayoutService=h$15,this.appLocationService=I$25,this.clickUpRouter=A$22,this.isSidebarV3$=this.sidebarLayoutService.isSidebarV3$,this.isLayoutV39$=oe$3(),this.isLayoutV4$=n$35(),this.isOnChatView$=this.appLocationService.isOnChatView$,this.reloadSidebar$=Ke$1(()=>this.action$.pipe(Ye$2(re$8),Mu(()=>this.store.select(b$17)),oe$13(([{reloadData:R$21},w$26])=>R$21&&!!w$26&&!!w$26.id),q$20(([{options:R$21,fromWebsocket:w$26},{dashboard:E$16}])=>E$16===T$22.Five||E$16===T$22.Six?w$20({includeArchived:R$21.showArchived,label:`setSidebarOption`,fromWebsocket:w$26}):Te$5({label:`setSidebarOption`,fromWebsocket:w$26})))),this.resetSidebarToDefault$=Ke$1(()=>this.action$.pipe(Ye$2(Et$2),q$20(()=>re$8({options:{isCollapsed:!1,width:256},reloadData:!1,fromWebsocket:!1,skipLocalStorage:!1})))),this.loadSidebarOption$=Ke$1(()=>this.action$.pipe(Ye$2(ie$6),Mu(()=>[this.store.select(p$20),this.isLayoutV39$,this.isLayoutV4$]),le$5(([R$21,w$26,E$16,P$20])=>{if(R$21.skipIfLoaded&&w$26.loaded)return z$18;let B$22=R$21.isSidebarV3,G$16=P$20?Be$4:Pe$1,v$22=localStorage.getItem(G$16),x$28=k$15||(v$22?JSON.parse(v$22):!1),U$19=parseInt(localStorage.getItem(Ve$3),10)||(B$22?256:w$26.width)||0,H$10=parseInt(localStorage.getItem(Ne$3),10)||(B$22?256:w$26.width)||0;return U$19<200?U$19=B$22?256:300:U$19>370&&(U$19=370),B$22&&x$28&&(U$19=P$20?72:E$16?76:57),qe$6(re$8({options:{width:U$19,previousWidth:H$10,isCollapsed:x$28,loaded:!0},reloadData:!1,fromWebsocket:R$21.fromWebsocket}));}))),this.setSidebarOption$=Ke$1(()=>this.action$.pipe(Ye$2(re$8),Mu(()=>[this.isLayoutV4$]),Is$1(([{options:R$21,skipLocalStorage:w$26},E$16])=>{k$15||w$26||(R$21.isCollapsed!==void 0&&(n$27(Pe$1,R$21.isCollapsed),E$16&&n$27(Be$4,R$21.isCollapsed)),R$21.width!==void 0&&n$27(Ve$3,String(R$21.width)),R$21.previousWidth!==void 0&&n$27(Ne$3,String(R$21.previousWidth)));})),{dispatch:!1}),this.setSidebarArchiveOption$=Ke$1(()=>this.action$.pipe(Ye$2(It$3),le$5(({reloadData:R$21,value:w$26,nextParams:E$16})=>qe$6(re$8({options:{showArchived:w$26},reloadData:R$21,fromWebsocket:!1,nextParams:E$16}))))),this.toggleSidebarArchiveOption$=Ke$1(()=>this.action$.pipe(Ye$2(ne$5),Mu(()=>this.store.select(p$20)),le$5(([{reloadData:R$21},w$26])=>qe$6(re$8({options:{showArchived:!w$26.showArchived},reloadData:R$21,fromWebsocket:!1}))))),this.toggleSidebarShowAllSpacesOption$=Ke$1(()=>this.action$.pipe(Ye$2(le$4),Mu(()=>this.store.select(p$20)),le$5(([R$21,w$26])=>qe$6(re$8({options:{showAllSpaces:!w$26.showAllSpaces},reloadData:!1,fromWebsocket:!1}))))),this.setSidebarIsFlyoutV4Option$=Ke$1(()=>this.action$.pipe(Ye$2(pe$6),le$5(({isFlyoutV4:R$21})=>qe$6(re$8({options:{isFlyoutV4:R$21},reloadData:!1,fromWebsocket:!1}))))),this.setSidebarIsFlyoutV4AndFixedOption$=Ke$1(()=>this.action$.pipe(Ye$2(de$8),le$5(({isFlyoutV4AndFixed:R$21})=>qe$6(re$8({options:{isFlyoutV4AndFixed:R$21},reloadData:!1,fromWebsocket:!1}))))),this.setSidebarIsFlyoutV4AndAnimatedOption$=Ke$1(()=>this.action$.pipe(Ye$2(ce$7),Rr(({isFlyoutV4AndAnimated:R$21})=>Ls$2(()=>R$21===!0,Q$17(280).pipe(q$20(()=>re$8({options:{isFlyoutV4AndAnimated:R$21},reloadData:!1,fromWebsocket:!1}))),qe$6(re$8({options:{isFlyoutV4AndAnimated:R$21},reloadData:!1,fromWebsocket:!1})))))),this.toggleSidebarCollapsedOption$=Ke$1(()=>this.action$.pipe(Ye$2(me$6),Mu(()=>[this.store.select(p$20),this.isSidebarV3$,this.isLayoutV39$,this.isLayoutV4$,this.isOnChatView$]),q$20(([{skipLocalStorage:R$21},w$26,E$16,P$20,B$22,G$16])=>{G$16&&!B$22&&n$27(Le$5,`true`);let v$22=!w$26.isCollapsed,x$28=w$26.width;return re$8({options:{isCollapsed:v$22,width:E$16?v$22?P$20?76:57:w$26.previousWidth||258:w$26.width,previousWidth:x$28},reloadData:!1,fromWebsocket:!1,skipLocalStorage:R$21});}))),this.setCollapsedSidebarVisibleOption$=Ke$1(()=>this.action$.pipe(Ye$2(Se$8),Mu(()=>[this.isOnChatView$,this.isLayoutV4$]),q$20(([{visible:R$21},w$26,E$16])=>(w$26&&!R$21&&!E$16&&n$27(Le$5,`true`),re$8({options:{},reloadData:!1,fromWebsocket:!1}))))),this.openSidebar$=Ke$1(()=>this.action$.pipe(Ye$2(ue$8),Mu(()=>[this.store.select(p$20)]),q$20(([R$21,w$26])=>re$8({options:{isCollapsed:!1,width:Math.max(w$26.previousWidth,w$26.width),previousWidth:w$26.previousWidth},reloadData:!1,fromWebsocket:!1})))),this.closeSidebar$=Ke$1(()=>this.action$.pipe(Ye$2(Tt$3),Mu(()=>[this.store.select(p$20),this.isLayoutV39$]),le$5(([{skipLocalStorage:R$21},w$26,E$16])=>w$26.isCollapsed?z$18:j$23([re$8({options:{isCollapsed:!0,previousWidth:w$26.width,width:E$16?76:57,loaded:R$21?!0:w$26.loaded},reloadData:!1,fromWebsocket:!1,skipLocalStorage:R$21}),r$31({active:!1})])))),this.resizeSidebar$=Ke$1(()=>this.action$.pipe(Ye$2(be$5),Mu(()=>[this.store.select(p$20),this.isSidebarV3$,this.isLayoutV39$]),q$20(([{width:R$21},w$26,E$16,P$20])=>{let B$22=R$21||w$26.width,G$16=w$26.previousWidth,v$22;return B$22<=200?(B$22=E$16?P$20?76:57:200,B$22=P$20?76:E$16?57:200,v$22=!0):(v$22=!1,B$22>=370&&(B$22=370)),G$16<200&&(G$16=E$16?256:300),re$8({options:{width:B$22,previousWidth:G$16,isCollapsed:v$22},reloadData:!1,fromWebsocket:!1});}))),this.setCategoryList$=Ke$1(()=>this.action$.pipe(Ye$2(xe$3),le$5(({projectId:R$21,data:w$26,noRedirect:E$16})=>E$16?[ae$7({projectId:R$21,data:w$26,updateLoading:!1})]:[ae$7({projectId:R$21,data:w$26,updateLoading:!1}),new S$18({label:`set project list`,queryParams:null})]))),this.setCurrentSidebarList$=Ke$1(()=>this.action$.pipe(Ye$2(Ie$4),Mu(()=>this.store.select(w$24)),oe$13(([,R$21])=>R$21&&R$21!==`-1`),q$20(([{data:R$21,noRedirect:w$26},E$16])=>xe$3({projectId:E$16,data:R$21,noRedirect:w$26})))),this.reloadCurrentSidebarList$=Ke$1(()=>this.action$.pipe(Ye$2(Te$5),Mu(()=>[this.store.select(w$24),this.store.select(Xc$1),this.store.select(de$10),this.store.select(c$35)]),oe$13(([,R$21,w$26])=>!!R$21||w$26),le$5(([{label:R$21,fromWebsocket:w$26,nextRoute:E$16},,P$20,B$22,G$16])=>{let v$22=[];return P$20&&v$22.push(N$15({teamId:B$22.id,label:R$21,fromWebsocket:w$26})),G$16||v$22.push(I$19({label:R$21,fromWebsocket:w$26,nextRoute:E$16})),v$22;}))),this.moveSidebarSubcategoryState$=Ke$1(()=>this.action$.pipe(Ye$2(Ce$4),Mu(()=>[this.store.select(Tc),this.store.select(y$18)]),le$5(([{payload:{subcategory:R$21,fromCategory:w$26,fromIndex:E$16,toIndex:P$20,toCategory:B$22,noRedirect:G$16}},v$22,x$28])=>{let U$19=[],H$10=!1,te$16=(v$22||[]).findIndex(ye$5=>ye$5.id===w$26.id);if(te$16!==-1){let ye$5=v$22[te$16];ye$5.id===`-3`&&ye$5.project_id!==w$26.project_id&&(te$16=-1);}if(te$16===-1&&(v$22=x$28[w$26.project_id]||[],te$16=v$22.findIndex(ye$5=>ye$5.id===w$26.id),H$10=!0),te$16!==-1){let ye$5;if(w$26.id===B$22.id){let ke$5=[...w$26.subcategories].map(Qe$3=>Qe$3.id!==R$21.id?Qe$3:{...Qe$3,...R$21});ae$2(ke$5,E$16,P$20),ye$5=[...v$22.slice(0,te$16),{...w$26,subcategories:ke$5},...v$22.slice(te$16+1)];}else{let ke$5=v$22.findIndex(Qe$3=>Qe$3.id===B$22.id);if(ke$5!==-1){let Qe$3=[...w$26.subcategories].map(Zt$4=>Zt$4.id!==R$21.id?Zt$4:{...Zt$4,...R$21}),Ct$5=[...B$22.subcategories];Xe(Qe$3,Ct$5,E$16,P$20),ye$5=[...v$22],ye$5[te$16]={...w$26,subcategories:Qe$3},ye$5[ke$5]={...B$22,subcategories:Ct$5};}}ye$5&&(H$10?U$19.push(ae$7({projectId:w$26.project_id,data:ye$5,updateLoading:!1})):U$19.push(Ie$4({data:ye$5,noRedirect:G$16})));}return j$23(U$19);}))),this.dropSidebarSubcategory$=Ke$1(()=>this.action$.pipe(Ye$2(Be$7),Mu(()=>[this.store.select(Tc),this.store.select(w$24)]),le$5(([{payload:R$21},,w$26])=>{let E$16=[],{subcategory:P$20,toIndex:B$22,fromCategory:G$16,toCategory:v$22,sprint:x$28}=R$21,U$19={...P$20,oldOrderindex:P$20.orderindex,oldCategory:P$20.category,orderindex:B$22,category:v$22.id};if(G$16.id!==v$22.id){let ye$5=0;for(;this.navService.isSubcategoryNameExists(U$19.name,v$22.id)&&(++ye$5,!(ye$5>100));){let ke$5=/\((\d+)\)$/;ke$5.test(U$19.name)?U$19.name=U$19.name.replace(ke$5,(...Qe$3)=>`(${parseInt(Qe$3[1],10)+1})`):U$19.name=`${U$19.name} (1)`;}}U$19.hiddenCategory&&v$22.id!==`-3`&&(U$19.hiddenCategory=null),!U$19.hiddenCategory&&v$22.id===`-3`&&(U$19.hiddenCategory=v$22),E$16.push(Ce$4({payload:{...R$21,subcategory:U$19,noRedirect:!0}}));let H$10=this.activeDropSidebarSubcategorySubscriptions[U$19.id];H$10&&(H$10.unsubscribe(),this.activeDropSidebarSubcategorySubscriptions[U$19.id]=void 0);let te$16;if(G$16.id===v$22.id){if(G$16.id===`-3`){let ye$5={...P$20.hiddenCategory,orderindex:B$22};te$16=this.navService.changeCategoryPosition(ye$5,!1);}else te$16=this.navService.changeSubcategoryPosition(U$19,!1);}else v$22.id===`-3`&&(U$19.orderindex=B$22),te$16=this.navService.moveSubcategory(U$19,v$22.id,U$19.name,!1,v$22.id===`-3`?v$22.project_id:w$26,!1,!1,!1,null,null,x$28,!1).subscribe({error:()=>{this.navService.onChange.emit({type:`changeSubcategoryPosition`,payload:U$19});}});return te$16&&(this.activeDropSidebarSubcategorySubscriptions[U$19.id]=te$16),j$23(E$16);}))),this.dropSidebarCategory$=Ke$1(()=>this.action$.pipe(Ye$2(Pe$2),q$20(({payload:{category:R$21,toIndex:w$26,projectId:E$16,categories:P$20}})=>{let B$22=P$20;ae$2(B$22,B$22.indexOf(R$21),w$26);let v$22={...R$21,orderindex:w$26};return this.navService.changeCategoryPosition(v$22,!1),ae$7({projectId:E$16,data:B$22,updateLoading:!1});}))),this.reorderSidebar$=Ke$1(()=>this.action$.pipe(Ye$2(Me$2),le$5(({payload:{categoryId:R$21,projectId:w$26}})=>(R$21?this.dataService.reorderLists(R$21):this.dataService.reorderCategories(w$26)).pipe(q$20(()=>R$19({projectId:w$26,fromWebsocket:!1,label:`reorder-sidebar`})))))),this.createNewWorkspaceWorkspace$=Ke$1(()=>this.action$.pipe(Ye$2(_e$1),le$5(()=>{let R$21=[];R$21.push(s$13()),R$21.push(ke$4({teamId:null}));let w$26={onboard_type:`new_team`};return oo$2(this.environmentInjector,()=>Qt$1(Bu.BeginNewWorkspaceSetup)),this.userStateFacade.partiallyUpdateUser({onboarding_data:w$26}),this.userService.updateUserOnboarding({onboarding_data:w$26}).pipe(Is$1(()=>{this.router.navigate([`team-setup`,`additional`]);}),le$5(()=>j$23(R$21)));}))),this.changeWorkspaces$=Ke$1(()=>this.action$.pipe(Ye$2(ve$6),oe$13(({oldWorkspace:R$21,newWorkspace:w$26})=>R$21.id!==w$26.id),le$5(({oldWorkspace:R$21,newWorkspace:w$26})=>{let E$16=`remote-work`;return this.helpers.getCookie(E$16)===`true`&&this.helpers.setCookie(E$16,`false`,0),$i([this.applicationEnvironmentService.handshakeInitiated$,this.applicationEnvironmentService.handshakeCompleted$]).pipe(oe$13(([,P$20])=>P$20!==null),zt$2((P$20,B$22)=>P$20!==B$22),le$5(()=>{let P$20=[];return n$27(`currentTeam`,w$26.id),this.preloader.show(),this.userService.updateUser({default_team:w$26.id,caller:`file:sidebar.effects fn:changeWorkspaces`}).pipe(Mu(()=>this.store.select(b$17)),le$5(()=>{if(location.pathname.indexOf(`settings/team/`)!==-1){let B$22=`team`;if(w$26.role>2&&(B$22=`profile`),j$20){if(w$26?.branding?.enabled&&w$26?.branding?.custom_url){window.location.href=`https://${w$26.branding.custom_url}/${w$26.id}/settings/${B$22}`;return;}if(R$21?.branding?.enabled){window.location.href=`${w$25.appUrl}/${w$26.id}/settings/${B$22}`;return;}}this.clickUpRouter.goToPersonalSettings(w$26.id);}else{if(j$20){if(w$26?.branding?.enabled&&w$26?.branding?.custom_url){window.location.href=`https://${w$26.branding.custom_url}/${w$26.id}`;return;}if(R$21?.branding?.enabled){window.location.href=`${w$25.appUrl}/${w$26.id}`;return;}}this.router.navigate([`/`,w$26.id],{queryParams:{}});}return j$23(P$20);}));}));}))),this.pinMenuItem$=Ke$1(()=>this.action$.pipe(Ye$2(fe$3),Mu(()=>this.store.select(Oe$4)),q$20(([{item:R$21,pinned:w$26},E$16])=>{return Le$6({items:Object.entries({...E$16,[R$21]:w$26}).reduce((B$22,[G$16,v$22])=>v$22?[...B$22,G$16]:B$22,[])});}))),this.updatePinnedMenuItems$=Ke$1(()=>this.action$.pipe(Ye$2(Le$6),Mu(()=>this.store.select(b$17)),oe$13(([,R$21])=>!!R$21),Q$15({run:({items:R$21},w$26)=>this.userService.updateUser({pinned_sidebar_items:R$21}).pipe(le$5(()=>z$18),ws$2(p$28({payload:{...w$26,user_settings:ue(w$26?.user_settings,{pinned_sidebar_items:R$21})}}))),undoAction:(R$21,w$26)=>p$28({payload:w$26})}))),this.resetEntitlements$=Ke$1(()=>this.action$.pipe(Ye$2(ve$6),q$20(()=>v$20.resetEntitlements()))),this.activeDropSidebarSubcategorySubscriptions={};}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Jr),ge$10(Ci),ge$10(Le$4),ge$10(U$15),ge$10(nr$1),ge$10(x$22),ge$10(k$17),ge$10(Ni),ge$10(f$19),ge$10(re$9),ge$10(st),ge$10(J$5),ge$10(qd));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`sidebar_store_module`,`load`);OZ=(()=>{class t$21{constructor(){e$11(`sidebar_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`sidebar`,re$5),Je$4.forFeature([xZ])]});}}return t$21;})();dm();R_=F$23(Vn());PZ=F$23(Vn());U$18();w_=F$23(Vn());hr$3();M_=class{constructor(i$27,e$19){this.sidebarRecentFacade=i$27,this.isLayoutV4$=e$19;}getName(){return`sidebar-recent`;}getId(){return`sidebar-recent-startup-job`;}run(i$27){return this.isLayoutV4$.pipe(Is$1(e$19=>{e$19&&this.sidebarRecentFacade.initRecents();}),q$20(()=>!0));}};VN();tye=new Zu(null,new N$11(R_.default.CLICKUP_DOCUMENT_PAGE),new N$11(R_.default.TASK),new N$11(R_.default.LIST)),UZ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.actions$=e$19,this.store=r$34,this.searchService=o$32,this.sidebarRecentFacade=s$25,this.workspaceStartupService=n$46,this.isLayoutV4$=n$35().pipe(zt$2()),this.triggerRecentsFetchOnNavigationChange=Ke$1(()=>this.actions$.pipe(Ye$2(t.listenNavigationChanges),le$5(()=>this.sidebarRecentFacade.navigationListeners$.pipe(q$20(()=>t.loadRecents()))))),this.triggerRecentsFetchOnLimitChange=Ke$1(()=>this.store.select(_$).pipe(oe$13(a$30=>a$30!=null),zt$2(),q$20(()=>t.loadRecents()))),this.loadRecents=Ke$1(()=>this.actions$.pipe(Ye$2(t.loadRecents),Mu(()=>this.store.select(_$)),oe$13(([,a$30])=>!!a$30),le$5(([,a$30])=>this.searchService.searchClickUp(tye,{limit:a$30}).pipe(q$20(c$37=>t.setSearchResults({results:c$37})),Xo$2(()=>qe$6(t.loadRecentsFailure())))))),this.processSearchResults=Ke$1(()=>this.actions$.pipe(Ye$2(t.setSearchResults),Mu(()=>this.store.select(Z)),q$20(([a$30,c$37])=>({searchResults:c$37,ids:$Z(c$37)})),Mu(({ids:a$30})=>$i([this.store.select(Kc$2(a$30)),this.store.select(o$30)])),q$20(([{searchResults:a$30,ids:c$37},[m$32,l$26]])=>t.loadRecentsSuccess({recents:VZ({subcategories:m$32??[],searchResults:a$30,ids:c$37,teamId:l$26})}))));}ngrxOnRunEffects(e$19){return this.workspaceStartupService.addStartupJob(new M_(this.sidebarRecentFacade,this.isLayoutV4$)),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(B$9),ge$10(Re),ge$10(q));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`sidebar_recent_store_module`,`load`);WZ=(()=>{class t$21{constructor(){e$11(`sidebar_recent_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[rn.forFeature(A$2,J$1),Je$4.forFeature(UZ)]});}}return t$21;})();VN();e$11(`status_store_module`,`load`);F_=(()=>{class t$21{constructor(){e$11(`status_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[F$2],imports:[gi$1,rn.forFeature(I$3,J$2)]});}}return t$21;})();zZ=F$23(KI());dm();rM=F$23(_r());VN();dm();VN();GZ=(()=>{class t$21{constructor(e$19,r$34,o$32){this.dataService=e$19,this.http=r$34,this.applicationEnvironmentService=o$32;}getTaskStatuses(e$19){return this.dataService.getTasksByIds([e$19],!1,[`statuses`]).pipe(q$20(P_));}getAllStatuses(e$19){return this.applicationEnvironmentService.environment$.pipe(Ve$4(1),le$5(({apiUrlCustomFieldsV2Service:r$34})=>this.http.get(`${r$34}/team/${e$19}/fields/taskStatuses`)));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Ci),ge$10(ve$7),ge$10(Ni));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();iM=null;n$24(`status_hierarchy_store_module`,`status_hierarchy_effects`,`load`);qZ=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.statusApiService=r$34,this.store=o$32,this.splitService=s$25,this.fetchTaskStatuses$=Ke$1(()=>this.actions$.pipe(Ye$2(rt),le$5(({taskId:n$46})=>this.statusApiService.getTaskStatuses(n$46)),Mu(()=>this.store.select(Ru)),le$5(([n$46,a$30])=>[E$3({items:x_(n$46,a$30)}),l$7({statuses:O_(n$46)})]))),this.fetchAllStatuses$=Ke$1(()=>this.actions$.pipe(Ye$2(O$15),Mu(()=>[this.store.select(o$30),this.splitService.getTreatmentWithConfig({name:O$16.HierarchyTeamApiMigration})]),oe$13(([,,n$46])=>n$46.config?!JSON.parse(n$46.config).getTeam?.include_all_statuses:!1),le$5(([n$46,a$30])=>{let c$37=n$46.teamId||a$30;return this.statusApiService.getAllStatuses(c$37).pipe(oe$13(m$32=>!(iM&&(0,zZ.default)(iM,m$32))),q$20(m$32=>(iM=m$32,st$9({teamId:c$37,changes:{all_statuses:m$32}}))));})));}ngrxOnRunEffects(e$19){return n$24(`status_hierarchy_store_module`,`status_hierarchy_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(GZ),ge$10(q$19),ge$10(Qn));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();KZ=F$23(_r());dm();dm();dm();dm();VN();L_=f$30.byNamespace(`reactive-ngrx`);n$24(`status_hierarchy_store_module`,`sync_status_hierarchy_effects`,`load`);tee=(()=>{class t$21{constructor(e$19){this.actions$=e$19,this.store=C$23(q$19),this.enabled$=p$5(),this.projects$=this.enableStream(XZ(this.actions$,L_)),this.categories$=this.enableStream(YZ(this.actions$,L_)),this.subcategories$=this.enableStream(ZZ(this.actions$,L_)),this.tasks$=this.enableStream(eee(this.actions$,L_)),this.syncProjectStatuses$=Ke$1(()=>this.projects$.pipe(le$5(r$34=>[E$3({items:JZ(r$34)}),l$7({statuses:j_(r$34)})]))),this.syncCategoryStatuses$=Ke$1(()=>this.categories$.pipe(le$5(r$34=>{let o$32=r$34.flatMap(({categories:n$46,projectId:a$30})=>QZ(n$46,a$30)),s$25=r$34.flatMap(({categories:n$46})=>j_(n$46));return[E$3({items:o$32}),l$7({statuses:s$25})];}))),this.syncSubcategoryStatuses$=Ke$1(()=>this.subcategories$.pipe(le$5(({subcategories:r$34,categoryId:o$32})=>[E$3({items:$_(r$34,o$32)}),l$7({statuses:j_(r$34)})]))),this.syncTaskStatuses$=Ke$1(()=>this.tasks$.pipe(q$20(r$34=>P_(r$34)),Mu(()=>this.store.select(Ru)),le$5(([r$34,o$32])=>[E$3({items:x_(r$34,o$32)}),l$7({statuses:O_(r$34)})])));}ngrxOnRunEffects(e$19){return n$24(`status_hierarchy_store_module`,`sync_status_hierarchy_effects`,`run`),e$19;}enableStream(e$19){return this.enabled$.pipe(zt$2(),le$5(r$34=>r$34?e$19:z$18));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`status_hierarchy_store_module`,`load`);ree=(()=>{class t$21{constructor(){e$11(`status_hierarchy_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[M$2],imports:[gi$1,Je$4.forFeature([qZ,tee]),rn.forFeature(F$5,mt$1)]});}}return t$21;})();iee=sn({targetProduct:null},on(R$2,(t$21,i$27)=>({...t$21,targetProduct:i$27.product})),on(d$3,t$21=>({...t$21,targetProduct:null})));VN();e$11(`target_product_module`,`load`);oee=(()=>{class t$21{constructor(){e$11(`target_product_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(Ad,iee)]});}}return t$21;})();dm();VN();VN();dm();gye=[`archived`,`assignee`,`avatar`,`category_hidden`,`category`,`color`,`content`,`custom_items_default`,`date_created`,`date_updated`,`deleted`,`due_date_time`,`due_date`,`editor_token`,`hide_description`,`orderindex`,`override_statuses`,`owner`,`permission_level`,`permissions`,`personal_list`,`priority`,`private`,`project_id`,`sprint_date_done`,`sprint_date_progress`,`sprint_end_date`,`sprint_index`,`sprint_start_date`,`sprint_status`,`sprint`,`start_date_time`,`start_date`,`status`,`taskCount`,`taskcount`];oM=function(t$21){return t$21.FOUND=`found`,t$21.NOT_FOUND=`not_found_or_authorized`,t$21.VERSION_UNAVAILABLE=`version_not_available`,t$21;}(oM||{});VN();pee=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.listV3Resource=C$23(Bs),this.cachedMissingLists=new Map(),this.missingListIdsToIgnore=new Set(),this.minimalTaskSubcategoriesEnabled$=jS(O$16.ViewsMinimalTaskSubcategories);}getTaskLists(e$19,r$34){return this.store.select(Hl).pipe(ds(),Mu(()=>this.minimalTaskSubcategoriesEnabled$),Z$12(([o$32,s$25])=>{let{missingListIds:n$46,foundLists:a$30}=lee(e$19,o$32,{cachedMissingLists:this.cachedMissingLists,missingListIdsToIgnore:this.missingListIdsToIgnore,minimalTaskSubcategoriesEnabled:s$25});return n$46.length?this.getMissingTaskLists(n$46,r$34).pipe(q$20(c$37=>a$30.concat(c$37))):qe$6(a$30);}));}getMissingTaskLists(e$19,r$34){return this.listV3Resource.getListsByIds(e$19,r$34).pipe(q$20(o$32=>dee(o$32)),Is$1(({failedListIds:o$32,lists:s$25})=>{s$25.forEach(n$46=>this.cachedMissingLists.set(n$46.id,n$46)),o$32.forEach(n$46=>this.missingListIdsToIgnore.add(n$46));}),q$20(({lists:o$32})=>o$32));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();bye=f$30.byNamespace(`tasks`);n$24(`app_module`,`task_bulk_effects`,`load`);gee=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30){this.actions$=e$19,this.attachmentApiService=r$34,this.store=o$32,this.taskBulkService=s$25,this.taskBulkListsService=n$46,this.attachmentsApiService=a$30,this.shouldUseAttachmentsV3BulkApi$=jS(O$16.ViewsShouldUseAttachmentsV3BulkApi),this.bulkReadTasks=Ke$1(()=>this.actions$.pipe(Ye$2(a$9),q$20(({fieldNames:c$37,fieldMetadata:m$32,...l$26})=>({...l$26,...(m$32||j$2(c$37??[]))})),Is$1(({taskIds:c$37,teamId:m$32,rootTaskId:l$26})=>{c$37.length>1e3&&bye.warn(`[Task Bulk Fetch] Exceeded max task loading count, dropping tasks: teamId: ${m$32}, rootTaskId: ${l$26}, task count: ${c$37.length}`);}),Mu(()=>this.store.select(Qs$3)),Z$12(([c$37,m$32])=>{let l$26=c$37.filterOmit;return!l$26&&!c$37.filterResponse&&(l$26=J$7),j$23(I$21(c$37.taskIds.slice(0,1e3),100)).pipe(Z$12(g$19=>c$37.rootTaskId&&z$16?this.taskBulkService.readPublicSubtasks({customFieldIds:c$37.customFieldIds,fields:c$37.fields,orderindexes:c$37.orderindexes,publicSharingData:m$32,rootTaskId:c$37.rootTaskId,subtaskIds:g$19,tags:c$37.tags,taskRelationshipTypes:c$37.taskRelationshipTypes,teamId:c$37.teamId}):this.taskBulkService.readTasks({customFieldIds:c$37.customFieldIds,fields:c$37.fields,filterOmit:l$26,filterResponse:c$37.filterResponse,orderindexes:c$37.orderindexes,tags:c$37.tags,taskIds:g$19,taskRelationshipTypes:c$37.taskRelationshipTypes,teamId:c$37.teamId}),2),is(),q$20(g$19=>c$15({teamId:c$37.teamId,responses:g$19,filterOutNotFound:c$37.filterOutNotFound})));}))),this.hydrateTaskCustomFields=Ke$1(()=>this.actions$.pipe(Ye$2(c$15),q$20(({teamId:c$37,responses:m$32,filterOutNotFound:l$26,loadedTaskFields:g$19})=>{let f$33=m$32.map(h$15=>{let{tasks:I$25,failedTaskIds:A$22}=Js(c$37)(h$15);return{tasks:I$25.filter(w$26=>!l$26||!A$22.includes(w$26.id)).map(w$26=>{let E$16=at$1(w$26.fields,{groupMap:h$15.group_map,relatedTaskMap:h$15.related_task_map,statuses:h$15.statuses,userMap:h$15.user_map}),P$20=ut(h$15.fields,E$16);return{...w$26,customFieldValues:E$16,customFields:P$20};}),failedTaskIds:A$22};});return k$11({tasks:f$33.flatMap(h$15=>h$15.tasks),teamId:c$37,failedTaskIds:f$33.flatMap(h$15=>h$15.failedTaskIds),loadedTaskFields:g$19});}))),this.addTags$=Ke$1(()=>this.actions$.pipe(Ye$2(c$15),q$20(({teamId:c$37,responses:m$32,filterOutNotFound:l$26})=>{let g$19=Js(c$37),h$15=m$32.flatMap(I$25=>{let{tasks:A$22,failedTaskIds:R$21}=g$19(I$25);return A$22.filter(w$26=>!l$26||!R$21.includes(w$26.id));}).flatMap(I$25=>I$25.tags).filter(I$25=>!!I$25);return h$15.length===0?{type:`noop`}:u$10({projectId:h$15[0].project_id,tag:h$15});}))),this.cacheReadTasks=Ke$1(()=>this.actions$.pipe(Ye$2(k$11),Mu(()=>this.store.select(Ue$5)),q$20(([{tasks:c$37,loadedTaskFields:m$32},l$26])=>new x$21(see(c$37,l$26),m$32,{keepAlreadyLoadedCustomFields:!0})))),this.fetchTaskLists=Ke$1(()=>this.actions$.pipe(Ye$2(k$11),oe$13(()=>!z$16),Rr(({tasks:c$37,teamId:m$32})=>this.taskBulkListsService.getTaskLists(c$37,m$32).pipe(q$20(l$26=>cee({tasks:c$37,listsById:Y$7(l$26)})),oe$13(l$26=>l$26.length>0),q$20(l$26=>Tt$2({taskUpdates:l$26})))))),this.fetchTaskCustomFieldAttachments=Ke$1(()=>this.actions$.pipe(Ye$2(k$11),oe$13(()=>!z$16),q$20(({tasks:c$37})=>({tasks:c$37,attachmentIds:nee(c$37)})),oe$13(({attachmentIds:c$37})=>c$37.length>0),Mu(()=>[this.shouldUseAttachmentsV3BulkApi$]),q$20(([c$37,m$32])=>m$32?h$4(c$37):n$16(c$37)))),this.fetchTaskCustomFieldAttachmentsLegacy=Ke$1(()=>this.actions$.pipe(Ye$2(n$16),Z$12(({tasks:c$37,attachmentIds:m$32})=>this.attachmentApiService.getAttachmentsByIds(m$32).pipe(q$20(({attachments:l$26})=>({tasks:c$37,attachments:l$26})))),q$20(c$37=>m$14(c$37)))),this.fetchTaskCustomFieldAttachmentsWithAttachmentsV3=Ke$1(()=>this.actions$.pipe(Ye$2(h$4),Mu(()=>this.store.select(o$30).pipe(R$20())),Z$12(([{tasks:c$37,attachmentIds:m$32},l$26])=>j$23(I$21(m$32,100)).pipe(Z$12(g$19=>this.attachmentsApiService.fetchBulkWorkspaceAttachmentsByIds(l$26,g$19).pipe(Xo$2(()=>z$18)),2),is(),q$20(g$19=>{let[h$15,I$25]=i$22(g$19.flatMap(({attachments:A$22})=>A$22),A$22=>A$22.status===`found`);return{tasks:c$37,attachments:h$15.map(({data:A$22})=>A$22),notFoundAttachmentIds:I$25.map(({object_id:A$22})=>A$22)};}))),q$20(c$37=>r$14(c$37)))),this.setNotFoundAttachmentIds=Ke$1(()=>this.actions$.pipe(Ye$2(r$14),Mu(()=>this.store.select(Lo$2)),q$20(([{notFoundAttachmentIds:c$37},m$32])=>pt$2({notFoundAttachmentIdsMap:c$37.reduce((l$26,g$19)=>(l$26[g$19]=!0,l$26),{...m$32})})))),this.fetchTaskCustomFieldAttachmentsSuccess=Ke$1(()=>this.actions$.pipe(Ye$2(m$14,r$14),q$20(({tasks:c$37,attachments:m$32})=>({tasks:c$37,attachmentsById:Y$7(m$32)})),q$20(mee),q$20(c$37=>new x$21(c$37))));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_bulk_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(M$6),ge$10(q$19),ge$10(T$10),ge$10(pee),ge$10(B));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();hr$3();VN();dm();hr$3();C$22();VN();dm();hr$3();VN();yee=(()=>{class t$21{constructor(){this.isOvmPersistEnabled$=jS(O$16.FePlatformKillRefreshOvmPersist),this.taskBulkService=C$23(T$10),this.store=C$23(q$19),this.viewsTaskBulkOvmService=C$23(es),this.syntheticMarkerService=C$23(N$12);}readTasks({taskIds:e$19,teamId:r$34,fields:o$32,filterOmit:s$25,filterResponse:n$46,customFieldIds:a$30,taskRelationshipTypes:c$37,orderindexes:m$32,tags:l$26,rollupFields:g$19,taskUpdateBulkJob:f$33}){let{batchId:h$15,batchSize:I$25,chunkId:A$22,chunkSize:R$21,websocketClientTraces:w$26,isLastChunk:E$16}=f$33||{},P$20=de$2(r$34);return this.markFetchTaskOnTaskUpdate({taskIds:e$19,operation:`start`,websocketClientTraces:w$26,batchId:h$15,batchSize:I$25,chunkId:A$22,chunkSize:R$21}),this.taskBulkService.readTasks({taskIds:e$19,teamId:r$34,fields:o$32,filterOmit:s$25,filterResponse:n$46,customFieldIds:a$30,taskRelationshipTypes:c$37,orderindexes:m$32,tags:l$26,rollupFields:g$19}).pipe(Is$1(()=>{this.markFetchTaskOnTaskUpdate({taskIds:e$19,operation:`finish`,websocketClientTraces:w$26,batchId:h$15,batchSize:I$25,chunkId:A$22,chunkSize:R$21});}),q$20(B$22=>(B$22.fields?.length||delete B$22.fields,P$20(B$22))),Mu(()=>[this.store.select(J$9(`task`)),this.store.select(p$24),this.isOvmPersistEnabled$]),q$20(([{tasks:B$22,failedTaskIds:G$16},v$22,x$28,U$19])=>{let H$10={tasks:B$22,versions:v$22,tasksCache:x$28,isOvmPersistEnabled:U$19,context:{tags:l$26,teamId:r$34,loadedTaskFields:[],fieldsMetadata:{customFieldIds:a$30,fields:o$32,orderindexes:m$32,rollupFields:g$19??[],taskRelationshipTypes:c$37??[]}}};return{tasks:this.viewsTaskBulkOvmService.mapTasksForOvm(H$10),failedTaskIds:G$16};}),q$20(({failedTaskIds:B$22,tasks:G$16})=>({failedTaskIds:B$22,tasks:G$16,teamId:r$34,isLastChunk:E$16})));}markFetchTaskOnTaskUpdate({taskIds:e$19,operation:r$34,batchId:o$32,batchSize:s$25,chunkId:n$46,chunkSize:a$30,websocketClientTraces:c$37}){this.syntheticMarkerService.mark(`service.versioned_task_bulk.read_tasks.${o$32}.${n$46}.${r$34}`,{batchId:o$32}).addMetaData({batchSize:s$25,chunkId:n$46,chunkSize:a$30,taskIds:e$19,websocketClientTraces:c$37});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();VN();vee=(()=>{class t$21{constructor(){this.syntheticMarkerService=C$23(N$12);}createBulkTaskUpdateBatchMarker(e$19){try{this.syntheticMarkerService.createSyntheticMarker(`websocket.task_update.bulk.batch_processed.${e$19}`).setDependenciesByName([`ngrx.effect.versioned_read_tasks.*`,`service.versioned_task_bulk.read_tasks.*`]).setContext({batchId:e$19}).setStartMarkerByName(`ngrx.effect.versioned_read_tasks.${e$19}.start`).reportOnMarkerByName(`ngrx.effect.versioned_read_tasks.${e$19}.finish`);}catch{}}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();VN();See=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.actionQueue=[],this.isProcessing=!1;}dispatchActions(e$19){this.actionQueue.push(...e$19),this.isProcessing||this.processActionQueue();}processActionQueue(){if(this.actionQueue.length===0){this.isProcessing=!1;return;}this.isProcessing=!0,this.scheduleIdleCallback(e$19=>{for(;this.actionQueue.length>0&&(!e$19||e$19.timeRemaining()>1);){let r$34=this.actionQueue.shift();r$34&&this.store.dispatch(r$34);}this.actionQueue.length>0?this.processActionQueue():this.isProcessing=!1;});}scheduleIdleCallback(e$19){`requestIdleCallback`in window?window.requestIdleCallback(e$19,{timeout:50}):e$19(void 0);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();bee=(()=>{class t$21{constructor(){this.versionedTaskBulkService=C$23(yee),this.syntheticMarkerService=C$23(N$12),this.throttledActionDispatcherService=C$23(See),this.taskBulkPerformanceMonitoringService=C$23(vee);}enhanceActionWithBatchInfo(e$19){let{fieldNames:r$34,taskIds:o$32,contextsByTaskId:s$25,tags:n$46}=e$19,a$30=w$22(),c$37=this.extractWebsocketClientTraces(o$32,s$25);return{fieldNames:r$34,taskIds:o$32,contextsByTaskId:s$25,tags:n$46,...j$2(r$34??[]),batchId:a$30,websocketClientTraces:c$37,batchSize:o$32.length};}extractWebsocketClientTraces(e$19,r$34){let o$32=[];return e$19.forEach(s$25=>{r$34?.[s$25]?.forEach(a$30=>{let c$37=`payload`in a$30?a$30.payload.client_trace:a$30.client_trace;c$37&&o$32.push(c$37);});}),o$32;}markPerformanceStart(e$19){this.taskBulkPerformanceMonitoringService.createBulkTaskUpdateBatchMarker(e$19.batchId),this.markPerformanceEvent(e$19,`start`);}markPerformanceFinish(e$19){this.markPerformanceEvent(e$19,`finish`);}processTaskChunks(e$19,r$34){let o$32=I$21(e$19.taskIds.slice(0,1e3),100);return j$23(o$32).pipe(Z$12((s$25,n$46)=>{let a$30=n$46===o$32.length-1;return this.readTasksChunk(e$19,s$25,r$34,a$30);},2),Is$1(s$25=>{s$25.isLastChunk&&this.markPerformanceFinish(e$19);}),le$5(s$25=>this.handleTaskResponse(s$25,e$19)));}readTasksChunk(e$19,r$34,o$32,s$25){return this.versionedTaskBulkService.readTasks({fields:e$19.fields,taskIds:r$34,teamId:o$32??``,customFieldIds:e$19.customFieldIds,orderindexes:e$19.orderindexes,taskRelationshipTypes:e$19.taskRelationshipTypes,tags:e$19.tags,taskUpdateBulkJob:{batchId:e$19.batchId,batchSize:e$19.batchSize,chunkSize:r$34.length,chunkId:w$22(),isLastChunk:s$25,websocketClientTraces:e$19.websocketClientTraces}});}handleTaskResponse(e$19,r$34){let o$32=[];return e$19.tasks.forEach(s$25=>{let n$46=s$25.id;(r$34.contextsByTaskId?.[n$46]??[]).forEach(c$37=>{o$32.push(Se$5.fetchTaskOnTaskUpdatedSuccess({task:s$25,context:c$37}));});}),this.throttledActionDispatcherService.dispatchActions(o$32),z$18;}markPerformanceEvent(e$19,r$34){let{taskIds:o$32,websocketClientTraces:s$25,batchId:n$46,batchSize:a$30}=e$19;this.syntheticMarkerService.mark(`ngrx.effect.versioned_read_tasks.${n$46}.${r$34}`,{batchId:n$46}).addMetaData({batchSize:a$30,taskIds:o$32,websocketClientTraces:s$25});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();n$24(`app_module`,`versioned_task_bulk_effects`,`load`);Cee=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.helperService=C$23(bee),this.versionedReadTasks=Ke$1(()=>this.actions$.pipe(Ye$2(u$14),q$20(e$19=>this.helperService.enhanceActionWithBatchInfo(e$19)),Is$1(e$19=>this.helperService.markPerformanceStart(e$19)),Mu(()=>[this.store.select(kA)]),Z$12(([e$19,r$34])=>this.helperService.processTaskChunks(e$19,r$34))),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`app_module`,`versioned_task_bulk_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();hr$3();VN();_ee=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.managerDataService=C$23(Ci),this.taskService=C$23(zr$1),this.store=C$23(q$19),this.moveTasksUndo$=Ke$1(()=>this.actions$.pipe(Ye$2($s$1),le$5(({undoItem:e$19})=>this.managerDataService.batchUndo(e$19.type??`taskPosition`,e$19.undoBody).pipe(q$20(()=>Ta({undoItem:e$19})),Xo$2(()=>qe$6(ga())))))),this.moveTasksUndoSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(Ta),oe$13(({undoItem:e$19})=>!!e$19.task?.subcategory_id&&!!e$19.task?.category_id&&!!e$19.task?.project_id),Mu(({undoItem:e$19})=>[this.store.select($t$2(e$19.task?.subcategory_id??``)),this.store.select(Qt$2(e$19.task?.category_id??``)),this.store.select(Q$16(e$19.task?.project_id??``)),this.store.select(Z$10)]),Z$12(([{undoItem:e$19},r$34,o$32,s$25,n$46])=>{this.taskService.onChange.emit(e$19);let c$37=n$46&&e$19.task&&e$19.task.subtaskIds?.includes(n$46)?n$46:e$19.task?.id??null,m$32=o$32??{id:`-3`,name:`hidden`,hidden:!0,subcategories:[r$34]};if(!c$37||!r$34||!s$25)return[];let l$26=[];return l$26.push(u$28.restoreTasksPosition({instanceId:0,tasks:e$19.undoBody.tasks})),l$26.push(o$21({entity:{type:`task`,id:c$37,name:`task`}})),l$26.push(d$8.updateTaskSubcategory({taskId:c$37,newSubcategory:r$34})),m$32?.id&&l$26.push(d$8.updateTaskCategoryId({taskId:c$37,newCategoryId:m$32.id})),l$26.push(d$8.updateTaskProjectId({taskId:c$37,newProjectId:s$25.id})),l$26;})));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();kee=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[Je$4.forFeature([_ee])]});}}return t$21;})();VN();dm();hr$3();VN();VN();dm();hr$3();Iee=Mr(F$23(He$3()).default`
    query aiRequest(
      $listExternalID: String!
      $jwt: String!
      $commentExternalID: String!
    ) {
      aiRequest(
        type: CREATE_SUBTASKS
        input: {
          listExternalID: $listExternalID
          jwt: $jwt
          commentExternalID: $commentExternalID
        }
      ) {
        completionObject
      }
    }
  `,{},{});VN();Eee=(()=>{class t$21{constructor(){this.sdApiService=C$23(Ri),this.authTokenService=C$23(Rc$1);}createSubtasksFromCommentWithAi(e$19,r$34){return this.sdApiService.graphql(Iee,{variables:{listExternalID:`subcategory:${e$19}`,jwt:this.authTokenService.getJWT(),commentExternalID:`comment:${r$34}`},fetchPolicy:`network-only`}).pipe(Ve$4(1),q$20(({data:o$32})=>this.getSubtaskIdsFromResponse(o$32)));}getSubtaskIdsFromResponse(e$19){return(e$19?.aiRequest?.completionObject?.subtasks).map(o$32=>o$32.id);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Aee=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19){this.actions$=e$19,this.store=r$34,this.createSubtasksWithAiResource=o$32,this.toastService=s$25,this.taskV3Service=n$46,this.quotaRunOutLoader=a$30,this.contentAssistantEntitlementService=c$37,this.addTaskFromCommentToThreadService=m$32,this.sharedTaskService=l$26,this.locale=g$19,this.createSubtasksFromCommentWithAiPaywallCheck$=Ke$1(()=>this.actions$.pipe(Ye$2(c$10),Mu(()=>this.contentAssistantEntitlementService.shouldShowQuotaRunOut$),Is$1(([f$33,h$15])=>{h$15&&this.quotaRunOutLoader.showQuotaRunOutModal(`task-comment`,r$24.ProjectManagement);}),oe$13(([f$33,h$15])=>!h$15),q$20(([f$33])=>n$11(f$33)))),this.createSubtasksFromCommentWithAi$=Ke$1(()=>this.actions$.pipe(Ye$2(n$11),Is$1(()=>{this.toastService.addToastItem({isV3Toast:!0,title:"Creating subtask(s)...",spinner:!0,timeout:6e4,id:`createSubtasksFromCommentWithAi`});}),ee$8({id:({originalComment:f$33})=>f$33.id,run:({parent:f$33,listId:h$15,originalComment:I$25,commentThreadHistoryId:A$22})=>this.createSubtasksWithAiResource.createSubtasksFromCommentWithAi(h$15,I$25.id).pipe(q$20(R$21=>k$4({parent:f$33,subtaskIds:R$21,originalComment:I$25,commentThreadHistoryId:A$22}))),onError:()=>p$6()}))),this.createSubtasksFromCommentWithAiSuccessParentCache$=Ke$1(()=>this.actions$.pipe(Ye$2(k$4),oe$13(({subtaskIds:f$33})=>!!f$33.length),q$20(({parent:f$33,subtaskIds:h$15})=>jt$2({tasks:[{id:f$33.id,subtaskIds:[...new Set([...(f$33.subtaskIds??[]),...h$15])]}]})))),this.createSubtasksFromCommentWithAiSuccessSubtasksFetchAndCache$=Ke$1(()=>this.actions$.pipe(Ye$2(k$4),oe$13(({subtaskIds:f$33})=>!!f$33.length),Mu(({parent:f$33})=>[this.store.select(kA).pipe(R$20()),this.store.select(b(f$33.id))]),Z$12(([{subtaskIds:f$33,originalComment:h$15,commentThreadHistoryId:I$25,parent:A$22},R$21,w$26])=>this.taskV3Service.fetchTasksExperienceById(f$33,R$21,j$2(Object.keys(w$26)).fields).pipe(q$20(E$16=>({tasks:E$16,parent:A$22,originalComment:h$15,commentThreadHistoryId:I$25})))),q$20(({tasks:f$33,parent:h$15,originalComment:I$25,commentThreadHistoryId:A$22})=>(this.toastService.removeToastById(`createSubtasksFromCommentWithAi`),this.toastService.addToastItem(this.generateSuccessToast(f$33,h$15,I$25,A$22)),new x$21(f$33))))),this.createSubtasksFromCommentWithAiSuccessColumnFetch$=Ke$1(()=>this.actions$.pipe(Ye$2(k$4),oe$13(({subtaskIds:f$33,parent:h$15})=>!!f$33.length&&!h$15.subtaskIds?.length),Mu(()=>[this.store.select(kA).pipe(R$20())]),q$20(([{parent:f$33},h$15])=>_b({taskId:f$33.id,teamId:h$15,rootTaskId:f$33.id,tags:[[n$34.Load,`TaskSubtasksColumnsResourceEffects.createSubtasksFromCommentWithAiSuccessColumnFetch$`]]})))),this.createSubtasksFromCommentWithAiNoneFound$=Ke$1(()=>this.actions$.pipe(Ye$2(k$4),oe$13(({subtaskIds:f$33})=>!f$33.length),q$20(()=>{this.toastService.removeToastById(`createSubtasksFromCommentWithAi`),this.toastService.addToastItem({isV3Toast:!0,icon:`closeCircleFilled`,iconClass:`danger`,title:"No tasks found in comment"});})),{dispatch:!1}),this.createSubtasksFromCommentWithAiFail$=Ke$1(()=>this.actions$.pipe(Ye$2(p$6),q$20(()=>{this.toastService.removeToastById(`createSubtasksFromCommentWithAi`),this.toastService.addToastItem({isV3Toast:!0,icon:`closeCircleFilled`,iconClass:`danger`,title:"Creating subtasks failed"});})),{dispatch:!1}),this.subtaskCreateSuccessToastIntl=new mr$2("Created a subtask \"{taskName}\" from this comment",this.locale);}generateSuccessToast(e$19,r$34,o$32,s$25){let n$46=e$19[0],a$30=e$19.length===1?" Subtask created":" "+e$19.length+" Subtasks created",c$37=e$19.length===1?this.subtaskCreateSuccessToastIntl.format({taskName:`<strong>${this.truncateString(n$46.name,55)}</strong>`}).toString():" Created "+e$19.length+" subtasks from this comment",m$32={name:`Open`,buttonSize:m$23.small,buttonType:t$16.outline,buttonIcon:`newTab`,callback:()=>{this.sharedTaskService.openTaskExt({id:n$46.id,customId:n$46.custom_id,teamId:n$46.team});}},l$26={name:e$19.length===1?"Copy link":"Copy links",buttonSize:m$23.small,buttonType:t$16.outline,buttonIcon:`link`,callback:()=>{navigator.clipboard.writeText(this.getCopyString(e$19));}},g$19={name:`Post to thread`,buttonSize:m$23.small,buttonType:t$16.primary,buttonIcon:`backlink`,callback:()=>{this.handlePostToThread(e$19,r$34,o$32,s$25);}},f$33;return e$19.length===1?f$33=[m$32,l$26,g$19]:f$33=[l$26,g$19],{title:a$30,descriptionHtml:c$37,actions:f$33,isV3Toast:!0,timeout:1e4,icon:`circleCheckFilled`,iconClass:`success`,modifier:`notification-success`,footerAlignment:e$19.length===1?`group-end`:`end`};}getCopyString(e$19){let r$34=``;return e$19.length===1?r$34=oe$11(e$19[0]):r$34=e$19.map((o$32,s$25)=>`	`.repeat(s$25+1)+oe$11(o$32)).join(`
`),r$34;}createSubtaskSuccessComment(e$19,r$34){let o$32=[],s$25=e$19.length===1?"Created subtask from a comment:":"Created subtasks from a comment:";return o$32.push({type:o$20,attributes:{},text:s$25}),o$32.push({type:o$20,attributes:{},text:`
`}),e$19.length===1?(o$32.push({task_mention:{task_id:e$19[0].id},text:`${e$19[0].id} `,type:`task_mention`}),o$32.push({type:o$20,attributes:{},text:`
`})):e$19.forEach(n$46=>{o$32.push({task_mention:{task_id:n$46.id},text:`${n$46.id} `,type:`task_mention`}),o$32.push({type:o$20,attributes:{},text:`
`});}),{thread_followers:[r$34],user:r$34,id:``,date:String(Date.now()),reactions:[],comment:o$32};}handlePostToThread(e$19,r$34,o$32,s$25){this.store.select(b$17).pipe(R$20()).pipe(Ve$4(1)).subscribe(n$46=>{this.addTaskFromCommentToThreadService.postSubtaskToThread({originalComment:o$32,newComment:this.createSubtaskSuccessComment(e$19,n$46),parentTaskId:r$34.id,commentThreadHistoryId:s$25,user:n$46});});}truncateString(e$19,r$34){return e$19.length>r$34?e$19.slice(0,r$34).trimEnd()+`...`:e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Eee),ge$10(q$14),ge$10(lo),ge$10(j$10),ge$10(bt$3),ge$10(O$7),ge$10(ty),ge$10(al$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();wee=sn(ls$1.getInitialState(),on(j$14.markDirty,(t$21,i$27)=>ls$1.updateOne({id:hs$1(i$27),changes:{dirty:!0}},t$21)),on(j$14.setVersion,(t$21,{id:i$27,ovmType:e$19,version:r$34})=>r$34?ls$1.upsertOne({id:i$27,ovmType:e$19,version:r$34,dirty:!1},t$21):t$21),on(j$14.getVersionsSuccess,(t$21,i$27)=>ls$1.distinctUpsertMany(i$27.versions.map(e$19=>({...e$19,dirty:!1})),t$21)),on(j$14.setVersions,(t$21,{versions:i$27})=>ls$1.updateMany(i$27.filter(e$19=>!!e$19.version).map(e$19=>({id:hs$1(e$19),changes:{dirty:!1,version:e$19.version}})),t$21)),on(j$14.removeVersion,(t$21,i$27)=>ls$1.removeOne(hs$1(i$27),t$21)),on(j$14.removeVersionsByEntry,(t$21,{entries:i$27})=>{let e$19=i$27.map(r$34=>hs$1(r$34));return ls$1.removeMany(e$19,t$21);}),on(j$14.clear,t$21=>ls$1.removeAll(t$21)),on(ve$6,t$21=>ls$1.removeAll(t$21)));VN();Mee=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[rn.forFeature(ns$2,wee)]});}}return t$21;})();dm();N_=Le$9(`[FePlatformKillRefreshTaskStateManagement] Update`,qe$5());VN();Ree=(()=>{class t$21{constructor(){this.killRefresh$=p$5(),this.killRefreshEffect$=Ke$1(()=>this.killRefresh$.pipe(zt$2(),q$20(e$19=>N_({on:e$19}))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();_ye={on:!1},Fee=`fePlatformKillRefreshTaskStateManagement`,xee=sn(_ye,on(N_,(t$21,{on:i$27})=>({on:i$27})));VN();Oee=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(Fee,xee),Je$4.forFeature([Ree])]});}}return t$21;})();dm();hr$3();VN();Pee=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30){this.action$=e$19,this.managerDataService=r$34,this.store=o$32,this.taskService=s$25,this.toastService=n$46,this.taskUndoToastService=a$30,this.addTasksToAnotherList$=Ke$1(()=>this.action$.pipe(Ye$2(e$7),Mu(({listId:c$37})=>[this.store.select(d$19),this.store.select($t$2(c$37))]),le$5(([{task_ids:c$37,listId:m$32,muteNotifications:l$26,subtaskId:g$19,showToast:f$33,listName:h$15},I$25,A$22])=>this.managerDataService.addTasksToAnotherList(c$37,m$32,{muteNotifications:l$26}).pipe(le$5(()=>{let R$21=[];if(R$21.push(new l$23(g$19||c$37[0],`addTasksToAnotherList`,!1)),R$21.push(O$15({})),f$33&&h$15){let w$26=I$25?.id===m$32?"Personal List":h$15;this.taskUndoToastService.generateTimlSuccessToast({successToastEvent:tt$1.AddedTo,title:"Added "+c$37.length+" tasks to "+w$26+"",taskIds:c$37,subcategory:A$22??{id:m$32,name:w$26}});}if(I$25?.id===m$32){let w$26=I$25.taskcount??I$25.taskCount,E$16=w$26?+w$26:0;R$21.push(_e$2({projectId:I$25.project_id,data:{[I$25.id]:{taskcount:E$16+c$37.length}}}));}return this.taskService.onChange.emit({type:`taskPosition`,undoBody:{tasks:c$37.map(w$26=>({id:w$26}))}}),R$21;}),ws$2(...c$37.map(R$21=>g$12({taskId:R$21,taskLists:A$22?[A$22]:[]}))),Xo$2(R$21=>this.handleError(R$21))))));}handleError(e$19){return qe$6(new _d(e$19));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(Ci),ge$10(q$19),ge$10(zr$1),ge$10(q$14),ge$10(Ns));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();$ee=(()=>{class t$21{constructor(){this.websocketV2Service=C$23(G$9),this.wikiPaywallService=C$23(fu),this.copyOperationFailed$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.CopyOperationFinished).pipe(oe$13(({payload:e$19})=>Aa(e$19,`task`)),le$5(()=>this.wikiPaywallService.getOpenPaywallModalAction())));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();Dee=(()=>{class t$21{constructor(){this.websocketV2Service=C$23(G$9),this.splitServiceV2=C$23(Qn),this.actions=C$23(Le$4),this.taskService=C$23(zr$1),this.store=C$23(q$19),this.locale=C$23(al$1),this.copyTaskConcurrencyConfig$=this.splitServiceV2.getTreatmentWithConfig(O$16.CopyTaskConcurrency).pipe(q$20(e$19=>Lee(e$19.config))),this.duplicateTasksAsync$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.CopyBatchOperationFinished).pipe(Mu(()=>[this.copyTaskConcurrencyConfig$,this.taskService.targetSubcategoryToCopyTasks$.pipe(R$20()),this.store.select(d$19)]),oe$13(([{payload:e$19},r$34])=>r$34.enabled&&e$19.copy_result.length>0&&e$19.operation_type===`copy-tasks`),q$20(([{payload:e$19},,r$34,o$32])=>i$12({copyResult:e$19.copy_result,targetSubcategory:r$34,personalList:o$32})))),this.copyBatchOperationFinished$=Ke$1(()=>this.actions.pipe(Ye$2(i$12),Mu(({copyResult:e$19})=>[this.store.select($o$1(e$19.map(({original_object_id:r$34})=>r$34)))]),Is$1(([{copyResult:e$19,targetSubcategory:r$34,personalList:o$32},s$25])=>{let n$46=jee(e$19,r$34,this.locale,o$32);this.taskService.batchDuplicateTasks(n$46,s$25,e$19),this.taskService.setTargetSubcategoryToCopyTasks(null);})),{dispatch:!1});}ngrxOnRunEffects(e$19){return this.websocketV2Service.enableMessage(t$17.CopyBatchOperationFinished),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();Jp=Qt$3({source:`TaskFollowers`,events:{"Toggle Task Follow":qe$5()}});VN();Nee=(()=>{class t$21{constructor(e$19,r$34){this.action$=e$19,this.dataService=r$34,this.toggleTaskFollow$=Ke$1(()=>this.action$.pipe(Ye$2(Jp.toggleTaskFollow),le$5(({taskId:o$32,data:s$25})=>this.dataService.editTask(o$32,s$25).pipe(le$5(()=>z$18),Xo$2(n$46=>qe$6(new _d(n$46)))))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(Ci));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();hr$3();VN();dm();VN();n$24(`app_module`,`access_control_list_effects`,`load`);Uee=(()=>{class t$21{constructor(){this.action$=C$23(Le$4),this.accessControlListService=C$23(At$3),this.upsertMembersOrGroupsAccessControlList$=Ke$1(()=>this.action$.pipe(Ye$2(g$5),Z$12(({ids:e$19,kind:r$34,taskId:o$32,permissionLevel:s$25,entityType:n$46,taskMembers:a$30,taskGroupMembers:c$37})=>this.accessControlListService.upsertMembersOrGroupsAccessControlListIfEnabledOrFallback({params:{entityType:n$46,ids:e$19,kind:r$34,entityId:o$32,permissionLevel:s$25},fallback$:qe$6({members:[],group_members:[]})},!1).pipe(le$5(({members:m$32,group_members:l$26})=>{let g$19=[];switch(r$34){case`user`:g$19.push(...this.getUserStoreUpdateActions({taskId:o$32,newMembers:m$32,oldMembers:a$30,ids:e$19}));break;case`group`:g$19.push(...this.getGroupStoreUpdateActions({taskId:o$32,newGroupMembers:l$26,oldGroupMembers:c$37,ids:e$19}));break;default:throw new Error(`Invalid kind: ${r$34}`);}return j$23(g$19);})))));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`access_control_list_effects`,`run`),e$19;}getUserStoreUpdateActions({taskId:e$19,newMembers:r$34,oldMembers:o$32,ids:s$25}){let n$46=[],a$30=(o$32??[]).reduce((g$19,f$33)=>(g$19[f$33.user.id]=f$33.permission_level,g$19),{}),c$37=r$34.filter(({user:g$19})=>!a$30[g$19.id]),m$32=s$25.filter(g$19=>!r$34.some(f$33=>f$33.user.id===g$19)),l$26=r$34.filter(({user:g$19,permission_level:f$33})=>a$30[g$19.id]&&a$30[g$19.id]!==f$33);return c$37.length&&n$46.push(i$20.setTaskMembers({id:e$19,action:`add`,members:c$37})),m$32.length&&n$46.push(i$20.setTaskMembers({id:e$19,action:`remove`,ids:m$32})),l$26.length&&n$46.push(i$20.setTaskMembers({id:e$19,action:`update`,members:l$26})),n$46;}getGroupStoreUpdateActions({taskId:e$19,newGroupMembers:r$34,oldGroupMembers:o$32,ids:s$25}){let n$46=[],{addedGroups:a$30,updatedGroups:c$37,removedGroupIds:m$32}=w$5(o$32??[],r$34??[],s$25);return a$30.length&&n$46.push(i$20.setTaskGroupMembers({id:e$19,action:`add`,members:a$30})),m$32.length&&n$46.push(i$20.setTaskGroupMembers({id:e$19,action:`remove`,ids:m$32})),c$37.length&&n$46.push(i$20.setTaskGroupMembers({id:e$19,action:`update`,members:c$37})),n$46;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();Wee=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37){this.action$=e$19,this.store=r$34,this.dataService=o$32,this.inviteStatusService=s$25,this.toastService=n$46,this.simpleToastService=a$30,this.accessControlListService=c$37,this.clickUpRouterService=C$23(qd),this.reloadTaskMembers$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.reloadTaskMembers),q$20(m$32=>new l$23(m$32.id,`taskMembers`,!1,{"fields[]":[`members`]})))),this.setTaskMembers$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.setTaskMembers),Z$12(m$32=>this.store.select(Nt$3(m$32.id)).pipe(ds(),q$20(l$26=>({task:l$26,action:m$32})))),q$20(({task:m$32,action:l$26})=>new x$21([{...m$32,members:{...(m$32?.members??{}),task:Oo$1(m$32?.members?.task??[],l$26.action,l$26.ids,l$26.members)}}])))),this.setTaskGroupMembers$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.setTaskGroupMembers),Z$12(m$32=>this.store.select(Nt$3(m$32.id)).pipe(ds(),q$20(l$26=>({task:l$26,action:m$32})))),q$20(({task:m$32,action:l$26})=>new x$21([{...m$32,group_members:{...m$32.group_members,task:jo$1(m$32.group_members?.task??[],l$26.action,l$26.ids,l$26.members)}}])))),this.inviteUsersToTask$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.inviteUsersToTask),q$20(m$32=>new C$18(m$32.emails,m$32.role,{inviteToTask:m$32.taskId,emails:m$32.emails,permission:m$32.permission,roleSubtype:m$32.roleSubtype,...m$32.extra})))),this.updateTeamSuccess$=Ke$1(()=>this.action$.pipe(Ye$2(it$6),Z$12(m$32=>{if(m$32.extra?.emails){let l$26=m$32.data.members.filter(f$33=>{let h$15=f$33.user.email.toLowerCase();return(m$32.extra?.emails||[]).some(I$25=>h$15===I$25.toLowerCase());});l$26.map(f$33=>f$33.user.id).length>0&&m$32.extra.inviteToTask&&m$32.extra.inviteByMention&&this.inviteStatusService.setInviteStatus({id:m$32.extra.inviteToTask,itemType:`task`,members:l$26,inviteByMention:!0});}return z$18;})),{dispatch:!1}),this.addTaskMembers$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.addTaskMembers),Mu(()=>[this.store.select(cu$1)]),Z$12(([m$32,l$26])=>{let g$19=`task_${m$32.taskId}`,f$33=m$32.userIds.map(h$15=>({...l$26[h$15],permission_level:m$32.permission}));return ue$11(qe$6(wr$2({key:g$19,state:!0})),qe$6(i$20.setTaskMembers({id:m$32.taskId,action:`add`,members:f$33,skipReload:!0})),this.dataService.addTaskMembers(m$32.taskId,m$32.userIds,m$32.permission).pipe(Is$1(h$15=>{let I$25=h$15.members.filter(w$26=>m$32.userIds.includes(w$26.user.id)),A$22=I$25?.length===1?I$25[0]:void 0,R$21=""+I$25?.length+" users";m$32.inviteByMention||this.toastService.addToastItem({title:"Task shared",description:"Shared Task with "+(A$22?.user?.username??A$22?.user?.email??R$21)+"",isV3Toast:!0});}),le$5(h$15=>{this.inviteStatusService.setInviteStatus({id:m$32.taskId,itemType:`task`,members:h$15.members});let I$25=[i$20.setTaskMembers({id:m$32.taskId,action:`update`,members:h$15.members}),wr$2({key:g$19,state:!1})];return m$32.reloadTeamGuestInfo?.length&&I$25.push(ss({id:m$32.reloadTeamGuestInfo,skipCache:!0})),j$23(I$25);}),Xo$2(h$15=>Hi$2(this.handleError(h$15),qe$6(wr$2({key:g$19,state:!1}))))));}))),this.addTaskGroupMembers$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.addTaskGroupMembers),Mu(()=>[this.store.select(f$24)]),Z$12(([m$32,l$26])=>{let g$19=`task_${m$32.taskId}`,f$33=m$32.groupIds.map(h$15=>({group:l$26[h$15],permission_level:m$32.permission}));return ue$11(qe$6(wr$2({key:g$19,state:!0})),qe$6(i$20.setTaskGroupMembers({id:m$32.taskId,action:`add`,members:f$33})),this.dataService.addTaskGroupMembers(m$32.taskId,m$32.groupIds,m$32.permission).pipe(Is$1(h$15=>{let I$25=h$15.group_members?.length===1?h$15.group_members[0]:void 0,A$22=""+h$15.group_members?.length+" groups";this.toastService.addToastItem({title:"Shared Task with "+(I$25?.group?.name??I$25?.group?.handle??A$22)+""});}),le$5(h$15=>{let I$25=[i$20.setTaskGroupMembers({id:m$32.taskId,action:`update`,members:h$15.group_members}),wr$2({key:g$19,state:!1})];return m$32.reloadMembers&&I$25.push(r$16({taskId:m$32.taskId})),j$23(I$25);}),Xo$2(h$15=>Hi$2(this.handleError(h$15),qe$6(wr$2({key:g$19,state:!1}))))));}))),this.removeTaskUser$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.removeTaskMember),Z$12(m$32=>ue$11(qe$6(i$20.setTaskMembers({id:m$32.id,action:`remove`,ids:[m$32.userId],skipReload:!0})),this.dataService.removeTaskMember(m$32.id,m$32.userId).pipe(q$20(()=>i$20.setTaskMembers({id:m$32.id,action:`remove`,ids:[m$32.userId]})),Xo$2(this.handleError.bind(this))))))),this.removeTaskGroup$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.removeTaskGroupMember),Z$12(m$32=>ue$11(qe$6(i$20.setTaskGroupMembers({id:m$32.id,action:`remove`,ids:[m$32.groupId]})),this.dataService.removeTaskGroupMember(m$32.id,m$32.groupId).pipe(q$20(()=>i$20.setTaskGroupMembers({id:m$32.id,action:`remove`,ids:[m$32.groupId]})),Xo$2(this.handleError.bind(this))))))),this.removeTaskUsers$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.removeTaskMembers),Mu(()=>[this.accessControlListService.hasAccessToAcl$(`task`,!1)]),Z$12(([{id:m$32,ids:l$26},g$19])=>ue$11(qe$6(i$20.setTaskMembers({id:m$32,ids:l$26,action:`remove`,skipReload:!0})),this.getRemoveTaskMembersActions(m$32,l$26,g$19,`user`))))),this.removeTaskGroups$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.removeTaskGroupMembers),Mu(()=>[this.accessControlListService.hasAccessToAcl$(`task`,!1)]),Z$12(([{id:m$32,ids:l$26},g$19])=>ue$11(qe$6(i$20.setTaskGroupMembers({id:m$32,ids:l$26,action:`remove`})),this.getRemoveTaskMembersActions(m$32,l$26,g$19,`group`))))),this.updateTaskUser$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.updateTaskMember),Mu(()=>[this.store.select(cu$1)]),Z$12(([m$32,l$26])=>ue$11(qe$6(i$20.setTaskMembers({id:m$32.id,action:`update`,members:[{...l$26[m$32.userId],permission_level:m$32.permission}],skipReload:!0})),this.dataService.updateTaskMember(m$32.id,m$32.userId,m$32.permission).pipe(q$20(g$19=>i$20.setTaskMembers({id:m$32.id,action:`update`,members:[g$19.member]})),Xo$2(this.handleError.bind(this))))))),this.updateTaskGroup$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.updateTaskGroupMember),Mu(()=>[this.store.select(f$24)]),Z$12(([m$32,l$26])=>ue$11(qe$6(i$20.setTaskGroupMembers({id:m$32.id,action:`update`,members:[{group:l$26[m$32.groupId],permission_level:m$32.permission}]})),this.dataService.updateTaskGroupMember(m$32.id,m$32.groupId,m$32.permission).pipe(q$20(g$19=>i$20.setTaskGroupMembers({id:m$32.id,action:`update`,members:[g$19]})),Xo$2(this.handleError.bind(this))))))),this.addOrUpdateTaskUsers$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.addOrUpdateTaskMembers),Mu(()=>[this.accessControlListService.hasAccessToAcl$(`task`,!1)]),Z$12(([m$32,l$26])=>this.store.select(Nt$3(m$32.id)).pipe(ds(),Mu(()=>[this.store.select(cu$1)]),Z$12(([g$19,f$33])=>{let h$15=[],I$25={};g$19&&g$19.members?.task&&g$19.members.task.forEach(w$26=>I$25[w$26.user.id]=!0);let A$22=[],R$21=[];return m$32.data.forEach(({userId:w$26,permission:E$16})=>{let P$20={...f$33[w$26],permission_level:E$16};I$25[w$26]?R$21.push(P$20):A$22.push(P$20);}),l$26?(A$22.length&&h$15.unshift(i$20.setTaskMembers({id:m$32.id,action:`add`,members:A$22,skipReload:!0})),R$21.length&&h$15.unshift(i$20.setTaskMembers({id:m$32.id,action:`update`,members:R$21,skipReload:!0})),h$15.push(g$5({ids:m$32.data.map(w$26=>w$26.userId),taskId:m$32.id,kind:`user`,permissionLevel:m$32.data[0].permission,entityType:`task`,taskMembers:g$19?.members?.task}))):(A$22.forEach(({user:w$26,permission_level:E$16})=>{h$15.push(i$20.addTaskMembers({permission:E$16,taskId:m$32.id,userIds:[w$26.id]}));}),R$21.forEach(({user:w$26,permission_level:E$16})=>{h$15.push(i$20.updateTaskMember({id:m$32.id,userId:w$26.id,permission:E$16}));})),j$23(h$15);}))))),this.addOrUpdateTaskGroups$=Ke$1(()=>this.action$.pipe(Ye$2(i$20.addOrUpdateTaskGroupMembers),Mu(()=>[this.accessControlListService.hasAccessToAcl$(`task`,!1)]),Z$12(([m$32,l$26])=>this.store.select(Nt$3(m$32.id)).pipe(ds(),Mu(()=>[this.store.select(f$24)]),Z$12(([g$19,f$33])=>{let h$15=[],I$25={};g$19?.group_members?g$19.group_members.task?.forEach(w$26=>I$25[w$26.group.id]=!0):g$19?.groups&&g$19.groups.forEach(({group_id:w$26})=>I$25[w$26]=!0);let A$22=[],R$21=[];return m$32.data.forEach(({groupId:w$26,permission:E$16})=>{let P$20={group:f$33[w$26],permission_level:E$16};I$25[w$26]?R$21.push(P$20):A$22.push(P$20);}),l$26?(A$22.length&&h$15.unshift(i$20.setTaskGroupMembers({id:m$32.id,action:`add`,members:A$22})),R$21.length&&h$15.unshift(i$20.setTaskGroupMembers({id:m$32.id,action:`update`,members:R$21})),h$15.push(g$5({ids:m$32.data.map(w$26=>w$26.groupId),taskId:m$32.id,kind:`group`,permissionLevel:m$32.data[0].permission,entityType:`task`,taskGroupMembers:g$19?.group_members?.task}))):(A$22.length&&h$15.push(i$20.addTaskGroupMembers({taskId:m$32.id,groupIds:A$22.map(({group:w$26})=>w$26.id),permission:A$22[0].permission_level})),R$21.forEach(({permission_level:w$26,group:E$16})=>{h$15.push(i$20.updateTaskGroupMember({id:m$32.id,groupId:E$16.id,permission:w$26}));})),j$23(h$15);}))))),this.openShareModal$=Ke$1(()=>this.action$.pipe(Ye$2(Sr$1),oe$13(m$32=>m$32.itemType===`task`),le$5(m$32=>{let l$26=m$32.item;return Gi([this.store.select(Nt$3(l$26.id)).pipe(ds()),this.store.select(xe$5(l$26.category?.id??l$26.category_id,l$26.project?.id??l$26.project_id)).pipe(ds())]).pipe(le$5(([g$19,f$33])=>{let h$15=[];return g$19||h$15.push(new x$21([l$26])),f$33||h$15.push(R$19({projectId:l$26.project.id,fromWebsocket:!1,label:`open-share-momdal`})),j$23(h$15);}));})));}handleError(e$19){return qe$6(new _d(e$19));}getRemoveTaskMembersActions(e$19,r$34,o$32,s$25){return o$32?qe$6(g$5({ids:r$34,taskId:e$19,kind:s$25,permissionLevel:void 0,entityType:`task`})):j$23(r$34.map(n$46=>s$25===`user`?i$20.removeTaskMember({id:e$19,userId:n$46}):i$20.removeTaskGroupMember({id:e$19,groupId:n$46})));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Ci),ge$10(u$19),ge$10(q$14),ge$10(X$3),ge$10(At$3));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();hr$3();VN();Hee=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.action$=e$19,this.store=r$34,this.taskService=o$32,this.taskV3Service=s$25,this.teamId$=this.store.select(kA).pipe(R$20()),this.updateDueDates$=Ke$1(()=>this.action$.pipe(Ye$2(o$13.updateDueDates),Q$15({run:({tasks:n$46,dates:a$30,notify:c$37})=>this.taskService.setDueDates(n$46,a$30,!0,!1,!0,!0,!c$37,!1).pipe(q$20(()=>o$13.updateDueDatesSuccess())),undoAction:({tasks:n$46})=>(this.taskService.onChange.emit({tasks:n$46,field:d$21.name}),o$13.updateDueDatesError({}))}))),this.fetchUpdatedDurationForTasks$=Ke$1(()=>this.action$.pipe(Ye$2(o$13.fetchUpdatedDurationForTasks),Mu(()=>this.teamId$),Rr(([{tasks:n$46},a$30])=>this.taskV3Service.fetchTasksExperienceById(n$46.map(c$37=>c$37.id),a$30,[s$15.Core]).pipe(Is$1(c$37=>{let m$32=new Map(c$37.map(g$19=>[g$19.id,g$19])),l$26=n$46.map(g$19=>{let f$33=m$32.get(g$19.id)?.start_date,h$15=m$32.get(g$19.id)?.due_date;return{...g$19,start_date:f$33,due_date:h$15,duration:m$32.get(g$19.id)?.duration,duration_is_elapsed:m$32.get(g$19.id)?.duration_is_elapsed};});this.taskService.onChange.emit({tasks:l$26,field:d$21.name});}),q$20(()=>o$13.fetchUpdatedDurationForTasksSuccess())))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(zr$1),ge$10(lo));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();Gee=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.action$=r$34,this.handleRemoveSubtaskIdsEffect=Ke$1(()=>this.action$.pipe(Ye$2(Wt.handleRemoveSubtaskIds),Mu(()=>this.store.select(h$11)),q$20(([{subTaskIdsToRemove:o$32,newParentId:s$25,subtaskIds:n$46},a$30])=>{return new m$25(Ne(Oe$1(a$30,o$32),s$25,n$46));}))),this.updateParentTaskCountsAfterSubtaskMoveEffect=Ke$1(()=>this.action$.pipe(Ye$2(Wt.handleRemoveSubtaskIds),Mu(()=>this.store.select(h$11)),Rr(([{subTaskIdsToRemove:o$32,newParentId:s$25,subtaskIds:n$46},a$30])=>{let m$32=Ne(Oe$1(a$30,o$32),s$25,n$46),l$26=[...Object.keys(o$32||{}),s$25].filter(Boolean);if(l$26.length===0||n$46.length===0)return z$18;let g$19=[...n$46,...l$26];return this.store.select($o$1(g$19)).pipe(Ve$4(1),q$20(f$33=>{let h$15=new Map();f$33.forEach(w$26=>{w$26&&h$15.set(w$26.id,w$26);});let I$25=n$46.map(w$26=>h$15.get(w$26)).filter(w$26=>!!w$26),A$22=[],R$21=I$25.filter(w$26=>!ss$1(w$26.status)).length;return l$26.forEach(w$26=>{let E$16=h$15.get(w$26);if(!E$16)return;let P$20=m$32[w$26]?.length||0,B$22=E$16.subtasks_open_count||0;if(w$26===s$25)B$22+=R$21;else{let G$16=o$32?.[w$26]||[],v$22=I$25.filter(x$28=>G$16.includes(x$28.id)&&!ss$1(x$28.status)).length;B$22=Math.max(0,B$22-v$22);}A$22.push({id:E$16.id,subtasks_count:P$20,subtasks_open_count:B$22});}),new x$21(A$22);}));})));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();qee=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32){this.action$=e$19,this.store=r$34,this.dataService=o$32,this.taskService=s$25,this.publicViewHelper=n$46,this.segmentService=a$30,this.sharedTaskService=c$37,this.aiTaskPropertiesService=m$32,this.reset$=Ke$1(()=>this.action$.pipe(Ye$2(ve$6),q$20(()=>it$5()))),this.reloadTask$=Ke$1(()=>this.action$.pipe(Ye$2(G$14),rt$4(l$26=>l$26.id,l$26=>l$26.checkByPublicSharing?this.publicViewHelper.getTasks([l$26.id],{extraParams:{fromWebsocket:l$26.fromWebsocket,tag:l$26.tag||`reloadTask-taskdata-effect`}}).pipe(q$20(g$19=>new x$21(g$19,void 0,{fromAPI:!0})),Xo$2(g$19=>qe$6(new d$18(l$26.id,l$26.extraParams,g$19)))):this.dataService.getTaskForSharingAndCommunityTemplatesOnlyWithNoTaskVersioning(l$26.id,{allFields:l$26.fields,showError:l$26.showError,redirectOnError:!1,extraParams:l$26.extraParams}).pipe(le$5(g$19=>[new _$9(g$19,l$26.id),new x$21([g$19],void 0,{fromAPI:!0})]),Xo$2(g$19=>qe$6(new d$18(l$26.id,l$26.extraParams,g$19))))))),this.updateTask$=Ke$1(()=>this.action$.pipe(Ye$2(B$16),le$5(l$26=>this.dataService.editTask(l$26.id,l$26.apiPayload??l$26.data,!0,!1,!1,l$26.remapDates,!1,l$26.queryParams).pipe(le$5(g$19=>{if(g$19.due_date_conflict)return qe$6(new U$14({taskId:l$26.id,remapDatesId:l$26.remapDatesId,data:l$26.data,queryParams:l$26.queryParams,nextActions:l$26.nextActions}));let f$33={id:l$26.id,...l$26.data,...g$19.task},h$15=[new x$21([f$33],void 0,{fromAPI:!0}),new E$14(f$33),new y$14(l$26.id,void 0),...(l$26.nextActions||[])];return h$15.push(u$28.updateTasksState(0,[f$33],`updateTask`,null,null,!1)),j$23(h$15);}),dv(qe$6(new y$14(l$26.id,void 0))))))),this.loadTaskStatuses$=Ke$1(()=>this.action$.pipe(Ye$2(At$5),Mu(()=>this.store.select(p$24)),Z$12(([l$26,g$19])=>{let{tasks:f$33,forced:h$15}=l$26,I$25=f$33.filter(A$22=>h$15||!g$19[A$22.id]||!g$19[A$22.id]?.statuses).map(A$22=>A$22.id);return this.dataService.getTasksByIds(I$25,!0,[`statuses`],{tag:`getTaskStatuses`}).pipe(q$20(A$22=>new x$21(A$22,void 0,{fromAPI:!0,keepAlreadyLoadedCustomFields:!0})),Xo$2(A$22=>this.handleError(A$22)));}))),this.reloadTasksInProject$=Ke$1(()=>this.action$.pipe(Ye$2(X$11),Mu(()=>this.store.select(p$24)),Z$12(([l$26,g$19])=>{let{projectId:f$33}=l$26.payload,h$15=[];return Object.entries(g$19).forEach(([I$25,A$22])=>{A$22.project_id===f$33&&h$15.push(I$25);}),this.dataService.getTasksByIds(h$15,!0,this.taskService.getTaskFields(!1,!1),{tag:`reloadTasksInProject`}).pipe(q$20(I$25=>ht$2({tasks:I$25})),Xo$2(I$25=>this.handleError(I$25)));}))),this.reloadTasksInProjectSuccess$=Ke$1(()=>this.action$.pipe(Ye$2(ht$2),q$20(({tasks:l$26})=>new x$21(l$26,void 0,{fromAPI:!0})))),this.loadTasks$=Ke$1(()=>this.action$.pipe(Ye$2(Q$14),Mu(()=>this.store.select(p$24)),Z$12(([l$26,g$19])=>{let f$33=l$26.payload.skipCached?l$26.payload.ids.filter(I$25=>!g$19[I$25]):l$26.payload.ids;if(f$33.length===0)return z$18;let h$15=l$26.payload.fields||this.taskService.getTaskFields(!1,!1);return this.getTasks(f$33,h$15,{tag:l$26.payload.tag,fromWebsocket:l$26.payload.fromWebsocket}).pipe(q$20(I$25=>new x$21(I$25,h$15,{fromAPI:!0})),Xo$2(I$25=>this.handleError(I$25)));}))),this.removeTaskRelationships$=Ke$1(()=>this.action$.pipe(Ye$2(V$12),Mu(()=>this.store.select(p$24)),Z$12(([l$26,g$19])=>{let f$33=[];Object.entries(g$19).forEach(([I$25,A$22])=>{let R$21=!1,w$26=A$22.customFieldValues,E$16=A$22.customFields?.map(P$20=>{if(P$20.type===a$24.ListRelationship){let B$22=P$20.value?.filter(G$16=>l$26.taskIds.includes(G$16.id)?(w$26=zee(w$26,G$16.id),R$21=!0,!1):!0);return{...P$20,value:B$22};}return P$20;});R$21&&f$33.push({...A$22,customFields:E$16,customFieldValues:w$26});});let h$15=[];return f$33.length>0&&(h$15.push(new x$21(f$33)),h$15.push(new R$17(f$33))),h$15;}))),this.getTaskSuccess$=Ke$1(()=>this.action$.pipe(Ye$2(K$16),le$5(l$26=>!l$26.payload.task.parent&&l$26.payload.task.subtasks?qe$6(new C$19(l$26.payload.task.id,l$26.payload.task.subtasks,!0)):z$18))),this.setSubtasks$=Ke$1(()=>this.action$.pipe(Ye$2(w$19),oe$13(l$26=>!!l$26.subtasks),Mu(()=>this.store.select(r$8)),le$5(([l$26,g$19])=>{let f$33=Pi(l$26.subtasks||[]);return j$23([new x$21(f$33),new P$13(l$26.taskId,f$33.filter(I$25=>g$19||!ss$1(I$25.status)).map(I$25=>I$25.id))]);}))),this.repairOrderIndex$=Ke$1(()=>this.action$.pipe(Ye$2(Z$9),Mu(()=>[this.store.select(de$10),this.store.select(Le$8)]),le$5(([l$26,g$19,f$33])=>f$33?[]:this.dataService.orderindexRepair(g$19.id,l$26.indexField))),{dispatch:!1}),this.sendSegmentTaskUpdatedEffect=Ke$1(()=>this.action$.pipe(Ye$2(et$5),Mu(()=>[this.store.select(b$10),this.store.select(D$15)]),le$5(([l$26,g$19,f$33])=>f$33?this.aiTaskPropertiesService.getAiTaskPropertiesMap(f$33).pipe(q$20(h$15=>({action:l$26,selectedView:g$19,aiProperties:h$15}))):qe$6({action:l$26,selectedView:g$19,aiProperties:{}})),q$20(({action:l$26,selectedView:g$19,aiProperties:f$33})=>{qK(l$26.payload.data??{},l$26.payload.updatedTask??{},g$19,this.sharedTaskService.isOpen,l$26.payload.taskId,l$26.payload.extraTackingProps,l$26.payload.propertyScope,l$26.payload.viaDetails,l$26.payload.viaMarkCompleteButton,f$33).forEach(I$25=>{this.segmentService.track(Bu.UpdateTaskProperty,I$25);});})),{dispatch:!1});}handleError(e$19){return qe$6(new _d(e$19));}getTasks(e$19,r$34,{tag:o$32,fromWebsocket:s$25,pageSize:n$46=100}={}){return Yt$2(e$19,a$30=>this.publicViewHelper.getTasks(a$30,{taskFields:r$34,extraParams:{fromWebsocket:s$25,tag:o$32||`getTasks-taskdata-effect`}}),{pageSize:n$46});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Ci),ge$10(zr$1),ge$10(Ve),ge$10(_b$1),ge$10(ty),ge$10(Ye));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();hr$3();VN();Kee=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.websocketOvmService=o$32,this.taskV3Service=s$25,this.commentCreated$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.CommentCreated).pipe(oe$13(u$4),q$20(n$46=>o$14.commentCreated(T$9(n$46))))),this.commentEdited$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.CommentEdited).pipe(oe$13(u$4),q$20(n$46=>o$14.commentEdited(T$9(n$46))))),this.commentDeleted$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.CommentDeleted).pipe(oe$13(u$4),q$20(n$46=>o$14.commentDeleted(T$9(n$46))))),this.fetchCommentsFieldsValues$=Ke$1(()=>this.actions$.pipe(Ye$2(o$14.fetchCommentsFieldsValues),Mu(()=>[this.store.select(o$30)]),q$20(([n$46,a$30])=>({action:n$46,teamId:a$30})),le$5(({action:n$46,teamId:a$30})=>this.taskV3Service.fetchCommentsFieldsByTaskIdAndTeamId(n$46.taskId,a$30,[[n$34.Websocket,!0],[n$34.Refresh,`fetch comments fields values (taskUpdate - Views)`],[n$34.Version,ys(n$46.version)]]).pipe(q$20(c$37=>o$14.fetchCommentsFieldsValuesSuccess({taskId:n$46.taskId,values:c$37})))))),this.fetchCommentsFieldsValuesSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(o$14.fetchCommentsFieldsValuesSuccess),Mu(()=>[this.store.select(p$24)]),q$20(([n$46,a$30])=>({...a$30[n$46.taskId],assigned_comments_count:0,unresolved_comments_count:0,...n$46.values})),oe$13(s$4),q$20(n$46=>new x$21([n$46]))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(M$4),ge$10(lo));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();u$33();dm();hr$3();VN();VN();hr$3();VN();VN();tte=(()=>{class t$21 extends oe$5{constructor(){super(...arguments),this.name=`TaskCreatedWebsocketRetryStrategy`,this.managerDataService=C$23(Ci),this.taskCrudWebsocketService=C$23(f$6);}fetch(e$19){return this.managerDataService.getTaskById(e$19.id,!0,[]);}save(e$19,r$34){this.taskCrudWebsocketService.notifyTaskCreated(e$19);}setVersion(e$19,r$34,o$32){}static{this.fac=(()=>{let e$19;return function(o$32){return(e$19||(e$19=ty$1(t$21)))(o$32||t$21);};})();}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();rte=(()=>{class t$21{constructor(){this.taskV3ApiService=C$23(lo),this.ovmRetryService=C$23(ge$4),this.taskCreatedWebsocketRetryStrategy=C$23(tte),this.taskCrudWebsocketService=C$23(f$6);}fetchTaskOnTaskCreationEvent(e$19,r$34){return this.taskV3ApiService.fetchTaskById(e$19,[[n$34.Version,r$34]],B$10).pipe(Is$1(o$32=>{if(o$32){this.taskCrudWebsocketService.notifyTaskCreated(o$32);return;}this.ovmRetryService.scheduleItem(e$19,`task`,null,this.taskCreatedWebsocketRetryStrategy);}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();hr$3();VN();nte=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.taskCrudWebsocketService=C$23(f$6);}isASubtaskOfTheCurrentTask(e$19){let r$34=r$6(`task-parent`,e$19)?.object_id;return this.store.select(Ho$1(r$34));}isSomeEntitySubscribed(e$19){let r$34=ote(e$19);return this.store.select(zc(r$34)).pipe(q$20(o$32=>{let s$25=ste(e$19,o$32,r$34);return this.taskCrudWebsocketService.doesTaskCreatedBelongToAViewSubscriber(s$25);}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();ate=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26){this.actions$=e$19,this.store=r$34,this.websocketOvmService=o$32,this.taskCrudWebsocketService=s$25,this.taskDataWebsocketService=n$46,this.fetchTaskService=a$30,this.processTaskCreationEventFacade=c$37,this.taskV3Service=m$32,this.taskService=l$26,this.syntheticMarkerService=C$23(N$12),this.fetchTaskOnTaskUpdatedEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Se$5.fetchTaskOnTaskUpdated),Is$1(g$19=>{this.syntheticMarkerService.mark(`ngrx.effect.fetch_task_on_task_updated.${g$19.taskId}.start`,{client_trace:g$19.context.payload.client_trace,entityId:g$19.taskId}).setGenericName(`ngrx.effect.fetch_task_on_task_updated.start`);}),Mu(g$19=>this.store.select(Kc(g$19.taskId,`task`))),rt$4(([{taskId:g$19}])=>g$19,([g$19,f$33])=>this.taskDataWebsocketService.fetchTaskOnTaskUpdated(g$19.taskId,g$19.context,f$33,`taskUpdate`,g$19.fields||[s$15.PointsEstimate,s$15.TimeEstimate])),Is$1(({task:g$19,context:f$33})=>{this.syntheticMarkerService.mark(`ngrx.effect.fetch_task_on_task_updated.${g$19.id}.finish`,{client_trace:ce$1(f$33),entityId:g$19.id}).setGenericName("`ngrx.effect.fetch_task_on_task_updated.finish");}),oe$13(({isRemoteBehind:g$19})=>!g$19),q$20(({task:g$19,context:f$33})=>Se$5.fetchTaskOnTaskUpdatedSuccess({task:g$19,context:f$33})))),this.fetchTaskOnTaskMoved$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.TaskMoved).pipe(Mu(g$19=>[this.taskCrudWebsocketService.shouldFetchOnTaskMoved(g$19),this.store.select(Kc(t$5(g$19),`task`))]),oe$13(([,g$19])=>g$19),Z$12(([g$19,,f$33])=>this.taskDataWebsocketService.fetchTaskOnTaskMoved(g$19,f$33)),oe$13(({isRemoteBehind:g$19})=>!g$19),Mu(({task:g$19})=>[this.store.select(n$20(g$19.id))]),q$20(([{task:g$19,context:f$33},h$15])=>Se$5.fetchTaskOnTaskMovedSuccess({task:Jee(f$33,g$19,h$15),context:f$33})))),this.fetchSubtaskOnTaskCreatedInCurrentTask$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.TaskCreated).pipe(Mu(()=>[this.store.select(Z$10),this.store.select(h$11)]),oe$13(([g$19,f$33,h$15])=>Xee(f$33,g$19,h$15)),le$5(([g$19])=>this.taskV3Service.fetchTaskById(t$5(g$19),[],w$10)),q$20(g$19=>Se$5.handleWebsocketTaskCreate({task:g$19})))),this.fetchTaskOnTaskCreated$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.TaskCreated).pipe(Mu(g$19=>[this.processTaskCreationEventFacade.isASubtaskOfTheCurrentTask(g$19),this.processTaskCreationEventFacade.isSomeEntitySubscribed(g$19)]),oe$13(([,g$19,f$33])=>!g$19&&f$33),q$20(([g$19])=>({taskId:t$5(g$19),version:ys(g$19.version_change)})),le$5(({taskId:g$19,version:f$33})=>this.fetchTaskService.fetchTaskOnTaskCreationEvent(g$19,f$33))),{dispatch:!1}),this.fetchTaskUpdateCacheEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Se$5.fetchTaskOnTaskUpdatedSuccess,Se$5.fetchTaskOnTaskMovedSuccess),q$20(({task:g$19})=>new x$21([g$19],void 0,{keepAlreadyLoadedCustomFields:!0})))),this.fetchTaskUpdateSprintPointsEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Se$5.fetchTaskOnTaskUpdatedSuccess),Mu(({task:g$19})=>this.store.select(l$9(g$19.id))),q$20(([{task:g$19},f$33])=>Zee(g$19,f$33)),q$20(Hs$1))),this.fetchTaskUpdateTimeEstimatesEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Se$5.fetchTaskOnTaskUpdatedSuccess),Mu(({task:g$19})=>this.store.select(o$6(g$19.id))),oe$13(([{task:g$19}])=>Yee(g$19)),q$20(([{task:g$19},f$33])=>ete(g$19,f$33)),q$20(g$19=>new ps(g$19)))),this.updateParentTaskEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Se$5.handleWebsocketTaskCreate),Mu(({task:g$19})=>{let f$33=be(g$19);return[f$33?this.store.select(Nt$3(f$33)):qe$6(void 0),this.store.select(Nt$3(g$19.id))];}),oe$13(([,,g$19])=>!g$19),q$20(([{task:g$19},f$33])=>{let h$15=f$33?{id:f$33.id,subtaskIds:l$25([...(f$33.subtaskIds??[]),g$19.id]),subtasks_count:(f$33.subtasks_count??0)+1,subtasks_open_count:(f$33.subtasks_open_count??0)+1}:void 0,I$25=[g$19];return f$33&&h$15&&I$25.push(h$15),new x$21(I$25);}))),this.updateSubtaskIdMapEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Se$5.handleWebsocketTaskCreate),Mu(({task:g$19})=>{let f$33=be(g$19);return[this.store.select(h$11),f$33?this.store.select(Nt$3(f$33)):qe$6(void 0)];}),q$20(([{task:g$19},f$33,h$15])=>{let I$25=be(g$19);if(!I$25)return new m$25(f$33);let R$21=l$25([...(f$33[I$25]??[]),...(h$15?.subtaskIds??[]),g$19.id]);return new m$25({...f$33,[I$25]:R$21});}))),this.taskDeleted$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.TaskDeleted).pipe(q$20(g$19=>t$5(g$19)),q$20(g$19=>Se$5.handleWebsocketTaskDelete({taskId:g$19})))),this.listenForTaskMove$=Ke$1(()=>this.taskService.onChange.pipe(oe$13(g$19=>g$19?.type===`taskPosition`&&!!g$19?.undoBody?.tasks),q$20(g$19=>g$19.undoBody.tasks),Mu(()=>[this.store.select(o$30),this.store.select(Z$10)]),oe$13(([g$19,,f$33])=>g$19.some(h$15=>h$15.id===f$33)),q$20(([g$19,f$33])=>a$9({taskIds:g$19.map(h$15=>h$15.id),teamId:f$33,fieldNames:[ne$6],tags:[[n$34.Load,`TaskDataWebSockets.listenForTaskMove`]]}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(M$4),ge$10(f$6),ge$10(Ai),ge$10(rte),ge$10(nte),ge$10(lo),ge$10(zr$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`task_data_store_module`,`load`);B_=(()=>{class t$21{constructor(){e$11(`task_data_store_module`,`construct`),k$5(Ys$1,{version:3,conditional:!0,marshallerFactory:Bee,unmarshaller:Vee});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,Oee,F_,Mee,rn.forFeature(Ys$1,Zs),Je$4.forFeature([qee,ate,Gee,Nee,Hee,Wee,Kee,Pee,$ee,Dee,Aee,ke])]});}}return t$21;})();dm();hr$3();VN();hr$3();VN();cte=(()=>{class t$21{constructor(e$19,r$34){this.http=e$19,this.clickUpEndpointService=r$34;}readTaskLists(e$19,r$34,o$32){return this.http.get(`${this.clickUpEndpointService.taskV3BaseUrl}/experience/${e$19}/tasks/${r$34}/lists`,{headers:p$18(o$32)}).pipe(q$20(s$25=>s$25.map(n$46=>({access:n$46.access,category:n$46.category,category_details:{id:n$46.category.id,name:n$46.category.name,access:n$46.category.access,hidden:n$46.category.hidden,private:n$46.category.private},id:n$46.list_id,name:n$46.name,private:n$46.private,project:n$46.project,project_id:n$46.project.id}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(ve$7),ge$10(x$15));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();n$24(`task_list_store_module`,`task_list_effects`,`load`);mte=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.taskListsResource=o$32,this.applicationEnvironmentService=s$25,this.readTaskListsEffect=Ke$1(()=>this.actions$.pipe(Ye$2(yr),oe$13(({response:{task:n$46,workspace_id:a$30}})=>!!n$46.id&&!!a$30&&n$46.lists?.length>0),ee$8({run:({response:{task:n$46,workspace_id:a$30}})=>this.taskListsResource.readTaskLists(a$30,n$46.id,[[n$34.Load,`TaskListsEffects readTaskListsEffect`]]).pipe(q$20(c$37=>g$12({taskId:n$46.id,taskLists:c$37}))),onError:({response:{task:n$46}},a$30)=>qe$6(Se$3({taskId:n$46.id,error:a$30}))}))),this.readTaskListsFailureEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Se$3),q$20(({error:n$46})=>new _d(n$46)))),this.addSubcategoryEffect=Ke$1(()=>this.actions$.pipe(Ye$2(d$8.addTaskToAdditionalList),Mu(({taskId:n$46})=>[this.store.select(n$20(n$46)).pipe(R$20()),this.store.select(g$18).pipe(R$20()),this.store.select(y$18).pipe(R$20()),this.store.select(B$21).pipe(R$20())]),q$20(([{taskId:n$46,subcategory:a$30},c$37,m$32,l$26,g$19])=>({taskId:n$46,subcategory:Ue$1(a$30.id,c$37,m$32,l$26,g$19).subcategory})),oe$13(({subcategory:n$46})=>!!n$46),q$20(({taskId:n$46,subcategory:a$30})=>g$12({taskId:n$46,taskLists:[a$30]})))),this.updateTaskAfterAddAndRemoveTaskFromListsSuccessEffect=Ke$1(()=>this.actions$.pipe(Ye$2(d$8.addAndRemoveTaskFromListsSuccess),Mu(()=>[this.applicationEnvironmentService.environment$]),q$20(([{taskId:n$46},a$30])=>RA({taskId:n$46,params:{"fields[]":[`core`,`statuses`,`custom_fields`]},workspaceId:a$30.teamId??``,tags:[[n$34.Refresh,`TaskListsEffects updateTaskAfterAddAndRemoveTaskFromListsSuccess`]]}))));}ngrxOnRunEffects(e$19){return n$24(`task_list_store_module`,`task_list_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(cte),ge$10(Ni));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`task_list_store_module`,`load`);lte=(()=>{class t$21{constructor(){e$11(`task_list_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`taskLists`,V$6),Je$4.forFeature([mte])]});}}return t$21;})();VN();e$11(`task_resource_store_module`,`load`);dte=(()=>{class t$21{constructor(){e$11(`task_resource_store_module`,`load`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`taskResource`,j$8)]});}}return t$21;})();VN();hr$3();VN();n$24(`team_store_module`,`team_effects`,`load`);pte=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.dispatchActionOnWorkspaceChange$=Ke$1(()=>this.actions$.pipe(Ye$2(Ct$2),Mu(()=>this.store.select(de$10)),q$20(([e$19,r$34])=>({routeUrl:e$19.payload.event.url,team:r$34})),oe$13(({routeUrl:e$19,team:r$34})=>r$34.id?!e$19.startsWith(`/${r$34.id}`):!1),q$20(({routeUrl:e$19})=>a$2({teamId:e$19.split(`/`)[1]}))));}ngrxOnRunEffects(e$19){return n$24(`team_store_module`,`team_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();gte=(()=>{class t$21{constructor(){this.websocketOvmService=C$23(M$4),this.websocketConfigService=C$23(E$11),this.store=C$23(q$19),this.updateClickAppViaWebsocket$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.ClickAppsToggled).pipe(oe$13(e$19=>!!V_(e$19)),Mu(()=>[this.store.select(c$36),this.store.select(o$30)]),q$20(([e$19,r$34,o$32])=>({clickapp:fte(e$19),teams:r$34,teamId:o$32})),q$20(({clickapp:{app:e$19,value:r$34},teams:o$32,teamId:s$25})=>Ke$3({value:hte({app:e$19,value:r$34,teamId:s$25,teams:o$32})}))));}ngrxOnRunEffects(e$19){return this.websocketConfigService.enableMessage(t$17.ClickAppsToggled),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`team_store_module`,`load`);yte=(()=>{class t$21{constructor(){e$11(`team_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[Je$4.forFeature([pte,gte])]});}}return t$21;})();dm();VN();VN();vte=(()=>{class t$21{constructor(e$19,r$34){this.http=e$19,this.endpointService=r$34;}getUserData(e$19=!0,r$34){let o$32={};e$19&&(o$32.include_teams=!0),r$34&&(o$32.include_invited_by=!0);let s$25=Object.keys(o$32).length>0?`${this.endpointService.userPrefixBasedUrl}/user`:this.endpointService.userPrefixBasedUrl;return this.http.get(s$25,{params:o$32});}getUserWorkspaceRole(e$19){let r$34=`${this.endpointService.userPrefixBasedUrl}/team/${e$19}/role`;return this.http.get(r$34);}leaveTeam(e$19){let r$34=`${this.endpointService.teamBaseUrl}/team/${e$19}`;return this.http.delete(r$34);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(ve$7),ge$10(x$15));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();n$24(`user_store_module`,`user_effects`,`load`);Ste=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.userApiService=r$34,this.getUser$=Ke$1(()=>this.actions$.pipe(Ye$2(ve),le$5(o$32=>this.userApiService.getUserData(o$32.includeTeams,o$32.includeInvitedBy).pipe(q$20(s$25=>Li({userData:s$25})),Xo$2(s$25=>[hi({error:s$25}),new _d(s$25)]))))),this.getUserWorkspaceRole$=Ke$1(()=>this.actions$.pipe(Ye$2(fe),le$5(o$32=>this.userApiService.getUserWorkspaceRole(o$32.workspaceId).pipe(q$20(s$25=>vi({userWorkspaceRole:s$25})),Xo$2(s$25=>[fi({error:s$25}),new _d(s$25)]))))),this.leaveTeam$=Ke$1(()=>this.actions$.pipe(Ye$2(Oe),le$5(o$32=>this.userApiService.leaveTeam(o$32.teamId).pipe(q$20(()=>Oi()),Xo$2(s$25=>[Ti({error:s$25}),new _d(s$25)])))));}ngrxOnRunEffects(e$19){return n$24(`user_store_module`,`user_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(vte));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();bte=sn({userData:void 0,userWorkspaceRole:void 0,userLoading:!1,leavingTeam:void 0,userError:void 0},on(ve,t$21=>({...t$21,userLoading:!0})),on(Li,(t$21,i$27)=>({...t$21,userData:i$27.userData,userLoading:!1})),on(hi,(t$21,i$27)=>({...t$21,userLoading:!1,userError:i$27.error})),on(Oe,t$21=>({...t$21,userLoading:!0,leavingTeam:!0})),on(Oi,t$21=>({...t$21,userLoading:!1,leavingTeam:!1})),on(Ti,(t$21,i$27)=>({...t$21,userLoading:!1,leavingTeam:!1,userError:i$27.error})),on(fe,t$21=>({...t$21,userLoading:!0})),on(vi,(t$21,i$27)=>({...t$21,userWorkspaceRole:i$27.userWorkspaceRole,userLoading:!1})),on(fi,(t$21,i$27)=>({...t$21,userLoading:!1,userWorkspaceRole:void 0,userError:i$27.error})));VN();e$11(`user_store_module`,`load`);Cte=(()=>{class t$21{constructor(){e$11(`user_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`user`,bte),Je$4.forFeature([Ste])]});}}return t$21;})();VN();dm();VN();n$24(`users_store_module`,`users_effects`,`load`);_te=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.resetUsers$=Ke$1(()=>this.actions$.pipe(Ye$2(ve$6),oe$13(({oldWorkspace:e$19,newWorkspace:r$34})=>e$19!==r$34),q$20(()=>IO())));}ngrxOnRunEffects(e$19){return n$24(`users_store_module`,`users_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`users_store_module`,`load`);kte=(()=>{class t$21{constructor(){e$11(`users_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`users`,g9),Je$4.forFeature([_te])]});}}return t$21;})();VN();e$11(`card_free_trial_enrollment_store_module`,`load`);Tte=(()=>{class t$21{constructor(){e$11(`card_free_trial_enrollment_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(T$1,f$1)]});}}return t$21;})();Ite=sn({},on(d$2.setURLQueryParamToTrue,(t$21,{paywallConfigKey:i$27})=>({...t$21,urlQueryParam:!0,paywallConfigKey:i$27})),on(d$2.deleteURLQueryParam,t$21=>({...t$21,urlQueryParam:void 0,paywallConfigKey:void 0})));VN();e$11(`ai_addon_product_paywall_store_module`,`load`);Ete=(()=>{class t$21{constructor(){e$11(`ai_addon_product_paywall_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(j$13,Ite)]});}}return t$21;})();dm();VN();n$24(`note_taker_addon_store_module`,`notetaker_addon_effects`,`load`);Ate=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.store=r$34,this.openCaledarView$=Ke$1(()=>this.actions$.pipe(Ye$2(U),Z$12(o$32=>$i({action:qe$6(o$32),isHydrated:this.store.select(n$1).pipe(oe$13(s$25=>!!s$25),Vi({first:1e4}),Ve$4(1),ps$2(o$32.delayMs))})),q$20(()=>Eo.actions.update({layout:`full-screen`})),Xo$2(()=>qe$6(Eo.actions.update({layout:`full-screen`}))))),this.uiStoreHydrated$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.didHydrate),q$20(()=>m$3({payload:{isHydrated:!0}}))));}ngrxOnRunEffects(e$19){return n$24(`note_taker_addon_store_module`,`notetaker_addon_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();wte=sn({uiStoreHydrated:!1},on(y$2,t$21=>({...t$21,urlQueryParam:!0})),on(m$3,t$21=>({...t$21,uiStoreHydrated:!0})),on(c$2,t$21=>({...t$21,urlQueryParam:void 0})));VN();e$11(`note_taker_addon_store_module`,`load`);Mte=(()=>{class t$21{constructor(){e$11(`note_taker_addon_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`notetaker-addon`,wte),Je$4.forFeature(Ate)]});}}return t$21;})();dm();VN();n$24(`card_free_trial_store_module`,`card_free_trial_summary`,`load`);Rte=(()=>{class t$21{constructor(e$19,r$34,o$32){this.action$=e$19,this.cardFreeTrialService=r$34,this.store=o$32,this.checkCardFreeTrial$=Ke$1(()=>this.action$.pipe(Ye$2(t$1.check),le$5(()=>this.store.select(et$4).pipe(ds(s$25=>s$25),q$20(()=>t$1.reload()))))),this.reloadCardFreeTrial$=Ke$1(()=>this.action$.pipe(Ye$2(t$1.reload),Mu(()=>this.store.select(o$30)),Z$12(([,s$25])=>this.cardFreeTrialService.getAvailableTrials(s$25)),q$20(s$25=>t$1.setAvailability(s$25))));}ngrxOnRunEffects(e$19){return n$24(`card_free_trial_store_module`,`card_free_trial_summary`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(k$3),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();Fte=sn({availability:null,loading:!1},on(t$1.setAvailability,(t$21,i$27)=>({...t$21,availability:i$27,loading:!1})),on(t$1.toggleRefreshing,t$21=>({...t$21,loading:!t$21.loading})),on(t$1.reload,t$21=>({...t$21,loading:!0})));VN();e$11(`card_free_trial_store_module`,`load`);xte=(()=>{class t$21{constructor(){e$11(`card_free_trial_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(D7,Fte),Je$4.forFeature([Rte]),ar$1]});}}return t$21;})();VN();hr$3();Ee$4();VN();Ote=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.modalService=C$23(V$10),this.clickUpRouter=C$23(qd),this.handleEnableAiConfirmed$=Ke$1(()=>this.actions$.pipe(Ye$2(u),Z$12(()=>this.waitForAiEnabled()),Mu(()=>[this.store.select(o$30),this.store.select(f3),this.store.select(_)]),Is$1(([,e$19,r$34,o$32])=>{this.modalService.close();let s$25=r$34.agentDetail??o$32.agentDetail,n$46=r$34.agentPrompt??o$32.pendingPrompt,a$30=r$34.autoExecute??o$32.autoExecute;this.clickUpRouter.navigate([`/`,e$19,`ai`,`agents`],{queryParams:{[te$11]:s$25,[oe$8]:n$46,[ae$6]:a$30?.toString()}},{tag:`ai-agent-builder-nux-navigate-after-enable`,path:`${e$19}/ai/agents`});}),q$20(()=>a()))),this.handleClearFlow$=Ke$1(()=>this.actions$.pipe(Ye$2(g),Is$1(()=>this.modalService.close())),{dispatch:!1});}waitForAiEnabled(){return this.store.select(me$3).pipe(oe$13(Boolean),Ve$4(1),le$5(()=>he$6(1e3)));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();Pte={},$te=sn(Pte,on(n,(t$21,{pendingPrompt:i$27,autoExecute:e$19})=>({...t$21,flowTriggered:!0,pendingPrompt:i$27,autoExecute:e$19})),on(a,t$21=>({...t$21,flowComplete:!0})),on(g,()=>Pte),on(w$1,(t$21,{agentDetail:i$27,agentPrompt:e$19,autoExecute:r$34})=>({...t$21,agentDetail:i$27,pendingPrompt:e$19,autoExecute:r$34})));VN();jte=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(m,$te),Je$4.forFeature([Ote])]});}}return t$21;})();dm();hr$3();VN();Lte=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.actions$=e$19,this.store=r$34,this.aiModalTrackingService=o$32,this.appLocationService=s$25,this.layoutV4Service=n$46,this.navigateToAIOrSidebar$=Ke$1(()=>this.actions$.pipe(Ye$2(Q$1),le$5(a$30=>this.checkWorkspaceEligibility(a$30.teamId))));}checkWorkspaceEligibility(e$19){return this.aiModalTrackingService.getProperties().pipe(Ve$4(1),oe$13(r$34=>r$34.isWorkspaceEligibleAi),le$5(()=>this.handleBillingOrLayout(e$19)));}handleBillingOrLayout(e$19){return this.appLocationService.isOnBillingPage$.pipe(Ve$4(1),le$5(r$34=>r$34?qe$6(I$2()):this.handleLayout(e$19)));}handleLayout(e$19){return this.layoutV4Service.isLayoutV4().pipe(Ve$4(1),le$5(r$34=>r$34?qe$6(a$20({payload:{path:[`/${e$19}/ai`],tag:`ai-nux-navigate-to-ai-page`}})):this.store.select(me$3).pipe(Ve$4(1),oe$13(o$32=>o$32),le$5(()=>qe$6(m$5())))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(K),ge$10(J$5),ge$10(ge$6));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();Dte=sn({},on(l$2,t$21=>({...t$21,urlQueryParam:!0})),on(I$2,t$21=>({...t$21,urlQueryParam:void 0})),on(T$6,(t$21,{toolId:i$27,config:e$19,autoStart:r$34})=>({...t$21,toolQueryParams:{toolId:i$27,config:e$19,autoStart:r$34}})),on(u$3,t$21=>({...t$21,toolQueryParams:void 0})),on(g$2,t$21=>({...t$21,enableAi:!0})),on(b$1,t$21=>({...t$21,enableAi:void 0})),on(m$5,t$21=>({...t$21,triggerAiToolbar:!0})),on(P$3,t$21=>({...t$21,triggerAiToolbar:void 0})));VN();e$11(`ai_nux_module`,`load`);Nte=(()=>{class t$21{constructor(){e$11(`ai_nux_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(Bt$3,Dte),Je$4.forFeature([Lte])]});}}return t$21;})();VN();dm();VN();dm();VN();Ute=(()=>{class t$21{constructor(){this.httpClient=C$23(ve$7),this.store=C$23(q$19),this.applicationEnvironmentService=C$23(Ni),this.teamId$=this.store.select(o$30),this.apiUrl$=this.applicationEnvironmentService.environment$.pipe(Mu(()=>[this.teamId$]),q$20(([{apiUrlUserV3Service:e$19},r$34])=>`${e$19}/access/authz/${r$34}`));}getPermissions(e$19){return this.apiUrl$.pipe(Ve$4(1),le$5(r$34=>this.httpClient.post(`${r$34}/permissions/bulk`,e$19)));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Wte=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.permissionsApiService=C$23(Ute),this.getObjectPermissions$=Ke$1(()=>this.actions$.pipe(Ye$2(n$18.getPermissions),oe$13(e$19=>!!e$19.objects.length),Z$12(({objects:e$19,permissions:r$34,requestAccessRoot:o$32})=>this.permissionsApiService.getPermissions({objects:e$19,permissions:r$34??[],options:{include_access_requests:!!o$32}}).pipe(Xo$2(()=>qe$6(n$18.getPermissionsError({objects:e$19}))))),Z$12(e$19=>Vte(e$19)?[n$18.getPermissionsSuccess({objectPermissions:e$19.object_permissions})]:Bte(e$19)?qe$6(e$19):z$18))),this.getObjectPermissionsLoading$=Ke$1(()=>this.actions$.pipe(Ye$2(n$18.getPermissions),oe$13(e$19=>!!e$19.objects.length),q$20(e$19=>n$18.permissionsLoading({objects:e$19.objects}))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`auth_z_permissions_store_module`,`load`);Hte=(()=>{class t$21{constructor(){e$11(`auth_z_permissions_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,Je$4.forFeature([Wte]),rn.forFeature(`permissions`,N$6)]});}}return t$21;})();Gte=`calendarAssetSyncTokens`,im=H$9(),Gye=im.getInitialState(),_l=Qt$3({source:Gte,events:{resetOne:qe$5(),reset:Jt$3(),update:qe$5(),load:qe$5(),garbageCollect:qe$5(),rehydrate:qe$5()}}),so$1={...nn({name:Gte,reducer:sn(Gye,on(_l.resetOne,(t$21,{key:i$27})=>im.removeOne(i$27,t$21)),on(_l.reset,t$21=>im.removeAll(t$21)),on(_l.update,(t$21,{data:i$27})=>im.upsertOne(i$27,t$21)),on(_l.load,(t$21,{data:i$27})=>im.upsertMany(i$27,t$21)),on(_l.rehydrate,(t$21,{data:i$27})=>i$27),on(_l.garbageCollect,(t$21,{creds:i$27})=>{let e$19=t$21.ids.filter(r$34=>i$27.length===0?!0:!i$27.some(o$32=>`${r$34}`.startsWith(`${o$32}:`))).map(r$34=>`${r$34}`);return f$30.byNamespace(`calendar-garbage-collector`).log(`Removed (${e$19.length}) asset sync tokens`),im.removeMany(e$19,t$21);})),extraSelectors(t$21){return{...im.getSelectors(t$21.selectCalendarAssetSyncTokensState),selectAll:im.getSelectors(t$21.selectCalendarAssetSyncTokensState).selectAll,selectIds:Ue$6(t$21.selectIds,i$27=>i$27),selectOne:i$27=>Ue$6(t$21.selectEntities,e$19=>e$19[i$27])};}}),actions:_l};VN();dm();hr$3();VN();dm();hr$3();VN();zte=(()=>{class t$21{constructor(){this.logger=f$30.byNamespace(`calendar-broadcaster`),this.broadcastChannel=C$23(wr);}listen(e$19,r$34){let o$32=this.getChannelId(e$19,r$34);return Q$17(0).pipe(le$5(()=>this.broadcastChannel.listen(o$32)),q$20(s$25=>s$25.value),Is$1(s$25=>this.logger.log(`Received`,s$25.type)),Xo$2(s$25=>(hr(s$25,{feature:`calendar`,origin:`CalendarBroadcastService.listen`}),z$18)));}broadcastChanges(e$19,r$34,o$32){this.broadcastChannel.postMessage(this.getChannelId(e$19,r$34),o$32);}getChannelId(e$19,r$34){return`calendar-${e$19}-${r$34}`;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();qte=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.actions$=C$23(Le$4),this.teamId$=Jc(),this.workspaceId$=n$21(),this.userId$=c$4(),this.split=C$23(Qn),this.broadcast=C$23(zte),this.leaderElection=C$23(am),this.logger=f$30.byNamespace(`calendar-broadcaster`),this.calendarAssetSync$=this.split.isTreatmentOn({name:O$16.CalendarAssetSync}),this.calendarsStateChanged$=Ke$1(()=>this.calendarAssetSync$.pipe(le$5(e$19=>e$19?this.actions$.pipe(Ye$2(R$13.actions.load,R$13.actions.garbageCollect),As$3(this.store.select(R$13.selectCalendarsState),this.userId$,this.teamId$,this.leaderElection.isLeader$,this.store.select(Eo.selectDemoMode)),zt$2(([r$34,o$32],[s$25,n$46])=>{return j$21(o$32?.ids??[],n$46?.ids??[]);}),oe$13(([r$34,o$32,s$25,n$46,a$30,c$37])=>c$37?(this.logger.log(`Skipping, calendar.state.calendars, demo mode`),!1):a$30?!0:(this.logger.log(`Skipping, calendar.state.calendars, not leader`),!1)),fs$1(1e3),Is$1(([r$34,o$32,s$25,n$46])=>{this.logger.log(`Sending, calendar.state.calendars`),this.broadcast.broadcastChanges(n$46,s$25,{type:`calendar.state.calendars`,data:o$32});})):z$18)),{dispatch:!1}),this.calendarEventsStateChanged$=Ke$1(()=>this.calendarAssetSync$.pipe(le$5(e$19=>e$19?this.actions$.pipe(Ye$2(Z$6.actions.cancel,Z$6.actions.swap,Z$6.actions.update,Z$6.actions.create,Z$6.actions.load,Z$6.actions.garbageCollect),As$3(this.store.select(Z$6.selectCalendarEventsState),this.userId$,this.teamId$,this.leaderElection.isLeader$,this.store.select(Eo.selectDemoMode)),oe$13(([r$34,o$32,s$25,n$46,a$30,c$37])=>c$37?(this.logger.log(`Skipping, calendar.state.calendarEvents, demo mode`),!1):a$30?!0:(this.logger.log(`Skipping, calendar.state.calendarEvents, not leader`),!1)),oe$13(([r$34])=>r$34.type===Z$6.actions.load.type?r$34.data.length!==0:!0),fs$1(1e3),Is$1(([r$34,o$32,s$25,n$46])=>{this.logger.log(`Sending, calendar.state.calendarEvents`),this.broadcast.broadcastChanges(n$46,s$25,{type:`calendar.state.calendarEvents`,data:o$32});})):z$18)),{dispatch:!1}),this.assetSyncTokensStateChanged$=Ke$1(()=>this.calendarAssetSync$.pipe(le$5(e$19=>e$19?this.actions$.pipe(Ye$2(so$1.actions.update,so$1.actions.reset,so$1.actions.garbageCollect),As$3(this.store.select(so$1.selectCalendarAssetSyncTokensState),this.userId$,this.teamId$,this.leaderElection.isLeader$),oe$13(([r$34,o$32,s$25,n$46,a$30])=>a$30?!0:(this.logger.log(`Skipping, calendar.state.assetSyncTokens, not leader`),!1)),fs$1(1e3),Is$1(([r$34,o$32,s$25,n$46])=>{this.logger.log(`Sending, calendar.state.assetSyncTokens`),this.broadcast.broadcastChanges(n$46,s$25,{type:`calendar.state.assetSyncTokens`,data:o$32});})):z$18)),{dispatch:!1}),this.journalStateChanged$=Ke$1(()=>this.actions$.pipe(Ye$2(w$4.actions.track),As$3(this.store.select(w$4.selectCalendarJournalState),this.teamId$,this.userId$,this.leaderElection.isLeader$),oe$13(([e$19,r$34,o$32,s$25,n$46])=>n$46?!0:(this.logger.log(`Skipping, calendar.state.journal, not leader`),!1)),fs$1(1e3),Is$1(([e$19,r$34,o$32,s$25])=>{this.logger.log(`Sending, calendar.state.journal`),this.broadcast.broadcastChanges(s$25,o$32,{type:`calendar.state.journal`,data:r$34});})),{dispatch:!1}),this.handleBroadcastedMessage$=Ke$1(()=>$i({workspaceId:this.workspaceId$.pipe(R$20()),userId:this.userId$.pipe(R$20()),assetSync:this.calendarAssetSync$,isLeader:this.leaderElection.isLeader$}).pipe(oe$13(({assetSync:e$19,isLeader:r$34})=>e$19&&!r$34),le$5(({workspaceId:e$19,userId:r$34})=>(this.logger.log(`Listening ${e$19}:${r$34}`),this.broadcast.listen(e$19,r$34).pipe(Is$1(o$32=>{o$32.type===`calendar.state.calendars`?this.store.dispatch(R$13.actions.rehydrate(o$32)):o$32.type===`calendar.state.calendarEvents`?this.store.dispatch(Z$6.actions.rehydrate(o$32)):o$32.type===`calendar.state.assetSyncTokens`?this.store.dispatch(so$1.actions.rehydrate(o$32)):o$32.type===`calendar.state.journal`&&this.store.dispatch(w$4.actions.rehydrate(o$32));}),Xo$2(o$32=>(fA(o$32,{feature:`calendar`,origin:`handleBroadcastedMessage$`}),z$18)))))),{dispatch:!1});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();hr$3();VN();Kte=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.reconciler=C$23(fe$1),this.trackRecentlySwapped$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.swap),Is$1(({idBefore:e$19,id:r$34})=>{this.reconciler.swapRecent[e$19]=r$34;})),{dispatch:!1});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();Qte=F$23(d$12());VN();Jte=(()=>{class t$21{constructor(){this.apps=C$23(fp),this.leaderElection=C$23(am),this.store=C$23(q$19),this.activeCalendarCreds$=this.apps.subscribeToCreds(a$8).pipe(q$20(e$19=>e$19.filter(r$34=>(0,Qte.isCredHealthy)(r$34))),ys$1({refCount:!0,bufferSize:1})),this.garbageCollect$=Ke$1(()=>this.activeCalendarCreds$.pipe(As$3(this.leaderElection.isLeader$,this.store.select(Eo.selectDemoMode)),oe$13(([,e$19,r$34])=>!r$34&&e$19),q$20(([e$19])=>e$19.map(r$34=>r$34.id)),Is$1(e$19=>{f$30.byNamespace(`calendar-garbage-collector`).log(`Running with ${e$19.length} active creds`);}),Z$12(e$19=>[Z$6.actions.garbageCollect({creds:e$19}),R$13.actions.garbageCollect({creds:e$19}),so$1.actions.garbageCollect({creds:e$19}),qe$3.actions.garbageCollect({creds:e$19}),ar$3.actions.garbageCollect({creds:e$19})]),Xo$2(e$19=>(fA(e$19,{feature:`calendar`,origin:`CalendarGarbageCollectorEffects`}),z$18))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();u$33();dm();VN();Yte=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.actions$=r$34,this.updateDataViewFromUiStore$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.update),oe$13(o$32=>!o$32.stopPropagation&&f.some(s$25=>s$20(s$25,o$32))),q$20(o$32=>{let s$25=P$17(o$32,f);return{action:o$32,calendarViewIdList:l$25(u$26(s$25).map(a$30=>u$26(s$25[a$30]??{})).flat()).filter(a$30=>a$30.startsWith(`list-view-`))};}),oe$13(({calendarViewIdList:o$32})=>o$32.length===1),q$20(({calendarViewIdList:o$32,action:s$25})=>{let n$46=o$32[0].replace(`list-view-`,``);return{action:s$25,calendarViewId:o$32[0],dataViewId:n$46};}),Mu(({dataViewId:o$32})=>[this.store.select(p$19(o$28(o$32)))]),Is$1(([{calendarViewId:o$32,dataViewId:s$25,action:n$46},a$30])=>{let c$37=k(o$32,n$46),m$32=P$17(a$30?.calendarSettings??{},u$26(c$37));if(!(u$26(c$37).length>0&&!xr(m$32,c$37)))return this.store.dispatch(Le$3({id:s$25,payload:{calendarSettings:{...o$28(a$30?.calendarSettings),...c$37}}}));}),Xo$2(o$32=>(fA(o$32,{feature:`calendar`}),z$18))),{dispatch:!1}),this.updateUiStoreFromDataView$=Ke$1(()=>this.actions$.pipe(Ye$2(ye$3),q$20(o$32=>{let s$25=o$32.original.id,n$46=o$32.changes.calendarSettings;return{calendarViewId:`list-view-${s$25}`,calendarSettings:n$46};}),oe$13(({calendarSettings:o$32})=>!!o$32&&y.some(s$25=>s$20(s$25,o$32))),ve$9(P$19),As$3(this.store.select(Eo.selectAllPreferences)),Is$1(([{calendarViewId:o$32,calendarSettings:s$25},n$46])=>{let a$30=F$1(o$32,o$28(s$25)),c$37=p$13(P$17(n$46,u$26(a$30)),l$26=>({[o$32]:l$26[o$32]}));if(u$26(a$30).length>0&&!xr(c$37,a$30))return this.store.dispatch(Eo.actions.update({...a$30,stopPropagation:!0}));}),Xo$2(o$32=>(fA(o$32,{feature:`calendar`}),z$18))),{dispatch:!1});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();nM=(t$21,i$27,e$19)=>({label:`\u258E${p$21.shortTime(i$27,t$21.start,void 0,`start`)} \u2022 ${Xte(t$21?.summary??``,36)}`,type:`custom`,key:`calendar:${t$21.id}`,...(e$19&&{onClick:()=>e$19(t$21.id)})}),nh=(t$21,i$27=!1)=>({label:t$21,type:`custom`,key:s$3.OPEN_APP,enabled:i$27}),Xte=(t$21,i$27)=>t$21.trim().length>i$27?`${t$21.trim().slice(0,i$27-3)}...`:t$21.trim(),Zte=({currentTime:t$21,featured:i$27,happeningNow:e$19,upcoming:r$34,clockFormat:o$32,handleOpenCalendarEvent:s$25})=>{let[a$30,c$37]=i$22(e$19.filter(f$33=>f$33.id!==i$27?.id),f$33=>f$33.start>=t$21),m$32=nh("\uD83E\uDD84 No more events today.",!0),l$26=q$8(i$27?.conferenceData?.entryPoints?.filter(f$33=>f$33.entryPointType===`video`)),g$19=Mn(i$27?.conferenceData?.provider);return[...(i$27?d$22([nh(`Up next`),l$26&&{label:`${g$19} (${p$21.shortTime(o$32,i$27.start,void 0,`start`)} \u2022 ${Xte(i$27?.summary??``,36)})`,type:`custom`,key:`calendar:join:${i$27.id}`,onClick:()=>{r$26(window.desktop?.windows?.openExternalURL(l$26.uri));}}]):[]),...(a$30.length>0?d$22([nh(`Ongoing`),...a$30.map(f$33=>nM(f$33,o$32,s$25))]):[]),...(c$37.length>0?d$22([nh(Io$1(o$28(q$8(x$17(c$37,`start`,`asc`))),t$21)),...c$37.map(f$33=>nM(f$33,o$32,()=>s$25(f$33.id)))]):[]),nh(p$21().tz(A$14()).format(`dddd, DD MMM`)),...(r$34.length===0?[m$32]:[]),...r$34.map(f$33=>nM(f$33,o$32,s$25))];};VN();ere=(()=>{class t$21{ngrxOnInitEffects(){return Eo.actions.toggleDesktopRefresherService({value:n$45()});}constructor(e$19,r$34,o$32,s$25){this.store=e$19,this.actions$=r$34,this.desktopTrayService=o$32,this.desktopWindowService=s$25,this.updateDesktopTraybar$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.toggleDesktopRefresherService),le$5(n$46=>n$46.value?$i([this.store.select(Eo.selectDesktopShowInMenubar),this.store.select(Gr),this.store.select($a$1),this.store.select(Kr$1),this.store.select(cr$1),this.store.select(h$8.selectCurrentTime)]).pipe(Is$1(([a$30,c$37,m$32,l$26,g$19,f$33])=>{if(!a$30){this.desktopTrayService.setTitle(``),r$26(this.desktopTrayService.updateSection(`calendar`,[]));return;}v$16(m$32)?this.desktopTrayService.setTitle(m$32&&`${ze$2(m$32.summary,{length:20,omission:`...`})} \u2022 ${Io$1(m$32,f$33)}`):this.desktopTrayService.setTitle(``),r$26(this.desktopTrayService.updateSection(`calendar`,Zte({currentTime:f$33,clockFormat:c$37,featured:v$16(m$32)?m$32:void 0,happeningNow:l$26.filter(v$16),upcoming:g$19.filter(v$16),handleOpenCalendarEvent:h$15=>{r$26(this.desktopWindowService.focus()),this.store.dispatch(Eo.actions.goToPlanner()),F$21(()=>{this.store.dispatch(Eo.actions.update({selectedDateForView:{global:C$13(p$21(f$33).tz(A$14()))},openBlockIdForView:{global:`event:${h$15}`}}));},500);}})));})):qe$6(z$18))),{dispatch:!1});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Le$4),ge$10(de),ge$10(wt$3));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();u$33();dm();hr$3();VN();u$33();dm();hr$3();tre=F$23(T$14());dm();VN();rre=(()=>{class t$21 extends v{constructor(){super(...arguments),this.NAMESPACE=`calendar-refresher`,this.ON_ERROR_TRACK_ACTION=`calendar_assetSyncError`,this.TIMEOUT=120*1e3,this.api=C$23(Yt),this.reconciler=C$23(fe$1),this.logger=f$30.byNamespace(`calendar-refresher`);}work(e$19,r$34){return I$24(this,null,function*(){let o$32=performance.now();if(this.store.selectSignal(Eo.selectDemoMode)()){this.logger.log(`Refresh skipped: demo mode is active`);return;}let[s$25,n$46,a$30,c$37,m$32]=yield Li$1($i([this.store.select(Qr),this.store.select(so$1.selectAll),this.api.activeCalendarCreds$,this.store.select(ae$8),this.store.select(kA)]));if(!c$37||!m$32||e$19.aborted)return;let l$26=be$3(n$46.map(v$22=>[v$22.id,v$22.syncToken]));er$2(`calendar_assetSyncStarted`,{fullScan:n$46.length===0});let g$19=yield Li$1(Gi(d$22([...a$30.filter(v$22=>v$22.status.value===tre.CredStatusValue.CONNECTED).map(v$22=>this.api.fetchCalendars(v$22.id)),...a$8.map(v$22=>this.api.fetchCalendarsWithCall(v$22))])).pipe(q$20(v$22=>pt$1(ft$1(v$22.flat()),v$22.flat()))));this.store.dispatch(R$13.actions.load({data:g$19})),this.logger.log(`Calendars`,{ok:!0,calendars:g$19.length});let[f$33,h$15]=i$22(s$25,v$22=>v$22.source===`network`);if(e$19.aborted)return;if(f$33.length===0&&h$15.length===0){this.logger.log(`No calendars to refresh. (${s$25.length}/${g$19.length}). Requeueing.`),this.queueSync(c$37,m$32,`calendar.first-sync-no-calendars`);return;}let I$25=yield Li$1(Gi(a$30.map(v$22=>this.api.fetchEventTagsWithCall(v$22.id).pipe()))).then(v$22=>v$22.flat());if(this.store.dispatch(qe$3.actions.load({data:I$25})),this.logger.log(`Tags`,{ok:!0,tags:I$25.length}),e$19.aborted)return;let[R$21,w$26]=i$22(yield Li$1(Gi(d$22([...f$33.map(v$22=>this.api.fetchEventsWithCall(v$22.credId,v$22.id).pipe(q$20(({events:x$28})=>x$28.map(U$19=>({...U$19,id:Gt({credId:v$22.credId,calendarId:U$19.calendar.id,externalId:U$19.id}),externalId:U$19.id}))))),...h$15.map(v$22=>U_(x$28=>this.api.assetSync({credID:v$22.credId,assetType:`event`,ancestorID:v$22.id,syncToken:l$26[`${v$22.credId}:${v$22.id}`]??null,pageToken:x$28}),e$19).pipe(q$20(x$28=>({ok:x$28.ok,events:x$28.ok?x$28.items.map(U$19=>({...U$19,id:Gt({credId:v$22.credId,calendarId:U$19.calendar.id,externalId:U$19.id}),externalId:U$19.id})):[],credId:v$22.credId,calendarId:v$22.id,syncToken:x$28.ok?x$28.meta?.[0]??null:null}))))]))).then(v$22=>v$22.flat()),v$22=>lc(v$22,`syncToken`)),E$16=[...w$26,...R$21.map(({events:v$22})=>v$22).flat()].filter(v$22=>v$22.eventType!==`workingLocation`&&v$22.eventType!==`seriesMaster`),P$20=be$3(R$21.map(({credId:v$22,calendarId:x$28,ok:U$19})=>[`${v$22}:${x$28}`,U$19])),B$22=d$22(h$15.map(({credId:v$22,id:x$28})=>l$26[`${v$22}:${x$28}`]?void 0:P$20[`${v$22}:${x$28}`]?x$28:void 0)),G$16=this.reconciler.reconcileOrMask(E$16);if(this.store.dispatch(Z$6.actions.load({calendarIds:d$22(l$25(s$25.map(({id:v$22})=>v$22))),data:G$16,...(!M$12(B$22)&&{garbageCollect:{calendarIds:B$22,skip:[]}})})),this.logger.log(`Events`,{ok:!0,events:G$16.length}),!e$19.aborted){for(let{credId:v$22,calendarId:x$28,syncToken:U$19}of R$21){let H$10=`${v$22}:${x$28}`;this.logger.log(`Sync token`,{cred:v$22,calendar:x$28,syncToken:U$19?`(${U$19.slice(-5)})`:`GONE`}),U$19||this.queueSync(c$37,m$32,`calendar.sync-token-gone`),this.store.dispatch(so$1.actions.update({data:{id:H$10,syncToken:U$19}}));}er$2(`calendar_assetSyncFinished`,{duration:performance.now()-o$32,calendars:g$19.length,tags:I$25.length,events:E$16.length,fullScan:n$46.length===0});}});}static{this.fac=(()=>{let e$19;return function(o$32){return(e$19||(e$19=ty$1(t$21)))(o$32||t$21);};})();}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();ire=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.actions$=C$23(Le$4),this.calendarDataService=C$23(Yt),this.reconcilerService=C$23(fe$1),this.segmentService=C$23(_b$1),this.splitService=C$23(Qn),this.leaderElectionService=C$23(am),this.calendarRefreshService=C$23(rre),this.logger=f$30.byNamespace(`calendar`),this.splitCalendarRefreshPeriod$=this.splitService.getTreatment({name:O$16.CalendarRefreshPeriod}).pipe(q$20(e$19=>Tt(e$19)??p$21.duration({minutes:5}).asMilliseconds())),this.splitCalendarAssetSync$=this.splitService.isTreatmentOn({name:O$16.CalendarAssetSync}),this.refreshSagaController=null,this.abortRefreshOnWorkspaceChange$=Ke$1(()=>this.actions$.pipe(Ye$2(a$2),Is$1(()=>{this.refreshSagaController?.abort(`workspace change`);})),{dispatch:!1}),this.refresh$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.refresh),As$3(this.calendarDataService.activeCalendarCreds$,this.leaderElectionService.isLeader$,this.splitCalendarAssetSync$,this.store.select(Eo.selectDemoMode)),oe$13(([{reason:e$19},r$34,o$32,s$25,n$46])=>n$46?(this.logger.log(`refresh, skipped demo-mode`,{reason:e$19}),!1):s$25&&!o$32?(this.logger.log(`refresh, skipped not-leader`,{reason:e$19}),!1):r$34.length!==0),Is$1(([{reason:e$19},r$34,o$32,s$25])=>{s$25?r$26(()=>I$24(this,null,function*(){return this.calendarRefreshService.schedule(e$19);})):(f$30.byNamespace(`calendar-refresher`).log(`Started`,{reason:e$19}),this.refreshSagaController?.abort(e$19),this.refreshSagaController=new AbortController(),this.store.dispatch(Eo.actions.willRefreshTags()));})),{dispatch:!1}),this.refreshTags$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.willRefreshTags),As$3(this.calendarDataService.activeCalendarCreds$),le$5(([e$19,r$34])=>Gi(r$34.map(o$32=>this.calendarDataService.fetchEventTagsWithCall(o$32.id).pipe(Xo$2(()=>qe$6([]))))).pipe(q$20(o$32=>o$32.flat()))),oe$13(()=>!this.refreshSagaController?.signal.aborted),Z$12(e$19=>[qe$3.actions.load({data:e$19}),Eo.actions.didRefreshTags()]))),this.refreshCalendarsAfterRefreshTags$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.didRefreshTags),q$20(()=>Z$6.actions.refreshCalendars({includeEvents:!0})))),this.refreshCalendars$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.refreshCalendars),As$3(this.calendarDataService.indexedCalendarCredIds$),le$5(([e$19,r$34])=>Gi(d$22([...r$34.map(o$32=>this.calendarDataService.fetchCalendars(o$32).pipe(Xo$2(s$25=>(hr(s$25,{feature:`calendar`,origin:`refreshCalendars$`}),qe$6([]))))),...a$8.map(o$32=>this.calendarDataService.fetchCalendarsWithCall(o$32).pipe(Xo$2(s$25=>(hr(s$25,{feature:`calendar`,origin:`refreshCalendars$`}),qe$6([])))))])).pipe(q$20(o$32=>({calendars:pt$1(ft$1(o$32.flat()),o$32.flat()),action:e$19})))),oe$13(()=>!this.refreshSagaController?.signal.aborted),Is$1(({calendars:e$19})=>{this.store.dispatch(R$13.actions.load({data:e$19}));}),oe$13(({action:e$19})=>e$19.includeEvents),q$20(()=>Eo.actions.refreshWindowedViews()))),this.refreshWindowForView$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.refreshWindowForView),Rr(({viewId:e$19})=>$i([this.store.select(Eo.selectLeftFetchIndex(e$19)),this.store.select(Eo.selectRightFetchIndex(e$19))]).pipe(Ve$4(1),q$20(([r$34,o$32])=>r$34===0||o$32===0?Eo.actions.computeRefreshWindow({viewId:e$19,date:Date.now()}):Eo.actions.tryUpdateFetchIndex({viewId:e$19,left:r$34,right:o$32})))))),this.refreshWindowedViews$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.refreshWindowedViews),Mu(()=>[this.store.select(Eo.selectRegisteredViews)]),Z$12(([e$19,r$34])=>r$34.map(o$32=>Eo.actions.refreshWindowForView({viewId:o$32}))))),this.refreshEvents$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.refreshEvents),Z$12(e$19=>this.store.select(Eo.selectDemoMode).pipe(Ve$4(1),oe$13(r$34=>!r$34),q$20(()=>e$19))),Is$1(()=>{this.refreshSagaController??=new AbortController();}),oe$13(()=>!this.refreshSagaController?.signal.aborted),rt$4(e$19=>JSON.stringify(e$19),e$19=>{let r$34=this.refreshSagaController?.signal;return e$19.source===`search`?U_(o$32=>this.calendarDataService.fetchEvents(e$19.credId,e$19.calendarIds,o$32,e$19.timeMin,e$19.timeMax),r$34).pipe(q$20(o$32=>({source:`search`,ok:o$32.ok,calendarIds:e$19.calendarIds,timeMin:+e$19.timeMin,timeMax:+e$19.timeMax,events:o$32.ok?o$32.items.map(s$25=>({...s$25,id:Gt({credId:e$19.credId,calendarId:s$25.calendar.id,externalId:s$25.id}),externalId:s$25.id})):[]}))):this.calendarDataService.fetchEventsWithCall(e$19.credId,e$19.calendarId,e$19.timeMin,e$19.timeMax).pipe(q$20(o$32=>({source:`network`,ok:!0,calendarIds:s$19(e$19.calendarId),timeMin:+e$19.timeMin,timeMax:+e$19.timeMax,events:o$32.events.map(s$25=>({...s$25,id:Gt({credId:e$19.credId,calendarId:s$25.calendar.id,externalId:s$25.id}),externalId:s$25.id}))})));}),oe$13(()=>!this.refreshSagaController?.signal.aborted),As$3(this.store.select(w$4.selectAll)),q$20(([{ok:e$19,source:r$34,calendarIds:o$32,events:s$25,timeMin:n$46,timeMax:a$30},c$37])=>Z$6.actions.load({calendarIds:o$32,data:this.reconcilerService.reconcileOrMask(s$25),...(e$19&&r$34===`search`&&{garbageCollect:{calendarIds:o$32,skip:[...new Set(c$37.map(({modelId:m$32})=>m$32))],period:{start:n$46,end:a$30}}})})),cs(()=>{this.refreshSagaController?.abort(`done`),this.refreshSagaController=null;}))),this.refreshWithTimer$=Ke$1(()=>this.calendarDataService.activeCalendarCreds$.pipe(As$3(this.splitCalendarRefreshPeriod$,this.store.select(Eo.selectDemoMode)),oe$13(([e$19,,r$34])=>!r$34&&e$19.length>0),Ve$4(1),le$5(([e$19,r$34])=>Q$17(0,r$34)),q$20(()=>Z$6.actions.refresh({reason:`refresh-timer`})))),this.updateEvent$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.update),Mu(e$19=>[this.store.select(Xr(e$19.id)),this.store.select(Z$6.selectOne(e$19.id))]),Rr(([e$19,r$34,o$32])=>{if(o$32?.status===`draft`)return[Z$6.actions.updateCommit({id:e$19.id,data:e$19.data})];this.segmentService.track(Bu.CalendarUpdateCalendarBlock,{calendarBlockType:Jt$2(o$32?.eventType),action:`event-data`,fieldsUpdated:s$24(e$19.data).join(`$`),via:`global`});let s$25=z$15(e$19.data,`status`);return[Z$6.actions.updateCommit({id:e$19.id,data:e$19.data}),w$4.actions.track({change:{model:`event`,modelId:e$19.id,credId:o$28(r$34,`no calendar`).credId,op:`update`,desired:s$25,baseline:P$17(o$28(o$32,`no baseline`),s$24(s$25))}})];}),Xo$2(e$19=>(hr(e$19,{feature:`calendar`,origin:`updateEvent$`}),z$18)))),this.createEvent$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.create),Mu(e$19=>this.store.select(R$13.selectOne(e$19.calendarId))),Z$12(([e$19,r$34])=>(this.segmentService.track(Bu.CalendarCreateCalendarBlock,{calendarBlockType:Jt$2(e$19.data.eventType),action:`click`,via:`global`}),[w$4.actions.track({change:{model:`event`,modelId:e$19.data.id,credId:o$28(r$34,`no calendar`).credId,op:`create`,desired:e$19.data}})])),Xo$2(e$19=>(hr(e$19,{feature:`calendar`,origin:`createEvent$`}),z$18)))),this.cancelEvent$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.cancel),Mu(e$19=>this.store.select(Xr(e$19.id))),Is$1(([{id:e$19},r$34])=>{this.store.dispatch(w$4.actions.track({change:{model:`event`,modelId:e$19,credId:o$28(r$34,`no calendar`).credId,op:`delete`}}));}),Xo$2(e$19=>(hr(e$19,{feature:`calendar`,origin:`cancelEvent$`}),z$18))),{dispatch:!1}),this.submitDrafts$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.submitDrafts),Mu(()=>[this.store.select(Z$6.selectAll),this.store.select(Eo.selectDemoMode)]),oe$13(([,,e$19])=>!e$19),Rr(([e$19,r$34])=>{let o$32=r$34.filter(s$25=>Nt$2(s$25)).map(s$25=>({...s$25,status:`pending`}));return[Z$6.actions.load({calendarIds:d$22(l$25(o$32.map(s$25=>s$25.calendar.id))),data:o$32}),...o$32.map(s$25=>Z$6.actions.create({calendarId:s$25.calendar.id,data:s$25}))];}))),this.refreshOnRecentlyIndexedCreds$=Ke$1(()=>this.calendarDataService.recentlyIndexedCalendarCreds$.pipe(q$20(()=>Z$6.actions.refresh({reason:`recently-indexed-creds`}))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();ore=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.actions$=r$34,this.autoScheduledTasks$=$i([this.store.select(Eo.selectForecastTaskConstraints),this.store.select(ae$8),this.store.select(o$30)]).pipe(le$5(([o$32,s$25,n$46])=>{let a$30=Object.keys(o$32);return!s$25||!n$46?this.store.select($o$1(a$30)).pipe(q$20(c$37=>({tasks:c$37,lineupTasks:[]}))):$i([this.store.select($o$1(a$30)),this.store.select(te$3(n$46,s$25))]).pipe(q$20(([c$37,m$32])=>({tasks:c$37,lineupTasks:m$32})));}),q$20(({tasks:o$32,lineupTasks:s$25})=>Br$1(o$32,I$13(s$25.map((n$46,a$30)=>[n$46.id,a$30]))))),this.tryComputeForecast$=Ke$1(()=>$i([this.store.select(jr),this.store.select(Eo.selectForecastSnoozedUntil),this.store.select(Eo.selectAnchoredForecasts),this.autoScheduledTasks$]).pipe(oe$13(([o$32,s$25,n$46,a$30])=>!M$12(o$32)),fs$1(50),q$20(()=>Ke$2.actions.computeForecast()))),this.doComputeForecast$=Ke$1(()=>this.actions$.pipe(Ye$2(Ke$2.actions.computeForecast),As$3(this.store.select(h$8.selectCurrentTime),this.store.select(jr),this.store.select(Eo.selectForecastTaskConstraints),this.store.select(Eo.selectAnchoredForecasts),this.store.select(Eo.selectForecastSnoozedUntil),this.autoScheduledTasks$),Rr(([o$32,s$25,n$46,a$30,c$37,m$32,l$26])=>St$1(g$19=>Lr({signal:g$19,grid:n$46.filter(f$33=>f$33.transparency===`opaque`),anchored:Object.values(c$37).flat(),currentTime:Math.max(m$32,s$25),tasks:l$26.filter(f$33=>!M$12(a$30[f$33.id])).filter(f$33=>!I$17(f$33.status)),accrued:Vr(n$46.filter(f$33=>!!f$33.taskIds&&f$33.start>s$25&&f$33.status!==`cancelled`),Object.values(c$37).flat()),constraints:a$30,preferences:{}}),p$21.duration({minutes:1}).asMilliseconds(),(g$19,f$33)=>{fA(g$19,{feature:`calendar`,origin:`forecast.effects`,context:{reason:f$33}});}).pipe(q$20(g$19=>{let f$33=c$28(s$22(g$19,h$15=>h$15.forecastedId),h$15=>Be$5(h$15,`chunk`)?.chunk);return Ke$2.actions.reset({data:g$19.map(h$15=>({...h$15,maxChunk:f$33[h$15.forecastedId]??h$15.chunk}))});}),Xo$2(g$19=>(fA(g$19,{feature:`calendar`,origin:`forecast.effects`}),z$18)))))),this.queueForecastAfterGracePeriod$=Ke$1(()=>this.store.select(h$8.selectCurrentTime).pipe(As$3(this.store.select(Ke$2.selectFirstUpcoming),this.store.select(Eo.selectUpcomingCtaGracePeriod),this.store.select(Eo.selectAnchoredForecasts)),oe$13(([o$32,s$25])=>!!s$25),oe$13(([o$32,s$25,n$46])=>o$28(s$25).start+n$46-o$32<=0),q$20(([o$32,s$25,n$46,a$30])=>Eo.actions.update({anchoredForecasts:B$19(a$30,c$37=>c$37.start>=o$32),forecastSnoozedUntil:o$28(s$25).end}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();U$18();VN();are=(()=>{class t$21{listDefinition$(e$19){if(e$19===`assignedToSelfAndDueDateSet`)return this.store.select(o$30).pipe(As$3(this.store.select(ae$8)),oe$13(([r$34,o$32])=>!!o$32),q$20(([r$34,o$32])=>({type:`payload`,data:nre(r$34,o$28(o$32),{self:!0})})));if(e$19.startsWith(`user-tasks-`)){let r$34=o$28(e$19.split(`user-tasks-`)[1]);return this.store.select(o$30).pipe(oe$13(o$32=>typeof o$32==`string`),q$20(o$32=>({type:`payload`,data:nre(o$32,r$34,{self:!1})})));}return this.store.select(p$19(e$19)).pipe(Ve$4(1),Mu(()=>this.store.select(b$10)),le$5(([r$34,o$32])=>o$32?.id===e$19?qe$6({type:`dataView`,data:o$32}):r$34?qe$6({type:`dataView`,data:r$34}):(this.store.dispatch(A$13({id:e$19})),ts$2(this.actions$.pipe(Ye$2(Y$4),oe$13(s$25=>s$25.view.id===e$19),Ve$4(1),q$20(s$25=>({type:`dataView`,data:s$25.view}))),this.actions$.pipe(Ye$2(P$10),oe$13(s$25=>s$25.id===e$19),Ve$4(1),le$5(()=>at$12(()=>new Error(`Failed to load view: ${e$19}`)))),Q$17(1e4).pipe(le$5(()=>at$12(()=>new Error(`Failed to load view: ${e$19}`))))).pipe(ys$1({bufferSize:1,refCount:!1}),Xo$2(s$25=>(hr(s$25,{feature:`calendar`,origin:`gv-effects-fetch-view`,context:{listId:e$19}}),z$18))))));}constructor(e$19,r$34,o$32){this.actions$=e$19,this.store=r$34,this.dataViewService=o$32,this.refreshPeriod$=Ke$1(()=>this.actions$.pipe(Ye$2(Zt$1.actions.refreshPeriod),rt$4(s$25=>JSON.stringify(s$25),s$25=>this.listDefinition$(s$25.listId).pipe(oe$13(n$46=>!!n$46?.data),Mu(()=>this.store.select(p$17)),le$5(([{type:n$46,data:a$30},c$37])=>this.dataViewService.genericView({any_date_gt:`${+s$25.timeMin}`,any_date_lt:`${+s$25.timeMax}`,...(n$46===`payload`?a$30:ns(o$28(a$30),c$37,!0))},{freshReq:!0,tag:`calendar-${s$25.listId}`}).pipe(q$20(m$32=>{let l$26=sre(m$32);return Zt$1.actions.update({id:s$25.listId,taskIds:l$26});}),Xo$2(m$32=>(hr(m$32,{feature:`calendar`,origin:`gv-effects`}),z$18))))))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Qt));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})(),nre=(t$21,i$27,{self:e$19=!0})=>({...Gs$2,id:e$19?`my-tasks-${i$27}-${t$21}`:`user-${i$27}-${t$21}`,team_id:t$21,parent:{id:t$21,type:12},me_view:!!e$19,grouping:{field:`none`,dir:1,collapsed:[],ignore:!1,single:!1},settings:{...Gs$2.settings,show_subtasks:b$18.StandAlone},filters:O$9(o$16({search:``,showClosed:!1,searchCustomFields:!0,searchDescription:!0,searchTaskName:!0,op:I$20.And,filterGroupOps:d$22([I$20.Or,I$20.And,e$19?void 0:I$20.And]),filterGroups:[[[0,1],d$22([2,e$19?void 0:3])]],filters:[{field:{name:`dueDate`,title:`dueDate`},op:`IS SET`,value:[{op:`notNull`}]},{field:{name:`startDate`,title:`startDate`},op:`IS SET`,value:[{op:`notNull`}]},{field:{name:`status`,title:`status`},op:`NOT`,value:[{type:`done`},{type:`closed`}]},...(e$19?[]:[{field:{name:`assignee`,title:`assignee`},op:`ANY`,value:[Number(i$27)]}])].flat()}))});VN();dm();hr$3();VN();dm();hr$3();C$22();VN();dm();hr$3();mre=F$23(cre()),lre=F$23(Ve$1());VN();dre=(()=>{class t$21{constructor(){this.api=C$23(Yt),this.store=C$23(q$19),this.reconciler=C$23(fe$1);}create$({journalIds:e$19,credId:r$34,data:o$32}){return this.api.createEvent({credId:r$34,calendarId:o$28(Re$2(o$32)?.calendar.id),data:o$32}).pipe(R$20(),q$20(s$25=>{let{reconciliationId:n$46,eventId:a$30,eventData:c$37}=M$11(s$25.data.call.output,mre.default.OutputSchema),m$32=Gt({credId:r$34,calendarId:o$28(Re$2(o$32)?.calendar.id),externalId:a$30});this.store.dispatch(Z$6.actions.swap({idBefore:n$46,id:m$32,overrideData:P$17(c$37,[`conferenceData`])})),this.store.dispatch(w$4.actions.swap({ids:e$19,op:`create`,overrideData:{...P$17(c$37,[`summary`,`start`,`end`]),id:m$32}}));}));}update$({journalIds:e$19,credId:r$34,modelId:o$32,data:s$25}){return this.store.select(Z$6.selectOne(o$32)).pipe(Ve$4(1),le$5(n$46=>{let a$30=d$22([lc(s$25,`selfResponseStatus`)&&[this.api.updateEvent({credId:r$34,calendarId:Kt$1(o$28(n$46)),eventId:o$32,data:{selfResponseStatus:s$25.selfResponseStatus}})],[this.api.updateEvent({credId:r$34,calendarId:o$28(n$46?.calendar.id),eventId:o$32,data:s$25})]].flat());return a$30.length>0?Gi(a$30).pipe(q$20(c$37=>{for(let m$32 of d$22(c$37)){let{id:l$26,...g$19}=M$11(m$32?.data.call.output,lre.default.OutputSchema),f$33=P$17(g$19,[`conferenceData`]),h$15={...(s$24(f$33).length>0?f$33:{conferenceData:void 0})},I$25=Gt({credId:r$34,calendarId:g$19.calendar.id,externalId:l$26});this.store.dispatch(Z$6.actions.updateCommit({id:I$25,data:h$15})),this.store.dispatch(w$4.actions.swap({ids:e$19,op:`update`,overrideData:h$15}));}})):qe$6(void 0);}));}delete$({credId:e$19,modelId:r$34}){if(Q$11({id:r$34}))throw new Error(`Cannot delete draft event`);let{calendarId:o$32,externalId:s$25}=kt$1(r$34);return this.api.cancelEvent$({credId:e$19,calendarId:o$28(o$32),eventId:s$25}).pipe(q$20(()=>{}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();pre=(()=>{class t$21 extends v{constructor(){super(...arguments),this.NAMESPACE=`calendar-offline-sync`,this.ON_ERROR_TRACK_ACTION=`calendar_offlineSyncError`,this.TIMEOUT=60*1e3,this.logger=f$30.byNamespace(`calendar-offline-sync`),this.OFFLINE_SYNC={event:C$23(dre)};}work(e$19,r$34){return I$24(this,null,function*(){let o$32=performance.now(),s$25=yield Li$1(this.store.select(w$4.selectScheduled));if(s$25.length===0){this.logger.log(`Nothing to do.`);return;}if(e$19.aborted)return;er$2(`calendar_offlineSyncStarted`,{});let a$30=d$22([...new Set(s$25.map(h$15=>h$15.modelId))].map(h$15=>{let I$25=s$25.filter(E$16=>E$16.modelId===h$15);if(I$25.length===0)return null;let A$22=I$25[0].credId,R$21=I$25.some(E$16=>E$16.op===`create`)?`create`:I$25.some(E$16=>E$16.op===`delete`)?`delete`:`update`,w$26=I$25.reduce((E$16,P$20)=>{let B$22=P$20.forward;for(let G$16 of Object.keys(B$22??{}))E$16[G$16]=B$22[G$16];return E$16;},{});return{journalIds:I$25.map(E$16=>E$16.id),credId:A$22,model:`event`,modelId:h$15,type:R$21,data:w$26};}));if(e$19.aborted)return;let[m$32,l$26]=i$22(d$22(yield Li$1(Gi(a$30.map(h$15=>h$15.type===`create`?this.OFFLINE_SYNC[h$15.model].create$(h$15).pipe(W_(h$15.journalIds),Xo$2(I$25=>(fA(I$25,{origin:`CalendarOfflineSyncService.doSyncOnce`,feature:`calendar`,context:{changeIds:h$15.journalIds}}),qe$6(null)))):p$27(h$15.modelId)?qe$6({success:!0,changeIds:h$15.journalIds}):h$15.type===`update`?this.OFFLINE_SYNC[h$15.model].update$(h$15).pipe(W_(h$15.journalIds),Xo$2(I$25=>(fA(I$25,{origin:`CalendarOfflineSyncService.doSyncOnce`,feature:`calendar`,context:{changeIds:h$15.journalIds}}),qe$6(null)))):h$15.type===`delete`?this.OFFLINE_SYNC[h$15.model].delete$(h$15).pipe(W_(h$15.journalIds),Xo$2(I$25=>(fA(I$25,{origin:`CalendarOfflineSyncService.doSyncOnce`,feature:`calendar`,context:{changeIds:h$15.journalIds}}),qe$6(null)))):qe$6(null).pipe(W_(h$15.journalIds)))))),h$15=>h$15.success),g$19=m$32.flatMap(h$15=>h$15.changeIds);g$19.length>0&&this.store.dispatch(w$4.actions.markAccepted({ids:g$19}));let f$33=s$22(l$26,h$15=>h$15.error);for(let[h$15,I$25]of Object.entries(f$33)){let A$22=I$25.flatMap(R$21=>R$21.changeIds);this.store.dispatch(w$4.actions.addFailedAttempt({ids:A$22,error:h$15}));}this.logger.log(`Flush`,{ok:m$32.length,failed:l$26.length}),er$2(`calendar_offlineSyncFinished`,{duration:performance.now()-o$32});});}static{this.fac=(()=>{let e$19;return function(o$32){return(e$19||(e$19=ty$1(t$21)))(o$32||t$21);};})();}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();ure=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.pageVisibilityService=C$23(D$12),this.offlineSync=C$23(pre),this.journalGarbageCollector=C$23(Le$1),this.leaderElectionService=C$23(am),this.logger=f$30.byNamespace(`calendar-journal`),this.sync=Ke$1(()=>this.actions$.pipe(Ye$2(w$4.actions.sync),As$3(this.leaderElectionService.isLeader$),oe$13(([{reason:e$19},r$34])=>r$34?!0:(this.logger.log(`Skipping, not leader`,{reason:e$19}),!1)),Rr(r$34=>I$24(this,[r$34],function*([{reason:e$19}]){return[j$23(this.offlineSync.schedule(e$19)),j$23(this.journalGarbageCollector.schedule(e$19))];}))),{dispatch:!1}),this.syncOnPageVisibilityChange$=Ke$1(()=>this.pageVisibilityService.pageVisible$.pipe(oe$13(e$19=>!e$19),q$20(()=>w$4.actions.sync({reason:`page-visibility-change`})))),this.syncOnUserRefresh$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.refresh),oe$13(({reason:e$19})=>e$19===`user-forced-sync`),q$20(()=>w$4.actions.sync({reason:`user-forced-sync`})))),this.syncOnJournalTracked$=Ke$1(()=>this.actions$.pipe(Ye$2(w$4.actions.track),fs$1(500),q$20(()=>w$4.actions.sync({reason:`journal-tracked`}))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();fre=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.calendarDataService=C$23(Yt),this.splitService=C$23(Qn),this.leaderElectionService=C$23(am),this.calendarAssetSync$=this.splitService.isTreatmentOn({name:O$16.CalendarAssetSync}),this.willRefreshParticipationOverlay$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.toggleParticipationOverlay),As$3(this.store.select(Eo.selectGridOverlaysForView)),oe$13(([e$19,r$34])=>(r$34[e$19.viewId]??[]).some(o$32=>o$32.id===e$19?.id)),q$20(([e$19])=>ar$3.actions.willRefresh({log:`overlaysRefreshLog`,id:e$19.id})))),this.didRefreshParticipationOverlay$=Ke$1(()=>this.actions$.pipe(Ye$2(me$5.actions.load),oe$13(({source:e$19})=>!!e$19),q$20(({source:e$19})=>ar$3.actions.didRefresh({log:`overlaysRefreshLog`,id:o$28(e$19)})))),this.resetRefresh$=Ke$1(()=>this.actions$.pipe(Ye$2(ar$3.actions.resetRefresh),oe$13(({log:e$19})=>e$19===`eventsRefreshLog`),As$3(this.store.select(R$13.selectAllSourceSearch)),le$5(([{resetData:e$19,indexAppFull:r$34},o$32])=>{let s$25=[...new Set(o$32.map(n$46=>n$46.credId))];return s$25.length===0?qe$6({resetData:e$19}):Gi(s$25.map(n$46=>this.calendarDataService.scheduleIngestion(n$46,r$34??!1))).pipe(q$20(()=>({resetData:e$19})));}),Z$12(({resetData:e$19})=>d$22([e$19&&Z$6.actions.reset(),e$19&&R$13.actions.reset(),e$19&&so$1.actions.reset(),Z$6.actions.refresh({reason:`user-forced-sync`})])))),this.willRefreshEventsAssetSync$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.refresh),As$3(this.store.select(Qr),this.calendarAssetSync$,this.leaderElectionService.isLeader$),oe$13(([e$19,r$34,o$32,s$25])=>o$32&&s$25),Z$12(([e$19,r$34])=>d$22(r$34.map(({id:s$25})=>s$25)).map(s$25=>ar$3.actions.willRefresh({log:`eventsRefreshLog`,id:s$25}))))),this.willRefreshEvents$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.refreshEvents),As$3(this.calendarAssetSync$),oe$13(([,e$19])=>!e$19),Z$12(([e$19])=>{return d$22(e$19.source===`search`?e$19.calendarIds:[e$19.calendarId]).map(o$32=>ar$3.actions.willRefresh({log:`eventsRefreshLog`,id:o$32}));}))),this.didRefreshEvents$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.load),Z$12(({calendarIds:e$19})=>e$19.map(r$34=>ar$3.actions.didRefresh({log:`eventsRefreshLog`,id:r$34}))))),this.garbageCollect$=Ke$1(()=>this.actions$.pipe(Ye$2(ar$3.actions.garbageCollect),As$3(this.store.select(R$13.selectAll)),q$20(([{creds:e$19},r$34])=>ar$3.actions.garbageCollectRefreshLog({calendarIds:r$34.filter(o$32=>e$19.includes(o$32.credId)).map(o$32=>o$32.id)}))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();hre=F$23(L$4());dm();hr$3();VN();gre=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32){this.store=e$19,this.actions$=r$34,this.toast=o$32,this.calendarDataService=s$25,this.navigationHistoryService=n$46,this.segmentService=a$30,this.calendarFeedbackService=c$37,this.splitService=m$32,this.teamId$=Jc(),this.leaderElectionService=C$23(am),this.pageVisibilityService=C$23(D$12),this.calendarRefreshWindow$=this.splitService.getTreatment({name:O$16.CalendarRefreshWindow}).pipe(q$20(l$26=>n$43(l$26))),this.calendarAssetSync$=this.splitService.isTreatmentOn({name:O$16.CalendarAssetSync}),this.refreshOnDisplay$=Ke$1(()=>this.store.pipe(ot$5(Eo.selectDisplayCalendars),Ss$1(1),P$15(),As$3(this.store.select(Eo.selectDemoMode),this.store.select(Eo.selectHydrated)),oe$13(([,l$26,g$19])=>!l$26&&g$19),q$20(([l$26])=>(f$30.byNamespace(`calendar-refresher`).log(`Refresh`,{reason:`updated-display-calendars`,meta:l$26}),Z$6.actions.refresh({reason:`updated-display-calendars`}))))),this.refreshOnCalendarViewDisplay$=Ke$1(()=>this.store.pipe(ot$5(Eo.selectCalendarsForListView),Ss$1(1),P$15(),As$3(this.store.select(Eo.selectDemoMode)),oe$13(([,l$26])=>!l$26),q$20(()=>Z$6.actions.refresh({reason:`updated-calendar-view-calendars`})))),this.refreshListSubscription$=Ke$1(()=>this.actions$.pipe(Ye$2(Zt$1.actions.refresh),As$3(this.store.select(Eo.selectFetchIndexesForView)),q$20(([{listId:l$26},g$19])=>{let f$33=Math.min(...d$22(c$23(g$19)).map(I$25=>I$25.left)),h$15=Math.max(...d$22(c$23(g$19)).map(I$25=>I$25.right));return Zt$1.actions.refreshPeriod({listId:l$26,timeMin:p$21.tz(Ro(f$33,!0),A$14()).toDate(),timeMax:p$21.tz(Ro(h$15,!0),A$14()).toDate()});}))),this.refreshOnDisplayListsChange$=Ke$1(()=>this.store.pipe(ot$5(Eo.selectDisplayListsForView),Ss$1(1),hs$3(),q$20(([l$26,g$19])=>d$22(u$26(g$19).map(f$33=>xr(l$26[f$33],g$19[f$33])?void 0:{viewId:f$33,lists:g$19[f$33]}))),oe$13(l$26=>l$26.length>0),As$3(this.store.select(Eo.selectFetchIndexesForView)),Z$12(([l$26,g$19])=>d$22(l$26.map(({viewId:f$33,lists:h$15})=>{let{left:I$25,right:A$22}=g$19[f$33]??{left:0,right:0},R$21={timeMin:p$21.tz(Ro(I$25,!0),A$14()).toDate(),timeMax:p$21.tz(Ro(A$22,!0),A$14()).toDate()};return h$15?.map(w$26=>Zt$1.actions.refreshPeriod({listId:w$26,...R$21}));})).flat()))),this.tryRageQuit$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.tryRageQuit),As$3(this.store.select(Eo.selectRequireUserConfirmation)),q$20(([l$26,g$19])=>g$19?Eo.actions.update({isRequiredUserConfirmationModalOpen:!0}):Eo.actions.doRageQuit(l$26)))),this.clearDraftsOnRageQuit$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.doRageQuit),Z$12(()=>[Z$6.actions.clearDrafts(),Zt$1.actions.clearDrafts()]))),this.confirmDrafts$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.confirmDrafts),Mu(()=>[this.store.select(Z$6.selectDraftsPendingConfirmation),this.store.select(Z$6.selectEntities),this.store.select(qr)]),oe$13(([l$26,g$19,f$33,h$15])=>!!h$15),Z$12(([l$26,g$19,f$33,h$15])=>d$22(g$19.map(A$22=>f$33[A$22])).map(A$22=>Z$6.actions.create({calendarId:o$28(h$15).id,data:{...A$22,status:`confirmed`}}))))),this.loadParticipationOverlay$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.toggleParticipationOverlay),fs$1(0),As$3(this.store.select(Eo.selectGridOverlaysForView),this.calendarDataService.activeCalendarCreds$),oe$13(([l$26,g$19,f$33])=>!M$12(f$33)),oe$13(([l$26,g$19])=>(g$19[l$26.viewId]??[]).some(({id:f$33})=>f$33===l$26.id)),rt$4(([{id:l$26}])=>l$26,([l$26,g$19,f$33])=>{let h$15=(g$19[l$26.viewId]??[]).find(({id:R$21})=>R$21===l$26.id)?.color,I$25=f$33.map(R$21=>this.calendarDataService.fetchEventsWithCall(R$21.id,l$26.id,zo$1.timeMin,zo$1.timeMax,{throwOnError:!0}).pipe(Vi(5e3),q$20(({events:w$26})=>w$26),q$20(w$26=>({ok:!0,items:Os$1(l$26.id,w$26.filter(E$16=>E$16.selfResponseStatus!==`declined`&&E$16.status!==`cancelled`),h$15)})),Xo$2(w$26=>qe$6({ok:!1,error:w$26})))),A$22=f$33.map(R$21=>this.calendarDataService.fetchFreeBusyWithCall(R$21.id,l$26.id,zo$1.timeMin,zo$1.timeMax,{throwOnError:!0}).pipe(Vi(5e3),q$20(w$26=>({ok:!0,items:Os$1(l$26.id,w$26,h$15)})),Xo$2(w$26=>qe$6({ok:!1,error:w$26}))));return j$23(I$25).pipe(Z$12(R$21=>R$21),is(),le$5(R$21=>{let w$26=R$21.find(E$16=>E$16.ok&&!M$12(E$16.items));return w$26?.ok?qe$6({source:l$26.id,data:w$26.items,errors:[]}):j$23(A$22).pipe(Z$12(E$16=>E$16),is(),q$20(E$16=>{let P$20=E$16.find(G$16=>G$16.ok&&!M$12(G$16.items));if(P$20?.ok)return{source:l$26.id,data:P$20.items,errors:[]};let B$22=[...R$21.filter(G$16=>!G$16.ok).map(G$16=>G$16.error),...E$16.filter(G$16=>!G$16.ok).map(G$16=>G$16.error)];return{source:l$26.id,data:[],errors:B$22};}));}));}),Is$1(()=>{this.segmentService.track(Bu.CalendarPeekTeammateCalendar,{via:`sidebar`});}),Z$12(({source:l$26,data:g$19,errors:f$33})=>d$22([me$5.actions.load({source:l$26,data:g$19}),f$33.length>0&&ar$3.actions.updateError({log:`overlaysRefreshLog`,id:l$26,error:f$33[0]})])))),this.refreshOnVisibilityOrLeaderChange$=Ke$1(()=>Hi$2(this.pageVisibilityService.pageVisible$.pipe(Ss$1(1),q$20(()=>`page-visibility-change`)),this.leaderElectionService.isLeader$.pipe(Ss$1(1),q$20(()=>`leader-change`))).pipe(fs$1(100),As$3(this.leaderElectionService.isLeader$),oe$13(([l$26,g$19])=>g$19),q$20(([l$26])=>Z$6.actions.refresh({reason:l$26})))),this.sendFeedback$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.sendFeedback),Is$1(()=>{this.toast.addToastItem({id:`calendar-feedback-collecting-data`,title:"Collecting log data...",timeout:2e4,spinner:!0,isV3Toast:!0});}),le$5(()=>this.calendarFeedbackService.collect().pipe(Is$1(l$26=>{let g$19=`clickup-calendar-${p$21().tz(A$14()).format(`YYYY-MM-DD_HHmm`)}.json`,f$33=new Blob([l$26],{type:`application/json`});(0,hre.saveAs)(f$33,g$19);}),Xo$2(l$26=>(hr(l$26,{feature:`calendar`,origin:`sendFeedback$`}),this.toast.addToastItem({id:`calendar-feedback-error`,timeout:p$21.duration(5,`seconds`).asMilliseconds(),title:"Failed to collect feedback data",isV3Toast:!0}),z$18)),cs(()=>{this.toast.removeToastById(`calendar-feedback-collecting-data`);})))),{dispatch:!1}),this.showToastOnBlockCancellation$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.cancel),oe$13(l$26=>!Q$11({id:l$26.id})),Mu(l$26=>[this.store.select(Z$6.selectOne(l$26.id))]),Is$1(([l$26,g$19])=>{let f$33=qt$1(g$19);return f$33?this.toast.addToastItem({id:`calendar-event-cancellation`,title:f$33,timeout:5e3,isV3Toast:!0,icon:`check`}):void 0;})),{dispatch:!1}),this.refreshOnEventsOnCredAssetsUpdated$=Ke$1(()=>this.calendarDataService.activeCalendarCreds$.pipe(zt$2((l$26,g$19)=>{return B$18(l$26.map(I$25=>I$25.id)).join(`,`)===B$18(g$19.map(I$25=>I$25.id)).join(`,`);}),As$3(this.calendarDataService.calendarUseReplication$),oe$13(([l$26,g$19])=>g$19),le$5(([l$26])=>j$23(l$26).pipe(Z$12(g$19=>this.calendarDataService.subscribeCredAssetsUpdated(g$19.id).pipe(As$3(this.store.select(ao),this.store.select(Qr),this.calendarAssetSync$),Is$1(()=>{f$30.byNamespace(`calendar-api`).log(`Received cred assets updated`,g$19.id);}),fs$1(5e3),Is$1(([{data:f$33},{left:h$15,right:I$25},A$22,R$21])=>{R$21?this.store.dispatch(Z$6.actions.refresh({reason:`cred-assets-updated`})):this.store.dispatch(Z$6.actions.refreshEvents({credId:f$33.credAssetsUpdated.id,source:`search`,calendarIds:A$22.filter(w$26=>w$26.source===`search`&&w$26.credId===f$33.credAssetsUpdated.id).map(({id:w$26})=>w$26),timeMin:p$21.tz(Ro(h$15,!0),A$14()).toDate(),timeMax:p$21.tz(Ro(I$25,!0),A$14()).toDate()}));}),bs({delay:f$33=>(hr(f$33,{feature:`calendar`,origin:`refreshOnEventsOnCredAssetsUpdated$`,context:{credId:g$19.id}}),Q$17(5e3))}),gs(this.actions$.pipe(Ye$2(ve$6)))))))),{dispatch:!1}),this.computeRefreshWindow$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.computeRefreshWindow),As$3(this.calendarDataService.activeCalendarCreds$),Mu(([{viewId:l$26}])=>[this.store.select(Eo.selectDays(l$26)),this.store.select(Eo.selectLeftFetchIndex(l$26)),this.store.select(Eo.selectRightFetchIndex(l$26)),this.calendarRefreshWindow$]),q$20(([[{viewId:l$26,date:g$19}],f$33,h$15,I$25,A$22])=>{let R$21=f$33===30?A$22?.monthView??48:A$22?.weekView??28,w$26=Zt$2(C$13(At$4(X$8(g$19),0)),!0);return w$26<h$15||w$26>I$25?Eo.actions.tryUpdateFetchIndex({viewId:l$26,left:w$26-R$21,right:w$26+R$21}):I$25-w$26<R$21?Eo.actions.tryUpdateFetchIndex({viewId:l$26,right:I$25+R$21}):Eo.actions.update({});}))),this.tryFetchIndexUpdate$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.tryUpdateFetchIndex),Mu(({viewId:l$26})=>[this.store.select(Eo.selectLeftFetchIndex(l$26)),this.store.select(Eo.selectRightFetchIndex(l$26)),this.store.select(Va),this.store.select(Eo.selectDisplayLists(l$26)),this.calendarAssetSync$]),q$20(([{viewId:l$26,left:g$19,right:f$33},h$15,I$25,A$22,R$21,w$26])=>({viewId:l$26,search:A$22.search,network:A$22.network,lists:R$21,assetSync:w$26,window:Rn$1({left:g$19,right:f$33,leftFetchIndex:h$15,rightFetchIndex:I$25})})),oe$13(({search:l$26,network:g$19,lists:f$33})=>!M$12(l$26)||!M$12(g$19)||!M$12(f$33)),Z$12(({viewId:l$26,search:g$19,network:f$33,lists:h$15,window:I$25,assetSync:A$22})=>d$22([!A$22&&d$22($a(s$22(g$19,`credId`)).map(([R$21,w$26])=>Z$6.actions.refreshEvents({credId:R$21,calendarIds:w$26.map(({id:E$16})=>E$16),source:`search`,...I$25}))),!A$22&&f$33.map(R$21=>Z$6.actions.refreshEvents({credId:o$28(R$21?.credId),calendarId:o$28(R$21?.id),source:`network`,...I$25})),h$15.map(R$21=>Zt$1.actions.refreshPeriod({listId:R$21,...I$25})),Eo.actions.doUpdateFetchIndex({viewId:l$26,...I$25})]).flat()))),this.hideOnRouteChange$=Ke$1(()=>this.navigationHistoryService.history$.pipe(As$3(this.store.select(Eo.selectLayout)),oe$13(([,l$26])=>l$26!==`hidden`),q$20(()=>Eo.actions.hide()))),this.toggleNuxWithActiveCreds$=Ke$1(()=>this.calendarDataService.activeCalendarCreds$.pipe(As$3(this.store.select(Eo.selectHydrated),this.store.select(Eo.selectNux)),oe$13(([l$26,g$19])=>!!g$19),q$20(([l$26,g$19,f$33])=>Eo.actions.update({nux:l$26.length===0,...(f$33&&l$26.length!==0&&{displayCalendars:[`nux`]})})))),this.tryUpsertAnchoredForecast$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.tryUpsertAnchoredForecast),As$3(this.store.select(Ke$2.selectAll),this.store.select(Eo.selectAnchoredForecasts)),le$5(([l$26,g$19,f$33])=>this.store.select(Ta$1([X$8(l$26.start)])).pipe(Ve$4(1),Is$1(h$15=>{let I$25=go(l$26,h$15);if(!I$25)return;let A$22=B$19(f$33,P$20=>P$20.forecastedId!==l$26.forecastedId),R$21=Object.values(f$33).filter(P$20=>P$20.id!==l$26.id&&P$20.forecastedId===l$26.forecastedId),w$26=Object.values(g$19).map(P$20=>P$20.forecast).flat().filter(P$20=>P$20.id!==l$26.id&&P$20.forecastedId===l$26.forecastedId&&!Ur$1(P$20)),E$16=wo$1(d$22([...R$21,...w$26,l$26.anchor===!0&&{id:l$26.id,forecastedId:l$26.forecastedId,isAllDay:!1,chunk:0,model:l$26.model,...I$25}])).map(P$20=>({...P$20,anchor:!0}));return this.store.dispatch(Eo.actions.update({anchoredForecasts:{...A$22,...I$13(E$16.map(P$20=>[P$20.id,P$20]))}}));})))),{dispatch:!1}),this.updateLastUsedCalendar$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.create),Mu(l$26=>[this.store.select(R$13.selectOne(l$26.calendarId))]),oe$13(([l$26,g$19])=>!!g$19),q$20(([l$26,g$19])=>Eo.actions.update({lastUsedCalendar:g$19?.id,...(g$19?.primary&&{lastUsedPrimaryCalendar:g$19?.id})})))),this.defaultDisplayCalendars$=Ke$1(()=>this.actions$.pipe(Ye$2(R$13.actions.load),As$3(this.store.select(Eo.selectDisplayCalendars)),oe$13(([,l$26])=>l$26?.[0]===`nux`),q$20(([l$26])=>Eo.actions.update({displayCalendars:l$26.data.filter(g$19=>g$19.primary).map(g$19=>g$19.id)})))),this.nuxVariantDisplayCalendars$=Ke$1(()=>this.actions$.pipe(Ye$2(R$13.actions.load),As$3(this.store.select(Eo.selectDisplayCalendars)),oe$13(([,l$26])=>l$26?.some(g$19=>g$19.startsWith(`nux:`))),q$20(([l$26,g$19])=>{let f$33=g$19.map(h$15=>{if(!h$15.startsWith(`nux:`))return h$15;let[,I$25]=h$15.split(`:`),A$22=l$26.data.find(R$21=>R$21.credId===I$25&&R$21.primary);return A$22?A$22.id:h$15;});return{original:g$19,updated:[...new Set(f$33)]};}),oe$13(({original:l$26,updated:g$19})=>!xr(x$17(l$26),x$17(g$19))),q$20(({updated:l$26})=>Eo.actions.update({displayCalendars:l$26})))),this.calendarsConnected$=Ke$1(()=>this.store.select(R$13.selectAll).pipe(hs$3(),As$3(this.store.select(Eo.selectDisplayCalendars)),q$20(([[l$26,g$19],f$33])=>{let I$25=g$19.filter(A$22=>!l$26.some(R$21=>R$21.credId===A$22.credId)).reduce((A$22,R$21)=>{let w$26=`nux:${R$21.credId}`,E$16=g$19.find(P$20=>P$20.credId===R$21.credId&&P$20.primary);return A$22.includes(w$26)||E$16&&A$22.includes(E$16.id)?A$22:[...A$22,w$26];},[...f$33]);return Eo.actions.update({displayCalendars:I$25});}),oe$13(l$26=>!!l$26.displayCalendars?.length))),this.resetOnWorkspaceChanged$=Ke$1(()=>this.teamId$.pipe(R$20(),zt$2(),As$3(this.calendarAssetSync$),Z$12(([l$26,g$19])=>d$22([!g$19&&Z$6.actions.reset(),!g$19&&R$13.actions.reset(),me$5.actions.reset(),Ke$2.actions.reset({data:[]})])))),this.swapOpenBlockIdAfterEventReconciliation$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.swap),As$3(this.store.select(Eo.selectOpenBlockIdForView)),oe$13(([{idBefore:l$26},g$19])=>!!g$19&&Object.values(g$19).some(f$33=>f$33?.endsWith(l$26))),Mu(([{id:l$26}])=>[this.store.select(Z$6.selectOne(l$26))]),q$20(([[{idBefore:l$26},g$19],f$33])=>Eo.actions.update({openBlockIdForView:p$13(g$19,h$15=>f$33&&h$15?.endsWith(l$26)?Ln$1(f$33):h$15)})))),this.swapOpenBlockIdAfterTaskReconciliation$=Ke$1(()=>this.actions$.pipe(Ye$2(m$6.actions.didCreateTask),As$3(this.store.select(Eo.selectOpenBlockIdForView)),oe$13(([{reconciliationId:l$26},g$19])=>!!g$19&&Object.values(g$19).some(f$33=>f$33?.endsWith(l$26))),Mu(([{taskId:l$26}])=>[this.store.select(ba(l$26))]),q$20(([[{reconciliationId:l$26},g$19],f$33])=>Eo.actions.update({openBlockIdForView:p$13(g$19,h$15=>f$33&&h$15?.endsWith(l$26)?Ln$1(f$33):h$15)})))),this.swapOpenBlockIdAfterTaskRemoval$=Ke$1(()=>this.actions$.pipe(Ye$2(b$11),As$3(this.store.select(Eo.selectOpenBlockIdForView)),q$20(([l$26,g$19])=>{let[f$33,h$15]=h$7(l$26,k$14({ids:q$7(Q$10())})),I$25=d$22(Object.values(g$19));return f$33?[]:h$15.ids.filter(A$22=>I$25.some(R$21=>R$21.endsWith(A$22)));}),Mu(()=>[this.store.select(Eo.selectOpenBlockIdForView)]),q$20(([l$26,g$19])=>Eo.actions.update({openBlockIdForView:p$13(g$19,f$33=>f$33&&l$26.includes(f$33)?null:f$33)})))),this.optimisticUpdateOfGvTasksOnTaskCreate$=Ke$1(()=>this.actions$.pipe(Ye$2(m$6.actions.tryCreateTask),oe$13(l$26=>!!l$26.dataViewId),le$5(l$26=>this.store.select(Zt$1.selectOne(o$28(l$26.dataViewId))).pipe(Ve$4(1),le$5(g$19=>qe$6(l$26).pipe(Q$15({run:({reconciliationId:f$33})=>(this.store.dispatch(Zt$1.actions.update({id:o$28(l$26.dataViewId),taskIds:[...(g$19?.taskIds??[]),f$33]})),ts$2(this.actions$.pipe(Ye$2(m$6.actions.didCreateTask),oe$13(h$15=>h$15.reconciliationId===f$33),Ve$4(1),Is$1(h$15=>{this.store.dispatch(Zt$1.actions.update({id:o$28(l$26.dataViewId),taskIds:[...(g$19?.taskIds??[]),h$15.taskId]})),this.store.dispatch(Zt$1.actions.refresh({listId:o$28(l$26.dataViewId)}));}),Z$12(()=>z$18)),Q$17(5e3).pipe(Z$12(()=>at$12(()=>new Error(`timeout`)))))),undoAction:()=>this.store.select(Zt$1.selectOne(o$28(l$26.dataViewId))).pipe(Ve$4(1),Is$1(f$33=>{this.store.dispatch(Zt$1.actions.update({id:o$28(l$26.dataViewId),taskIds:[...(f$33?.taskIds??[])]}));}),Z$12(()=>z$18))}))))))),this.resetOverlaysWhenOpenBlockCommitted$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.create),q$20(()=>me$5.actions.reset()))),this.updateForecastConstraintsOnWorkingScheduleChange$=Ke$1(()=>this.store.pipe(ot$5(Eo.selectWorkingSchedule),Ss$1(1),P$15(),As$3(this.store.select(Eo.selectForecastTaskConstraints)),Z$12(([l$26,g$19])=>{let f$33=[];for(let[h$15,I$25]of Object.entries(g$19)){if(M$12(I$25))continue;let A$22=I$25.map(R$21=>{if(R$21.type===`withinWorkingDay`){let w$26=I$13([1,2,3,4,5,6,7].map(E$16=>{let B$22=l$26[E$16===7?0:E$16];return[E$16,B$22?{start:{hour:B$22?.start.hour},end:{hour:B$22.end.hour}}:{start:{hour:0},end:{hour:0}}];}));return{...R$21,data:{...R$21.data,week:w$26}};}return R$21;});f$33.push(Eo.actions.setForecastConstraints({taskId:h$15,constraints:A$22}));}return f$33;}))),this.ensureCalendarVisibleOnDraft$=Ke$1(()=>this.actions$.pipe(Ye$2(Z$6.actions.draft),q$20(l$26=>Eo.actions.ensureCalendarVisible({calendarId:l$26.data.calendar.id})))),this.ensureCalendarVisible$=Ke$1(()=>this.actions$.pipe(Ye$2(Eo.actions.ensureCalendarVisible),As$3(this.store.select(Eo.selectDisplayCalendars)),oe$13(([{calendarId:l$26},g$19])=>!g$19.includes(l$26)),Mu(([{calendarId:l$26}])=>[this.store.select(R$13.selectOne(l$26))]),oe$13(([l$26,g$19])=>!!g$19),Is$1(([l$26,g$19])=>{let f$33=o$28(g$19).summary;this.toast.addToastItem({id:`calendar-ensure-calendar-visible`,title:"Calendar enabled",description:f$33,timeout:5e3,isV3Toast:!0,icon:`dateAdd`});}),q$20(([l$26,g$19])=>Eo.actions.toggleDisplayCalendar({calendarId:o$28(g$19).id})))),this.ensureTasksAssignedToSelfIsVisibleOnTaskCreate$=Ke$1(()=>this.actions$.pipe(Ye$2(m$6.actions.tryCreateTask),As$3(this.store.select(Eo.selectDisplayListsForView)),oe$13(([{dataViewId:l$26},{global:g$19,glance:f$33,"my-tasks":h$15}])=>l$26===`assignedToSelfAndDueDateSet`&&(!g$19?.includes(`assignedToSelfAndDueDateSet`)||!f$33?.includes(`assignedToSelfAndDueDateSet`)||!h$15?.includes(`assignedToSelfAndDueDateSet`))),q$20(([l$26,{global:g$19,glance:f$33,"my-tasks":h$15}])=>(this.toast.addToastItem({id:`calendar-ensure-tasks-assigned-to-self-is-visible`,title:"Showing tasks assigned to you",description:"Tasks assigned to you are now visible. You can turn this off in settings.",timeout:5e3,isV3Toast:!0,icon:`check`}),Eo.actions.update({displayListsForView:{global:[...new Set([...(g$19??[]),`assignedToSelfAndDueDateSet`])],glance:[...new Set([...(f$33??[]),`assignedToSelfAndDueDateSet`])],"my-tasks":[...new Set([...(h$15??[]),`assignedToSelfAndDueDateSet`])]}})))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Le$4),ge$10(q$14),ge$10(Yt),ge$10(Se$4),ge$10(_b$1),ge$10(V$3),ge$10(Qn));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();u$33();dm();hr$3();VN();yre=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.managerDataService=o$32,this.taskService=s$25,this.tryCreateTask$=Ke$1(()=>this.actions$.pipe(Ye$2(m$6.actions.tryCreateTask),Q$15({run:({subcategoryId:n$46,reconciliationId:a$30,type:c$37,...m$32})=>(this.store.dispatch(new x$21([{id:a$30,...m$32}])),ts$2(this.managerDataService.createTask(o$28(n$46,`no subcategory id`),{...this.taskPayload(m$32),id:void 0}).pipe(Is$1(({task:l$26})=>{this.store.dispatch(new D$14([a$30])),this.store.dispatch(new x$21([l$26])),this.store.dispatch(m$6.actions.didCreateTask({subcategoryId:n$46,taskId:l$26.id,reconciliationId:a$30}));}),le$5(()=>z$18)),Q$17(5e3).pipe(Z$12(()=>at$12(()=>new Error(`timeout`)))))),undoAction:({reconciliationId:n$46})=>(this.store.dispatch(new D$14([n$46])),z$18)}))),this.tryUpdateTask$=Ke$1(()=>this.actions$.pipe(Ye$2(m$6.actions.tryUpdateTask),Mu(({taskId:n$46})=>this.store.select(Nt$3(n$46))),q$20(([{type:n$46,...a$30},c$37])=>({type:n$46,after:a$30,before:c$37})),Q$15({run:({before:n$46,after:a$30})=>{if(!n$46)return z$18;let c$37={...n$46,...a$30,...c$28(P$17(a$30,l$4),(A$22,R$21)=>A$22===null?void 0:A$22??n$46[R$21])},m$32=n$46.statuses?.find(({status:A$22})=>A$22===c$37.status?.status);if(this.store.dispatch(new x$21([{...c$37,...(m$32&&{status:m$32})}])),it$3(n$46.id))return z$18;let l$26=a$30.tags?.filter(A$22=>!n$46.tags?.some(({name:R$21})=>R$21===A$22.name))??[],g$19=a$30.tags===void 0?[]:n$46.tags?.filter(A$22=>!a$30.tags?.some(({name:R$21})=>R$21===A$22.name))??[],f$33=d$22([l$26.length>0?C$8({taskIds:[n$46.id],tags:l$26,muteNotifications:!0}):void 0,g$19.length>0?b$4({taskIds:[n$46.id],tags:g$19,muteNotifications:!0}):void 0]);if(s$20(`tags`,a$30)){for(let A$22 of f$33)this.store.dispatch(A$22);return z$18;}let I$25=a$30.customFields?.filter(A$22=>{let R$21=n$46.customFields?.find(({id:w$26})=>w$26===A$22.id);return A$22.value!==R$21?.value||A$22.value_options!==R$21?.value_options;})??[];for(let A$22 of I$25){let R$21=n$46.customFields?.find(w$26=>w$26.id===A$22.id);this.store.dispatch(U$13({taskId:n$46.id,field:A$22,oldValue:R$21?.value,value:A$22.value,oldValueOptions:R$21?.value_options,valueOptions:A$22.value_options,task:n$46,via:n$15.Calendar}));}return this.store.dispatch(new K$15(n$46.id,void 0,void 0,void 0,this.taskPayload(a$30,n$46))),ts$2(this.actions$.pipe(Ye$2(g$17),oe$13(({task:A$22})=>A$22.id===n$46.id),Ve$4(1),Z$12(()=>z$18)),Q$17(5e3).pipe(Z$12(()=>at$12(()=>new Error(`timeout`)))));},undoAction:({before:n$46})=>n$46?new x$21([n$46]):z$18}))),this.tryDeleteTask$=Ke$1(()=>this.actions$.pipe(Ye$2(m$6.actions.tryDeleteTask),Mu(({taskId:n$46})=>[this.store.select(Nt$3(n$46)),this.store.select(Mt(n$46))]),oe$13(([n$46,a$30,c$37])=>!!a$30&&c$37),le$5(([n$46,a$30])=>(this.store.dispatch(new D$14([n$46.taskId])),this.taskService.remove(o$28(a$30),!1,!0,!1).pipe(le$5(()=>z$18),Xo$2(c$37=>(hr(c$37,{feature:`calendar`,origin:`tryDeleteTask$`,context:{taskId:n$46.taskId}}),this.store.dispatch(new x$21([o$28(a$30)])),z$18)))))),{dispatch:!1}),this.refresh$=Ke$1(()=>this.actions$.pipe(Ye$2(m$6.actions.refresh),Qs$4(({taskId:n$46})=>n$46),Z$12(n$46=>n$46.pipe(vs$2((a$30,c$37)=>({taskId:c$37.taskId,fields:l$25(d$22([...a$30.fields,...c$37.fields]))}),{taskId:``,fields:[]}),fs$1(200),oe$13(({taskId:a$30})=>a$30!==``),Rr(({taskId:a$30,fields:c$37})=>this.managerDataService.getTaskById(a$30,!1,c$37,{tag:`calendar-task-${B$18(c$37).map(gn).join(`-`)}`}).pipe(Is$1(m$32=>{m$32&&this.store.dispatch(new x$21([m$32],c$37,{fromAPI:!0}));}),q$20(()=>z$18),Xo$2(m$32=>(hr(m$32,{feature:`calendar`,origin:`refresh$`,context:{taskId:a$30,fields:c$37}}),z$18))))))),{dispatch:!1});}taskPayload(e$19,r$34){let o$32={...e$19};if(e$19.priority!==void 0&&(o$32.priority=e$19.priority===null?`none`:e$19.priority.id),e$19.assignees){let s$25=e$19.assignees.filter(({id:a$30})=>!r$34?.assignees?.some(c$37=>`${c$37.id}`==`${a$30}`)),n$46=(r$34?.assignees??[]).filter(({id:a$30})=>!e$19.assignees?.some(c$37=>`${c$37.id}`==`${a$30}`));o$32.assignees=r$34?{add:s$25.map(({id:a$30})=>a$30),rem:n$46.map(({id:a$30})=>a$30)}:e$19.assignees.map(({id:a$30})=>a$30);}return e$19.status&&(o$32.status=e$19.status.status),e$19.tags&&r$34&&(o$32.tags=void 0),e$19.customFields&&r$34&&(o$32.customFields=void 0),e$19.time_estimate===null&&r$34&&(o$32.time_estimate=`none`,o$32.time_estimate_string=``),e$19.start_date===null&&r$34&&(o$32.start_date=`none`,o$32.start_date_time=!1,o$32.duration={},o$32.duration_is_elapsed=!1),e$19.due_date===null&&r$34&&(o$32.due_date=`none`,o$32.due_date_time=void 0,o$32.duration={},o$32.duration_is_elapsed=!1),o$32;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(Ci),ge$10(zr$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();Sre=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.http=e$19,this.endpoints=r$34,this.store=o$32,this.hierarchyPathService=s$25,this.actions$=n$46,this.refresh$=Ke$1(()=>this.actions$.pipe(Ye$2(k$2.actions.refresh),As$3(this.store.select(de$10)),le$5(([,a$30])=>this.http.get(`${this.endpoints.calendarBaseUrl}/workspaces/${a$30.id}/legacy/task-sync-config`).pipe(q$20(c$37=>k$2.actions.load({data:c$37.items.map(m$32=>({syncId:m$32.sync_id,calendarId:m$32.calendar_id,hierarchyExternalID:this.hierarchyPathService.hierarchyExternalID({team:m$32.team_id,project:m$32.project_id,category:m$32.category_id,subcategory:m$32.subcategory_id})??`unknown`,onlyAssignedToMe:m$32.my_tasks_only}))})))))),this.create$=Ke$1(()=>this.actions$.pipe(Ye$2(k$2.actions.create),As$3(this.store.select(de$10)),le$5(([a$30,c$37])=>this.hierarchyPathService.hierarchyPath$(a$30.hierarchyExternalID).pipe(le$5(m$32=>this.http.post(`${this.endpoints.calendarBaseUrl}/workspaces/${c$37.id}/legacy/task-sync-config`,{sync_id:a$30.syncId,calendar_id:a$30.calendarId,project_id:m$32.project?.id,category_id:m$32.category?.id,subcategory_id:m$32.subcategory?.id,my_tasks_only:a$30.onlyAssignedToMe}))))),{dispatch:!1}),this.update$=Ke$1(()=>this.actions$.pipe(Ye$2(k$2.actions.update),As$3(this.store.select(de$10)),le$5(([a$30,c$37])=>this.hierarchyPathService.hierarchyPath$(a$30.hierarchyExternalID).pipe(le$5(m$32=>this.http.put(`${this.endpoints.calendarBaseUrl}/workspaces/${c$37.id}/legacy/task-sync-config/${a$30.syncId}`,{calendar_id:a$30.calendarId,project_id:m$32.project?.id,category_id:m$32.category?.id,subcategory_id:m$32.subcategory?.id,my_tasks_only:a$30.onlyAssignedToMe}))))),{dispatch:!1}),this.delete$=Ke$1(()=>this.actions$.pipe(Ye$2(k$2.actions.delete),As$3(this.store.select(de$10)),le$5(([a$30,c$37])=>this.http.delete(`${this.endpoints.calendarBaseUrl}/workspaces/${c$37.id}/legacy/task-sync-config/${a$30.syncId}`))),{dispatch:!1});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(ve$7),ge$10(x$15),ge$10(q$19),ge$10(M),ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();hr$3();VN();bre=(()=>{class t$21{constructor(){this.api=C$23(Yt),this.store=C$23(q$19),this.updateTime$=Ke$1(()=>this.api.activeCalendarCreds$.pipe(Ve$4(1),le$5(()=>{let e$19=p$21().tz(A$14());return Q$17(e$19.clone().tz(A$14()).add(1,`minute`).startOf(`minute`).diff(e$19),60*1e3).pipe(ws$2(0));}),As$3(this.store.select(h$8.selectPaused)),oe$13(([,e$19])=>!e$19),q$20(()=>{let e$19=p$21().tz(A$14()).startOf(`minute`).valueOf();return h$8.actions.update({currentTime:e$19});})));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();dm();VN();Cre=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.http=e$19,this.endpoints=r$34,this.hierarchyPathService=o$32,this.errorHandler=s$25;}refresh(){return this.http.get(`${this.endpoints.apiUrlBase}/v1/ical`).pipe(q$20(e$19=>e$19.map(r$34=>this.castWebcalSubscription(r$34))),this.errorHandler.http());}create({hierarchyExternalID:e$19,onlyAssignedToMe:r$34,hierarchy:o$32}){let s$25=e$19.split(`:`)[0]!==`subcategory`;return this.http.post(`${this.endpoints.apiUrlBase}/v1/ical`,{project_id:o$32.project?.id,category_id:o$32.category?.id,subcategory_id:o$32.subcategory?.id,assigned:s$25?!0:r$34}).pipe(this.errorHandler.http());}update({hierarchy:e$19,hierarchyExternalID:r$34,syncId:o$32,onlyAssignedToMe:s$25}){let n$46=r$34.split(`:`)[0]!==`subcategory`;return this.http.put(`${this.endpoints.apiUrlBase}/v1/ical/${o$32}`,{project_id:e$19.project?.id??null,category_id:e$19.category?.id??null,subcategory_id:e$19.subcategory?.id??null,assigned:n$46?!0:s$25}).pipe(this.errorHandler.http());}delete(e$19){return this.http.delete(`${this.endpoints.apiUrlBase}/v1/ical/${e$19}`).pipe(this.errorHandler.http());}castWebcalSubscription(e$19){return{syncId:e$19.id,token:e$19.token,hierarchyExternalID:this.hierarchyPathService.hierarchyExternalID({team:e$19.team_id,project:e$19.project_id,category:e$19.category_id,subcategory:e$19.subcategory_id})??`unknown`,onlyAssignedToMe:e$19.assigned};}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(ve$7),ge$10(x$15),ge$10(M),ge$10(ar$2));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();_re=(()=>{class t$21{constructor(e$19,r$34,o$32){this.webcalMonolithService=e$19,this.hierarchyPathService=r$34,this.actions$=o$32,this.refresh$=Ke$1(()=>this.actions$.pipe(Ye$2(C$1.actions.refresh),le$5(()=>this.webcalMonolithService.refresh().pipe(q$20(s$25=>C$1.actions.load({data:s$25})))))),this.create$=Ke$1(()=>this.actions$.pipe(Ye$2(C$1.actions.create),Mu(s$25=>this.hierarchyPathService.hierarchyPath$(s$25.hierarchyExternalID)),Rr(([s$25,n$46])=>this.webcalMonolithService.create({hierarchy:n$46,...s$25}).pipe(q$20(()=>C$1.actions.refresh()))))),this.update$=Ke$1(()=>this.actions$.pipe(Ye$2(C$1.actions.update),Mu(s$25=>this.hierarchyPathService.hierarchyPath$(s$25.hierarchyExternalID)),le$5(([s$25,n$46])=>this.webcalMonolithService.update({hierarchy:n$46,...s$25}).pipe(q$20(()=>C$1.actions.refresh()))))),this.delete$=Ke$1(()=>this.actions$.pipe(Ye$2(C$1.actions.delete),le$5(s$25=>this.webcalMonolithService.delete(s$25.syncId))).pipe(q$20(()=>C$1.actions.refresh())));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Cre),ge$10(M),ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`calendar_store_module`,`load`);kre=(()=>{class t$21{constructor(){e$11(`calendar_store_module`,`construct`),k$5(R$13.name,{version:1}),k$5(so$1.name,{version:1}),k$5(Z$6.name,{version:2,marshaller:An,unmarshaller:vn$1}),k$5(qe$3.name,{version:1}),k$5(w$4.name,{version:1});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,se,B_,rn.forFeature(R$13),rn.forFeature(Z$6),rn.forFeature(h$8),rn.forFeature(k$2),rn.forFeature(C$1),rn.forFeature(me$5),rn.forFeature(ar$3),rn.forFeature(Ke$2),rn.forFeature(Zt$1),rn.forFeature(m$6),rn.forFeature(so$1),rn.forFeature(qe$3),rn.forFeature(w$4),Je$4.forFeature([ire]),Je$4.forFeature([bre]),Je$4.forFeature([gre]),Je$4.forFeature([Sre]),Je$4.forFeature([_re]),Je$4.forFeature([ere]),Je$4.forFeature([fre]),Je$4.forFeature([ore]),Je$4.forFeature([are]),Je$4.forFeature([yre]),Je$4.forFeature([Yte]),Je$4.forFeature([qte]),Je$4.forFeature([Jte]),Je$4.forFeature([ure]),Je$4.forFeature([Kte]),As]});}}return t$21;})();VN();dm();Xye=t$21=>t$21===`myComments`||t$21===e$17.myComments||t$21===e$17.assigned;rve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1))=>t$21.pipe(Ye$2(ve$5.sendMessage),Is$1(e$19=>{i$27.track(Bu.ChatSendMessage,e$19.properties);})),{dispatch:!1,functional:!0}),ive=Ke$1((t$21=C$23(Le$4),i$27=C$23(q$19),e$19=C$23(_b$1))=>t$21.pipe(Ye$2(ve$5.assignComment),Mu(r$34=>[i$27.select(be$4.selectChatRoom(r$34.roomId)),i$27.select(H$4(r$34.itemId))]),Is$1(([r$34,o$32,s$25])=>{e$19.track(Bu.AssignComment,{...r$34.properties,viaChannelType:o$32?u$8(o$32):`unknown`,viaMessageType:L$7(s$25),privacy:o$32?l$12(o$32):null,parentType:o$32?p$8(o$32):null,isWelcomeChannel:o$32?TI(o$32):void 0});})),{dispatch:!1,functional:!0}),ove=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1))=>t$21.pipe(Ye$2(ve$5.createChannel),Is$1(e$19=>{i$27.track(Bu.ChatCreateChannel,e$19.properties);})),{dispatch:!1,functional:!0}),sve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1))=>t$21.pipe(Ye$2(ve$5.deleteChannel),Is$1(e$19=>{i$27.track(Bu.ChatDeleteChannel,e$19.properties);})),{dispatch:!1,functional:!0}),nve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1),e$19=C$23(q$19))=>t$21.pipe(Ye$2(n$23.toggleReaction),Mu(({commentId:r$34})=>e$19.select(H$4(r$34))),oe$13(([,r$34])=>!!r$34?.root_parent_id),Mu(([,r$34])=>e$19.select(Hr$1(r$34.root_parent_id))),Is$1(([[r$34,o$32],s$25])=>i$27.track(Bu.UpdateReactionToComment,{privacy:s$25?l$12(s$25):`unknown`,channelType:s$25?u$8(s$25):`unknown`,parentType:s$25?p$8(s$25):`unknown`,messageType:L$7(o$32),objectType:`chat message`,objectId:o$32?.id??`unknown`,reaction:r$34.reaction,isWelcomeChannel:s$25?TI(s$25):void 0}))),{dispatch:!1,functional:!0}),ave=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1),e$19=C$23(q$19))=>t$21.pipe(Ye$2(ve$5.joinChannel),Mu(r$34=>[e$19.select(be$4.selectChatRoom(r$34.roomId))]),Is$1(([r$34,o$32])=>{o$32&&i$27.track(Bu.ChatJoinChannel,{...r$34.properties,channelType:u$8(o$32),numChannelSubscribers:o$32.followers?.length??0,privacy:o$32?l$12(o$32):null,parentType:o$32?p$8(o$32):null,isWelcomeChannel:o$32?TI(o$32):void 0});})),{dispatch:!1,functional:!0}),cve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1),e$19=C$23(q$19))=>t$21.pipe(Ye$2(ve$5.leaveChannel),Mu(r$34=>e$19.select(be$4.selectChatRoom(r$34.roomId))),Is$1(([r$34,o$32])=>{o$32&&i$27.track(Bu.ChatLeaveChannel,{...r$34.properties,channelType:u$8(o$32),numChannelSubscribers:o$32.followers?.length??0,privacy:o$32?l$12(o$32):null,parentType:o$32?p$8(o$32):null,isWelcomeChannel:o$32?TI(o$32):void 0});})),{dispatch:!1,functional:!0}),mve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1))=>t$21.pipe(Ye$2(ve$5.openLaunchpad),Is$1(e$19=>i$27.track(Bu.ChatOpenLaunchpad,e$19.properties))),{dispatch:!1,functional:!0}),lve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1))=>t$21.pipe(Ye$2(ve$5.connectTask),Is$1(e$19=>i$27.track(Bu.ChatConnectTask,e$19.properties))),{dispatch:!1,functional:!0}),dve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1),e$19=C$23(q$19))=>t$21.pipe(Ye$2(ve$5.viewChat),zt$2((r$34,o$32)=>r$34.navigationUrl?.split(`?`)[0]===o$32.navigationUrl?.split(`?`)[0]&&!$u(o$32.roomId)),oe$13(r$34=>!r$34.navigationUrl?.includes(`/v/`)||r$34.navigationUrl?.includes(`/v/cn/`)),Mu(r$34=>[e$19.select(be$4.selectChatRoom(r$34.roomId)),e$19.select(gt(r$34.roomId)),e$19.select(Z$4(r$34.roomId)),e$19.select(c$21.selectChatSettingsState),e$19.select(at$5)]),Is$1(([r$34,o$32,s$25,n$46,a$30,c$37])=>{let m$32=yve(r$34.roomId,o$32);i$27.track(Bu.ChatViewChat,{...r$34.properties,chatPage:m$32,timeLastMsgSec:r$11({comments:s$25}),numChannelSubscribers:H_(o$32?.followers?.length,0),subview:Ire(m$32,o$32,r$34.navigationUrl),objectId:o$32?.id,objectType:o$32?.id?`channel`:null,channelType:o$32?.id?u$8(o$32):null,sidebarMode:a$30.interfaceStyle,numChannelUnreadMentions:H_(n$46?.unreadMentionsCount,0),numChannelUnreadAssignment:H_(n$46?.unreadAssignmentCount,0),numChannelUnreadThreads:H_(n$46?.unreadThreadsCount,0),channelHasUnread:!!n$46?.hasUnread,privacy:o$32?l$12(o$32):null,parentType:o$32?p$8(o$32):null,isWelcomeChannel:o$32?TI(o$32):void 0,isLegacyChat:!!o$32?.isLegacyChannel,...(c$37||{})});})),{dispatch:!1,functional:!0}),pve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1),e$19=C$23(q$19))=>t$21.pipe(Ye$2(ve$5.shareObject),Mu(r$34=>[e$19.select(H$4(r$34.itemId))]),Is$1(([r$34,o$32])=>{i$27.track(Bu.ShareObject,{...r$34.properties,privacy:r$34.currentRoom?l$12(r$34.currentRoom):null,parentType:r$34.currentRoom?p$8(r$34.currentRoom):null,isWelcomeChannel:r$34.currentRoom?TI(r$34.currentRoom):void 0,objectType:`chat message`,sharedWith:p$7(r$34.selectedRoom),isShared:!0,sharedWithId:r$34.selectedRoom.id,viaChannelType:r$34.currentRoom?u$8(r$34.currentRoom):`unknown`,viaMessageType:L$7(o$32)});})),{dispatch:!1,functional:!0}),uve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1),e$19=C$23(q$19))=>t$21.pipe(Ye$2(ve$5.clickChatFloatingSidebar),Mu(()=>e$19.select(ae$8)),Mu(([{roomId:r$34},o$32])=>[e$19.select(Z$4(r$34)),e$19.select(Hr$1(r$34)),e$19.select(Tre(r$34,o$32))]),Is$1(([[r$34],o$32,s$25,n$46])=>i$27.track(Bu.ClickChatFloatingSidebar,{...r$34.properties,numUnreadReplies:o$32?.unreadThreadsCount,numUnreadFollowups:n$46.length,privacy:l$12(s$25),channelType:s$25?u$8(s$25):`unknown`,parentType:s$25?p$8(s$25):`unknown`}))),{dispatch:!1,functional:!0}),fve=Ke$1((t$21=C$23(Le$4),i$27=C$23(q$19),e$19=C$23(_b$1))=>t$21.pipe(Ye$2(ve$5.viewChatBanner),Mu(({roomId:r$34})=>i$27.select(be$4.selectChatRoom(r$34))),Is$1(([,r$34])=>e$19.track(Bu.ViewChatBanner,{bannerName:`send chat message`,isWelcomeChannel:r$34?TI(r$34):!1,privacy:r$34?l$12(r$34):`unknown`,channelType:r$34?u$8(r$34):`unknown`,parentType:r$34?p$8(r$34):`unknown`}))),{dispatch:!1,functional:!0}),hve=Ke$1((t$21=C$23(Le$4),i$27=C$23(q$19),e$19=C$23(_b$1))=>t$21.pipe(Ye$2(ve$5.clickChatBanner),Mu(({roomId:r$34})=>i$27.select(be$4.selectChatRoom(r$34))),Is$1(([,r$34])=>e$19.track(Bu.ClickChatBanner,{bannerName:`send chat message`,cta:`close`,isWelcomeChannel:r$34?TI(r$34):!1,privacy:r$34?l$12(r$34):`unknown`,channelType:r$34?u$8(r$34):`unknown`,parentType:r$34?p$8(r$34):`unknown`}))),{dispatch:!1,functional:!0}),gve=Ke$1((t$21=C$23(Le$4),i$27=C$23(_b$1))=>t$21.pipe(Ye$2(ve$5.viewBanner),Is$1(e$19=>{i$27.track(Bu.ViewBanner,e$19.properties);})),{dispatch:!1,functional:!0});Ere={assignComment:ive,sendMessage:rve,createChannel:ove,deleteChannel:sve,joinChannel:ave,leaveChannel:cve,openLaunchpad:mve,connectTask:lve,viewChat:dve,shareObject:pve,clickChatFloatingSidebar:uve,reactToComment:nve,viewChatBanner:fve,clickChatBanner:hve,viewBanner:gve};VN();Are=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[Je$4.forFeature([Ere])]});}}return t$21;})();Mre=(t$21,i$27)=>Ue$6(k$25,te$15,(e$19,r$34)=>(t$21&&wre({hierarchy:t$21,viewType:i$27,dataViewIdMap:e$19,dataViewEntities:r$34}))??null);u$33();dm();hr$3();Ee$4();U$18();dm();G_=class{constructor(i$27){this.chatFeatureService=i$27;}getName(){return`chat`;}getId(){return`chat-startup-strategy`;}run(i$27){return this.chatFeatureService.initChatData(),this.chatFeatureService.initReloadSectionsWhenChatIsEnabled(),qe$6(!0);}};vve="An error occurred.",Sve="A Channel already exists under this name.",bve=[E$1.CREATE_CHANNEL_NAME_ALREADY_EXISTS,E$1.CREATE_GROUP_DM_USER_LIMIT_EXCEEDED];$re=F$23(DR());Lre=`view`;Dre=(t$21,{members:i$27,usersMap:e$19},r$34)=>(t$21.members?.length===1?i$27[t$21.members[0]]?.username??e$19.get(t$21.members[0])?.username??o$22:t$21.members?.filter(o$32=>!U$16(o$32,r$34)).map(o$32=>{let s$25=i$27[o$32]??e$19.get(o$32);return s$25?.username??s$25?.email??o$22;}).sort(Su).join(`, `))??``;z_=(t$21,{members:i$27,usersMap:e$19},r$34)=>(t$21.type===a$28.GROUP_DM||t$21.type===a$28.DM)&&r$34?Dre(t$21,{members:i$27,usersMap:e$19},r$34):FI(t$21)?e$16:t$21.name??``;dm();Ure=t$21=>`parent`in t$21&&!!t$21.parent&&`parent`in t$21.parent&&`id`in t$21.parent.parent&&typeof t$21.parent.parent.id==`string`&&`type`in t$21.parent.parent&&typeof t$21.parent.parent.type==`number`;VN();VN();u$33();dm();VN();dm();Ga=function(t$21){return t$21.FOUND=`found`,t$21.NOT_FOUND=`not_found_or_authorized`,t$21.VERSION_UNAVAILABLE=`version_not_available`,t$21;}(Ga||{});qre=(t$21,i$27)=>{if(!(t$21.type===a$28.CHANNEL||t$21.type===a$28.GROUP_DM)){if(t$21.members?.length===1)return t$21.members[0];if(i$27)return t$21.members?.find(e$19=>!U$16(e$19,i$27));}};Kre=(t$21,i$27,e$19)=>t$21===a$28.DM&&e$19?{userId:e$19}:t$21===a$28.GROUP_DM?{icon:`userGroup`}:{icon:`chatView`};U$18();_ve=[d$25.Subcategory,d$25.Category,d$25.Project],Qre=(t$21,i$27)=>!i$27&&t$21.type===`CHANNEL`&&_ve.includes(t$21.parent.type);q_=(t$21,{members:i$27,usersMap:e$19},r$34,o$32)=>{let s$25=qre(t$21,o$32),n$46=z_(t$21,{members:i$27,usersMap:e$19},o$32),a$30=Kre(t$21.type,t$21.visibility,s$25),c$37=Gre(t$21,r$34),{members:m$32,hierarchy_members:l$26}=zre(t$21,r$34);return{...z$15(t$21,`channel_type`,`created_at`,`default_view`,`is_canonical_channel`,`is_legacy_channel`,`is_hidden`,`latest_comment_at`,`updated_at`,`workspace_id`,`canvas_id`,`_version_vector`),avatar:a$30,channelType:t$21.channel_type,createdAt:t$21.created_at,defaultView:t$21.default_view,name:n$46,dmUserId:s$25,canvasId:t$21.canvas_id,isCanonical:t$21.is_canonical_channel,isHidden:t$21.is_hidden,isLegacyChannel:t$21.is_legacy_channel,chatRoomCategory:t$21.chat_room_category,isImportant:t$21.type!==`CHANNEL`,isSidechat:Qre(t$21,t$21.is_canonical_channel),latestCommentDate:t$21.latest_comment_at,updatedAt:t$21.updated_at,workspaceId:t$21.workspace_id,...(l$26&&{hierarchy_members:l$26}),...(c$37&&{followers:c$37}),...(m$32&&{members:m$32})};};VN();Jre=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.chatUsersService=C$23(se$3);}mapChatRoomResponse(){return e$19=>e$19.pipe(Mu(()=>[this.chatUsersService.chatUsersMap$,this.store.select(RO),this.store.select(ae$8),this.store.select(Pl)]),q$20(([r$34,o$32,s$25,n$46,a$30])=>({room:q_(r$34,{members:o$32,usersMap:s$25},a$30,n$46)})));}mapChatRoomsResponse(){return e$19=>e$19.pipe(Mu(()=>[this.chatUsersService.chatUsersMap$,this.store.select(RO),this.store.select(ae$8),this.store.select(Pl)]),q$20(([r$34,o$32,s$25,n$46,a$30])=>{let{rooms:c$37}=r$34,m$32=hs(r$34.user_map,r$34.workspace_users_map);return{rooms:c$37.map(l$26=>q_(l$26,{members:o$32,usersMap:lM(s$25,m$32)},a$30,n$46)),usersMap:m$32,pagination:{next_cursor:`next_cursor`in r$34?r$34.next_cursor:void 0,prev_cursor:`prev_cursor`in r$34?r$34.prev_cursor:void 0}};}));}mapChatRoomsBulkResponse(){return e$19=>e$19.pipe(Mu(()=>[this.chatUsersService.chatUsersMap$,this.store.select(RO),this.store.select(ae$8),this.store.select(Pl)]),q$20(([r$34,o$32,s$25,n$46,a$30])=>{let{rooms:c$37,notFoundRoomIds:m$32}=this.partitionBulkRoomsByStatus(r$34.rooms),l$26=hs(r$34.user_map,r$34.workspace_users_map||{});return{rooms:c$37.map(g$19=>q_(g$19,{members:o$32,usersMap:lM(s$25,l$26)},a$30,n$46)),usersMap:l$26,notFoundRoomIds:m$32};}));}mapChatRoomsDeltaResponse(){return e$19=>e$19.pipe(q$20(r$34=>{let{rooms:o$32,notFoundRoomIds:s$25}=this.partitionBulkRoomsByStatus(r$34.rooms);return{rooms:Hre(o$32),notFoundRoomIds:s$25};}));}partitionBulkRoomsByStatus(e$19){let r$34=[],o$32=[];for(let s$25 of e$19)!s$25.data||s$25.status!==Ga.FOUND?o$32.push(s$25.object_id):r$34.push(s$25.data);return{rooms:r$34,notFoundRoomIds:o$32};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();dm();dM=t$21=>t$21.map(i$27=>i$27?.data).filter(i$27=>!!i$27);dm();dm();VN();Xre=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.isVersioningEnabled$=jS(O$16.ChatRoomsOvmWebsocketConsumer);}getRooms(e$19,r$34){return this.callVersionedChatRoomsFunction(e$19,r$34);}getRoomsAll(e$19,r$34){return this.callVersionedChatRoomsFunction(e$19,r$34);}createRoom(e$19,r$34){return this.callVersionedChatRoomFunction(e$19,r$34);}getRoom(e$19,r$34){return this.callVersionedChatRoomFunction(e$19,r$34);}updateRoom(e$19,r$34){return this.callVersionedChatRoomFunction(e$19,r$34);}deleteRoom(e$19){return e$19();}getRoomsBulk(e$19,r$34){return this.callVersionedChatRoomsBulkFunction(e$19,r$34);}getRoomsDelta(e$19,r$34){return this.callVersionedChatRoomsDeltaFunction(e$19,r$34);}getRoomsDeltaAll(e$19,r$34){return this.callVersionedChatRoomsDeltaFunction(e$19,r$34);}mapFields(e$19){return this.isVersioningEnabled$.pipe(q$20(r$34=>r$34?[...e$19,w$12.VERSION_VECTOR]:e$19));}callVersionedChatRoomFunction(e$19,r$34){return this.isVersioningEnabled$.pipe(le$5(o$32=>{let s$25=e$19();return o$32?s$25.pipe(Mu(n$46=>qe$6(n$46).pipe(r$34)),q$20(([n$46,a$30])=>({remoteRoom:n$46,mappedResponse:a$30})),Yre(this.store)):s$25.pipe(r$34);}));}callVersionedChatRoomsFunction(e$19,r$34){return this.isVersioningEnabled$.pipe(le$5(o$32=>{let s$25=e$19();return o$32?s$25.pipe(Mu(n$46=>qe$6(n$46).pipe(r$34)),q$20(([n$46,a$30])=>({remoteRooms:n$46.rooms,mappedResponse:a$30})),Q_(this.store)):s$25.pipe(r$34);}));}callVersionedChatRoomsBulkFunction(e$19,r$34){return this.isVersioningEnabled$.pipe(le$5(o$32=>{let s$25=e$19();return o$32?s$25.pipe(Mu(n$46=>qe$6(n$46).pipe(r$34)),q$20(([n$46,a$30])=>({remoteRooms:dM(n$46.rooms),mappedResponse:a$30})),Q_(this.store)):s$25.pipe(r$34);}));}callVersionedChatRoomsDeltaFunction(e$19,r$34){return this.isVersioningEnabled$.pipe(le$5(o$32=>{let s$25=e$19();return o$32?s$25.pipe(Mu(n$46=>qe$6(n$46).pipe(r$34)),q$20(([n$46,a$30])=>({remoteRooms:dM(n$46.rooms),mappedResponse:a$30})),Q_(this.store)):s$25.pipe(r$34);}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();om=(()=>{class t$21 extends ${constructor(){super(V$2.ROOMS),this.chatRoomsVersionedApiService=C$23(Xre),this.chatRoomsMapperService=C$23(Jre),this.currentUserId$=c$4();}getRooms(e$19){return this.chatRoomsVersionedApiService.mapFields(e$19.fields??[]).pipe(q$20(r$34=>({...e$19,fields:r$34})),le$5(r$34=>{let o$32=X$6(this.getRoomsNonVersioned.bind(this),r$34);return this.chatRoomsVersionedApiService.getRooms(o$32,this.chatRoomsMapperService.mapChatRoomsResponse());}));}getRoomsAll(e$19){return this.chatRoomsVersionedApiService.mapFields(e$19.fields??[]).pipe(q$20(r$34=>({...e$19,fields:r$34})),le$5(r$34=>{let o$32=X$6(this.getRoomsAllNonVersioned.bind(this),r$34);return this.chatRoomsVersionedApiService.getRoomsAll(o$32,this.chatRoomsMapperService.mapChatRoomsResponse());}));}createRoom(e$19){return this.chatRoomsVersionedApiService.mapFields(e$19.fields??[]).pipe(As$3(this.currentUserId$),q$20(([r$34,o$32])=>{if(e$19.type===a$28.CHANNEL){let s$25=l$25([...(e$19.user_ids??[]),o$32.toString()]);return{...e$19,fields:r$34,user_ids:s$25};}return{...e$19,fields:r$34,user_ids:e$19.user_ids};}),le$5(r$34=>{let o$32=X$6(this.createRoomNonVersioned.bind(this),r$34);return this.chatRoomsVersionedApiService.createRoom(o$32,this.chatRoomsMapperService.mapChatRoomResponse());}));}getRoom(e$19,r$34){return this.chatRoomsVersionedApiService.mapFields(r$34.fields??[]).pipe(q$20(o$32=>({...r$34,fields:o$32})),le$5(o$32=>{let s$25=X$6(this.getRoomNonVersioned.bind(this),e$19,o$32);return this.chatRoomsVersionedApiService.getRoom(s$25,this.chatRoomsMapperService.mapChatRoomResponse());}));}updateRoom(e$19,r$34){return this.chatRoomsVersionedApiService.mapFields(r$34.fields??[]).pipe(q$20(o$32=>({...r$34,fields:o$32})),le$5(o$32=>{let s$25=X$6(this.updateRoomNonVersioned.bind(this),e$19,o$32);return this.chatRoomsVersionedApiService.updateRoom(s$25,this.chatRoomsMapperService.mapChatRoomResponse());}));}deleteRoom(e$19){let r$34=X$6(this.deleteRoomNonVersioned.bind(this),e$19);return this.chatRoomsVersionedApiService.deleteRoom(r$34);}getRoomsBulk(e$19,r$34){return this.chatRoomsVersionedApiService.mapFields(r$34.fields??[]).pipe(q$20(o$32=>({...r$34,fields:o$32})),le$5(o$32=>{let s$25=X$6(this.getRoomsBulkNonVersioned.bind(this),e$19,o$32);return this.chatRoomsVersionedApiService.getRoomsBulk(s$25,this.chatRoomsMapperService.mapChatRoomsBulkResponse());}),Xo$2(o$32=>(fA(`Error in getRoomsBulk request`,{feature:`chat`,cause:o$32}),qe$6({rooms:[]}))));}getRoomsDelta({params:e$19={},since:r$34=0}){return this.chatRoomsVersionedApiService.mapFields(e$19.fields??[]).pipe(q$20(o$32=>({...e$19,fields:o$32})),le$5(o$32=>{let s$25=X$6(this.getRoomsDeltaNonVersioned.bind(this),o$32,r$34);return this.chatRoomsVersionedApiService.getRoomsDelta(s$25,this.chatRoomsMapperService.mapChatRoomsDeltaResponse());}));}getRoomsDeltaAll({lastFetchedAt:e$19}){return this.chatRoomsVersionedApiService.mapFields([]).pipe(q$20(r$34=>({fields:r$34})),le$5(r$34=>{let o$32=X$6(this.getRoomsDeltaAllNonVersioned.bind(this),r$34,e$19);return this.chatRoomsVersionedApiService.getRoomsDeltaAll(o$32,this.chatRoomsMapperService.mapChatRoomsDeltaResponse());}));}getCanonicalRoomsBulk(e$19,r$34={fields:[]}){return this.chatRoomsVersionedApiService.mapFields(r$34.fields??[]).pipe(q$20(o$32=>({...r$34,fields:o$32})),le$5(o$32=>{let s$25=X$6(this.getCanonicalRoomsBulkNonVersioned.bind(this),e$19,o$32);return this.chatRoomsVersionedApiService.getRoomsBulk(s$25,this.chatRoomsMapperService.mapChatRoomsBulkResponse());}));}getCanonicalRoomsBulkNonVersioned(e$19,r$34){return this.apiUrl$.pipe(Ve$4(1),le$5(o$32=>this.httpClient.post(`${o$32}/canonical/bulk`,{keys:e$19},{params:{...(r$34.fields?{fields:r$34.fields}:{})}})));}getRoomsNonVersioned(e$19){return this.apiUrl$.pipe(Ve$4(1),le$5(r$34=>this.httpClient.get(r$34,{params:{...e$19}})));}getRoomsAllNonVersioned(e$19){return this.getRoomsNonVersioned({...e$19,limit:100}).pipe(Zs$1(o$32=>o$32.next_cursor?this.getRoomsNonVersioned({...e$19,cursor:o$32.next_cursor,limit:100}):qe$6(null)),Es$3(o$32=>o$32!==null,!0),$e$3((o$32,s$25)=>{if(!s$25)return o$32;let{rooms:n$46,user_map:a$30,workspace_users_map:c$37,next_cursor:m$32,prev_cursor:l$26}=s$25;return n$46?.length>0&&o$32.rooms.push(...n$46),{...o$32,next_cursor:m$32,prev_cursor:l$26,user_map:a$30?{...a$30,...o$32.user_map}:o$32.user_map,workspace_users_map:c$37?{...c$37,...o$32.workspace_users_map}:o$32.workspace_users_map};},{rooms:[],next_cursor:void 0,prev_cursor:void 0,user_map:{},workspace_users_map:{}}));}createRoomNonVersioned(e$19){let r$34={...e$19};return Wre(r$34)&&(r$34.name=r$34.name?.trim()),this.apiUrl$.pipe(Ve$4(1),le$5(o$32=>this.httpClient.post(o$32,r$34,{params:{fields:[`members`,`followers`,...(e$19.fields??[])]}})));}getRoomNonVersioned(e$19,r$34){return this.apiUrl$.pipe(Ve$4(1),le$5(o$32=>this.httpClient.get(`${o$32}/${e$19}`,{params:{...r$34}})));}getRoomsDeltaNonVersioned(e$19,r$34){return this.apiUrl$.pipe(Ve$4(1),le$5(o$32=>this.httpClient.get(`${o$32}/delta/${r$34}`,{params:{...e$19}})));}getRoomsDeltaAllNonVersioned(e$19,r$34){return this.getRoomsDeltaNonVersioned(e$19,r$34).pipe(Zs$1(o$32=>o$32.next_cursor?this.getRoomsDeltaNonVersioned({cursor:o$32.next_cursor},r$34):z$18),Es$3(o$32=>o$32!==null,!0));}updateRoomNonVersioned(e$19,r$34){return this.apiUrl$.pipe(Ve$4(1),le$5(o$32=>this.httpClient.patch(`${o$32}/${e$19}`,r$34,{params:{fields:[...(r$34.fields??[])]}})));}deleteRoomNonVersioned(e$19){return this.apiUrl$.pipe(Ve$4(1),le$5(r$34=>this.httpClient.delete(`${r$34}/${e$19}`)));}getRoomsBulkNonVersioned(e$19,r$34){return this.apiUrl$.pipe(Ve$4(1),le$5(o$32=>this.httpClient.post(`${o$32}/bulk`,{ids:l$25(e$19.ids)},{params:{...(r$34.fields?{fields:r$34.fields}:{}),...(r$34.maps_only_include_user_ids?{maps_only_include_user_ids:l$25(r$34.maps_only_include_user_ids)}:{})}})));}addUserToMap(e$19,r$34){for(let o$32 in e$19)e$19[o$32]&&!r$34.has(o$32)&&r$34.set(o$32,e$19[o$32]);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();dm();Ee$4();dm();U$18();VN();Zre=(()=>{class t$21{constructor(){this.subcategoryResource=C$23(zs),this.categoryResource=C$23(As$1),this.projectApiService=C$23(qp),this.dataViewService=C$23(Qt);}addFollowersLocationless({allSelectedUserIds:e$19,noAccessUserIds:r$34,room:o$32,permission:s$25}){let n$46=this.addLocationlessMembers({userIds:r$34,roomId:o$32.id,permission:s$25}).pipe(ps$2(1e3,m$28)),a$30=this.addFollowersToView({userIds:e$19,roomId:o$32.id}).pipe(ps$2(1e3,m$28));return r$34.length>0?n$46.pipe(le$5(()=>a$30)):a$30;}addFollower(e$19){let r$34=this.dataViewService.addDataViewMembers(e$19.roomId,[e$19.userId],e$19.permission).pipe(ps$2(1e3,m$28));return this.addMemberToParent(e$19).pipe(ps$2(1e3,m$28),le$5(()=>e$19.shouldAddDataViewMembers?r$34:qe$6(null)),le$5(()=>this.addFollowersToView({userIds:[e$19.userId],roomId:e$19.roomId})),ps$2(1e3,m$28));}addFollowersToCanonicalChat({selectedUserIds:e$19,noAccessUserIds:r$34,roomId:o$32,parentId:s$25,permission:n$46}){let a$30=this.addMembersToCanonicalChat({parentId:s$25,userIds:r$34,permission:n$46}).pipe(ps$2(1e3,m$28)),c$37=this.addFollowersToView({userIds:e$19,roomId:o$32});return r$34.length?a$30.pipe(le$5(()=>c$37)):c$37;}addLocationlessMembers({userIds:e$19,roomId:r$34,permission:o$32}){return this.dataViewService.addDataViewMembers(r$34,e$19,o$32);}addMemberToParent({parentId:e$19,roomId:r$34,parentType:o$32,userId:s$25,permission:n$46,teamId:a$30,planTier:c$37}){switch(o$32){case d$25.Subcategory:return this.subcategoryResource.addSubcategoryMember(e$19,s$25,n$46).pipe(pM);case d$25.Category:return this.categoryResource.addCategoryMember(e$19,s$25,n$46);case d$25.Unparented:case d$25.Team:return this.addLocationlessMembers({userIds:[s$25],roomId:r$34,permission:n$46});case d$25.Project:default:return this.projectApiService.editProjectMembers({projectId:e$19,members:[{id:s$25,permission_level:c$37===O$17.Enterprise?n$46:x$25.CREATE}],teamId:a$30});}}addMembersToCanonicalChat(e$19){let{parentId:r$34,userIds:o$32,permission:s$25}=e$19;return this.subcategoryResource.addSubcategoryMembers(r$34,o$32,s$25).pipe(pM);}addFollowersToView({userIds:e$19,roomId:r$34}){return this.dataViewService.addDataViewFollowers(r$34,e$19);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();dm();U$18();VN();eie=(()=>{class t$21{constructor(){this.subcategoryResource=C$23(zs),this.categoryResource=C$23(As$1),this.projectApiService=C$23(qp),this.dataViewService=C$23(Qt),this.chatRoomsApiService=C$23(om);}removeAccess({userId:e$19,roomId:r$34,parentId:o$32,parentType:s$25,isLegacy:n$46,currentPermission:a$30,viewVisibility:c$37}){let m$32=this.removeFollowersFromView({userIds:[e$19],roomId:r$34}).pipe(ps$2(1e3)),l$26=this.removeAccessFromParent({parentId:o$32,roomId:r$34,parentType:s$25,userId:e$19,isLegacy:n$46,isPrivateLegacyView:n$46&&c$37===x$26.Private}).pipe(ps$2(1e3));return a$30===`WATCHER`?l$26.pipe(As$3(m$32),q$20(([g$19])=>g$19)):l$26;}removeAccessFromParent({parentId:e$19,roomId:r$34,parentType:o$32,userId:s$25,isLegacy:n$46,isPrivateLegacyView:a$30}){let c$37=[];if(n$46&&a$30)return this.dataViewService.removeDataViewMember(r$34,s$25);switch(n$46&&c$37.push(this.dataViewService.removeDataViewMember(r$34,s$25)),o$32){case d$25.Subcategory:return Gi([this.subcategoryResource.removeSubcategoryMember(e$19,s$25),...c$37]);case d$25.Category:return Gi([this.categoryResource.removeCategoryMember(e$19,s$25),...c$37]);case d$25.Unparented:case d$25.Team:return this.dataViewService.removeDataViewMember(r$34,s$25);default:return Gi([this.projectApiService.removeProjectMembers(e$19,[Number.parseInt(s$25,10)]),...c$37]);}}removeFollowersFromView({userIds:e$19,roomId:r$34}){return this.dataViewService.removeDataViewFollowers(r$34,e$19);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();uM=60*1e3,tie=(t$21,i$27)=>{let{rooms:e$19,usersMap:r$34={}}=t$21,o$32=jre(e$19,i$27.map(s$25=>s$25.toString()));return[...kl(t$21),qs.updateFetchStateMany({states:e$19.map(s$25=>({objectId:s$25.id,objectType:be$4.name,state:`complete`,maxAge:uM}))}),bO({usersMap:r$34}),n$18.getPermissions({objects:o$32,requestAccessRoot:!1})];},rie=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19,f$33,h$15,I$25,A$22,R$21,w$26){this.actions$=e$19,this.store=r$34,this.chatRoomsApiService=o$32,this.chatFeatureService=s$25,this.syntheticMarkerService=n$46,this.chatUsersService=a$30,this.chatMonitorService=c$37,this.sharedTaskService=m$32,this.managerDataService=l$26,this.chatRoomMembersService=g$19,this.chatRoomViewsService=f$33,this.chatRoomsAccessService=h$15,this.chatRoomsAccessRemoveService=I$25,this.chatLocationProviderService=A$22,this.chatRouterService=R$21,this.workspaceStartupService=w$26,this.isChatEnabled$=n$17(),this.isLayoutV4$=n$35().pipe(zt$2()),this.syncUpToggleLazy=W$12(rs),this.createSaveBulkResponseToState=E$16=>E$16.pipe(Mu(()=>[this.store.select(Z$2)]),Z$12(([P$20,B$22])=>{let{rooms:G$16,usersMap:v$22={},context:x$28,notFoundRoomIds:U$19,lastFetchedAt:H$10,workspaceId:te$16}=P$20;return j$23([Ae$5.loadChatRoomsBulkSuccess({rooms:G$16,usersMap:v$22,context:x$28,lastFetchedAt:H$10,workspaceId:te$16}),Ae$5.chatRoomUnauthorizedOrNotFound({roomIds:U$19??[]}),...tie(P$20,B$22)]);})),this.createSaveRoomsResponseToState=E$16=>E$16.pipe(Mu(()=>[this.store.select(Z$2)]),Z$12(([P$20,B$22])=>{let{rooms:G$16,usersMap:v$22={},pagination:x$28}=P$20;return j$23([Ae$5.loadChatRoomsSuccess({rooms:G$16,usersMap:v$22,pagination:x$28}),...tie(P$20,B$22)]);})),this.loadChatRoom=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoom),Is$1(({id:E$16,context:P$20})=>{P$20?.clientTrace&&this.syntheticMarkerService.mark(`ngrx.effect.load_chat_room.${E$16}.start`,{entityId:E$16,client_trace:P$20?.clientTrace}).setGenericName(`ngrx.effect.load_chat_room.start`);}),F$20(E$16=>({shouldFetch:this.store.select(DO.selectShouldFetch(E$16.id,be$4.name,E$16.maxAge,E$16.forceFetch)),team:this.store.select(de$10),useHierarchyForHierarchyMembers:this.chatFeatureService.useHierarchyDataForHierarchyMembers$,isChatUseWorkspaceUsersEnabled:this.chatFeatureService.isChatUseWorkspaceUsersEnabled$})),oe$13(([E$16,{shouldFetch:P$20}])=>!$u(E$16.id)&&P$20),q$20(([E$16,{team:P$20,useHierarchyForHierarchyMembers:B$22,isChatUseWorkspaceUsersEnabled:G$16}])=>({action:E$16,isGuest:P$20?.role===N$16.GUEST,useHierarchyForHierarchyMembers:B$22,isChatUseWorkspaceUsersEnabled:G$16})),zs$3(250,null,25,m$28),oe$13(E$16=>E$16.length>0),q$20(E$16=>({ids:d$22(l$25(E$16.map(P$20=>P$20.action.id))),withHierarchyMembers:(!E$16[0].useHierarchyForHierarchyMembers||E$16[0].isGuest)&&E$16.some(P$20=>P$20.action.withHierarchyMembers),withUserMap:!E$16[0].isChatUseWorkspaceUsersEnabled&&(E$16[0].isGuest||!!E$16.some(P$20=>P$20.action.mapsOnlyIncludeUserIds?.length)),mapsOnlyIncludeUserIds:E$16[0].isChatUseWorkspaceUsersEnabled?[]:E$16.flatMap(P$20=>P$20.action.mapsOnlyIncludeUserIds??[]).filter(Boolean),context:E$16.flatMap(P$20=>P$20.action.context).find(Boolean)})),Z$12(({ids:E$16,withHierarchyMembers:P$20,withUserMap:B$22,mapsOnlyIncludeUserIds:G$16,context:v$22})=>this.chatRoomsApiService.getRoomsBulk({ids:E$16},{fields:d$22([w$12.MEMBERS,w$12.FOLLOWERS,P$20&&w$12.HIERARCHY_MEMBERS,B$22&&w$12.DIRECT_MESSAGE_USER_MAP,B$22&&w$12.DIRECT_MESSAGE_WORKSPACE_USERS_MAP]),...(G$16?.length?{maps_only_include_user_ids:G$16}:{})}).pipe(q$20(x$28=>({...x$28,context:v$22,withHierarchyMembers:P$20})))),Is$1(({rooms:E$16,context:P$20,withHierarchyMembers:B$22})=>{let G$16=E$16?.[0]?.id;P$20?.clientTrace&&this.syntheticMarkerService.mark(`ngrx.effect.load_chat_room.${G$16}.finish`,{entityId:G$16,client_trace:P$20?.clientTrace}),this.chatMonitorService.logMissingBulkRoomData(E$16,B$22);}),this.createSaveBulkResponseToState)),this.loadChatRooms=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRooms),Mu(()=>mi$1(this.store,this.chatFeatureService.isChatUseWorkspaceUsersEnabled$)),Z$12(([E$16,P$20])=>{let B$22={...P$20,...E$16.params};return this.chatRoomsApiService.getRooms(B$22).pipe(Is$1(G$16=>{this.chatMonitorService.logMissingRoomData(G$16.rooms,B$22.fields);}));}),this.createSaveRoomsResponseToState)),this.loadChatRoomsBulk=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoomsBulk),oe$13(E$16=>E$16.roomIds.length>0),Mu(()=>this.store.select(o$30)),Z$12(([E$16,P$20])=>this.chatRoomsApiService.getRoomsBulk({ids:E$16.roomIds},E$16.params??{}).pipe(bs({count:3,delay:(B$22,G$16)=>he$6(Math.min(1e3*Math.pow(2,G$16-1),5e3))}),Xo$2(B$22=>(fA(`Error in loadChatRoomsBulk effect`,{feature:`chat`,cause:B$22}),E$16.lastFetchedAt?qe$6({rooms:[],usersMap:{},lastFetchedAt:E$16.lastFetchedAt,workspaceId:P$20}):z$18)))),this.createSaveBulkResponseToState)),this.loadChatRoomsDelta=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoomsForSidebar),Mu(()=>[this.store.select(zJ)]),oe$13(([E$16,P$20])=>P$20!==0),oi$1(([E$16,P$20])=>this.getAllRoomsByDelta(P$20)))),this.loadChatRoomsNext=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoomsNext),Os$3(1e3,m$28),Mu(()=>[this.store.select(be$4.selectPagination)]),Z$12(([E$16,{next_cursor:P$20}])=>P$20?this.chatRoomsApiService.getRooms({...ii$1,cursor:P$20}):z$18),this.createSaveRoomsResponseToState)),this.loadChatRoomsForSidebar=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoomsForSidebar),F$20(()=>({lastFetchedAt:this.store.select(zJ),getRoomsParams:mi$1(this.store,this.chatFeatureService.isChatUseWorkspaceUsersEnabled$)})),oe$13(([,{lastFetchedAt:E$16}])=>E$16===0),Z$12(([,{getRoomsParams:E$16}])=>this.chatRoomsApiService.getRoomsAll({...E$16,is_follower:!0}).pipe(Is$1(({rooms:P$20})=>{this.chatMonitorService.logMissingRoomData(P$20,E$16.fields);}),Xo$2(P$20=>(fA(`Error in getRoomsAll request`,{feature:`chat`,cause:P$20}),qe$6(null))))),oe$13(E$16=>!!E$16),Mu(()=>[this.store.select(o$30)]),Z$12(([E$16,P$20])=>{if(!E$16.rooms.length)return z$18;let{rooms:B$22,usersMap:G$16={}}=E$16;return j$23([Ae$5.loadChatRoomsBulkSuccess({rooms:B$22,lastFetchedAt:mM(E$16.rooms),usersMap:G$16,workspaceId:P$20}),...kl(E$16),bO({usersMap:G$16}),i$17.loadLastReadAtForSidebar()]);}))),this.parentObjectDeleted=Ke$1(()=>this.actions$.pipe(Ye$2(Z$11,z$13,_$10),q$20(E$16=>E$16.type===Z$11.type?E$16.id:E$16.type===z$13.type||E$16.type===_$10.type?E$16.payload.id:null),oe$13(d$10),Mu(E$16=>[this.store.select(be$4.selectChatRoomsByParentId(E$16))]),Z$12(([,E$16])=>E$16.map(P$20=>Ae$5.hideChatRoomSuccess({id:P$20.id}))))),this.updateBulkFetchState=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoomsBulkSuccess),Z$12(({rooms:E$16})=>j$23([qs.updateFetchStateMany({states:E$16.map(P$20=>({objectId:P$20.id,objectType:be$4.name,state:`complete`,maxAge:uM}))})])))),this.createChatRoom$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.createChatRoom),F$20(()=>({team:this.store.select(de$10),useHierarchyForHierarchyMembers:this.chatFeatureService.useHierarchyDataForHierarchyMembers$})),q$20(([E$16,{team:P$20,useHierarchyForHierarchyMembers:B$22}])=>{let G$16=P$20?.role===N$16.GUEST;return!B$22||G$16?E$16:{...E$16,data:{...E$16.data,fields:(E$16.data.fields??[]).filter(v$22=>v$22!==w$12.HIERARCHY_MEMBERS)}};}),Rr(E$16=>this.chatRoomsApiService.createRoom(E$16.data).pipe(Xo$2(P$20=>qe$6({errorResponse:P$20})),q$20(P$20=>({response:P$20,action:E$16})))),Z$12(({response:E$16,action:P$20})=>{if(`errorResponse`in E$16)return Fre(E$16.errorResponse,P$20.data,P$20.id);this.sharedTaskService.isOpen&&this.sharedTaskService.closeTaskAndGoBackToPreviousPage();let B$22=[Ae$5.handleCreateChatRoomSuccess({room:E$16.room,navigate:P$20.navigate,joinSyncUp:P$20.joinSyncUp}),...kl(E$16),Ae$5.upsertChatRoom({room:E$16.room}),Ae$5.loadChatRoom({id:E$16.room.id,withHierarchyMembers:!0,maxAge:0,forceFetch:!0}),Ae$5.removeChatRoomFromHidden({id:E$16.room.id}),this.createChannelTelemetryAction(E$16.room,P$20.via)];if(Ure(P$20.data)){let G$16=P$20.data.parent.parent.type===d$25.Category?P$20.data.parent.parent:E$16.room.parent;G$16&&B$22.push(Ae$5.loadChatRoomHierarchy({parentId:G$16.id,parentType:G$16.type}));}return E$16.room.isCanonical&&B$22.push(Ae$5.loadHierarchyMembersForLocationBasedRooms({rooms:[E$16.room]})),j$23(d$22(B$22));}))),this.handleCreateChatRoomSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.handleCreateChatRoomSuccess),Mu(()=>[this.store.select(o$30)]),Z$12(([{room:E$16,navigate:P$20,joinSyncUp:B$22},G$16])=>{let v$22=[Ae$5.createChatRoomSuccess({room:E$16})];if(P$20&&v$22.push(new r$25({path:kw(E$16.id,G$16,E$16.channelType,E$16.defaultView?.view_id),tag:`chat-rooms-create-channel-navigation`})),B$22&&this.syncUpToggleLazy().then(H$10=>H$10.toggleSyncUp({currentRoomId:E$16.id,via:j$12.CreateRoom})),Ju(E$16)||!l$3(E$16))return v$22;return ts$2(this.store.select(P$6(E$16.id)).pipe(oe$13(H$10=>!!H$10.parent),Ve$4(1)),he$6(5e3)).pipe(le$5(()=>v$22));}))),this.getHierarchy=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoomHierarchy),Mu(()=>[this.store.select(y$18)]),Z$12(([E$16,P$20])=>{let{parentType:B$22,parentId:G$16}=E$16;return(B$22===d$25.Subcategory?this.managerDataService.getSubcategoryById({id:G$16,source:`chatRoomsEffects.getHierarchy`}):qe$6(null)).pipe(q$20(x$28=>({action:E$16,subcategory:x$28,categoriesMap:P$20})));}),Z$12(({action:E$16,subcategory:P$20,categoriesMap:B$22})=>E$16.parentType===d$25.Category?qe$6(F$18({id:E$16.parentId,extra:``})):E$16.parentType===d$25.Subcategory&&P$20&&typeof P$20.category==`string`?this.managerDataService.getCategoryById(P$20.category).pipe(le$5(G$16=>{let v$22={...G$16};if(v$22.hidden){let x$28=(B$22[v$22.project?.id??``]??[]).find(U$19=>U$19.id===`-3`)?.subcategories??[];v$22.id=`-3`,v$22.subcategories=[...x$28,...(v$22.subcategories??[])];}return qe$6(ee$9({payload:v$22,fromAPI:!0}));})):z$18))),this.reactToMembersUpdates=Ke$1(()=>Hi$2(this.chatUsersService.chatUsersMap$,this.actions$.pipe(Ye$2(Ye$1,rt$3),fs$1(100))).pipe(Mu(()=>[this.chatUsersService.chatUsersMap$,this.store.select(ae$8),this.store.select(hl),this.store.select(NI),this.store.select(RO)]),q$20(([,E$16,P$20,B$22,G$16,v$22])=>{let x$28=[];for(let U$19 of[...B$22,...G$16]){let H$10=z_(U$19,{members:E$16,usersMap:v$22},P$20);x$28.push({id:U$19.id,changes:{name:H$10}});}return Ae$5.updateChatRoomOptimisticBulk({changes:x$28});}))),this.loadCanonicalChatRoomsBulk=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadCanonicalChatRoomsBulk),oe$13(E$16=>E$16.keys.length>0),Z$12(E$16=>this.chatRoomsApiService.getCanonicalRoomsBulk(E$16.keys,E$16.params??{})),this.createSaveBulkResponseToState)),this.reactToDataViewMemberChange=Ke$1(()=>this.actions$.pipe(Ye$2(te$10),Mu(()=>[this.store.select(be$4.selectEntities)]),Z$12(([E$16,P$20])=>{let B$22=P$20[E$16.id];if(!B$22)return z$18;let G$16=B$22?.members||[],v$22=E$16.members?.map(x$28=>String(x$28.user.id))||E$16.ids;return v$22?qe$6(Ae$5.updateChatRoomOptimistic({id:B$22.id,changes:{members:this.getUpdatedIdsFromAction(G$16,v$22,E$16.action)}})):z$18;}))),this.reactToDataViewFollowerChange=Ke$1(()=>this.actions$.pipe(Ye$2(Po$2),Mu(()=>[this.store.select(be$4.selectEntities)]),Z$12(([E$16,P$20])=>{let B$22=P$20[E$16.payload.viewId];if(!B$22)return z$18;let G$16=B$22?.followers||[],v$22=E$16.payload.remove?.map(U$19=>String(U$19.id))||[],x$28=E$16.payload.add?.map(U$19=>String(U$19.id))||[];return qe$6(Ae$5.updateChatRoomOptimistic({id:B$22.id,changes:{followers:this.getUpdatedIdsFromAction(this.getUpdatedIdsFromAction(G$16,x$28,`add`),v$22,`remove`)}}));}))),this.reactToNewMessage=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.createCommentSuccess),Mu(({comment:E$16})=>[this.store.select(I$10(E$16.id))]),R$20(),Z$12(([E$16,P$20])=>{if(!P$20)return z$18;let B$22=P$20.roomId,G$16=P$20.replyToId,v$22=Math.max(Number(E$16.comment.date),E$16.comment.version?.date_created||0);return j$23(d$22([E$16.markAsRead!==!1&&!G$16&&re$7.markLastReadAt({readStrategy:`READ_IF_NEWER`,date:v$22,parentType:et$6.VIEW,parentId:B$22,objectId:B$22,objectType:et$6.VIEW}),E$16.markAsRead!==!1&&!G$16&&re$7.clearUnreadCommentCount({objectId:B$22}),!G$16&&Ae$5.updateChatRoomOptimistic({id:B$22,changes:{latestCommentDate:v$22-1,updatedAt:v$22}})]));}))),this.updateChatRoom=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.updateChatRoom),Mu(E$16=>[this.store.select(be$4.selectChatRoom(E$16.id))]),Z$12(([E$16,P$20])=>P$20?this.chatRoomsApiService.updateRoom(E$16.id,E$16.changes).pipe(Z$12(B$22=>{let G$16=[Ae$5.updateChatRoomSuccess({id:E$16.id,changes:E$16.changes}),...kl(B$22),Ae$5.updateChatRoomOptimistic({id:E$16.id,changes:{...B$22.room}})];return E$16.options?.withExplicitRefetch&&G$16.push(s5({actionToDispatch:Ae$5.loadChatRoom({id:P$20.id,maxAge:0,withHierarchyMembers:!!E$16.options?.withHierarchyMembers}),delay:1e3})),j$23(G$16);}),Xo$2(B$22=>qe$6(Ae$5.updateChatRoomFailure({id:E$16.id,error:B$22})))):z$18))),this.clearChatRooms=Ke$1(()=>Hi$2(this.store.select(o$30).pipe(s$12()),this.store.select(ae$8).pipe(s$12())).pipe(q$20(()=>Ae$5.clearChatRooms()))),this.resetCommentsV2State=Ke$1(()=>this.store.select(o$30).pipe(s$12()).pipe(Z$12(()=>[n$23.resetCommentsState(),qs.resetFetchState()]))),this.followRoomOptimistically=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.followRoomOptimistically),Mu(()=>[this.store.select(ae$8),this.store.select(AI.selectEntities),this.store.select(SJ)]),Z$12(([{room:E$16},P$20,B$22,G$16])=>E$16.type===a$28.DM?Nre(E$16.id,G$16):E$16.type===a$28.GROUP_DM?Bre(E$16.id,B$22[E$16.id],G$16):E$16.type===a$28.CHANNEL?Vre(E$16,P$20):z$18))),this.optimisticallySetLastCommentDate=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.optimisticallySetLastCommentDate),q$20(E$16=>Ae$5.updateChatRoomOptimistic({id:E$16.roomId,changes:{latestCommentDate:Date.now()}})))),this.addFollowerOnUserMentioning=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.createCommentSuccess),q$20(E$16=>{let P$20=E$16.comment.version.data?.relationships??[];return{roomId:Se(P$20)?.object_id||Jc$2(P$20)?.object_id,comment:E$16.comment};}),Mu(({roomId:E$16,comment:P$20})=>[this.chatRoomMembersService.getChatRoomFollowers(E$16??``),this.chatRoomMembersService.getChatRoomHierarchyMembers(E$16??``),this.store.select(H$4(P$20.id??``)),this.store.select(be$4.selectEntities)]),oe$13(([{roomId:E$16},P$20,B$22,G$16,v$22])=>G$16?.type===a$27.ConversationView&&d$10(E$16)&&!!v$22[E$16]),Z$12(([{roomId:E$16},P$20,B$22,G$16])=>{let v$22=(G$16?.comment??[]).filter(te$16=>te$16.type===`tag`).map(te$16=>te$16.user).filter(d$10),x$28=P$20.map(te$16=>String(te$16.id)),U$19=B$22.map(te$16=>String(te$16.id)),H$10=v$22.map(te$16=>String(te$16.id)).filter(te$16=>!x$28.includes(te$16)&&U$19.includes(te$16));return!H$10.length||!E$16?z$18:qe$6(Ae$5.updateChatRoomOptimistic({id:E$16,changes:{followers:this.getUpdatedIdsFromAction(x$28,H$10,`add`)}}));}))),this.reactToHierarchyChange=Ke$1(()=>this.actions$.pipe(Ye$2(x$11,I$8,Vs$2,ws$1,Gs$1,Ls),F$20(()=>({useHierarchyDataForHierarchyMembers:this.chatFeatureService.useHierarchyDataForHierarchyMembers$,isChatClickAppOn:this.store.select(n$28),roomId:this.store.select(Ux())})),oe$13(([E$16,{useHierarchyDataForHierarchyMembers:P$20,isChatClickAppOn:B$22,roomId:G$16}])=>!P$20&&!!B$22&&!!G$16&&!$u(G$16)),q$20(([E$16,{roomId:P$20}])=>Ae$5.loadChatRoom({id:P$20,maxAge:0,withHierarchyMembers:!0})))),this.getRoomByParentId=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.getChatRoomByParentId),Mu(({parentId:E$16,parentType:P$20})=>[this.isChatEnabled$,this.store.select(bx(E$16)),this.store.select(Mre({id:E$16,type:P$20},o$31.Conversation))]),oe$13(([E$16,P$20])=>!!P$20),Z$12(([{parentId:E$16,parentType:P$20},B$22,G$16,v$22])=>{if(G$16)return z$18;let x$28=v$22?.id??``;return x$28||(x$28=u$24(P$20,E$16)),qe$6(Ae$5.loadChatRoom({id:x$28,withHierarchyMembers:!0}));}))),this.addFollower=Ke$1(()=>this.actions$.pipe(Ye$2(Bt$4.addFollower),Mu(E$16=>{let P$20=this.store.select(Hr$1(E$16.roomId));return[P$20,this.chatRoomViewsService.selectLegacyChatViewById(E$16.roomId),P$20.pipe(le$5(v$22=>this.store.select(J$8(v$22?.parent))))];}),q$20(([E$16,P$20,B$22,G$16])=>{let v$22=!!P$20?.isLegacyChannel,x$28=e(B$22),U$19=Ju(P$20),H$10=[G$16?.category,G$16?.subcategory,G$16?.project].some(ke$5=>ke$5?.private),te$16=Bt$4.addFollowerToDataView({userId:E$16.userId,roomId:E$16.roomId,parentId:E$16.parentId,parentType:E$16.parentType,permission:E$16.permission}),ye$5=Bt$4.addFollowerToChatRoom({userId:E$16.userId,roomId:E$16.roomId,parentId:E$16.parentId,parentType:E$16.parentType,permission:E$16.permission,shouldAddDataViewMembers:U$19?void 0:x$28});return v$22&&x$28&&!H$10?te$16:ye$5;}))),this.addFollowerForLegacyChat=Ke$1(()=>this.actions$.pipe(Ye$2(Bt$4.addFollowerToDataView),q$20(E$16=>Ge$3({id:E$16.roomId,data:[{userId:E$16.userId,permission:E$16.permission}],addViewFollower:!0})))),this.addFollowerToChatRoom=Ke$1(()=>this.actions$.pipe(Ye$2(Bt$4.addFollowerToChatRoom),Mu(()=>[this.store.select(o$30),this.store.select(sr)]),Z$12(([E$16,P$20,B$22])=>this.chatRoomsAccessService.addFollower({...E$16,teamId:P$20,planTier:B$22}).pipe(Xo$2(G$16=>this.handleError(G$16)),q$20(G$16=>({response:G$16,action:E$16})))),Z$12(({response:E$16,action:P$20})=>E$16?j$23([Ae$5.loadChatRoom({id:P$20.roomId,maxAge:0,withHierarchyMembers:!0}),Bt$4.addFollowersSuccess()]):qe$6(Bt$4.addFollowerError({roomId:P$20.roomId,userId:P$20.userId}))))),this.removeAccess=Ke$1(()=>this.actions$.pipe(Ye$2(Bt$4.removeAccess),Mu(E$16=>[this.store.select(Se$10(E$16.roomId))]),Z$12(([E$16,P$20])=>this.chatRoomsAccessRemoveService.removeAccess({...E$16,viewVisibility:P$20?.visibility}).pipe(Xo$2(B$22=>this.handleError(B$22)),q$20(B$22=>({response:B$22,action:E$16})))),Z$12(({response:E$16,action:P$20})=>E$16?j$23([Ae$5.loadChatRoom({id:P$20.roomId,maxAge:0,withHierarchyMembers:!0})]):qe$6(Bt$4.removeAccessError({roomId:P$20.roomId,userId:P$20.userId}))))),this.reactToParentPrivacyChange=Ke$1(()=>this.actions$.pipe(Ye$2(qe$4,Oe$5,g$9),oe$13(Rre)).pipe(As$3(this.store.select(KJ),this.store.select(n$28)),oe$13(([B$22,G$16,v$22])=>!!v$22&&G$16.includes(cM(B$22)))).pipe(Mu(([B$22])=>this.store.select(bx(cM(B$22)))),q$20(([B$22,G$16])=>G$16),ps$2(2e3),oe$13(B$22=>!!B$22),q$20(B$22=>Ae$5.loadChatRoom({id:B$22.id,maxAge:0,withHierarchyMembers:!0})))),this.addFollowerToCanonicalChat=Ke$1(()=>this.actions$.pipe(Ye$2(Bt$4.addFollowersCanonical),Z$12(({selectedUserIds:E$16,noAccessUserIds:P$20,roomId:B$22,parentId:G$16,parentType:v$22,permission:x$28})=>this.chatRoomsAccessService.addFollowersToCanonicalChat({selectedUserIds:E$16,noAccessUserIds:P$20,roomId:B$22,parentId:G$16,permission:x$28}).pipe(le$5(()=>{return j$23([Bt$4.addFollowersCanonicalSuccess({roomId:B$22,parentId:G$16,parentType:v$22,addedAccessUserIds:P$20}),s5({actionToDispatch:Ae$5.loadChatRoom({id:B$22,maxAge:0,withHierarchyMembers:!0}),delay:1e3})]);}),Xo$2(()=>qe$6(Bt$4.addFollowersCanonicalError({roomId:B$22}))))))),this.addFollowersLocationless=Ke$1(()=>this.actions$.pipe(Ye$2(Bt$4.addFollowersLocationless),Z$12(E$16=>this.chatRoomsAccessService.addFollowersLocationless(E$16).pipe(Xo$2(P$20=>this.handleError(P$20)),q$20(P$20=>({response:P$20,action:E$16})))),Z$12(({response:E$16,action:P$20})=>E$16?j$23([Ae$5.loadChatRoom({id:P$20.room.id,maxAge:0,withHierarchyMembers:!0}),Bt$4.addFollowersSuccess()]):qe$6(Bt$4.addFollowersError({roomId:P$20.room.id,userIds:P$20.allSelectedUserIds}))))),this.dispatchActionWithDelay=Ke$1(()=>this.actions$.pipe(Ye$2(s5),le$5(E$16=>qe$6(E$16.actionToDispatch).pipe(ps$2(E$16.delay))))),this.redirectOnNonExistingRoomRoute=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.chatRoomUnauthorizedOrNotFound),oe$13(({roomIds:E$16})=>!!E$16.length),Mu(()=>this.chatLocationProviderService.getInstanceByPlacement(`chat-hub`).pipe(q$20(E$16=>E$16?.roomId),Ve$4(1))),Is$1(([{roomIds:E$16},P$20])=>{P$20&&E$16.includes(P$20)&&this.chatRouterService.goToChatRoom(e$17.launchpad);})),{dispatch:!1}),this.updateFetchStateForFailedRooms=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.chatRoomUnauthorizedOrNotFound),oe$13(({roomIds:E$16})=>!!E$16.length),q$20(({roomIds:E$16})=>qs.updateFetchStateMany({states:E$16.map(P$20=>({objectId:P$20,objectType:be$4.name,state:`error`,reason:nl.NotFoundOrAuthorized,maxAge:uM}))}))));}ngrxOnRunEffects(e$19){return this.workspaceStartupService.addStartupJob(new G_(this.chatFeatureService)),e$19;}createChannelTelemetryAction(e$19,r$34){return ve$5.createChannel({properties:{channelType:u$8(e$19),numChannelSubscribers:e$19.followers?.length??0,privacy:e$19?l$12(e$19):null,parentType:e$19?p$8(e$19):null,isWelcomeChannel:e$19?TI(e$19):void 0,via:r$34??void 0}});}getUpdatedIdsFromAction(e$19,r$34,o$32){let s$25=new Set(e$19);return o$32===`add`||o$32===`update`?r$34.forEach(n$46=>s$25.add(n$46)):o$32===`remove`?r$34.forEach(n$46=>s$25.delete(n$46)):o$32===`replace`&&(s$25.clear(),r$34.forEach(n$46=>s$25.add(n$46))),[...s$25];}getAllRoomsByDelta(e$19){return this.chatRoomsApiService.getRoomsDeltaAll({lastFetchedAt:e$19}).pipe(oe$13(r$34=>r$34.rooms.length>0),Mu(()=>[this.store.select(AJ),this.store.select(o$30)]),Z$12(([{rooms:r$34,notFoundRoomIds:o$32},s$25,n$46])=>{let{loadedRooms:a$30,nonLoadedRoomIds:c$37}=Pre(r$34,s$25);return j$23([Ae$5.loadChatRoomsBulk({roomIds:c$37,params:{fields:[w$12.MEMBERS,w$12.FOLLOWERS,w$12.HIERARCHY_MEMBERS,w$12.DIRECT_MESSAGE_USER_MAP,w$12.DIRECT_MESSAGE_WORKSPACE_USERS_MAP]},lastFetchedAt:e$19}),Ae$5.loadChatRoomsDeltaSuccess({lastFetchedAt:mM(a$30),rooms:a$30,workspaceId:n$46}),Ae$5.chatRoomUnauthorizedOrNotFound({roomIds:o$32??[]}),i$17.loadLastReadAtForSidebar()]);}),Xo$2(r$34=>(fA(`Error in loadChatRoomsDelta effect`,{feature:`chat`,cause:r$34}),z$18)));}handleError(e$19){return fc(e$19,{feature:`chat`,handled:!1}),qe$6(null);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(om),ge$10(_t),ge$10(N$12),ge$10(se$3),ge$10(M$1),ge$10(ty),ge$10(Ci),ge$10(Q$5),ge$10(Bt$2),ge$10(Zre),ge$10(eie),ge$10(wr$1),ge$10(Kt),ge$10(q));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();hr$3();VN();dm();VN();iie=(()=>{class t$21{constructor(){this.httpClient=C$23(ve$7),this.store=C$23(q$19),this.applicationEnvironmentService=C$23(Ni),this.teamId$=this.store.select(o$30),this.apiUrl$=this.applicationEnvironmentService.environment$.pipe(Mu(()=>[this.teamId$]),q$20(([{apiUrlChatService:e$19},r$34])=>`${e$19}/workspaces/${r$34}/chat/hidden_rooms`));}hideRoom(e$19){return this.apiUrl$.pipe(Ve$4(1),Z$12(r$34=>this.httpClient.post(`${r$34}/${e$19}`,{})));}stopHidingRoom(e$19){return this.apiUrl$.pipe(Ve$4(1),Z$12(r$34=>this.httpClient.delete(`${r$34}/${e$19}`)));}getHiddenRooms(){return this.apiUrl$.pipe(Ve$4(1),Z$12(e$19=>this.httpClient.get(`${e$19}`)));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();oie=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.chatRoomsHiddenService=C$23(iie),this.syntheticMarkerService=C$23(N$12),this.hideChatRoom$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.hideChatRoom),Mu(()=>[this.store.select(o$30),this.store.select(uu)]),Z$12(([e$19,r$34,o$32])=>this.processHideRoomAndGenerateActions({id:e$19.id,currentRoomId:e$19.currentRoomId,roomIds:o$32,teamId:r$34})))),this.removeChatRoomFromHidden$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.removeChatRoomFromHidden),Is$1(({id:e$19,context:r$34})=>{this.syntheticMarkerService.mark(`chat.room.remove_from_hidden.${e$19}.start`,{entityId:e$19,client_trace:r$34?.clientTrace}).setGenericName(`chat.room.remove_from_hidden.start`);}),Z$12(({id:e$19,context:r$34})=>this.processUnhideRoomAndGenerateActions(e$19,r$34))));}processHideRoomAndGenerateActions({id:e$19,currentRoomId:r$34,roomIds:o$32,teamId:s$25}){return this.chatRoomsHiddenService.hideRoom(e$19).pipe(q$20(({success:n$46})=>({success:n$46})),le$5(({success:n$46})=>n$46?qe$6(Ae$5.hideChatRoomSuccess({id:e$19})):qe$6(Ae$5.hideChatRoomFailure({id:e$19}))),ws$2(...this.generateHideOptimisticallyActions(e$19,o$32,s$25,r$34)));}generateHideOptimisticallyActions(e$19,r$34,o$32,s$25){let n$46=[Ae$5.hideChatRoomOptimistically({id:e$19})];return(e$19===s$25||s$25===`launchpad`)&&n$46.push(new r$25({path:[o$32,`chat`,`r`,r$34?.length>1?r$34.find(a$30=>a$30!==s$25&&!$u(a$30)):e$17.mentions],tag:`chat-rooms-hide-redirect-after-hide`})),n$46;}processUnhideRoomAndGenerateActions(e$19,r$34){return this.chatRoomsHiddenService.stopHidingRoom(e$19).pipe(q$20(({success:o$32})=>(this.syntheticMarkerService.mark(`chat.room.remove_from_hidden.${e$19}.finish`,{entityId:e$19,client_trace:r$34?.clientTrace}).setGenericName(`chat.room.remove_from_hidden.finish`),o$32?Ae$5.removeChatRoomFromHiddenSuccess({roomId:e$19,context:r$34}):Ae$5.removeChatRoomFromHiddenFailure({roomId:e$19}))),Xo$2(()=>qe$6(Ae$5.removeChatRoomFromHiddenFailure({roomId:e$19}))));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();sie={trackLoadChatRoomBulkSuccess:Ke$1((t$21=C$23(Le$4),i$27=C$23(N$12))=>t$21.pipe(Ye$2(Ae$5.loadChatRoomsBulkSuccess,Ae$5.removeChatRoomFromHiddenSuccess),oe$13(e$19=>!!e$19.context?.clientTrace),Is$1(e$19=>{let r$34=`roomId`in e$19?e$19.roomId:e$19.rooms?.[0]?.id;i$27.mark(`chat.room.showing_in_sidebar.${r$34}`,{entityId:r$34,client_trace:e$19.context?.clientTrace}).setGenericName(`chat.room.showing_in_sidebar`);})),{functional:!0,dispatch:!1})};VN();dm();Rve=Ke$1((t$21=C$23(Le$4),i$27=C$23(q$19))=>t$21.pipe(Ye$2(ge$8.addSidebarSectionItemSuccess,ge$8.moveSidebarSectionItemSuccess),oe$13(({item:e$19})=>e$19.isChat),Mu(({item:e$19})=>[i$27.select(Hr$1(e$19.id)),i$27.select(kJ(e$19.id)),i$27.select(OJ(e$19.id)),i$27.select(b$17)]),Z$12(([e$19,r$34,o$32,s$25,n$46])=>nie(r$34,o$32,s$25,n$46))),{functional:!0,dispatch:!0}),Fve=Ke$1((t$21=C$23(Le$4),i$27=C$23(q$19))=>t$21.pipe(Ye$2(i$17.toggleMembership),oe$13(({groupId:e$19})=>!!e$19),Mu(({roomId:e$19})=>[i$27.select(Hr$1(e$19)),i$27.select(kJ(e$19)),i$27.select(OJ(e$19)),i$27.select(b$17)]),Z$12(([e$19,r$34,o$32,s$25,n$46])=>nie(r$34,o$32,s$25,n$46))),{functional:!0,dispatch:!0}),nie=(t$21,i$27,e$19,r$34)=>{if(!t$21)return z$18;let o$32=[];return!t$21.parent||!r$34||i$27||o$32.push(Ae$5.followRoomOptimistically({room:t$21}),new ft$3({viewId:t$21.id,add:[r$34]})),e$19&&o$32.push(Ae$5.removeChatRoomFromHidden({id:t$21.id})),o$32;},aie={followRoomOnAddedToSidebarSection:Rve,followRoomOnSidebarMembershipChange:Fve};VN();dm();cie=f$30.byNamespace(`chat-websockets`);VN();dm();VN();lie=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.publicAgentsService=C$23(I$9),this.actions$=C$23(Le$4);}ensureAgentAvailable(e$19){return e$19?np({id:e$19})?this.publicAgentsService.getAgentById(e$19)?qe$6(void 0):(this.store.dispatch(Je$3({forceRefresh:!0})),ts$2(this.actions$.pipe(Ye$2(Ye$1)),Q$17(5e3)).pipe(q$20(()=>{}),Ve$4(1),Xo$2(()=>qe$6(void 0)))):qe$6(void 0):qe$6(void 0);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();die=[t$17.ChatRoomEdited,t$17.ChatRoomDeleted],xve=1e3,pie=(()=>{class t$21{constructor(){this.websocketOvmService=C$23(M$4),this.websocketConfigService=C$23(E$11),this.store=C$23(q$19),this.chatRoomAgentFetchService=C$23(lie),this.isVersioningEnabled$=jS(O$16.ChatRoomsOvmWebsocketConsumer),this.reactToNewComment$=Ke$1(()=>this.websocketOvmService.getEventsByType([t$17.ChatCommentCreated,t$17.CommentCreated]).pipe(q$20(e$19=>this.extractCommentEventData(e$19)),oe$13(e$19=>!!e$19.parentObjectId&&!!e$19.dateCreated),Mu(({parentObjectId:e$19})=>[this.store.select(Hr$1(e$19))]),Rr(([{parentObjectId:e$19,dateCreated:r$34,authorUserId:o$32},s$25])=>this.handleCommentWithAgentCheck(e$19,r$34,o$32,s$25)),q$20(({parentObjectId:e$19,dateCreated:r$34,room:o$32})=>this.getChatRoomAction(e$19,r$34,o$32)))),this.updateChatRoom$=Ke$1(()=>this.websocketOvmService.getEventsByType(die).pipe(Mu(e$19=>[this.store.select(Kc(e$19.version_change.object_id,e$19.version_change.object_type)),this.isVersioningEnabled$]),oe$13(([e$19,r$34,o$32])=>o$32&&mie(e$19,r$34)),le$5(([e$19])=>j$23([Ae$5.loadChatRoom({id:e$19.version_change.object_id,withHierarchyMembers:!0,maxAge:0})]))));}ngrxOnRunEffects(e$19){return die.forEach(r$34=>{let o$32=this.websocketConfigService.createConfiguration(r$34).setJitter(xve);this.websocketConfigService.addConfiguration(o$32);}),e$19;}extractCommentEventData(e$19){let r$34=t$4(e$19),o$32=Jc$2(r$34),s$25=Yc$2(r$34),a$30=`date_created`in e$19?e$19.date_created-250:void 0;return{parentObjectId:o$32?.object_id,dateCreated:a$30,authorUserId:s$25?.object_id};}handleCommentWithAgentCheck(e$19,r$34,o$32,s$25){return this.chatRoomAgentFetchService.ensureAgentAvailable(o$32).pipe(q$20(()=>({parentObjectId:e$19,dateCreated:r$34,room:s$25})));}getChatRoomAction(e$19,r$34,o$32){return o$32?Ae$5.updateChatRoomOptimistic({id:e$19,changes:{updatedAt:r$34,latestCommentDate:r$34}}):Ae$5.loadChatRoom({id:e$19});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();uie=F$23(DR());VN();fie=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.store=r$34,this.chatLocationProviderService=o$32,this.loadMissingPermissionsOnThreadLoadSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(P$9.getThreadsSuccess),q$20(({threads:s$25})=>[...new Set(s$25.map(n$46=>n$46.roomId))]),Mu(()=>[this.store.select(x$10)]),q$20(([s$25,n$46])=>s$25.filter(a$30=>!n$46[a$30])),oe$13(s$25=>s$25.length>0),le$5(s$25=>[n$18.getPermissions({objects:s$25.map(n$46=>({object_id:n$46,object_type:uie.ObjectType.View}))})]))),this.reloadChatRoomsOnAccessChange$=Ke$1(()=>this.store.select(de$10).pipe(R$20(),q$20(s$25=>S$14(s$25.role,s$25.role_subtype)),hs$3(),oe$13(([s$25,n$46])=>s$25!==n$46),Mu(()=>this.chatLocationProviderService.getInstanceByPlacement(`chat-hub`).pipe(q$20(s$25=>s$25?.roomId),Ve$4(1))),le$5(([,s$25])=>{let n$46=[Ae$5.clearChatRooms(),qs.resetFetchState(),Ae$5.loadChatRoomsForSidebar()];return s$25&&!$u(s$25)&&n$46.push(Ae$5.loadChatRoom({id:s$25,forceFetch:!0})),n$46;})));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(wr$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();U$18();U$18();VN();gM=f$30.byNamespace(`chat`),gie=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.chatFeatureService=o$32,this.chatRoomHierarchyMembersService=s$25,this.createLoadHierarchyMembersActions=n$46=>n$46.pipe(Mu(a$30=>[this.chatFeatureService.useHierarchyDataForHierarchyMembers$,this.store.select(BJ(a$30)),mi$1(this.store,this.chatFeatureService.isChatUseWorkspaceUsersEnabled$)]),oe$13(([a$30,c$37])=>c$37),le$5(([a$30,c$37,m$32,l$26])=>{let g$19=[],f$33=new Set(m$32?.map(R$21=>R$21?.id)??[]),h$15=a$30.filter(R$21=>!f$33.has(R$21)),I$25=m$32.filter(Ns$1),A$22=m$32.filter(V9);return h$15.length>0&&g$19.push(this.chatRoomHierarchyMembersService.loadHierarchyMembersForRooms(h$15,l$26)),I$25.length>0&&g$19.push(Ae$5.loadHierarchyMembersForLocationBasedRooms({rooms:I$25})),A$22.length>0&&g$19.push(Ae$5.loadHierarchyMembersForLocationlessRooms({rooms:A$22})),j$23(g$19);})),this.loadHierarchyMembersIfRoomInCache$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadHierarchyMembersForRoom),Mu(n$46=>[this.store.select(Hr$1(n$46.roomId)),mi$1(this.store,this.chatFeatureService.isChatUseWorkspaceUsersEnabled$)]),q$20(([n$46,a$30,c$37])=>a$30?Ns$1(a$30)?Ae$5.loadHierarchyMembersForLocationBasedRooms({rooms:[a$30],useCache:n$46.useCache!==void 0?n$46.useCache:!0,forceLoad:!0}):Ae$5.loadHierarchyMembersForLocationlessRooms({rooms:[a$30]}):this.chatRoomHierarchyMembersService.loadHierarchyMembersForRooms([n$46.roomId],c$37)))),this.loadHierarchyMembersForRooms$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadHierarchyMembersForRooms),Mu(()=>this.store.select(r$22)),q$20(([{roomIds:n$46,useCache:a$30},c$37])=>a$30?n$46.filter(m$32=>!c$37[m$32]?.memberIds?.length):n$46),oe$13(n$46=>n$46.length>0),this.createLoadHierarchyMembersActions)),this.listenOnThreadLoadSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(P$9.getThreadsSuccess),q$20(({threads:n$46})=>[...new Set(n$46.map(a$30=>a$30.roomId))]),this.createLoadHierarchyMembersActions)),this.loadChatRoomMissingDataViewMembers$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadHierarchyMembersForLocationBasedRooms),Mu(({rooms:n$46})=>[this.chatFeatureService.useHierarchyDataForHierarchyMembers$,this.store.select(ge$9(n$46.map(a$30=>a$30.id))),this.store.select(hs$2),this.store.select(r$22)]),oe$13(([n$46,a$30])=>a$30&&n$46.rooms.some(Ns$1)),Z$12(([n$46,a$30,c$37,m$32,l$26])=>this.chatRoomHierarchyMembersService.createDataViewMemberLoadActions(n$46,c$37,m$32,l$26)))),this.reloadChatRoomWithHierarchyMembers$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadHierarchyMembersForLocationlessRooms),Mu(()=>[this.chatFeatureService.useHierarchyDataForHierarchyMembers$,mi$1(this.store,this.chatFeatureService.isChatUseWorkspaceUsersEnabled$)]),oe$13(([n$46,a$30])=>a$30&&n$46.rooms.some(V9)),q$20(([n$46,a$30,c$37])=>{let m$32=n$46.rooms.filter(V9).map(l$26=>l$26.id);return this.chatRoomHierarchyMembersService.loadHierarchyMembersForRooms(m$32,c$37);}))),this.updateHierarchyMembersOnChatRoomsBulkSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoomsBulkSuccess),oe$13(({rooms:n$46})=>n$46.some(J_)),q$20(({rooms:n$46})=>{let a$30=n$46.filter(J_).map(c$37=>(gM.info(`[ChatRooms] updateHierarchyMembers - room: ${c$37.id} - hierarchy members count: ${c$37.hierarchy_members?.length}`),{roomId:c$37.id,memberIds:c$37.hierarchy_members}));return Ae$5.updateHierarchyMembersBulk({updates:a$30});}))),this.updateHierarchyMembersForPrivateRoomsOnChatRoomsBulkSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoomsBulkSuccess),Mu(({rooms:n$46})=>[this.store.select(ge$9(n$46.map(a$30=>a$30.id)))]),oe$13(([{rooms:n$46},a$30])=>n$46.some(c$37=>{return fM(c$37,a$30.find(l$26=>l$26.id===c$37.id))&&Array.isArray(c$37.members);})),q$20(([{rooms:n$46},a$30])=>{let c$37=n$46.filter(m$32=>{return fM(m$32,a$30.find(g$19=>g$19.id===m$32.id))&&Array.isArray(m$32.members);}).map(m$32=>(gM.info(`[ChatRooms] - updateHierarchyMembersForPrivateRoomsOnChatRoomsBulkSuccess$ - updateHierarchyMembers (private) - room: ${m$32.id} - members count: ${m$32.members?.length}`),{roomId:m$32.id,memberIds:m$32.members||[]}));return Ae$5.updateHierarchyMembersBulk({updates:c$37});}))),this.updateHierarchyMembersDataViewMemberChange$=Ke$1(()=>this.actions$.pipe(Ye$2(Gr$1),Mu(({viewId:n$46})=>[this.chatFeatureService.useHierarchyDataForHierarchyMembers$,this.store.select(Se$10(n$46)),this.store.select(Hr$1(n$46))]),oe$13(([{members:n$46,groupMembers:a$30},c$37,m$32,l$26])=>c$37&&Ns$1(l$26)&&m$32?.visibility!==x$26.Private&&!!n$46&&!!a$30),Z$12(([{viewId:n$46,members:a$30,groupMembers:c$37}])=>{try{let m$32=new Set();return a$30.parent.forEach(l$26=>{l$26.user?.id&&m$32.add(l$26.user.id.toString());}),c$37.parent.forEach(l$26=>{l$26.group?.members&&l$26.group.members.forEach(g$19=>{g$19.id&&m$32.add(g$19.id.toString());});}),[Ae$5.updateHierarchyMembers({roomId:n$46,memberIds:Array.from(m$32)})];}catch(m$32){return fA(`Error in updateHierarchyMembersDataViewMemberChange$ effect`,{feature:`chat`,cause:m$32}),z$18;}}))),this.updateHierarchyMembersOnOptimisticUpdate$=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.updateChatRoomOptimistic),oe$13(({changes:n$46})=>J_(n$46)),Is$1(({id:n$46,changes:a$30})=>{gM.info(`[ChatRooms] updateHierarchyMembers - room: ${n$46} - hierarchy members count: ${a$30.hierarchy_members?.length}`);}),q$20(({id:n$46,changes:a$30})=>Ae$5.updateHierarchyMembers({roomId:n$46,memberIds:a$30.hierarchy_members||[]})))),this.reactToProjectMemberChanges$=Ke$1(()=>this.actions$.pipe(Ye$2(x$11,I$8),Mu(n$46=>[this.chatFeatureService.useHierarchyDataForHierarchyMembers$,this.store.select(n$28),this.store.select(be$4.selectChatRoomsByParentId(n$46.projectId))]),oe$13(([n$46,a$30,c$37,m$32])=>hM(a$30,c$37,m$32)),le$5(([n$46,a$30,c$37,m$32])=>{let l$26=[];return m$32.forEach(g$19=>{l$26.push(he$2({viewId:g$19.id,useCache:!1,forceLoad:!0}));}),j$23(l$26);}))),this.reactToCategoryMemberChanges$=Ke$1(()=>this.actions$.pipe(Ye$2(Vs$2,ws$1,Gs$1,Ls),Mu(n$46=>[this.chatFeatureService.useHierarchyDataForHierarchyMembers$,this.store.select(n$28),this.store.select(be$4.selectChatRoomsByParentId(n$46.id)),this.store.select(r$22)]),oe$13(([n$46,a$30,c$37,m$32])=>hM(a$30,c$37,m$32)),Z$12(([n$46,a$30,c$37,m$32,l$26])=>{let g$19=[],f$33=new Set(hie(n$46)),h$15=new Set(),I$25=new Map();for(let A$22 of m$32){let R$21=new Set(l$26[A$22.id]?.memberIds||[]),w$26=n$46.action===`add`||n$46.action===`remove`;if(!R$21.size||!w$26||!f$33.size){h$15.add(A$22.id);continue;}n$46.action===`add`?f$33.forEach(E$16=>R$21.add(E$16)):n$46.action===`remove`&&f$33.forEach(E$16=>R$21.delete(E$16)),I$25.set(A$22.id,R$21);}for(let A$22 of h$15)g$19.push(he$2({viewId:A$22,useCache:!0,forceLoad:!0}));if(I$25.size>0){let A$22=Array.from(I$25.entries()).map(([R$21,w$26])=>({roomId:R$21,memberIds:Array.from(w$26)}));g$19.push(Ae$5.updateHierarchyMembersBulk({updates:A$22}));}return j$23(g$19);}))),this.reloadHierarchyMembersOnAddFollowersCanonical$=Ke$1(()=>this.actions$.pipe(Ye$2(Bt$4.addFollowersCanonicalSuccess),Mu(()=>[this.chatFeatureService.useHierarchyDataForHierarchyMembers$]),oe$13(([n$46,a$30])=>a$30&&n$46.addedAccessUserIds.length>0),q$20(([n$46])=>he$2({viewId:n$46.roomId,parent:{type:n$46.parentType,id:n$46.parentId},useCache:!1,forceLoad:!0}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(_t),ge$10(Vs));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();yie={PRIVATE:`private`,MEMBER_PREFIX:`member.`,MEMBER_GENERIC:`member`,GROUP_MEMBER_PREFIX:`group_member.`,GROUP_MEMBER_GENERIC:`group_member`};dm();Iie=t$21=>t$21.filter(i$27=>i$27.type===`view-comment-user`&&i$27.object_type===et$6.USER);Eie=(t$21,i$27)=>Iie(t$4(t$21)).some(r$34=>r$34.object_id.toString()===i$27?.toString());VN();Lve=[t$17.ListUpdated,t$17.SpaceUpdated,t$17.FolderUpdated],Aie=(()=>{class t$21{constructor(){this.websocketOvmService=C$23(M$4),this.chatRoomsApiService=C$23(om),this.store=C$23(q$19),this.chatMembersListenOnHierarchyWebsocket$=jS(O$16.ChatMembersListenOnHierarchyWebsocket),this.reloadChatRoomMembersOnParentUpdate$=Ke$1(()=>this.websocketOvmService.getEventsByType(Lve).pipe(Mu(e$19=>[this.store.select(f$24),this.chatMembersListenOnHierarchyWebsocket$,this.store.select(Kc(t$5(e$19),e$19.version_change.object_type))]),oe$13(([e$19,r$34,o$32,s$25])=>!!o$32&&Hm(e$19,s$25)),q$20(([e$19,r$34])=>{return{eventId:t$5(e$19),allMemberChanges:kie(vie(n$9(e$19)??[]),Sie(n$9(e$19)??[]),r$34)};}),Mu(({eventId:e$19})=>[this.store.select(yJ(e$19))]),oe$13(([{allMemberChanges:e$19},r$34])=>Tie(e$19,r$34)),Mu(([,e$19])=>[this.store.select(Se$10(e$19?.id??``)),this.store.select(b$8(e$19?.id??``))]),q$20(([[{allMemberChanges:e$19},r$34],o$32,s$25])=>{let n$46=bie(s$25,e$19,o$32?.creator?.toString());return Ae$5.updateHierarchyMembers({roomId:r$34?.id??``,memberIds:n$46});}))),this.updateDirectMessage$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.ViewUpdated).pipe(Mu(()=>this.store.select(ae$8)),oe$13(([e$19,r$34])=>Eie(e$19,r$34)),ps$2(1e3),Z$12(([e$19])=>this.chatRoomsApiService.getRoom(t$5(e$19),{fields:[w$12.MEMBERS,w$12.FOLLOWERS]})),Z$12(e$19=>[Ae$5.loadChatRoomSuccess({room:e$19.room}),...kl(e$19)])));}ngrxOnRunEffects(e$19){return this.websocketOvmService.enableMessage(t$17.ViewUpdated),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();wie=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.store=r$34,this.chatUsersService=o$32,this.reactToLoadedChatRooms=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.loadChatRoomsSuccess,Ae$5.loadChatRoomsBulkSuccess),Mu(()=>[this.chatUsersService.chatUserIds$,this.store.select(r$22)]),Is$1(([s$25,n$46,a$30])=>{this.chatUsersService.loadMissingUsersFromRooms(s$25.rooms,a$30,n$46);})),{dispatch:!1}),this.loadMissingUsersForHierarchyMemberUpdates=Ke$1(()=>this.actions$.pipe(Ye$2(Ae$5.updateHierarchyMembers),Mu(()=>[this.chatUsersService.chatUserIdsSet$]),q$20(([s$25,n$46])=>{let a$30=s$25.memberIds,c$37=new Set();for(let m$32=0;m$32<a$30.length;m$32++){let l$26=a$30[m$32];n$46.has(l$26)||c$37.add(l$26);}return Array.from(c$37);}),oe$13(s$25=>s$25.length>0),Mu(()=>[this.store.select(o$30)]),oe$13(([s$25,n$46])=>!!n$46),q$20(([s$25,n$46])=>KR({workspaceId:parseInt(n$46,10),ids:s$25.map(a$30=>parseInt(a$30,10))}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(se$3));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();yM={};D$16(yM,{deleteChatRoom$:()=>Uve,deleteChatRoomSuccess$:()=>Wve,removeVersionsOnRoomDeletion$:()=>Hve});VN();dm();hr$3();Dve=t$21=>qe$6({errorResponse:t$21});Vve=(t$21,i$27)=>i$27?.some(e$19=>e$19.roomId===t$21.id&&(e$19.placement.type===`chat-hub`||e$19.placement.type===`route`))??!1,Uve=Ke$1((t$21=C$23(Le$4),i$27=C$23(om),e$19=C$23(q$19))=>t$21.pipe(Ye$2(Ae$5.deleteChatRoom),Mu(({id:r$34})=>e$19.select(Hr$1(r$34))),q$20(([,r$34])=>r$34),R$20(),Rr(r$34=>i$27.deleteRoom(r$34.id).pipe(Xo$2(Dve),q$20(Bve(r$34))))),{functional:!0,dispatch:!0}),Wve=Ke$1((t$21=C$23(Le$4),i$27=C$23(wr$1))=>t$21.pipe(Ye$2(Ae$5.deleteChatRoomSuccess),Mu(()=>i$27.activeInstances$),Z$12(([{room:e$19},r$34])=>{let o$32=[ve$5.deleteChannel({properties:{privacy:l$12(e$19),channelType:u$8(e$19),parentType:p$8(e$19)}})];return Vve(e$19,r$34)&&o$32.push(Ae$5.chatRoomUnauthorizedOrNotFound({roomIds:[e$19.id]})),j$23(o$32);})),{functional:!0,dispatch:!0}),Hve=Ke$1((t$21=C$23(Le$4))=>t$21.pipe(Ye$2(Ae$5.deleteChatRoomSuccess),q$20(({room:i$27})=>j$14.removeVersionsByEntry({entries:[{id:i$27.id,ovmType:`view`}]}))),{functional:!0,dispatch:!0});VN();e$11(`chat_rooms_store_module`,`load`);vM=(()=>{class t$21{constructor(e$19){if(e$11(`chat_rooms_store_module`,`construct`),e$19)throw new Error(`ChatRoomsStoreModule is already loaded. Import it only once.`);k$5(un,{version:3,unmarshaller:o$32=>({...o$32,recency:o$32.recency||{},hierarchyMembers:o$32.hierarchyMembers||Kt$2.getInitialState(),pendingCreateRoomIds:o$32.pendingCreateRoomIds||{}})});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(t$21,12));};}static{this.mod=SE({type:t$21,id:`ChatRoomsStoreModule`});}static{this.inj=ql({providers:[S$6],imports:[gi$1,lr,Are,rn.forFeature(be$4),Je$4.forFeature([rie,oie,pie,aie,sie,gie,fie,Aie,yM,wie]),pr]});}}return t$21;})();NE(vM,`ChatRoomsStoreModule`);VN();dm();VN();Mie=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.chatRightSidebarStateService=C$23(u$18),this.reactToDeletedComment$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.deleteComment,n$23.deleteCommentOptimistically),Z$12(({id:e$19})=>this.chatRightSidebarStateService.isActiveThread(e$19)),oe$13(e$19=>e$19),Is$1(()=>this.chatRightSidebarStateService.close())),{dispatch:!1}),this.reactToPendingCommentLoaded$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.createCommentSuccess),Mu(({optimisticId:e$19})=>this.chatRightSidebarStateService.isActiveThread(e$19)),oe$13(([e$19,r$34])=>r$34),Is$1(([{comment:e$19}])=>{this.chatRightSidebarStateService.openThread({id:e$19.id});})),{dispatch:!1});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`chat_sidebar_store_module`,`load`);Rie=(()=>{class t$21{constructor(e$19){if(e$11(`chat_sidebar_store_module`,`construct`),e$19)throw new Error(`ChatSidebarStoreModule is already loaded. Import it in the AppModule only`);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(t$21,12));};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(Z$5),Je$4.forFeature([Mie])]});}}return t$21;})();VN();dm();dm();Gve=5,Pie={removeTriageOnLinkDeletion$:Ke$1((t$21=C$23(Le$4),i$27=C$23(q$19))=>t$21.pipe(Ye$2(c$6.deleteTriageOnLinkDeletion),Mu(({linkId:e$19})=>i$27.select(w$6.selectLinkById(e$19))),oe$13(([e$19,r$34])=>!!r$34),q$20(([e$19,r$34])=>{return{taskId:e$9(String(r$34.externalID)),commentId:e$9(String(r$34.externalAssetId))};}),Mu(({commentId:e$19})=>i$27.select(H$4(e$19))),oe$13(([{taskId:e$19},r$34])=>!!r$34&&!!r$34?.resolved&&r$34?.triaged_object_id===e$19),q$20(([e$19,r$34])=>m$7(r$34.id))),{functional:!0,dispatch:!0}),fetchTasksForLinks$:Ke$1((t$21=C$23(Le$4),i$27=C$23(q$19),e$19=C$23(Ci))=>t$21.pipe(Ye$2(c$6.fetchTasks),q$20(({links:r$34})=>Oie(r$34)),Mu(r$34=>i$27.select(nt$2(r$34))),le$5(([r$34,o$32])=>{let s$25=xie(o$32,r$34);return s$25.length?j$23(I$21(s$25,Gve)).pipe(Fie(e$19)):z$18;})),{functional:!0,dispatch:!0})};VN();e$11(`links_store_module`,`load`);SM=(()=>{class t$21{constructor(e$19){if(e$11(`links_store_module`,`construct`),e$19)throw new Error(`LinksStoreModule is already loaded. Import it in the AppModule only`);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(t$21,12));};}static{this.mod=SE({type:t$21,id:`LinksStoreModule`});}static{this.inj=ql({imports:[gi$1,rn.forFeature(w$6),Je$4.forFeature([Pie])]});}}return t$21;})();NE(SM,`LinksStoreModule`);VN();dm();VN();$ie=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.reactToGetCommentsSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.getCommentsSuccess,n$23.getCommentSuccess),Mu(()=>[this.store.select(AI.selectEntities)]),q$20(([{comments:e$19},r$34])=>this.mapCommentsToUnreadCounts(e$19,r$34)),oe$13(e$19=>e$19.length>0),q$20(e$19=>re$7.loadUnreadCountsSuccess({unreadCounts:e$19}))));}mapCommentsToUnreadCounts(e$19,r$34){return e$19.filter(o$32=>!(r$34[o$32.id]||!o$32.last_read_date||o$32.type===a$27.Comment)).map(o$32=>({...da({id:o$32.id,changes:{objectType:et$6.COMMENT,parentId:o$32.id,parentType:et$6.COMMENT,lastReadAt:Number(o$32.last_read_date),lastUpdatedAt:Number(o$32.last_read_date)}})})).filter(Boolean);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();Ee$4();jie=t$21=>({object_id:t$21.objectId,object_type:t$21.objectType}),Lie=t$21=>t$21.map(i$27=>({object_id:i$27.objectId,object_type:i$27.objectType,attributes:{date:i$27.date}}));VN();dm();C$22();Y_=class extends _$7{constructor(){super(...arguments),this.id=`chat-unread-count.${w$22()}`,this.chatDiscoveryService=C$23(r$23),this.store=C$23(q$19);}getName(){return`chat_unread_count`;}getId(){return this.id;}refresh(){return this.chatDiscoveryService.isChatActiveObservable().pipe(fs$1(100),Is$1(()=>this.store.dispatch(re$7.loadUnreadCountsForSidebar())),Is$1(i$27=>{i$27&&(this.store.dispatch(Ae$5.loadChatRoomsForSidebar()),this.store.dispatch(re$7.loadUnreadCountsDelta({types:[a$27.ConversationView]})));}),q$20(()=>!0));}};VN();dm();Kve=e$17.channels,Qve=e$17.threads;Jve=e$17.channels,Yve=e$17.threads;CM=t$21=>t$21.comments_last_read_at.filter(i$27=>i$27.status===Ga.FOUND).map(i$27=>({...i$27.key,...i$27.data,has_unread:i$27.data.has_unread!==!1}));nm=t$21=>t$21.status!==Ga.FOUND?null:{...t$21.key,...t$21.data,has_unread:t$21.data.has_unread!==!1};VN();dm();VN();dm();hr$3();VN();Uie=(()=>{class t$21{constructor(){this.httpClient=C$23(ve$7),this.applicationEnvironmentService=C$23(Ni),this.store=C$23(q$19),this.apiUrl$=$i([this.applicationEnvironmentService.environment$,this.store.select(o$30)]).pipe(F$22(),oe$13(([,e$19])=>!!e$19),q$20(([{apiUrlBadgingService:e$19},r$34])=>`${e$19}/workspaces/${r$34}/badging/badge_count`));}getChatBadgeCountAggregate(){return this.makeRequest(e$19=>this.httpClient.get(`${e$19}?badge_type=chat_aggregate`));}getBadgeCountByType(e$19){return this.makeRequest(r$34=>this.httpClient.get(`${r$34}?badge_type=${e$19}`));}makeRequest(e$19){return this.apiUrl$.pipe(Ve$4(1),le$5(e$19));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();qie=(()=>{class t$21{constructor(){this.badgeCountService=C$23(Uie),this.commentsV3Service=C$23(te$8),this.store=C$23(q$19);}getRepliesUnreadCounts({limit:e$19=100,rootParentId:r$34,unread:o$32=!0}){return this.commentsV3Service.getUnreadThreadsCounts({limit:e$19,rootParentId:r$34,unread:o$32}).pipe(Mu(()=>this.store.select(o$30)),q$20(([s$25,n$46])=>zie(s$25,n$46)));}getUnreadThreadsCounts(){return this.badgeCountService.getBadgeCountByType(`unread_threads`).pipe(q$20(e$19=>[Hie(e$19)]));}getUnreadCountsForSidebar(){return this.badgeCountService.getChatBadgeCountAggregate().pipe(q$20(e$19=>Wie(e$19)));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Kie=e$17.channels,Qie=(()=>{class t$21{constructor(){this.actions=C$23(Le$4),this.store=C$23(q$19),this.unreadCountService=C$23(qie),this.commentsV3Service=C$23(te$8),this.chatFeatureService=C$23(_t),this.chatDiscoveryService=C$23(r$23),this.refreshService=C$23(te$9),this.websocketService=C$23(Pc),this.browserStatusService=C$23(b$12),this.refreshControllerEnabled$=jS(O$16.FePlatformRefreshController),this.badgingPollingInterval$=this.chatFeatureService.badgingPollingInterval$.pipe(le$5(e$19=>e$19>0?we$3(e$19*1e3):qe$6(e$19))),this.isPageVisibleAndOnline$=fs(this.browserStatusService),this.refreshEmitter$=this.refreshControllerEnabled$.pipe(le$5(e$19=>Ls$2(()=>e$19,this.badgingPollingInterval$,Hi$2(this.badgingPollingInterval$,this.isPageVisibleAndOnline$,this.websocketService.onConnected().pipe(this.addJitterToWebsocketReconnection()))))),this.loadUnreadCountsDelta$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.loadUnreadCountsDelta),Mu(()=>this.store.select(ct$2)),oi$1(([e$19,r$34])=>this.commentsV3Service.getUnreadCountsSinceLastFetched({lastFetchedAt:e$19.deltaTime?Math.min(e$19.deltaTime,r$34):r$34,types:e$19.types}).pipe(oe$13(o$32=>o$32.length>0),Mu(()=>this.store.select(o$30)),q$20(([o$32,s$25])=>{let n$46=Bie(o$32,s$25);return re$7.loadUnreadCountsDeltaSuccess({lastFetchedAt:Math.max(Nie(n$46),r$34),unreadCounts:n$46,workspaceId:s$25});}),Xo$2(o$32=>(fA(o$32,{feature:`chat`,context:`loadUnreadCountsDelta`}),qe$6(re$7.loadUnreadCountsDeltaFailure()))))))),this.loadRepliesUnreadCounts$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.loadRepliesUnreadCounts),oi$1(e$19=>this.unreadCountService.getRepliesUnreadCounts(e$19).pipe(q$20(r$34=>re$7.loadUnreadCountsSuccess({unreadCounts:r$34})),Xo$2(r$34=>(fA(r$34,{feature:`chat`,context:`loadRepliesUnreadCounts`}),qe$6(re$7.loadUnreadCountsFailure()))))))),this.loadUnreadThreadsCounts$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.loadUnreadThreadsCounts),le$5(()=>this.unreadCountService.getUnreadThreadsCounts().pipe(Mu(()=>[this.store.select(vu),this.store.select(AI.selectEntities)]),q$20(([e$19,r$34,o$32])=>{let s$25=e$19.filter(c$37=>{let m$32=o$32[c$37.objectId];return ti$1(c$37,m$32);}),n$46=new Set(s$25.map(c$37=>c$37?.objectId)),a$30=r$34.reduce((c$37,m$32)=>(m$32&&!n$46.has(m$32.objectId)&&c$37.push({...m$32,badgeCount:0,hasUnread:!1}),c$37),[]);return re$7.loadUnreadCountsSuccess({unreadCounts:[...e$19,...a$30]});}),Xo$2(e$19=>(fA(e$19,{feature:`chat`,context:`loadUnreadThreadsCounts`}),qe$6(re$7.loadUnreadCountsFailure()))))))),this.markLastReadAt$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markLastReadAt),Mu(()=>this.store.select(AI.selectEntities)),oe$13(([e$19,r$34])=>Vie(e$19,r$34)),q$20(([e$19])=>e$19),Z$12(e$19=>{let r$34=jie(e$19);return this.commentsV3Service.markLastReadAtBulk({keys:[r$34],attributes:{date:e$19?.date??Date.now(),override_prior_date:e$19.readStrategy===`READ`}}).pipe(q$20(o$32=>({lastReadAtEntities:CM(o$32)})),Mu(()=>this.store.select(o$30)),Z$12(([{lastReadAtEntities:o$32},s$25])=>{return j$23([re$7.markLastReadAtBulkSuccess({workspaceId:s$25,entities:o$32})]);}),Xo$2(o$32=>(fA(o$32,{feature:`chat`,context:`markLastReadAtBulk`}),qe$6(re$7.markLastReadAtBulkFailure({entityIds:[e$19.objectId]})))));}))),this.markLastReadAtBuffered$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markLastReadAtBuffered),Qs$4(e$19=>e$19.objectId+e$19.parentId+e$19.readStrategy,{duration:e$19=>e$19.pipe(zs$3(250))}),Z$12(e$19=>e$19.pipe(vs$2((r$34,o$32)=>o$32.readStrategy===`READ`?[...r$34,o$32]:o$32.date>(r$34[0]?.date??0)?[o$32]:r$34,[]),fs$1(100))),q$20(e$19=>re$7.markLastReadAt(z$15(e$19[0],`type`))))),this.markLastReadAtBulk$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markLastReadAtBulk),Mu(()=>this.store.select(o$30)),Z$12(([{actions:e$19},r$34])=>{let o$32=Date.now();return this.commentsV3Service.markLastReadAtBulk({keys:Lie(e$19),attributes:{date:o$32,override_prior_date:!0}}).pipe(q$20(s$25=>re$7.markLastReadAtBulkSuccess({workspaceId:r$34,entities:CM(s$25)})),ws$2(re$7.markLastReadAtBulkOptimistic({actions:e$19,workspaceId:r$34,now:o$32})),Xo$2(s$25=>(fA(s$25,{feature:`chat`,context:`markLastReadAtBulk`}),qe$6(re$7.markLastReadAtBulkFailure({entityIds:e$19.map(n$46=>n$46.objectId)})))));}))),this.readMessage$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.readMessage),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>!e$19),q$20(([e$19])=>e$19),this.groupAndFilterReadMessageActions(),Z$12(e$19=>this.readMessage(e$19)))),this.readMessageWithOptimistic$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.readMessage),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>e$19),q$20(([e$19])=>e$19),this.groupAndFilterReadMessageActions(),this.getOptimisticUnreadCountData(),Z$12(e$19=>this.readMessage(e$19.action).pipe(ws$2(re$7.readMessageOptimistically({changes:X_(e$19)})))))),this.markMessageAsRead$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markMessageAsRead),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>!e$19),Z$12(([e$19])=>this.markMessageAsRead(e$19)))),this.markMessageAsReadWithOptimistic$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markMessageAsRead),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>e$19),q$20(([e$19])=>e$19),this.getOptimisticUnreadCountData(),Z$12(e$19=>this.markMessageAsRead(e$19.action).pipe(ws$2(re$7.markMessageAsReadOptimistically({changes:X_(e$19)})))))),this.markMessageAsUnread$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markMessageAsUnread),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>!e$19),Z$12(([e$19])=>this.markMessageAsUnread(e$19)))),this.markMessageAsUnreadWithOptimistic$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markMessageAsUnread),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>e$19),q$20(([e$19])=>e$19),this.getOptimisticUnreadCountData(),Z$12(e$19=>this.markMessageAsUnread(e$19.action).pipe(ws$2(re$7.markMessageAsUnreadOptimistically({changes:bM(e$19)})))))),this.markRoomAsRead$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markRoomAsRead),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>!e$19),Z$12(([e$19])=>this.markRoomAsRead(e$19)))),this.markRoomAsReadWithOptimistic$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markRoomAsRead),Mu(e$19=>[this.chatFeatureService.isChatUnreadCountOptimisticEnabled$,this.store.select(Z$4(e$19.roomId)),this.store.select(Z$4(e$17.channels)),this.store.select(st$5)]),oe$13(([,e$19])=>e$19),Z$12(([e$19,,r$34,o$32,s$25])=>{let n$46=r$34?.badgeCount??0,a$30=Math.max(0,(o$32?.badgeCount??0)-n$46);return this.markRoomAsRead(e$19).pipe(ws$2(re$7.markRoomAsReadOptimistically({changes:{[e$19.roomId]:{lastReadAt:e$19.date,badgeCount:0,hasUnread:!1},[Kie]:{lastReadAt:e$19.date,badgeCount:a$30,hasUnread:s$25>1}}})));}))),this.markRoomAsUnread$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markRoomAsUnread),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>!e$19),Z$12(([e$19])=>this.markRoomAsUnread(e$19)))),this.markRoomAsUnreadWithOptimistic$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markRoomAsUnread),Mu(()=>[this.chatFeatureService.isChatUnreadCountOptimisticEnabled$]),oe$13(([,e$19])=>e$19),Mu(([e$19])=>[this.store.select(Z$4(e$19.roomId)),this.store.select(Z$4(e$17.channels)),this.store.select(ko$1({date:e$19.date,parentId:e$19.roomId})),this.store.select(Lo$1({date:e$19.date,parentId:e$19.roomId,roomId:e$19.roomId}))]),Z$12(([[e$19],r$34,o$32,s$25,n$46])=>{let a$30=(r$34?.badgeCount??0)+n$46,c$37=(o$32?.badgeCount??0)+n$46;return this.markRoomAsUnread(e$19).pipe(ws$2(re$7.markRoomAsUnreadOptimistically({changes:{[e$19.roomId]:{lastReadAt:e$19.date,badgeCount:a$30,hasUnread:s$25},[Kie]:{lastReadAt:e$19.date,badgeCount:c$37,hasUnread:s$25}}})));}))),this.markThreadAsRead$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markThreadAsRead),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>!e$19),Z$12(([e$19])=>this.markThreadAsRead(e$19)))),this.markThreadAsReadWithOptimistic$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markThreadAsRead),Mu(e$19=>[this.chatFeatureService.isChatUnreadCountOptimisticEnabled$,this.store.select(Z$4(e$19.roomId)),this.store.select(Z$4(e$17.threads))]),oe$13(([,e$19])=>e$19),q$20(([e$19])=>e$19),this.getOptimisticUnreadCountData(),Z$12(e$19=>this.markThreadAsRead(e$19.action).pipe(ws$2(re$7.markThreadAsReadOptimistically({changes:X_(e$19)})))))),this.markThreadAsUnread$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markThreadAsUnread),Mu(()=>this.chatFeatureService.isChatUnreadCountOptimisticEnabled$),oe$13(([,e$19])=>!e$19),Z$12(([e$19])=>this.markThreadAsUnread(e$19)))),this.markThreadAsUnreadWithOptimistic$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.markThreadAsUnread),Mu(e$19=>[this.chatFeatureService.isChatUnreadCountOptimisticEnabled$,this.store.select(Z$4(e$19.roomId)),this.store.select(Z$4(e$17.threads))]),oe$13(([,e$19])=>e$19),q$20(([e$19])=>e$19),this.getOptimisticUnreadCountData(),Z$12(e$19=>this.markThreadAsUnread(e$19.action).pipe(ws$2(re$7.markThreadAsUnreadOptimistically({changes:bM(e$19)})))))),this.loadUnreadCountsForSidebar$=Ke$1(()=>this.actions.pipe(Ye$2(re$7.loadUnreadCountsForSidebar),oi$1(()=>this.unreadCountService.getUnreadCountsForSidebar().pipe(Z$12(e$19=>[re$7.loadUnreadCountsForSidebarSuccess({unreadCounts:e$19})]),Xo$2(e$19=>(fA(e$19,{feature:`chat`,context:`loadUnreadCountsForSidebar`}),qe$6(re$7.loadUnreadCountsForSidebarFailure()))))))),this.storeUserUpdateSettings$=Ke$1(()=>this.chatFeatureService.chatFeatureSettings$.pipe(q$20(e$19=>re$7.storeUserUnreadCountsUpdateSettings({settings:e$19})))),this.refreshUnreadCount$=Ke$1(()=>this.refreshEmitter$.pipe(Mu(()=>[this.store.select(AI.selectIds),this.chatFeatureService.isEnabled$,this.isPageVisibleAndOnline$,this.chatDiscoveryService.isChatActiveObservable()]),oe$13(([e$19,r$34,o$32,s$25])=>!o$32||!s$25?!1:typeof e$19==`boolean`?e$19:e$19>0&&r$34.length>0),Die(),Z$12(([,,,,e$19])=>{let r$34=[re$7.loadUnreadCountsForSidebar()];return e$19&&(r$34.push(Ae$5.loadChatRoomsForSidebar()),r$34.push(re$7.loadUnreadCountsDelta({types:[a$27.ConversationView]}))),j$23(r$34);})));}ngrxOnRunEffects(e$19){return this.refreshService.addRefreshStrategy(new Y_(0)),e$19;}addJitterToWebsocketReconnection(){return e$19=>e$19.pipe(oe$13(r$34=>r$34),Mu(()=>this.chatFeatureService.websocketReconnectJitterMaxInMs$),Lr$1(([r$34,o$32])=>qe$6(Math.random()*o$32)),q$20(([r$34])=>r$34),Ve$4(1));}groupAndFilterReadMessageActions(){return e$19=>e$19.pipe(Qs$4(r$34=>r$34.id,{duration:r$34=>r$34.pipe(zs$3(250))}),Z$12(r$34=>r$34.pipe(vs$2((o$32,s$25)=>{let n$46=o$32[0]?.date??0;return s$25.date>n$46?[s$25]:o$32;},[]),fs$1(100))),q$20(r$34=>r$34[0]));}readMessage(e$19){let r$34={object_id:e$19.id,object_type:e$19.objectType},o$32=e$19.objectType===et$6.COMMENT?e$19.id:void 0;return this.commentsV3Service.markLastReadAt({key:r$34,attributes:{date:e$19.date,override_prior_date:e$19.readStrategy===`READ`}}).pipe(Mu(()=>this.store.select(o$30)),q$20(([s$25,n$46])=>{let a$30=nm(s$25);return a$30?re$7.readMessageSuccess({entity:am$1(a$30,n$46)}):re$7.readMessageFailure({roomId:e$19.roomId,threadId:o$32});}),Xo$2(s$25=>(fA(s$25,{feature:`chat`,context:`readMessage`}),qe$6(re$7.readMessageFailure({roomId:e$19.roomId,threadId:o$32})))));}markMessageAsRead(e$19){let r$34={object_id:e$19.id,object_type:e$19.objectType},o$32=e$19.objectType===et$6.COMMENT?e$19.id:void 0;return this.commentsV3Service.markLastReadAt({key:r$34,attributes:{date:e$19.date,override_prior_date:!0}}).pipe(Mu(()=>this.store.select(o$30)),q$20(([s$25,n$46])=>{let a$30=nm(s$25);return a$30?re$7.markMessageAsReadSuccess({entity:am$1(a$30,n$46)}):re$7.markMessageAsReadFailure({roomId:e$19.roomId,threadId:o$32});}),Xo$2(s$25=>(fA(s$25,{feature:`chat`,context:`markMessageAsRead`}),qe$6(re$7.markMessageAsReadFailure({roomId:e$19.roomId,threadId:o$32})))));}markMessageAsUnread(e$19){let r$34={object_id:e$19.id,object_type:e$19.objectType},o$32=e$19.objectType===et$6.COMMENT?e$19.id:void 0;return this.commentsV3Service.markLastReadAt({key:r$34,attributes:{date:e$19.date,override_prior_date:!0}}).pipe(Mu(()=>this.store.select(o$30)),q$20(([s$25,n$46])=>{let a$30=nm(s$25);return a$30?re$7.markMessageAsUnreadSuccess({entity:am$1(a$30,n$46)}):re$7.markMessageAsUnreadFailure({roomId:e$19.roomId,threadId:o$32});}),Xo$2(s$25=>(fA(s$25,{feature:`chat`,context:`markMessageAsUnread`}),qe$6(re$7.markMessageAsUnreadFailure({roomId:e$19.roomId,threadId:o$32})))));}markRoomAsRead(e$19){let r$34={object_id:e$19.roomId,object_type:et$6.VIEW};return this.commentsV3Service.markLastReadAt({key:r$34,attributes:{date:e$19.date,override_prior_date:!0}}).pipe(Mu(()=>this.store.select(o$30)),q$20(([o$32,s$25])=>{let n$46=nm(o$32);return n$46?re$7.markRoomAsReadSuccess({entity:am$1(n$46,s$25)}):re$7.markRoomAsReadFailure({roomId:e$19.roomId});}),Xo$2(o$32=>(fA(o$32,{feature:`chat`,context:`markRoomAsRead`}),qe$6(re$7.markRoomAsReadFailure({roomId:e$19.roomId})))));}markRoomAsUnread(e$19){let r$34={object_id:e$19.roomId,object_type:et$6.VIEW};return this.commentsV3Service.markLastReadAt({key:r$34,attributes:{date:e$19.date,override_prior_date:!0}}).pipe(Mu(()=>this.store.select(o$30)),q$20(([o$32,s$25])=>{let n$46=nm(o$32);return n$46?re$7.markRoomAsUnreadSuccess({entity:am$1(n$46,s$25)}):re$7.markRoomAsUnreadFailure({roomId:e$19.roomId});}),Xo$2(o$32=>(fA(o$32,{feature:`chat`,context:`markRoomAsUnread`}),qe$6(re$7.markRoomAsUnreadFailure({roomId:e$19.roomId})))));}markThreadAsRead(e$19){let r$34={object_id:e$19.id,object_type:et$6.COMMENT};return this.commentsV3Service.markLastReadAt({key:r$34,attributes:{date:e$19.date,override_prior_date:!0}}).pipe(Mu(()=>this.store.select(o$30)),q$20(([o$32,s$25])=>{let n$46=nm(o$32);return n$46?re$7.markThreadAsReadSuccess({entity:am$1(n$46,s$25)}):re$7.markThreadAsReadFailure({roomId:e$19.roomId,threadId:e$19.id});}),Xo$2(o$32=>(fA(o$32,{feature:`chat`,context:`markThreadAsRead`}),qe$6(re$7.markThreadAsReadFailure({roomId:e$19.roomId,threadId:e$19.id})))));}markThreadAsUnread(e$19){let r$34={object_id:e$19.id,object_type:et$6.COMMENT};return this.commentsV3Service.markLastReadAt({key:r$34,attributes:{date:e$19.date,override_prior_date:!0}}).pipe(Mu(()=>this.store.select(o$30)),q$20(([o$32,s$25])=>{let n$46=nm(o$32);return n$46?re$7.markThreadAsUnreadSuccess({entity:am$1(n$46,s$25)}):re$7.markThreadAsUnreadFailure({roomId:e$19.roomId,threadId:e$19.id});}),Xo$2(o$32=>(fA(o$32,{feature:`chat`,context:`markThreadAsUnread`}),qe$6(re$7.markThreadAsUnreadFailure({roomId:e$19.roomId,threadId:e$19.id})))));}getOptimisticUnreadCountData(){return e$19=>e$19.pipe(Mu(r$34=>[this.store.select(Z$4(r$34.id)),this.store.select(Z$4(r$34.roomId)),this.store.select(Z$4(e$17.channels)),this.store.select(Z$4(e$17.threads)),this.store.select($e({date:r$34.date,parentId:r$34.id})),this.store.select(Lo$1({date:r$34.date,parentId:r$34.id,roomId:r$34.roomId}))]),q$20(([r$34,o$32,s$25,n$46,a$30,c$37,m$32])=>({action:r$34,entityUnreadCount:o$32,roomUnreadCount:s$25,channelsUnreadCount:n$46,threadsUnreadCount:a$30,comments:c$37,badgeCounts:m$32})));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();noe=F$23(L0());dm();Ee$4();Zve=f$30.byNamespace(`chat-websockets`);tk=nn({name:`unreadCountsWebsockets`,reducer:sn({pendingWebsockets:new Map()},on(re$7.readMessageOptimistically,re$7.markMessageAsReadOptimistically,re$7.markMessageAsUnreadOptimistically,re$7.markRoomAsReadOptimistically,re$7.markRoomAsUnreadOptimistically,re$7.markThreadAsReadOptimistically,re$7.markThreadAsUnreadOptimistically,(t$21,i$27)=>roe({changes:i$27.changes,state:t$21})),on(re$7.readMessageSuccess,re$7.markMessageAsReadSuccess,re$7.markMessageAsUnreadSuccess,re$7.markRoomAsReadSuccess,re$7.markRoomAsUnreadSuccess,re$7.markThreadAsReadSuccess,re$7.markThreadAsUnreadSuccess,re$7.processWebsocketUnreadCount,re$7.processWebsocketBadgeCount,(t$21,i$27)=>ioe({objectId:i$27.entity.objectId,state:t$21})),on(re$7.loadUnreadCountsDelta,t$21=>({...t$21,pendingWebsockets:new Map()})))});({selectPendingWebsockets:iSe}=tk),oSe=Ue$6(iSe,t$21=>t$21.size===0?[]:Array.from(t$21.values()).flat()),soe=t$21=>Ue$6(oSe,i$27=>i$27.find(e$19=>t$21>e$19));VN();aoe=(()=>{class t$21{constructor(){this.chatFeatureService=C$23(_t),this.websocketConfigService=C$23(E$11),this.websocketOvmService=C$23(M$4),this.websocketV2Service=C$23(G$9),this.syntheticMarkerService=C$23(N$12),this.loggerService=C$23(l$19),this.store=C$23(q$19),this.actions$=C$23(Le$4),this.unreadCountsWsEvent$=Ke$1(()=>this.websocketOvmService.getEventsByType(t$17.ChatLastReadAtUpdated).pipe(Mu(()=>this.store.select(o$30)),oe$13(([e$19,r$34])=>r$34===o$2(e$19).toString()),Is$1(([e$19])=>{ek(Y(e$19),`start`,this.syntheticMarkerService,e$19.client_trace);}),q$20(([e$19])=>({wsUnreadCount:Qe(e$19),clientTrace:e$19.client_trace})),Mu(({wsUnreadCount:e$19})=>[this.store.select(Z$4(e$19.objectId)),this.store.select(Hr$1(e$19.objectId)),this.store.select(kJ(e$19.objectId))]),oe$13(([{wsUnreadCount:e$19},r$34])=>ti$1(e$19,r$34)),Z$12(([{wsUnreadCount:e$19,clientTrace:r$34},o$32,s$25,n$46])=>eoe({wsUnreadCount:e$19,storedUnreadCount:o$32,storedChatRoom:s$25,options:{hasJoined:n$46,clientTrace:r$34},syntheticMarkerService:this.syntheticMarkerService})),Xo$2(e$19=>(fA(e$19,{feature:`chat`,context:`unreadCountsWsEvent`}),qe$6(re$7.loadUnreadCountsFailure()))))),this.trackUnreadCountProcessed$=Ke$1(()=>this.actions$.pipe(Ye$2(re$7.processWebsocketUnreadCount),oe$13(e$19=>!!e$19.context?.isBecomingUnread),Is$1(e$19=>{let r$34=e$19.entity.objectId;this.syntheticMarkerService.mark(`chat.room.unread_count_processed.${r$34}`,{entityId:r$34,client_trace:e$19.context?.clientTrace}).setGenericName(`chat.room.unread_count_processed`);})),{dispatch:!1}),this.unreadThreadCountWsEvent$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.BadgeCountUpdated).pipe(Mu(()=>this.store.select(o$30)),oe$13(([e$19,r$34])=>r$34===String(e$19.payload.workspace_id)&&Jie(e$19.payload.badge_type)),q$20(([e$19])=>toe(e$19)),Mu(({objectId:e$19})=>[this.store.select(Z$4(e$19))]),oe$13(([e$19,r$34])=>il(e$19,r$34)),q$20(([e$19,r$34])=>re$7.processWebsocketBadgeCount({entity:{...r$34,...e$19}})),Xo$2(e$19=>(fA(e$19,{feature:`chat`,context:`unreadThreadCountWsEvent`}),qe$6(re$7.loadUnreadCountsFailure()))))),this.validateHashValues$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.BadgeCountUpdated).pipe(Mu(()=>[this.chatFeatureService.isUnreadCountXorHashCheckEnabled$,this.store.select(o$30)]),oe$13(([e$19,r$34,o$32])=>r$34&&o$32===String(e$19.payload.workspace_id)),q$20(([e$19])=>Xie(e$19.payload.state_consistency_hashes)),Mu(e$19=>[this.store.select(dt$2(e$19))]),q$20(([e$19,r$34])=>Yie(e$19,r$34)),oe$13(e$19=>e$19!==-1),Is$1(e$19=>{this.loggerService.log(`BE/FE badge count hashes out of sync: ${e$19}`);}),q$20(e$19=>re$7.loadUnreadCountsDelta({deltaTime:e$19})))),this.lostWebsocketPollingInterval$=Ke$1(()=>this.chatFeatureService.lostWebsocketPollingInterval$.pipe(le$5(r$34=>we$3(r$34))).pipe(Mu(()=>[this.store.select(soe((0,noe.now)())),this.chatFeatureService.lostWebsocketPollingInterval$]),oe$13(([,r$34])=>!!r$34),F$22(),q$20(([r$34,o$32,s$25])=>(this.loggerService.log(`BE/FE lostWebsocketPollingInterval: ${o$32}`),(o$32??0)-s$25)),Z$12(r$34=>[re$7.purgePendingStates(),re$7.loadUnreadCountsForSidebar(),re$7.loadUnreadCountsDelta({deltaTime:r$34})])));}ngrxOnRunEffects(e$19){return[t$17.ChatLastReadAtUpdated,t$17.BadgeCountUpdated].forEach(r$34=>{let o$32=this.websocketConfigService.createConfiguration(r$34).disableJitter();this.websocketConfigService.addConfiguration(o$32);}),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`unread_count_store_module`,`load`);coe=(()=>{class t$21{constructor(e$19){if(e$11(`unread_count_store_module`,`construct`),e$19)throw new Error(`UnreadCountStoreModule is already loaded. Import it in the AppModule only`);k$5(Cx,{version:2,conditional:!0});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(t$21,12));};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(AI),Je$4.forFeature([Qie,aoe,$ie])]});}}return t$21;})();VN();e$11(`unread_count_websocket_store_module`,`load`);moe=(()=>{class t$21{constructor(e$19){if(e$11(`unread_count_websocket_store_module`,`construct`),e$19)throw new Error(`UnreadCountWebsocketStoreModule is already loaded. Import it in the AppModule only`);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(t$21,12));};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(tk)]});}}return t$21;})();dm();hr$3();VN();n$24(`checklist_store_module`,`checklist_effects`,`load`);doe=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.action$=e$19,this.checklistService=r$34,this.store=o$32,this.sharedDataService=s$25,this.toastService=n$46,this.getTaskChecklists$=Ke$1(()=>this.action$.pipe(Ye$2(c$14),le$5(a$30=>this.checklistService.getTaskChecklists(a$30.taskId).pipe(q$20(c$37=>o$17({mapId:a$30.taskId,checklists:c$37.checklists})))))),this.deleteChecklist$=Ke$1(()=>this.action$.pipe(Ye$2(C$6),le$5(a$30=>a$30.localOnly?z$18:this.checklistService.deleteChecklist(a$30.checklist?.id).pipe(q$20(()=>i$7({mapId:a$30.mapId,checklist:a$30.checklist})))))),this.showUndoDeleteChecklistToast$=Ke$1(()=>this.action$.pipe(Ye$2(i$7),q$20(a$30=>{let c$37={itemId:a$30.mapId,id:a$30.checklist?.id,description:`Checklist`,type:`checklistUndo`,undoBody:{checklistId:a$30.checklist?.id,itemId:a$30.mapId,body:{checklist_id:a$30.checklist?.id}},undoHandler:()=>{this.store.dispatch(l$13({mapId:a$30.mapId,checklist:a$30.checklist}));},deleteAction:!0};this.sharedDataService.addUndoItem(c$37);})),{dispatch:!1}),this.undoDeleteChecklist$=Ke$1(()=>this.action$.pipe(Ye$2(l$13),Mu(({mapId:a$30})=>[this.store.select(Le$7(m$26.TaskChecklistLimit)),this.store.select(ve$2(a$30))]),le$5(([{mapId:a$30,checklist:c$37},m$32,l$26])=>{let g$19=Number(m$32);return l$26>=g$19?qe$6(q$2({checklistsLimit:g$19,checklistsCount:l$26})):this.checklistService.undoDeleteChecklist(c$37?.id,{checklist_id:c$37.id}).pipe(q$20(()=>I$6({mapId:a$30,checklist:c$37})));}))),this.editChecklist$=Ke$1(()=>this.action$.pipe(Ye$2(k$6),le$5(a$30=>a$30.localOnly?z$18:this.checklistService.editCheckList(a$30.id,a$30.changes))),{dispatch:!1}),this.moveChecklist$=Ke$1(()=>this.action$.pipe(Ye$2(n$13),Mu(()=>this.store.select(C$5)),le$5(([a$30,c$37])=>{let m$32=[],l$26=c$37[a$30.mapId],g$19=ee$3(a$30.direction,a$30.id,l$26,a$30.originalOrderIndex);return m$32.push(k$6({id:a$30.id,mapId:a$30.mapId,changes:{orderindex:g$19},localOnly:a$30.localOnly})),j$23(m$32);}))),this.bulkEditItems$=Ke$1(()=>this.action$.pipe(Ye$2(E$6),le$5(a$30=>a$30.localOnly?z$18:this.checklistService.bulkEditCheckListItems({checklist_item_ids:a$30.ids,...a$30.changes}).pipe(q$20(()=>a$30.changes?.resolved!==void 0?S$3():r$13()))))),this.bulkEditItemAssignees$=Ke$1(()=>this.action$.pipe(Ye$2(d$6),le$5(a$30=>{if(a$30.localOnly)return z$18;let c$37={},m$32=ne$1(a$30.checklist);return a$30.assignee&&(c$37={checklist_item_ids:m$32,assignee:a$30.assignee}),a$30.groupAssignee&&(c$37={checklist_item_ids:m$32,group_assignee:a$30.groupAssignee}),this.checklistService.bulkEditCheckListItems(c$37);})),{dispatch:!1}),this.editItem$=Ke$1(()=>this.action$.pipe(Ye$2(T$12),le$5(a$30=>a$30.localOnly?z$18:this.checklistService.editChecklistItem(a$30.id,a$30.changes).pipe(q$20(()=>a$30.changes.resolved!==void 0?m$12():h()))))),this.editItemAssignee$=Ke$1(()=>this.action$.pipe(Ye$2(p$9),le$5(a$30=>{if(a$30.localOnly)return z$18;let c$37={};return a$30.assignee&&(c$37={assignee:a$30.assignee}),a$30.groupAssignee&&(c$37={group_assignee:a$30.groupAssignee}),this.checklistService.editChecklistItem(a$30.id,c$37).pipe(q$20(({checklist:m$32})=>a$7({mapId:a$30.mapId,assigneeId:a$30.assignee,groupAssigneeId:a$30.groupAssignee,checklist:m$32})));}))),this.updateUserWatchersOnChecklistUpdated$=Ke$1(()=>this.action$.pipe(Ye$2(a$7),oe$13(({assigneeId:a$30})=>!!a$30),Mu(({mapId:a$30})=>this.store.select(y$5(a$30))),q$20(([{assigneeId:a$30,checklist:c$37},m$32])=>{let l$26=[...m$32],g$19=_M(c$37.items,a$30);return g$19&&l$26.push(g$19),e$5({taskId:c$37.task_id,users:l$26});}))),this.updateUserGroupWatchersOnChecklistUpdated$=Ke$1(()=>this.action$.pipe(Ye$2(a$7),oe$13(({groupAssigneeId:a$30})=>!!a$30),Mu(({mapId:a$30,groupAssigneeId:c$37})=>[this.store.select(S$4(a$30)),this.store.select(C$16(c$37||``))]),q$20(([{checklist:a$30},c$37,m$32])=>a$6({taskId:a$30.task_id,userGroups:[...c$37,m$32]})))),this.deleteItem$=Ke$1(()=>this.action$.pipe(Ye$2(L$2),le$5(a$30=>a$30.localOnly?z$18:this.checklistService.deleteItem(a$30?.item?.id).pipe(le$5(c$37=>{let m$32=[];return m$32.push(H$2({mapId:a$30.mapId,item:a$30.item,checklistId:a$30.checklistId})),m$32.push(x$8()),j$23(m$32);}))))),this.showUndoDeleteItemToast$=Ke$1(()=>this.action$.pipe(Ye$2(H$2),q$20(a$30=>{let c$37={itemId:a$30.mapId,id:a$30.item?.id,description:`ChecklistItem`,type:`checklistItemUndo`,undoBody:{checklistId:a$30.checklistId,itemId:a$30.mapId,body:{checklist_id:[a$30.item?.id]}},undoHandler:()=>{this.store.dispatch(K$1({mapId:a$30.mapId,checklistId:a$30.checklistId,item:a$30.item}));},deleteAction:!0};this.sharedDataService.addUndoItem(c$37);})),{dispatch:!1}),this.undoDeleteItem$=Ke$1(()=>this.action$.pipe(Ye$2(K$1),le$5(a$30=>{let c$37={checklist_id:[a$30.item.id]};return this.checklistService.undoDeleteItem(a$30.item?.id,c$37);})),{dispatch:!1}),this.createItem$=Ke$1(()=>this.action$.pipe(Ye$2(u$9),le$5(a$30=>{if(a$30.localOnly)return z$18;let c$37=ie$1(a$30.body),l$26={items:[z$15(c$37,`id`)]};return this.checklistService.createItem(a$30.checklistId,l$26).pipe(le$5(g$19=>{let f$33=[];return f$33.push(v$6({mapId:a$30.mapId,checklistId:a$30.checklistId,item:g$19?.items?.[0],fakeItem:c$37})),j$23(f$33);}),Xo$2(()=>qe$6(b$3({mapId:a$30.mapId,checklistId:a$30.checklistId,fakeItem:c$37}))));}))),this.updateUserWatchersOnChecklistCreated$=Ke$1(()=>this.action$.pipe(Ye$2(v$6),oe$13(({item:a$30})=>!!a$30.assignee),Mu(({mapId:a$30})=>this.store.select(y$5(a$30))),q$20(([{item:a$30,mapId:c$37},m$32])=>e$5({taskId:c$37,users:[...m$32,a$30.assignee]})))),this.updateUserGroupWatchersOnChecklistCreated$=Ke$1(()=>this.action$.pipe(Ye$2(v$6),oe$13(({item:a$30})=>!!a$30.group_assignee),Mu(({mapId:a$30})=>this.store.select(S$4(a$30))),q$20(([{item:a$30,mapId:c$37},m$32])=>a$6({taskId:c$37,userGroups:[...m$32,a$30.group_assignee]})))),this.createMultipleItem$=Ke$1(()=>this.action$.pipe(Ye$2(z$6),le$5(a$30=>{let c$37={items:a$30.items};return this.checklistService.createItem(a$30.checklistId,c$37).pipe(q$20(m$32=>J$4({mapId:a$30.mapId,checklistId:a$30.checklistId,items:m$32?.items,fakeItems:a$30.items})));}))),this.createChecklistWithLimitCheck$=Ke$1(()=>this.action$.pipe(Ye$2(D$2),Mu(({mapId:a$30})=>[this.store.select(Le$7(m$26.TaskChecklistLimit)),this.store.select(ve$2(a$30))]),q$20(([a$30,c$37,m$32])=>{let l$26=Number(c$37),{mapId:g$19,body:f$33,localOnly:h$15}=a$30;return m$32>=l$26?q$2({checklistsLimit:l$26,checklistsCount:m$32}):W$3({mapId:g$19,body:f$33,localOnly:h$15});}))),this.showChecklistLimitReachedToast$=Ke$1(()=>this.action$.pipe(Ye$2(q$2),Is$1(()=>{this.toastService.addToastItem({isV3Toast:!0,icon:`warning`,iconClass:`danger`,title:"Maximum number of checklists on a task exceeded"});})),{dispatch:!1}),this.createChecklist$=Ke$1(()=>this.action$.pipe(Ye$2(W$3),le$5(a$30=>a$30.localOnly?z$18:this.checklistService.createChecklist(a$30.mapId,a$30.body).pipe(q$20(c$37=>w$7({mapId:a$30.mapId,checklist:c$37.checklist,fakeChecklist:a$30.body})))))),this.createTaskChecklistFromTemplate$=Ke$1(()=>this.action$.pipe(Ye$2(A$6),le$5(a$30=>this.checklistService.createChecklistFromTemplate(a$30.id,{task_id:a$30.taskId}).pipe(q$20(()=>c$14({taskId:a$30.taskId,silent:!0})))))),this.moveItemToNewParent$=Ke$1(()=>this.action$.pipe(Ye$2(U$3),le$5(a$30=>a$30.localOnly?z$18:this.checklistService.moveItem(a$30.item.id,a$30.body))),{dispatch:!1}),this.addChecklistTemplateToMapId=Ke$1(()=>this.action$.pipe(Ye$2(Q$3),Mu(()=>this.store.select(C$5)),le$5(([a$30,c$37])=>this.checklistService.getChecklistFromTemplateId(a$30.id).pipe(le$5(m$32=>{let l$26=[];return c$37?.[a$30.mapId]?.length===1&&c$37?.[a$30.mapId]?.[0].items?.length===0&&l$26.push(C$6({mapId:a$30.mapId,checklist:c$37?.[a$30.mapId]?.[0],localOnly:!0})),l$26.push(W$3({mapId:a$30.mapId,body:m$32.checklists[0],localOnly:!0})),j$23(l$26);}))))),this.updateTaskCacheAfterLastChecklistDeleted$=Ke$1(()=>this.action$.pipe(Ye$2(C$6),Mu(({mapId:a$30})=>[this.store.select(C$5),this.store.select(Nt$3(a$30))]),oe$13(([{mapId:a$30},c$37])=>c$37[a$30]?.length===0),q$20(([,,a$30])=>new x$21([{...a$30,checklists:[]}]))));}ngrxOnRunEffects(e$19){return n$24(`checklist_store_module`,`checklist_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(C$2),ge$10(q$19),ge$10(I$18),ge$10(q$14));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();hr$3();dm();VN();hoe=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.modalService=r$34,this.title=``,this.body=``,this.buttonText=``,this.commentCopy=``,this.shouldSetTaskWatcher$=this.store.select(Pn);}cancel(){this.modalService.close();}postCommentFromChecklistItem(){this.shouldSetTaskWatcher$.pipe(Ve$4(1)).subscribe(e$19=>{let r$34=poe(this.commentCopy,this.user,this.newTaskId,this.newTaskIds);this.store.dispatch(s$16({comment:r$34,commentDto:j$6(r$34,``),taskId:this.taskId,delta:{},optimisticPendingState:{commentId:``,historyId:``},pendingId:n$3(),shouldSetTaskWatcher:e$19})),this.modalService.close();});}static{this.fac=function(r$34){return new(r$34||t$21)(br(q$19),br(V$10));};}static{this.cmp=_E({type:t$21,selectors:[[`cu-add-task-from-checklist`]],inputs:{taskId:`taskId`,newTaskId:`newTaskId`,newTaskIds:`newTaskIds`,user:`user`,title:`title`,body:`body`,buttonText:`buttonText`,commentCopy:`commentCopy`},decls:2,vars:4,consts:[[3,`cancel`,`confirm`,`theme`,`heading`,`confirmButtonLabel`]],template:function(r$34,o$32){r$34&1&&(Kc$3(0,`cu-confirmation-modal`,0),Fg(`cancel`,function(){return o$32.cancel();})(`confirm`,function(){return o$32.postCommentFromChecklistItem();}),NT(1),Jc$1()),r$34&2&&(dg(`theme`,`primary`)(`heading`,o$32.title)(`confirmButtonLabel`,o$32.buttonText),vv(),ol(` `,o$32.body,`
`));},dependencies:[wt$5],encapsulation:2,changeDetection:0});}}return t$21;})();VN();n$24(`checklist_store_module`,`checklist_conversion_effects`,`load`);goe=(()=>{class t$21{constructor(e$19,r$34,o$32){this.action$=e$19,this.injector=r$34,this.modalService=o$32,this.pendingData={},this.checklistItemToSubtaskEffect=Ke$1(()=>this.action$.pipe(Ye$2(G$2),q$20(({createdFrom:s$25,item:n$46,parentId:a$30,subcategoryId:c$37,user:m$32})=>{let l$26=`PENDING_${t$15()}`,g$19={name:n$46.name,id:l$26,parent:a$30,subcategoryId:c$37};return this.pendingData[l$26]={user:m$32},e$6({createdFrom:s$25,subcategoryId:c$37,taskDto:g$19,parentId:a$30,viaSlashComand:!1});}))),this.checklistToSubtasksEffect=Ke$1(()=>this.action$.pipe(Ye$2(X$1),q$20(({createdFrom:s$25,items:n$46,parentId:a$30,subcategoryId:c$37,user:m$32,categoryId:l$26,projectId:g$19})=>{return A$8({subcategoryId:c$37,taskDtos:n$46.filter(h$15=>!h$15.resolved).map(h$15=>{let I$25=`PENDING_${t$15()}`,A$22=typeof h$15.assignee==`object`?h$15.assignee?.id:h$15.assignee.toString();return this.pendingData[I$25]={user:m$32},{assignees:A$22?[A$22]:[],categoryId:l$26,id:I$25,group_assignees:[],name:h$15.name,parent:a$30,projectId:g$19,subcategoryId:c$37};}),parentId:a$30,viaSlashComand:!1,createdFrom:s$25,user:m$32});}))),this.checklistItemToSubtaskSuccessEffect=Ke$1(()=>this.action$.pipe(Ye$2(u$12),oe$13(({pendingId:s$25})=>!!this.pendingData[s$25]),q$20(({task:s$25,pendingId:n$46,parentId:a$30})=>{let m$32=this.pendingData[n$46].user;return this.pendingData[n$46]=void 0,O$6({user:m$32,taskId:a$30,newTaskId:s$25.id,isSubtask:!0});}))),this.checklistToSubtaskSuccessEffect=Ke$1(()=>this.action$.pipe(Ye$2(v$9),oe$13(({pendingIds:s$25})=>!!s$25?.some(n$46=>!!this.pendingData[n$46])),q$20(({parentId:s$25,tasks:n$46,user:a$30})=>{let c$37=(n$46?.length?n$46:[]).map(m$32=>m$32.id);return c$37.forEach(m$32=>{this.pendingData[m$32]=void 0;}),O$6({user:a$30,newTaskIds:c$37,isSubtask:!0,taskId:s$25});}))),this.checklistItemToSubtaskFailureEffect=Ke$1(()=>this.action$.pipe(Ye$2(k$9),oe$13(({pendingId:s$25})=>!!this.pendingData[s$25]),Is$1(({pendingId:s$25})=>{this.pendingData[s$25]=void 0;})),{dispatch:!1}),this.openAddTaskFromChecklistComponentModalEffect=Ke$1(()=>this.action$.pipe(Ye$2(O$6),Is$1(s$25=>{this.modalService.openComponent(hoe,this.injector,{blank:!0,bodyModifier:`cu-modal__body_no-min-height`,dialogModifier:`cu-modal__dialog_padding-0 cu-modal_sm`,modifier:`cu-modal__add-task-from-comment-to-thread`},uoe(s$25));})),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`checklist_store_module`,`checklist_conversion_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(oe$12),ge$10(V$10));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();n$24(`checklist_store_module`,`checklist_websocket_effects`,`load`);yoe=(()=>{class t$21{constructor(e$19,r$34,o$32){this.action$=e$19,this.checklistService=r$34,this.store=o$32,this.handleChecklistWebsocketEventEffect=Ke$1(()=>this.action$.pipe(Ye$2(R$4),le$5(({event:s$25})=>{let n$46=[];switch(s$25.method){case d$15.ChecklistCreated:n$46.push(g$7({event:s$25}));break;case d$15.ChecklistDeleted:n$46.push(F$8({event:s$25}));break;case d$15.ChecklistEdited:n$46.push(B$2({event:s$25}));break;case d$15.ChecklistItemEdited:n$46.push(y$4({event:s$25}));break;case d$15.ChecklistItemDeleted:n$46.push(N$3({event:s$25}));break;case d$15.ChecklistItemMoved:n$46.push(f$10({event:s$25}));break;default:break;}return j$23(n$46);}))),this.handleChecklistCreatedWebsocketEventEffect=Ke$1(()=>this.action$.pipe(Ye$2(g$7),Mu(()=>this.store.select(C$5)),q$20(([{event:s$25},n$46])=>{let a$30=n$46[s$25.task_id]??[],c$37=s$25.checklist?[s$25.checklist]:[];return o$17({mapId:s$25.task_id,checklists:[...a$30,...c$37]});}))),this.handleChecklistEditedWebsocketEventEffect=Ke$1(()=>this.action$.pipe(Ye$2(B$2),q$20(({event:s$25})=>k$6({mapId:s$25.task_id,changes:s$25.checklist,id:s$25.checklist.id,localOnly:!0})))),this.handleChecklistDeletedWebsocketEventEffect=Ke$1(()=>this.action$.pipe(Ye$2(F$8),this.concatLatestChecklist(),q$20(([{event:s$25},n$46])=>C$6({checklist:n$46,localOnly:!0,mapId:s$25.task_id})))),this.handleChecklistItemDeletedWebsocketEventEffect=Ke$1(()=>this.action$.pipe(Ye$2(N$3),this.concatLatestChecklist(),q$20(([s$25,n$46])=>{return{action:s$25,checklist:n$46,checklistItem:w$8(n$46,s$25.event.checklist_item_id)};}),oe$13(({checklistItem:s$25})=>!!s$25),q$20(({action:s$25,checklistItem:n$46})=>L$2({mapId:s$25.event.task_id,item:n$46,checklistId:s$25.event.checklist_id,localOnly:!0})))),this.handleChecklistItemEditedWebsocketEventEffect=Ke$1(()=>this.action$.pipe(Ye$2(y$4),q$20(({event:s$25})=>T$12({mapId:s$25.task_id,id:s$25.checklist_item.id,changes:s$25.checklist_item,checklistId:s$25.checklist_id,localOnly:!0})))),this.handleChecklistItemEditedWebsocketEventCacheEffect=Ke$1(()=>this.action$.pipe(Ye$2(y$4),Mu(()=>[this.store.select(p$24)]),q$20(([{event:s$25},n$46])=>({event:s$25,cache:n$46})),oe$13(({cache:s$25,event:n$46})=>!!s$25[n$46.task_id]),q$20(({event:s$25,cache:n$46})=>{let a$30=n$46[s$25.task_id],c$37=a$30?.checklist_counts?.resolved??0,m$32=a$30?.checklist_counts?.unresolved??0,l$26={id:s$25.task_id,checklist_counts:{resolved:s$25.checklist_item.resolved?c$37+1:c$37-1,unresolved:s$25.checklist_item.resolved?m$32-1:m$32+1}};return u$28.updateTasksState(0,[l$26],`handleChecklistItemEditedWebsocket`,void 0,!1,!1);}))),this.handleChecklistItemMovedWebsocketEventMoveEffect=Ke$1(()=>this.action$.pipe(Ye$2(f$10),this.concatLatestChecklist(),q$20(([s$25,n$46])=>({checklistItem:w$8(n$46,s$25.event.checklist_item.id),action:s$25,checklist:n$46})),oe$13(({checklistItem:s$25,action:n$46})=>!!s$25&&!!n$46.event.checklist_item.checklist_id),q$20(({action:s$25,checklistItem:n$46})=>U$3({item:n$46,body:{checklist_id:s$25.event.checklist_item.checklist_id,orderindex:s$25.event.checklist_item.orderindex,parent:s$25.event.checklist_item.parent},mapId:s$25.event.task_id,localOnly:!0})))),this.handleChecklistItemMovedWebsocketEventDeleteEffect=Ke$1(()=>this.action$.pipe(Ye$2(f$10),this.concatLatestChecklist(),q$20(([s$25,n$46])=>{return{action:s$25,checklist:n$46,checklistItem:w$8(n$46,s$25.event.checklist_item.id)};}),oe$13(({action:s$25})=>s$25.event.checklist_item.checklist_id!==s$25.event.old_checklist_id),q$20(({action:s$25})=>L$2({mapId:s$25.event.task_id,item:s$25.event.checklist_item,checklistId:s$25.event.old_checklist_id,localOnly:!0}))));}ngrxOnRunEffects(e$19){return n$24(`checklist_store_module`,`checklist_websocket_effects`,`run`),e$19;}concatLatestChecklist(){return e$19=>e$19.pipe(Mu(({event:r$34})=>this.store.select(we(r$34.old_checklist_id??r$34.checklist_id??``,r$34.task_id)).pipe(R$20())));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(C$2),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`checklist_store_module`,`load`);voe=(()=>{class t$21{constructor(){e$11(`checklist_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[rn.forFeature(`checklist`,ie),Je$4.forFeature([doe,yoe,goe])]});}}return t$21;})();VN();dm();hr$3();VN();hr$3();VN();Soe=(()=>{class t$21{constructor(){this.broadcastChannelService=C$23(wr);}listen(e$19,r$34){return this.broadcastChannelService.listen(this.getChannelId(e$19,r$34)).pipe(q$20(o$32=>o$32.value));}broadcastChanges(e$19,r$34,o$32){this.broadcastChannelService.postMessage(this.getChannelId(e$19,r$34),{type:`commentDraftsUpdated`,payload:{drafts:o$32}});}broadcastDelete(e$19,r$34,o$32){this.broadcastChannelService.postMessage(this.getChannelId(e$19,r$34),{type:`commentDraftDeleted`,payload:{id:o$32}});}getChannelId(e$19,r$34){return`comment-drafts-${e$19}-${r$34}`;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();n$24(`comment_draft_broadcast_module`,`comment_draft_broadcast_effects`,`load`);Coe=(()=>{class t$21{constructor(){this.broadcastService=C$23(Soe),this.commentDraftsState=C$23(ul),this.actions$=C$23(Le$4),this.logger=f$30.byNamespace(`drafts`),this.workspaceId$=this.commentDraftsState.getWorkspaceId(),this.userId$=n$25(),this.listenRemote$=$i({workspaceId:this.workspaceId$.pipe(R$20()),userId:this.userId$.pipe(R$20())}).pipe(As$3(this.commentDraftsState.getDrafts()),le$5(([e$19,r$34])=>(this.lastDrafts=r$34,this.broadcastService.listen(e$19.workspaceId,e$19.userId)))),this.lastDrafts=[],this.sendDraftsChanged$=Ke$1(()=>this.listenLocal(Ce$3.updateDraft).pipe(Z$12(()=>this.broadcastDrafts())),{dispatch:!1}),this.sendDraftDeleted$=Ke$1(()=>this.listenLocal(Ce$3.deleteDraftSuccess).pipe(Z$12(({id:e$19})=>this.broadcastDelete(e$19))),{dispatch:!1}),this.receiveDraftsChanged$=Ke$1(()=>this.listenRemote$.pipe(Is$1(e$19=>{e$19.type===`commentDraftsUpdated`&&(this.logger.log(`Received broadcast for updated drafts`,e$19.payload),this.commentDraftsState.updateDrafts(e$19.payload.drafts,Cr$1.Broadcast));})),{dispatch:!1}),this.receiveDraftDeleted$=Ke$1(()=>this.listenRemote$.pipe(Is$1(e$19=>{e$19.type===`commentDraftDeleted`&&(this.logger.log(`Received broadcast for deleted draft`,e$19.payload),this.commentDraftsState.deleteDraftById(e$19.payload.id,Cr$1.Broadcast));})),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`comment_draft_broadcast_module`,`comment_draft_broadcast_effects`,`run`),e$19;}listenLocal(e$19){return this.actions$.pipe(Ye$2(e$19),oe$13(r$34=>r$34.source===Cr$1.Local),v$19(100));}broadcastDelete(e$19){return this.workspaceId$.pipe(As$3(this.userId$),Ve$4(1),q$20(([r$34,o$32])=>{r$34&&o$32&&(this.logger.log(`Broadcasting delete for draft`,{id:e$19,workspaceId:r$34,userId:o$32}),this.broadcastService.broadcastDelete(r$34,o$32,e$19));}));}broadcastDrafts(){return this.commentDraftsState.getDrafts().pipe(As$3(this.workspaceId$,this.userId$),Ve$4(1),q$20(([e$19,r$34,o$32])=>{if(!r$34||!o$32)return;let s$25=boe(this.lastDrafts,e$19);this.lastDrafts=e$19,this.logger.log(`Broadcasting drafts`,{updated:s$25.updated,removed:s$25.removed,workspaceId:r$34,userId:o$32}),s$25.updated.length&&this.broadcastService.broadcastChanges(r$34,o$32,s$25.updated),s$25.removed.length&&s$25.removed.forEach(n$46=>{this.broadcastService.broadcastDelete(r$34,o$32,n$46);});}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`comment_draft_broadcast_module`,`load`);_oe=(()=>{class t$21{constructor(){e$11(`comment_draft_broadcast_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[Je$4.forFeature([Coe])]});}}return t$21;})();VN();dm();hr$3();VN();dm();hr$3();cSe=`new`,mSe={[m$29]:e$17.posts,composer:e$17.launchpad};za=function(t$21){return t$21.Parsed=`parsed`,t$21.Empty=`empty`,t$21.Invalid=`invalid`,t$21;}(za||{});lSe=t$21=>!!(typeof t$21==`object`&&t$21!==null&&`content`in t$21&&t$21.content),Ioe=(t$21,i$27)=>{let e$19=koe(t$21);if(!e$19)return za.Invalid;try{let r$34=i$27(t$21);return lSe(r$34)?u$30(r$34.content)?za.Empty:{id:e$19.key,timestamp:r$34.timestamp??new Date(0).getTime(),workspaceId:e$19.teamId,clientKey:t$21,comment:{id:e$19.id,comment:r$34.content,parent:e$19.replyToId??e$19.roomId,assignee:void 0,type:e$19.replyToId?a$27.Comment:a$27.ConversationView,root_parent_type:a$27.ConversationView,root_parent_id:e$19.roomId,comment_type:r$34.additionalCommentInfo?.isPost?s$17.POST:void 0,comment_type_data:r$34.additionalCommentInfo?.isPost?{subtype:{id:r$34.additionalCommentInfo.commentSubtype??``,name:``},title:r$34.additionalCommentInfo.title,cover_image:r$34.additionalCommentInfo.coverImage}:void 0}}:za.Invalid;}catch(r$34){return fA(r$34,{feature:`chat`,origin:`drafts`}),za.Invalid;}};Eoe=(t$21,i$27,e$19)=>{let r$34=[];return{drafts:t$21.map(s$25=>{let n$46=Ioe(Yp(s$25),()=>e$19.get(s$25));return Toe(n$46)?(za.Empty===n$46&&r$34.push(s$25),null):n$46.workspaceId&&n$46.workspaceId!==i$27?null:n$46;}).filter(s$25=>!!s$25),empty:r$34};};Aoe=`last-saved-comment`;VN();xoe=(()=>{class t$21{constructor(){this.localStorage=s$23(),this.taskDraftService=C$23(gl),this.draftFixer=C$23(W$1),this.commentDraftStateService=C$23(ul),this.logger=f$30.byNamespace(`drafts`),this.teamId$=Jc();}getFixedLocalStorageDrafts(e$19){return this.commentDraftStateService.getHydratedKeys().pipe(Ve$4(1),q$20(r$34=>this.collectLocalStorageDrafts(e$19,r$34)),Is$1(r$34=>{this.commentDraftStateService.markHydrated(r$34.map(o$32=>o$32.clientKey));}));}removeDraft(e$19){this.commentDraftStateService.getDraftById(e$19).pipe(Ve$4(1),As$3(this.teamId$)).subscribe(([r$34,o$32])=>{if(!r$34){this.logger.warn(`Attempted to remove a draft that does not exist`,e$19);return;}this.localStorage.remove(r$34.clientKey),this.localStorage.remove(`ls${r$34.clientKey}`),this.localStorage.remove(`${r$34.clientKey}|${o$32}`),this.localStorage.remove(`ls${r$34.clientKey}|${o$32}`);});}hydrateDraft(e$19){return I$24(this,null,function*(){let r$34=yield Li$1(this.commentDraftStateService.getDraftById(e$19.id));return r$34?(this.logger.log(`skipping hydration due to existing draft`,e$19.id),r$34):(yield Li$1(this.commentDraftStateService.hasHydratedFromLocalStorage(e$19.id)))?(this.logger.log(`skipping hydration due to already hydrated draft`,e$19.id),null):(this.logger.log(`hydrating draft`,e$19.id),Li$1(this.draftFixer.getFixedDraft(e$19)));});}collectLocalStorageDrafts(e$19,r$34){let o$32=this.localStorage.keys().filter(c$37=>!r$34.includes(Yp(c$37))),s$25=Eoe(o$32,e$19,this.localStorage),n$46=Moe(o$32,this.localStorage),a$30=Foe(this.taskDraftService.getLegacyDrafts());for(let c$37 of s$25.empty)this.localStorage.remove(c$37);return[...s$25.drafts,...n$46,...a$30];}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();n$24(`comment_drafts_store_module`,`comment_drafts_effects`,`load`);Ooe=(()=>{class t$21{constructor(){this.draftParser=C$23(xoe),this.commentDraftsState=C$23(ul),this.actions$=C$23(Le$4),this.teamId$=Jc(),this.onDeleteDraftRemoveFromLocalStorage$=Ke$1(()=>this.actions$.pipe(Ye$2(Ce$3.deleteDraft),Mu(e$19=>this.commentDraftsState.getDraftById(e$19.id)),oe$13(([e$19,r$34])=>!!r$34),Is$1(([{id:e$19}])=>this.draftParser.removeDraft(e$19)),q$20(([{id:e$19,source:r$34}])=>Ce$3.deleteDraftSuccess({id:e$19,source:r$34})))),this.onUpdatedEmptyDraft$=Ke$1(()=>this.actions$.pipe(Ye$2(Ce$3.updateDraft),Mu(e$19=>this.commentDraftsState.getEntityFromInput(e$19.draft)),q$20(([e$19,r$34])=>typeof r$34==`string`?Ce$3.deleteDraft({id:r$34,source:e$19.source}):Ce$3.updateDraftOptimistically({draft:r$34,source:e$19.source})))),this.synchroniseWithLocalStorage$=Ke$1(()=>this.actions$.pipe(Ye$2(Ce$3.setWorkspaceId),Z$12(({workspaceId:e$19})=>this.draftParser.getFixedLocalStorageDrafts(e$19).pipe(Xo$2(r$34=>(fA(r$34,{feature:`chat`,origin:`drafts`}),qe$6([]))))),Is$1(e$19=>{this.commentDraftsState.updateDrafts(e$19);})),{dispatch:!1}),this.onTeamIdChange$=Ke$1(()=>this.teamId$.pipe(R$20(),zt$2(),q$20(e$19=>Ce$3.setWorkspaceId({workspaceId:e$19}))));}ngrxOnRunEffects(e$19){return n$24(`comment_drafts_store_module`,`comment_drafts_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`comment_drafts_store_module`,`load`);Poe=(()=>{class t$21{static forRoot(){return e$11(`note_taker_addon_store_module`,`for_root`),{ngModule:t$21};}constructor(e$19){if(e$11(`note_taker_addon_store_module`,`construct`),e$19)throw new Error(`CommentDraftsStoreModule is already loaded. Import it in the ShellModule only`);let r$34=o$32=>({...o$32,hydrating:Io().hydrating});k$5(qe$2.name,{version:3,unmarshaller:r$34,flushSyncActions:[Ce$3.deleteDraftSuccess,Ce$3.updateDraftOptimistically]});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(t$21,12));};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(qe$2),Je$4.forFeature([Ooe]),_oe]});}}return t$21;})();VN();e$11(`quick_create_store_module`,`load`);$oe=(()=>{class t$21{constructor(){e$11(`quick_create_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(Wb,aJ)]});}}return t$21;})();gSe=()=>({ngrxLoggerOptions:{enabled:!1}}),joe=sn(gSe(),on(O$1.storeNgrxLoggerOptions,(t$21,{options:i$27})=>({...t$21,ngrxLoggerOptions:i$27})));VN();Loe=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`dev`,joe)]});}}return t$21;})();dm();hr$3();Voe=t$21=>Noe(t$21)?Ag:Doe(t$21)?wg:r$18(t$21)?Ig:Boe(t$21)?Cg:hi$1;VN();VN();dm();hr$3();VN();Uoe=(()=>{class t$21{constructor(){this.splitService=C$23(Qn),this.suppressedEcodes$=this.splitService.getTreatmentWithConfig(O$16.GlobalToastSuppression).pipe(q$20(e$19=>{if(e$19.treatment!==`on`)return[];try{let r$34=e$19.config?JSON.parse(e$19.config):null;return r$34&&Array.isArray(r$34.ecodes)&&r$34.ecodes.every(o$32=>typeof o$32==`string`)?r$34.ecodes:[];}catch{return[];}}),Xo$2(()=>qe$6([])));}getSuppressedEcodes(){return this.suppressedEcodes$;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();n$24(`error_store_module`,`errors_effect`,`load`);Woe=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30){this.action$=e$19,this.store=r$34,this.route=o$32,this.segmentService=s$25,this.toastSuppressionConfigService=n$46,this.toastService=a$30,this.addError$=Ke$1(()=>this.action$.pipe(Ye$2(lF),As$3(this.store.select(f$25),gt$2(()=>I$24(this,null,function*(){return import(`./ecodes-a77cbd0fa6.js`);}))),oe$13(([c$37,m$32])=>vSe(c$37,m$32,this.route)),q$20(([c$37,m$32,{getErrorMessage:l$26}])=>{let g$19=c$37.payload;if(typeof g$19.ECODE<`u`&&!g$19.isMessageOverriden){let f$33=l$26(g$19.ECODE);f$33&&(g$19={...g$19,err:f$33});}return g$19;}),q$20(c$37=>new bd(c$37)))),this.addNormalizedGlobalError$=Ke$1(()=>this.action$.pipe(Ye$2(pF),q$20(c$37=>c$37.error),oe$13(kM),Mu(()=>this.toastSuppressionConfigService.getSuppressedEcodes()),le$5(([c$37,m$32])=>{let l$26=!!(c$37.ECODE&&m$32.includes(c$37.ECODE)),g$19={...c$37,meta:{...c$37.meta,suppressed:l$26}};return l$26?[new Fd(g$19)]:(this.toastService.addToastItem({id:`error_message_${c$37?.ECODE}`,title:c$37?.err,description:c$37?.ECODE,timeout:c$37?.timeout,externalUrlV3:c$37?.errorHelpLink,linkTextUnderlined:c$37?.errorHelpLink?"Learn more":void 0,isV3Toast:!0,iconClass:`danger`,icon:`warning`}),[new Id(g$19),new Fd(g$19)]);}))),this.reportOnOfflineModeChange$=Ke$1(()=>this.action$.pipe(Ye$2(dF),q$20(c$37=>c$37.payload),Is$1(c$37=>{Ni$1.addAction(`userOffline`,c$37);})),{dispatch:!1}),this.trackErrors$=Ke$1(()=>this.action$.pipe(Ye$2(gF),q$20(c$37=>c$37.error),oe$13(c$37=>c$37.sendAnalytics??!0),Mu(()=>this.store.select(b$17)),Is$1(([c$37,m$32])=>{let l$26=c$37.err||`No error message.`,g$19=kM(c$37),f$33=c$37.meta?.suppressed??!1;g$19&&fA(c$37,{feature:`app-global-error`,ecode:c$37.ECODE,err:l$26,userFacing:g$19,userId:m$32?.id,suppressed:f$33}),this.segmentService.track(Bu.EncounterError,{"error code":c$37.ECODE,"error message":`${l$26}`,userFacing:g$19,suppressed:f$33});})),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`error_store_module`,`errors_effect`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(z$14),ge$10(_b$1),ge$10(Uoe),ge$10(q$14));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})(),vSe=(t$21,i$27,e$19)=>!!t$21?.payload?.forceShow||!!(t$21?.payload?.ECODE&&!Voe(e$19).includes(t$21?.payload?.ECODE)&&(t$21?.payload?.err||!(t$21?.payload?.ECODE===`417`&&i$27)));VN();e$11(`error_store_module`,`load`);zoe=(()=>{class t$21{constructor(){e$11(`error_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`errors`,Goe),Je$4.forFeature([Woe])]});}}return t$21;})();Koe=sn({agentDetail:void 0,agentPrompt:void 0,autoExecute:void 0,completed:!1},on(o$10.setQueryParams,(t$21,{agentDetail:i$27,agentPrompt:e$19,autoExecute:r$34})=>({...t$21,agentDetail:i$27,agentPrompt:e$19,autoExecute:r$34,completed:!1})),on(o$10.deleteQueryParams,t$21=>({...t$21,agentDetail:void 0,agentPrompt:void 0,autoExecute:void 0,completed:!0})));VN();dm();VN();Qoe=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.layoutVersionModalService=C$23(oe),this.openV4Modal$=Ke$1(()=>this.actions$.pipe(Ye$2(o$10.openV4Modal),Is$1(({agentHubLandingExperience:e$19,hasAiIntent:r$34})=>{this.layoutVersionModalService.openLayoutVersionModal({shouldPlayTransitionVideo:!1,shouldMarkTransitionVideoAsSeen:!0,trackOpenVia:Fo$2.aiAgents,agentHubLandingExperience:e$19,hasAiIntent:r$34});})),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`agent_hub_landing_experience_store_module`,`agent_hub_landing_experience_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`agent_hub_landing_experience_store_module`,`load`);Joe=(()=>{class t$21{constructor(){e$11(`agent_hub_landing_experience_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(ee$5,Koe),Je$4.forFeature([Qoe])]});}}return t$21;})();dm();dm();Yoe={includeGuestAccess:!0,includeInternalGuests:!0,includeReadOnly:!0};VN();Zoe=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.destroyRef=e$19,this.action$=r$34,this.store=o$32,this.memberApiService=s$25,this.assignComment$=Ke$1(()=>this.action$.pipe(Ye$2(a$12),Is$1(n$46=>{Xoe({...n$46.payload,store:this.store,memberApiService:this.memberApiService});}),F$22(this.destroyRef)),{dispatch:!1});}ngrxOnRunEffects(e$19){return e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(at$11),ge$10(Le$4),ge$10(q$19),ge$10(J$3));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`growth_chat_module`,`load`);ese=(()=>{class t$21{constructor(){e$11(`growth_chat_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,Je$4.forFeature([Zoe])]});}}return t$21;})();dm();VN();n$24(`enrichment_store_module`,`enrichment_effects`,`load`);tse=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.destroyRef=e$19,this.action$=r$34,this.store=o$32,this.growthDataService=s$25,this.splitServiceV2=n$46,this.enrichUser$=Ke$1(()=>this.action$.pipe(Ye$2(o),Mu(()=>[this.store.select(b$17),this.splitServiceV2.isTreatmentOn(O$16.GrowthEnrichUser)]),oe$13(a$30=>!!a$30?.[1]?.email&&!!a$30?.[2]),oi$1(([a$30,c$37])=>this.growthDataService.enrich({email:c$37.email})),F$22(this.destroyRef)),{dispatch:!1}),this.enrichWorkspace$=Ke$1(()=>this.action$.pipe(Ye$2(i),Mu(()=>[this.store.select(b$17),this.store.select(o$30),this.splitServiceV2.isTreatmentOn(O$16.GrowthEnrichWorkspace)]),oe$13(a$30=>!!a$30?.[1]?.email&&!!a$30?.[2]&&!!a$30?.[3]),oi$1(([a$30,c$37,m$32])=>this.growthDataService.enrich({email:c$37.email,workspaceId:m$32})),F$22(this.destroyRef)),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`enrichment_store_module`,`enrichment_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(at$11),ge$10(Le$4),ge$10(q$19),ge$10(Uc),ge$10(Qn));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`enrichment_store_module`,`load`);rse=(()=>{class t$21{constructor(){e$11(`enrichment_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,Je$4.forFeature([tse])]});}}return t$21;})();ise=sn(void 0,on(p,(t$21,{template:i$27})=>i$27),on(o$3,t$21=>{}));VN();e$11(`new_onboarding_pmo_module`,`load`);ose=(()=>{class t$21{constructor(){e$11(`new_onboarding_pmo_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(O,ise)]});}}return t$21;})();VN();sse=(()=>{class t$21{static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,Et]});}}return t$21;})();nse=sn({},on(P$2,(t$21,i$27)=>({...t$21,planId:i$27.free_trial_plan})),on(c$3,t$21=>({...t$21,planId:void 0})));VN();e$11(`plan_module`,`load`);ase=(()=>{class t$21{constructor(){e$11(`plan_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(Cd,nse)]});}}return t$21;})();hse=sn({},on(a$15,(t$21,{payload:i$27})=>({...dse(t$21,i$27)})),on(l$17,(t$21,{payload:i$27})=>({...lse(t$21,i$27)})),on(g$11,u$22,(t$21,{payload:i$27})=>({...use(t$21,i$27)})),on(U$8,(t$21,{payload:i$27})=>({...fse(t$21,i$27)})),on(D$7,(t$21,{payload:i$27})=>({...pse(t$21,i$27)})),on(S$9,(t$21,{payload:i$27})=>({...cse(t$21,i$27)})),on(h$5,(t$21,{payload:i$27})=>({...mse(t$21,i$27)})));VN();e$11(`share_dialog_module`,`load`);gse=(()=>{class t$21{constructor(){e$11(`share_dialog_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(o$25,hse)]});}}return t$21;})();yse=sn({},on(u$2,t$21=>({...t$21,urlQueryParam:!0})),on(o$9,t$21=>({...t$21,urlQueryParam:void 0})));VN();e$11(`v3_nux_module`,`load`);vse=(()=>{class t$21{constructor(){e$11(`v3_nux_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(E,yse)]});}}return t$21;})();Sse=sn({},on(c,(t$21,{listId:i$27,projectId:e$19,fields:r$34})=>({...t$21,fields:r$34,projectId:e$19,listId:i$27})),on(m$1,(t$21,{tasksData:i$27})=>({...t$21,tasksData:i$27})),on(V$1,t$21=>({...t$21,fields:void 0,projectId:void 0,listId:void 0})),on(P,t$21=>({...t$21,tasksData:void 0})));VN();e$11(`visual_builder_module`,`load`);bse=(()=>{class t$21{constructor(){e$11(`visual_builder_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(T$2,Sse)]});}}return t$21;})();dm();VN();_se=f$30.byNamespace(`inbox`),rk=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.endpointService=e$19,this.http=r$34,this.errorHandler=o$32,this.connectionService=s$25,this.notificationV3BaseUrl$=this.endpointService.notificationV3BaseUrl;}getNotifications(e$19,r$34,o$32,s$25=10,n$46={direction:N$9.Descending},a$30=!1){return _se.info(`[Inbox] getNotifications()`),this.notificationV3BaseUrl$.pipe(Ve$4(1),As$3(this.connectionService.isConnected),le$5(([c$37,m$32])=>(_se.info(`[Inbox] getNotifications() - isConnected: ${m$32}`),m$32?this.http.post(`${c$37}/${e$19}/notifications/bundles/search`,{filteredBy:r$34,pagination:{nextCursor:o$32||``,limit:s$25},sortedBy:n$46,needsMemberMap:a$30}):qe$6({resources:[],notificationBundleGroups:[],nextCursor:``}))));}toggleClearNotificationBundle(e$19,r$34,o$32,s$25){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(n$46=>this.http.put(`${n$46}/${r$34}/notifications/bundles/${e$19}/${o$32}`,{},{headers:this.getOperationIdHeaders(s$25)}).pipe(this.errorHandler.http())),q$20(()=>({bundleId:e$19})));}snoozeNotificationBundle(e$19,r$34,o$32,s$25){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(n$46=>this.http.put(`${n$46}/${e$19}/notifications/bundles/snooze`,{bundleSnapshotId:r$34,snoozedUntil:o$32},{headers:this.getOperationIdHeaders(s$25)}).pipe(this.errorHandler.http())),q$20(()=>({bundleId:r$34})));}unsnoozeNotificationBundle(e$19,r$34,o$32){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(s$25=>this.http.put(`${s$25}/${e$19}/notifications/bundles/unsnooze`,{bundleSnapshotId:r$34},{headers:this.getOperationIdHeaders(o$32)}).pipe(this.errorHandler.http())),q$20(()=>({bundleId:r$34})));}loadMoreNotificationsInBundle(e$19,r$34,o$32,s$25){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(n$46=>this.http.post(`${n$46}/${r$34}/notifications/bundles/notifications`,{filteredBy:o$32,bundleSnapshotId:e$19,pagination:{nextCursor:s$25,limit:10}})),q$20(n$46=>({...n$46,notificationBundleId:e$19})));}clearAllNotificationBundles(e$19,r$34,o$32){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(s$25=>this.http.put(`${s$25}/${e$19}/notifications/bundles/clear`,{mostRecentNotificationBundleSnapshotId:r$34,filteredBy:o$32}).pipe(this.errorHandler.http())),q$20(()=>({mostRecentNotificationBundleSnapshotId:r$34})));}updateBundleReadStatus(e$19,r$34,o$32,s$25){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(n$46=>this.http.put(`${n$46}/${r$34}/notifications/bundles/${o$32?`read`:`unread`}`,{bundleSnapshotId:e$19},{headers:this.getOperationIdHeaders(s$25)}).pipe(this.errorHandler.http())),q$20(()=>({notificationBundleId:e$19,markAsRead:o$32})));}getUnreadNotificationCount(e$19,r$34,o$32,s$25){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(n$46=>this.http.post(`${n$46}/${o$32}/notifications/bundles/stats/fetch`,{forceRefresh:e$19,includeUnreadFromAllWorkspaces:r$34,fields:Cse(s$25)}).pipe(this.errorHandler.http())));}getCustomization(e$19){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(r$34=>this.http.post(`${r$34}/${e$19}/notifications/customization`,{}).pipe(q$20(o$32=>o$32.importanceCustomization),this.errorHandler.http())));}setCustomization(e$19,r$34){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(o$32=>this.http.put(`${o$32}/${e$19}/notifications/customization`,{importanceCustomization:{...r$34}}).pipe(q$20(()=>!0),this.errorHandler.http())));}resetCustomization(e$19){return this.notificationV3BaseUrl$.pipe(Ve$4(1),le$5(r$34=>this.http.delete(`${r$34}/${e$19}/notifications/customization`,{body:{customizationType:`importance`}}).pipe(this.errorHandler.http())));}getOperationIdHeaders(e$19){return new T$21().set(`x-client-request-token`,e$19);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(x$15),ge$10(ve$7),ge$10(ar$2),ge$10(R$15));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();ISe=t$21=>t$21!=null&&t$21.type===`task`;VN();Tse=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.store=r$34,this.addTasksFromInboxToCacheEffect=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNotificationsSuccess,d$11.getNewNotificationsSuccess),q$20(({resources:o$32})=>kse(o$32)),oe$13(o$32=>o$32.length>0),Mu(()=>this.store.select(p$24)),q$20(([o$32,s$25])=>{return new x$21(o$32.filter(a$30=>!s$25[a$30.id]));})));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();wM=F$23(L0());dm();Ee$4();C$22();Vr$1=F$23(O$10()),js$2=F$23(M$10()),ak=F$23(k$10()),Use=F$23(Ie$3());dm();C$22();Ise=`inbox`,ik=class extends _$7{constructor(i$27){super(),this.store=i$27,this.id=`${Ise}.${w$22()}`,this.isInbox$=this.store.select(Zt$3);}getName(){return Ise;}getId(){return this.id;}refresh(){return this.store.dispatch(d$11.getNotificationCounts({forceRefresh:!1,includeUnreadFromAllWorkspaces:!1})),this.isInbox$.pipe(Is$1(i$27=>{i$27&&this.store.dispatch(d$11.checkNewNotifications({forcePartialListReload:!0,reloadListSilently:!0}));}),q$20(()=>!0));}};Ps$1=function(t$21){return t$21.CrossTab=`crossTab`,t$21.Error=`error`,t$21.User=`user`,t$21.Websocket=`websocket`,t$21;}(Ps$1||{});Ese=(t$21,i$27,e$19,r$34=N$9.Descending,o$32=!1)=>{switch(i$27){case u$23.clearBundle:t$21.id=Ht(t$21,`cleared`),t$21.status=`cleared`,t$21.clearedAt=new Date().toISOString();break;case u$23.unclearBundle:t$21.status=ESe(t$21),t$21.id=Ht(t$21,t$21.status);break;case u$23.markBundleRead:t$21.unreadCount=0;break;case u$23.markBundleUnread:t$21.unreadCount=Object.values(t$21.countByNotificationType).reduce((s$25,n$46)=>s$25+n$46,0);break;case u$23.snoozeBundle:t$21.id=Ht(t$21,`snoozed`),t$21.status=`snoozed`,e$19?.snoozedUntil&&(t$21.snoozedUntil=e$19.snoozedUntil),t$21.snoozedAt=new Date().toISOString();break;case u$23.unsnoozeBundle:t$21.id=Ht(t$21,`uncleared`),t$21.status=`uncleared`,t$21.snoozedUntil=void 0,o$32||(t$21.mostRecentNotificationTime=new Date().toISOString()),t$21.unsnoozedAt=new Date().toISOString();break;default:break;}return t$21;},Ase=t$21=>{switch(t$21){case u$23.clearBundle:return`cleared`;case u$23.snoozeBundle:return`snoozed`;case u$23.unclearBundle:case u$23.unsnoozeBundle:default:return`uncleared`;}},wse=(t$21,i$27,e$19)=>i$27?!0:!(t$21===u$23.clearBundle&&e$19.status!==`cleared`||t$21===u$23.unclearBundle&&e$19.status===`cleared`);qa=t$21=>t$21.reduce((i$27,e$19)=>({...i$27,[e$19.entityResourceName]:e$19}),{});ok=(t$21,i$27,e$19=`next`,r$34=!1)=>{let o$32=Xp$1(t$21,i$27,e$19)[0];return!o$32&&r$34&&(o$32=Xp$1(t$21,i$27,e$19===`next`?`prev`:`next`)[0]),o$32;},Xp$1=(t$21,i$27,e$19=`next`,r$34=1)=>t$21[0]?.notificationBundles?.length?i$27<0?[]:ASe(i$27,e$19,r$34).map(s$25=>t$21[0].notificationBundles[s$25]).filter(s$25=>!!s$25):[],ASe=(t$21,i$27,e$19)=>{let r$34=[],o$32=1,s$25=i$27===`next`?1:-1;for(;e$19>=o$32;)r$34.push(t$21+o$32*s$25),o$32++;return r$34;};xse=t$21=>({role:t$21.roleId,user:{color:t$21.color,description:t$21.description??null,email:t$21.email,id:t$21.id,initials:t$21.initials,profileInfo:t$21.profileInfo,profilePicture:t$21.profilePicture??null,username:t$21.username}});Ose=t$21=>t$21[0]?t$21[0].notificationBundles.length?t$21[0].notificationBundles.flatMap(i$27=>i$27.recentNotifications).filter(i$27=>!!i$27.historyItem&&Vt.includes(i$27.historyItem.type)).map(i$27=>i$27.id.split(`access_request:`)[1]?.split(`#`)[0]):[]:[];Tl=F$23(O$10());ch={status:F$23(M$10()).NotificationStatus.Uncleared,assignedToMe:!1,mentioned:!1,unread:!1,reminders:!1},wSe={...ch,bundleType:Tl.BundleType.Activity,assignedToMe:!0},MSe={...ch,bundleType:Tl.BundleType.Messages,assignedToMe:!0},RSe={...ch,bundleType:Tl.BundleType.Messages,mentioned:!0},TM=(t$21,i$27,e$19)=>({savedCount:e$19.savedCount,reminderCount:e$19.reminderCount,activityCount:ah(t$21,{...ch,bundleType:Tl.BundleType.Activity},e$19.activityCount,i$27),messagesCount:ah(t$21,{...ch,bundleType:Tl.BundleType.Messages},e$19.messagesCount,i$27),assignedActivityCount:ah(t$21,wSe,e$19.assignedActivityCount,i$27),assignedMessagesCount:ah(t$21,MSe,e$19.assignedMessagesCount,i$27),mentionMessagesCount:ah(t$21,RSe,e$19.mentionMessagesCount,i$27)});$se=t$21=>{switch(t$21){case u$23.clearBundle:case u$23.unclearBundle:case u$23.snoozeBundle:case u$23.unsnoozeBundle:return!0;default:return!1;}},IM=t$21=>{switch(t$21){case u$23.clearBundle:return u$23.unclearBundle;case u$23.unclearBundle:return u$23.clearBundle;case u$23.snoozeBundle:return u$23.unsnoozeBundle;case u$23.unsnoozeBundle:return u$23.snoozeBundle;default:return t$21;}};mh=F$23(O$10()),jse=(t$21,i$27)=>{let e$19=i$27,r$34=!t$21.assignedToMe&&!t$21.mentioned,o$32=t$21.bundleType===mh.BundleType.Activity||t$21.bundleType===mh.BundleType.All,s$25=t$21.bundleType===mh.BundleType.Messages||t$21.bundleType===mh.BundleType.All;if(o$32&&(e$19={...e$19,activityCount:t$21.assignedToMe?i$27.activityCount-i$27.assignedActivityCount:0,assignedActivityCount:0}),s$25){let n$46=t$21.assignedToMe?i$27.assignedMessagesCount:i$27.mentionMessagesCount,a$30=t$21.assignedToMe||t$21.mentioned?i$27.messagesCount-n$46:0;e$19={...e$19,messagesCount:a$30,...((t$21.assignedToMe||r$34)&&{assignedMessagesCount:0}),...((t$21.mentioned||r$34)&&{mentionMessagesCount:0})};}return e$19;},Zp=(t$21,i$27,e$19)=>t$21?OSe(i$27,e$19):i$27,OSe=(t$21,i$27)=>Math.max(0,t$21+i$27);VN();dm();VN();sk=(()=>{class t$21{constructor(e$19,r$34){this.inboxFeatureFlagService=e$19,this.store=r$34,this.destroy$=new M$22();}init(){this.inboxFeatureFlagService.inboxNewNotifCheckParams$.pipe(gs(this.destroy$)).subscribe(e$19=>{this.handleNewNotifCheckParams(e$19);}),this.inboxFeatureFlagService.inboxSidebarDelay$.pipe(gs(this.destroy$)).subscribe(e$19=>{this.handleSidebarDelay(e$19);});}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}handleNewNotifCheckParams(e$19){if(!e$19.config)return;let r$34=JSON.parse(e$19.config);this.store.dispatch(d$11.updateNewNotifCheckParams({newNotifCheckParams:{maxBundlesReloadCount:+r$34.maxBundlesReloadCount||50,newNotificationsCheckPageSize:+r$34.newNotificationsCheckPageSize||120,partialReloadAfterMinutes:+r$34.partialReloadAfterMinutes||30}}));}handleSidebarDelay(e$19){if(!e$19.config)return;let r$34=JSON.parse(e$19.config);this.store.dispatch(h$6.storeSidebarDelay({delay:+r$34.delayMs||0}));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(j$7),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();$s$3=Qt$3({source:`CrossTabInbox`,events:{"Handle Cross Tab Message":qe$5()}});VN();nk=(()=>{class t$21{constructor(e$19){this.store=e$19,this.inboxBroadcastChannel=void 0,this.inboxCrossTabMessageSubject$=new M$22(),this.inboxCrossTabMessage$=this.inboxCrossTabMessageSubject$.asObservable(),this.team$=this.store.select(de$10),this.team$.pipe(oe$13(r$34=>!!r$34.id),ls$2(`id`)).subscribe(r$34=>{this.initBroadcastChannelForTeam(r$34.id);});}sendUserActionMessage(e$19){this.postMessage({...e$19,type:`userActionMessage`});}sendClearAllBundlesMessage(e$19){this.postMessage({...e$19,type:`clearAllBundles`});}changeFullscreenModeEnabled(e$19){this.postMessage({type:`fullscreenModeEnabledMessage`,enabled:e$19});}changeGroupByDateEnabled(e$19){this.postMessage({type:`groupByDateEnabledMessage`,enabled:e$19});}changeShowAllTabEnabled(e$19){this.postMessage({type:`showAllTabEnabledMessage`,enabled:e$19});}changeSidebarEnabled(e$19){this.postMessage({type:`sidebarEnabledMessage`,enabled:e$19});}changeSortDirection(e$19){this.postMessage({type:`sortDirectionMessage`,sortedBy:e$19});}sendCountsUpdateMessage(e$19){this.postMessage({...e$19,type:`notificationCountsUpdate`});}initBroadcastChannelForTeam(e$19){this.inboxBroadcastChannel?.close(),this.inboxBroadcastChannel=new w$11(`inbox-broadcast-channel-${e$19}`),this.inboxBroadcastChannel.onmessage=r$34=>this.handleMessage(r$34);}postMessage(e$19){this.inboxBroadcastChannel&&this.inboxBroadcastChannel.postMessage(e$19);}handleMessage(e$19){this.store.dispatch($s$3.handleCrossTabMessage({message:e$19}));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Nse=(()=>{class t$21{constructor(){this.bundleToReloadDetails=null;}setBundleOrderChanged(e$19){this.bundleToReloadDetails={ernOrActivityType:F$13(e$19),status:e$19.status};}getBundleToReloadDetails(){return this.bundleToReloadDetails;}clearBundleOrderChanged(){this.bundleToReloadDetails=null;}hasOrderChanged(e$19){return!e$19||!this.bundleToReloadDetails?!1:this.bundleToReloadDetails?.ernOrActivityType===F$13(e$19)&&this.bundleToReloadDetails?.status===e$19.status;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();eu=(()=>{class t$21{constructor(){this.isStaging=w$25.name===`staging`,this.isQA=w$25.name===`qa`,this.loadResults=[];}markInfiniteLoad(e$19){Ni$1.addAction(`inboxV3InfiniteLoadOccurances`,{userId:e$19});}markChildCommentsLoadFail(e$19,r$34,o$32){Ni$1.addAction(`inboxV3ChildCommentsLoadFail`,{userId:e$19,errorDetails:r$34,isRetry:o$32});}markChildCommentsLoadEmptyResponse(e$19,r$34,o$32,s$25){Ni$1.addAction(`inboxV3ChildCommentsLoadEmptyResponse`,{userId:e$19,errorDetails:r$34,isRetry:o$32,response:s$25});}saveChildCommentLoadResult(e$19){(this.isStaging||this.isQA)&&this.loadResults.push(e$19);}markChildCommentsMissing(e$19,r$34,o$32,s$25){if(r$34&&(this.isStaging||this.isQA)){let n$46=this.loadResults.filter(a$30=>a$30.requestedParentId===r$34?.parentCommentId);Ni$1.addAction(`inboxV3ChildCommentsMissingV2`,{userId:e$19,notificationsCommentsThreadObject:r$34,receivedRepliesIds:o$32,renderedRepliesIds:s$25,apiLoadResults:n$46});}}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();U$18();AM=F$23(Ie$3());VN();jSe=[`project`,`category`,`subcategory`],Bse=(()=>{class t$21{constructor(e$19){this.store=e$19;}hydrateHierarchyEntity(e$19,r$34){let o$32=e$19[0],s$25;e$19.length===1&&`location`in o$32&&o$32.location?.project?.id&&(s$25={id:o$32.id,type:o$32.type,projectId:o$32.location.project?.id}),this.store.dispatch(m$19({parentId:r$34,parentType:d$25.SharedProject,hydrateOnly:!0,hierarchyEntityToFetchIfNeeded:s$25,tag:`inbox-shared-hierarchy-service-hydrate-hierarchy-entity`}));}needToFetchSharedEntity(e$19,r$34){let{notificationBundleGroups:o$32,resources:s$25}=e$19;return o$32[0]?.notificationBundles.some(n$46=>{if(n$46.countByNotificationType?.[t$3.SharedWithMe]>0){let c$37=s$25.find(({entityResourceName:m$32})=>`rootEntityResourceName`in n$46&&n$46.rootEntityResourceName===m$32);if(c$37&&jSe.includes(c$37.type))return!this.isEntityInSharedData(r$34,c$37);}return!1;});}isEntityInSharedData(e$19,r$34){return r$34.type===AM.ResourceType.Category?t$14(e$19,r$34.id):r$34.type===AM.ResourceType.Subcategory?n$30(e$19,r$34.id):!0;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Il=f$30.byNamespace(`inbox`),NSe=5e3,Wse=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19,f$33,h$15,I$25,A$22,R$21,w$26,E$16,P$20,B$22,G$16){this.actions$=e$19,this.inboxSplitConfigsService=r$34,this.store=o$32,this.api=s$25,this.dashboardDocService=n$46,this.trayFacade=a$30,this.inboxCrossTabCommunicationService=c$37,this.trackService=m$32,this.refreshService=l$26,this.inboxFeatureFlagService=g$19,this.inboxPerformanceService=f$33,this.inboxBundleOrderService=h$15,this.inboxMonitoringService=I$25,this.inboxReplyInputService=A$22,this.inboxToastService=R$21,this.inboxSharedHierarchyService=w$26,this.browserStatusService=E$16,this.websocketService=P$20,this.trueInboxZeroService=B$22,this.inboxBundlePerformanceMonitorService=G$16,this.refreshControllerEnabled$=jS(O$16.FePlatformRefreshController),this.isPageVisible$=it$1(this.browserStatusService),this.reloadNotifsOnTeamChange$=Ke$1(()=>this.store.select(o$30).pipe(R$20(),Ss$1(1),q$20(()=>d$11.reloadNotifications({silent:!1})))),this.reloadNotifications$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.reloadNotifications),le$5(v$22=>[d$11.cancelGetNotifications(),d$11.getNotifications({fetchNotificationCount:!0,silent:v$22.silent})]))),this.reloadNotificationsWithCache$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.reloadNotificationsWithCache),le$5(()=>[d$11.cancelGetNotifications(),d$11.getNotifications({fetchNotificationCount:!0,silent:!0,replaceList:!0})]))),this.updateFilters$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.updateFilters),Mu(()=>[this.store.select(R$8),this.store.select(or),this.store.select(nr),this.store.select(rr)]),le$5(([v$22,x$28,U$19,H$10,te$16])=>{let ye$5;x$28.bundleType===Vr$1.BundleType.Messages?ye$5=U$19:x$28.bundleType===Vr$1.BundleType.Activity?ye$5=H$10:ye$5=te$16;let ke$5=!!ye$5?.bundleGroups[0]?.notificationBundles,Qe$3=ye$5?.bundleGroups[0]?.notificationBundles?.length??0;return!v$22.skipCache&&$t$1(x$28)&&ke$5?(this.inboxPerformanceService.useCachedNotifications(Qe$3,x$28.bundleType??Vr$1.BundleType.All),[d$11.useNotificationsCache({cache:ye$5})]):(this.inboxPerformanceService.listLoadStart(),[d$11.reloadNotifications({silent:!1}),h$6.resetExpandedModeAndSidebar()]);}))),this.useNotificationsCache$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.useNotificationsCache),le$5(v$22=>[d$11.useNotificationsCacheUpdateStore({cache:v$22.cache}),d$11.reloadNotificationsWithCache()]))),this.checkForInfiniteLoading$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.updateFilters,d$11.reloadNotifications),Mu(()=>[this.store.select(Ko),this.store.select(h$3),this.store.select(ae$8).pipe(R$20())]),oe$13(([,v$22,x$28])=>v$22&&x$28.length===0),Is$1(([,,,v$22])=>{this.inboxMonitoringService.markInfiniteLoad(v$22);})),{dispatch:!1}),this.checkNewNotifications$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.checkNewNotifications),Mu(()=>$i({vms:this.store.select(h$3),messagesPartialReloadTimestamp:this.store.select(Hs),activityPartialReloadTimestamp:this.store.select(Ws),newNotifCheckParams:this.store.select(er),filters:this.store.select(R$8)})),oe$13(([,{filters:v$22}])=>v$22.status!==js$2.NotificationStatus.Snoozed),le$5(([v$22,{vms:x$28,messagesPartialReloadTimestamp:U$19,activityPartialReloadTimestamp:H$10,newNotifCheckParams:te$16,filters:ye$5}])=>{let ke$5=v$22.forcePartialListReload,Qe$3=ye$5.bundleType===Vr$1.BundleType.Messages||ye$5.bundleType===Vr$1.BundleType.Activity;if(!ke$5&&Qe$3){let Ae$6=ye$5.bundleType===Vr$1.BundleType.Messages?U$19:H$10;ke$5=(0,wM.default)(Ae$6).isBefore((0,wM.default)().subtract(te$16.partialReloadAfterMinutes,`minutes`));}if(!x$28[0]?.notificationBundles?.length)return Il.info(`[Inbox] checkNewNotifications$, no notifications, reload full list`),[d$11.reloadNotifications({silent:v$22.reloadListSilently}),h$6.resetExpandedModeAndSidebar()];let Zt$4=[];return ke$5&&(Qe$3&&Zt$4.push(d$11.markLastPartialReloadTimestamps({[ye$5.bundleType===Vr$1.BundleType.Messages?`messagesTimestamp`:`activityTimestamp`]:new Date().toISOString()})),Zt$4.push(d$11.invalidateCache({}))),Zt$4.push(d$11.getNewNotifications({nextPageCursor:void 0,reloadPartOfList:ke$5})),Il.info(`[Inbox] checkNewNotifications$, actions: ${Zt$4.map(Ae$6=>Ae$6.type).join(`, `)}`),Zt$4;}))),this.checkNewNotificationsLaterTab$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.checkNewNotifications),Mu(()=>$i({vms:this.store.select(h$3),filters:this.store.select(R$8),getNotifParams:this.store.select(Si)})),oe$13(([v$22,{filters:x$28}])=>x$28.status===js$2.NotificationStatus.Snoozed&&v$22.forcePartialListReload),le$5(([,{vms:v$22,getNotifParams:x$28}])=>{let U$19=!x$28.filters.saved,H$10=v$22[0]?.notificationBundles?.filter(ye$5=>!ye$5.previewNotification?.isSaveForLater)?.length,te$16=[d$11.getNewSaved()];return U$19&&te$16.push(d$11.getNewReminders({currentRemindersCount:H$10})),j$23(te$16);}))),this.getNewSaved$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNewSaved),Mu(()=>[this.store.select(Si)]),le$5(([,v$22])=>this.api.getNotifications(v$22.teamId,{...v$22.filters,saved:!0},void 0,20,{direction:N$9.Ascending},v$22.needsMemberMap).pipe(Xo$2(()=>qe$6(null)),gs(this.actions$.pipe(Ye$2(d$11.cancelGetNotifications))))),oe$13(v$22=>!!v$22),q$20(v$22=>d$11.getNewNotificationsSuccess({resources:qa(v$22.resources),newNotificationBundleGroups:v$22.notificationBundleGroups,loadBeforeTimestamp:``,nextPageCursor:void 0})))),this.getNewReminders$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNewReminders),Mu(()=>[this.store.select(Si)]),le$5(([v$22,x$28])=>this.api.getNotifications(x$28.teamId,{...x$28.filters,saved:!1},void 0,Math.min(v$22.currentRemindersCount+20,140),{direction:N$9.Descending},x$28.needsMemberMap).pipe(Xo$2(()=>qe$6(null)),gs(this.actions$.pipe(Ye$2(d$11.cancelGetNotifications))))),oe$13(v$22=>!!v$22),q$20(v$22=>d$11.getNewNotificationsSuccess({resources:qa(v$22.resources),newNotificationBundleGroups:v$22.notificationBundleGroups,loadBeforeTimestamp:``,nextPageCursor:void 0})))),this.getNewNotifications$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNewNotifications),Is$1(v$22=>{Il.info(`[Inbox] getNewNotifications$, action:`,v$22);}),Mu(v$22=>[this.store.select(Si),v$22.reloadPartOfList?this.store.select(ii):this.store.select(si),this.store.select(er)]),le$5(([v$22,x$28,U$19,H$10])=>Ct$4([qe$6(v$22),qe$6(U$19),this.store.select(o$30).pipe(Ve$4(1)),this.store.select(u$34).pipe(Ve$4(1)),this.api.getNotifications(x$28.teamId,{...x$28.filters,dateRange:{start:U$19}},v$22.nextPageCursor,H$10.newNotificationsCheckPageSize,x$28.filters.bundleType||x$28.filters.saved?x$28.sortedBy:void 0,x$28.needsMemberMap).pipe(Xo$2(()=>qe$6(null)),gs(this.actions$.pipe(Ye$2(d$11.cancelGetNotifications))))])),oe$13(([,,,,v$22])=>!!v$22),le$5(([,v$22,x$28,U$19,H$10])=>{let te$16=[d$11.getNewNotificationsSuccess({resources:qa(H$10.resources),newNotificationBundleGroups:H$10.notificationBundleGroups,loadBeforeTimestamp:v$22,nextPageCursor:H$10.nextCursor})];if(!M$12(H$10?.users)){let ye$5=Object.values(H$10?.users??{});te$16.push(d$11.updateTeamMembers({teamId:x$28,users:ye$5}));}return this.inboxSharedHierarchyService.needToFetchSharedEntity(H$10,U$19)&&this.inboxSharedHierarchyService.hydrateHierarchyEntity(H$10.resources,x$28),te$16;}))),this.mergeBundlesList$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNewNotificationsSuccess),Mu(()=>[this.store.select(ee$4),this.store.select(Se$2),this.store.select(tr),this.store.select(R$8),this.store.select(Ae$2),this.store.select(to),this.inboxFeatureFlagService.blockInboxBundleContentOrderChangeEnabled$,this.isPageVisible$]),le$5(([v$22,x$28,U$19,H$10,te$16,ye$5,ke$5,Qe$3,Ct$5])=>{if(v$22.nextPageCursor)return[d$11.reloadNotifications({silent:!1})];let Zt$4=v$22.newNotificationBundleGroups,Ae$6=jo(x$28,Zt$4,U$19),Fe$6=Fe$4(Ae$6,Zt$4),He$5=jo(x$28,Zt$4,H$10),St$3=Ho(x$28,Zt$4),fr=Qe$3&&(Rse(ke$5,Fe$6)||this.inboxBundleOrderService.hasOrderChanged(ke$5));fr&&ke$5&&(this.inboxBundleOrderService.setBundleOrderChanged(ke$5),Ae$6=U$19,He$5=H$10),x$28?.[0]&&te$16.status!==js$2.NotificationStatus.Snoozed&&(x$28[0].notificationBundles=x$28[0].notificationBundles.filter(vn$2=>vn$2.mostRecentNotificationTime<v$22.loadBeforeTimestamp));let no$2=Wo(x$28,Zt$4,te$16.status===js$2.NotificationStatus.Snoozed?N$9.Ascending:ye$5.direction,ke$5,fr);te$16.status===js$2.NotificationStatus.Snoozed&&(no$2=[{...no$2[0],notificationBundles:ct$1(no$2[0].notificationBundles)}]);let Wi$1=[d$11.replaceBundleGroupsList({bundleGroups:no$2,resources:v$22.resources,newSelectedBundleId:Ae$6,newHighlightedBundleId:He$5,entityResourcesIdsToReload:St$3})];return Ct$5&&Zt$4[0]?.notificationBundles?.length>0&&Wi$1.push(d$11.getNotificationCounts({forceRefresh:!1,includeUnreadFromAllWorkspaces:!1})),Wi$1;}))),this.preloadResources$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNotificationsSuccess,d$11.replaceBundleGroupsList,d$11.loadMoreNotificationsInBundleSuccess),Mu(()=>[this.store.select(Zt$3)]),le$5(([v$22,x$28])=>x$28?[d$11.preloadResourcesOnListLoad({resources:v$22.resources})]:[d$11.storeResourcesToPreloadOnInboxEnter({resources:v$22.resources})]))),this.preloadResourcesOnInboxEnter$=Ke$1(()=>this.store.select(Zt$3).pipe(zt$2(),hs$3(),oe$13(([v$22,x$28])=>!v$22&&x$28),Mu(()=>[this.store.select(Os)]),oe$13(([,v$22])=>Object.keys(v$22).length>0),le$5(([,v$22])=>[d$11.preloadResourcesOnListLoad({resources:v$22}),d$11.clearResourcesToPreloadOnInboxEnter()]))),this.getNotifications$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNotifications),Mu(()=>[this.store.select(Si)]),le$5(([v$22,x$28])=>Ct$4(qe$6(v$22.fetchNotificationCount),qe$6(x$28.nextPageCursor),qe$6(v$22.replaceList),qe$6(x$28.filters.saved),this.store.select(o$30).pipe(Ve$4(1)),this.store.select(u$34).pipe(Ve$4(1)),this.api.getNotifications(x$28.teamId,x$28.filters,x$28.nextPageCursor,20,x$28.filters.bundleType||x$28.filters.saved?x$28.sortedBy:void 0,x$28.needsMemberMap).pipe(Xo$2(()=>qe$6(null)),gs(this.actions$.pipe(Ye$2(d$11.cancelGetNotifications)))))),le$5(([v$22,x$28,U$19,H$10,te$16,ye$5,ke$5])=>{if(!ke$5)return this.inboxPerformanceService.notificationsListLoadError(),[d$11.getNotificationsError()];ke$5.nextCursor=ke$5.nextCursor===x$28?``:ke$5.nextCursor,this.inboxPerformanceService.notificationsListLoaded(ke$5.notificationBundleGroups[0]?.notificationBundles?.length??0);let Qe$3=[d$11.getNotificationsSuccess({resources:qa(ke$5.resources),notificationBundleGroups:ke$5.notificationBundleGroups,nextPageCursor:ke$5.nextCursor?.length>0&&!H$10?ke$5.nextCursor:void 0,saveForLaterNextPageCursor:ke$5.nextCursor?.length>0&&H$10?ke$5.nextCursor:void 0,replaceList:U$19})];if(!M$12(ke$5?.users)){let Ct$5=Object.values(ke$5?.users??{});Qe$3.push(d$11.updateTeamMembers({teamId:te$16,users:Ct$5}));}return this.inboxSharedHierarchyService.needToFetchSharedEntity(ke$5,ye$5)&&this.inboxSharedHierarchyService.hydrateHierarchyEntity(ke$5.resources,te$16),ke$5.nextCursor?v$22?Qe$3.push(d$11.getNotificationCounts({forceRefresh:!1,includeUnreadFromAllWorkspaces:!1})):U$9(`Counts`,`Effects`,`getNotifications - dont touch counts`,{cursor:ke$5.nextCursor,fetchNotificationCount:v$22}):Qe$3.push(d$11.recalculateNotificationCounts()),!ke$5.nextCursor&&H$10&&Qe$3.push(d$11.updateSaveForLaterFilters({saved:!1,sortedBy:{direction:`descending`}})),j$23(Qe$3);}))),this.updateTeamMembers$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.updateTeamMembers),Mu(()=>[this.store.select(c$31)]),q$20(([v$22,x$28])=>{let U$19=x$28?.map(ye$5=>ye$5.user.id)??[],H$10=v$22?.users?.filter(ye$5=>!U$19.includes(ye$5.id))?.map(ye$5=>xse(ye$5)),te$16=x$28.concat(H$10??[]);return st$9({teamId:v$22.teamId,changes:{members:te$16}});}))),this.updateNotificationsCache$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNotificationsSuccess,d$11.replaceBundleGroupsList,d$11.reloadNotifications,d$11.loadMoreNotificationsInBundleSuccess,ie$4.removeUnauthorizedNotificationBundles),Mu(()=>[this.store.select(ee$4),this.store.select(R$8),this.store.select(Qo)]),oe$13(([,,v$22])=>$t$1(v$22)),q$20(([,v$22,x$28,U$19])=>d$11.updateNotificationsCache({bundleType:x$28.bundleType,bundles:ko(v$22),nextPageCursor:U$19})))),this.invalidateCache$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.clearAllNotificationBundlesUpdateList),Mu(()=>[this.store.select(R$8)]),le$5(([,v$22])=>v$22.bundleType===Vr$1.BundleType.All?[d$11.invalidateCache({bundleType:Vr$1.BundleType.All}),d$11.invalidateCache({bundleType:Vr$1.BundleType.Messages}),d$11.invalidateCache({bundleType:Vr$1.BundleType.Activity})]:[d$11.invalidateCache({bundleType:v$22.bundleType}),d$11.invalidateCache({bundleType:Vr$1.BundleType.All})]))),this.getNotificationCounts$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNotificationCounts),fs$1(1e3),Mu(()=>[this.store.select(o$30),this.store.select(R$8)]),le$5(([v$22,x$28,U$19])=>(U$9(`Counts`,`Effects`,`getNotificationCounts`,{...v$22,teamId:x$28}),this.api.getUnreadNotificationCount(v$22.forceRefresh,v$22.includeUnreadFromAllWorkspaces,x$28,U$19).pipe(Xo$2(H$10=>(U$9(`Counts`,`Effects`,`getNotificationCounts - error`),fA(H$10,{feature:`inbox`,context:`getUnreadNotificationCount`}),qe$6(null)))))),oe$13(v$22=>!!v$22),q$20(v$22=>d$11.storeUpdatedNotifcationCounts({counts:v$22,timestamp:new Date().toISOString()})))),this.syncNotificationCounts$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.storeUpdatedNotifcationCounts),Is$1(v$22=>{U$9(`Counts`,`Effects`,`storeUpdatedNotifcationCounts - sync out to other tabs`,{...v$22}),this.inboxCrossTabCommunicationService.sendCountsUpdateMessage({counts:v$22.counts,timestamp:v$22.timestamp});})),{dispatch:!1}),this.loadInboxCustomization$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.loadInboxCustomization),Mu(()=>[this.store.select(o$30)]),le$5(([,v$22])=>this.api.getCustomization(v$22)),q$20(v$22=>d$11.loadInboxCustomizationSuccess({values:v$22})))),this.resetInboxCustomization$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.resetInboxCustomization),Mu(()=>[this.store.select(o$30)]),le$5(([,v$22])=>this.api.resetCustomization(v$22)),q$20(v$22=>d$11.loadInboxCustomizationSuccess({values:v$22})))),this.setInboxCustomization$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.setInboxCustomization),Mu(()=>[this.store.select(o$30)]),Rr(([v$22,x$28])=>this.api.setCustomization(x$28,v$22.values)),q$20(()=>d$11.emptyAction()))),this.tryRecalculateNotificationCounts$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.removeBundle,d$11.storeBundleGroups,ie$4.updateInboxTabCounts),Mu(()=>[this.store.select(ee$4),this.store.select(Qo),this.store.select(R$8)]),oe$13(([,v$22,x$28,U$19])=>v$22?.length>0&&!x$28&&(U$19.bundleType===Vr$1.BundleType.Activity||U$19.bundleType===Vr$1.BundleType.Messages)),q$20(()=>d$11.recalculateNotificationCounts()))),this.recalculateNotificationCounts$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.recalculateNotificationCounts),Mu(()=>[this.store.select(mr),this.store.select(R$8),this.store.select(ee$4)]),Is$1(([,v$22,x$28,U$19])=>{U$9(`Counts`,`Effects`,`recalculateNotificationCounts`,{counts:v$22,recalculatedCounts:TM(x$28,U$19,v$22),timestamp:new Date().toISOString()});}),q$20(([,v$22,x$28,U$19])=>d$11.storeUpdatedNotifcationCounts({counts:TM(x$28,U$19,v$22),timestamp:new Date().toISOString()})))),this.checkInboxZero$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.removeBundle,d$11.clearAllNotificationBundlesUpdateList),Mu(()=>[this.store.select(h$3),this.store.select(R$8)]),q$20(([v$22,x$28,U$19])=>U$19.status===js$2.NotificationStatus.Cleared?d$11.emptyAction():(v$22.shouldTrackInboxZero&&x$28[0]?.notificationBundles?.length===0&&this.trackService.trackHitInboxZero(),x$28[0]?.notificationBundles?.length===0&&v$22.type===d$11.removeBundle.type&&this.trueInboxZeroService.updateJustReachedTrueInboxZero(),!v$22.disableConfetti&&!x$28[0]?.notificationBundles?.length&&!U$19.mentioned&&!U$19.assignedToMe&&!U$19.unread?r$5({show:!0,force:!1,source:`notifications`}):d$11.emptyAction())))),this.undoUserAction$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.undoUserAction),Mu(()=>[this.store.select(Js$2),this.store.select(Qs$1)]),q$20(([v$22,x$28,U$19])=>{let H$10=v$22.operationId?x$28.find(te$16=>te$16.operationId===v$22.operationId):x$28[x$28.length-1];return{isErrorRevert:v$22.isErrorRevert,action:v$22,undoAction:H$10,bundle:H$10?U$19[H$10.snapshotId]:void 0};}),oe$13(({undoAction:v$22,bundle:x$28})=>!!v$22&&!!x$28),Z$12(({undoAction:v$22,bundle:x$28,isErrorRevert:U$19})=>[d$11.performUserAction({bundle:x$28,bundleId:x$28.id,action:IM(v$22.action),actionParams:v$22.actionParams,canUndo:!1,isUndo:!0,isErrorRevert:U$19}),d$11.removeUndoUserAction({undoAction:v$22})]))),this.toggleBundleReadStatus$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleBundleReadStatus),Mu(()=>[this.store.select(ee$4)]),oe$13(([v$22,x$28])=>!!v$22.bundleId&&x$28[0]?.notificationBundles?.length>0),q$20(([v$22,x$28])=>({bundle:Fe$4(v$22.bundleId,x$28),action:v$22})),oe$13(({bundle:v$22})=>!!v$22),Z$12(({action:v$22,bundle:x$28})=>{let U$19=v$22.markRead??x$28.unreadCount>0,H$10=[d$11.performUserAction({bundleId:x$28.id,bundle:x$28,action:U$19?u$23.markBundleRead:u$23.markBundleUnread,canUndo:!1})];return v$22.collapse&&(H$10.push(d$11.returnToInbox()),H$10.push(h$6.resetExpandedModeAndSidebar())),H$10;}))),this.performUserAction$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.performUserAction),Mu(()=>[this.store.select(ee$4)]),oe$13(([v$22,x$28])=>!!v$22.bundle||x$28[0]?.notificationBundles?.length>0),q$20(([v$22,x$28])=>{return{action:v$22,bundle:v$22.bundle??Fe$4(v$22.bundleId,x$28)??Po$1(de$7(v$22.bundleId),x$28)};}),oe$13(({bundle:v$22})=>!!v$22),Z$12(({action:v$22,bundle:x$28})=>{let U$19=w$22(),H$10=[];return v$22.isErrorRevert||H$10.push(d$11.performUserActionApiCall({bundleId:x$28.id,action:v$22.action,operationId:U$19,actionParams:v$22.actionParams,isUndo:v$22.isUndo})),H$10.push(d$11.optimisticPerformAction({source:Ps$1.User,bundle:x$28,snapshotId:de$7(x$28.id),ernOrActivityType:F$13(x$28),action:v$22.action,isUndo:v$22.isUndo,operationId:U$19,actionParams:v$22.actionParams})),v$22.canUndo&&$se(v$22.action)&&H$10.push(d$11.storeUserActionForUndo({action:{action:v$22.action,snapshotId:de$7(x$28.id),operationId:U$19,actionParams:{snoozedUntil:v$22.action===u$23.unsnoozeBundle?x$28.snoozedUntil:void 0}},bundle:x$28})),H$10;}))),this.performUserActionApiCall$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.performUserActionApiCall),Mu(()=>[this.store.select(o$30)]),q$20(([v$22,x$28])=>{switch(v$22.action){case u$23.clearBundle:case u$23.unclearBundle:return d$11.toggleClearNotificationBundleApiCall({notificationBundleId:v$22.bundleId,teamId:x$28,operationId:v$22.operationId,isUndo:v$22.isUndo,toggle:v$22.action===u$23.clearBundle?`clear`:`unclear`});case u$23.unsnoozeBundle:return d$11.unsnoozeBundleApiCall({bundleId:v$22.bundleId,operationId:v$22.operationId,isUndo:v$22.isUndo});case u$23.snoozeBundle:return d$11.snoozeBundleApiCall({bundleId:v$22.bundleId,snoozedUntil:v$22.actionParams?.snoozedUntil??``,operationId:v$22.operationId,isUndo:v$22.isUndo});case u$23.markBundleRead:case u$23.markBundleUnread:return d$11.updateBundleReadStatusApiCall({notificationBundleId:v$22.bundleId,operationId:v$22.operationId,markAsRead:v$22.action===u$23.markBundleRead});default:return d$11.emptyAction();}}))),this.performUserActionApiCallError$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.performUserActionApiError),q$20(v$22=>(this.inboxToastService.showUserActionErrorToast(v$22.intendedAction),v$22.isActionUndoable&&!v$22.wasUndo?d$11.undoUserAction({operationId:v$22.operationId,isErrorRevert:!0}):d$11.performUserAction({bundleId:v$22.bundleId,action:IM(v$22.intendedAction),canUndo:!!v$22.wasUndo,isUndo:!v$22.wasUndo,isErrorRevert:!0}))))),this.reminderCreated$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.reminderCreated),Mu(()=>$i({filters:this.store.select(R$8),teamId:this.store.select(o$30)})),oe$13(([,{filters:v$22}])=>v$22.status===js$2.NotificationStatus.Snoozed),q$20(([v$22,{teamId:x$28}])=>({rootEntityResourceName:new Use.ClickUpResourceName(`reminder`,x$28,v$22.reminderId).toString(),teamId:x$28})),le$5(({rootEntityResourceName:v$22,teamId:x$28})=>this.api.getNotifications(x$28,{status:`snoozed`,rootEntityResourceName:v$22},void 0,1)),oe$13(_o),Z$12(v$22=>[d$11.storeNotificationResources({resources:qa(v$22.resources)}),d$11.updateBundleOnList({updatedBundle:v$22.notificationBundleGroups[0].notificationBundles[0],action:u$23.snoozeBundle,source:Ps$1.User})]))),this.optimisticPerformAction$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.optimisticPerformAction),Mu(()=>[this.store.select(ee$4),this.store.select(K$4),this.store.select(or),this.store.select(nr),this.store.select(R$8),this.store.select(ei)]),oe$13(([v$22,,,,,,x$28])=>M$12(v$22.operationId)||!x$28.includes(v$22.operationId)),q$20(([v$22,x$28,U$19,H$10,te$16,ye$5])=>{let ke$5=v$22.bundle??Po$1(v$22.snapshotId,x$28);return ke$5||(ke$5=Po$1(v$22.snapshotId,H$10?.bundleGroups??[])),ke$5||(ke$5=Po$1(v$22.snapshotId,te$16?.bundleGroups??[])),{action:v$22,bundle:ke$5,resources:U$19,filters:ye$5};}),oe$13(({action:v$22,bundle:x$28,filters:U$19})=>wse(v$22.action,x$28,U$19)),Rr(({action:v$22,bundle:x$28,resources:U$19})=>{let H$10=x$28&&v$22.source===Ps$1.Websocket&&(x$28.status===js$2.NotificationStatus.Snoozed||v$22.action===u$23.snoozeBundle);if(x$28&&!H$10){let te$16=[d$11.executeOptimisticPerformAction({bundle:x$28,action:v$22.action,operationId:v$22.operationId,actionParams:v$22.actionParams,isUndo:v$22.isUndo,source:v$22.source})];return(v$22.source===Ps$1.User||v$22.source===Ps$1.Error)&&this.inboxCrossTabCommunicationService.sendUserActionMessage({bundle:x$28,snapshotId:v$22.snapshotId,ernOrActivityType:v$22.ernOrActivityType,operationId:v$22.operationId,isUndo:v$22.isUndo,action:v$22.action,resources:$o(x$28,U$19),actionParams:v$22.actionParams}),te$16;}return[d$11.loadBundleAndExecuteOptimisticPerformAction({action:v$22.action,actionParams:v$22.actionParams,operationId:v$22.operationId,ernOrActivityType:v$22.ernOrActivityType,isUndo:v$22.isUndo,source:v$22.source})];}))),this.loadBundleAndExecuteOptimisticPerformAction$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.loadBundleAndExecuteOptimisticPerformAction),Mu(()=>[this.store.select(o$30)]),Z$12(([v$22,x$28])=>Ct$4([qe$6(v$22),this.api.getNotifications(x$28,{status:Ase(v$22.action),rootEntityResourceName:v$22.ernOrActivityType},void 0,1)])),oe$13(([,v$22])=>_o(v$22)),Z$12(([v$22,x$28])=>[d$11.storeNotificationResources({resources:qa(x$28.resources)}),d$11.executeOptimisticPerformAction({bundle:x$28.notificationBundleGroups[0].notificationBundles[0],action:v$22.action,isUndo:v$22.isUndo,operationId:v$22.operationId,actionParams:v$22.actionParams,source:v$22.source})]))),this.executeOptimisticPerformAction$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.executeOptimisticPerformAction),Mu(()=>[this.store.select(Ae$2)]),Rr(([v$22,x$28])=>{let U$19=Ese(v$22.bundle,v$22.action,v$22.actionParams,x$28.direction,v$22.isUndo);return[d$11.updateBundleInCache({updatedBundle:U$19,action:v$22.action,cacheType:U$19.bundleType}),d$11.updateBundleInCache({updatedBundle:U$19,action:v$22.action,cacheType:Vr$1.BundleType.All}),d$11.updateBundleOnList({updatedBundle:U$19,action:v$22.action,source:v$22.source})];}))),this.updateBundleOnList$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.updateBundleOnList),Mu(()=>[this.store.select(R$8),this.store.select(ee$4)]),Rr(([v$22,x$28,U$19])=>{let H$10=Ao(v$22.updatedBundle,x$28,v$22.action),te$16=Po$1(de$7(v$22.updatedBundle.id),U$19),ye$5=v$22.action===u$23.unsnoozeBundle||v$22.action===u$23.snoozeBundle,ke$5=v$22.action===u$23.unclearBundle||ye$5?To(F$13(v$22.updatedBundle),U$19):void 0;switch(Lo(H$10,!!te$16||ye$5&&!!ke$5,!!ke$5,v$22.action,qt(v$22.updatedBundle,ke$5))){case S$10.add:return[d$11.addBundleToList({bundle:v$22.updatedBundle})];case S$10.remove:return te$16?[d$11.removeBundleFromList({notificationBundleId:te$16.id,disableConfetti:!0,shouldTrackInboxZero:v$22.source!==Ps$1.CrossTab})]:[d$11.emptyAction()];case S$10.update:return[d$11.updateBundleOnListAndExpandNext({bundle:v$22.updatedBundle,action:v$22.action})];case S$10.merge:return[d$11.storeBundleGroups({bundleGroups:wo(U$19,zo(v$22.updatedBundle,ke$5))})];case S$10.none:default:return[d$11.emptyAction()];}}))),this.reloadBundlesByErn=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.reloadBundlesByErn),Mu(()=>[this.store.select(ee$4)]),Z$12(([v$22,x$28])=>{return j$23(Mo(v$22.ernOrActivityType,x$28).map(te$16=>d$11.reloadBundleByErn({ernOrActivityType:te$16.rootEntityResourceName,status:te$16.status})));}))),this.reloadBundleByErn=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.reloadBundleByErn),Mu(()=>[this.store.select(o$30)]),Z$12(([v$22,x$28])=>this.api.getNotifications(x$28,{status:v$22.status,rootEntityResourceName:v$22.ernOrActivityType},void 0,1)),oe$13(_o),Mu(()=>[this.store.select(ee$4),this.store.select(to)]),Z$12(([v$22,x$28,U$19])=>{let H$10=v$22.notificationBundleGroups[0].notificationBundles[0],te$16=[d$11.storeBundleGroups({bundleGroups:wo(x$28,H$10)}),d$11.storeNotificationResources({resources:qa(v$22.resources)})];return U$19&&R$11(H$10)&&U$19.rootEntityResourceName===H$10.rootEntityResourceName&&te$16.push(d$11.updateExpandedNotificationBundleId({notificationBundleId:H$10.id})),j$23(te$16);}))),this.updateBundleAndExpandNext$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.updateBundleOnListAndExpandNext),Mu(()=>[this.store.select(h$3),this.store.select(ee$4),this.store.select($s),this.store.select(to),this.store.select(R$8)]),le$5(([v$22,x$28,U$19,H$10,te$16,ye$5])=>{let ke$5=[d$11.storeBundleGroups({bundleGroups:wo(U$19,v$22.bundle)})],Qe$3=v$22.bundle.status===js$2.NotificationStatus.Snoozed,Ct$5=ye$5.status===js$2.NotificationStatus.Snoozed,Zt$4=te$16&&te$16.id===v$22.bundle.id;if(Qe$3&&Ct$5&&Zt$4&&v$22.action===u$23.snoozeBundle){let Fe$6=ok(x$28,Ne$1(x$28,v$22.bundle.id),H$10,!0);ke$5.push(d$11.expandNotificationBundle({notificationBundleId:Fe$6?.id??``}));}return ke$5;}))),this.reloadCounts$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleClearNotificationBundleApiCallSuccess,d$11.snoozeBundleApiCallSuccess,d$11.unsnoozeBundleApiCallSuccess,d$11.updateBundleReadStatusApiCallSuccess,d$11.clearAllNotificationBundlesApiCallSuccess),Mu(()=>[this.store.select(R$8)]),Mu(([,v$22])=>[v$22.bundleType?this.store.select(Xs(v$22.bundleType)):qe$6(void 0)]),oe$13(([[v$22,x$28],U$19])=>{let te$16=!ae$4(x$28)&&!U$19;return v$22.type===d$11.snoozeBundleApiCallSuccess.type||v$22.type===d$11.unsnoozeBundleApiCallSuccess.type||x$28.status===js$2.NotificationStatus.Snoozed||te$16;}),q$20(()=>d$11.getNotificationCounts({forceRefresh:!1,includeUnreadFromAllWorkspaces:!1})))),this.updateBundleInCache$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.updateBundleInCache),Mu(v$22=>[this.store.select(Xs(v$22.cacheType))]),oe$13(([v$22,x$28])=>!Fse(v$22.updatedBundle)&&(x$28?.bundleGroups??[]).length>0),Rr(([v$22,x$28])=>{let U$19=Ao(v$22.updatedBundle,{bundleType:v$22.cacheType,status:`uncleared`},v$22.action),H$10=v$22.action===u$23.unsnoozeBundle||v$22.action===u$23.snoozeBundle,te$16=Po$1(de$7(v$22.updatedBundle.id),x$28.bundleGroups),ye$5=v$22.action===u$23.unclearBundle||H$10?To(F$13(v$22.updatedBundle),x$28.bundleGroups):void 0;switch(Lo(U$19,!!te$16,!!ye$5,v$22.action,qt(v$22.updatedBundle,ye$5))){case S$10.add:return[d$11.optimisticallyUpdateNotificationCounts({bundleType:v$22.updatedBundle.bundleType,bundle:v$22.updatedBundle,change:v$22.updatedBundle.unreadCount>0?1:0}),H$10?d$11.invalidateCache({}):d$11.addBundleToCache({cacheType:v$22.cacheType,bundle:v$22.updatedBundle})];case S$10.remove:return[d$11.removeBundleFromCache({cacheType:v$22.cacheType,bundle:v$22.updatedBundle}),d$11.optimisticallyUpdateNotificationCounts({bundleType:v$22.updatedBundle.bundleType,bundle:v$22.updatedBundle,change:v$22.updatedBundle.unreadCount>0?-1:0})];case S$10.update:return[d$11.updateNotificationsCache({bundleType:x$28.bundleType,nextPageCursor:x$28.nextPageCursor,bundles:wo(x$28.bundleGroups,v$22.updatedBundle)}),d$11.optimisticallyUpdateNotificationCounts({bundleType:v$22.updatedBundle.bundleType,bundle:v$22.updatedBundle,change:v$22.action===u$23.markBundleRead?-1:u$23.markBundleUnread?1:0})];case S$10.merge:let Qe$3=zo(v$22.updatedBundle,ye$5);return[d$11.updateNotificationsCache({bundleType:x$28.bundleType,nextPageCursor:x$28.nextPageCursor,bundles:wo(x$28.bundleGroups,Qe$3)}),d$11.optimisticallyUpdateNotificationCounts({bundleType:v$22.updatedBundle.bundleType,bundle:v$22.updatedBundle,change:ye$5.unreadCount<1&&Qe$3.unreadCount>0?1:0})];case S$10.none:default:return[d$11.emptyAction()];}}))),this.addBundleToCache$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.addBundleToCache),Mu(v$22=>[this.store.select(Xs(v$22.cacheType)),this.store.select(Ae$2)]),oe$13(([,v$22])=>!!v$22),q$20(([v$22,x$28,U$19])=>d$11.updateNotificationsCache({bundleType:v$22.cacheType,bundles:Uo(x$28?.bundleGroups??[],v$22.bundle,U$19.direction),nextPageCursor:x$28?.nextPageCursor})))),this.removeBundleFromCache$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.removeBundleFromCache),Mu(v$22=>[this.store.select(Xs(v$22.cacheType))]),oe$13(([,v$22])=>!!v$22),q$20(([v$22,x$28])=>d$11.updateNotificationsCache({bundleType:v$22.cacheType,bundles:Qo$1(x$28?.bundleGroups??[],F$13(v$22.bundle)),nextPageCursor:x$28?.nextPageCursor})))),this.addBundleToList$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.addBundleToList),Mu(()=>[this.store.select(ee$4),this.store.select(Ks),this.store.select(Ae$2)]),Z$12(([v$22,x$28,U$19,H$10])=>{let te$16=Uo(x$28,v$22.bundle,H$10.direction);return[d$11.storeBundleGroups({bundleGroups:te$16}),d$11.checkPreviousBundleExpand({addedBundleId:v$22.bundle.id})];}))),this.checkPreviousBundleExpand$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.checkPreviousBundleExpand),Mu(()=>[this.store.select(Ks),this.store.select(en)]),Z$12(([v$22,x$28,U$19])=>{let H$10=[];return U$19&&de$7(x$28)===de$7(v$22.addedBundleId)&&H$10.push(d$11.expandNotificationBundle({notificationBundleId:v$22.addedBundleId})),H$10;}))),this.snoozeBundleApiCall$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.snoozeBundleApiCall),Mu(()=>[this.store.select(o$30)]),Z$12(([v$22,x$28])=>this.api.snoozeNotificationBundle(x$28,v$22.bundleId,v$22.snoozedUntil,v$22.operationId).pipe(q$20(()=>d$11.snoozeBundleApiCallSuccess({bundleId:v$22.bundleId})),Xo$2(()=>[d$11.performUserActionApiError({operationId:v$22.operationId,isActionUndoable:!0,bundleId:v$22.bundleId,wasUndo:v$22.isUndo,intendedAction:u$23.snoozeBundle})]))))),this.unsnoozeBundleApiCall$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.unsnoozeBundleApiCall),Mu(()=>[this.store.select(o$30)]),Z$12(([v$22,x$28])=>this.api.unsnoozeNotificationBundle(x$28,v$22.bundleId,v$22.operationId).pipe(q$20(()=>d$11.unsnoozeBundleApiCallSuccess({bundleId:v$22.bundleId})),Xo$2(()=>[d$11.performUserActionApiError({operationId:v$22.operationId,isActionUndoable:!0,bundleId:v$22.bundleId,wasUndo:v$22.isUndo,intendedAction:u$23.unsnoozeBundle})]))))),this.toggleClearNotificationBundleApiCall$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleClearNotificationBundleApiCall),Is$1(()=>this.trackService.trackClearNotification()),Z$12(v$22=>this.api.toggleClearNotificationBundle(v$22.notificationBundleId,v$22.teamId,v$22.toggle,v$22.operationId).pipe(q$20(()=>d$11.toggleClearNotificationBundleApiCallSuccess({notificationBundleId:v$22.notificationBundleId,toggle:v$22.toggle})),Xo$2(()=>[d$11.performUserActionApiError({operationId:v$22.operationId,isActionUndoable:!0,wasUndo:v$22.isUndo,bundleId:v$22.notificationBundleId,intendedAction:v$22.toggle===`clear`?u$23.clearBundle:u$23.unclearBundle})]))))),this.removeBundleFromList$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.removeBundleFromList),Mu(()=>[this.store.select(h$3),this.store.select(At$1),this.store.select(tr),this.store.select(Se$2),this.store.select($s)]),le$5(([v$22,x$28,U$19,H$10,te$16,ye$5])=>{let ke$5=[d$11.removeBundle({notificationBundleId:v$22.notificationBundleId,disableConfetti:v$22.disableConfetti,shouldTrackInboxZero:v$22.shouldTrackInboxZero})],Ct$5=ok(x$28,Ne$1(x$28,v$22.notificationBundleId),ye$5,!0);return U$19&&de$7(te$16)===de$7(v$22.notificationBundleId)?ke$5.push(d$11.expandNotificationBundle({notificationBundleId:Ct$5?.id??``}),h$6.storeExpandedModeEnabled(),_$4.loadNotificationResources({notificationBundleId:Ct$5?.id??``})):de$7(H$10)===de$7(v$22.notificationBundleId)&&ke$5.push(d$11.updateHighlightedNotificationBundleId({notificationBundleId:Ct$5?.id??``})),j$23(ke$5);}))),this.optimisticallyUpdateNotificationCounts$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.optimisticallyUpdateNotificationCounts),Mu(()=>[this.store.select(mr),this.isPageVisible$,this.store.select(Zt$3)]),q$20(([v$22,x$28,U$19,H$10])=>{if(v$22.change===-1&&(v$22.bundle.bundleType===Vr$1.BundleType.Activity&&x$28.activityCount>99||v$22.bundle.bundleType===Vr$1.BundleType.Messages&&x$28.messagesCount>99))return U$9(`Counts`,`Effects`,`optimisticallyUpdateNotificationCounts - reload`,{counts:x$28,change:v$22.change}),U$19&&H$10?d$11.getNotificationCounts({forceRefresh:!1,includeUnreadFromAllWorkspaces:!1}):d$11.emptyAction();let te$16={activityCount:Zp(v$22.bundle.bundleType===Vr$1.BundleType.Activity,x$28.activityCount,v$22.change),messagesCount:Zp(v$22.bundle.bundleType===Vr$1.BundleType.Messages,x$28.messagesCount,v$22.change),assignedActivityCount:Zp(v$22.bundle.bundleType===Vr$1.BundleType.Activity&&!!v$22.bundle.hasAssignment,x$28.assignedActivityCount,v$22.change),assignedMessagesCount:Zp(v$22.bundle.bundleType===Vr$1.BundleType.Messages&&!!v$22.bundle.hasAssignment,x$28.assignedMessagesCount,v$22.change),mentionMessagesCount:Zp(v$22.bundle.bundleType===Vr$1.BundleType.Messages&&!!v$22.bundle.hasMention,x$28.mentionMessagesCount,v$22.change),reminderCount:x$28.reminderCount,savedCount:x$28.savedCount};return U$9(`Counts`,`Effects`,`optimisticallyUpdateNotificationCounts - optimistic update`,{counts:x$28,change:v$22.change,updatedCounts:te$16}),d$11.storeUpdatedNotifcationCounts({timestamp:new Date().toISOString(),counts:te$16});}))),this.clearAllNotificationBundles$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.clearAllNotificationBundles),Mu(()=>[this.store.select(ee$4),this.store.select(Si)]),oe$13(([,v$22,x$28])=>v$22[0]?.notificationBundles?.length>0&&x$28.filters.status!==`cleared`),Is$1(([,,{filters:v$22}])=>this.inboxCrossTabCommunicationService.sendClearAllBundlesMessage({filters:v$22})),le$5(([,v$22,x$28])=>{if(!x$28.nextPageCursor||x$28.sortedBy.direction===N$9.Descending){let U$19=v$22[0]?.notificationBundles,H$10=x$28.sortedBy.direction===N$9.Descending?U$19[0]?.id:U$19[U$19.length-1]?.id;return[d$11.clearAllNotificationBundlesApiCall({teamId:x$28.teamId,mostRecentNotificationBundleSnapshotId:H$10,filters:x$28.filters}),d$11.clearAllNotificationBundlesUpdateList({disableConfetti:!1,shouldTrackInboxZero:!0})];}return[d$11.loadBundleAndClearAllNotificationBundles({teamId:x$28.teamId,filters:x$28.filters})];}))),this.loadBundleAndClearAllNotificationBundles$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.loadBundleAndClearAllNotificationBundles),Z$12(v$22=>Ct$4([qe$6(v$22),this.api.getNotifications(v$22.teamId,v$22.filters,void 0,1)])),oe$13(([,v$22])=>_o(v$22)),le$5(([v$22,x$28])=>[d$11.clearAllNotificationBundlesApiCall({teamId:v$22.teamId,mostRecentNotificationBundleSnapshotId:x$28?.notificationBundleGroups[0]?.notificationBundles[0]?.id,filters:v$22.filters}),d$11.clearAllNotificationBundlesUpdateList({disableConfetti:!1,shouldTrackInboxZero:!0})]))),this.clearAllNotificationBundlesApiCall$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.clearAllNotificationBundlesApiCall),Is$1(()=>this.trackService.trackClearAllNotification()),Z$12(v$22=>this.api.clearAllNotificationBundles(v$22.teamId,v$22.mostRecentNotificationBundleSnapshotId,v$22.filters).pipe(q$20(()=>d$11.clearAllNotificationBundlesApiCallSuccess()),Xo$2(()=>(this.inboxToastService.showError("Unable to clear notifications. Try again."),[d$11.reloadNotifications({silent:!1})])))))),this.updateCountsOnClearAll$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.clearAllNotificationBundlesUpdateList),Mu(()=>[this.store.select(R$8),this.store.select(mr)]),le$5(([v$22,x$28,U$19])=>{let H$10=[],te$16=jse(x$28,U$19);return U$9(`Counts`,`Effects`,`clearAllNotificationBundlesUpdateList - optimistic update`,{counts:U$19,updatedCounts:te$16}),H$10.push(d$11.storeUpdatedNotifcationCounts({timestamp:new Date().toISOString(),counts:te$16})),j$23(H$10);}))),this.openNotificationBundle$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleExpandNotificationBundle),Mu(()=>[this.store.select(to),this.store.select(ee$4),this.store.select(vt),this.store.select(cf),this.store.select(en)]),oe$13(([v$22,x$28])=>v$22.notificationBundleId!==x$28?.id),Is$1(([v$22,,,x$28])=>{this.inboxBundlePerformanceMonitorService.markBundleLoadStart(v$22.notificationBundleId),this.inboxPerformanceService.openNotificationBundle(),this.inboxPerformanceService.expandBundleStart(x$28);}),q$20(([v$22,,x$28,,U$19,H$10])=>({...v$22,notificationBundleId:v$22.notificationBundleId?v$22.notificationBundleId:x$28[0]?.notificationBundles[0]?.id,accessRequest:v$22.entityResourceType===`access-request`||!!U$19?.[v$22.entityResourceId],fullscreenModeEnabled:H$10})),Is$1(({accessRequest:v$22})=>this.trackService.trackClickNotificationGroup(!0,v$22)),le$5(({notificationBundleId:v$22,fullscreenModeEnabled:x$28})=>{let U$19=[d$11.expandNotificationBundle({notificationBundleId:v$22}),h$6.storeExpandedModeEnabled(),_$4.loadNotificationResources({notificationBundleId:v$22})];return x$28?[...U$19,d$11.navigateToExpandedBundle({notificationBundleId:v$22})]:U$19;}))),this.contextMenuOpen$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.contextMenuOpen),le$5(v$22=>[_$4.loadNotificationResources({notificationBundleId:v$22.notificationBundleId})]))),this.closeNotificationBundle$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleExpandNotificationBundle),Mu(()=>[this.store.select(cf),this.store.select(to),this.store.select(At$1),this.store.select(en)]),oe$13(([v$22,,x$28,U$19,H$10])=>U$19&&!H$10&&v$22.notificationBundleId===x$28?.id),Is$1(([v$22,x$28])=>this.trackService.trackClickNotificationGroup(!1,v$22.entityResourceType===`access-request`||!!x$28?.[v$22.entityResourceId])),le$5(()=>[d$11.collapseNotificationBundle(),h$6.resetExpandedModeAndSidebar()]))),this.determineNavigationDirection$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.determineNextNotification),Mu(()=>[this.store.select(cr),this.store.select(gi),this.store.select(At$1),this.store.select(h$3),this.store.select(vt)]),Is$1(([,,,,,v$22])=>this.inboxPerformanceService.navigateBetweenBundlesStart(v$22)),q$20(([v$22,x$28,U$19,H$10,te$16])=>v$22.direction===`next`&&U$19===-1?{bundleToHighlight:te$16[0]?.notificationBundles[0],isBundleExpanded:H$10}:{bundleToHighlight:ok(te$16,H$10?x$28:U$19,v$22.direction),isBundleExpanded:H$10}),oe$13(v$22=>!!v$22.bundleToHighlight),Is$1(v$22=>{v$22.isBundleExpanded&&this.inboxBundlePerformanceMonitorService.markBundleLoadStart(v$22.bundleToHighlight?.id??``);}),le$5(v$22=>v$22.isBundleExpanded?[d$11.resetOpenInputs(),d$11.expandNotificationBundle({notificationBundleId:v$22.bundleToHighlight?.id??``}),h$6.storeExpandedModeEnabled(),_$4.loadNotificationResources({notificationBundleId:v$22.bundleToHighlight?.id??``})]:[d$11.updateHighlightedNotificationBundleId({notificationBundleId:v$22.bundleToHighlight?.id??``})]))),this.loadMoreInFullScreenMode$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.determineNextNotification),oe$13(v$22=>v$22.direction===`next`),Mu(()=>[this.store.select(Qo),this.store.select(cr),this.store.select(Ui)]),oe$13(([,v$22,x$28,U$19])=>!!v$22&&Oo(x$28,U$19)),q$20(()=>d$11.getNotifications({fetchNotificationCount:!0,silent:!1})))),this.loadMoreWhenClearing$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.performUserAction),oe$13(v$22=>v$22.action===u$23.clearBundle||v$22.action===u$23.unclearBundle),le$5(()=>$i({loading:this.store.select(Ko),nextPageCursor:this.store.select(Qo),fullscreenMode:this.store.select(en),bundles:this.store.select(h$3),expandedMode:this.store.select(At$1)})),Is$1(({expandedMode:v$22})=>this.inboxPerformanceService.clearBundleStart(v$22)),oe$13(({loading:v$22,nextPageCursor:x$28,fullscreenMode:U$19,bundles:H$10})=>!v$22&&!!x$28&&!!U$19&&H$10[0]?.notificationBundles?.length<10),q$20(()=>d$11.getNotifications({fetchNotificationCount:!0,silent:!1})))),this.updateReadStatusOnBundleExpand$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.expandNotificationBundle),Mu(()=>[this.store.select(to)]),oe$13(([,v$22])=>!!v$22?.unreadCount),le$5(([v$22,x$28])=>[d$11.updateUnreadIndicatorIndex({unreadCount:x$28?.unreadCount??0}),d$11.performUserAction({bundleId:v$22.notificationBundleId,action:u$23.markBundleRead,canUndo:!1})]))),this.resetOpenInputs$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.resetOpenInputs,d$11.collapseNotificationBundle,d$11.toggleExpandNotificationBundle),Is$1(()=>this.inboxReplyInputService.reset()),q$20(()=>d$11.emptyAction()))),this.reloadReorderdBundle$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.collapseNotificationBundle,d$11.expandNotificationBundle),q$20(()=>{let v$22=this.inboxBundleOrderService.getBundleToReloadDetails();return this.inboxBundleOrderService.clearBundleOrderChanged(),v$22?d$11.checkNewNotifications({forcePartialListReload:!0,reloadListSilently:!0}):d$11.emptyAction();}))),this.updateBundleReadStatusApiCall$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.updateBundleReadStatusApiCall),Mu(()=>this.store.select(o$30)),Z$12(([v$22,x$28])=>this.api.updateBundleReadStatus(v$22.notificationBundleId,x$28,v$22.markAsRead,v$22.operationId).pipe(q$20(()=>d$11.updateBundleReadStatusApiCallSuccess({notificationBundleId:v$22.notificationBundleId,markAsRead:v$22.markAsRead})),Xo$2(()=>[d$11.performUserActionApiError({operationId:v$22.operationId,isActionUndoable:!1,bundleId:v$22.notificationBundleId,intendedAction:v$22.markAsRead?u$23.markBundleRead:u$23.markBundleUnread})]))))),this.loadMoreNotificationsInBundle$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.loadMoreNotificationsInBundle),Mu(()=>this.store.select(Ei)),le$5(([v$22,x$28])=>this.api.loadMoreNotificationsInBundle(v$22.notificationBundleId,x$28.teamId,x$28.filters,v$22.nextCursor).pipe(bs({count:3,delay:(U$19,H$10)=>he$6(H$10*H$10*400)}),Xo$2(()=>qe$6(null)))),q$20(v$22=>v$22?d$11.loadMoreNotificationsInBundleSuccess({resources:qa(v$22.resources),notifications:v$22.notifications,nextCursor:v$22.nextCursor,notificationBundleId:v$22.notificationBundleId}):d$11.loadMoreNotificationsInBundleFailure()))),this.toggleTray$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleTray),Mu(v$22=>[this.store.select(yi),this.store.select(pi(v$22.notificationBundleId))]),oe$13(([,,v$22])=>!!v$22),q$20(([,v$22,x$28])=>{if(x$28?.type===`task`){let U$19=x$28;v$22[U$19.id]?this.trayFacade.removeTaskFromTray(U$19):(this.trayFacade.addTaskToTray(U$19),this.trackService.trackTrayAction(x$28));}else if(x$28?.type===`page`){let U$19={...x$28,id:x$28.docId,name:x$28.docName,viewType:9};v$22[U$19.id]?this.trayFacade.removeViewFromTray(U$19):(this.trayFacade.addDataViewToTray(U$19),this.trackService.trackTrayAction(x$28));}})),{dispatch:!1}),this.toggleTaskFollowing$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleFollowing),Mu(v$22=>[this.store.select(ae$8).pipe(R$20()),this.store.select(Ti$1),this.store.select(pi(v$22.notificationBundleId))]),oe$13(([,,,v$22])=>v$22?.type===`task`),q$20(([,v$22,x$28,U$19])=>{let H$10=x$28[U$19?.id??``];return this.trackService.trackFollowAction(!H$10,ak.ResourceType.Task,U$19?.id??``),Jp.toggleTaskFollow({taskId:U$19?.id??``,data:{followers:{[H$10?`rem`:`add`]:[v$22]}}});}))),this.updateFollowMapForTask=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleFollowing),Mu(v$22=>[this.store.select(b$17).pipe(R$20()),this.store.select(p$24),this.store.select(Ti$1),this.store.select(pi(v$22.notificationBundleId))]),oe$13(([,,,,v$22])=>v$22?.type===`task`),q$20(([,v$22,x$28,U$19,H$10])=>{let te$16=H$10?.id??``,ye$5=x$28[te$16],ke$5=U$19[te$16];return U$19[te$16]=!U$19[te$16],ye$5?(ye$5.users=Un(v$22,ye$5,!!ke$5),ye$5.followers&&(ye$5.followers=Ln(v$22,ye$5,!!ke$5)),new x$21([ye$5])):d$11.emptyAction();}))),this.togglePageFollowing$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleFollowing),Mu(v$22=>[this.store.select(b$17).pipe(R$20()),this.store.select(Ti$1),this.store.select($$4),this.store.select(pi(v$22.notificationBundleId))]),oe$13(([,,,,v$22])=>v$22?.type===`page`),q$20(([,v$22,x$28,U$19,H$10])=>{return{user:v$22,followMap:x$28,page:U$19[H$10.id]};}),oe$13(({page:v$22})=>!!v$22),Z$12(({user:v$22,followMap:x$28,page:U$19})=>{let te$16=Ln(v$22,U$19,!!x$28[U$19.id]);return U$19?j$23([_$4.updatePageResource({page:{...U$19,followers:te$16}}),d$11.setPageFollowers({page:U$19,updatedFollowers:te$16})]):j$23([d$11.emptyAction()]);}))),this.setPageFollowers$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.setPageFollowers),le$5(({page:v$22,updatedFollowers:x$28})=>{let{add:U$19,rem:H$10}=a$3(v$22.followers??[],x$28);return this.dashboardDocService.editPage(v$22.view_id,v$22.id,{followers:{add:U$19,rem:H$10}}).pipe(q$20(te$16=>({page:te$16,success:!0})),Xo$2(()=>qe$6({page:v$22,success:!1})));}),Z$12(({page:v$22,success:x$28})=>{let U$19=[_$4.updatePageResource({page:{...v$22,followers:v$22.followers}})];return x$28&&U$19.push(new Ue$2(v$22.view_id,{id:v$22.id,group_followers:v$22.group_followers})),j$23(U$19);}))),this.deleteSelectedNotificationByRootEntity$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.deleteSelectedNotificationByRootEntity),Mu(()=>[this.store.select(h$3),this.store.select(A$9)]),q$20(([v$22,x$28,U$19])=>{let H$10=Object.values(U$19).find(te$16=>te$16?.id===v$22.rootEntityId||mt$2(te$16)&&te$16?.docId===v$22.rootEntityId);if(H$10)return x$28[0]?.notificationBundles?.find(te$16=>H$10.entityResourceName===te$16.rootEntityResourceName)?.id;}),oe$13(v$22=>!!v$22),q$20(v$22=>d$11.performUserAction({bundleId:v$22,action:u$23.clearBundle,canUndo:!1})))),this.loadAccessRequestsForWorkspace$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.getNotificationsSuccess,d$11.replaceBundleGroupsList),q$20(v$22=>Ose(v$22.type===d$11.getNotificationsSuccess.type?v$22.notificationBundleGroups:v$22.bundleGroups)),oe$13(v$22=>!!v$22?.length),q$20(v$22=>Ef({objectIds:v$22})))),this.readTaskUsers$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.toggleExpandNotificationBundle),Mu(()=>[this.store.select(oo)]),oe$13(([,v$22])=>!!v$22),q$20(([,v$22])=>r$16({taskId:v$22})))),this.addTaskToFavorite$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.addTaskToFavorite),q$20(v$22=>T$19({task:v$22.entity})))),this.addListToFavorite$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.addListToFavorite),Mu(()=>[this.store.select(uo$1)]),q$20(([v$22,x$28])=>T$19({subcategory:x$28[v$22.subcategoryId]})))),this.addDocToFavorite$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.addDocToFavorite),Mu(v$22=>[this.store.select(p$19(v$22.docId))]),oe$13(([,v$22])=>!!v$22),q$20(([v$22,x$28])=>{let U$19=x$28;return n$39({favorite:xo(v$22.teamId,U$19,U$19.parent)});}))),this.addChatViewToFavorite$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.addChatViewToFavorite),Mu(v$22=>[this.store.select(p$19(v$22.chatId))]),oe$13(([,v$22])=>!!v$22),q$20(([v$22,x$28])=>n$39({favorite:J(x$28,v$22.teamId)})))),this.addCategoryToFavorite$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.addCategoryToFavorite),Mu(v$22=>[this.store.select(xe$5(v$22.categoryId,v$22.projectId))]),oe$13(([,v$22])=>!!v$22),q$20(([,v$22])=>T$19({category:v$22})))),this.removeEntityFromFavorite$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.removeEntityFromFavorite),Mu(()=>[this.store.select(a$17)]),q$20(([{entity:v$22,teamId:x$28},U$19])=>{let H$10=V(v$22,U$19)?.id;return v$22.type===ak.ResourceType.ChatView&&H$10?R$18({teamId:x$28,viewId:v$22.id}):v$22.type===ak.ResourceType.Page&&H$10&&`docId`in v$22?R$18({teamId:x$28,viewId:v$22.docId}):H$10?h$12({favoriteId:H$10}):d$11.emptyAction();}))),this.updateSaveForLaterFilters$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.updateSaveForLaterFilters),q$20(()=>d$11.getNotifications({fetchNotificationCount:!0,silent:!0})))),this.refreshEmitter$=this.refreshControllerEnabled$.pipe(le$5(v$22=>this.createPageVisibleReconnectedEmitter().pipe(oe$13(()=>!v$22)))),this.refreshNotifications$=Ke$1(()=>this.refreshEmitter$.pipe(Mu(()=>[this.store.select(Zt$3),this.store.select(o$30)]),Is$1(([v$22,x$28,U$19])=>Il.info(`[Inbox] refreshEmitter$, websocketReconnect: ${v$22}, isInboxPage: ${x$28}, teamId: ${U$19}`)),oe$13(([,,v$22])=>!!v$22),le$5(([v$22,x$28])=>{let U$19=[];return!x$28&&v$22&&U$19.push(d$11.getNotificationCounts({forceRefresh:!1,includeUnreadFromAllWorkspaces:!1})),x$28&&U$19.push(d$11.checkNewNotifications({forcePartialListReload:v$22,reloadListSilently:!0})),Il.info(`[Inbox] refreshNotifications$, actions: ${U$19.map(H$10=>H$10.type).join(`, `)}`),j$23(U$19);}))),this.inboxSplitConfigsService.init();}ngrxOnRunEffects(e$19){return this.refreshService.addRefreshStrategy(new ik(this.store)),e$19;}createPageVisibleReconnectedEmitter(){let e$19=new n$33(),r$34=new Fe$5();return Hi$2(this.browserStatusService.createStatusDetector().addDetectorStrategy(e$19).addDetectorStrategy(r$34).getStatus().pipe(Is$1(()=>Il.info(`[Inbox] isPageVisibleAndOnline$`)),Ss$1(1),Os$3(NSe),q$20(()=>!1)),this.websocketService.onConnected().pipe(Is$1(a$30=>Il.info(`[Inbox] isWebsocketConnected$, val:`,a$30)),oe$13(a$30=>!!a$30),Ss$1(1),q$20(()=>!0)));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(sk),ge$10(q$19),ge$10(rk),ge$10(z$8),ge$10(bt$1),ge$10(nk),ge$10(ot),ge$10(te$9),ge$10(j$7),ge$10(bt$2),ge$10(Nse),ge$10(eu),ge$10(H),ge$10(dt$1),ge$10(Bse),ge$10(b$12),ge$10(Pc),ge$10(te$1),ge$10(St));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();zse=(()=>{class t$21{constructor(e$19,r$34,o$32){this.location=e$19,this.router=r$34,this.inboxParamsService=o$32;}openBundleRoute(e$19,r$34){let o$32=Gse(r$34),s$25=this.location.path();this.router.navigateByUrl(`/${e$19}/inbox/b/${o$32}`,{skipLocationChange:Hse(s$25,o$32)},{tag:`inbox-v3-routing-service-navigate-to-bundle`,path:`/${e$19}/inbox/b/${o$32}`});}navigateToInbox(e$19,r$34,o$32,s$25={}){this.router.goToInbox(e$19,{queryParams:this.getParamUpdate(r$34,o$32,s$25)});}replaceStateToInbox(e$19,r$34,o$32,s$25={}){this.location.replaceState(`/${e$19}/inbox`,this.getParamUpdateAsQueryString(r$34,o$32,s$25),void 0,{locationType:`notifications`});}getParamUpdateAsQueryString(e$19,r$34,o$32={}){return new m$27({fromObject:this.getParamUpdate(e$19,r$34,o$32)}).toString();}getParamUpdate(e$19,r$34,o$32={}){let s$25=this.inboxParamsService.createParamUpdate(o$32,e$19,r$34),n$46={tab:s$25.tab};return s$25.filter&&(n$46.filter=s$25.filter),n$46;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Ft),ge$10(qd),ge$10(st$2));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Yse=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.inboxV3RoutingService=C$23(zse),this.inboxFeatureFlagService=C$23(j$7),this.navigateToBundleUrlOnExpandBundle$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.navigateToExpandedBundle),ve$9(m$28),Mu(()=>[this.store.select(o$30),this.store.select(to),this.store.select(en)]),oe$13(([,,,e$19])=>e$19),q$20(([,e$19,r$34])=>({teamId:e$19,notification:r$34})),oe$13(this.notificationIsDefined.bind(this)),Is$1(({teamId:e$19,notification:r$34})=>this.inboxV3RoutingService.openBundleRoute(e$19,qse(r$34)))),{dispatch:!1}),this.returnToInbox$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.returnToInbox),Mu(()=>[this.store.select(to),this.store.select(o$30),this.store.select(R$8),this.inboxFeatureFlagService.isChatRemindersV3Enabled$,this.inboxFeatureFlagService.layoutV4Enabled$]),oe$13(([,e$19])=>!!e$19),Is$1(([e$19,,r$34,o$32,s$25,n$46])=>this.inboxV3RoutingService.navigateToInbox(r$34,s$25,n$46,o$32))),{dispatch:!1}),this.onMarkUnread$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.performUserAction),oe$13(e$19=>e$19.action===u$23.markBundleUnread),q$20(()=>d$11.returnToInbox()))),this.closeBundleOnRouteAwayFrom$=Ke$1(()=>this.actions$.pipe(Ye$2(bt$4),q$20(e$19=>e$19.payload),oe$13(e$19=>mk(e$19)),oe$13(e$19=>!ck(e$19)),Mu(()=>this.store.select(Se$2)),q$20(([,e$19])=>e$19),oe$13(e$19=>e$19.length>0),q$20(()=>d$11.collapseNotificationBundle()))),this.returnToInboxIfBundleRoutedToAndUserIsInInlineMode$=Ke$1(()=>this.actions$.pipe(Ye$2(bt$4),q$20(e$19=>e$19.payload),oe$13(mk),oe$13(ck),Mu(()=>this.store.select(en)),oe$13(([,e$19])=>!e$19),Mu(()=>[this.store.select(o$30),this.store.select(R$8),this.inboxFeatureFlagService.isChatRemindersV3Enabled$,this.inboxFeatureFlagService.layoutV4Enabled$]),Is$1(([,e$19,r$34,o$32,s$25])=>this.inboxV3RoutingService.replaceStateToInbox(e$19,o$32,s$25,r$34))),{dispatch:!1}),this.onRouteToBundleId$=Ke$1(()=>this.actions$.pipe(Ye$2(bt$4),q$20(e$19=>e$19.payload),oe$13(mk),oe$13(ck),q$20(e$19=>Jse(e$19.routerState)),oe$13(e$19=>!!e$19),q$20(e$19=>Qse(e$19)),oe$13(e$19=>!!e$19),this.emitWhenNotificationsAreLoaded(),this.emitIfBundleNotAlreadySelected(),q$20(e$19=>d$11.openBundleOnRouteTo({notificationBundleId:e$19.notificationBundleId,entityResourceId:e$19.entityResourceId,entityResourceType:e$19.entityResourceType})))),this.openBundleOnRouteTo$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.openBundleOnRouteTo),Mu(e$19=>this.store.select(li$1(e$19.notificationBundleId))),q$20(([e$19,r$34])=>d$11.toggleExpandNotificationBundle({notificationBundleId:e$19.notificationBundleId,entityResourceType:e$19.entityResourceType,entityResourceId:e$19.entityResourceId})))),this.openBundleOnRouteToFailure$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.openBundleOnRouteToFailure),q$20(()=>d$11.returnToInbox()))),this.markBundleAsReadWhenRoutedTo$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.openBundleOnRouteTo),q$20(e$19=>d$11.performUserAction({bundleId:e$19.notificationBundleId,action:u$23.markBundleRead,canUndo:!1}))));}emitWhenNotificationsAreLoaded(){return e$19=>e$19.pipe(le$5(r$34=>this.store.select(h$3).pipe(oe$13(o$32=>o$32.length>0),q$20(()=>r$34),Ve$4(1))));}emitIfBundleNotAlreadySelected(){return e$19=>e$19.pipe(Mu(()=>this.store.select(to)),oe$13(([r$34,o$32])=>!o$32||o$32.id!==r$34.notificationBundleId),q$20(([r$34])=>r$34));}notificationIsDefined(e$19){return!!e$19.notification;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();Zse=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.commentsService=o$32,this.inboxMonitoringService=s$25,this.increaseCommentRepliesCount$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.increaseRepliesCount),Mu(()=>[this.store.select(i$15)]),oe$13(([n$46,a$30])=>!!a$30[n$46.commentId]),q$20(([n$46,a$30])=>{let c$37=a$30[n$46.commentId],m$32={};return c$37?.comment&&(c$37.comment.threaded_replies=Number(c$37.comment.threaded_replies??0)+1,m$32[n$46.commentId]=c$37),y$9.updateCommentsState({comments:m$32});}))),this.decreaseCommentRepliesCount$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.decreaseRepliesCount),Mu(()=>[this.store.select(i$15)]),oe$13(([n$46,a$30])=>!!a$30[n$46.commentId]),q$20(([n$46,a$30])=>{let c$37=a$30[n$46.commentId],m$32={};if(c$37?.comment){let l$26=Math.max(Number(c$37.comment.threaded_replies??1),1);c$37.comment.threaded_replies=l$26-1,m$32[n$46.commentId]=c$37;}return y$9.updateCommentsState({comments:m$32});}))),this.commentDelete$=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.DeleteCommentStart),q$20(n$46=>y$9.storeDeletedCommentId({commentId:n$46.payload.commentId})))),this.commentDeleteSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.DeleteCommentSuccess),le$5(n$46=>{let a$30=[y$9.deleteCommentSuccess({commentId:n$46.payload.commentId})];return n$46.payload.type===a$27.Comment&&a$30.push(y$9.decreaseRepliesCount({commentId:n$46.payload.parent})),a$30;}))),this.commentDeleteUndo$=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.UndoDeleteCommentStart),q$20(n$46=>y$9.removeDeletedCommentId({commentId:n$46.payload.commentId})))),this.preloadCommentImages$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.preloadCommentImages),q$20(n$46=>{let a$30=[];return n$46.comments.forEach(c$37=>{let m$32=Xse(c$37);m$32?.length&&a$30.push(...m$32);}),a$30.length&&a$30.forEach(c$37=>{let m$32=new Image();m$32.src=c$37;}),d$11.emptyAction();}))),this.followThread$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.followCommentThread),Mu(()=>this.store.select(i$15)),oe$13(([n$46,a$30])=>!!a$30[n$46.commentId]),le$5(([{user:n$46,commentId:a$30},c$37])=>this.commentsService.addCommentFollowers(a$30,[n$46.id]).pipe(le$5(()=>{let m$32=c$37[a$30],l$26={};return m$32?.comment&&(m$32.comment.thread_followers=[...(m$32.comment.thread_followers??[]),n$46],l$26[a$30]=m$32),qe$6(y$9.updateCommentsState({comments:l$26}));}),Xo$2(m$32=>qe$6(new _d(m$32))))))),this.unfollowThread$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.unfollowCommentThread),Mu(()=>this.store.select(i$15)),oe$13(([n$46,a$30])=>!!a$30[n$46.commentId]),le$5(([{user:n$46,commentId:a$30},c$37])=>this.commentsService.removeCommentFollower(a$30,[n$46.id]).pipe(le$5(()=>{let m$32=c$37[a$30],l$26={};return m$32?.comment&&(m$32.comment.thread_followers=m$32.comment.thread_followers?.filter(g$19=>g$19.id!==n$46.id),l$26[a$30]=m$32),qe$6(y$9.updateCommentsState({comments:l$26}));}),Xo$2(m$32=>qe$6(new _d(m$32))))))),this.markChildCommentsMising$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.markChildCommentsMising),Mu(()=>[this.store.select(ae$8)]),Is$1(([n$46,a$30])=>{this.inboxMonitoringService.markChildCommentsMissing(a$30,n$46.commentsThread,n$46.receivedRepliesIds,n$46.renderedRepliesIds);})),{dispatch:!1});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(X$5),ge$10(eu));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();lk=t$21=>t$21.find(i$27=>i$27.type===`comment-parent`);dm();hr$3();dk=F$23(k$10());tne=(t$21,i$27,e$19,r$34)=>{if(!i$27||!e$19)return d$11.emptyAction();switch(i$27){case dk.ResourceType.Task:return USe(t$21,e$19,r$34);default:return d$11.emptyAction();}},USe=(t$21,i$27,e$19)=>{if(t$21.payload.type===a$27.Comment)return B$11({taskId:i$27,parentId:t$21.payload.parent,commentId:t$21.payload.commentId});let r$34=c$20(e$19,t$21.payload.commentId);return A$11({taskId:t$21.payload.parent,id:r$34?.id??``});},rne=(t$21,i$27)=>{if(!i$27)return d$11.emptyAction();switch(i$27){case dk.ResourceType.Task:return HSe(t$21);case dk.ResourceType.ChatView:return WSe(t$21);default:return d$11.emptyAction();}},WSe=t$21=>n$23.updateCommentSuccess({id:t$21.payload.comment.id,comment:t$21.payload.comment}),HSe=t$21=>t$21.payload.changes.assignee||t$21.payload.changes.group_assignee?GSe(t$21):t$21.payload.changes.resolved!==void 0?zSe(t$21):d$11.emptyAction(),GSe=t$21=>t$21.payload.type===a$27.Comment?U$10({id:t$21.payload.comment.id,update:t$21.payload.comment}):Q$8({id:t$21.payload.comment.id,update:t$21.payload.comment}),zSe=t$21=>t$21.payload.type===a$27.Comment?c9({commentId:t$21.payload.comment.id,taskId:t$21.payload.comment.root_parent_id??``,params:{resolved:t$21.payload.changes.resolved}}):te$7({id:t$21.payload.comment.id,resolved:!!t$21.payload.changes.resolved});VN();one=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.store=r$34,this.syncIntoInboxTaskReplyAdded$=Ke$1(()=>this.actions$.pipe(Ye$2(r$21),oe$13(o$32=>!o$32.syncFromInbox),Mu(()=>[this.store.select(to)]),oe$13(([,o$32])=>!!o$32),q$20(([o$32])=>{let s$25={...o$32.commentDto,...o$32.createCommentResult,...o$32.comment,reactions:[],user:o$32.user};return new Ss({key:I$15(s$25.parent,a$27.Comment),rethrow:!1,comment:s$25,type:a$27.Comment,parent:s$25.parent,attachments:o$32.comment.attachments?.map(n$46=>n$46.id)??[],createCommentResult:o$32.createCommentResult});}))),this.syncOutsideInboxAddThreadComment$=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.CreateCommentSuccess),Mu(()=>[this.store.select(v$13),this.store.select(ve$3)]),oe$13(([o$32,s$25,n$46])=>!!n$46&&!!s$25&&s$25===o$32.payload.parent&&!!o$32.payload.createCommentResult),q$20(([o$32,s$25,n$46])=>y$9.syncTaskThreadReplyAdded({task:n$46,comment:o$32.payload.comment,parentId:s$25,createCommentResult:o$32.payload.createCommentResult,attachments:o$32.payload.attachments,key:o$32.payload.key})))),this.syncIntoInboxV2CreateCommentSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.createCommentSuccess),Mu(()=>[this.store.select(to)]),oe$13(([,o$32])=>!!o$32),q$20(([o$32])=>{let n$46=lk(o$32.comment.version?.data?.relationships??[])?.object_id;return n$46?y$9.syncIntoInboxReplyAdded({parentCommentId:n$46,commentId:o$32.comment.id.toString()}):d$11.emptyAction();}))),this.syncIntoInboxReplyAddedCreateSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.CreateCommentSuccess),Mu(()=>[this.store.select(to),this.store.select(xi)]),oe$13(([,o$32])=>!!o$32),q$20(([o$32,s$25,n$46])=>j$11(s$25.rootEntityResourceName)&&n$46&&o$1(n$46)!==o$32.payload.parent?d$11.emptyAction():y$9.syncIntoInboxReplyAdded({parentCommentId:o$32.payload.parent,commentId:o$32.payload.comment.id})))),this.syncIntoInboxReplyAdded$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.syncIntoInboxReplyAdded),Mu(()=>[this.store.select(to)]),oe$13(([,o$32])=>!!o$32),Z$12(([{parentCommentId:o$32,commentId:s$25},n$46])=>{let a$30=MM(n$46,o$32),c$37=j$11(n$46.rootEntityResourceName),m$32=a$30?.map(f$33=>f$33.commentId)?.filter(f$33=>f$33!==o$32)?.length??0,l$26=Re$1(n$46?.rootEntityResourceName??``),g$19=[y$9.reloadParentComment({commentId:o$32,rootEntityId:l$26,silent:!0})];return!c$37&&ene(n$46,o$32)&&m$32>0?g$19.push(y$9.loadChildCommentsForBundle({bundle:n$46,checkNewIfLoaded:!0,threadParentId:o$32,expectedNewReplyId:s$25})):g$19.push(y$9.loadPreviousReplies({parentId:o$32,threadDetailsKey:at$4(n$46.rootEntityResourceName,o$32,c$37),isReminder:c$37,expectedNewReplyId:s$25})),j$23(g$19);}))),this.syncIntoInboxReactionAdded$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.addReactionFromWebsocket,n$23.removeReactionFromWebsocket,n$23.addCommentReactionOptimistically,n$23.removeCommentReactionOptimistically),q$20(o$32=>({reaction:o$32.type===n$23.addCommentReactionOptimistically.type||o$32.type===n$23.removeCommentReactionOptimistically.type?{commentId:o$32.commentId,userId:`user`in o$32?o$32.user.id:o$32.userId,reaction:o$32.reaction}:o$32.reaction,deleted:o$32.type===n$23.removeReactionFromWebsocket.type||o$32.type===n$23.removeCommentReactionOptimistically.type})),Mu(()=>[this.store.select(to)]),oe$13(([,o$32])=>!!o$32),Mu(([o$32,s$25])=>[this.store.select(x$13(o$32.reaction.commentId)),$i([...Object.keys(s$25?.threadCommentDetailsByParentCommentId??{}).map(n$46=>this.store.select(B$7(n$46,o$32.reaction.commentId)))])]),q$20(([[o$32],s$25,n$46])=>({reaction:o$32.reaction,deleted:o$32.deleted,comment:s$25?.comment??n$46.filter(a$30=>!!a$30)[0]})),oe$13(({comment:o$32})=>!!o$32),q$20(({reaction:o$32,deleted:s$25,comment:n$46})=>{let a$30=ine(o$32.reaction,{id:o$32.userId,email:``},s$25,n$46.reactions);return new Ds({key:I$15(n$46.parent??``,n$46.type),parent:n$46.parent??``,comment:{...n$46,reactions:a$30},type:n$46.type,changes:{reactions:a$30},removeResolved:!1});}))),this.syncOutsideInboxWebsocketCommentEdit$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.updateWebsocketEditedComment),q$20(o$32=>new W$16({key:I$15(o$32.comment.parent??``,a$27.Comment),parent:o$32.comment.parent??``,type:a$27.Comment,comment:o$32.comment})))),this.syncIntoInboxCommentUpdate$=Ke$1(()=>this.actions$.pipe(Ye$2(n$23.updateCommentOptimistically,Qe$1,ze),Mu(()=>[this.store.select(i$15),this.store.select(uu$1),this.store.select(mi)]),q$20(([o$32,s$25,n$46,a$30])=>{let c$37=``,m$32={},l$26,g$19,f$33;o$32.type===Qe$1.type||o$32.type===ze.type?(c$37=o$32.commentId,m$32=o$32.params):o$32.type===n$23.updateCommentOptimistically.type&&(c$37=o$32.id,m$32=o$32.comment),m$32.assignee&&(l$26=m$32.assignee===w$21?w$21:n$46.find(R$21=>R$21.id===m$32.assignee));let h$15=m$32.resolved_by?.id;h$15&&(g$19=n$46.find(R$21=>U$16(R$21.id,h$15))),m$32.group_assignee&&(f$33=m$32.group_assignee===w$21?w$21:a$30[m$32.group_assignee]);let I$25=!!s$25[c$37]?.comment,A$22={...s$25[c$37]?.comment,...o$32.comment};return{changes:m$32,comment:A$22,newAssignee:l$26,newGroupAssignee:f$33,inboxCommentLoaded:I$25,newResolvedBy:g$19};}),oe$13(({inboxCommentLoaded:o$32})=>o$32),q$20(({changes:o$32,comment:s$25,newAssignee:n$46,newGroupAssignee:a$30,newResolvedBy:c$37})=>{let m$32=s$25.assignee,l$26=s$25.resolved_by,g$19=s$25.group_assignee;return n$46&&(m$32=n$46===w$21?void 0:n$46,g$19=void 0),c$37&&(l$26=c$37),a$30&&(g$19=a$30===w$21?void 0:a$30,m$32=void 0),new Ds({key:I$15(s$25.parent??``,s$25.type),parent:s$25.parent??``,comment:{...s$25,...o$32,assignee:m$32,resolved_by:l$26,group_assignee:g$19},type:s$25.type,changes:o$32,removeResolved:!1});}))),this.syncIntoInboxDeleteSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(f$15,X$4),oe$13(o$32=>!!o$32.comment),q$20(o$32=>new ws({key:I$15(o$32.comment.parent??``,o$32.comment.type),parent:o$32.comment.parent??``,commentId:o$32.comment.id,type:o$32.comment.type})))),this.syncIntoInboxDeleteComment$=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.DeleteCommentStart,c$26.UndoDeleteCommentStart),q$20(o$32=>({action:o$32,comment:o$32.comment})),oe$13(({comment:o$32})=>!!o$32),q$20(({action:o$32,comment:s$25})=>{let n$46=o$32.type===c$26.DeleteCommentStart;return new Ds({key:I$15(s$25.parent??``,s$25.type),parent:s$25.parent??``,comment:{...s$25,removed:n$46},type:s$25.type,changes:{removed:n$46},removeResolved:!1});}))),this.syncOutsideInboxCommentDeleteSuccess=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.DeleteCommentSuccess),Mu(()=>[this.store.select(_$3),this.store.select(f$14)]),q$20(([o$32,s$25,n$46])=>({action:o$32,selectedRootEntity:s$25,taskHistoryItemMap:n$46})),q$20(({action:o$32,selectedRootEntity:s$25,taskHistoryItemMap:n$46})=>tne(o$32,s$25?.type,s$25?.id,n$46)))),this.syncOutsideInboxUpdateCommentStart=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.UpdateCommentStart),Mu(()=>[this.store.select(_$3)]),q$20(([o$32,s$25])=>rne(o$32,s$25?.type)))),this.syncIntoInboxUpdateCommentData$=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.UpdateCommentData,c$26.UpdateCommentSuccess),Mu(()=>[this.store.select(i$15)]),q$20(([o$32,s$25])=>{let n$46=o$32.payload.comment.id,a$30=s$25[n$46],c$37={};return a$30?.comment&&(a$30={...a$30,comment:{...a$30.comment,...o$32.payload.comment}},c$37[n$46]=a$30),y$9.updateCommentsState({comments:c$37});}))),this.syncIntoInboxNewReaction$=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.AddCommentReaction,c$26.RemoveCommentReaction),Mu(()=>[this.store.select(i$15)]),q$20(([o$32,s$25])=>({reactions:[...o$32.payload.comment.reactions],comment:s$25[o$32.payload.comment.id]})),oe$13(({comment:o$32})=>!!o$32?.comment&&!!o$32.comment.type),q$20(({reactions:o$32,comment:s$25})=>new Ds({key:I$15(s$25.comment.parent??``,s$25.comment.type),parent:s$25.comment.parent??``,type:s$25.comment.type,comment:{...s$25.comment,reactions:[...o$32]},changes:{},removeResolved:!1}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();sne=t$21=>t$21.filter(i$27=>!i$27.reload).reduce((i$27,e$19)=>({...i$27,[e$19.id]:{id:e$19.id,loading:!0}}),{}),nne=(t$21,i$27,e$19,r$34)=>t$21.reduce((o$32,s$25)=>{let n$46=KSe(s$25,i$27);n$46||(n$46=e$19[s$25]?.comment);let a$30=r$34.includes(s$25);return{...o$32,[s$25]:{id:s$25,comment:n$46,loading:!1,error:!n$46&&!a$30,deleted:a$30}};},{}),KSe=(t$21,i$27)=>i$27.find(e$19=>e$19.id===t$21),RM=t$21=>{let i$27={};return t$21.forEach(e$19=>{i$27[e$19.id]={id:e$19.id,comment:e$19,loading:!1};}),i$27;};ane=(t$21,i$27,e$19)=>{if(!t$21[0]?.notificationBundles)return[];return u$35(FM(t$21[0].notificationBundles.flatMap(o$32=>o$32.recentNotifications),i$27,e$19),o$32=>o$32.id);},FM=(t$21,i$27,e$19,r$34=!1)=>{return YSe(t$21.map(s$25=>{let n$46=s$25.commentRelatedDetails?.parentCommentId??s$25.commentsThread?.parentCommentId??``,a$30=QSe(s$25)??``;return JSe(s$25.rootEntityResourceId??``,rt$2(s$25.historyItem.rootEntityResourceName??``),[n$46,...a$30,...(s$25.commentRelatedDetails?.commentRelatedIds??[])],e$19);}).flat().filter(s$25=>!!s$25.id),i$27,r$34);};JSe=(t$21,i$27,e$19,r$34)=>e$19?e$19.map(o$32=>({id:o$32,rootEntityId:t$21,rootEntityResourceType:i$27,reload:!!r$34?.includes(t$21)})):[],YSe=(t$21,i$27,e$19=!1)=>u$35(t$21.filter(r$34=>e$19||!i$27[r$34.id]?.comment&&!i$27[r$34.id]?.loading||r$34.reload),r$34=>r$34.id);xM=(t$21,i$27)=>t$21.length?[t$21.slice(0,i$27)].concat(xM(t$21.slice(i$27),i$27)):[];u$33();dm();cne=[`thread_comment_count`,`thread_follower_ids`,`thread_group_follower_member_ids`,`thread_unfollower_ids`,`thread_user_ids`,`user_map`],mne=t$21=>{let e$19=XSe(t$21),r$34={};return Object.entries(e$19).forEach(([o$32,s$25])=>{r$34[o$32]=xM(s$25,25);}),r$34;},XSe=t$21=>s$22(t$21,i$27=>i$27.rootEntityResourceType),lne=(t$21,i$27)=>{let e$19=i$27.map(r$34=>r$34.id);return t$21.getBulkComments({ids:e$19},cne).pipe(q$20(r$34=>({commentsDto:r$34,requestedComments:i$27})),Xo$2(()=>qe$6({commentsDto:void 0,requestedComments:i$27})));},dne=t$21=>t$21?.comments.filter(i$27=>!!i$27.data).map(i$27=>{let e$19=nbe(t$21,i$27.data.id);return ZSe(i$27.data,e$19);})??[],pne=t$21=>t$21?.comments.filter(i$27=>i$27.status===`not_found_or_authorized`).map(i$27=>i$27.object_id)??[],pk=(t$21,i$27,e$19)=>({...t$21,...ebe(t$21,i$27,e$19)}),ZSe=(t$21,i$27)=>{let e$19=new Set(i$27?.thread_unfollower_ids??[]);return{...t$21,threaded_replies:i$27?.thread_comment_count??0,thread_followers:d$22(l$25((i$27?.thread_follower_ids??[]).concat(i$27?.thread_group_follower_member_ids??[])))?.filter(r$34=>!e$19.has(r$34))?.map(r$34=>parseInt(r$34,10)),threaded_users:i$27?.thread_user_ids.map(r$34=>parseInt(r$34,10))};},ebe=(t$21,i$27,e$19)=>({comment:tbe(t$21.comment,e$19),assignee:t$21.assignee?lh(i$27,t$21.assignee):void 0,assigned_by:t$21.assigned_by?lh(i$27,t$21.assigned_by):void 0,resolved_by:t$21.resolved_by?lh(i$27,t$21.resolved_by):void 0,user:lh(i$27,t$21.userid??``),reactions:sbe(t$21.reactions,i$27),group_assignee:t$21.group_assignee?e$19[t$21.group_assignee]:void 0,thread_followers:OM(i$27,t$21.thread_followers??[]),threaded_users:OM(i$27,t$21.threaded_users??[]),attachment_parent:t$21.attachment_parent?{...t$21.attachment_parent,...obe(t$21.attachment_parent)}:void 0});sbe=(t$21,i$27)=>t$21.map(e$19=>(e$19.userid&&(e$19.user=lh(i$27,e$19.userid)),e$19)),nbe=(t$21,i$27)=>t$21?.comment_threads.find(e$19=>e$19.parent_comment_id===i$27),lh=(t$21,i$27)=>OM(t$21,[i$27])[0],OM=(t$21,i$27)=>i$27.filter(e$19=>!!e$19).map(e$19=>{let r$34=abe(t$21,e$19);return r$34?(r$34.username=r$34.username??r$34?.name,r$34.profilePicture=r$34.profilePicture??r$34.avatar?.picture_url,r$34):e$19.toString()===`-1`?Co:{...c$29({id:e$19}),username:"User"};}),abe=(t$21,i$27)=>t$21[i$27],PM=(t$21,i$27,e$19,r$34,o$32)=>{let s$25={limit:100,filters:{order_direction:e$19,parent:{type:`comment`,id:i$27,include_replies:!0}}};return o$32?s$25.cursor=o$32:s$25.filters.start_comment_id=r$34,t$21.searchComments(s$25,cne).pipe(q$20(n$46=>({comments:n$46.comments,lastPage:!n$46.next_cursor,cursor:n$46.next_cursor,userMap:n$46.user_map})),Xo$2(n$46=>qe$6({error:!0,comments:[],lastPage:!0,errorDetails:{apiError:n$46,parentId:i$27,firstCommentId:r$34,cursor:o$32}})));};VN();une=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.commentsServiceV3=o$32,this.inboxMonitoringService=s$25,this.setLoadingComments$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.loadCommentsV3Start),oe$13(n$46=>!!n$46.commentsToLoad.length&&!n$46.silent),q$20(n$46=>y$9.updateCommentsState({comments:sne(n$46.commentsToLoad)})))),this.loadParentComments$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.preloadResourcesOnListLoad,d$11.storeBundleGroups),Mu(()=>[this.store.select(h$3),this.store.select(i$15),this.store.select(Mi)]),q$20(([,n$46,a$30,c$37])=>y$9.loadCommentsV3Start({commentsToLoad:ane(n$46,a$30,c$37)})))),this.loadClipResourceParentComments$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.preloadResourcesOnListLoad),q$20(n$46=>{let a$30=[];return n$46?.resources&&(a$30=Object.values(n$46.resources).filter(c$37=>N$5(c$37)&&rt$2(c$37?.parentEntityResourceName??``)===`comment`).map(c$37=>Re$1(c$37?.parentEntityResourceName??``))),a$30;}),oe$13(n$46=>!!n$46.length),Z$12(n$46=>qe$6(y$9.loadCommentsV3Start({commentsToLoad:n$46.map(a$30=>({id:a$30,rootEntityId:a$30,rootEntityResourceType:`comment`,reload:!1}))}))))),this.loadExpandedParentComments$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.expandNotificationBundle),Mu(()=>[this.store.select(to),this.store.select(i$15),this.store.select(Mi)]),oe$13(([,n$46])=>!!n$46),q$20(([,n$46,a$30,c$37])=>y$9.loadCommentsV3Start({commentsToLoad:FM(n$46?.recentNotifications??[],a$30,c$37,!0),silent:!0})))),this.loadParentCommentsSplitChunks$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.loadCommentsV3Start),Z$12(n$46=>{let a$30=mne(n$46.commentsToLoad),c$37=[];return Object.entries(a$30).forEach(([m$32,l$26])=>{l$26.forEach(g$19=>{c$37.push(y$9.loadCommentsV3ApiCall({commentsToLoad:g$19,parentType:m$32}));});}),c$37;}))),this.loadCommentsV3ApiCall$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.loadCommentsV3ApiCall),oe$13(n$46=>!!n$46.commentsToLoad.length),Z$12(n$46=>lne(this.commentsServiceV3,n$46.commentsToLoad)),q$20(n$46=>({comments:dne(n$46.commentsDto),deletedCommentsIds:pne(n$46.commentsDto),requestedComments:n$46.requestedComments,userMap:n$46.commentsDto?.user_map})),Mu(()=>[this.store.select(mi),this.store.select(i$15)]),q$20(([{userMap:n$46,comments:a$30,deletedCommentsIds:c$37,requestedComments:m$32},l$26,g$19])=>({comments:a$30.map(f$33=>pk(f$33,n$46??{},l$26)),deletedCommentsIds:c$37,requestedComments:m$32,existingComments:g$19})),Z$12(({comments:n$46,requestedComments:a$30,deletedCommentsIds:c$37,existingComments:m$32})=>{let l$26=a$30.map(f$33=>f$33.id);return j$23([y$9.updateCommentsState({comments:nne(l$26,n$46,m$32,c$37)}),y$9.preloadCommentImages({comments:n$46})]);}))),this.setLoadingChildComments$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.loadChildCommentsStart),oe$13(n$46=>n$46.isFirstPage),Mu(()=>[this.store.select(i$15)]),q$20(([n$46,a$30])=>y$9.updateCommentsState({comments:{[n$46.firstCommentId]:{id:n$46.firstCommentId,loading:!0,...a$30[n$46.firstCommentId]}}})))),this.loadFirstXBundleChildComments$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.preloadResourcesOnListLoad),Mu(()=>[this.store.select(h$3)]),oe$13(([,n$46])=>!!n$46[0]?.notificationBundles[0]),Z$12(([,n$46])=>[...[n$46[0].notificationBundles[0],...Xp$1(n$46,0,`next`,9)].map(m$32=>y$9.loadChildCommentsForBundle({bundle:m$32,checkNewIfLoaded:!1}))]))),this.loadChildCommentsForSelectedBundle$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.loadChildCommentsForSelectedBundle,d$11.expandNotificationBundle,d$11.loadMoreNotificationsInBundleSuccess),Mu(()=>[this.store.select(to)]),oe$13(([,n$46])=>!!n$46),Z$12(([,n$46])=>[y$9.loadChildCommentsForBundle({bundle:n$46,checkNewIfLoaded:!0}),y$9.loadAdjacentChildComments()]))),this.reloadParentComment$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.reloadParentComment),q$20(n$46=>y$9.loadCommentsV3Start({commentsToLoad:[{id:n$46.commentId,rootEntityId:n$46.rootEntityId,reload:n$46.silent}]})))),this.deleteThreadDetails$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.executeOptimisticPerformAction),oe$13(n$46=>n$46.action===u$23.clearBundle&&!!n$46.bundle.threadCommentDetailsByParentCommentId),Z$12(n$46=>[y$9.deleteThreadDetails({threadDetailsKeys:Object.keys(n$46.bundle.threadCommentDetailsByParentCommentId).map(a$30=>R$11(n$46.bundle)?at$4(n$46.bundle.rootEntityResourceName,a$30,j$11(n$46.bundle.rootEntityResourceName)):a$30)})]))),this.loadChildCommentsForBundle$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.loadChildCommentsForBundle),Mu(n$46=>[this.store.select(i$15),this.store.select(Mi),this.store.select(Kr(n$46.bundle.rootEntityResourceName)),this.store.select(c$18)]),oe$13(([,,,n$46])=>n$46?.type!==`reminder`),Z$12(([n$46,a$30,c$37,m$32,l$26])=>{let g$19=n$46.bundle,f$33=[],h$15=g$19.threadCommentDetailsByParentCommentId;return Vt$1(m$32,h$15,a$30,c$37,n$46.checkNewIfLoaded,n$46.threadParentId,n$46.expectedNewReplyId,l$26,g$19.rootEntityResourceName).forEach(A$22=>{f$33.push(y$9.loadChildCommentsStart(A$22));}),f$33;}))),this.increaseCommentRepliesCountV3$=Ke$1(()=>this.actions$.pipe(Ye$2(c$26.CreateCommentSuccess),q$20(n$46=>y$9.increaseRepliesCount({commentId:n$46.payload.parent})))),this.getPreviousReplies$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.loadPreviousReplies),Z$12(n$46=>qe$6(n$46).pipe(ps$2(n$46.isRetry?500:0))),Mu(()=>[this.store.select(c$18)]),q$20(([n$46,a$30])=>{return{action:n$46,firstCommentId:a$30[n$46.threadDetailsKey]?.[0],parentId:n$46.parentId};}),Z$12(({action:n$46,firstCommentId:a$30,parentId:c$37})=>Ct$4([qe$6({parentId:n$46.parentId,threadDetailsKey:n$46.threadDetailsKey,isRetry:n$46.isRetry,firstCommentId:a$30,isReminder:n$46.isReminder,expectedNewReplyId:n$46.expectedNewReplyId}),PM(this.commentsServiceV3,c$37,`desc`,n$46.isReminder?void 0:a$30,n$46.cursor)])),Mu(()=>[this.store.select(mi)]),q$20(([[n$46,a$30],c$37])=>({params:n$46,response:a$30,comments:a$30.comments.map(m$32=>pk(m$32,a$30.userMap??{},c$37)),commentIds:a$30.comments.map(m$32=>m$32.id).reverse().filter(m$32=>m$32!==n$46.firstCommentId)})),Z$12(({response:n$46,params:a$30,comments:c$37,commentIds:m$32})=>{if(!!a$30.expectedNewReplyId&&!n$46.cursor&&!n$46.comments.find(f$33=>f$33.id===a$30.expectedNewReplyId)&&!a$30.isRetry)return[y$9.loadPreviousReplies({parentId:a$30.parentId,threadDetailsKey:a$30.threadDetailsKey,isRetry:!0,isReminder:a$30.isReminder,expectedNewReplyId:a$30.expectedNewReplyId})];if(n$46.error)return[y$9.loadPreviousRepliesError({threadDetailsKey:a$30.threadDetailsKey})];let g$19=[y$9.loadPreviousRepliesSuccess({comments:RM(c$37),commentIds:m$32,threadDetailsKey:a$30.threadDetailsKey,loadingNewReply:!!a$30.expectedNewReplyId})];return!n$46.lastPage&&n$46.cursor&&!a$30.expectedNewReplyId&&g$19.push(y$9.loadPreviousReplies({parentId:a$30.parentId,threadDetailsKey:a$30.threadDetailsKey,cursor:n$46.cursor,isReminder:a$30.isReminder})),g$19;}))),this.loadChildCommentsStart$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.loadChildCommentsStart),Z$12(n$46=>qe$6(n$46).pipe(ps$2(n$46.isRetry?500:0))),Z$12(n$46=>Ct$4([qe$6(n$46),PM(this.commentsServiceV3,n$46.parentId,`asc`,n$46.firstCommentId,n$46.cursor)])),Mu(()=>[this.store.select(mi)]),q$20(([[n$46,a$30],c$37])=>(this.inboxMonitoringService.saveChildCommentLoadResult({requestedParentId:n$46.parentId,requestedCursor:n$46.cursor,feDetails:{isRetry:n$46.isRetry,isThreadReload:n$46.isThreadReload,expectedNewReplyId:n$46.expectedNewReplyId,error:a$30.error,errorDetails:a$30.errorDetails},requestedFirstCommentId:n$46.firstCommentId,returnedChildCommentIds:a$30.comments.map(m$32=>m$32.id),date:new Date().toISOString()}),{action:n$46,response:{...a$30,comments:a$30.comments.map(m$32=>pk(m$32,a$30.userMap??{},c$37))}})),Mu(()=>[this.store.select(ae$8)]),Is$1(([{action:n$46,response:a$30},c$37])=>{a$30.error?this.inboxMonitoringService.markChildCommentsLoadFail(c$37,a$30.errorDetails,n$46.isRetry):(a$30?.comments?.length??0)===0&&this.inboxMonitoringService.markChildCommentsLoadEmptyResponse(c$37,{parentId:n$46.parentId,firstCommentId:n$46.firstCommentId,cursor:n$46.cursor},n$46.isRetry,a$30);}),Z$12(([{action:n$46,response:a$30}])=>{let c$37=!!n$46.expectedNewReplyId&&!a$30.cursor&&!a$30.comments.find(g$19=>g$19.id===n$46.expectedNewReplyId);if((a$30.error||c$37)&&!n$46.isRetry)return[y$9.loadChildCommentsStart({...n$46,isRetry:!0})];if(a$30.error)return[y$9.loadChildCommentsError({comments:{[n$46.firstCommentId]:{id:n$46.firstCommentId,loading:!1,error:!0}}})];let m$32=a$30.comments.map(g$19=>g$19.id),l$26=[y$9.loadChildCommentsSuccess({comments:RM(a$30.comments),commentIds:m$32,threadDetailsKey:n$46.threadDetailsKey,isThreadReload:n$46.isThreadReload})];return!a$30.lastPage&&a$30.cursor&&l$26.push(y$9.loadChildCommentsStart({parentId:n$46.parentId,threadDetailsKey:n$46.threadDetailsKey,firstCommentId:n$46.firstCommentId,isFirstPage:!1,isRetry:!1,cursor:a$30.cursor,isThreadReload:!1})),l$26;}))),this.loadAdjecentChildComments$=Ke$1(()=>this.actions$.pipe(Ye$2(y$9.loadAdjacentChildComments),Mu(()=>[this.store.select(cr),this.store.select(h$3)]),oe$13(([,n$46])=>!!n$46&&n$46!==-1),Z$12(([,n$46,a$30])=>{let m$32=Xp$1(a$30,n$46,`next`,5),l$26=Xp$1(a$30,n$46,`prev`,5);return[...[...m$32,...l$26].map(f$33=>y$9.loadChildCommentsForBundle({bundle:f$33,checkNewIfLoaded:!1}))];})));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(te$8),ge$10(eu));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();fne=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.store=r$34,this.userActionMessage$=Ke$1(()=>this.actions$.pipe(Ye$2($s$3.handleCrossTabMessage),oe$13(o$32=>o$32.message.type===`userActionMessage`),q$20(o$32=>o$32.message),le$5(o$32=>{let s$25=[];return o$32.resources&&s$25.push(d$11.storeNotificationResources({resources:o$32.resources})),s$25.push(d$11.optimisticPerformAction({bundle:o$32.bundle,snapshotId:o$32.snapshotId,ernOrActivityType:o$32.ernOrActivityType,action:o$32.action,isUndo:o$32.isUndo,actionParams:o$32.actionParams,operationId:o$32.operationId,source:Ps$1.CrossTab})),s$25;}))),this.crossTabMessageInvalidateCache$=Ke$1(()=>this.actions$.pipe(Ye$2($s$3.handleCrossTabMessage),oe$13(o$32=>o$32.message.type===`clearAllBundles`),q$20(o$32=>o$32.message),Mu(()=>[this.store.select(R$8)]),oe$13(([o$32,s$25])=>!kt(o$32.filters,s$25)),q$20(([o$32])=>d$11.invalidateCache({bundleType:o$32.filters.bundleType})))),this.clearAllBundles$=Ke$1(()=>this.actions$.pipe(Ye$2($s$3.handleCrossTabMessage),oe$13(o$32=>o$32.message.type===`clearAllBundles`),q$20(o$32=>o$32.message),Mu(()=>[this.store.select(R$8)]),oe$13(([o$32,s$25])=>kt(o$32.filters,s$25)),q$20(()=>d$11.clearAllNotificationBundlesUpdateList({disableConfetti:!0,shouldTrackInboxZero:!1})))),this.fullscreenModeEnabledMessage$=Ke$1(()=>this.actions$.pipe(Ye$2($s$3.handleCrossTabMessage),oe$13(o$32=>o$32.message.type===`fullscreenModeEnabledMessage`),q$20(o$32=>o$32.message),q$20(o$32=>h$6.storeFullscreenModeEnabled({enabled:o$32.enabled})))),this.syncCounts$=Ke$1(()=>this.actions$.pipe(Ye$2($s$3.handleCrossTabMessage),oe$13(o$32=>o$32.message.type===`notificationCountsUpdate`),q$20(o$32=>o$32.message),Is$1(o$32=>{U$9(`Counts`,`Effects`,`handleCrossTabMessage - sync counts into inbox`,{...o$32});}),q$20(o$32=>d$11.storeUpdatedNotifcationCountsSync({...o$32})))),this.groupByDateEnabledMessage$=Ke$1(()=>this.actions$.pipe(Ye$2($s$3.handleCrossTabMessage),oe$13(o$32=>o$32.message.type===`groupByDateEnabledMessage`),q$20(o$32=>o$32.message),q$20(o$32=>h$6.storeGroupByDateEnabled({enabled:o$32.enabled})))),this.showAllTabEnabledMessage$=Ke$1(()=>this.actions$.pipe(Ye$2($s$3.handleCrossTabMessage),oe$13(o$32=>o$32.message.type===`showAllTabEnabledMessage`),q$20(o$32=>o$32.message),q$20(o$32=>h$6.storeShowAllTabEnabled({enabled:o$32.enabled})))),this.sidebarEnabledMessage$=Ke$1(()=>this.actions$.pipe(Ye$2($s$3.handleCrossTabMessage),oe$13(o$32=>o$32.message.type===`sidebarEnabledMessage`),q$20(o$32=>o$32.message),q$20(o$32=>h$6.storeSidebarEnabled({enabled:o$32.enabled})))),this.sortDirectionMessage$=Ke$1(()=>this.actions$.pipe(Ye$2($s$3.handleCrossTabMessage),oe$13(o$32=>o$32.message.type===`sortDirectionMessage`),q$20(o$32=>o$32.message),le$5(o$32=>[h$6.storeSortParams({sortedBy:o$32.sortedBy}),d$11.reloadNotifications({silent:!1})])));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();aa=F$23(k$10());hne=t$21=>{let i$27=new Set();return Object.values(t$21).forEach(e$19=>{e$19&&e$19.parent_comment_type===a$27.Task&&e$19.parent_comment_parent&&i$27.add(e$19.parent_comment_parent);}),Array.from(i$27);};cbe=t$21=>{let i$27=t$21?.parentEntityResourceName??``,e$19=Re$1(i$27);return rt$2(i$27)===`task`&&e$19?e$19:void 0;},gne=(t$21,i$27)=>{let e$19=new Set(),r$34=new Set();return Object.values(t$21).forEach(o$32=>{if(N$5(o$32)){let s$25=cbe(o$32);s$25?e$19.add(s$25):r$34.add(o$32?.id??``);}else if(ut$1(o$32)){e$19.add(o$32?.id??``);let s$25=o$32?.parentTaskId;s$25&&e$19.add(s$25);}else if(mt$2(o$32)){let s$25=o$32?.parentId;s$25&&e$19.add(s$25);}}),{taskIds:Array.from(e$19).filter(o$32=>o$32!==i$27),attachmentIds:Array.from(r$34).filter(o$32=>o$32!==i$27)};};yne=(t$21,i$27,e$19)=>{if(!t$21||i$27.hierarchyMap[t$21]||i$27.chatRoomsMap[t$21]||i$27.attachments[t$21])return!1;let o$32=e$19[t$21];return o$32?!o$32.statuses:!0;};VN();vne=[s$15.Statuses,s$15.Permissions,s$15.SpaceId],Sne=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37){this.actions$=e$19,this.store=r$34,this.attachmentApiService=o$32,this.taskService=s$25,this.dataViewService=n$46,this.dashboardDocService=a$30,this.taskV3Service=c$37,this.loadExpandedNotificationResource$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.loadNotificationResources),Mu(m$32=>[this.store.select(li$1(m$32.notificationBundleId)),this.store.select(A$9)]),oe$13(([,m$32])=>!!m$32),le$5(([,m$32,l$26])=>{let g$19=[],f$33=m$32,h$15=l$26[f$33.rootEntityResourceName??``];if(h$15?.type===aa.ResourceType.Reminder)h$15=l$26[h$15.associatedRootEntity];switch(h$15?.type){case aa.ResourceType.Page:g$19.push(_$4.loadPageResource({notificationBundle:f$33,notificationResource:h$15}),_$4.loadViewResource({notificationResource:h$15}));break;case aa.ResourceType.View:case aa.ResourceType.ChatView:g$19.push(_$4.loadViewResource({notificationResource:h$15}));break;case aa.ResourceType.Subcategory:g$19.push(_$4.loadSubcategoryMembers({rootEntityResourceName:f$33.rootEntityResourceName}));break;case aa.ResourceType.Task:g$19.push(_$4.loadTaskResource({taskId:h$15.id}),new Ae$4({taskId:h$15.id}));break;case aa.ResourceType.Clip:g$19.push(_$4.loadAttachments({attachmentIds:[h$15.id]}));break;default:break;}return m$32&&g$19.push(_$4.loadAdjacentTaskResources({notificationBundle:m$32})),g$19;}))),this.loadTasksOnListLoad$=Ke$1(()=>this.actions$.pipe(Ye$2(d$11.preloadResourcesOnListLoad),Mu(()=>[this.store.select(to),this.store.select(_$3),this.store.select(o$30)]),Z$12(([m$32,l$26,g$19,f$33])=>{let h$15=[];l$26&&g$19?.type===aa.ResourceType.Page&&h$15.push(_$4.loadPageResource({notificationBundle:l$26,notificationResource:g$19}));let{taskIds:I$25,attachmentIds:A$22}=gne(m$32.resources,f$33);return h$15.push(_$4.loadTaskResources({taskIds:I$25}),_$4.loadAttachments({attachmentIds:A$22})),j$23(h$15);}))),this.loadTaskResource$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.loadTaskResource),Mu(()=>[this.store.select(p$24)]),oe$13(([{taskId:m$32},l$26])=>!l$26[m$32]),le$5(([{taskId:m$32}])=>this.taskV3Service.fetchTaskById(m$32,[],vne)),le$5(m$32=>[new x$21([m$32],[],{fromAPI:!0}),r$16({taskId:m$32.id})]))),this.loadTaskUsers$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.loadTaskResource),Mu(()=>[this.store.select(p$24),this.store.select(vt),this.store.select(Se$2)]),oe$13(([,,m$32,l$26])=>!(m$32&&l$26)),oe$13(([{taskId:m$32},l$26])=>!!l$26[m$32]&&!l$26[m$32]?.group_members&&!l$26[m$32]?.members),q$20(([{taskId:m$32}])=>r$16({taskId:m$32})))),this.loadTaskResources$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.loadTaskResources),Mu(()=>[this.store.select(yt$1),this.store.select(o$30),this.store.select(p$24)]),q$20(([{taskIds:m$32},l$26,g$19,f$33])=>({taskIds:m$32.filter(h$15=>yne(h$15,l$26,f$33)),teamId:g$19})),oe$13(({taskIds:m$32})=>!!m$32.length),Z$12(({taskIds:m$32,teamId:l$26})=>this.taskV3Service.fetchTasksExperienceById(m$32,l$26,vne)),q$20(m$32=>new x$21(m$32)))),this.updateTaskResource$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.updateTaskResource),Mu(()=>[this.store.select(p$24)]),q$20(([m$32,l$26])=>{let g$19=l$26[m$32.taskId];g$19&&this.taskService.setStatus(g$19,m$32.status);})),{dispatch:!1}),this.loadViewResource$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.loadViewResource),le$5(m$32=>an(this.dataViewService,m$32.notificationResource)),oe$13(m$32=>!!m$32),le$5(m$32=>{let l$26={};return m$32?(l$26[m$32.id]=m$32,[pe$4({views:[ue$3(m$32)],navigate:!1}),he$2({viewId:m$32.id,parent:m$32.parent}),_$4.viewsLoadSuccess({views:l$26})]):[_$4.emptyAction()];}))),this.loadPageResource$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.loadPageResource),le$5(m$32=>Ct$4([qe$6(m$32.notificationBundle),cn(m$32.notificationResource,this.dashboardDocService)])),oe$13(([,m$32])=>!!m$32),q$20(([m$32,l$26])=>_$4.pageLoadSuccess({page:l$26,notificationBundle:m$32})))),this.loadSubcategoryMembers$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.loadSubcategoryMembers),Mu(()=>[this.store.select(A$9)]),oe$13(([m$32,l$26])=>!!l$26[m$32.rootEntityResourceName]?.id),q$20(([m$32,l$26])=>ts$1({subcategoryId:l$26[m$32.rootEntityResourceName]?.id??``})))),this.docDeleted$=Ke$1(()=>this.actions$.pipe(Ye$2(G$13),Z$12(m$32=>{return j$23(m$32.ids.map(g$19=>d$11.deleteSelectedNotificationByRootEntity({rootEntityId:g$19})));}))),this.loadAttachmentResources$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.loadAttachments),Mu(()=>[this.store.select(ge$2)]),q$20(([m$32,l$26])=>m$32.attachmentIds.filter(g$19=>!l$26[g$19])),oe$13(m$32=>m$32.length>0),Z$12(m$32=>this.attachmentApiService.getAttachmentsByIds(m$32)),q$20(m$32=>_$4.attachmentLoadSuccess({attachments:n$40(m$32.attachments,`id`)})))),this.loadTasksFromAttachmentParents$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.attachmentLoadSuccess),q$20(m$32=>hne(m$32.attachments)),oe$13(m$32=>m$32.length>0),q$20(m$32=>_$4.loadTaskResources({taskIds:m$32})))),this.updateReminderRecurring$=Ke$1(()=>this.actions$.pipe(Ye$2(_$4.updateReminderRecurring),oe$13(m$32=>m$32.recurring===null),q$20(m$32=>s$8.updateReminder({reminderId:m$32.reminderId,reminder:{deleteRecurrence:!0},isRecurringUpdate:!0})))),this.reloadBundleAfterReminderRecurringUpdate$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.updateReminderSuccess),oe$13(m$32=>!!m$32.isRecurringUpdate),Mu(()=>[this.store.select(A$9)]),q$20(([m$32,l$26])=>Object.keys(l$26).find(g$19=>{let f$33=l$26[g$19];return f$33?.type===aa.ResourceType.Reminder&&f$33.id===m$32.reminderId;})),oe$13(m$32=>!!m$32),q$20(m$32=>d$11.reloadBundlesByErn({ernOrActivityType:m$32}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(M$6),ge$10(zr$1),ge$10(Qt),ge$10(z$8),ge$10(lo));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();hr$3();VN();bne=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.store=r$34,this.inboxCrossTabCommunicationService=o$32,this.toggleFullscreen$=Ke$1(()=>this.actions$.pipe(Ye$2(h$6.toggleFullscreenModeEnabled),Mu(()=>[this.store.select(b$17)]),le$5(([s$25,n$46])=>(this.inboxCrossTabCommunicationService.changeFullscreenModeEnabled(s$25.fullscreen),[S$19({userData:{user_data:{...n$46?.user_data,inbox_fullscreen_enabled:s$25.fullscreen}}}),h$6.storeFullscreenModeEnabled({enabled:s$25.fullscreen})])))),this.toggleGroupByDate$=Ke$1(()=>this.actions$.pipe(Ye$2(h$6.toggleGroupByDateEnabled),Mu(()=>[this.store.select(Bt),this.store.select(b$17)]),le$5(([,s$25,n$46])=>(this.inboxCrossTabCommunicationService.changeGroupByDateEnabled(!s$25),[S$19({userData:{user_data:{...n$46?.user_data,inbox_group_by_date_enabled:!s$25}}}),h$6.storeGroupByDateEnabled({enabled:!s$25})])))),this.toggleShowAllTab$=Ke$1(()=>this.actions$.pipe(Ye$2(h$6.toggleShowAllTabEnabled),Mu(()=>[this.store.select(tn),this.store.select(b$17)]),le$5(([,s$25,n$46])=>(this.inboxCrossTabCommunicationService.changeShowAllTabEnabled(!s$25),[S$19({userData:{user_data:{...n$46?.user_data,inbox_show_all_tab_enabled:!s$25}}}),h$6.storeShowAllTabEnabled({enabled:!s$25})])))),this.toggleSidebarEnabled$=Ke$1(()=>this.actions$.pipe(Ye$2(h$6.toggleSidebarEnabled),Mu(()=>[this.store.select(vt),this.store.select(wt$2),this.store.select(Et$1),this.store.select(b$17)]),le$5(([,s$25,n$46,a$30,c$37])=>{let m$32=!(s$25||n$46)||a$30,l$26=[h$6.storeSidebarEnabled({enabled:m$32})];return m$32!==s$25&&(this.inboxCrossTabCommunicationService.changeSidebarEnabled(m$32),l$26.push(S$19({userData:{user_data:{...c$37?.user_data,inbox_sidebar_enabled:m$32}}}))),l$26;}))),this.changeSortDirection$=Ke$1(()=>this.actions$.pipe(Ye$2(h$6.changeSortDirection),Mu(()=>[this.store.select(b$17),this.store.select(Ae$2)]),le$5(([s$25,n$46,a$30])=>{if(a$30.direction===s$25.direction)return[];let c$37={direction:s$25.direction};return this.inboxCrossTabCommunicationService.changeSortDirection(c$37),[S$19({userData:{user_data:{...n$46?.user_data,inbox_sort_direction:c$37}}}),h$6.storeSortParams({sortedBy:c$37}),d$11.invalidateCache({}),d$11.reloadNotifications({silent:!1})];}))),this.setInboxLayout$=Ke$1(()=>this.actions$.pipe(Ye$2(p$28),le$5(s$25=>{let n$46=s$25.payload?.user_data?.inbox_fullscreen_enabled,a$30=s$25.payload?.user_data?.inbox_sidebar_enabled,c$37=s$25.payload?.user_data?.inbox_group_by_date_enabled,m$32=s$25.payload?.user_data?.inbox_show_all_tab_enabled,l$26=s$25.payload?.user_data?.inbox_sort_direction??{direction:N$9.Descending},g$19=m$21(n$46)?n$46:!0,f$33=m$21(a$30)?a$30:!0,h$15=m$21(c$37)?c$37:!0;return[h$6.storeFullscreenModeEnabled({enabled:g$19}),h$6.storeSidebarEnabled({enabled:f$33}),h$6.storeGroupByDateEnabled({enabled:h$15}),h$6.storeShowAllTabEnabled({enabled:!!m$32}),h$6.storeSortParams({sortedBy:l$26})];})));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(nk));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();Cne=t$21=>t$21.find(i$27=>i$27.type===`thread-parent`);dm();mbe=f$30.byNamespace(`reminders`);VN();Tne=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32){this.actions$=e$19,this.websocketOvmService=r$34,this.websocketV2Service=o$32,this.inboxFeatureFlagService=s$25,this.store=n$46,this.websocketService=a$30,this.inboxReplyInputService=c$37,this.websocketConfigService=m$32,this.v2WebsocketsEnabled$=this.inboxFeatureFlagService.v2WebsocketsEnabled$,this.inboxMsgToUser$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.InboxMessageToUser).pipe(Mu(()=>this.v2WebsocketsEnabled$),oe$13(([,l$26])=>l$26),q$20(([l$26])=>l$26.payload),oe$13(l$26=>l$26.method===`newNotificationAvailable`),q$20(l$26=>ie$4.newInboxNotification({timestamp:l$26.timestamp,inboxTab:l$26.type,updatedEntities:l$26.updatedEntities})))),this.v1WebsocketNewInboxNotification$=Ke$1(()=>this.actions$.pipe(Ye$2(ie$4.v1WebsocketNewInboxNotification),Mu(()=>[this.v2WebsocketsEnabled$,this.store.select(o$30)]),oe$13(([l$26,g$19,f$33])=>l$26.workspaceId===f$33&&!g$19),q$20(([l$26])=>ie$4.newInboxNotification({timestamp:l$26.timestamp,inboxTab:l$26.inboxTab,updatedEntities:l$26.updatedEntities})))),this.updateInboxTabCounts$=Ke$1(()=>this.actions$.pipe(Ye$2(ie$4.updateInboxTabCountsWSMessage),Mu(()=>[this.store.select(o$30)]),oe$13(([l$26,g$19])=>l$26.workspaceId===g$19),q$20(([l$26])=>ie$4.updateInboxTabCounts({...l$26})))),this.removeUnauthorizedNotificationBundles$=Ke$1(()=>this.actions$.pipe(Ye$2(ie$4.removeUnauthorizedNotificationBundlesWSMessage),Mu(()=>[this.store.select(o$30)]),oe$13(([l$26,g$19])=>l$26.workspaceId===g$19),q$20(([l$26])=>ie$4.removeUnauthorizedNotificationBundles({...l$26})))),this.newInboxNotification$=Ke$1(()=>this.actions$.pipe(Ye$2(ie$4.newInboxNotification),Mu(()=>this.store.select(Ys)),oe$13(([l$26])=>!$M(l$26.updatedEntities)),oe$13(([l$26,g$19])=>!g$19.length||l$26.timestamp>g$19),le$5(([l$26])=>this.inboxReplyInputService.isSomeInputOpened()?(this.inboxReplyInputService.updateNotificationAvailability(!0,l$26.timestamp),[]):[ie$4.updateLastTimestamp({timestamp:l$26.timestamp}),d$11.checkNewNotifications({forcePartialListReload:!1,reloadListSilently:!0})]))),this.updatedInboxNotification$=Ke$1(()=>this.actions$.pipe(Ye$2(ie$4.newInboxNotification),oe$13(l$26=>$M(l$26.updatedEntities)),q$20(l$26=>({rootErn:_ne(l$26.updatedEntities),commentEntities:kne(l$26.updatedEntities)})),Z$12(({rootErn:l$26,commentEntities:g$19})=>{let f$33=[],h$15=l$26?Re$1(l$26):``;if(l$26&&f$33.push(d$11.reloadBundlesByErn({ernOrActivityType:l$26})),g$19.length>0){let I$25=g$19.map(A$22=>({id:Re$1(A$22),rootEntityId:h$15,reload:!0}));f$33.push(y$9.loadCommentsV3Start({commentsToLoad:I$25}));}return j$23(f$33);}))),this.reminderEvent$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.ReminderEvent).pipe(q$20(l$26=>uk(l$26)),ps$2(1e3),Z$12(l$26=>{switch(l$26.operation){case`created`:return l$26.reminderIds.map(g$19=>d$11.reminderCreated({reminderId:g$19}));default:return[];}}))),this.replyCommentCreated$=Ke$1(()=>this.websocketOvmService.getEventsByType([t$17.ChatCommentCreated,t$17.CommentCreated]).pipe(Mu(()=>[this.store.select(to),this.store.select(c$18)]),oe$13(([,l$26])=>!!l$26),q$20(([l$26,g$19,f$33])=>{let h$15=Re$1(g$19?.rootEntityResourceName??``),I$25=Cne(t$4(l$26))?.object_id,A$22=lk(t$4(l$26))?.object_id;return{commentId:l$26.version_change.object_id,threadParentId:I$25,entityId:h$15,parentCommentId:A$22,selectedNotificationBundle:g$19,threadIds:A$22?f$33[A$22]||[]:[]};}),Z$12(({commentId:l$26,entityId:g$19,parentCommentId:f$33,threadParentId:h$15,selectedNotificationBundle:I$25,threadIds:A$22})=>{if(!f$33||h$15!==g$19||!I$25)return[];let R$21=[y$9.reloadParentComment({commentId:f$33,rootEntityId:g$19,silent:!0}),y$9.loadChildCommentsForBundle({bundle:I$25,checkNewIfLoaded:!0,threadParentId:f$33})];if(A$22.length===0){let w$26=j$11(I$25.rootEntityResourceName);R$21.push(y$9.loadPreviousReplies({parentId:f$33,threadDetailsKey:at$4(I$25.rootEntityResourceName,f$33,w$26),isReminder:w$26,expectedNewReplyId:l$26}));}return j$23(R$21);}))),this.connectToEntity$=Ke$1(()=>this.store.select(_$3).pipe(hs$3(),oe$13(([l$26,g$19])=>l$26?.id!==g$19?.id),q$20(([l$26,g$19])=>({prevType:l$26?.type,prevId:l$26?.id,type:g$19?.type,id:g$19?.id,docId:g$19?.docId??null})),Is$1(l$26=>{l$26.prevType===`task`?this.websocketService.connectToTask(null):l$26.prevType===`chat-view`&&l$26.prevId&&this.websocketService.disconnectFromViews([l$26.prevId]);}),Is$1(l$26=>{l$26.type===`task`&&l$26.id&&this.websocketService.connectToTask(l$26.id),l$26.type===`page`&&this.websocketService.connectToPage(l$26.docId,l$26.id??void 0),l$26.type===`chat-view`&&l$26.id&&this.websocketService.connectToViews([l$26.id]);})),{dispatch:!1}),this.reactionUpdated$=Ke$1(()=>this.websocketService.onChange.pipe(oe$13(l$26=>l$26.msg===d$15.ReactionUpdated),Mu(()=>[this.store.select(to)]),oe$13(([,l$26])=>!!l$26),q$20(([l$26])=>{let g$19={reaction:{date:Date.now(),commentId:l$26.id,reaction:l$26.update[0]?.reaction,userId:l$26.update[0]?.user.id}};return l$26.deleted?n$23.removeReactionFromWebsocket(g$19):n$23.addReactionFromWebsocket(g$19);}))),this.viewCommentEdited$=Ke$1(()=>this.websocketService.onChange.pipe(oe$13(l$26=>l$26.type===c$26.UpdateCommentFromWebsocket),Mu(()=>[this.store.select(i$15)]),q$20(([l$26,g$19])=>({event:l$26,comment:g$19[l$26.payload.comment.id]?.comment})),oe$13(({comment:l$26})=>!!l$26),q$20(({event:l$26})=>y$9.updateComment({commentId:l$26.payload.comment.id,update:l$26.payload.comment})))),this.websocketSyncUserAction$=Ke$1(()=>this.actions$.pipe(Ye$2(ie$4.syncUserAction),Mu(()=>[this.store.select(o$30)]),oe$13(([l$26,g$19])=>l$26.workspaceId===g$19),le$5(([l$26])=>{switch(l$26.operation){case u$23.markBundleRead:case u$23.markBundleUnread:case u$23.clearBundle:case u$23.unclearBundle:case u$23.snoozeBundle:case u$23.unsnoozeBundle:return[d$11.optimisticPerformAction({source:Ps$1.Websocket,ernOrActivityType:Zt(l$26.bundleId),snapshotId:de$7(l$26.bundleId),action:l$26.operation,operationId:l$26.operationId})];default:return[d$11.emptyAction()];}})));}ngrxOnRunEffects(e$19){return[t$17.InboxMessageToUser].forEach(r$34=>{let o$32=this.websocketConfigService.createConfiguration(r$34);this.websocketConfigService.addConfiguration(o$32);}),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(M$4),ge$10(G$9),ge$10(j$7),ge$10(q$19),ge$10(Pc),ge$10(H),ge$10(E$11));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`inbox_v3_store_module`,`load`);Ine=(()=>{class t$21{constructor(){e$11(`inbox_v3_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[Ki,rk,ot,sk,T$7],imports:[gi$1,Je$4.forFeature([Wse,Tse,Zse,une,one,fne,bne,Sne,Tne,Yse]),rn.forFeature(Je$1,Rn),Ac,js]});}}return t$21;})();Ene={showResourceCenter:{show:!1,tab:0,playVideo:void 0},closeResourceCenter:{close:!1},downgradeTeamFromBillingPage:{open:!1,tierToDowngrade:null,payload:{}},showClickUpSupportTrayButton:!1},Ane=sn(Ene,on(Be$3,(t$21,{type:i$27,...e$19})=>({...t$21,showResourceCenter:{...t$21.showResourceCenter,...e$19}})),on(Me,(t$21,{type:i$27,...e$19})=>({...t$21,closeResourceCenter:{...t$21.closeResourceCenter,...e$19}})),on(Ue$4,(t$21,{type:i$27,...e$19})=>({...t$21,downgradeTeamFromBillingPage:{...t$21.downgradeTeamFromBillingPage,...e$19}})),on(De$1,t$21=>({...t$21,downgradeTeamFromBillingPage:{...Ene.downgradeTeamFromBillingPage}})),on(w$15,(t$21,{show:i$27})=>({...t$21,showClickUpSupportTrayButton:i$27})));VN();e$11(`resource_center_store_module`,`load`);wne=(()=>{class t$21{constructor(){e$11(`resource_center_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`resourceCenter`,Ane)]});}}return t$21;})();dm();hr$3();VN();Mne=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.action$=e$19,this.store=r$34,this.taskService=o$32,this.selectedTasks=s$25,this.resolve$=Ke$1(()=>this.action$.pipe(Ye$2(od),Mu(()=>[this.store.select(f$4),this.store.select(y$1),this.store.select(O$2),this.store.select(G),this.store.select(c$1),this.store.select(p$3),this.store.select(L),this.store.select(z$3)]),q$20(([n$46,a$30,c$37,m$32,l$26,g$19,f$33,h$15,I$25])=>{let A$22=n$46.payload,R$21=A$22===`resolve`;if(l$26)this.taskService.onBoardResolve.emit({...l$26,resolveAll:R$21,task:a$30,checkResolved:!1,checkDependencies:!1});else if(h$15){if(A$22===`skip`){let w$26={};g$19.forEach(E$16=>w$26[E$16.id]=!0),h$15.payloads=h$15.payloads.filter(E$16=>!w$26[E$16.id]);}this.taskService.onListResolve.emit({...h$15,resolveAll:R$21,checkResolved:!1});}else{let w$26=this.taskService.getTaskList(a$30);if(A$22===`skip`){let P$20={};g$19.forEach(B$22=>P$20[B$22.id]=!0),w$26=w$26.filter(B$22=>!P$20[B$22.id]);}A$22===`resolve`&&f$33&&(w$26=[...w$26,...f$33]);let E$16=w$26.map(P$20=>({id:P$20.id,status:c$37}));this.store.dispatch(new x$21(E$16)),this.taskService.setStatus(w$26,c$37,this.selectedTasks,m$32,!0,R$21,0,!1,I$25);}})),{dispatch:!1}),this.continue$=Ke$1(()=>this.action$.pipe(Ye$2(sd),Mu(()=>this.store.select(f$4)),Mu(()=>this.store.select(y$1)),Mu(()=>this.store.select(O$2)),Mu(()=>this.store.select(G)),Mu(()=>this.store.select(L)),Mu(()=>this.store.select(z$3)),q$20(([[[[[[n$46,a$30],c$37],m$32],l$26],g$19],f$33])=>{if(l$26)this.taskService.onBoardResolve.emit({...l$26,resolveAll:!1,task:a$30,checkResolved:!0,checkDependencies:!1});else if(g$19)this.taskService.onListResolve.emit({...g$19,checkResolved:!0,resolveAll:!1});else{let h$15=this.taskService.getTaskList(a$30),I$25=h$15.map(A$22=>({id:A$22.id,status:c$37}));this.store.dispatch(new x$21(I$25)),this.taskService.setStatus(h$15,c$37,this.selectedTasks,m$32,!1,!1,0,!1,f$33);}})),{dispatch:!1}),this.getProject$=Ke$1(()=>this.action$.pipe(Ye$2(ed),q$20(n$46=>n$46.payload),le$5(n$46=>{let{unresolvedTasks:a$30}=n$46,c$37=a$30.length?a$30[0]:{};return c$37.task?this.store.select(Q$16(c$37.task.project_id)).pipe(Ve$4(1),q$20(m$32=>new Rc(m$32))):z$18;})));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(zr$1),ge$10(U$7));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();Rne=(t$21,i$27)=>{t$21.resolved||i$27.push(t$21),t$21.children.forEach(e$19=>Rne(e$19,i$27));};jM={modalOpen:!1,unresolvedTasks:[],inaccessibleTasks:[],accessibleTasks:[],comments:[],subtasks:[],checklists:[],showAllSubs:!1,showAllComments:!1,showAllChecklists:!1,showAllUnresolved:!1,task:[],status:null,dependencies:null,resolving:!1,boardPayload:null,listPayload:null,project:null,timezoneModal:!1,timezone:``,unresolvedConflict:!0,revertGroupIdsMap:null,muteNotifications:!1,extraData:null};VN();e$11(`unresolved_store_module`,`load`);One=(()=>{class t$21{constructor(){e$11(`unresolved_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`unresolved`,xne),Je$4.forFeature([Mne])]});}}return t$21;})();VN();Pne=`ngrx`;dbe=()=>({dbName:`${W$10}${w$25.name}`,dbVersion:6,dbStoreName:Pne});dm();pbe=(t$21,i$27,e$19)=>{let r$34=i$27.handshakeInitiated$.pipe(q$20(()=>window.sessionStorage.getItem(_c$1))),o$32=t$21.select(o$30);return $i([r$34.pipe(ws$2(null)),o$32.pipe(ws$2(null))]).pipe(q$20(([s$25,n$46])=>n$46??s$25??xd(e$19.path())),R$20(),zt$2());};dm();ube=t$21=>t$21.select(k$24).pipe(le$5(i$27=>i$27?qe$6([]):t$21.select(Lc)),oe$13(i$27=>i$27.length>0),q$20(i$27=>i$27.slice().sort()));VN();dm();Ee$4();VN();Nne=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.domainAdapter=C$23(l$11),this.idbService=C$23(er$1),this.teamId$=C$23(te$5),this.whenAppIsShown=re$4(),this.domainName=this.domainAdapter.domainName,this.rehydrateFeature$=Ke$1(()=>this.teamId$.pipe(le$5(()=>this.domainAdapter.newFeatureRegistered()),Z$12(e$19=>this.idbService.rehydrateFeature(this.domainName,e$19))),{dispatch:!1}),this.queueWrite$=Ke$1(()=>this.whenAppIsShown(this.actions$).pipe(os(1e4),q$20(()=>this.idbService.queueWrite({domainName:this.domainName}))),{dispatch:!1}),this.writeImmediately$=Ke$1(()=>Hi$2(V$15(window,`beforeunload`).pipe(q$20(()=>{})),V$15(window,`pagehide`).pipe(q$20(()=>{})),this.actions$.pipe(q$20(e$19=>this.domainAdapter.shouldFlushSyncOnAction(e$19)),oe$13(e$19=>!!e$19),v$19(100))).pipe(le$5(e$19=>this.idbService.writeImmediately({domainName:this.domainName,onlyFeatures:e$19}))),{dispatch:!1}),this.idbService.registerDomain(this.domainAdapter);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();Vne=(()=>{class t$21{static forRoot(){return{ngModule:t$21,providers:[Dne(),{provide:j$22,useValue:Bne,multi:!0}]};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[Je$4.forFeature([Nne])]});}}return t$21;})();fbe=t$21=>t$21.type===N.type;fk=[];fk.push(Wne);fk.push(Hne);VN();VN();Gne=w$25.name===`qa`||w$25.name===`staging`||w$25.name===`local`||w$25.name===`development`,zne=(()=>{class t$21 extends q$19{constructor(){super(...arguments),this.ngZone=C$23(V$16),this.currentAction=null;}dispatch(e$19){if(Gne&&(this.currentAction=e$19,performance.mark(`store_dispatch_${e$19.type}`,{detail:{devtools:{dataType:`marker`,color:`primary`,tooltipText:`Store Dispatched - ${e$19.type}`}}})),V$16.isInAngularZone())return super.dispatch(e$19);this.ngZone.run(()=>super.dispatch(e$19));}next(e$19){if(Gne){let r$34=this.currentAction?[[`Last Manual Dispatch Action`,this.currentAction.type]]:[];performance.mark(`effect_dispatch_${e$19.type}`,{detail:{devtools:{dataType:`marker`,color:`secondary`,properties:r$34,tooltipText:`Effect Dispatched - ${e$19.type}`}}});}V$16.isInAngularZone()?super.next(e$19):this.ngZone.run(()=>{super.next(e$19);});}static{this.fac=(()=>{let e$19;return function(o$32){return(e$19||(e$19=ty$1(t$21)))(o$32||t$21);};})();}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();qne=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.actions=e$19,this.dataService=r$34,this.sharedData=o$32,this.store=s$25,this.performanceTimingService=n$46,this.getNotifications$=Ke$1(()=>this.actions.pipe(Ye$2(oo$1),q$20(a$30=>a$30.payload),Is$1(()=>this.performanceTimingService.markTiming(`start_loadListInboxV2`)),le$5(a$30=>this.dataService.getNotifications(this.sharedData.compatCurrentTeam.id,a$30).pipe(Is$1(()=>this.performanceTimingService.markTiming(`finish_loadListInboxV2`)),le$5(c$37=>{let m$32=[],l$26=LM(c$37.notifications);if(m$32.push(new si$1({notifications:l$26,lastNotif:c$37.last_notif,request:{...a$30,team:this.sharedData.compatCurrentTeam.id},reset:!a$30.lastId,has_more_tasks:c$37.has_more_tasks})),l$26.length>0&&l$26.length<10&&c$37.has_more_tasks){let f$33=c$37.last_notif||l$26[l$26.length-1];f$33.group&&(f$33=f$33.items[f$33.items.length-1]),m$32.push(new oi({showArchived:a$30.showArchived,filter:a$30.filter,lastId:f$33.notifs[0].id,lastIdType:String(f$33.notifs[0].type),startDate:f$33.max_date_archived,teamId:this.sharedData.compatCurrentTeam.id}));}let g$19=hk(l$26);return g$19.length&&m$32.push(new x$21(g$19)),m$32;}),Xo$2(c$37=>(a$30.isFirstPageLoad&&this.store.dispatch(new ni$1()),this.handleError(c$37))))))),this.getMoreNotifications$=Ke$1(()=>this.actions.pipe(Ye$2(Oo$2),q$20(a$30=>a$30.payload),Rr(a$30=>this.dataService.getNotifications(this.sharedData.compatCurrentTeam.id,a$30).pipe(le$5(c$37=>{let m$32=[],l$26=LM(c$37.notifications);!l$26||l$26.length===0?m$32.push(new ii$2({error:!0,prevPayload:a$30})):m$32.push(new ii$2(l$26));let g$19=hk(l$26);return g$19.length&&m$32.push(new x$21(g$19)),j$23(m$32);}))),Xo$2(this.handleError.bind(this)))),this.getMoreAdditionalNotifications$=Ke$1(()=>this.actions.pipe(Ye$2(Do$1),q$20(a$30=>a$30.payload),ls$2(`startId`),Rr(a$30=>this.dataService.getCommentNotifications(a$30.commentId,a$30).pipe(q$20(c$37=>[c$37,a$30]))),q$20(([a$30,c$37])=>new ri$1({viewId:c$37.viewId,taskId:c$37.taskId,notifId:c$37.notifId,items:a$30.history,lastPage:a$30.last_page})),Xo$2(this.handleError.bind(this)))),this.editNotificationsSettings$=Ke$1(()=>this.actions.pipe(Ye$2(Ao$3),q$20(a$30=>a$30.payload),le$5(a$30=>this.dataService.editNotificationsSettings(a$30.id,a$30.notification_settings).pipe(q$20(c$37=>new Qs$2()),Xo$2(this.handleError.bind(this)))))),this.reloadTask$=Ke$1(()=>this.actions.pipe(Ye$2(xo$2),q$20(a$30=>a$30.payload),q$20(a$30=>a$30.taskId),Z$12(a$30=>this.dataService.getTaskForSharingAndCommunityTemplatesOnlyWithNoTaskVersioning(a$30).pipe(q$20(c$37=>new Xs$1(c$37)),Xo$2(this.handleError.bind(this)))))),this.markSeen$=Ke$1(()=>this.actions.pipe(Ye$2(Mo$1),Z$12(a$30=>this.dataService.editNotifications(this.sharedData.compatCurrentTeam.id,{seen_after:a$30.payload.list[0].notifs[0].id,type:a$30.payload.list[0].notifs[0].type}).pipe(q$20(c$37=>new Qs$2()),Xo$2(this.handleError.bind(this)))))),this.clearAll$=Ke$1(()=>this.actions.pipe(Ye$2(Fo),le$5(a$30=>this.dataService.editNotifications(this.sharedData.compatCurrentTeam.id,{archive_after:a$30.payload.notification.id,type:a$30.payload.notification.type}).pipe(Xo$2(this.handleError.bind(this)),le$5(c$37=>j$23([new Qs$2(),new oi({showArchived:!1,filter:e$12.All,teamId:this.sharedData.compatCurrentTeam.id})])))))),this.toggleTaskFollowers=Ke$1(()=>this.actions.pipe(Ye$2(No$1),q$20(a$30=>{let c$37=a$30.payload.task.followers.find(m$32=>m$32.id===a$30.payload.user.id);return Jp.toggleTaskFollow({taskId:a$30.payload.task.id,data:{followers:{[c$37?`rem`:`add`]:[a$30.payload.user.id]}}});}))),this.toggleViewFollowers=Ke$1(()=>this.actions.pipe(Ye$2(Uo$1),q$20(a$30=>a$30.payload.view.followers.find(m$32=>m$32.id===a$30.payload.user.id)?new ft$3({viewId:a$30.payload.view.id,remove:[a$30.payload.user]}):new ft$3({viewId:a$30.payload.view.id,add:[a$30.payload.user]})))),this.toggleSubcategoryFollowers=Ke$1(()=>this.actions.pipe(Ye$2(Vo$1),q$20(a$30=>a$30.payload.subcategory.followers.find(m$32=>m$32.id===a$30.payload.user.id)?Xe$3({subcategoryId:a$30.payload.subcategory.id,projectId:a$30.payload.subcategory.project_id,categoryId:a$30.payload.subcategory.category,remove:[a$30.payload.user]}):Xe$3({subcategoryId:a$30.payload.subcategory.id,projectId:a$30.payload.subcategory.project_id,categoryId:a$30.payload.subcategory.category,add:[a$30.payload.user]}))));}handleError(e$19){return qe$6(new ti());}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(Ci),ge$10(I$18),ge$10(q$19),ge$10(wa));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();y$17();Qne=`https://gitlab.com`;Jne={list:[],lastNotif:null,lastId:null,allLoaded:!1,allMarkedSeen:!1,showArchived:!1,filter:e$12.All,loading:!1,silentLoading:!1,settingsSaving:!1,available:{unseen:0},availableAll:{},error:``};VN();e$11(`notification_store_module`,`load`);rae=(()=>{class t$21{constructor(){e$11(`notification_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`notification`,eae),Je$4.forFeature([qne])]});}}return t$21;})();VN();dm();yk=F$23(L0());VN();oae=(()=>{class t$21{constructor(){this.simpleToastService=C$23(X$3),this.router=C$23(qd),this.chatFeatureService=C$23(_t),this.isChatRemindersV3Enabled$=this.chatFeatureService.isChatRemindersV3Enabled$,this.actions$=C$23(Le$4),this.store=C$23(q$19),this.inboxService=C$23(Ki),this.teamId$=n$21(),this.isInbox$=this.store.select(Zt$3),this.reminderCreatedToastKey=`reminder-created-simple-toast`,this.createReminderSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.createReminderSuccess,s$8.updateReminderSuccess),oe$13(e$19=>!e$19.reminder.completedAt),Z$12(e$19=>e$19.type===s$8.updateReminderSuccess.type&&e$19.isRecurringUpdate?this.handleRecurringUpdateSuccess(e$19):this.createReminderSuccess(e$19))),{dispatch:!1}),this.createReminderFailure$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.createReminderFailure,s$8.updateReminderFailure),Is$1(({reminder:e$19})=>{!!e$19.dueDate?oe$2(this.simpleToastService):ee$1(this.simpleToastService);})),{dispatch:!1}),this.deleteReminderSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.deleteReminderSuccess),Is$1(({showToast:e$19})=>{e$19&&Y$1(this.simpleToastService);})),{dispatch:!1}),this.deleteReminderFailure$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.deleteReminderFailure),Is$1(()=>ae$1(this.simpleToastService))),{dispatch:!1});}createReminderSuccess(e$19){return $i([this.teamId$,this.isChatRemindersV3Enabled$,this.isInbox$,this.store.select(b$16())]).pipe(Ve$4(1),le$5(([r$34,o$32,s$25,n$46])=>{if(!e$19.isRetry){let a$30=!!e$19.reminder.dueDate,c$37=()=>{I$4({teamId:r$34,isChatRemindersV3Enabled:o$32,isChatReminder:e$19.isChatReminder,isInboxPage:!!s$25,inboxService:this.inboxService,router:this.router});};if(a$30){let m$32=iae(e$19.reminder.dueDate,n$46);X(this.simpleToastService,m$32,c$37);}else Z$1(this.simpleToastService,e$19.reminder);}return z$18;}));}handleRecurringUpdateSuccess(e$19){return e$19.reminder.recurringSettings!==void 0||re(this.simpleToastService),z$18;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();dm();C$22();vk=class extends _$7{constructor(){super(...arguments),this.id=`reminders.${w$22()}`,this.chatDiscoveryService=C$23(r$23),this.chatFeatureService=C$23(_t),this.store=C$23(q$19),this.isChatRemindersV3Enabled$=this.chatFeatureService.isChatRemindersV3Enabled$;}getName(){return`reminders`;}getId(){return this.id;}refresh(){return $i({isChatActive:this.chatDiscoveryService.isChatActiveObservable(),isChatRemindersV3Enabled:this.isChatRemindersV3Enabled$}).pipe(oe$13(({isChatActive:i$27,isChatRemindersV3Enabled:e$19})=>i$27&&e$19),Is$1(()=>this.store.dispatch(s$8.searchReminders({searchId:`later`,params:{status:`TODO`,isCompleted:!1}}))),q$20(()=>!0));}};i$25();dm();hr$3();VN();dm();VN();cae=(()=>{class t$21{constructor(e$19){this.http=e$19,this.baseUrl$=aae(),this.workspaceId$=n$21(),this.apiNotReady=!0;}createReminder(e$19){return this.makeRequest(`post`,`reminders`,e$19);}getReminder(e$19){return this.makeRequest(`get`,`reminders/${e$19}`);}searchReminders(e$19){let r$34=B$19({is_completed:e$19.isCompleted?.toString(),limit:e$19.limit?.toString(),cursor:e$19.cursor,since:e$19.since},r$33);return this.makeRequest(`get`,`reminders`,void 0,r$34);}searchAllReminders(e$19){return this.searchReminders(e$19).pipe(Zs$1(r$34=>r$34.cursor?this.searchReminders({...e$19,cursor:r$34.cursor}):z$18),Es$3(r$34=>!!r$34.cursor,!0),$e$3((r$34,o$32)=>(r$34.push(...o$32.reminders),r$34),[]));}updateReminder(e$19,r$34){return this.makeRequest(`put`,`reminders/${e$19}`,r$34);}deleteReminder(e$19){return this.makeRequest(`delete`,`reminders/${e$19}`);}makeRequest(e$19,r$34,o$32,s$25){return $i({baseUrl:this.baseUrl$,workspaceId:this.workspaceId$}).pipe(Ve$4(1),le$5(({baseUrl:n$46,workspaceId:a$30})=>{let c$37=s$25?`?${new URLSearchParams(s$25)}`:``;return this.http.request(e$19,`${n$46}/workspaces/${a$30}/${r$34}${c$37}`,{body:o$32});}));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(ve$7));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();bbe=1e3,mae=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.browserStatusService=C$23(b$12),this.chatDiscoveryService=C$23(r$23),this.chatFeatureService=C$23(_t),this.refreshService=C$23(te$9),this.remindersService=C$23(cae),this.store=C$23(q$19),this.websocketService=C$23(Pc),this.isChatRemindersV3Enabled$=this.chatFeatureService.isChatRemindersV3Enabled$,this.isPageVisibleAndOnline$=fs(this.browserStatusService),this.refreshControllerEnabled$=jS(O$16.FePlatformRefreshController),this.refreshEmitter$=Hi$2(this.isPageVisibleAndOnline$,this.websocketService.onConnected()).pipe(Os$3(bbe),F$20(()=>({isChatActive:this.chatDiscoveryService.isChatActiveObservable(),isChatRemindersV3Enabled:this.isChatRemindersV3Enabled$,isRefreshControllerEnabled:this.refreshControllerEnabled$})),Ss$1(1),oe$13(([e$19,{isChatActive:r$34,isChatRemindersV3Enabled:o$32,isRefreshControllerEnabled:s$25}])=>e$19&&!s$25&&r$34&&o$32),q$20(()=>!0)),this.loadReminder$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.loadReminder),Z$12(({reminderId:e$19})=>this.loadReminder(e$19)))),this.searchReminders$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.searchReminders),Mu(()=>this.searchRemindersConcatLatestFrom()),oe$13(([e$19,r$34])=>r$34===0),oi$1(([{params:e$19,searchId:r$34},,o$32])=>this.searchReminders({params:e$19,searchId:r$34,workspaceId:o$32})))),this.searchRemindersDelta$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.searchReminders),Mu(()=>this.searchRemindersConcatLatestFrom()),oe$13(([e$19,r$34])=>r$34!==0),oi$1(([{searchId:e$19},r$34,o$32])=>this.searchReminders({params:{since:r$34.toString()},searchId:e$19,workspaceId:o$32})))),this.createReminder$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.createReminder),Z$12(({reminder:e$19,requestId:r$34,isChatReminder:o$32})=>this.createReminder(e$19,r$34,o$32)))),this.updateReminder$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.updateReminder),Z$12(({reminderId:e$19,reminder:r$34,isRecurringUpdate:o$32,isChatReminder:s$25})=>this.updateReminder(e$19,r$34,o$32,s$25)))),this.deleteReminder$=Ke$1(()=>this.actions$.pipe(Ye$2(s$8.deleteReminder),Z$12(({reminderId:e$19})=>this.deleteReminder(e$19)))),this.refreshReminders$=Ke$1(()=>this.refreshEmitter$.pipe(q$20(()=>s$8.searchReminders({searchId:`later`,params:{status:`TODO`,isCompleted:!1}}))));}ngrxOnRunEffects(e$19){return this.refreshService.addRefreshStrategy(new vk()),e$19;}loadReminder(e$19){return this.remindersService.getReminder(e$19).pipe(q$20(r$34=>s$8.loadReminderSuccess({reminder:BM(r$34)})),Xo$2(r$34=>qe$6(s$8.loadReminderFailure({reminderId:e$19,error:r$34}))));}searchReminders({params:e$19,searchId:r$34,workspaceId:o$32}){return this.remindersService.searchAllReminders(e$19).pipe(oe$13(s$25=>s$25.length>0),Z$12(s$25=>{let{foundReminders:n$46,deletedReminderIds:a$30}=sae(s$25);return[s$8.searchRemindersSuccess({searchId:r$34,reminders:n$46,lastFetchedAt:nae(s$25),workspaceId:o$32}),...(a$30.length>0?[s$8.deleteRemindersBulkSuccess({reminderIds:a$30})]:[])];}),Xo$2(s$25=>qe$6(s$8.searchRemindersFailure({error:s$25}))));}createReminder(e$19,r$34,o$32){return this.remindersService.createReminder(e$19).pipe(q$20(s$25=>s$8.createReminderSuccess({requestId:r$34,reminder:BM(s$25),isChatReminder:o$32})),ws$2(s$8.createReminderOptimistic({reminder:e$19,requestId:r$34})),Xo$2(s$25=>qe$6(s$8.createReminderFailure({requestId:r$34,reminder:e$19,error:s$25}))));}updateReminder(e$19,r$34,o$32,s$25){return this.remindersService.updateReminder(e$19,r$34).pipe(q$20(()=>s$8.updateReminderSuccess({reminderId:e$19,reminder:r$34,isRecurringUpdate:o$32,isChatReminder:s$25})),ws$2(s$8.updateReminderOptimistic({reminderId:e$19,reminder:r$34})),Xo$2(n$46=>qe$6(s$8.updateReminderFailure({reminderId:e$19,reminder:r$34,error:n$46}))));}deleteReminder(e$19){return this.remindersService.deleteReminder(e$19).pipe(q$20(()=>s$8.deleteReminderSuccess({reminderId:e$19,showToast:!0})),ws$2(s$8.deleteReminderOptimistic({reminderId:e$19})),Xo$2(r$34=>r$34 instanceof M$21&&r$34.status===404?qe$6(s$8.deleteReminderSuccess({reminderId:e$19,showToast:!0})):qe$6(s$8.deleteReminderFailure({reminderId:e$19,error:r$34}))));}searchRemindersConcatLatestFrom(){return[this.store.select(re$1),this.store.select(o$30)];}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();lae=(()=>{class t$21{constructor(){this.websocketConfigService=C$23(E$11),this.websocketV2Service=C$23(G$9),this.reminderEvent$=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.ReminderEvent).pipe(q$20(e$19=>uk(e$19)),Z$12(e$19=>{switch(e$19.operation){case`created`:case`updated`:return this.loadReminders(e$19);case`deleted`:return this.deleteReminder(e$19);default:return[];}})));}ngrxOnRunEffects(e$19){return[t$17.ReminderEvent].forEach(r$34=>{let o$32=this.websocketConfigService.createConfiguration(r$34).disableJitter();this.websocketConfigService.addConfiguration(o$32);}),e$19;}loadReminders(e$19){return e$19.reminderIds.length===0?[]:e$19.reminderIds.map(r$34=>s$8.loadReminder({reminderId:r$34}));}deleteReminder(e$19){return e$19.reminderIds.length===0?[]:e$19.reminderIds.map(r$34=>s$8.deleteReminderSuccess({reminderId:r$34,showToast:!!e$19.wsKey}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`reminders_store_module`,`load`);dae=(()=>{class t$21{static forRoot(){return e$11(`reminders_store_module`,`for_root`),{ngModule:t$21};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[rn.forFeature(c$13),Je$4.forFeature([mae,oae,lae])]});}}return t$21;})();VN();dm();hr$3();VN();VN();pae=(()=>{class t$21{constructor(){this.aiUsageTrackingService=C$23(p$11),this.store=C$23(q$19);}initializeForFrequentUsers(){try{this.aiUsageTrackingService.isFrequentUser()&&this.preloadSuggestedQuestions();}catch(e$19){fA(e$19,{context:`ai-data-preload-initialization`,feature:`ai`});}}preloadSuggestedQuestions(){try{this.store.dispatch(ke$1.actions.loadSuggestedQuestions({}));}catch(e$19){fA(e$19,{context:`ai-data-preload-suggested-questions`,feature:`ai`});}}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();uae=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.suggestedQuestionListService=C$23(re$2),this.contentAssistantFeaturesService=C$23(Ti$2),this.preloadService=C$23(pae),this.teamChange$=Ke$1(()=>this.actions$.pipe(Ye$2(je$2),oe$13(e$19=>!!e$19.payload),zt$2((e$19,r$34)=>e$19.payload.id===r$34.payload.id),Is$1(()=>{this.preloadService.initializeForFrequentUsers();})),{dispatch:!1}),this.loadSuggestedQuestions$=Ke$1(()=>this.actions$.pipe(Ye$2(i$9.loadSuggestedQuestions),Mu(()=>[this.contentAssistantFeaturesService.forceSuggestedQuestionsRefreshForActiveUsers$,this.store.select(T$13.selectIsStale),this.store.select(T$13.selectHasLoadedBackendData)]),le$5(([e$19,r$34,o$32,s$25])=>this.loadQuestionsIfNeeded(e$19,r$34,o$32,s$25))));}loadQuestionsIfNeeded(e$19,r$34,o$32,s$25){let n$46=e$19.forceRefresh||r$34&&o$32||!s$25;return!n$46&&s$25?z$18:this.suggestedQuestionListService.fetchSuggestedQuestions(n$46,e$19.uiContext,e$19.limit?{limit:e$19.limit}:void 0).pipe(q$20(a$30=>i$9.loadSuggestedQuestionsSuccess({questions:a$30,timestamp:Date.now()})),Xo$2(a$30=>this.handleLoadError(a$30)));}handleLoadError(e$19){return fA(e$19,{context:`suggested-questions-effects-load`,feature:`ai`}),qe$6(i$9.loadSuggestedQuestionsFailure({error:e$19}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`suggested_questions_store_module`,`load`);VM=(()=>{class t$21{constructor(){e$11(`suggested_questions_store_module`,`construct`),k$5(b$7,{version:1,unmarshaller:r$34=>({...r$34,loading:!1})});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21,id:`SuggestedQuestionsStoreModule`});}static{this.inj=ql({imports:[gi$1,rn.forFeature(T$13),Je$4.forFeature([uae])]});}}return t$21;})();NE(VM,`SuggestedQuestionsStoreModule`);VN();fae=(()=>{class t$21{serialize(e$19){let{url:r$34}=e$19,{queryParams:o$32}=e$19.root,s$25=e$19.root;for(;s$25.firstChild;)s$25=s$25.firstChild;let{data:n$46,parent:a$30}=s$25;for(n$46={...n$46},typeof n$46.component==`object`&&typeof n$46.component.ngModule==`object`&&delete n$46.component;a$30?.data;)n$46={...n$46,...a$30.data},a$30=a$30.parent;let{params:c$37}=s$25;return{url:r$34,queryParams:o$32,params:c$37,data:n$46};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();hr$3();Cbe=f$30.byNamespace(`router`);VN();n$24(`app_module`,`router_effects`,`load`);gae=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.router=r$34,this.location=o$32,this.zone=s$25,this.go$=Ke$1(()=>this.actions$.pipe(Ye$2(s$18),Is$1(n$46=>hae(n$46)),q$20(n$46=>n$46.payload),Is$1(({path:n$46,query:a$30,extras:c$37,replaceRoute:m$32})=>{this.zone.run(()=>{let l$26=this.router.url;this.router.navigate(n$46,{queryParams:a$30,...c$37}),c$37?.skipLocationChange&&this.location.replaceState(m$32||l$26);});})),{dispatch:!1}),this.navigateBack$=Ke$1(()=>this.actions$.pipe(Ye$2(n$26),Is$1(()=>this.location.back())),{dispatch:!1}),this.navigateForward$=Ke$1(()=>this.actions$.pipe(Ye$2(x$14),Is$1(()=>this.location.forward())),{dispatch:!1});}ngrxOnRunEffects(e$19){return n$24(`app_module`,`router_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(x$22),ge$10(Ft),ge$10(V$16));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();VN();dm();VN();yae=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.areAllCustomFieldsLoaded$=this.store.select(at$3).pipe(oe$13(Boolean),Ve$4(1));}getLoadActions(){return this.actions$.pipe(Ye$2(u$28.reloadTasksByIdsV3),Ws$1(this.areAllCustomFieldsLoaded$),Ve$4(1));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();U$18();VN();vae=(()=>{class t$21{constructor(e$19){this.store=e$19;}loadViewData(e$19){return this.store.dispatch(A$13({id:e$19})),this.selectDataView(e$19).pipe(Is$1(r$34=>this.updateHierarchyIds(r$34)),Ve$4(1));}updateHierarchyIds({hierarchy:e$19,viewType:r$34}){r$34===o$31.LocationOverview&&this.store.dispatch(Te$6({p:e$19?.project?.id??``,c:e$19?.category?.id??``,s:e$19?.subcategory?.id??``,checkRedirect:!1}));}selectDataView(e$19){return this.store.select(p$19(e$19)).pipe(oe$13(Boolean),Is$1(()=>this.store.dispatch(be$2({viewId:e$19}))),Ve$4(1));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Sk=()=>C$23(f$23).nativeWindow.document.body;VN();UM=`save-as-pdf`,Sae=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.dashboardDataViewFacade=C$23(vae),this.listReloaderService=C$23(yae),this.prepareDashboardFoServerSidePdf=Ke$1(()=>this.actions$.pipe(Ye$2(bt$4),oe$13(T$5),Is$1(()=>this.addCssClassToBody()),q$20(()=>s$5.preparedForPdf()))),this.loadHierarchyData=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.dashboardLoaded),le$5(e$19=>this.selectDashboard(e$19.dashboardId)),ls$2(`id`),le$5(e$19=>e$19.view_id?this.dashboardDataViewFacade.loadViewData(e$19.view_id):z$18)),{dispatch:!1}),this.reloadListsOnAllCustomFieldsLoad=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.dashboardLoaded),le$5(()=>this.listReloaderService.getLoadActions()),Z$12(e$19=>j$23(e$19)))),this.refreshWidgetsInit=Ke$1(()=>this.actions$.pipe(Ye$2(x$16),Mu(()=>this.store.select(P$1)),oe$13(([,e$19])=>e$19),zt$2(),Z$12(([e$19])=>this.selectDashboard(e$19.dashboardId)),ls$2(`id`),q$20(({id:e$19})=>s$5.dashboardLoaded({dashboardId:e$19})))),this.refreshWidgets=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.dashboardLoaded),q$20(({dashboardId:e$19})=>at$6({trigger:i$14.REFRESH_FOR_SERVER_PDF,dashboardId:e$19})))),this.restoreDashboardAfterExport=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.idled),oe$13(()=>this.body.classList.contains(UM)),Is$1(()=>this.removeCssClassFromBody())),{dispatch:!1}),this.body=Sk();}addCssClassToBody(){this.body.classList.add(UM);}removeCssClassFromBody(){this.body.classList.remove(UM);}selectDashboard(e$19){let r$34=e$19?j$9(e$19):M$8;return this.store.select(r$34).pipe(oe$13(Boolean));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();Ee$4();VN();_be=()=>I$24(null,null,function*(){return(yield import(`./dashboard-to-pdf.service-b3e7fd7cbd.js`)).DashboardToPdfService;}),bae=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.injector=r$34,this.store=o$32,this.cancel$=this.actions$.pipe(Ye$2(s$5.cancelled,C$20),Mu(()=>this.store.select(n$5)),oe$13(([,s$25])=>s$25!==`idle`)),this.processEffect=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.selectedJsPdfCreation),le$5(s$25=>this.waitAndGeneratePdf(s$25)),q$20(()=>s$5.idled()))),this.cancelledEffect=Ke$1(()=>this.cancel$.pipe(q$20(()=>s$5.idled())));}waitAndGeneratePdf({dashboard:e$19,title:r$34,printDelay:o$32,dashboardId:s$25}){return this.waitFor(o$32).pipe(le$5(()=>this.generatePdf(e$19,r$34,s$25)),Xo$2(n$46=>this.handleError(n$46)),Ve$4(1),gs(this.cancel$));}generatePdf(e$19,r$34,o$32){return j$23(_be()).pipe(q$20(s$25=>this.injector.get(s$25)),le$5(s$25=>s$25.export(e$19,r$34,o$32)));}waitFor(e$19){return we$3(e$19).pipe(Ve$4(1));}handleError(e$19){return x(e$19),qe$6(void 0);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(oe$12),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();C$22();VN();dm();VN();Cae=(()=>{class t$21{constructor(){this.http=C$23(ve$7),this.apiUrlService=C$23(u$7);}initiateExport(e$19){return this.apiUrlService.getApiBaseUrl().pipe(le$5(r$34=>this.sendExportRequest({baseUrl:r$34,...e$19})));}sendExportRequest({baseUrl:e$19,workspaceId:r$34,dashboardId:o$32,payload:s$25}){let n$46=`${e$19}/data/v3/workspaces/${r$34}/dashboards/${o$32}/export`;return this.http.post(n$46,s$25);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();_ae={title:` `+"Exporting...",description:"We will email your export as soon as it's ready!"};VN();kae=3600*1e3,Ibe={type:`default`,label:"Downloading...",spinner:!0,position:`center`,buttonText:"Cancel",timeout:kae},Ebe={type:`default`,label:" Download complete",position:`center`,buttonText:"Open",timeout:kae},Abe={type:`default`,position:`center`,icon:`closeCircleFilledColor`,label:"Download failed",buttonText:"Try again"},bk=(()=>{class t$21{constructor(e$19,r$34,o$32){this.toastService=e$19,this.simpleToastService=r$34,this.store=o$32;}showInProgressToast({payload:e$19}){if(e$19.report_actions.includes(`websocket`)){let r$34=()=>this.store.dispatch(s$5.cancelled());this.showDownloadingPdfToast(e$19.run_id,r$34);}else this.showEmailPdfToast();}showDownloadCompleteToast(e$19,r$34){this.hideDownloadingToast(e$19),this.simpleToastService.addSimpleToastItem({...Ebe,buttonAction:r$34});}showRetryDownloadToast(e$19,r$34){this.hideDownloadingToast(e$19),this.simpleToastService.addSimpleToastItem({...Abe,buttonAction:r$34});}hasDownloadingToast(e$19){return this.simpleToastService.simpleToastItems.some(r$34=>r$34.key===e$19);}showEmailPdfToast(){this.toastService.addToastItem(_ae);}showDownloadingPdfToast(e$19,r$34){this.simpleToastService.addSimpleToastItem({...Ibe,key:e$19,buttonAction:r$34});}hideDownloadingToast(e$19){this.simpleToastService.removeToastByKey(e$19);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$14),ge$10(X$3),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Tae=(()=>{class t$21{constructor(){this.actions$=C$23(Le$4),this.store=C$23(q$19),this.exportApiService=C$23(Cae),this.toastService=C$23(bk),this.exportTrackService=C$23(A),this.teamId$=this.store.select(o$30),this.isRenderedOnServer$=this.store.select(P$1),this.shouldTriggerJsPdfOnServer$=this.store.select(E$2),this.triggerPdfCreationEffect=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.triggered),Mu(()=>[this.isRenderedOnServer$,this.shouldTriggerJsPdfOnServer$]),oe$13(([,e$19,r$34])=>!e$19||r$34),Is$1(([{dashboardId:e$19,downloadPdf:r$34},,o$32])=>!o$32&&this.trackExportInit(e$19,r$34?`download`:`email`)),q$20(([e$19])=>s$5.selectedJsPdfCreation(e$19)))),this.prepareRequestPayloadEffect=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.selectedServerPdfCreation),Is$1(({dashboardId:e$19,downloadPdf:r$34})=>this.trackExportInit(e$19,r$34?`download`:`email`)),q$20(({dashboardId:e$19,downloadPdf:r$34})=>s$5.sentPdfCreationRequest({dashboardId:e$19,payload:this.createPayload(!!r$34)})))),this.sendPdfCreationRequestEffect=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.sentPdfCreationRequest),Mu(()=>this.teamId$),Is$1(([e$19])=>this.toastService.showInProgressToast(e$19)),le$5(([e$19,r$34])=>this.exportApiService.initiateExport({workspaceId:r$34,dashboardId:e$19.dashboardId,payload:e$19.payload}))),{dispatch:!1});}trackExportInit(e$19,r$34){this.exportTrackService.trackInit(e$19,r$34);}createPayload(e$19){let r$34=e$19?`websocket`:`email`;return{run_id:w$22(),report_actions:[r$34]};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();Ee$4();VN();VN();dm();Ee$4();Iae=t$21=>!t$21.length||t$21.every(i$27=>i$27.state===`ready`);tu=t$21=>({id:t$21.id,type:t$21.type??t$21.widgetType,premade:t$21.pre_made??t$21.widgetPremade});Eae=t$21=>({...tu(t$21),log_type:`pdf-card-loaded`});Aae=t$21=>({cards:t$21,log_type:`pdf-cards-waiting-for-loaders`});wae=({cards:t$21,...i$27})=>({log_type:`pdf-cards-loading-state`,cards:t$21.map(e$19=>Mbe(e$19,i$27))}),Mbe=(t$21,i$27)=>({...tu(t$21),state:Rbe(t$21,i$27)?`loading`:`ready`});Fbe=`clickup-page-export-log`,ru=(t$21,i$27)=>{let e$19=new CustomEvent(Fbe,{detail:i$27});t$21.dispatchEvent(e$19);};Mae=`cu-skeleton-subcategory`,xbe=[`.cu-skeleton-row__item`,`.cu-loader`,`.cu-skeleton-row`,`.${Mae}`],Rae=t$21=>Array.from(t$21.querySelectorAll(xbe.join(`, `))).filter(e$19=>{return(e$19.closest(`.cu-grid-layout-item`)?.clientHeight??0)>Obe(e$19);}),Obe=t$21=>{let i$27=t$21.classList.contains(Mae),e$19=t$21.offsetTop;if(!i$27)return e$19;let r$34=t$21.closest(`.cu-task-list`)?.offsetTop??0,o$32=t$21.closest(`cu-drop-area-to-create`)?.offsetTop??0;return Math.max(r$34,e$19,o$32);};Fae=t$21=>{let e$19=Rae(t$21).map(Pbe).filter(r$34=>!!r$34);return Array.from(new Set(e$19));},Pbe=t$21=>t$21.closest(`[data-item-id]`)?.getAttribute(`data-item-id`)??``;VN();xae=(()=>{class t$21{constructor(){this.body=Sk(),this.dashboardId=new M$22(),this.loadingCardService=C$23(tr$1),this.store=C$23(q$19),this.actions$=C$23(Le$4);}createLoadingStatePayload(e$19){return this.dashboardId.next(e$19),$i({cards:this.store.select(W$2(e$19)),loadingMap:this.loadingCardService.getAsObservable(),cardRefreshTimestamps:this.store.select(et$1)}).pipe(q$20(({cards:r$34,loadingMap:o$32,cardRefreshTimestamps:s$25})=>r$34&&wae({cards:r$34,loadingMap:o$32,cardRefreshTimestamps:s$25})),oe$13(Boolean),Ve$4(1),Is$1(r$34=>ru(this.body,r$34)),oe$13(r$34=>Iae(r$34.cards)),q$20(()=>e$19));}createCardLoadedEvent(e$19){return this.store.select(S$1).pipe(oe$13(r$34=>r$34),q$20(()=>Eae(e$19)),q$20(r$34=>ru(this.body,r$34)));}areCardLoadersHidden(e$19){return we$3(2e3).pipe(oi$1(()=>this.sendCardsWithLoadersEvent(this.body,e$19)),q$20(r$34=>!r$34.length),oe$13(Boolean),Ve$4(1),gs(this.actions$.pipe(Ye$2(s$5.dashboardReadyForExport))));}sendExportStartedEvent(){return this.sendExportProgressEvent(`pdf-export-started`);}sendExportCompletedEvent(){return this.sendExportProgressEvent(`pdf-export-completed`);}sendExportProgressEvent(e$19){return this.store.select(P$1).pipe(oe$13(Boolean),Ve$4(1),q$20(()=>ru(this.body,{log_type:e$19})));}sendCardsWithLoadersEvent(e$19,r$34){let o$32=Fae(e$19);return(o$32.length?Gi(o$32.map(n$46=>this.getWidgetById(n$46,r$34))):qe$6([])).pipe(Ve$4(1),Is$1(n$46=>this.dispatchCardsWithLoaderEvent(n$46)),q$20(()=>o$32));}getWidgetById(e$19,r$34){return this.store.select(He$2(r$34,e$19)).pipe(oe$13(Boolean),Ve$4(1));}dispatchCardsWithLoaderEvent(e$19){if(!e$19.length){ru(this.body,{log_type:`pdf-all-cards-loaded`});return;}let o$32=Aae(e$19.map(tu));ru(this.body,o$32);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();n$42();dm();Ee$4();VN();Oae=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.exportTimeout$=this.store.select(O$3);}onForceExportTimeout(){return this.exportTimeout$.pipe(oe$13(Boolean),q$20(e$19=>e$19*1e3),oe$13(e$19=>a$25(e$19)),Ve$4(1),le$5(e$19=>we$3(e$19)));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Pae=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.eventService=r$34,this.exportTimeoutService=o$32,this.cardsLoadingState=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.dashboardLoaded),le$5(({dashboardId:s$25})=>this.getInterval(s$25)),le$5(s$25=>this.eventService.createLoadingStatePayload(s$25)),q$20(s$25=>s$5.cardsConsideredLoaded({dashboardId:s$25})))),this.cardLoadersHidden=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.cardsConsideredLoaded),le$5(s$25=>this.eventService.areCardLoadersHidden(s$25.dashboardId)),q$20(()=>s$5.dashboardReadyForExport()))),this.forceExportTimeout$=Ke$1(()=>this.exportTimeoutService.onForceExportTimeout().pipe(q$20(()=>s$5.dashboardReadyForExport()))),this.cardDataLoaded=Ke$1(()=>this.actions$.pipe(Ye$2(ne$4),le$5(s$25=>this.eventService.createCardLoadedEvent(s$25.item))),{dispatch:!1}),this.startedPdfCreation=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.selectedJsPdfCreation),le$5(()=>this.eventService.sendExportStartedEvent())),{dispatch:!1}),this.completedPdfCreation=Ke$1(()=>this.actions$.pipe(Ye$2(s$5.idled),le$5(()=>this.eventService.sendExportCompletedEvent())),{dispatch:!1});}getInterval(e$19){return we$3(8e3).pipe(q$20(()=>e$19),gs(this.actions$.pipe(Ye$2(s$5.cardsConsideredLoaded))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(xae),ge$10(Oae));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();VN();$ae=(()=>{class t$21{constructor(e$19,r$34,o$32){this.exportToastService=e$19,this.windowService=r$34,this.store=o$32;}complete(e$19){let r$34=e$19.attachment_url,o$32=e$19.run_id;if(this.exportToastService.hasDownloadingToast(o$32)){if(!r$34||e$19.operation_result!==`success`){this.showRetryToast(e$19.object_id,o$32);return;}this.showDownloadToast(o$32,r$34);}}showDownloadToast(e$19,r$34){let o$32=()=>{this.windowService.openLinkInNewTab(r$34);};this.exportToastService.showDownloadCompleteToast(e$19,o$32);}showRetryToast(e$19,r$34){let o$32=()=>this.store.dispatch(s$5.selectedServerPdfCreation({dashboardId:e$19,downloadPdf:!0}));this.exportToastService.showRetryDownloadToast(r$34,o$32);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(bk),ge$10(f$23),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();jae=(()=>{class t$21{constructor(e$19,r$34){this.exportCompleteService=e$19,this.websocketV2Service=r$34,this.downloadPdfEffect=Ke$1(()=>this.websocketV2Service.getEventsByType(t$17.PageExportedReport).pipe(Is$1(o$32=>this.exportCompleteService.complete(o$32.payload))),{dispatch:!1});}ngrxOnRunEffects(e$19){return this.websocketV2Service.enableMessage(t$17.PageExportedReport),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10($ae),ge$10(G$9));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();e$11(`save_as_pdf_module`,`load`);Lae=(()=>{class t$21{constructor(){e$11(`save_as_pdf_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[Je$4.forFeature([bae,Sae,Pae,Tae,jae]),rn.forFeature(i$1)]});}}return t$21;})();VN();dm();WM=Le$9(`[Task] Get subtask ids`,qe$5()),El=Le$9(`[Task] Get subtask ids success`,qe$5()),Dae=Le$9(`[Task] Get subtask ids fail`);VN();n$24(`app_module`,`task_view_cache_effects`,`load`);Bae=(()=>{class t$21{constructor(e$19,r$34,o$32){this.store=e$19,this.actions$=r$34,this.effectsService=o$32,this.redirectOnHttpErrorResponseService=C$23(hu),this.writeTaskEffect=Ke$1(()=>this.actions$.pipe(Ye$2(yr,Br),q$20(({response:s$25})=>jt$2({tasks:[mt(s$25)]})))),this.writeParentTasksEffect=Ke$1(()=>this.actions$.pipe(Ye$2(yr,Br),oe$13(({response:s$25})=>!!(s$25.root_parent||s$25.direct_parent)),q$20(({response:s$25})=>{let n$46=[];return s$25.root_parent&&n$46.push({id:s$25.root_parent.id,name:s$25.root_parent.name,custom_id:s$25.root_parent.custom_id,team:s$25.workspace_id}),s$25.direct_parent&&n$46.push({id:s$25.direct_parent.id,name:s$25.direct_parent.name,custom_id:s$25.direct_parent.custom_id,team:s$25.workspace_id}),jt$2({tasks:n$46});}))),this.updateUsersOnTaskSuccessEffect=Ke$1(()=>this.actions$.pipe(Ye$2(yr,Br),q$20(({response:{user_map:s$25}})=>s$25),R$20(),q$20(s$25=>bO({usersMap:s$25})))),this.updateUsersOnTaskHistoryIdsSuccessEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Te$3),q$20(({usersMap:s$25})=>bO({usersMap:s$25})))),this.setSubtasksIdsMapEffect=Ke$1(()=>this.actions$.pipe(Ye$2(El),Mu(()=>[this.store.select(h$11)]),q$20(([{taskId:s$25,subtaskIds:n$46},a$30])=>{return new m$25({...a$30,[s$25]:n$46??[]});}))),this.setSubtaskTreeFromSubtaskIdsEffect=Ke$1(()=>this.actions$.pipe(Ye$2(El),q$20(({taskId:s$25,subtaskTree:n$46})=>pe$1(ye(s$25,n$46))))),this.setSubtaskIdsForFetchedTasksEffect=Ke$1(()=>this.actions$.pipe(Ye$2(k$11),Mu(()=>this.store.select(h$11)),q$20(([{tasks:s$25},n$46])=>{return new m$25(Qs(s$25,n$46));}))),this.readSubtasksOfTaskEffect=Ke$1(()=>this.actions$.pipe(Ye$2($b),this.effectsService.concatLatestTask(),Mu(()=>[this.store.select(o$30)]),q$20(([[{columns:s$25,rootTaskId:n$46},a$30],c$37])=>{let m$32=x$3(s$25),l$26=j$2(m$32);return a$9({taskIds:a$30.subtaskIds??[],teamId:c$37,fieldMetadata:l$26,fieldNames:m$32,filterOmit:x$5(l$26.fields,r$7.TaskView),rootTaskId:n$46,tags:[[n$34.Load,`CacheEffects.readSubtasksOfTaskEffect`]]});}))),this.readSubtasksOfTaskOnColumnsChangeEffect=Ke$1(()=>this.actions$.pipe(Ye$2(tP),oe$13(({params:s$25})=>Nae(s$25.columns)),this.effectsService.concatLatestTask(),Mu(()=>[this.store.select(o$30)]),q$20(([[{taskId:s$25,params:n$46},a$30],c$37])=>a$9({taskIds:a$30.subtaskIds??[],teamId:c$37,fieldNames:x$3(n$46.columns),rootTaskId:s$25,tags:[[n$34.Load,`CacheEffects.readSubtasksOfTaskOnColumnsChangeEffect`]]})))),this.setTeamIdEffect=Ke$1(()=>this.actions$.pipe(Ye$2(yr),oe$13(({response:{workspace_id:s$25}})=>!!s$25),q$20(({response:{workspace_id:s$25}})=>ke$4({teamId:s$25})))),this.readTaskFailureErrorEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Ur,oP),oe$13(({error:s$25})=>s$25.error?.ECODE!==`TASK_301`),q$20(({error:s$25})=>{let n$46=s$25.error;return n$46?.ECODE===`ACCESS_999`&&(n$46.userFacing=!1),new _d(n$46);}))),this.readTaskFailureRouteEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Ur,oP),oe$13(({noRedirect:s$25})=>!s$25),Mu(()=>[this.store.select(f$25)]),oe$13(([s$25,n$46])=>!n$46),Is$1(([{error:s$25}])=>{this.redirectOnHttpErrorResponseService.redirectOnHttpErrorResponse(s$25);})),{dispatch:!1}),this.taskUpdatedFromV3Effect=Ke$1(()=>this.actions$.pipe(Ye$2(jt$2),q$20(({tasks:s$25})=>new x$21(s$25,[],{keepAlreadyLoadedCustomFields:!0})))),this.readNotificationSettingsV3Effect=Ke$1(()=>this.actions$.pipe(Ye$2(yr),q$20(()=>f$18.getNotificationSettings({useCache:!0}))));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_view_cache_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Le$4),ge$10(N$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();Vae=Le$9(`[Task] Read Task for handshake check`,qe$5());dh$1=(t$21,i$27,e$19)=>yr({response:t$21,forceSync:i$27.forceSync,tags:e$19,onOpen:!!i$27.onOpen});Uae=w$10;Wae=t$21=>xr(t$21,Uae);Nbe=[`archived`,`category_details`,`deleted`,`id`,`name`,`private`,`project_id`,`statuses`];Ck=Le$9(`[Task] Read Task Subcategory`,qe$5()),_k=Le$9(`[Task] Read Task Subcategory Success`,qe$5()),kk=Le$9(`[Task] Read Task Subcategory Error`,qe$5());zae=t$21=>({id:t$21.task.id,ovmType:`task`,dirty:!1,version:t$21.task._version_vector});VN();VN();qae=(()=>{class t$21{constructor(e$19,r$34){this.http=e$19,this.clickUpEndpointService=r$34;}read(e$19,r$34,o$32,s$25){let n$46=z$16?`publicTasks`:`tasks`,a$30=z$16?q$17({},o$32):{},c$37=`${this.clickUpEndpointService.taskV3BaseUrl}/experience/${e$19}/${n$46}/${r$34}/tags`;return this.http.get(c$37,{params:a$30,headers:p$18(s$25)});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(ve$7),ge$10(x$15));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Kae=t$21=>Br({response:t$21});Tk=class extends i$18{constructor(){super(...arguments),this.name=`TaskPrrLagDetectStrategy`,this.wasRemoteVersionBehind=!1;}isLag(){return this.localVersion?(a$19(this.localVersion.version,this.remoteVersion)&&(this.wasRemoteVersionBehind=!0),this.localVersion.dirty?!a$19(this.remoteVersion,this.localVersion.version):!f$17(this.remoteVersion,this.localVersion.version)):!1;}report(i$27){this.wasRemoteVersionBehind&&super.report(i$27),this.wasRemoteVersionBehind=!1;}};VN();Qae=(()=>{class t$21{constructor(){this.logger=f$30.byNamespace(`tasks`),this.ovmService=C$23(he$1),this.keepLocalTaskIfRemoteIsNotGreaterOrEqual=(e$19,r$34,o$32,s$25)=>n$46=>this.isReverseRefreshBugDetected(n$46,r$34,s$25)?dh$1(n$46,e$19,[[n$34.Load,`TaskPrrLagService.keepLocalTaskIfRemoteIsNotGreaterOrEqual.isReverseRefreshBugDetected`]]):this.isRemoteNotNewer(n$46,s$25)?dP():o$32?.cacheOnly?Kae(n$46):(this.logIfTaskMissingFromResponse(n$46,e$19),dh$1(n$46,e$19,[[n$34.Load,`TaskPrrLagService.keepLocalTaskIfRemoteIsNotGreaterOrEqual`]]));}createTaskPrrLagDetectStrategy(e$19,r$34){return new Tk(Le$2(e$19.task),r$34,`TaskPrrLagService`);}isReverseRefreshBugDetected(e$19,r$34,o$32){return this.ovmService.isReverseRefreshBugDetected(Le$2(e$19.task),o$32,r$34,`TaskPrrLagService keepLocalTaskIfRemoteNotGreaterOrEqual`);}isRemoteNotNewer(e$19,r$34){return this.ovmService.detectLagUsingStrategy(this.createTaskPrrLagDetectStrategy(e$19,r$34));}logIfTaskMissingFromResponse(e$19,r$34){if(!e$19.task)try{let o$32=JSON.stringify(r$34);this.logger.error(`[ERROR] - keepLocalTaskIfRemoteIsNotGreaterOrEqual ${o$32}`),er$2(`task_view_blank`,{location:`keepLocalTaskIfRemoteIsNotGreaterOrEqual`,action:r$34,response:e$19});}catch{this.logger.error(`[ERROR] - keepLocalTaskIfRemoteIsNotGreaterOrEqual`),er$2(`task_view_blank`,{location:`keepLocalTaskIfRemoteIsNotGreaterOrEqual`,action:r$34,response:e$19});}}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();n$24(`app_module`,`task_view_resource_effects`,`load`);Jae=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19){this.actions$=e$19,this.resource=r$34,this.taskTagsResource=o$32,this.store=s$25,this.ovmRumService=n$46,this.subtasksTreeResource=a$30,this.taskPrrLagService=c$37,this.applicationEnvironmentService=m$32,this.timelineService=l$26,this.taskAllocationsService=g$19,this.logger=f$30.byNamespace(`tasks`),this.readTask$=Ke$1(()=>this.actions$.pipe(Ye$2(RA,Vae),Mu(({taskId:f$33})=>[this.store.select(it$2(f$33)),this.store.select(re$3(f$33)),this.store.select(G$6(f$33)),this.applicationEnvironmentService.environment$]),oe$13(([f$33,h$15])=>!(f$33.cacheOnly&&h$15?.content)),le$5(([f$33,h$15,I$25,A$22,R$21])=>(A$22&&!A$22.task&&er$2(`task_view_blank`,{action:f$33,task:h$15,loading:I$25,cachedResponse:A$22}),h$15?.cachedAt&&D$5(h$15.cachedAt)&&A$22?.task&&K$5(A$22,h$15)?qe$6(dh$1(A$22,f$33,f$33.tags)):I$25?.cacheOnly&&Array.isArray(f$33.params?.[`fields[]`])&&Wae(f$33.params?.[`fields[]`]??[])?qe$6(Hr({taskId:f$33.taskId,cacheOnly:!1})):(!f$33.workspaceId&&R$21.teamId&&(f$33.workspaceId=R$21.teamId),this.readTaskWithOvm(f$33,I$25)))))),this.readTaskWithOvm$=Ke$1(()=>this.actions$.pipe(Ye$2(mP),Mu(f$33=>[this.store.select(it$2(f$33.taskId)),this.store.select(Qs$3)]),ee$8({id:({taskId:f$33},h$15)=>f$33,run:(f$33,h$15,I$25)=>this.resource.read({publicSharingData:I$25,taskId:f$33.taskId,params:f$33.params,workspaceId:f$33.workspaceId,tags:f$33.tags}).pipe(Mu(()=>[this.store.select(re$3(f$33.taskId)),this.store.select(Kc(f$33.taskId,`task`))]),q$20(([A$22,R$21,w$26])=>this.taskPrrLagService.keepLocalTaskIfRemoteIsNotGreaterOrEqual(f$33,h$15,R$21,w$26)(A$22))),onError:({taskId:f$33,cacheOnly:h$15,noRedirect:I$25=!1},A$22)=>qe$6(Ur({error:A$22,taskId:f$33,noRedirect:h$15||I$25}))}))),this.readTaskWithCustomId$=Ke$1(()=>this.actions$.pipe(Ye$2(rP),Mu(()=>this.store.select(Qs$3)),ee$8({id:({customTaskId:f$33},h$15)=>f$33,run:({customTaskId:f$33,params:h$15,teamId:I$25,normalTaskIdPresent:A$22,tags:R$21},w$26)=>this.resource.readTaskWithCustomId({customTaskId:f$33,teamId:I$25,params:h$15,publicSharingData:w$26,tags:R$21}).pipe(q$20(E$16=>lP({response:E$16,normalTaskIdPresent:A$22}))),onError:(f$33,h$15)=>qe$6(oP({error:h$15}))}))),this.readTaskWithCustomIdSuccessEffect=Ke$1(()=>this.actions$.pipe(Ye$2(lP),q$20(({response:f$33})=>(f$33?.task||(this.logger.error(`[ERROR] - readTaskWithCustomIdSuccessEffect should have a task`),er$2(`task_view_blank`,{location:`readTaskWithCustomIdSuccess`,response:f$33})),yr({response:f$33,tags:[[n$34.Load,`ResourceEffects.readTaskWithCustomIdSuccessEffect`]]}))))),this.setGlobalTaskFromCustomIdFetch=Ke$1(()=>this.actions$.pipe(Ye$2(lP),oe$13(({normalTaskIdPresent:f$33})=>!f$33),q$20(({response:{task:f$33}})=>new h$10({id:f$33.id})))),this.readTaskSubcategory$=Ke$1(()=>this.actions$.pipe(Ye$2(yr),le$5(f$33=>{let{task:h$15,space_id:I$25,folder_id:A$22}=f$33.response;return $i({project:I$25?this.store.select(Q$16(I$25)):qe$6(void 0),category:A$22?this.store.select(Qt$2(A$22)):qe$6(void 0),subcategory:this.store.select($t$2(h$15.subcategory))}).pipe(Ve$4(1),q$20(({project:R$21,category:w$26,subcategory:E$16})=>{if(Hae(E$16))return Ck({taskId:h$15.id,subcategoryId:h$15.subcategory});return jt$2({tasks:[{id:h$15.id,subcategory:Gae(E$16,w$26,R$21)}]});}));}))),this.markTaskViewedAfterFetchEffect=Ke$1(()=>this.actions$.pipe(Ye$2(yr),oe$13(()=>!z$16),q$20(({response:{task:{id:f$33},workspace_id:h$15}})=>Ie({taskId:f$33,teamId:h$15})))),this.markTaskViewedEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Ie),ee$8({run:({taskId:f$33,teamId:h$15})=>this.resource.markViewed(f$33,h$15).pipe(q$20(()=>_e()))}))),this.readTaskTags$=Ke$1(()=>this.actions$.pipe(Ye$2(yr),oe$13(({response:{task:f$33}})=>(f$33.tags??[]).length>0),Mu(()=>this.store.select(Qs$3)),ee$8({run:({response:{task:f$33,workspace_id:h$15}},I$25)=>this.taskTagsResource.read(h$15,f$33.id,I$25,[[n$34.Load,`readTaskSuccess`]]).pipe(q$20(At),q$20(A$22=>x$4({taskId:f$33.id,tags:A$22}))),onError:({response:{workspace_id:f$33,task:h$15}},I$25)=>qe$6(C({error:I$25,teamId:f$33,taskId:h$15.id}))}))),this.setTaskVersionAfterReadTaskSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(yr,lP,Br),q$20(f$33=>f$33.response),q$20(zae),q$20(j$14.setVersion))),this.startGetSubtaskIds$=Ke$1(()=>this.actions$.pipe(Ye$2(yr),q$20(({response:{task:{id:f$33,root_parent:h$15},workspace_id:I$25}})=>WM({taskId:f$33,teamId:I$25,rootTaskId:h$15??f$33,tags:[[n$34.Load,`ResourceEffects.startGetSubtaskIds`]]})))),this.getSubtaskIds$=Ke$1(()=>this.actions$.pipe(Ye$2(WM),Mu(()=>this.store.select(Qs$3)),ee$8({id:({taskId:f$33},h$15)=>f$33,run:({taskId:f$33,teamId:h$15,rootTaskId:I$25,tags:A$22},R$21)=>this.subtasksTreeResource.readTree(f$33,h$15,A$22,{params:{include_archived:!0},publicSharingData:R$21}).pipe(le$5(w$26=>{let E$16=w$26.map(P$20=>P$20.id);return j$23([jt$2({tasks:[{id:f$33,subtaskIds:E$16}]}),El({taskId:f$33,subtaskIds:E$16,teamId:h$15,subtaskTree:w$26,rootTaskId:I$25})]);})),onError:()=>qe$6(Dae())}))),this.readPinnedTaskTemplates$=Ke$1(()=>this.actions$.pipe(Ye$2(yr),oe$13(()=>!z$16),Mu(({response:f$33})=>[this.store.select($t$2(f$33.task.subcategory))]),oe$13(([,f$33])=>!f$33?.pinned_templates),le$5(([f$33])=>qe$6(M$18({subcategoryId:f$33.response.task.subcategory,queryParams:{include_preset_task_template:!0,include_pinned_templates:!0,skip_hierarchy_members:!0},handleError:!1}))))),this.readTaskAllocations$=Ke$1(()=>this.actions$.pipe(Ye$2(yr),Mu(f$33=>[this.timelineService.allocationsFeatureFlagEnabled$,this.store.select(st$1(f$33.response.task.id))]),oe$13(([,f$33,h$15])=>f$33&&(!h$15||h$15.length===0)),le$5(([f$33])=>this.loadAllocationsForTask(f$33)))),n$46.enableConsole();}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_view_resource_effects`,`run`),e$19;}readTaskWithOvm(e$19,r$34){return qe$6(Hr({taskId:e$19.taskId,cacheOnly:!!e$19.cacheOnly}),mP({...e$19,cacheOnly:r$34?r$34.cacheOnly:!!e$19.cacheOnly}));}loadAllocationsForTask(e$19){return this.taskAllocationsService.listTimeAllocations(e$19.response.workspace_id,{taskId:e$19.response.task.id}).pipe(q$20(r$34=>h$1.storeEntries({entryType:`allocations`,entriesByTaskId:{[e$19.response.task.id]:r$34}})));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(W$6),ge$10(qae),ge$10(q$19),ge$10(E$10),ge$10(Ue),ge$10(Qae),ge$10(Ni),ge$10(N$2),ge$10(j));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();VN();Xae=(()=>{class t$21{constructor(e$19,r$34){this.http=e$19,this.clickUpEndpointService=r$34;}read(e$19,r$34){return this.http.get(`${this.clickUpEndpointService.taskV3BaseUrl}/experience/${e$19}/tasks/${r$34}/hiddenFields`);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(ve$7),ge$10(x$15));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();n$24(`app_module`,`task_custom_fields_effects`,`load`);Zae=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46){this.actions$=e$19,this.resource=r$34,this.taskHiddenFieldsResource=o$32,this.store=s$25,this.applicationEnvironmentService=n$46,this.customFieldsByTaskTypeBase$=jS(O$16.TasksCustomFieldsByTaskTypeFE),this.customFieldsByTaskTypeEnabled$=this.customFieldsByTaskTypeBase$.pipe(ws$2(!1)),this.readTaskCustomFields$=Ke$1(()=>this.actions$.pipe(Ye$2(o$21),Mu(()=>[this.applicationEnvironmentService.environment$]),ee$8({id:({entity:a$30},c$37)=>a$30.id,run:({entity:a$30},c$37)=>this.resource.read({taskId:a$30.id,params:{"fields[]":[`custom_fields`]},workspaceId:c$37.teamId??``,tags:[[n$34.Load,`readTaskCustomFieldsEffect`]]}).pipe(q$20(({fields:m$32})=>m$24({fields:m$32??[],taskId:a$30.id}))),onError:(a$30,c$37)=>qe$6(a$10({error:c$37}))}))),this.updateTaskCustomFields$=Ke$1(()=>this.actions$.pipe(Ye$2(t$9),Mu(({taskId:a$30})=>this.store.select(n$20(a$30)).pipe(R$20())),q$20(([{value:a$30,valueRichtext:c$37,valueOptions:m$32,field:l$26,via:g$19},f$33])=>{let{newFields:h$15,newCustomFieldValues:I$25,newCustomFields:A$22}=Yae(f$33,{value:a$30,valueOptions:m$32,valueRichtext:c$37},l$26);return new x$21([{id:f$33.id,fields:h$15,customFieldValues:I$25,customFields:A$22}],[],{fromAiCustomFields:g$19===`ai-generate`});}))),this.listenTaskCustomFields$=Ke$1(()=>this.actions$.pipe(Ye$2(yr,lP,Br),oe$13(({response:{fields:a$30}})=>a$30!==void 0),q$20(({response:{fields:a$30,task:c$37}})=>m$24({fields:a$30,taskId:c$37.id})))),this.readTaskCustomFieldsSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(m$24),q$20(({fields:a$30,taskId:c$37})=>new x$21([{id:c$37,customFieldDefinitionIds:this.customFieldsToCfIds(a$30)}],[],{keepAlreadyLoadedCustomFields:!1})))),this.listenUpdateTIML=Ke$1(()=>this.actions$.pipe(Ye$2(d$8.removeTaskFromAdditionalListSuccess,d$8.addTaskToAnotherListSuccess),q$20(({taskId:a$30})=>o$21({entity:{type:`task`,id:a$30,name:`task`}})))),this.removeTaskCustomFieldFromTaskCache=Ke$1(()=>this.actions$.pipe(Ye$2(i$11),Mu(({taskId:a$30})=>this.store.select(n$20(a$30)).pipe(R$20())),q$20(([{fieldId:a$30},c$37])=>jt$2({tasks:[{id:c$37.id,customFieldDefinitionIds:this.removeId(c$37.customFieldDefinitionIds,a$30)}]})))),this.reloadCfsOnTaskTypeUpdate$=Ke$1(()=>this.actions$.pipe(Ye$2(cP),Mu(()=>[this.store.select(de$10),this.customFieldsByTaskTypeEnabled$]),oe$13(([{context:a$30},c$37,m$32])=>m$32&&a$30===`taskTypeUpdate`),ee$8({id:({taskId:a$30},c$37)=>a$30,run:({taskId:a$30},c$37)=>this.resource.read({taskId:a$30,params:{"fields[]":[s$15.Core,s$15.CustomFields]},workspaceId:c$37.id,tags:[[n$34.Load,`reloadCfsOnTaskTypeUpdate$`]]}).pipe(Z$12(({task:m$32,fields:l$26})=>{let g$19=[];return g$19.push(m$24({fields:l$26??[],taskId:m$32.id})),g$19.push(jt$2({tasks:[{id:a$30,fields:m$32.fields}]})),g$19;})),onError:(a$30,c$37)=>qe$6(a$10({error:c$37}))}))),this.updateHiddenFieldsOnReadTask$=Ke$1(()=>this.actions$.pipe(Ye$2(yr),q$20(({response:{task:a$30}})=>r$15({taskId:a$30.id})))),this.updateHiddenFieldsOnTaskTypeUpdate$=Ke$1(()=>this.actions$.pipe(Ye$2(cP),Mu(()=>this.customFieldsByTaskTypeEnabled$),oe$13(([{context:a$30},c$37])=>c$37&&a$30===`taskTypeUpdate`),q$20(([{taskId:a$30}])=>r$15({taskId:a$30})))),this.updateHiddenFieldsOnCfLocationUpdate$=Ke$1(()=>this.actions$.pipe(Ye$2(N$14),Mu(()=>[this.customFieldsByTaskTypeEnabled$,this.store.select(Z$10).pipe(R$20())]),oe$13(([a$30])=>!!a$30),q$20(([a$30,c$37,m$32])=>r$15({taskId:m$32})))),this.readHiddenCustomFields$=Ke$1(()=>this.actions$.pipe(Ye$2(r$15),le$5(a$30=>$i([this.store.select(kA).pipe(R$20(),Ve$4(1)),this.customFieldsByTaskTypeBase$,qe$6(a$30)])),oe$13(([a$30,c$37])=>!!c$37),le$5(([a$30,c$37,m$32])=>this.taskHiddenFieldsResource.read(a$30,m$32.taskId).pipe(q$20(({fields:l$26})=>m$15({hiddenFields:l$26})),Xo$2(l$26=>qe$6(u$16({error:l$26}))))))),this.updateRelationshipCustomFieldOnCreation$=Ke$1(()=>this.actions$.pipe(Ye$2(i$21),Mu(()=>this.store.select(Z$10).pipe(R$20())),Mu(([a$30,c$37])=>this.store.select(n$20(c$37)).pipe(R$20())),oe$13(([[{entity:a$30,field:c$37}],m$32])=>{let l$26=c$37.type===a$24.Tasks||c$37.type===a$24.ListRelationship,g$19=a$30.type===`category`&&m$32.category?.id===a$30.id||a$30.type===`subcategory`&&m$32.subcategory?.id===a$30.id,f$33=!!a$30.id;return l$26&&g$19&&f$33;}),q$20(([[{field:a$30}],c$37])=>({id:c$37.id,field:a$30,currentFieldIds:c$37.customFieldDefinitionIds||[],task:c$37})),oe$13(({currentFieldIds:a$30,field:c$37})=>!a$30.includes(c$37.id)),q$20(({id:a$30,field:c$37,currentFieldIds:m$32,task:l$26})=>new x$21([{id:a$30,customFieldDefinitionIds:[...m$32,c$37.id],customFields:[...(l$26.customFields??[]),c$37]}]))));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_custom_fields_effects`,`run`),e$19;}removeId(e$19,r$34){return e$19?.filter(o$32=>o$32!==r$34);}customFieldsToCfIds(e$19){return e$19.map(r$34=>r$34.id);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(W$6),ge$10(Xae),ge$10(q$19),ge$10(Ni));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();n$24(`app_module`,`task_hierarchy_cache_effects`,`load`);ece=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.taskService=r$34,this.writeSubcategory$=Ke$1(()=>this.actions$.pipe(Ye$2(_k),le$5(({subcategory:o$32,taskId:s$25})=>{let n$46=[new x$21([{id:s$25,subcategory:o$32}])];return o$32.category_details&&o$32.project_id&&n$46.push(Re$4({subcategory:o$32,categoryId:o$32.category_details.id,projectId:o$32.project_id,fromAPI:!0})),j$23(n$46);}))),this.updateSubtaskHierarchyEffect=Ke$1(()=>this.taskService.onConvertToSubtask.pipe(oe$13(({convertedTask:o$32,parentTask:s$25})=>!!(o$32&&s$25)),q$20(({convertedTask:o$32,parentTask:s$25})=>{return jt$2({tasks:[j$4(o$32,s$25)]});}))),this.writeHiddenSubcategory$=Ke$1(()=>this.actions$.pipe(Ye$2(kk),oe$13(({error:o$32})=>o$32.ECODE===`ACCESS_067`||o$32.ECODE===`ACCESS_066`||o$32.ECODE===`ACCESS_065`),le$5(({taskId:o$32,subcategoryId:s$25})=>{return qe$6(new x$21([{id:o$32,subcategory:{access:!1,color:void 0,id:s$25,name:`Shared with me`,orderindex:0,override_statuses:!1,private:!0,sprint:void 0,status:void 0}}]));})));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_hierarchy_cache_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(zr$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`app_module`,`task_hierarchy_resource_effects`,`load`);tce=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.managerDataService=r$34,this.readSubcategoryEffect=Ke$1(()=>this.actions$.pipe(Ye$2(Ck),ee$8({run:({taskId:o$32,subcategoryId:s$25})=>this.managerDataService.getSubcategoryById({id:s$25,queryParams:{skip_hierarchy_members:!0},handleError:!1,source:`TaskHierarchyResourceEffects.readSubcategoryEffect`}).pipe(q$20(n$46=>_k({taskId:o$32,subcategory:n$46}))),onError:({taskId:o$32,subcategoryId:s$25},n$46)=>qe$6(kk({error:n$46,taskId:o$32,subcategoryId:s$25}))})));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_hierarchy_resource_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(Ci));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();hr$3();VN();dm();VN();rce=(()=>{class t$21{constructor(e$19,r$34){this.clickUpEndpointService=e$19,this.http=r$34;}readSubtaskColumns(e$19,r$34,o$32,s$25){if(z$16)return qe$6({columns:He});let n$46=`${this.clickUpEndpointService.taskV3BaseUrl}/v2/experience/${r$34}`,a$30=z$16?`${n$46}/publicTasks/${e$19}/subtasks/columns`:`${n$46}/tasks/${e$19}/subtasks/columns`,c$37=z$16?q$17({},s$25):void 0;return this.http.get(a$30,{params:c$37,...(o$32?{headers:p$18(o$32)}:{})});}deleteSubtaskColumns(e$19,r$34,o$32){let s$25=`${this.clickUpEndpointService.taskV3BaseUrl}/experience/${r$34}/tasks/${e$19}/subtasks/columns/${o$32}`;return this.http.delete(s$25);}updateSubtaskColumns(e$19,r$34,o$32){let s$25=`${this.clickUpEndpointService.taskV3BaseUrl}/v2/experience/${r$34}/tasks/${e$19}/subtasks/columns`;return this.http.post(s$25,o$32);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(x$15),ge$10(ve$7));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();n$24(`app_module`,`task_subtasks_columns_resource_effects`,`load`);ice=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.resource=r$34,this.effectsService=o$32,this.store=s$25,this.readTaskSuccessEffect=Ke$1(()=>this.actions$.pipe(Ye$2(El),oe$13(({subtaskIds:n$46,teamId:a$30})=>!!n$46.length&&!!a$30),q$20(({taskId:n$46,teamId:a$30,subtaskIds:c$37,rootTaskId:m$32})=>!c$37.length||!a$30?$b({taskId:n$46,columns:[],rootTaskId:m$32}):_b({taskId:n$46,teamId:a$30,rootTaskId:m$32,tags:[[n$34.Load,`TaskSubtasksColumnsResourceEffects.readTaskSuccessEffect`]]})))),this.readSubtaskColumnsEffect=Ke$1(()=>this.actions$.pipe(Ye$2(_b),Mu(()=>this.store.select(Qs$3)),ee$8({id:({taskId:n$46},a$30)=>n$46,run:({taskId:n$46,teamId:a$30,rootTaskId:c$37,tags:m$32},l$26)=>this.resource.readSubtaskColumns(n$46,a$30,m$32,l$26).pipe(q$20(({columns:g$19})=>$b({taskId:n$46,columns:[...g$19,{field:`tags`,width:null,display_order:Infinity}],rootTaskId:c$37}))),onError:(n$46,a$30)=>AP({error:a$30})}))),this.readSubtaskColumnsSuccessCacheEffect=Ke$1(()=>this.actions$.pipe(Ye$2($b),q$20(({taskId:n$46,columns:a$30})=>jt$2({tasks:[{id:n$46,subtaskColumns:a$30.length?a$30:He}]})))),this.updateSubtaskColumnsEffect=Ke$1(()=>this.actions$.pipe(Ye$2(eP),this.effectsService.concatLatestTaskAndTeam(),Q$15({run:({taskId:n$46,params:a$30},c$37,m$32)=>{let l$26=a$30.columns.filter(f$33=>f$33.field!==`tags`);if(l$26.length===0)return;let g$19={...a$30,columns:l$26};return this.resource.updateSubtaskColumns(n$46,m$32.id,g$19).pipe(q$20(()=>tP({taskId:n$46,params:g$19})),ws$2(jt$2({tasks:[{id:c$37.id,subtaskColumns:[...(l$26.map((f$33,h$15)=>({...f$33,display_order:h$15}))??[])]}]})));},undoAction:(n$46,a$30,c$37)=>jt$2({tasks:[{id:c$37.id,subtaskColumns:c$37.subtaskColumns}]})}))),this.deleteSubtaskColumnsEffect=Ke$1(()=>this.actions$.pipe(Ye$2(aP),this.effectsService.concatLatestTaskAndTeam(),Q$15({run:({taskId:n$46,subtaskColumn:a$30},c$37,m$32)=>this.resource.deleteSubtaskColumns(n$46,m$32.id,a$30).pipe(q$20(()=>iP({taskId:n$46})),ws$2(jt$2({tasks:[{id:c$37.id,subtaskColumns:(c$37.subtaskColumns??[]).filter(({field:l$26})=>l$26!==a$30)}]}))),undoAction:(n$46,a$30,c$37)=>jt$2({tasks:[{id:c$37.id,subtaskColumns:c$37.subtaskColumns}]})})));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_subtasks_columns_resource_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(rce),ge$10(N$1),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`app_module`,`task_tags_cache_cache_effects`,`load`);oce=(()=>{class t$21{constructor(e$19,r$34){this.actions$=e$19,this.store=r$34,this.renameTagEffect=Ke$1(()=>this.actions$.pipe(Ye$2(k$7),Mu(()=>this.store.select(p$24)),q$20(([{tagName:o$32,newName:s$25,projectId:n$46},a$30])=>{if(!s$25)return jt$2({tasks:[]});let c$37=l$26=>l$26.projectId===n$46||l$26.project_id===n$46||l$26.project?.id===n$46,m$32=l$26=>(l$26.tags??[]).some(g$19=>g$19.name===o$32);return jt$2({tasks:Object.values(a$30).filter(l$26=>c$37(l$26)&&m$32(l$26)).map(l$26=>({id:l$26.id,tags:l$26.tags.map(g$19=>g$19.name===o$32?{...g$19,name:s$25}:g$19)}))});}))),this.addTagEffect=Ke$1(()=>this.actions$.pipe(Ye$2(C$8),Mu(()=>this.store.select(p$24)),q$20(([{taskIds:o$32,tags:s$25},n$46])=>{let a$30=c$37=>o$32.includes(c$37.id);return jt$2({tasks:Object.values(n$46).filter(a$30).map(c$37=>({id:c$37.id,tags:(c$37.tags??[]).concat(s$25)}))});}))),this.addTagToProjectEffect=Ke$1(()=>this.actions$.pipe(Ye$2(p$4),Mu(({taskId:o$32})=>this.store.select(ce$4(o$32)).pipe(R$20())),q$20(([{tag:o$32},s$25])=>u$10({projectId:s$25,tag:o$32})))),this.addTagsToTaskEffect=Ke$1(()=>this.actions$.pipe(Ye$2(x$4),q$20(({taskId:o$32,tags:s$25})=>jt$2({tasks:[{id:o$32,tags:s$25}]}))));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_tags_cache_cache_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();n$24(`app_module`,`task_view_router_effects`,`load`);sce=(()=>{class t$21{static checkDistinct(e$19,r$34){return e$19.isCustomTaskId?e$19.taskId===r$34.taskId&&e$19.isCustomTaskId===r$34.isCustomTaskId&&e$19.teamId===r$34.teamId&&!r$34.normalTaskIdPresent:e$19.taskId===r$34.taskId&&e$19.isCustomTaskId===r$34.isCustomTaskId&&e$19.teamId===r$34.teamId&&!r$34.teamId;}static checkRoutingPayloadForTaskView(e$19){if(typeof e$19?.routerState?.data>`u`)return;let r$34=e$19.routerState.data;if(typeof r$34.isTaskView>`u`)return;let o$32=e$19.routerState.params?.team,s$25=e$19.routerState.params?.task,a$30=!!o$32&&/([_A-Z0-9]+-\d+)/.test(s$25);return r$34.isTaskView?{taskId:s$25,isCustomTaskId:a$30,teamId:o$32,url:e$19.routerState.url}:void 0;}constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.router=r$34,this.applicationEnvironmentService=o$32,this.legacySharedTaskService=s$25,this.readTask$=Ke$1(()=>this.actions$.pipe(Ye$2(ji$1),q$20(({taskId:n$46,teamId:a$30,onOpen:c$37})=>{return RA({taskId:n$46,params:z$9({"fields[]":z$16?K$7:w$10}),workspaceId:a$30??``,tags:[[n$34.Load,`RouterEffects taskIdParamChanged`]],onOpen:!!c$37});}))),this.readTaskByCustomId$=Ke$1(()=>this.actions$.pipe(Ye$2(Xi),q$20(({customTaskId:n$46,teamId:a$30,normalTaskIdPresent:c$37})=>{return rP({customTaskId:n$46,params:z$9({"fields[]":z$16?K$7:w$10}),teamId:a$30,normalTaskIdPresent:c$37,tags:[[n$34.Load,`RouterEffects customTaskIdParamChanged`]]});}))),this.taskViewRouterEffect=Ke$1(()=>this.actions$.pipe(Ye$2(bt$4),q$20(({payload:n$46})=>t$21.checkRoutingPayloadForTaskView(n$46)),Is$1(this.redirectIfCustomIdInWrongRegister.bind(this)),em(this.legacySharedTaskService?.onOpen.pipe(q$20(({id:n$46,customId:a$30,teamId:c$37,app:m$32,contentSection:l$26})=>({taskId:n$46??a$30,isCustomTaskId:!!a$30,teamId:c$37,normalTaskIdPresent:!!n$46,onOpen:!0,app:m$32,contentSection:l$26})))||qe$6(void 0)),R$20(),oe$13(({taskId:n$46})=>!!n$46),zt$2((n$46,a$30)=>t$21.checkDistinct(n$46,a$30)),le$5(({taskId:n$46,isCustomTaskId:a$30,teamId:c$37,normalTaskIdPresent:m$32,onOpen:l$26,app:g$19,contentSection:f$33})=>this.determineRouteAction({taskId:n$46,isCustomTaskId:a$30,teamId:c$37,normalTaskIdPresent:m$32,onOpen:!!(l$26??!0),app:g$19,contentSection:f$33}))));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_view_router_effects`,`run`),e$19;}getSafeTeamId(){return this.applicationEnvironmentService.environment$.pipe(oe$13(e$19=>!!e$19?.teamId),Ve$4(1),q$20(e$19=>e$19.teamId??``));}determineRouteAction({taskId:e$19,isCustomTaskId:r$34,teamId:o$32,normalTaskIdPresent:s$25,onOpen:n$46,app:a$30,contentSection:c$37}){return r$34&&e$19&&o$32&&!s$25?qe$6(Xi({customTaskId:e$19.toUpperCase(),teamId:o$32,normalTaskIdPresent:s$25,onOpen:n$46,app:a$30,contentSection:c$37})):e$19?o$32?qe$6(ji$1({taskId:e$19,teamId:o$32,onOpen:n$46,app:a$30,contentSection:c$37})):this.getSafeTeamId().pipe(q$20(m$32=>ji$1({taskId:e$19,teamId:m$32,onOpen:n$46,app:a$30,contentSection:c$37}))):z$18;}redirectIfCustomIdInWrongRegister(e$19){if(!e$19)return;let{taskId:r$34,isCustomTaskId:o$32,url:s$25}=e$19;if(o$32&&r$34&&s$25&&r$34!==r$34.toUpperCase()){let n$46=s$25.replace(r$34,r$34.toUpperCase());this.router.navigateByUrl(n$46,{},{tag:`router-effects-redirect-if-custom-id-in-wrong-register`,path:n$46});}}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(qd),ge$10(Ni),ge$10(ty,8));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();Ee$4();VN();n$24(`app_module`,`task_view_analytics_effects`,`load`);nce=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25){this.actions$=e$19,this.store=r$34,this.taskViewAnalyticsService=o$32,this.customTaskTypeService=s$25,this.trackOpenTaskPropsSubject$=new tt$3(null),this.trackOpenTaskProps$=this.trackOpenTaskPropsSubject$.asObservable(),this.trackOpenTask$=Ke$1(()=>this.actions$.pipe(Ye$2(qi),q$20(n$46=>(this.setTrackOpenTaskProps(n$46),PP())))),this.sendSegmentOnTaskOpen$=Ke$1(()=>this.actions$.pipe(Ye$2(wP),Mu(({props:n$46})=>[this.store.select($r),this.store.select(n$20(n$46.objectId)),this.customTaskTypeService.customTaskTypesMap$,this.customTaskTypeService.customFieldsByTaskTypeEnabled$]),q$20(([{props:n$46},a$30,c$37,m$32,l$26])=>{let g$19=(c$37?.customFields??[]).filter(A$22=>st$3(A$22)),[f$33,h$15]=i$22(c$37?.customFields??[],A$22=>s$14(A$22?.applied_objects??[],m$32)&&l$26),I$25=this.getMatchingTaskType(c$37,f$33);this.taskViewAnalyticsService.trackEvent({...n$46,layout:a$30,permissionLevel:n$46.permissionLevel??c$37?.permissions?.permission_level,aiCustomFieldCount:g$19.length,customFields:{numTaskType:I$25?.length??0,numLocation:h$15?.length??0}});})),{dispatch:!1}),this.sendSegmentOnTaskOpenSuccess$=Ke$1(()=>this.actions$.pipe(Ye$2(PP,yr),Mu(()=>this.trackOpenTaskProps$),Z$12(([n$46,a$30])=>{if(n$46.type===yr.type&&a$30&&(n$46.onOpen||a$30?.props?.via===`inbox`||a$30?.props?.via===`comment`||a$30?.props?.via===`comment draft`||a$30?.props?.via===`task description`||a$30?.props?.via===`view`||a$30?.isRefreshTaskViewV3)){let c$37=wP({props:a$30.props});return this.resetTrackOpenTaskProps(),[c$37];}return[];}),ps$2(500,m$28)));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_view_analytics_effects`,`run`),e$19;}setTrackOpenTaskProps(e$19){this.trackOpenTaskPropsSubject$.next(e$19);}resetTrackOpenTaskProps(){this.trackOpenTaskPropsSubject$.next(null);}getMatchingTaskType(e$19,r$34){if(!e$19)return[];let o$32=e$19.custom_type||0;return(r$34??[]).filter(s$25=>(s$25?.applied_objects??[]).find(n$46=>n$46?.object_type===Cr.CustomTypeObject&&n$46?.object_id===o$32));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(I$1),ge$10(ge$3));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();n$24(`app_module`,`task_view_checklist_effects`,`load`);ace=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.actions$=r$34,this.setChecklistsEffect=Ke$1(()=>this.actions$.pipe(Ye$2(yr),Mu(()=>this.store.select(C$5)),oe$13(([,o$32])=>!!o$32),q$20(([{response:{task:o$32}}])=>o$17({mapId:o$32.id,checklists:Y$2(o$32.checklists)}))));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`task_view_checklist_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(Le$4));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();u$33();dm();hr$3();U$18();VN();dm();VN();lce=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30,c$37,m$32,l$26,g$19){this.action$=e$19,this.store=r$34,this.dataService=o$32,this.sharedData=s$25,this.toastService=n$46,this.segmentService=a$30,this.envInjector=c$37,this.websocketV2Service=m$32,this.subcategoryResource=l$26,this.categoryResource=g$19,this.setTemplatesTeam$=Ke$1(()=>this.action$.pipe(Ye$2(_$2),Mu(()=>this.store.select(G$11)),le$5(([f$33,h$15])=>qe$6(new l$14({}))))),this.getDefaultCaegoryTemplates$=Ke$1(()=>this.action$.pipe(Ye$2(U$4),q$20(f$33=>f$33.payload),le$5(({templateId:f$33})=>this.dataService.getDefaultCategoryTemplate().pipe(le$5(h$15=>{let I$25=(h$15.templates||[]).find(A$22=>A$22.id===f$33);return I$25?qe$6(new i$8({template:{...I$25,type:I$11.Category}})):z$18;}),Xo$2(h$15=>qe$6(new P$5({error:h$15}))))))),this.getAutoTemplateById$=Ke$1(()=>this.action$.pipe(Ye$2(u$11),q$20(f$33=>f$33.payload),le$5(({templateId:f$33,projectOverride:h$15,via:I$25})=>this.dataService.getClickUpTemplates().pipe(le$5(({groups:A$22})=>{let R$21;for(let w$26 of A$22){let E$16=w$26.templates.find(({id:P$20})=>P$20===f$33);if(E$16){R$21=E$16;break;}}return R$21?qe$6(new i$8({template:R$21,projectOverride:h$15,via:I$25})):qe$6(new P$5({error:{msg:`Unable to locate Template`,ECODE:`AUTOTEMP_002`}}));}),Xo$2(A$22=>qe$6(new P$5({error:A$22}))))))),this.createAutoTemplate$=Ke$1(()=>this.action$.pipe(Ye$2(C$9),q$20(f$33=>f$33.payload),Mu(()=>this.store.select(de$10)),le$5(([{template:f$33,projectOverride:h$15,via:I$25},A$22])=>$i([qe$6(f$33),qe$6(h$15),qe$6(A$22),qe$6(I$25),...(f$33.type===I$11.Task?[oo$2(this.envInjector,()=>cce(h$15))]:[])])),le$5(([f$33,h$15,I$25,A$22,R$21])=>{let w$26;if(f$33.type===I$11.Project?w$26=I$25:w$26=h$15||this.sharedData.compatCurrentProject,w$26&&w$26.id){let E$16={task_id:null,name:f$33.name.trim(),old_assignees:f$33.options.old_assignees,old_subtask_assignees:f$33.options.old_subtasks_assignees,old_followers:f$33.options.old_followers,old_tags:f$33.options.old_tags,attachments:f$33.options.attachments,comment_attachments:f$33.options.comment_attachments,old_status:f$33.options.old_status,old_statuses:f$33.options.old_statuses,subtasks:f$33.options.subtasks,content:f$33.options.content,old_checklists:f$33.options.old_checklists,recur_settings:f$33.options.recurring_settings,priority:f$33.options.priority,internal_dependencies:f$33.options.internal_dependencies,external_dependencies:f$33.options.external_dependencies,return_immediately:!0,custom_fields:f$33.options.custom_fields,include_views:f$33.options.include_views,automation:f$33.options.automation,project_id:w$26.id},P$20;switch(f$33.type){case I$11.Project:P$20=this.dataService.createProjectFromDefaultTemplate(f$33.id,{...E$16,team_id:I$25.id});break;case I$11.Category:P$20=this.dataService.createCategoryFromDefaultTemplate(f$33.id,E$16);break;case I$11.List:P$20=this.dataService.createSubcategoryFromTemplate(f$33.id,E$16);break;case I$11.Task:let B$22={...E$16};delete B$22.project_id,B$22.subcategory_id=R$21?.subcategory.id,P$20=this.dataService.createTaskFromTemplate(f$33.id,B$22);break;case I$11.View:case I$11.Doc:case I$11.Whiteboard:P$20=this.dataService.createViewFromTemplateOnProject(w$26.id,f$33.id,{name:f$33.name,template_visibility:A$10.ALL,template_members:[],teamId:I$25?.id});break;default:P$20=z$18;}return this.dataService.logSubmitInstallTemplateEvent({name:f$33.name,type:f$33.type},this.segmentService,f$33.id,A$22),P$20.pipe(Is$1(B$22=>{f$33.type===I$11.Project?this.store.dispatch(v$8({result:B$22})):f$33.type===I$11.Category?this.store.dispatch(j$5({result:B$22})):f$33.type===I$11.List&&this.store.dispatch(Y$3({result:B$22}));}),le$5(B$22=>{switch(f$33.type){case I$11.Doc:case I$11.View:let G$16=[`/`,I$25.id,`v`,f$28(B$22.type),B$22.id];return h$15?qe$6(D$3()):qe$6(D$3(),new r$25({path:G$16,tag:`templates-effects-auto-template-redirect`}));default:return qe$6(D$3());}}),Xo$2(B$22=>qe$6(new P$5({error:B$22}))));}return z$18;}))),this.getAutoTemplatesFail$=Ke$1(()=>this.action$.pipe(Ye$2(H$3),q$20(f$33=>f$33.payload),le$5(({error:f$33})=>{let h$15=`AUTOTEMP_001`,I$25=`No error provided for auto-create templates, this is default message.`;return f$33?.ECODE||(f$33.ECODE=h$15,f$33.msg=I$25,f$33.err=I$25),f$33?.ECODE===`417`&&(f$33.ECODE=h$15,f$33.msg=f$33.err),fA(f$33,{message:`Failed to apply marketing site templates`,feature:`templates`,applicationType:`marketing site`,location:`templates-effects`}),this.toastService.clearToasts(),this.store.dispatch(new _d(f$33)),z$18;})),{dispatch:!1}),this.getTemplatesHistory$=Ke$1(()=>this.action$.pipe(Ye$2(D$3),Mu(()=>[this.store.select(G$11),this.store.select(de$10)]),q$20(([f$33,h$15,I$25])=>({teamId:h$15.currentTeamId||I$25.id})),oe$13(({teamId:f$33})=>!!f$33),le$5(f$33=>this.dataService.getTemplatesHistory(f$33.teamId).pipe(q$20(h$15=>{return I$7({payload:h$15.map(A$22=>({...A$22,templateType:A$22.templateType.toLowerCase()}))});}),Xo$2(h$15=>qe$6(b$6({payload:h$15.err}))))))),this.getRecentTemplates$=Ke$1(()=>this.action$.pipe(Ye$2(L$3),Mu(()=>[this.store.select(G$11),this.store.select(de$10)]),q$20(([f$33,h$15,I$25])=>({teamId:h$15.currentTeamId||I$25.id})),le$5(f$33=>f$33.teamId?this.dataService.getTemplates(`task`,f$33.teamId,null,null,!0).pipe(q$20(h$15=>new S$5({templates:h$15.templates})),Xo$2(h$15=>qe$6(new x$9(h$15.err)))):z$18))),this.searchTemplates$=Ke$1(()=>this.action$.pipe(Ye$2(g$8),Mu(()=>[this.store.select(de$10),this.store.select(x8),this.store.select(vl)]),le$5(([f$33,h$15,I$25,A$22])=>{let{query:R$21,checkPaging:w$26}=f$33.payload;if(!h$15?.id||w$26&&!A$22[R$21]?.start)return z$18;let E$16,P$20;return w$26&&(E$16=A$22[R$21].start,P$20=A$22[R$21].startId),this.dataService.getTemplates(`task`,h$15.id,void 0,void 0,!1,void 0,{startName:E$16,startId:P$20},R$21,!0).pipe(q$20(B$22=>{let G$16=B$22.templates.map(x$28=>x$28.id),v$22=w$26?l$25([...(I$25[R$21]||[]),...G$16]):G$16;return new y$6({templates:B$22.templates,query:R$21,start:B$22.start,startId:B$22.startId,ids:v$22});}),Xo$2(B$22=>qe$6(new x$9(B$22.err))));}))),this.redirectOnSubcategoryTemplateAccepted$=Ke$1(()=>this.action$.pipe(Ye$2(Y$3),le$5(({result:f$33})=>this.handleSubcategoryTemplateAccepted(f$33)))),this.redirectOnCategoryTemplateAccepted$=Ke$1(()=>this.action$.pipe(Ye$2(j$5),le$5(({result:f$33})=>this.handleCategoryTemplateAccepted(f$33)))),this.redirectOnSpaceTemplateAccepted$=Ke$1(()=>this.action$.pipe(Ye$2(v$8),le$5(({result:f$33})=>this.handleSpaceTemplateAccepted(f$33)))),this.handleRedirectAfterSubcategoryCreation$=Ke$1(()=>this.action$.pipe(Ye$2(B$3),ss$2(this.store.select(o$30)),le$5(([{subcategory:f$33},h$15])=>[U$17({payload:f$33?.project_id??``}),R$19({projectId:f$33?.project_id??``,fromWebsocket:!0,label:`subcategoryCopyComplete`}),new r$25({path:[`/`,h$15,`v`,`li`,f$33.id],tag:`templates-redirect-after-subcategory-creation`})]))),this.handleRedirectAfterCategoryCreation$=Ke$1(()=>this.action$.pipe(Ye$2(q$3),ss$2(this.store.select(o$30)),le$5(([{category:f$33},h$15])=>{let I$25=[],A$22=f$33?.subcategories??[];if(A$22.length)I$25.push(w$20({fromWebsocket:!0,label:`reload-after-template-create`,navigateParams:{id:A$22[0].id,parentType:d$25.Subcategory}}));else{let R$21=[`/`,h$15,`v`,`o`,`f`,f$33.id];I$25.push(new r$25({path:R$21,tag:`templates-redirect-after-category-creation-to-category`}));}return j$23(I$25);}))),this.handleRedirectAfterSpaceCreation$=Ke$1(()=>this.action$.pipe(Ye$2(w$9),le$5(({categories:f$33})=>{let h$15=[];if(f$33?.length){let I$25=f$33[0],A$22=I$25?.subcategories??[],R$21=I$25?.project_id;R$21&&h$15.push(U$17({payload:R$21}),R$19({projectId:R$21,fromWebsocket:!0,label:`spaceCopyComplete`}));let w$26=A$22[0];h$15.push(w$20({fromWebsocket:!0,label:`reload-after-template-create`,navigateParams:{id:w$26.id,parentType:d$25.Subcategory}}));}return j$23(h$15);}))),this.getPresetTaskTemplate$=Ke$1(()=>this.action$.pipe(Ye$2(F$9),oe$13(({subcategoryId:f$33,categoryId:h$15,projectId:I$25})=>!!f$33&&!!h$15&&!!I$25),Mu(({subcategoryId:f$33,categoryId:h$15,projectId:I$25})=>[this.store.select(Xr$1(f$33,h$15,I$25))]),oe$13(([,f$33])=>!!f$33&&!f$33.preset_task_template),le$5(([{subcategoryId:f$33,categoryId:h$15,projectId:I$25}])=>this.dataService.getDefaultTaskTemplate(f$33).pipe(Mu(()=>[this.store.select(Xr$1(f$33,h$15,I$25))]),oe$13(([,A$22])=>!!A$22),q$20(([A$22,R$21])=>mce(A$22,R$21,h$15,I$25))))));}handleSubcategoryTemplateAccepted(e$19){return this.websocketV2Service.getEventsByType(t$17.CopyOperationFinished).pipe(oe$13(({payload:r$34})=>this.isSuccessfulCopyOperation(r$34,e$19,`list`)),le$5(({payload:r$34})=>this.subcategoryResource.getSubcategoryById({id:r$34.new_object_id,source:`TemplatesEffects.handleSubcategoryTemplateAccepted`}).pipe(q$20(o$32=>B$3({subcategory:o$32})))));}handleCategoryTemplateAccepted(e$19){return this.websocketV2Service.getEventsByType(t$17.CopyOperationFinished).pipe(oe$13(({payload:r$34})=>this.isSuccessfulCopyOperation(r$34,e$19,`folder`)),le$5(({payload:r$34})=>this.categoryResource.getCategoryById(r$34.new_object_id).pipe(q$20(o$32=>q$3({category:o$32})))));}handleSpaceTemplateAccepted(e$19){return this.websocketV2Service.getEventsByType(t$17.CopyOperationFinished).pipe(oe$13(({payload:r$34})=>this.isSuccessfulCopyOperation(r$34,e$19,`space`)),le$5(({payload:r$34})=>this.categoryResource.getAllCategories(r$34.new_object_id,{},new T$21({"X-websocket-event":`categoriesFetchAfterSpaceAcceptedEffect`,"X-reload-event":`copyOperationFinished`})).pipe(q$20(({categories:o$32})=>w$9({categories:o$32})))));}isSuccessfulCopyOperation(e$19,r$34,o$32){return e$19.object_type===o$32&&e$19.operation_result===`success`&&e$19.is_from_template&&e$19.new_object_id===String(r$34?.id);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(q$19),ge$10(de$5),ge$10(I$18),ge$10(q$14),ge$10(_b$1),ge$10(re$9),ge$10(G$9),ge$10(zs),ge$10(As$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();Qbe={currentTeamId:``,recentTemplates:null,recentTemplatesError:``,recentTemplatesLoading:!1,shareTemplatePath:null,shareTemplateApplied:!1,autoTemplateId:null,autoTemplateApplied:!1,open:!1,searchTemplatesMap:{},templatesMap:{},templatesPagingMap:{},hasFetchedMap:{},templatesHistory:{}};VN();e$11(`templates_store_module`,`load`);pce=(()=>{class t$21{constructor(){e$11(`templates_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({imports:[gi$1,rn.forFeature(`templates`,dce),Je$4.forFeature([lce])]});}}return t$21;})();dm();VN();n$24(`app_module`,`user_group_access_effects`,`load`);uce=(()=>{class t$21{constructor(e$19,r$34,o$32){this.actions$=e$19,this.dataService=r$34,this.store=o$32,this.inviteGroupMembersToTask$=Ke$1(()=>this.actions$.pipe(Ye$2(o$23),Z$12(({taskId:s$25,userIds:n$46,permission:a$30})=>this.dataService.addTaskMembers(s$25,n$46,a$30).pipe(Z$12(c$37=>[i$20.setTaskMembers({id:s$25,action:`add`,members:c$37.members}),i$20.taskUsersChanged({taskId:s$25}),c$16()]),Xo$2(c$37=>qe$6(p$14({error:c$37}))))))),this.inviteGroupMembersToSubcategory$=Ke$1(()=>this.actions$.pipe(Ye$2(t$11),Mu(()=>[this.store.select(de$10)]),Z$12(([{taskId:s$25,subcategory:n$46,members:a$30},{id:c$37}])=>this.dataService.editSubcategoryMembers(n$46.id,a$30,c$37).pipe(Z$12(()=>[ts$1({subcategoryId:n$46.id}),new w$18(n$46.id,String(n$46.category),n$46.project_id,`add`,null,a$30,s$25),c$16()]),Xo$2(m$32=>qe$6(p$14({error:m$32})))))));}ngrxOnRunEffects(e$19){return n$24(`app_module`,`user_group_access_effects`,`run`),e$19;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Le$4),ge$10(Ci),ge$10(q$19));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();hr$3();fce=`angular-zoneless-enabled`;VN();e$11(`app_store_module`,`load`);gce=(()=>{class t$21{constructor(){e$11(`app_store_module`,`construct`);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.mod=SE({type:t$21});}static{this.inj=ql({providers:[{provide:q$19,useClass:zne}],imports:[rn.forRoot(Ut,{runtimeChecks:{strictStateImmutability:!1,strictActionImmutability:!1,strictActionSerializability:!1,strictStateSerializability:!1,strictActionTypeUniqueness:!0,strictActionWithinNgZone:!GM()},metaReducers:fk}),U8,K8,nZ,lZ,$oe,Mte,dte,zoe,At$6.forRoot({serializer:fae,stateKey:`routerState`}),Poe.forRoot(),rZ,xte,ZTe,OZ,WZ,KIe,Es,B_,lte,kee,ri,ta,zt,Je$4.forRoot([gae,sce,Bae,Jae,nce,gee,Cee,tce,ece,ace,oce,Zae,ice,AZ,Uee,aZ,uce]),One,He$1,$t,yte,voe,F_,ree,l8,R8,Dt,I8,jc,wne,kre,vM,SM,v7,ee,We$1,Ete,Ir,VM,k8,fZ,Cte,Tte,EZ,kte,rae,Ine,pce,Joe,Rie,wt$1,dae.forRoot(),coe,moe,Hte,Ce.forRoot(),U$2,rse,ese,bse,g$1,ose,sse,Nte,jte,Ee,vse,oee,A8,ase,gse,MZ,Lae,Gd()?[Loe]:[],Vne.forRoot()]});}}return t$21;})();VN();yce={fePlatformRumListGenericViewApiLoadTime:`fe_platform_rum_instrumentation_list_generic_view_api_loading_time`,fePlatformRumListTaskV2ApiLoadTime:`fe_platform_rum_instrumentation_list_task_v2_api_loading_time`},zM={"tasks/v2":yce.fePlatformRumListTaskV2ApiLoadTime,genericView:yce.fePlatformRumListGenericViewApiLoadTime};dm();U$18();VN();vce=(()=>{class t$21{constructor(){this.apisToTrack=Object.keys(zM),this.listActionApiDDMetadata$=new M$22(),this.applicationEnvironmentService=C$23(Ni),this.router=C$23(x$22),this.destroyRef=C$23(at$11),this.getListActionApiDDMetadata$=()=>this.listActionApiDDMetadata$.pipe(As$3(this.applicationEnvironmentService.environment$),oe$13(([e$19,r$34])=>!!r$34)),this.numTaskIdsOrNotApplicable=(e$19,r$34)=>e$19===J$11?r$34.body?.task_ids?.length??0:`NOT_APPLICABLE`,this.init();}init(){$i([this.router.events.pipe(oe$13(e$19=>e$19 instanceof X$12)),this.getListActionApiDDMetadata$()]).pipe(oe$13(([e$19])=>te$12(e$19.url)),Is$1(([e$19,[r$34,o$32]])=>{let{trackActionName:s$25,apiToTrack:n$46,isEverything:a$30,urlWithParams:c$37,duration:m$32,numTaskIds:l$26}=r$34,{shardId:g$19}=o$32;er$2(s$25,{apiToTrack:n$46,isEverything:a$30,urlWithParams:c$37,duration:m$32,shardId:g$19,numTaskIds:l$26});}),F$22(this.destroyRef)).subscribe();}intercept(e$19,r$34){let o$32=this.apisToTrack.find(a$30=>e$19.url.includes(a$30)),s$25=o$32?zM[o$32]:null;if(!s$25)return r$34.handle(e$19);let n$46=performance.now();return r$34.handle(e$19).pipe(cs(()=>{let a$30=performance.now()-n$46;this.listActionApiDDMetadata$.next({trackActionName:s$25,apiToTrack:o$32,isEverything:e$19.body?.parent?.type===d$25.Team,urlWithParams:e$19.urlWithParams,duration:a$30,numTaskIds:this.numTaskIdsOrNotApplicable(o$32,e$19)});}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();Sce=(()=>{class t$21{constructor(e$19,r$34,o$32){this.router=e$19,this.buildGitShaShort=r$34,this.httpSession=o$32;}intercept(e$19,r$34){let o$32=this.getUrl(e$19.url),n$46=o$32===`localhost`||[`clickup.com`,`clickup-qa.com`,`clickup-staging.com`,`clickup-stg.com`].some(l$26=>o$32.endsWith(l$26)),a$30={"build-version":e$18,"X-Build-Git-Sha-Short":this.buildGitShaShort,"X-CSRF":`1`,sessionId:this.httpSession.getSessionId()},c$37;try{c$37=window.sessionStorage.getItem(_c$1);}catch{c$37=null;}!c$37&&z$16&&(c$37=this.collectRouteParams().teamId),c$37&&(a$30={...a$30,"X-Workspace-ID":c$37});let m$32=e$19.clone({setHeaders:n$46?a$30:{}});return r$34.handle(m$32);}collectRouteParams(){let e$19={},r$34=[this.router.routerState.snapshot.root];for(;r$34.length>0;){let o$32=r$34.pop();e$19={...e$19,...o$32.params},r$34.push(...o$32.children);}return e$19;}getUrl(e$19){try{return new URL(e$19).hostname.toLowerCase();}catch{return``;}}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(x$22),ge$10(t0),ge$10(n$38));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();bce=(()=>{class t$21{intercept(e$19,r$34){let o$32=e$19.clone({url:e$19.url.replace(/#/g,`%23`),params:e$19.params.keys().reduce((s$25,n$46)=>e$19.params.get(n$46)===null||typeof e$19.params.get(n$46)>`u`||e$19.params.get(n$46)===`undefined`||e$19.params.get(n$46)===`null`?s$25.delete(n$46):s$25,e$19.params)});return r$34.handle(o$32);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();Cce=new K$17(()=>!1),_ce=new K$17(()=>!1),kce=new K$17(()=>!1),Tce=new K$17(()=>!1),Ice=new K$17(()=>[]),Ece=new K$17(()=>!1),Ace=new K$17(()=>!0);VN();wce=(()=>{class t$21{constructor(e$19){this.injector=e$19,this.errorHandlerService$=import(`./error-handler.service-a3a4fa140e.js`);}loadService(){return I$24(this,null,function*(){if(this.errorHandlerService)return;let{ErrorHandlerService:e$19}=yield this.errorHandlerService$;this.errorHandlerService=this.injector.get(e$19);});}intercept(e$19,r$34){let o$32=e$19.context;if(!o$32.has(Ace))return r$34.handle(e$19);let s$25=o$32.get(Cce),n$46=o$32.get(_ce),a$30=o$32.get(kce),c$37=o$32.get(Tce),m$32=o$32.get(Ice),l$26=o$32.get(Ece);return j$23(this.loadService()).pipe(le$5(()=>r$34.handle(e$19).pipe(this.errorHandlerService?.http({showError:s$25,redirectOnError:n$46,redirectOnAuthorizationFailure:a$30,rethrow:c$37,errCodesToHideToast:m$32,forceShowToast:l$26}))));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(oe$12));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();Mce=(()=>{class t$21{constructor(e$19,r$34,o$32,s$25,n$46,a$30){this.modal=e$19,this.injector=r$34,this.taskService=o$32,this.moveSubcategoryService=s$25,this.navMenuMoveCategoryService=n$46,this.customFieldsSplitService=a$30;}intercept(e$19,r$34){return r$34.handle(e$19).pipe(Xo$2(o$32=>e$19.params.get(`conflict_modal`)===`true`&&Ybe(o$32.error.ECODE)?(this.stopMovingState(),this.handleMoveTaskConflictErrorResponse(e$19,r$34,o$32.error,e$19.params.get(`return_conflict_on_cancel`)===`true`)):at$12(o$32)));}handleMoveTaskConflictErrorResponse(e$19,r$34,o$32,s$25=!1){return this.injector.get(C$15).getLazyComponent(import(`./src-445f2c7a52.js`).then(m$32=>({module:m$32.MoveTaskConflictModalModule,component:m$32.MoveTaskConflictModalComponent}))).pipe(q$20(({componentFactory:m$32})=>{let l$26=this.modal.openComponentFactory(m$32,this.injector,{cannotClose:!0,name:`move-task-conflict-modal`,blank:!0,dialogModifier:`cu-modal_s cu-modal__dialog_padding-0`,bodyModifier:`cu-modal__body_no-min-height`});return l$26.instance.setFields(o$32.fields_needed),l$26;})).pipe(le$5(m$32=>m$32.instance.onClose$),le$5(m$32=>m$32===null?(this.taskService.onChange.emit({type:`conflictCancel`}),s$25?at$12(()=>o$32):z$18):m$32.length===0?r$34.handle(e$19.clone({setParams:{skip_add:`true`}})).pipe(ys$1({bufferSize:1,refCount:!1})):this.customFieldsSplitService.isPassMoveFieldIdsInRequestBodyEnabled$.pipe(le$5(l$26=>l$26?this.createRequestWithBodyFields(e$19,m$32,r$34):this.createRequestWithQueryParams(e$19,m$32,r$34)))));}getCommonParams(){return new m$27().set(`conflict_modal`,`true`).set(`v2`,`true`);}createRequestWithQueryParams(e$19,r$34,o$32){let s$25=r$34.reduce((n$46,a$30)=>n$46.append(`move_fields[]`,a$30.id),this.getCommonParams());return o$32.handle(e$19.clone({params:s$25}));}createRequestWithBodyFields(e$19,r$34,o$32){let s$25={...(typeof e$19.body==`object`?e$19.body:{}),move_fields:r$34.map(n$46=>n$46.id)};return o$32.handle(e$19.clone({params:this.getCommonParams(),body:s$25}));}stopMovingState(){this.moveSubcategoryService.setMovingState(!1),this.navMenuMoveCategoryService.setMovingState(!1);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(V$10),ge$10(oe$12),ge$10(zr$1),ge$10(me),ge$10(te$2),ge$10(Be$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();hr$3();VN();Rce=(()=>{class t$21{constructor(){this.networkState=C$23(BC$1);}intercept(e$19,r$34){return e$19.context.get(i6)?r$34.handle(e$19):(this.networkState.requestStarted(),r$34.handle(e$19).pipe(cs(()=>{this.networkState.requestCompleted();})));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();Zr=function(t$21){return t$21.CUSTOM_FIELDS=`customFields`,t$21.GENERIC_LINK=`genericLink`,t$21.GENERIC_VIEW=`genericView`,t$21.HIERARCHY_CATEGORY=`hierarchyCategory`,t$21.HIERARCHY_PROJECT=`hierarchyProject`,t$21.HIERARCHY_SUBCATEGORY=`hierarchySubcategory`,t$21.HIERARCHY_TEAM=`hierarchyTeam`,t$21.SUBCATEGORY_TASKS=`subcategoryTasks`,t$21.TASK=`task`,t$21.TEAM_FIELDS=`teamFields`,t$21.TEAM_TRAY=`teamTray`,t$21;}(Zr||{}),Ls$3={[Zr.CUSTOM_FIELDS]:[`GET`,/^\/customFields\/v\d+\/field$/],[Zr.GENERIC_LINK]:[`GET`,/^\/docs\/v\d+\/genericLink\/view\/(\w*-)?\d+$/],[Zr.GENERIC_VIEW]:[`POST`,/^\/view\/v\d+\/genericView$/],[Zr.HIERARCHY_CATEGORY]:[`GET`,/^\/hierarchy\/v\d+\/project\/\d+\/category$/],[Zr.HIERARCHY_PROJECT]:[`GET`,/^\/hierarchy\/v\d+\/project\/\d+$/],[Zr.HIERARCHY_SUBCATEGORY]:[`GET`,/^\/hierarchy\/v\d+\/subcategory\/\d+$/],[Zr.HIERARCHY_TEAM]:[`GET`,/^\/hierarchy\/v\d+\/team\/\d+\/shared$/],[Zr.SUBCATEGORY_TASKS]:[`GET`,/^\/tasks\/v\d+\/subcategory\/\d+\/tasks$/],[Zr.TASK]:[`POST`,/^\/tasks\/v\d+\/task$/],[Zr.TEAM_FIELDS]:[`GET`,/^\/v\d+\/team\/\d+\/fields$/],[Zr.TEAM_TRAY]:[`GET`,/^\/v\d+\/team\/\d+\/tray$/]};VN();Fce=f$30.byNamespace(`perf`),xce=(()=>{class t$21{constructor(e$19){this.splitService=e$19,this.optimizeRequests=[Ls$3[Zr.GENERIC_VIEW],Ls$3[Zr.GENERIC_LINK],Ls$3[Zr.TEAM_TRAY],Ls$3[Zr.TEAM_FIELDS],Ls$3[Zr.HIERARCHY_PROJECT],Ls$3[Zr.HIERARCHY_CATEGORY],Ls$3[Zr.HIERARCHY_SUBCATEGORY],Ls$3[Zr.HIERARCHY_TEAM],Ls$3[Zr.SUBCATEGORY_TASKS]],this.isOmittingNullFieldsEnabled$=this.splitService.isTreatmentOn({name:O$16.ResponseOmitEmptyFields}).pipe(ys$1({refCount:!0,bufferSize:1})),this.destroy$=new M$22(),this.isOmittingNullFieldsEnabled$.pipe(gs(this.destroy$)).subscribe(r$34=>{r$34&&Fce.info(`%c Omitting of empty fields from responses is enabled by feature-flag.`,`color: #7b68ee`);});}intercept(e$19,r$34){return this.isOmittingNullFieldsEnabled$.pipe(le$5(o$32=>{if(!o$32)return r$34.handle(e$19);let{pathname:s$25}=new URL(e$19.url),n$46=this.optimizeRequests.some(([a$30,c$37])=>a$30===e$19.method&&c$37.test(s$25));return n$46&&Fce.info(`Omitting null fields in response payload of `,e$19.method,s$25),r$34.handle(n$46?e$19.clone({setHeaders:{"x-omit-empty-fields":`1`}}):e$19);}));}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Qn));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();Ik=function(t$21){return t$21.MISSING_VERSION=`OVM_001`,t$21;}(Ik||{});Oce=t$21=>{if(!(`comments`in t$21)||!Array.isArray(t$21.comments))return!0;for(let i$27=0;i$27<t$21.comments.length;i$27++){let e$19=t$21.comments[i$27];if(typeof e$19==`object`&&(!(`_version_vector`in e$19)||!Ds$1(e$19._version_vector)))return!1;}return!0;};Ka=t$21=>typeof t$21==`object`&&t$21!==null&&`_version_vector`in t$21&&Ds$1(t$21._version_vector);Pce=t$21=>`list`in t$21?Ka(t$21):!0;$ce=t$21=>!(`lists`in t$21)||!Array.isArray(t$21.lists)?!0:Ek(t$21.lists);jce=t$21=>!(`task`in t$21)||typeof t$21.task!=`object`||!t$21.task?!0:Ka(t$21.task);Lce=t$21=>{if(!(`tasks`in t$21)||!Array.isArray(t$21.tasks))return!0;for(let i$27=0;i$27<t$21.tasks.length;i$27++){let e$19=t$21.tasks[i$27];if(typeof e$19!=`object`||e$19===null||!(`_version_vector`in e$19)||!Ds$1(e$19._version_vector))return!1;}return!0;};Dce=t$21=>{if(!(`comments`in t$21)||!Array.isArray(t$21.comments))return!0;for(let i$27=0;i$27<t$21.comments.length;i$27++){let e$19=t$21.comments[i$27];if(!(typeof e$19!=`object`||!(`data`in e$19))&&(!(`_version_vector`in e$19.data)||!Ds$1(e$19.data._version_vector)))return!1;}return!0;};Nce=t$21=>{if(!Array.isArray(t$21))return!0;for(let i$27=0;i$27<t$21.length;i$27++)if(typeof t$21[i$27]!=`object`||t$21[i$27]===null||!(`_version_vector`in t$21[i$27])||!Ds$1(t$21[i$27]._version_vector))return!1;return!0;};Bce=t$21=>!(`tasks`in t$21)||!Array.isArray(t$21.tasks)?!0:Ek(t$21.tasks);qM=[{title:`subcategory v1`,urlMatcher:/\/hierarchy\/v1\/subcategory\/\d+/,validate:Ka},{title:`comments bulk`,urlMatcher:/\/comment-service\/v3\/workspaces\/\d+\/comments\/bulk/,validate:Dce},{title:`Comment V3`,urlMatcher:/\/comment-service\/v3\/workspaces\/333\/comments\/comment\/\d+/,validate:Oce},{title:`generic view`,urlMatcher:/\/view\/v1\/genericView/,validate:Pce},{title:`Hierarchy V3 Workspace Tree`,urlMatcher:/\/hierarchy\/v3\/experience\/sidebar\/workspaces\/\d+\/tree/,validate:Ka},{title:`Hierarchy V1 Project`,urlMatcher:/\/hierarchy\/v1\/project/,validate:Nce},{title:`Hierarchy V1 Category`,urlMatcher:/\/hierarchy\/v1\/category\/\d+/,validate:Ka},{title:`Hierarchy V3 Lists Bulk`,urlMatcher:/\/hierarchy\/v3\/experience\/workspaces\/\d+\/lists\/bulk/,validate:$ce},{title:`workspace v3 core`,urlMatcher:/\/workspace-v3\/core\/workspace\/333/,validate:Ka},{title:`tasks v3 bulk`,urlMatcher:/\/task-v3\/experience\/333\/tasks\/bulk/,validate:Bce},{title:`Task V3`,urlMatcher:/\/task-v3\/experience\/\d+\/tasks\/[A-Z|a-z|0-9|\-]+/,validate:jce},{title:`Tasks V2`,urlMatcher:/\/tasks\/v2\/task/,validate:Lce}];VN();Vce=(()=>{class t$21{constructor(){this.store=C$23(q$19),this.toastService=C$23(q$14),this.enabled$=jS(O$16.FePlatformOvmValidationInterceptor),this.enabled=!1;}intercept(e$19,r$34){return this.enabled$.pipe(Ve$4(1)).subscribe(o$32=>this.enabled=o$32),this.enabled?this.applyValidators(e$19,r$34):r$34.handle(e$19);}applyValidators(e$19,r$34){for(let o$32=0;o$32<qM.length;o$32++){let s$25=qM[o$32];if(e$19.url.match(s$25.urlMatcher))return r$34.handle(e$19).pipe(q$20(n$46=>{if(n$46.type!==b$14.Response||s$25.validate(n$46.body))return n$46;let a$30=new M$21({status:409,error:{description:`No version vector in response`,ECODE:Ik.MISSING_VERSION,url:e$19.url},statusText:`Bad response`,url:e$19.url});throw this.store.dispatch(new bd({title:a$30.error,description:e$19.url,status:a$30.status,ECODE:Ik.MISSING_VERSION})),this.toastService.addToastItem({title:`Invalid network response`}),a$30;}));}return r$34.handle(e$19);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();c$34();dm();Ak=class{intercept(i$27,e$19){let{commentId:r$34,historyId:o$32}=i$27.context.get(W$11)||{};return!r$34||!o$32||!i$27.url.includes(`/comments/v1/task`)||i$27.method!==`POST`?e$19.handle(i$27):e$19.handle(i$27).pipe(q$20(s$25=>(s$25.type===4&&f$32(s$25.body)&&(s$25.body.optimisticPendingState={historyId:o$32,commentId:r$34}),s$25)));}};dm();wk=class{intercept(i$27,e$19){try{let{commentId:r$34,historyId:o$32}=i$27.context.get(W$11);return!r$34||!o$32||!i$27.url.includes(`/historyItems`)||i$27.method!==`GET`?e$19.handle(i$27):e$19.handle(i$27).pipe(q$20(s$25=>{try{return s$25.type!==4||!s$25.body||!Array.isArray(s$25.body.history)||s$25.body.history.length!==1||(s$25.body.history[0].optimisticPendingState={commentId:r$34,historyId:o$32},s$25.body.history[0].comment.optimisticPendingState={commentId:r$34,historyId:o$32}),s$25;}catch{return s$25;}}));}catch{return e$19.handle(i$27);}}};VN();dm();VN();Uce=(()=>{class t$21{constructor(){this.prefetchedRequestCache=C$23(VC$1);}intercept(e$19,r$34){let o$32=this.prefetchedRequestCache.get(e$19.urlWithParams);return o$32?j$23(o$32.consume(e$19)):r$34.handle(e$19);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();Mk=`Error Fetching Refresh Token`,Wce=new K$17(()=>!1),Hce=(()=>{class t$21 extends WC{constructor(e$19,r$34,o$32,s$25,n$46,a$30){super(e$19,r$34,s$25),this.jwtHelper=r$34,this.http=o$32,this.userService=n$46,this.authToken=a$30,this.destroy$=new M$22(),this.refreshTokenCall$=void 0;}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();}intercept(e$19,r$34){let o$32=e$19.context.get(Wce);if(this.isAuthenticatedRequest(e$19)&&!o$32&&this.authToken.refreshOrJwtTokenExists()){let s$25=e$19.clone({withCredentials:!0,context:(e$19.context??new X$14()).set(Wce,!0)}),n$46=Date.now();return r$34.handle(s$25).pipe(Xo$2(a$30=>{let c$37=a$30;if(c$37 instanceof M$21&&!c$37.error?.ECODE&&[`GET`].includes(s$25.method)){let m$32=Date.now(),l$26=s$25.clone();return Q$17(500).pipe(le$5(()=>this.http.request(l$26)),Xo$2(g$19=>{let f$33=g$19;return this.errorHandler(f$33,l$26,Date.now()-m$32);}));}return this.errorHandler(c$37,s$25,Date.now()-n$46);}));}return r$34.handle(e$19);}isAuthenticatedRequest(e$19){return this.isAllowedDomain(e$19)&&!this.isDisallowedRoute(e$19);}errorHandler(e$19,r$34,o$32){return e$19 instanceof M$21?e$19.error?.ECODE&&String(e$19.error.ECODE).startsWith(`JWT`)&&e$19.error.ECODE!==`JWT_023`&&!this.refreshTokenCall$?(this.refreshTokenCall$=this.authToken.refreshAndSetJwtToken().pipe(le$5(s$25=>{let n$46=r$34.clone({setHeaders:{Authorization:`Bearer `+s$25.token}});return this.refreshTokenCall$=void 0,this.http.request(n$46);}),ys$1({bufferSize:1,refCount:!1}),Xo$2(s$25=>{let n$46=s$25,a$30=n$46.error.ECODE?String(n$46.error.ECODE):void 0,c$37=this.handleNonLogoutJWTError(a$30);if(c$37)return c$37;let m$32=this.handleImmediateLogoutJWTError(a$30);if(m$32)return m$32;let l$26=this.handleJWTError(a$30);if(l$26)return l$26;let g$19=this.handleAPIError(a$30);if(g$19)return g$19;return this.handleNonJWTError(n$46)||this.throwError({logout:!0,error:Mk});}),gs(this.destroy$)),this.refreshTokenCall$):at$12(()=>e$19):at$12(e$19);}throwError(e$19){return at$12(()=>e$19);}handleNonLogoutJWTError(e$19){return e$19&&[`JWT_033`,`JWT_042`].includes(e$19)?this.throwError({ECODE:e$19,error:Mk}):null;}handleImmediateLogoutJWTError(e$19){return e$19&&[`JWT_179`,`JWT_062`,`JWT_010`].includes(e$19)?(this.userService.logout(!0,!0).then(()=>{}),z$18):null;}handleJWTError(e$19){return e$19?.includes(`JWT`)?this.throwError({ECODE:e$19,logout:!0,error:Mk}):null;}handleAPIError(e$19){return e$19?this.throwError({ECODE:e$19,error:Mk}):null;}handleNonJWTError(e$19){return confirm(`Having trouble with your auth token. Click Ok to refresh the page or Cancel to log out.`)?(window.location.reload(),at$12(()=>e$19)):null;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(vd),ge$10(Oc),ge$10(ve$7),ge$10(Tm),ge$10(nr$1),ge$10(Rc$1));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();Xbe=f$30.byNamespace(`platform`),Zbe=f$30.byNamespace(`tasks`),eCe=2200,tCe=[408,502,503,504],Gce=new K$17(()=>0),zce=(()=>{class t$21{intercept(e$19,r$34){let{maxRetryCount:o$32,retryWhenOffline:s$25}=e$19.context.get(jt);return gt$2(()=>r$34.handle(this.addRetryHeaders(e$19))).pipe(bs({count:o$32,delay:(n$46,a$30)=>{if(a$30<=o$32&&(tCe.includes(n$46.status)||s$25&&n$46.status===0)){e$19.context.set(Gce,a$30);let c$37=Math.pow(3,a$30-1)*eCe;return Xbe.error(`http request error, retrying in ${c$37}ms`,n$46),this.additionalCommentRetryTracking(e$19,n$46,a$30),Q$17(c$37);}return at$12(()=>n$46);}}));}addRetryHeaders(e$19){let r$34=e$19.context.get(Gce);return r$34>0?e$19.clone({headers:e$19.headers.append(`X-Retry`,`${r$34}`).append(`X-Retry-Interceptor`,`true`)}):e$19;}additionalCommentRetryTracking(e$19,r$34,o$32){if(e$19.url.includes(`/comments/`)&&e$19.method===`POST`){let s$25={request:e$19,error:r$34,tries:o$32};Zbe.error(`[Diagnose] Create Comment Retry`,s$25),er$2(`task_view_comment_retry`,s$25);}}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();hr$3();VN();qce=(()=>{class t$21{constructor(){this.rumTrackingInstrumentationService=C$23(ge$5);}intercept(e$19,r$34){let o$32=e$19.urlWithParams;return this.rumTrackingInstrumentationService.addXLoadHeaderForUrlIfExists(o$32,e$19.headers.get(`x-load-event`)),this.rumTrackingInstrumentationService.addXReloadHeaderForUrlIfExists(o$32,e$19.headers.get(`x-reload-event`)),this.rumTrackingInstrumentationService.addXWebsocketHeaderForUrlIfExists(o$32,e$19.headers.get(`x-websocket-event`)),r$34.handle(e$19).pipe(cs(()=>{this.rumTrackingInstrumentationService.removeXHeadersForUrl(o$32);}));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();rCe=[`JWT_054`,`JWT_055`,`JWT_056`,`SI_001`],Kce=(()=>{class t$21{constructor(e$19){this.injector=e$19;}intercept(e$19,r$34){return r$34.handle(e$19).pipe(Xo$2(o$32=>o$32 instanceof M$21&&rCe.includes(o$32.error?.ECODE)?j$23(import(`./idle-timeout.service-73a7b41500.js`)).pipe(Is$1(({IdleTimeoutService:s$25})=>{this.injector.get(s$25).logoutAndDisplaySessionExpiredModal(this.injector,r.SESSION,``);}),le$5(()=>z$18)):at$12(()=>o$32)));}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(oe$12));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();hr$3();VN();Jce=(()=>{class t$21{constructor(e$19,r$34,o$32){this.splitService=e$19,this.performanceTimingService=r$34,this.environment=o$32,this.isTrackPayloadSizeEnabled$=this.splitService.isTreatmentOn({name:O$16.TrackPayloadSizeMarkers}).pipe(ys$1({refCount:!0,bufferSize:1}));}intercept(e$19,r$34){let o$32=this.findSupportedEndpointName(e$19);return o$32?this.isTrackPayloadSizeEnabled$.pipe(le$5(s$25=>s$25?r$34.handle(e$19).pipe(Is$1(n$46=>{this.isResponseEvent(n$46)&&window.requestIdleCallback(()=>{let a$30=`resource_${o$32}Api`;this.performanceTimingService.trackMetadata(a$30,{resourceSize:+Qce(n$46.body),requestUrl:e$19.url,markerName:a$30});});})):r$34.handle(e$19))):r$34.handle(e$19);}isResponseEvent(e$19){return e$19.type===b$14.Response;}findSupportedEndpointName(e$19){return Object.entries(Ls$3).find(([o$32,[s$25,n$46]])=>{let{pathname:a$30}=new URL(e$19.url);return s$25===e$19.method&&n$46.test(a$30);})?.[0];}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(Qn),ge$10(wa),ge$10(Ud));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();VN();dm();hr$3();VN();Rk=`access-management`,Yce=(()=>{class t$21{constructor(){this.authTokenService=C$23(Rc$1),this.workspaceTokenExchangeService=C$23(Hd),this.applicationEnvironmentService=C$23(Ni),this.splitService=C$23(Qn),this.isFeatureEnabled$=this.splitService.isTreatmentOn({name:O$16.AccessManagementUseWorkspaceJwtTokens}).pipe(ys$1({refCount:!0,bufferSize:1})),this.TOKEN_EXCHANGE_PATTERN=/\/authentication\/access_tokens(?:\/|$)/,this.HANDSHAKE_PATTERN=/shard\/v1\/handshake\/(\d+)$/;}intercept(e$19,r$34){return this.isFeatureEnabled$.pipe(le$5(o$32=>{if(!o$32||this.TOKEN_EXCHANGE_PATTERN.test(e$19.url))return r$34.handle(e$19);let s$25=this.applicationEnvironmentService.environmentSignal();if(!s$25?.shardId)return r$34.handle(e$19);try{if(!new URL(e$19.url).hostname.includes(s$25.shardId))return r$34.handle(e$19);}catch{return r$34.handle(e$19);}let n$46=this.extractWorkspaceIdFromHandshakeUrl(e$19)||s$25?.teamId;return n$46?this.authTokenService.jwtToken$.pipe(Ve$4(1),le$5(a$30=>a$30?this.workspaceTokenExchangeService.exchangeGlobalTokenForWorkspaceToken({workspaceId:n$46,globalAccessToken:a$30,globalShardApiUrlBase:s$25.globalShardApiUrlBase}).pipe(Xo$2(c$37=>(c$37?.ECODE?.startsWith(`JWT_`)&&(fA(`Workspace token exchange failed in interceptor`,{feature:`app-auth`,workspaceId:n$46,url:e$19.url,error:c$37?.message}),f$30.error(Rk,`Token exchange failed for workspace ${n$46}: ${c$37?.message}`)),qe$6(null))),le$5(c$37=>{if(!c$37)return r$34.handle(e$19);let m$32=e$19.clone({setHeaders:{Authorization:`Bearer ${c$37.token}`}});return f$30.info(Rk,`Using workspace token for API call to ${e$19.url}`),r$34.handle(m$32);})):(f$30.warn(Rk,`No global token available for workspace API call to ${e$19.url}`),r$34.handle(e$19)))):(f$30.warn(Rk,`No workspaceId available in environment for API call to ${e$19.url}`),r$34.handle(e$19));}));}extractWorkspaceIdFromHandshakeUrl(e$19){return e$19.url.match(this.HANDSHAKE_PATTERN)?.[1];}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();dm();VN();Xce=(()=>{class t$21{constructor(e$19){this.pendingRequestsService=e$19;}intercept(e$19,r$34){return this.watchRequest(e$19),r$34.handle(e$19).pipe(cs(()=>{this.unwatchRequest(e$19);}));}watchRequest(e$19){this.pendingRequestsService.addRequest(e$19);}unwatchRequest(e$19){this.pendingRequestsService.removeRequest(e$19);}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(f$5));};}static{this.prov=k$27({token:t$21,factory:t$21.fac});}}return t$21;})();Fk=class{constructor(){this.prefetchedRequestCache=new Map();}get(i$27){let e$19=this.prefetchedRequestCache.get(i$27);return e$19&&this.prefetchedRequestCache.delete(i$27),e$19;}set(i$27){i$27&&(this.prefetchedRequestCache.set(i$27.requestUrl,i$27),i$27.dispatch());}};dm();yn=class{constructor(i$27,e$19){this.requestUrl=i$27,this.requestInit=e$19;}withTelemetry(i$27){return this.markerName=i$27,this;}dispatch(){this.markerName&&performance.mark(`${this.markerName}.start`),this.response=fetch(this.requestUrl,this.requestInit).then(i$27=>(this.markerName&&performance.mark(`${this.markerName}.finish`),i$27));}consume(i$27){if(!this.response)throw new Error(`Response not dispatched`);return j$23(this.response).pipe(Z$12(e$19=>this.handleResponse(e$19,i$27)),Xo$2(e$19=>at$12(()=>new M$21({error:e$19}))));}parseJsonResponseEarly(){return I$24(this,null,function*(){if(this.response)try{return yield(yield this.response).clone().json();}catch{return;}});}handleResponse(i$27,e$19){return i$27.status<200||i$27.status>=400?at$12(()=>new M$21({error:i$27.statusText,status:i$27.status,statusText:i$27.statusText,url:e$19.url})):j$23(this.parseResponseBody(i$27)).pipe(q$20(r$34=>new x$23({body:r$34,status:i$27.status,statusText:i$27.statusText,url:e$19.url})),Xo$2(r$34=>at$12(()=>new M$21({error:r$34,status:i$27.status,statusText:i$27.statusText,url:e$19.url}))));}parseResponseBody(i$27){return I$24(this,null,function*(){return(i$27.headers.get(`content-type`)||``).includes(`application/json`)?i$27.json():i$27.text();});}};KM=new Fk();sme(KM);VN();VN();VN();nCe=/.*\/*v(\/l)?\/?(s|f|li|t|sh|tsh)?\/+[^/]+\/*$/,aCe=`lastUrl`,cCe=`teamId`,mCe=`userId`,cme=(()=>{class t$21{constructor(e$19){this.localStorage=e$19;}parsePrefetchUrl(e$19){e$19=e$19||(window.location.hash?window.location.hash.replace(`#`,``):window.location.pathname);let o$32=e$19===`/`?this.getLastVisitedUrl():e$19;if(o$32&&nCe.test(o$32)){let s$25=Je(o$32);if(s$25)return{...s$25,meView:this.isMeView(s$25.teamId)};}return null;}getLastVisitedUrl(){let e$19=localStorage.getItem(aCe);if(e$19){let r$34=localStorage.getItem(cCe),o$32=localStorage.getItem(mCe),s$25=JSON.parse(e$19),n$46=Object.keys(s$25).findIndex(a$30=>{let[c$37,m$32]=a$30.split(`_`);return c$37===r$34&&m$32===o$32;});return Object.values(s$25)[n$46];}}isMeView(e$19){let r$34=this.localStorage.get(zs$2);if(r$34){let o$32=JSON.parse(r$34);return typeof o$32==`string`&&(o$32=JSON.parse(o$32)),!!o$32[e$19];}return!1;}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(k$18));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();hr$3();VN();hr$3();VN();VN();hr$3();VN();hr$3();ume=`serve-vite`;VN();VN();lCe=f$30.byNamespace(`platform`),hme=(()=>{class t$21{createWorker(){try{let e$19=new URL(`./synthetic-marker.worker.js`,window.location.origin).toString();return new Worker(e$19);}catch(e$19){return lCe.log(`failed to load synthetic marker web worker`,e$19),null;}}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();gme=(()=>{class t$21{constructor(){this.localStorageKey=`cu-synthetics-worker`,this.worker=null,this.synthMarkerWorkerFactory=C$23(hme),this.perfTimingService=C$23(wa),this.syntheticMarkerService=C$23(N$12),this.userTelemetryService=C$23(Kc$1),this.bootstrapService=C$23(ZC$1);}init(){return I$24(this,null,function*(){this.bootstrapService.init(this.syntheticMarkerService),this.userTelemetryService.init(this.syntheticMarkerService),this.perfTimingService.setSyntheticMarkerService(this.syntheticMarkerService),yield this.syntheticMarkerService.init(),this.perfTimingService.setMetricMarkerService(this.syntheticMarkerService.getMetricMarkerFactoryService()),this.createWorkerIfEnabled();});}getWorker(){return this.worker;}createWorkerIfEnabled(){s$23().get(this.localStorageKey)&&(this.worker=this.synthMarkerWorkerFactory.createWorker());}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();yme=(()=>{class t$21{constructor(){this.timeout=1e3,this.taskUpdateQuiescence=new Map();}init(){}onMessage(e$19,r$34,o$32){if(!e$10(r$34)||!this.isTaskUpdate(r$34)){o$32(e$19,r$34);return;}let s$25=r$34.event,n$46=`${s$25.name}-${t$5(s$25)}`,a$30=s$25.version_change,c$37=this.taskUpdateQuiescence.get(n$46);if(c$37?.quiesence){try{f$17(a$30,c$37.version)&&this.bump(n$46,e$19,r$34,o$32,c$37);}catch{o$32(e$19,r$34);return;}return;}this.bump(n$46,e$19,r$34,o$32);}bump(e$19,r$34,o$32,s$25,n$46){n$46?.quiesence&&(clearTimeout(n$46.quiesence),n$46.quiesence=null),this.taskUpdateQuiescence.delete(e$19),this.taskUpdateQuiescence.set(e$19,{taskId:e$19,client_trace:o$32.event.client_trace,quiesence:setTimeout(()=>this.sendTaskUpdate(e$19,r$34,o$32,s$25),this.timeout),version:o$32.event.version_change});}sendTaskUpdate(e$19,r$34,o$32,s$25){let n$46=this.taskUpdateQuiescence.get(e$19);n$46?.quiesence&&(clearTimeout(n$46.quiesence),n$46.quiesence=null),this.taskUpdateQuiescence.delete(e$19),s$25(r$34,o$32);}isTaskUpdate(e$19){return e$19.msg===t$17.TaskUpdate||e$19.msg===t$17.TaskMoved||e$19.msg===t$17.OptimizedTaskUpdate;}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();dm();hr$3();Ee$4();VN();dm();hr$3();dm();hr$3();bme=(t$21,i$27)=>{let e$19=Sme(t$21);return{id:e$19,task_id:e$19,msg:a$22.TaskUpdate,method:a$22.TaskUpdate,date_updated:t$21.event.date_created,hist_item:i$27,client_trace:t$21.event.client_trace,versionVector:t$21.event.version_change,...dCe(t$21)};};Tme=t$21=>e$10(t$21)&&(t$21.msg===t$17.TaskUpdate||t$21.msg===t$17.OptimizedTaskUpdate);C$22();Ok=class{constructor(){this.message=null,this.parsed=null,this.id=w$22();}getId(){return this.id;}init(i$27,e$19){return this.message=i$27,this.parsed=e$19,this;}};ca=class extends Ok{constructor(){super(...arguments),this.store=null,this.ovmRumService=null,this.taskUpdateWebsocketService=null,this.taskV3WebsocketConfigService=null,this.taskUpdateV2Event=null,this.taskUpdateV1Event=null,this.optimizedTaskUpdateMessage=null,this.httpSession=null,this.clientTrace=null,this.taskUpdateHelper=null;}init(i$27,e$19){if(super.init(i$27,e$19),!e$10(e$19)||!Ime(e$19))return this;if(!Tme(e$19))return this;this.taskUpdateV2Event=e$19.event,this.clientTrace=e$19.event.client_trace||t$5(this.taskUpdateV2Event);let r$34=this.taskUpdateHelper?.findCachedProcessedTaskUpdate(this.clientTrace);return r$34?(this.taskUpdateV1Event=r$34.taskUpdateEvent,this.optimizedTaskUpdateMessage=r$34.optimizedTaskUpdateMessage,this):(this.taskUpdateV1Event=bme(e$19,Cme(e$19.event.version_event_data)),this.optimizedTaskUpdateMessage={type:this.taskUpdateV1Event.msg,payload:this.taskUpdateV1Event},this.taskUpdateHelper?.cacheProcessedTaskUpdate(this.clientTrace,this.taskUpdateV1Event,this.optimizedTaskUpdateMessage),this);}setHttpSessionService(i$27){return this.httpSession=i$27,this;}setTaskUpdateHelper(i$27){return this.taskUpdateHelper=i$27,this;}setStore(i$27){return this.store=i$27,this;}setOvmRumService(i$27){return this.ovmRumService=i$27,this;}setTaskUpdateWebsocketService(i$27){return this.taskUpdateWebsocketService=i$27,this;}setTaskV3WebsocketConfigService(i$27){return this.taskV3WebsocketConfigService=i$27,this;}willExecute(){if(t$18(!!this.store,`store cannot be null`),t$18(!!this.taskUpdateWebsocketService,`taskUpdateWebsocketService cannot be null`),t$18(!!this.clientTrace,`clientTrace cannot be null`),!this.optimizedTaskUpdateMessage)return qe$6(!1);let i$27=this.taskUpdateHelper?.findCachedProcessedTaskUpdate(this.clientTrace);if(i$27?.willExecute!==void 0)return qe$6(i$27.willExecute);if(this.taskUpdateV1Event?.ws_key&&this.httpSession?.isCurrentSession(this.taskUpdateV1Event.ws_key))return this.taskUpdateHelper?.setWillExecute(this.clientTrace,!1),qe$6(!1);let e$19=this.optimizedTaskUpdateMessage;return $i([this.store.select(b$10),this.store.select(Ge$4)]).pipe(q$20(([r$34,o$32])=>({subcategoryId:kme(e$19.payload.hist_item),dataView:r$34,currentHierarchyEntity:o$32})),Mu(({subcategoryId:r$34})=>[r$34==null?qe$6(void 0):this.store.select($t$2(r$34)),this.store.select(Kc(e$19.payload.task_id,`task`))]),Is$1(([,,r$34])=>this.reportIfInvalidVersion(e$19,r$34)),q$20(([{dataView:r$34,currentHierarchyEntity:o$32},s$25,n$46])=>this.taskUpdateWebsocketService.isSubscribedTo(e$19.payload,r$34,o$32?.id,s$25)?!e$19.payload.versionVector||!n$46||a$19(e$19.payload.versionVector,n$46.version)&&!n$46.dirty:!1),Is$1(r$34=>{this.taskUpdateHelper?.setWillExecute(this.clientTrace,r$34);}));}reportIfInvalidVersion(i$27,e$19){t$18(!!this.ovmRumService,`ovmRumService cannot be null`),!(!e$19||!i$27.payload.versionVector)&&(vme(i$27.payload.versionVector,e$19.version)||this.ovmRumService.reportInvalidVersion({localVersion:e$19.version,remoteVersion:i$27.payload.versionVector,objectId:i$27.payload.task_id,objectType:et$6.TASK,isLocalDirty:e$19.dirty}));}};Pk=class extends ca{willExecute(){return super.willExecute().pipe(q$20(i$27=>(t$18(!!this.taskUpdateV2Event,`taskUpdateV2Event cannot be null`),i$27&&d$1(this.taskUpdateV2Event.version_event_data?.changes))));}execute(){return t$18(!!this.taskUpdateV2Event,`taskUpdateV2Event cannot be null`),this.store?.dispatch(Se$5.taskUpdateAddedToViewedEntity({context:this.taskUpdateV2Event})),qe$6(!0);}};dm();hr$3();VN();Eme=(()=>{class t$21{constructor(){this.processedMessages=[];}cacheProcessedTaskUpdate(e$19,r$34,o$32){this.processedMessages.length>=10&&this.processedMessages.splice(0,this.processedMessages.length-10),this.processedMessages.push({clientTrace:e$19,optimizedTaskUpdateMessage:o$32,taskUpdateEvent:r$34});}findCachedProcessedTaskUpdate(e$19){return this.processedMessages.find(r$34=>r$34.clientTrace===e$19);}setWillExecute(e$19,r$34){let o$32=this.findCachedProcessedTaskUpdate(e$19);o$32&&(o$32.willExecute=r$34);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();dm();$k=class extends ca{constructor(){super(...arguments),this.taskCrudWebsocketHelper=null;}init(i$27,e$19){return super.init(i$27,e$19),window.requestIdleCallback(()=>{t$18(!!this.taskCrudWebsocketHelper,`taskCrudWebsocketHelper cannot be null`),this.taskCrudWebsocketHelper.coalesceTaskCrud();}),this;}willExecute(){return qe$6(!0);}execute(){t$18(!!this.optimizedTaskUpdateMessage,`optimizedTaskUpdateMessage cannot be null`),t$18(!!this.taskUpdateV1Event,`taskUpdateEvent cannot be null`),t$18(!!this.taskCrudWebsocketHelper,`taskCrudWebsocketHelper cannot be null`);let i$27=this.taskUpdateV1Event;return this.taskCrudWebsocketHelper.fixDependencyState(i$27),(!this.httpSession?.isCurrentSession(i$27.ws_key)||`hist_item`in i$27&&i$27.hist_item&&oe$9(i$27.hist_item).some(e$19=>[`remapped_due_date`,`attachments`,`template_merged`,`gh_commit`].includes(e$19.field)))&&(this.taskUpdateWebsocketService?.messageStream$.next(this.optimizedTaskUpdateMessage),this.taskCrudWebsocketHelper.emitLegacyOnChange(this.taskUpdateV1Event)),this.httpSession?.isCurrentSession(i$27.ws_key)||this.taskCrudWebsocketHelper.handleTaskCrud$.next(i$27),qe$6(!0);}setTaskCrudWebsocketHelper(i$27){return this.taskCrudWebsocketHelper=i$27,this;}};VN();hr$3();dm();VN();U$18();U$18();U$18();VN();jk=(()=>{class t$21{constructor(){this.fieldFunctions=[jme,Lme,Rme,$me,Dme,xme,Mme,Ame,Ome,Pme];}getFields(e$19,r$34){let o$32=this.createAddFieldsContext(e$19,r$34);return this.fieldFunctions.forEach(s$25=>s$25(o$32)),o$32.fields.length>0?o$32.fields:void 0;}getSingleTaskFields(e$19,r$34){return Bme(this.getFields(e$19,r$34)??[]);}getBulkFields(e$19,r$34){let o$32=e$19.map(({message:n$46,dataView:a$30})=>this.getFields(n$46,a$30)).filter(n$46=>n$46!==void 0).flat(),s$25=new Set(o$32);if(s$25.has(s$15.CustomFields)){let n$46=e$19.map(a$30=>r$34[a$30.message.payload.id]);if(n$46.length>0){let a$30=Nme(n$46);s$25=new Set([...o$32,...a$30]);}}return Array.from(s$25);}createAddFieldsContext(e$19,r$34){return{message:e$19,dataView:r$34,fields:[]};}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Vme=(()=>{class t$21{constructor(e$19,r$34){this.store=e$19,this.taskV3WebsocketConfigService=r$34,this.bufferedMessages=[],this.bufferTimer=null,this.config=null;}setConfig(e$19){return this.config=e$19,this;}handleUpdate(e$19,r$34){if(t$18(!!this.config,`config cannot be null`),this.bufferedMessages.push({message:e$19,dataView:r$34}),this.bufferedMessages.length>=this.config.maxBufferSize){this.processBufferedMessages();return;}this.bufferTimer||(this.bufferTimer=F$21(()=>{this.processBufferedMessages();},this.config.bufferTime));}processBufferedMessages(){if(this.bufferTimer&&(P$16(this.bufferTimer),this.bufferTimer=null),this.bufferedMessages.length===0)return;let e$19=[...this.bufferedMessages];this.bufferedMessages=[],this.refetchTasksInBulk(e$19);}refetchTasksInBulk(e$19){let r$34=e$19.reduce((o$32,s$25)=>(o$32[s$25.message.payload.id]=[...(o$32[s$25.message.payload.id]??[]),s$25.message],o$32),{});this.store.select(p$24).pipe(Ve$4(1)).subscribe(o$32=>{let s$25=this.taskV3WebsocketConfigService.getBulkFields(e$19,o$32);this.store.dispatch(u$14({taskIds:e$19.map(n$46=>n$46.message.payload.id),fieldNames:s$25,contextsByTaskId:r$34,tags:[[n$34.Refresh,`TaskUpdateWebsocketService.refetchTasksInBulk`]]}));});}static{this.fac=function(r$34){return new(r$34||t$21)(ge$10(q$19),ge$10(jk));};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();hr$3();Lk=class extends ca{constructor(){super(...arguments),this.bulkTaskUpdateService=null,this.syntheticMarkerService=null;}setBulkTaskUpdateService(i$27){return this.bulkTaskUpdateService=i$27,this;}setSyntheticMarkerService(i$27){return this.syntheticMarkerService=i$27,this;}execute(){return t$18(!!this.bulkTaskUpdateService,`bulkTaskUpdateService cannot be null`),t$18(!!this.store,`store cannot be null`),t$18(!!this.syntheticMarkerService,`syntheticMarkerService cannot be null`),t$18(!!this.optimizedTaskUpdateMessage,`optimizedTaskUpdateMessage cannot be null`),this.syntheticMarkerService.mark(`service.task_update_websocket.refetch_on_task_updated.${this.optimizedTaskUpdateMessage.payload.id}`,{client_trace:this.optimizedTaskUpdateMessage.payload.client_trace,entityId:this.optimizedTaskUpdateMessage.payload.id}).setGenericName(`service.task_update_websocket.refetch_on_task_updated`),this.store.select(b$10).pipe(Is$1(e$19=>{this.bulkTaskUpdateService?.handleUpdate(this.optimizedTaskUpdateMessage,e$19);}));}};dm();hr$3();Dk=class extends ca{constructor(){super(...arguments),this.syntheticMarkerService=null;}setSyntheticMarkerService(i$27){return this.syntheticMarkerService=i$27,this;}execute(){t$18(!!this.store,`store cannot be null`),t$18(!!this.taskV3WebsocketConfigService,`taskV3WebsocketConfigService cannot be null`);let i$27=this.optimizedTaskUpdateMessage;return i$27?this.store.select(b$10).pipe(Is$1(e$19=>{this.store.dispatch(Se$5.fetchTaskOnTaskUpdated({taskId:i$27.payload.id,context:i$27,fields:this.taskV3WebsocketConfigService.getSingleTaskFields(i$27,e$19)}));}),Ve$4(1)):qe$6(void 0);}};VN();Ume=(()=>{class t$21{constructor(){this.syntheticMarkerService=C$23(N$12),this.bulkUpdateService=C$23(Vme),this.bulkWebsocketUpdateConfig$=l$22(O$16.TaskShouldUseBulkForWebsocketUpdates).pipe(q$20(e$19=>n$43(e$19)));}getUnitOfWork(){return this.bulkWebsocketUpdateConfig$.pipe(q$20(e$19=>e$19?(this.bulkUpdateService.setConfig(e$19),new Lk().setBulkTaskUpdateService(this.bulkUpdateService)):new Dk()),q$20(e$19=>e$19.setSyntheticMarkerService(this.syntheticMarkerService)));}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Wme=(()=>{class t$21{constructor(){this.initialized=!1,this.store=C$23(q$19),this.ovmRumService=C$23(E$10),this.destroyRef=C$23(at$11),this.fetchTaskUnitOfWorkFactory=C$23(Ume),this.fetchTaskUnitOfWork=null,this.taskUpdateWebsocketService=C$23(A$5),this.taskV3WebsocketConfigService=C$23(jk),this.httpSessionService=C$23(n$38),this.taskUpdateHelper=C$23(Eme),this.taskCrudWebsocketHelper=C$23(Wi);}init(){return this.initialized?qe$6(!0):this.fetchTaskUnitOfWorkFactory.getUnitOfWork().pipe(Is$1(e$19=>{this.fetchTaskUnitOfWork=e$19,this.initialized=!0;}),q$20(()=>!0),F$22(this.destroyRef));}createUnitsOfWork(e$19,r$34){return t$18(!!this.fetchTaskUnitOfWork,`fetchTaskUnitOfWork cannot be null`),[this.addCommonDepenencies(new $k()).setHttpSessionService(this.httpSessionService).setTaskCrudWebsocketHelper(this.taskCrudWebsocketHelper).init(e$19,r$34),this.addCommonDepenencies(new Pk()).init(e$19,r$34),this.addCommonDepenencies(this.fetchTaskUnitOfWork).init(e$19,r$34)];}addCommonDepenencies(e$19){return e$19.setTaskUpdateHelper(this.taskUpdateHelper).setStore(this.store).setOvmRumService(this.ovmRumService).setTaskUpdateWebsocketService(this.taskUpdateWebsocketService).setTaskV3WebsocketConfigService(this.taskV3WebsocketConfigService).setHttpSessionService(this.httpSessionService);}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();VN();Hme=(()=>{class t$21{constructor(){this.handlers=new Map(),this.fetchTaskOnTaskUpdate=C$23(Wme),this.destroyRef=C$23(at$11),this.taskUpdateHandledInLast5s=0,this.taskUpdateIgnoredInLast5s=0;}init(){this.handlers.set(`taskUpdate`,[this.fetchTaskOnTaskUpdate]),we$3(5e3).pipe(Is$1(()=>{Ni$1.setGlobalContextProperty(`taskUpdateHandledInLast5s`,this.taskUpdateHandledInLast5s),Ni$1.setGlobalContextProperty(`taskUpdateIgnoredInLast5s`,this.taskUpdateIgnoredInLast5s),this.taskUpdateHandledInLast5s=0,this.taskUpdateIgnoredInLast5s=0;}),F$22(this.destroyRef)).subscribe();}onMessage(e$19,r$34,o$32){let s$25=Date.now();if(!(`msg`in r$34)||typeof r$34.msg!=`string`){w$2.next(xk(r$34,{timestamp:s$25,hasHandler:!1})),o$32(e$19,r$34);return;}let n$46=this.handlers.get(r$34.msg);if(n$46){w$2.next(xk(r$34,{timestamp:s$25,hasHandler:!0})),n$46.forEach(a$30=>{if(`init`in a$30){a$30.init().pipe(oe$13(Boolean),Ve$4(1)).subscribe(()=>this.executeHandler(a$30,e$19,r$34));return;}this.executeHandler(a$30,e$19,r$34);});return;}w$2.next(xk(r$34,{timestamp:s$25,hasHandler:!1})),o$32(e$19,r$34);}createCountTap(){let e$19=!1;return r$34=>{e$19||(r$34?this.taskUpdateHandledInLast5s++:this.taskUpdateIgnoredInLast5s++,e$19=!0);};}executeHandler(e$19,r$34,o$32){e$19.createUnitsOfWork(r$34,o$32).forEach(n$46=>{n$46.willExecute().pipe(Is$1(this.createCountTap()),Ve$4(1),oe$13(Boolean),le$5(()=>n$46.execute()),Ve$4(1)).subscribe();});}static{this.fac=function(r$34){return new(r$34||t$21)();};}static{this.prov=k$27({token:t$21,factory:t$21.fac,providedIn:`root`});}}return t$21;})();Gme=[{provide:Ci$1,useExisting:Le,multi:!0},{provide:Ci$1,useExisting:yme,multi:!0},{provide:Ci$1,useExisting:Hme,multi:!0},{provide:Ci$1,useExisting:G$9,multi:!0},{provide:Ci$1,useExisting:M$4,multi:!0}];zme={providers:[hce(),Je$5()?t6():e6(),Qe$2(Ze$1()),Jl(F6,gce,m6.forRoot(),G6.forRoot(),M$15.forRoot({storageType:`localStorage`}),Nt$1.forRoot(),Yt$1,Ee$1.forRoot({enable:!0,entryTypes:{navigation:!1,reload:!0,paint:!1,network:!0}}),Be.forRoot(K6),W6,q6.forRoot()),Yo$1(n8,Zo$1({onSameUrlNavigation:`reload`})),{provide:ri$2,useClass:YC$1},{provide:ht$1,useClass:Be$6},{provide:Gt$1,useClass:O6},y6(),R6(KM),{provide:De$3,useClass:Mb},{provide:P$14,useClass:v6},Zce(),M$4,Gme,{provide:Ft,useClass:v$2},{provide:r$23,useClass:p6},{provide:n$32,useClass:gme},...(Gd()?[w6()]:[]),{provide:lo,useClass:Ke},T(),Rw,hD(()=>C$23(r$23).init()),hD(()=>C$23($$5).init()),mme(),hD(()=>I$24(null,null,function*(){let t$21=C$23(ts),i$27=C$23(st$7),e$19=C$23(Se$4),r$34=C$23(V6),o$32=C$23(yC),s$25=C$23(n$32);t$21.init(),i$27.init(),e$19.init(),r$34.init(),o$32.init(),yield s$25.init();})),Ib([Dd,Ph,xh,dh,Dh]),hD(()=>{C$23(n6).init();}),s6(),ame(),dme(),pme(),fme(),g$3(),d6(),_6(),lme(),Ni,k6,r6,h6(),g6(),{provide:Qn,useClass:Gd()?a6:Qn},...D6,{provide:Xp,useFactory:()=>(p$1.AngularBootstrapComponent$.next(ka()),()=>{}),multi:!0},PQ(),...(Gd()?[M6()]:[]),{provide:ht,useClass:u6},{provide:Ct$1,useClass:f6},vC,T$4,x6()]};performance.mark(`app_bootstrap.script.bootstrap_ts.loaded`);w$25.production;hCe=f$30.byNamespace(`platform`);fn.initialize();gCe=(t$21,i$27,e$19)=>{fn.addLog({type:t$21,namespace:i$27,data:e$19});};_$11(gCe);performance.mark(`app_bootstrap.script.main_bundle.loaded`);qme();});init_main();